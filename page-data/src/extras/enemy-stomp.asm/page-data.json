{"componentChunkName":"component---src-templates-asm-source-jsx","path":"/src/extras/enemy-stomp.asm","webpackCompilationHash":"fc14a45387e38b27e491","result":{"data":{"asmSource":{"path":"/src/extras/enemy-stomp.asm","name":"enemy-stomp","raw":"; inside CheckCollisionWithPlayer_NotInvincible\nIFDEF JUMP_STOMPS\n\tLDA ObjectType, Y\n\tCMP #Enemy_ShyguyRed\n\tBMI CheckCollisionWithPlayer_NoStompEnemy\n\tCMP #Enemy_Ostro\n\tBPL CheckCollisionWithPlayer_NoStompEnemy\n\n\tLDA byte_RAM_F\n\tAND #$0B\n\tBEQ CheckCollisionWithPlayer_StompEnemy\nCheckCollisionWithPlayer_NoStompEnemy:\nENDIF\n\n; new subroutine\nIFDEF JUMP_STOMPS\nCheckCollisionWithPlayer_StompEnemy:\n\tLDA PlayerYVelocity\n\tBMI CheckCollisionWithPlayer_ExitStompEnemy\n\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, Y\n\n\tLDA EnemyCollision, Y\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, Y\n\n\t; stash Y\n\tTYA\n\tPHA\n\n\tLDY #$02\n\t; INY\n\n\tLDA JumpHeightStanding, Y\n\tAND #$7F\n\tASL A\n\tORA #$80\n\tSTA PlayerYVelocity\n\tLDA JumpFloatLength\n\tSTA JumpFloatTimer\n\n\t; restore Y\n\tPLA\n\tTAY\n\n\tLDA #SoundEffect1_EnemyHit\n\tSTA SoundEffectQueue1\n\nCheckCollisionWithPlayer_ExitStompEnemy:\n\tRTS\nENDIF\n","sections":[{"comment":"inside CheckCollisionWithPlayer_NotInvincible","content":"IFDEF JUMP_STOMPS\n\tLDA ObjectType, Y\n\tCMP #Enemy_ShyguyRed\n\tBMI CheckCollisionWithPlayer_NoStompEnemy\n\tCMP #Enemy_Ostro\n\tBPL CheckCollisionWithPlayer_NoStompEnemy\n\n\tLDA byte_RAM_F\n\tAND #$0B\n\tBEQ CheckCollisionWithPlayer_StompEnemy\nCheckCollisionWithPlayer_NoStompEnemy:\nENDIF\n","htmlComment":"<p>inside CheckCollisionWithPlayer_NotInvincible</p>\n","htmlContent":"IFDEF JUMP_STOMPS\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_ShyguyRed\n\t<span class=\"token opcode property\">BMI</span> CheckCollisionWithPlayer_NoStompEnemy\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Ostro\n\t<span class=\"token opcode property\">BPL</span> CheckCollisionWithPlayer_NoStompEnemy\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer_StompEnemy\nCheckCollisionWithPlayer_NoStompEnemy:\nENDIF\n","line":2},{"comment":"new subroutine","content":"IFDEF JUMP_STOMPS\nCheckCollisionWithPlayer_StompEnemy:\n\tLDA PlayerYVelocity\n\tBMI CheckCollisionWithPlayer_ExitStompEnemy\n\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, Y\n\n\tLDA EnemyCollision, Y\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, Y\n","htmlComment":"<p>new subroutine</p>\n","htmlContent":"IFDEF JUMP_STOMPS\nCheckCollisionWithPlayer_StompEnemy:\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> CheckCollisionWithPlayer_ExitStompEnemy\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Dead\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n","line":16},{"comment":"stash Y","content":"\tTYA\n\tPHA\n\n\tLDY #$02\n","htmlComment":"<p>stash Y</p>\n","htmlContent":"\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n","line":29},{"comment":"INY","content":"\tLDA JumpHeightStanding, Y\n\tAND #$7F\n\tASL A\n\tORA #$80\n\tSTA PlayerYVelocity\n\tLDA JumpFloatLength\n\tSTA JumpFloatTimer\n","htmlComment":"<p>INY</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> JumpHeightStanding, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> JumpFloatLength\n\t<span class=\"token opcode property\">STA</span> JumpFloatTimer\n","line":34},{"comment":"restore Y","content":"\tPLA\n\tTAY\n\n\tLDA #SoundEffect1_EnemyHit\n\tSTA SoundEffectQueue1\n\nCheckCollisionWithPlayer_ExitStompEnemy:\n\tRTS\nENDIF\n","htmlComment":"<p>restore Y</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAY</span>\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_EnemyHit\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\nCheckCollisionWithPlayer_ExitStompEnemy:\n\t<span class=\"token opcode property\">RTS</span>\nENDIF\n","line":44}]}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}