{"componentChunkName":"component---src-templates-asm-source-jsx","path":"/src/extras/debug-f.asm","webpackCompilationHash":"6067a643bcd1fafeea40","result":{"data":{"asmSource":{"path":"/src/extras/debug-f.asm","name":"debug-f","raw":"\n; Debug tools\nDebug_Init:\n\tLDA Debug_InMenu ; If already in the debug menu,\n\tBNE Debug_AlreadyIn ; don't re-hook everything. That's bad.\n\tLDA MMC3PRGBankTemp ; Save the current bank...\n\tPHA ; and put it on the stack.\n\tLDA #1\n\tSTA Debug_InMenu\n\tLDA #PRGBank_A_B ; Swap to the debug/credits bank\n\tJSR ChangeMappedPRGBank\n\n\tLDA PPUScrollXMirror\n\tSTA $7FE0\n\tLDA PPUScrollYMirror\n\tSTA $7FE1\n\tLDA PPUMaskMirror\n\tSTA $7FE2\n\tLDA PPUCtrlMirror\n\tSTA $7FE3\n\tLDA $4c5\n\tSTA $7FE4\n\tLDX #6\n-\tLDA BackgroundCHR1 - 1, X\n\tSTA $7FE5 - 1, X\n\tDEX\n\tBNE -\n\n\tJMP Debug_InitMenu ; And off we go\n\n\nDebug_Abort:\n; Restore a bunch of crap we nuked\n\tLDA $7FE0\n\tSTA PPUScrollXMirror\n\tLDA $7FE1\n\tSTA PPUScrollYMirror\n\tLDA $7FE2\n\tSTA PPUMaskMirror\n\tLDA $7FE3\n\tSTA PPUCtrlMirror\n\tLDA $7FE4\n\tSTA $4C5\n\tLDX #6\n-\tLDA $7FE5 - 1, X\n\tSTA BackgroundCHR1 - 1, X\n\tDEX\n\tBNE -\n\n\n\tLDA #0\n\tSTA Debug_InMenu\n\tPLA\n\tJSR ChangeMappedPRGBank\nDebug_AlreadyIn:\n; Restore the stack to the way it was (that is, undo our hijack)\n; This will NOT fix anything the debug menu wiped out, like\n; the nametables, palettes, whatever else...\n; It's basically a \"I just want to see what happens\" button.\n; Sometimes you can almost fix it if you pause/unpause though.\n\tPLA\n\tTAY\n\tPLA\n\tTAX\n\tPLA\n\tPLP\n\tRTI\n\nDebug_Activate:\n\tLDA #0\n\tSTA Debug_InMenu\n\tLDA #Music2_StopMusic\n\tSTA MusicQueue2\n\tLDA #1\n\tSTA PlayerState\n\tLDA #1\n\tSTA PlayerStateTimer\n\tSTA TransitionType\n\tPLA ; Clean up the stack from our mess earlier\n\tPLA\n\tTAY\n\tPLA\n\tTAX\n\tPLA\n\tPLP\n\tPLA\n\tPLA\n\tJMP StartLevelAfterTitleCard\n","sections":[{"comment":null,"content":"","htmlComment":"\n","htmlContent":"","line":1},{"comment":"Debug tools","content":"Debug_Init:\n\tLDA Debug_InMenu ; If already in the debug menu,\n\tBNE Debug_AlreadyIn ; don't re-hook everything. That's bad.\n\tLDA MMC3PRGBankTemp ; Save the current bank...\n\tPHA ; and put it on the stack.\n\tLDA #1\n\tSTA Debug_InMenu\n\tLDA #PRGBank_A_B ; Swap to the debug/credits bank\n\tJSR ChangeMappedPRGBank\n\n\tLDA PPUScrollXMirror\n\tSTA $7FE0\n\tLDA PPUScrollYMirror\n\tSTA $7FE1\n\tLDA PPUMaskMirror\n\tSTA $7FE2\n\tLDA PPUCtrlMirror\n\tSTA $7FE3\n\tLDA $4c5\n\tSTA $7FE4\n\tLDX #6\n-\tLDA BackgroundCHR1 - 1, X\n\tSTA $7FE5 - 1, X\n\tDEX\n\tBNE -\n\n\tJMP Debug_InitMenu ; And off we go\n\n\nDebug_Abort:","htmlComment":"<p>Debug tools</p>\n","htmlContent":"Debug_Init:\n\t<span class=\"token opcode property\">LDA</span> Debug_InMenu <span class=\"token comment\">; If already in the debug menu,</span>\n\t<span class=\"token opcode property\">BNE</span> Debug_AlreadyIn <span class=\"token comment\">; don't re-hook everything. That's bad.</span>\n\t<span class=\"token opcode property\">LDA</span> MMC<span class=\"token decimalnumber string\">3</span>PRGBankTemp <span class=\"token comment\">; Save the current bank...</span>\n\t<span class=\"token opcode property\">PHA</span> <span class=\"token comment\">; and put it on the stack.</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#1</span>\n\t<span class=\"token opcode property\">STA</span> Debug_InMenu\n\t<span class=\"token opcode property\">LDA</span> #PRGBank_A_B <span class=\"token comment\">; Swap to the debug/credits bank</span>\n\t<span class=\"token opcode property\">JSR</span> ChangeMappedPRGBank\n\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$7FE0</span>\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$7FE1</span>\n\t<span class=\"token opcode property\">LDA</span> PPUMaskMirror\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$7FE2</span>\n\t<span class=\"token opcode property\">LDA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$7FE3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$4c5</span>\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$7FE4</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token decimalnumber string\">#6</span>\n-\t<span class=\"token opcode property\">LDA</span> BackgroundCHR<span class=\"token decimalnumber string\">1</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$7FE5</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> -\n\n\t<span class=\"token opcode property\">JMP</span> Debug_InitMenu <span class=\"token comment\">; And off we go</span>\n\n\nDebug_Abort:","line":3},{"comment":"Restore a bunch of crap we nuked","content":"\tLDA $7FE0\n\tSTA PPUScrollXMirror\n\tLDA $7FE1\n\tSTA PPUScrollYMirror\n\tLDA $7FE2\n\tSTA PPUMaskMirror\n\tLDA $7FE3\n\tSTA PPUCtrlMirror\n\tLDA $7FE4\n\tSTA $4C5\n\tLDX #6\n-\tLDA $7FE5 - 1, X\n\tSTA BackgroundCHR1 - 1, X\n\tDEX\n\tBNE -\n\n\n\tLDA #0\n\tSTA Debug_InMenu\n\tPLA\n\tJSR ChangeMappedPRGBank\nDebug_AlreadyIn:","htmlComment":"<p>Restore a bunch of crap we nuked</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$7FE0</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$7FE1</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$7FE2</span>\n\t<span class=\"token opcode property\">STA</span> PPUMaskMirror\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$7FE3</span>\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$7FE4</span>\n\t<span class=\"token opcode property\">STA</span> <span class=\"token hexnumber string\">$4C5</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token decimalnumber string\">#6</span>\n-\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">$7FE5</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> BackgroundCHR<span class=\"token decimalnumber string\">1</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> -\n\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#0</span>\n\t<span class=\"token opcode property\">STA</span> Debug_InMenu\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JSR</span> ChangeMappedPRGBank\nDebug_AlreadyIn:","line":34},{"comment":"Restore the stack to the way it was (that is, undo our hijack)\nThis will NOT fix anything the debug menu wiped out, like\nthe nametables, palettes, whatever else...\nIt's basically a \"I just want to see what happens\" button.\nSometimes you can almost fix it if you pause/unpause though.","content":"\tPLA\n\tTAY\n\tPLA\n\tTAX\n\tPLA\n\tPLP\n\tRTI\n\nDebug_Activate:\n\tLDA #0\n\tSTA Debug_InMenu\n\tLDA #Music2_StopMusic\n\tSTA MusicQueue2\n\tLDA #1\n\tSTA PlayerState\n\tLDA #1\n\tSTA PlayerStateTimer\n\tSTA TransitionType\n\tPLA ; Clean up the stack from our mess earlier\n\tPLA\n\tTAY\n\tPLA\n\tTAX\n\tPLA\n\tPLP\n\tPLA\n\tPLA\n\tJMP StartLevelAfterTitleCard\n","htmlComment":"<p>Restore the stack to the way it was (that is, undo our hijack)\nThis will NOT fix anything the debug menu wiped out, like\nthe nametables, palettes, whatever else...\nIt's basically a \"I just want to see what happens\" button.\nSometimes you can almost fix it if you pause/unpause though.</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">RTI</span>\n\nDebug_Activate:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#0</span>\n\t<span class=\"token opcode property\">STA</span> Debug_InMenu\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">2</span>_StopMusic\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#1</span>\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#1</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">PLA</span> <span class=\"token comment\">; Clean up the stack from our mess earlier</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JMP</span> StartLevelAfterTitleCard\n","line":61}]}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}