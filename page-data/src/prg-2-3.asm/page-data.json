{"componentChunkName":"component---src-templates-asm-source-jsx","path":"/src/prg-2-3.asm","webpackCompilationHash":"6067a643bcd1fafeea40","result":{"data":{"asmSource":{"path":"/src/prg-2-3.asm","name":"prg-2-3","raw":";\n; Bank 2 & Bank 3\n; ===============\n;\n; What's inside:\n;\n;   - Enemy initialization and logic\n;\n\nCarryYOffsets:\nCarryYOffsetBigLo:\n\t.db $FA ; Mario\n\t.db $F6 ; Princess\n\t.db $FC ; Toad\n\t.db $F7 ; Luigi\n\nCarryYOffsetBigHi:\n\t.db $FF ; Mario\n\t.db $FF ; Princess\n\t.db $FF ; Toad\n\t.db $FF ; Luigi\n\nCarryYOffsetSmallLo:\n\t.db $02 ; Mario\n\t.db $FE ; Princess\n\t.db $04 ; Toad\n\t.db $FF ; Luigi\n\nCarryYOffsetSmallHi:\n\t.db $00 ; Mario\n\t.db $FF ; Princess\n\t.db $00 ; Toad\n\t.db $FF ; Luigi\n\n\nAreaMainRoutine:\n\tLDA DoAreaTransition\n\tBEQ AreaMainRoutine_NoTransition\n\tRTS\n\nAreaMainRoutine_NoTransition:\n\tLDA AreaInitialized\n\tBEQ AreaInitialization\n\n\tJMP loc_BANK2_816C\n\n; ---------------------------------------------------------------------------\n\nAreaInitialization:\n\tINC AreaInitialized\n\tSTA byte_RAM_5BA\n\tSTA POWQuakeTimer\n\tSTA SkyFlashTimer\n\tSTA CrystalAndHawkmouthOpenSize\n\tSTA HawkmouthClosing\n\tSTA SwarmType\n\tSTA HawkmouthOpenTimer\n\tSTA ScrollXLock\n\tSTA VerticalScrollDirection\n\tSTA PlayerXVelocity\n\tSTA DamageInvulnTime\n\tSTA HoldingItem\n\tSTA PlayerStateTimer\n\tSTA BackgroundYOffset\n\tSTA PokeyTempScreenX\n\tSTA CrouchJumpTimer\n\tSTA JumpFloatTimer\n\tSTA QuicksandDepth\n\tSTA BossBeaten\n\nIFDEF RESET_CHR_LATCH\n\tLDY #$FF\n\tSTY BossTileset\n\tINC ResetCHRLatch\nENDIF\n\n\tLDY #$1B\nAreaInitialization_CarryYOffsetLoop:\n\t; Copy the global carrying Y offsets to memory\n\t; These are used for every character for different frames of the pickup animation\n\tLDA ItemCarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM, Y\n\tDEY\n\tBPL AreaInitialization_CarryYOffsetLoop\n\nIFDEF CONTROLLER_2_DEBUG\n\tJSR CopyCarryYOffsets\nENDIF\n\n\t; Copy the character-specific FINAL carrying heights into memory\n\tLDY CurrentCharacter\n\tLDA CarryYOffsetBigLo, Y\n\tSTA ItemCarryYOffsetsRAM\n\tLDA CarryYOffsetSmallLo, Y\n\tSTA ItemCarryYOffsetsRAM + $07\n\tLDA CarryYOffsetBigHi, Y\n\tSTA ItemCarryYOffsetsRAM + $0E\n\tLDA CarryYOffsetSmallHi, Y\n\tSTA ItemCarryYOffsetsRAM + $15\n\n\tLDA #$B6\n\tSTA PseudoRNGValues\n\tLDA TransitionType\n\n\t; Play the slide-whistle when you start the game and drop into 1-1\n\tORA CurrentLevel\n\tBNE AreaInitialization_CheckObjectCarriedOver\n\n\tLDA #SoundEffect2_IntroFallSlide\n\tSTA SoundEffectQueue2\n\nAreaInitialization_CheckObjectCarriedOver:\n\tLDA ObjectCarriedOver\n\tBEQ AreaInitialization_SetEnemyData\n\n\tLDX #$05\n\tSTX byte_RAM_12\n\tCMP #Enemy_Mushroom\n\tBEQ AreaInitialization_SetEnemyData\n\n\tSTA ObjectType, X\n\tLDY #EnemyState_Alive\n\tSTY EnemyState + 5\n\tLDY #$FF\n\tSTY unk_RAM_441 + 5\n\tCMP #Enemy_Rocket\n\tBNE AreaInitialization_NonRocketCarryOver\n\nAreaInitialization_Rocket:\n\t; A = $38 (Enemy_Rocket)\n\t; X = $05 (from above)\n\tSTA EnemyArray_B1, X\n\tSTA PlayerInRocket, X ; Bug? This sets ObjectXAcceleration for enemy 0\n\tSTA EnemyArray_477, X\n\tLDA #$00\n\tSTA ObjectXHi, X\n\tSTA ObjectYHi, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\tASL A\n\tSTA ObjectYLo, X\n\tLDA #$78\n\tSTA ObjectXLo, X\n\tBNE AreaInitialization_SetEnemyData\n\nAreaInitialization_NonRocketCarryOver:\n\tPHA\n\tSTX ObjectBeingCarriedIndex\n\tJSR EnemyInit_Basic\n\n\tLDA #$01\n\tSTA ObjectBeingCarriedTimer, X\n\tSTA HoldingItem\n\tJSR CarryObject\n\n\tPLA\n\tCMP #Enemy_Key\n\tBNE AreaInitialization_SetEnemyData\n\nAreaInitialization_KeyCarryOver:\n\tINC EnemyVariable, X\n\tDEX\n\tSTX byte_RAM_12\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, X\n\tLDA #Enemy_Phanto\n\tSTA ObjectType, X\n\tJSR EnemyInit_Basic\n\n\tLDA #$00\n\tSTA PhantoActivateTimer\n\tLDA ScreenYLo\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tSTA ObjectYHi, X\n\tLDA ScreenBoundaryLeftLo\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tSTA ObjectXHi, X\n\tJSR UnlinkEnemyFromRawData\n\nAreaInitialization_SetEnemyData:\n\tLDA #<RawEnemyDataAddr\n\tSTA RawEnemyData\n\tLDA #>RawEnemyDataAddr\n\tSTA RawEnemyData + 1\n\tLDA IsHorizontalLevel\n\tBNE AreaInitialization_HorizontalArea\n\nAreaInitialization_VerticalArea:\n\t; Loads area enemies based on the vertical screen scroll\n\tLDA #$14\n\tSTA byte_RAM_9\n\tLDA ScreenYLo\n\tSBC #$30\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenYHi\n\tSBC #$00\n\tSTA byte_RAM_6\n\nloc_BANK2_8124:\n\tLDA byte_RAM_6\n\tCMP #$0B\n\tBCS loc_BANK2_8130\n\n\tJSR loc_BANK2_8311\n\tJSR loc_BANK2_8311\n\nloc_BANK2_8130:\n\tJSR sub_BANK2_8138\n\n\tDEC byte_RAM_9\n\tBPL loc_BANK2_8124\n\n\tRTS\n\n; End of function AreaMainRoutine\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_8138:\n\tLDA byte_RAM_5\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_5\n\tBCC locret_BANK2_8143\n\n\tINC byte_RAM_6\n\nlocret_BANK2_8143:\n\tRTS\n\n; End of function sub_BANK2_8138\n\n; ---------------------------------------------------------------------------\n\nAreaInitialization_HorizontalArea:\n\t; Loads area enemies based on the horizontal screen scroll\n\tLDA ScreenBoundaryLeftLo\n\tSBC #$30\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenBoundaryLeftHi\n\tSBC #$00\n\tSTA byte_RAM_6\n\tLDA #$17\n\tSTA byte_RAM_9\n\nloc_BANK2_8158:\n\tLDA byte_RAM_6\n\tCMP #$B\n\tBCS loc_BANK2_8164\n\n\tJSR sub_BANK2_827D\n\tJSR sub_BANK2_827D\n\nloc_BANK2_8164:\n\tJSR sub_BANK2_8138\n\n\tDEC byte_RAM_9\n\tBPL loc_BANK2_8158\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_816C:\n\tJSR loc_BANK2_8256\n\nIFDEF RESET_CHR_LATCH\n\tJSR CheckResetCHRLatch\nENDIF\n\n\tLDA StopwatchTimer\n\tBEQ loc_BANK2_8185\n\n\tLDA byte_RAM_10\n\tAND #$1F\n\tBNE loc_BANK2_817F\n\n\tLDY #SoundEffect1_StopwatchTick\n\tSTY SoundEffectQueue1\n\nloc_BANK2_817F:\n\tLSR A\n\tBCC loc_BANK2_8185\n\n\tDEC StopwatchTimer\n\nloc_BANK2_8185:\n\tLDA ScreenBoundaryLeftLo\n\tCLC\n\tADC #$FF\n\tSTA ScreenBoundaryRightLo\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ScreenBoundaryRightHi\n\tLDX #$08\n\nloc_BANK2_8198:\n\tSTX byte_RAM_12\n\tTXA\n\tCLC\n\tADC SpriteFlickerSlot\n\tTAY\n\nloc_BANK2_81A0:\n\tLDA SpriteFlickerDMAOffset, Y\n\tLDY ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_81B1\n\n\tLDA #Enemy_BeezoStraight\n\tLDY ObjectType, X\n\tCMP #Enemy_Rocket\n\tBNE loc_BANK2_81B1\n\n\tLDA #$00\n\nloc_BANK2_81B1:\n\tSTA byte_RAM_F4\n\tLDA EnemyState, X\n\tCMP #EnemyState_Dead\n\tBCS loc_BANK2_81C4\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_81C4\n\n\tLDA StopwatchTimer\n\tBNE loc_BANK2_81D2\n\nloc_BANK2_81C4:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_81CA\n\n\tDEC EnemyTimer, X\n\nloc_BANK2_81CA:\n\tLDA EnemyArray_453, X\n\tBEQ loc_BANK2_81D2\n\n\tDEC EnemyArray_453, X\n\nloc_BANK2_81D2:\n\tLDA EnemyArray_45C, X\n\nloc_BANK2_81D5:\n\tBEQ loc_BANK2_81DA\n\n\tDEC EnemyArray_45C, X\n\nloc_BANK2_81DA:\n\tLDA EnemyArray_438, X\n\tBEQ loc_BANK2_81E7\n\n\tLDA byte_RAM_10\n\tLSR A\n\tBCC loc_BANK2_81E7\n\n\tDEC EnemyArray_438, X\n\nloc_BANK2_81E7:\n\tJSR DoPRNGBullshitProbably\n\n\tJSR PutCarriedObjectInHands\n\n\tJSR HandleEnemyState\n\n\tLDX byte_RAM_12\n\tDEX\n\tBPL loc_BANK2_8198\n\n\tLDA SwarmType\n\tBEQ HandleEnemyState_Inactive\n\nInitializeSwarm:\n\tSEC\n\tSBC #((EnemyInitializationTable_End - EnemyInitializationTable) / 2)\n\nInitializeSwarmRelative:\n\tJSR JumpToTableAfterJump\n\n\nGeneratorInitializationTable:\n\t.dw Swarm_AlbatossCarryingBobOmb\n\t.dw Swarm_BeezoDiving\n\t.dw Swarm_Stop\n\t.dw Generator_VegetableThrower\nGeneratorInitializationTable_End:\n\n\nSwarm_Stop:\n\tLDA #$00\n\tSTA SwarmType\n\nHandleEnemyState_Inactive:\n\tRTS\n\n; End of function Swarm_Stop\n\n; =============== S U B R O U T I N E =======================================\n\n; I am very good at figuring out what things do. Yes.\n\nDoPRNGBullshitProbably:\n\tLDY #$00\n\tJSR sub_BANK2_8214\n\n\tINY\n\n; End of function DoPRNGBullshitProbably\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_8214:\n\tLDA PseudoRNGValues\n\tASL A\n\tASL A\n\tSEC\n\tADC PseudoRNGValues\n\tSTA PseudoRNGValues\n\tASL PseudoRNGValues + 1\n\tLDA #$20\n\tBIT PseudoRNGValues + 1\n\tBCC loc_BANK2_822E\n\n\tBEQ loc_BANK2_8233\n\n\tBNE loc_BANK2_8230\n\nloc_BANK2_822E:\n\tBNE loc_BANK2_8233\n\nloc_BANK2_8230:\n\tINC PseudoRNGValues + 1\n\nloc_BANK2_8233:\n\tLDA PseudoRNGValues + 1\n\tEOR PseudoRNGValues\n\tSTA PseudoRNGValues + 2, Y\n\tRTS\n\n; End of function sub_BANK2_8214\n\n; ---------------------------------------------------------------------------\n\nHandleEnemyState:\n\tLDA EnemyState, X\n\tJSR JumpToTableAfterJump\n\n\t.dw HandleEnemyState_Inactive ; 0 (not active)\n\t.dw HandleEnemyState_Alive ; Alive\n\t.dw HandleEnemyState_Dead ; Dead\n\t.dw HandleEnemyState_BlockFizzle ; Block fizzle\n\t.dw HandleEnemyState_BombExploding ; Bomb exploding\n\t.dw HandleEnemyState_PuffOfSmoke ; Puff of smoke\n\t.dw HandleEnemyState_Sand ; Sand after digging\n\t.dw loc_BANK2_85B2 ; Object carried/thrown?\n\n\nbyte_BANK2_8252:\n\t.db $18\n\t.db $E0\n\t.db $01\n\t.db $FF\n\n\nloc_BANK2_8256:\n\tLDA BossBeaten\n\tBNE locret_BANK2_82AB\n\n\tLDA IsHorizontalLevel\n\tJSR JumpToTableAfterJump\n\n\t.dw loc_BANK2_82ED ; vertical\n\t.dw loc_BANK2_8264 ; horizontal\n\n\nloc_BANK2_8264:\n\tLDY PlayerMovementDirection\n\tLDA ScreenBoundaryLeftLo\n\tCLC\n\tADC byte_BANK2_8252 - 1, Y\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenBoundaryLeftHi\n\tADC byte_BANK2_8252 + 1, Y\n\tSTA byte_RAM_6\n\tCMP #$0A\n\tBCS locret_BANK2_82AB\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_827D:\n\tLDA InSubspaceOrJar\n\tCMP #$02\n\tBEQ locret_BANK2_82AB\n\n\tLDX #$00\n\tSTX byte_RAM_0\n\nloc_BANK2_8288:\n\tCPX byte_RAM_6\n\tBEQ loc_BANK2_8298\n\n\tLDA byte_RAM_0\n\tTAY\n\tCLC\n\tADC (RawEnemyData), Y\n\tSTA byte_RAM_0\n\tINX\n\tJMP loc_BANK2_8288\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8298:\n\tLDY byte_RAM_0\n\tLDA (RawEnemyData), Y\n\tSTA byte_RAM_1\n\tLDX #$FF\n\tDEY\n\nloc_BANK2_82A1:\n\tINY\n\tINY\n\tINX\n\tINX\n\tCPX byte_RAM_1\n\tBCC loc_BANK2_82AC\n\n\tLDX byte_RAM_12\n\nlocret_BANK2_82AB:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_82AC:\n\tLDA (RawEnemyData), Y\n\tBMI loc_BANK2_82A1\n\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\n\tAND #$F0\n\tCMP byte_RAM_5\n\tBNE loc_BANK2_82A1\n\n\tLDA (RawEnemyData), Y\n\tCMP #Enemy_BossBirdo\n\tBCS loc_BANK2_82C8\n\n\tCMP #((EnemyInitializationTable_End - EnemyInitializationTable) / 2)\n\tBCC loc_BANK2_82C8\n\n\tSTA SwarmType\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_82C8:\n\tLDX #$04\nloc_BANK2_82CA:\n\tLDA EnemyState, X\n\tBEQ loc_BANK2_82D2\n\n\tDEX\n\tBPL loc_BANK2_82CA\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_82D2:\n\tSTX byte_RAM_12\n\tLDA byte_RAM_5\n\tSTA ObjectXLo, X\n\tLDA byte_RAM_6\n\tSTA ObjectXHi, X\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA ObjectYHi, X\n\tJMP loc_BANK2_8377\n\n; End of function sub_BANK2_827D\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_82ED:\n\tLDA byte_RAM_10\n\tAND #$01\n\tTAY\n\tINY\n\tLDA NeedVerticalScroll\n\tBEQ loc_BANK2_82FC\n\n\tAND #$03\n\tEOR #$03\n\tTAY\n\nloc_BANK2_82FC:\n\tLDA ScreenYLo\n\tCLC\n\tADC byte_BANK2_8252 - 1, Y\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenYHi\n\tADC byte_BANK2_8252 + 1, Y\n\tSTA byte_RAM_6\n\tCMP #$0A\n\tBCS locret_BANK2_82AB\n\nloc_BANK2_8311:\n\tLDX #$00\n\tSTX byte_RAM_0\n\nloc_BANK2_8315:\n\tCPX byte_RAM_6\n\tBEQ loc_BANK2_8325\n\n\tLDA byte_RAM_0\n\tTAY\n\tCLC\n\tADC (RawEnemyData), Y\n\tSTA byte_RAM_0\n\tINX\n\tJMP loc_BANK2_8315\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8325:\n\tLDY byte_RAM_0\n\tLDA (RawEnemyData), Y\n\tSTA byte_RAM_1\n\tLDX #$FF\n\tDEY\n\nloc_BANK2_832E:\n\tINY\n\tINY\n\tINX\n\tINX\n\tCPX byte_RAM_1\n\tBCC loc_BANK2_8339\n\n\tLDX byte_RAM_12\n\nlocret_BANK2_8338:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8339:\n\tLDA (RawEnemyData), Y\n\tBMI loc_BANK2_832E\n\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCMP byte_RAM_5\n\tBNE loc_BANK2_832E\n\n\tLDA (RawEnemyData), Y\n\tCMP #Enemy_BossBirdo\n\tBCS loc_BANK2_8357\n\n\tCMP #((EnemyInitializationTable_End - EnemyInitializationTable) / 2)\n\tBCC loc_BANK2_8357\n\n\tSTA SwarmType\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8357:\n\tLDX #$04\nloc_BANK2_8359:\n\tLDA EnemyState, X\n\tBEQ loc_BANK2_8361\n\n\tDEX\n\tBPL loc_BANK2_8359\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8361:\n\tSTX byte_RAM_12\n\tLDA byte_RAM_5\n\tSTA ObjectYLo, X\n\tLDA byte_RAM_6\n\tSTA ObjectYHi, X\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA #$00\n\tSTA ObjectXHi, X\n\nloc_BANK2_8377:\n\tSTA EnemyArray_SpawnsDoor, X\n\tSTY byte_RAM_C\n\tLDA (RawEnemyData), Y\n\tAND #%00111111\n\tCMP #$32\n\tBCS loc_BANK2_8393\n\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK2_8393\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$18\n\tCMP #$30\n\tBCC locret_BANK2_8338\n\nloc_BANK2_8393:\n\t; enable bit 7 of the raw enemy data to indicate that the enemy has spawned\n\tLDY byte_RAM_C\n\tLDA (RawEnemyData), Y\n\tORA #%10000000\n\tSTA (RawEnemyData), Y\n\n\tCMP #%10000000 | Enemy_BossBirdo\n\tAND #%01111111\n\tBCC loc_BANK2_83A6\n\n\tAND #%00111111\n\tSTA EnemyArray_SpawnsDoor, X\n\nloc_BANK2_83A6:\n\tSTA ObjectType, X\n\tTYA\n\tSTA unk_RAM_441, X\n\tINC EnemyState, X\n\tLDA ObjectType, X\n\nInitializeEnemy:\n\tJSR JumpToTableAfterJump\n\n; ---------------------------------------------------------------------------\nEnemyInitializationTable:\n\t.dw EnemyInit_Basic ; Heart\n\t.dw EnemyInit_Basic ; ShyguyRed\n\t.dw EnemyInit_Basic ; Tweeter\n\t.dw EnemyInit_Basic ; ShyguyPink\n\t.dw EnemyInit_Basic ; Porcupo\n\t.dw EnemyInit_Basic ; SnifitRed\n\t.dw EnemyInit_Stationary ; SnifitGray\n\t.dw EnemyInit_Basic ; SnifitPink\n\t.dw EnemyInit_Basic ; Ostro\n\t.dw EnemyInit_Bobomb ; BobOmb\n\t.dw EnemyInit_Basic ; AlbatossCarryingBobOmb\n\t.dw EnemyInit_AlbatossStartRight ; AlbatossStartRight\n\t.dw EnemyInit_AlbatossStartLeft ; AlbatossStartLeft\n\t.dw EnemyInit_Basic ; NinjiRunning\n\t.dw EnemyInit_Stationary ; NinjiJumping\n\t.dw EnemyInit_BeezoDiving ; BeezoDiving\n\t.dw EnemyInit_Basic ; BeezoStraight\n\t.dw EnemyInit_Basic ; WartBubble\n\t.dw EnemyInit_Basic ; Pidgit\n\t.dw EnemyInit_Trouter ; Trouter\n\t.dw EnemyInit_Basic ; Hoopstar\n\t.dw EnemyInit_JarGenerators ; JarGeneratorShyguy\n\t.dw EnemyInit_JarGenerators ; JarGeneratorBobOmb\n\t.dw EnemyInit_Phanto ; Phanto\n\t.dw EnemyInit_Cobrats ; CobratJar\n\t.dw EnemyInit_Cobrats ; CobratSand\n\t.dw EnemyInit_Pokey ; Pokey\n\t.dw EnemyInit_Basic ; Bullet\n\t.dw EnemyInit_Birdo ; Birdo\n\t.dw EnemyInit_Mouser ; Mouser\n\t.dw EnemyInit_Basic ; Egg\n\t.dw EnemyInit_Tryclyde ; Tryclyde\n\t.dw EnemyInit_Basic ; Fireball\n\t.dw EnemyInit_Clawgrip ; Clawgrip\n\t.dw EnemyInit_Basic ; ClawgripRock\n\t.dw EnemyInit_Stationary ; PanserStationaryFiresAngled\n\t.dw EnemyInit_Basic ; PanserWalking\n\t.dw EnemyInit_Stationary ; PanserStationaryFiresUp\n\t.dw EnemyInit_Basic ; Autobomb\n\t.dw EnemyInit_Basic ; AutobombFire\n\t.dw EnemyInit_WhaleSpout ; WhaleSpout\n\t.dw EnemyInit_Basic ; Flurry\n\t.dw EnemyInit_Fryguy ; Fryguy\n\t.dw EnemyInit_Fryguy ; FryguySplit\n\t.dw EnemyInit_Wart ; Wart\n\t.dw EnemyInit_HawkmouthBoss ; HawkmouthBoss\n\t.dw EnemyInit_Sparks ; Spark1\n\t.dw EnemyInit_Sparks ; Spark2\n\t.dw EnemyInit_Sparks ; Spark3\n\t.dw EnemyInit_Sparks ; Spark4\n\t.dw EnemyInit_Basic ; VegetableSmall\n\t.dw EnemyInit_Basic ; VegetableLarge\n\t.dw EnemyInit_Basic ; VegetableWart\n\t.dw EnemyInit_Basic ; Shell\n\t.dw EnemyInit_Basic ; Coin\n\t.dw EnemyInit_Basic ; Bomb\n\t.dw EnemyInit_Basic ; Rocket\n\t.dw EnemyInit_Basic ; MushroomBlock\n\t.dw EnemyInit_Basic ; POWBlock\n\t.dw EnemyInit_FallingLogs ; FallingLogs\n\t.dw EnemyInit_Basic ; SubspaceDoor\n\t.dw EnemyInit_Key ; Key\n\t.dw EnemyInit_Basic ; SubspacePotion\n\t.dw EnemyInit_Stationary ; Mushroom\n\t.dw EnemyInit_Stationary ; Mushroom1up\n\t.dw EnemyInit_Basic ; FlyingCarpet\n\t.dw EnemyInit_Hawkmouth ; HawkmouthRight\n\t.dw EnemyInit_Hawkmouth ; HawkmouthLeft\n\t.dw EnemyInit_CrystalBallStarmanStopwatch ; CrystalBall\n\t.dw EnemyInit_CrystalBallStarmanStopwatch ; Starman\n\t.dw EnemyInit_CrystalBallStarmanStopwatch ; Stopwatch\nEnemyInitializationTable_End:\n\n\n;\n; Sets enemy attributes to the default for the object type\n;\n; Input\n;   X = enemy index\n;\nSetEnemyAttributes:\n\tLDY ObjectType, X\n\tLDA ObjectAttributeTable, Y\n\tAND #$7F\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_46E_Data, Y\n\tSTA EnemyArray_46E, X\n\tLDA EnemyArray_489_Data, Y\n\tSTA EnemyArray_489, X\n\tLDA EnemyArray_492_Data, Y\n\tSTA EnemyArray_492, X\n\tRTS\n\n\n;\n; Enemy initialization with a timer reset\n;\nEnemyInit_Basic:\n\tLDA #$00\n\tSTA EnemyTimer, X\n\n;\n; Enemy initialization without an explicit timer reset\n;\n; Most things are set to $00\n;\nEnemyInit_BasicWithoutTimer:\n\tLDA #$00\n\tSTA EnemyVariable, X\n\tLDA #$00 ; You do realize you already LDA #$00, right???\n\tSTA EnemyArray_B1, X\n\tSTA EnemyArray_42F, X\n\tSTA ObjectBeingCarriedTimer, X\n\tSTA ObjectAnimationTimer, X\n\tSTA ObjectShakeTimer, X\n\tSTA EnemyCollision, X\n\tSTA EnemyArray_438, X\n\tSTA EnemyArray_453, X\n\tSTA ObjectXAcceleration, X\n\tSTA ObjectYAcceleration, X\n\tSTA EnemyArray_45C, X\n\tSTA EnemyArray_477, X\n\tSTA EnemyArray_480, X\n\tSTA EnemyHP, X\n\tSTA ObjectYVelocity, X\n\nEnemyInit_BasicAttributes:\n\tJSR SetEnemyAttributes\n\n; Initialize enemy movement in direction of player\nEnemyInit_BasicMovementTowardPlayer:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n; Initialize enemy movement\n; Y = 1 (move to the left)\n; Y = 0 (move to the right)\nEnemyInit_BasicMovement:\n\tINY ; uses using index 1 or 2 of EnemyInitialAccelerationTable\n\tSTY EnemyMovementDirection, X\n\tLDA EnemyInitialAccelerationTable, Y\n\tSTA ObjectXVelocity, X\n\n\t; Double the speed of objects when bit 6 of 46E is set\n\tLDA EnemyArray_46E, X\n\tAND #%01000000\n\tBEQ EnemyInit_BasicMovementExit\n\tASL ObjectXVelocity, X ; Change the speed of certain objects?\n\nEnemyInit_BasicMovementExit:\n\tRTS\n\n; End of function EnemyInit_BasicWithoutTimer\n\n; ---------------------------------------------------------------------------\nBeezoXOffsetTable:\n\t.db $FE ; If player moving right\n\t.db $00 ; If moving left\nBeezoDiveSpeedTable:\n\t.db $12,$16,$1A,$1E,$22,$26,$2A,$2D\n\t.db $30,$32,$34,$37,$39,$3B,$3D,$3E\n; ---------------------------------------------------------------------------\n\nEnemyInit_BeezoDiving:\n\tJSR EnemyInit_Basic\n\n\tLDY PlayerMovementDirection ; $02 = left, $01 = right\n\tLDA ScreenBoundaryLeftLo\n\tADC BeezoXOffsetTable - 1, Y\n\tSTA ObjectXLo, X ; Spawn in front of the player to dive at them\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\n; =============== S U B R O U T I N E =======================================\n\nEnemyBeezoDiveSetup:\n\tLDA PlayerYHi\n\tBPL loc_BANK2_84D5\n\n\t; If above the screen, just abort and use the least descend-y one\n\tLDY #$00\n\tBEQ loc_BANK2_84DF\n\nloc_BANK2_84D5:\n\tLDA PlayerYLo ; Check how far down on the screen the player is\n\tSEC\n\tSBC ScreenYLo\n\tLSR A ; And then take only the highest 4 bits\n\tLSR A ; (divide by 16)\n\tLSR A\n\tLSR A\n\tTAY\n\nloc_BANK2_84DF:\n\tLDA BeezoDiveSpeedTable, Y\n\tSTA ObjectYVelocity, X\n\tRTS\n\n; End of function EnemyBeezoDiveSetup\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_Phanto:\n\tJSR EnemyInit_Basic\n\n\tLDA #$0C\n\tSTA ObjectXVelocity, X\n\tLDA #$A0\n\tSTA PhantoActivateTimer\n\tRTS\n\n; =============== S U B R O U T I N E =======================================\n\nEnemyInit_Bobomb:\n\tJSR EnemyInit_Basic\n\n\tLDA #$FF\n\tSTA EnemyTimer, X\n\tRTS\n\n; End of function EnemyInit_Bobomb\n\n; ---------------------------------------------------------------------------\n\nHandleEnemyState_Dead:\n\tJSR sub_BANK3_B5CC\n\n\tJSR sub_BANK2_88E8\n\nloc_BANK2_8500:\n\tLDA EnemyState, X\n\tBNE MakeEnemyFlipUpsideDown\n\n\tLDA EnemyArray_SpawnsDoor, X\n\tBEQ EnemyDeathMaybe\n\nloc_BANK2_8509:\n\tSTA BossBeaten\n\tJSR DestroyOnscreenEnemies\n\n\tJSR Swarm_Stop\n\n\tLDA #Music2_BossClearFanfare\n\tSTA MusicQueue2\n\tLDA unk_RAM_4EF, X\n\tSTA ObjectXHi, X\n\tLDA #$80\n\tSTA ObjectXLo, X\n\tASL A\n\tSTA ObjectYHi, X\n\tLDA #$B0\n\tLDY ObjectType, X\n\tCPY #Enemy_Clawgrip\n\tBNE loc_BANK2_852D\n\n\tLDA #$70\n\nloc_BANK2_852D:\n\tSTA ObjectYLo, X\n\tLDA #%01000001\n\tSTA ObjectAttributes, X\n\tSTA EnemyArray_46E, X\n\tJMP TurnIntoPuffOfSmoke\n\n; ---------------------------------------------------------------------------\n\nEnemyDeathMaybe:\n\tLDA ObjectType, X\n\tCMP #Enemy_Bullet ; \"Stray bullet\" enemy type\n\tBEQ MakeEnemyFlipUpsideDown\n\n\tINC EnemiesKilledForHeart\n\tLDY EnemiesKilledForHeart\n\tCPY #$08 ; number of enemies to kill before a heart appears\n\tBCC MakeEnemyFlipUpsideDown\n\n\tLDA #$00 ; reset enemy kill counter for heart counter\n\tSTA EnemiesKilledForHeart\n\n\tLDA #EnemyState_Alive ; convert dead enemy to living heart\n\tSTA EnemyState, X\n\tSTA ObjectAttributes, X\n\tLDA #%00000111 ; what's this magic number for?\n\tSTA EnemyArray_46E, X\n\tLDA #Enemy_Heart\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tSBC #$60 ; subtract this amount from the y position where the enemy despawned\n\tSTA ObjectYLo, X\n\tLDA ObjectYHi, X\n\tSBC #$00\n\tSTA ObjectYHi, X\n\n\n;\n; Spawned enemies are linked to an offset in the raw enemy data, which prevents\n; from being respawned until they are killed or moved offscreen.\n;\n; This subroutine ensures that the enemy in a particular slot is not linked to\n; the raw enemy data\n;s\n; Input\n;   X = enemy slot\n;\nUnlinkEnemyFromRawData:\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tRTS\n\n\nMakeEnemyFlipUpsideDown:\n\tASL ObjectAttributes, X ; Shift left...\n\tSEC ; Set carry...\n\tROR ObjectAttributes, X ; Shift right. Effectively sets $80 bit\n\nRenderSpriteAndApplyObjectMovement:\n\tJSR RenderSprite\n\n\n;\n; Applies object physics\n;\n; Input\n;   X = enemy index\n;\nApplyObjectMovement:\n\t; disable horiziontal physics while shaking\n\tLDA ObjectShakeTimer, X\n\tBNE ApplyObjectMovement_Vertical\n\n\tJSR ApplyObjectPhysicsX\n\nApplyObjectMovement_Vertical:\n\tJSR ApplyObjectPhysicsY\n\n\tLDA ObjectYVelocity, X\n\tBMI ApplyObjectMovement_Gravity\n\n\t; Check terminal velocity\n\tCMP #$3E\n\tBCS ApplyObjectMovement_Exit\n\nApplyObjectMovement_Gravity:\n\tINC ObjectYVelocity, X\n\tINC ObjectYVelocity, X\n\nApplyObjectMovement_Exit:\n\tRTS\n\n\nHandleEnemyState_BlockFizzle:\n\tJSR sub_BANK2_88E8\n\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_85AF\n\n\tTAY\n\tLSR A\n\tLSR A\n\tAND #$01\n\tSTA EnemyMovementDirection, X\n\tLDA #%00000001\n\tSTA ObjectAttributes, X\n\tSTA EnemyArray_46E, X\n\tLDA #$3C\n\tCPY #$C\n\tBCC loc_BANK2_85AC\n\n\tLDA #$3E\n\nloc_BANK2_85AC:\n\tJMP RenderSprite_DrawObject\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_85AF:\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_85B2:\n\tJSR sub_BANK2_88E8\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_85C1\n\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_85C1:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_85AF\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_85E1\n\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA byte_RAM_10\n\tAND #$03\n\tSTA ObjectShakeTimer, X\n\tLDA byte_RAM_10\n\tAND #$10\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tADC #$01\n\tSTA EnemyMovementDirection, X\n\nloc_BANK2_85E1:\n\tJSR sub_BANK2_9486\n\n\tJMP sub_BANK3_B5CC\n\n\nExplosionTileXOffsets:\n\t.db $F8\n\t.db $00\n\t.db $F8\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $08\n\t.db $10\n\nExplosionTileYOffsets:\n\t.db $F8\n\t.db $F8\n\nEnemyInitialAccelerationTable:\n\t; these values are shared with ExplosionTileYOffsets!\n\t.db $08\n\t.db $08\n\t.db $F8\n\t.db $F8\n\t.db $08\n\t.db $08\n\n\nHandleEnemyState_BombExploding:\n\tJSR sub_BANK2_88E8\n\n\tLDA byte_RAM_EE\n\tORA byte_RAM_EF\n\tBNE loc_BANK2_85AF\n\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_85AF\n\n\tCMP #$1A\n\tBCS loc_BANK2_8610\n\n\tSBC #$11\n\tBMI loc_BANK2_8610\n\n\tTAY\n\tJSR sub_BANK2_8670\n\nloc_BANK2_8610:\n\tLDA #$60\n\tSTA byte_RAM_0\n\tLDX #$00\n\tLDY #$40\n\nloc_BANK2_8618:\n\tLDA SpriteTempScreenY\n\tCLC\n\tADC ExplosionTileYOffsets, X\n\tSTA SpriteDMAArea, Y\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC ExplosionTileXOffsets, X\n\tSTA SpriteDMAArea + 3, Y\n\tLDA #$01\n\tSTA SpriteDMAArea + 2, Y\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 1, Y\n\tCLC\n\tADC #$02\n\tSTA byte_RAM_0\n\tINY\n\tINY\n\tINY\n\tINY\n\tINX\n\tCPX #$08\n\tBNE loc_BANK2_8618\n\n\tLDX byte_RAM_12\n\tJMP sub_BANK3_B5CC\n\n; ---------------------------------------------------------------------------\n\nlocret_BANK2_8649:\n\tRTS\n\n; ---------------------------------------------------------------------------\nbyte_BANK2_864A:\n\t.db $FB\n\t.db $08\n\t.db $15\n\t.db $FB\n\t.db $08\n\t.db $15\n\t.db $FB\n\t.db $08\n\t.db $15\n\nbyte_BANK2_8653:\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $FF\n\t.db $00\n\t.db $00\n\nbyte_BANK2_865C:\n\t.db $FC\n\t.db $FC\n\t.db $FC\n\t.db $08\n\t.db $08\n\t.db $08\n\t.db $14\n\t.db $14\n\t.db $14\n\nbyte_BANK2_8665:\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\nbyte_BANK2_866E:\n\t.db $5F\n\t.db $06\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_8670:\n\tLDA ObjectXLo, X\n\tCLC\n\tADC byte_BANK2_864A, Y\n\tSTA byte_RAM_C\n\tLDA ObjectXHi, X\n\tADC byte_BANK2_8653, Y\n\tSTA byte_RAM_D\n\tCMP #$B\n\tBCS locret_BANK2_8649\n\n\tLDA ObjectYLo, X\n\tADC byte_BANK2_865C, Y\n\tAND #$F0\n\tSTA byte_RAM_E\n\tSTA byte_RAM_B\n\tLDA ObjectYHi, X\n\tADC byte_BANK2_8665, Y\n\tSTA byte_RAM_F\n\tCMP #$A\n\tBCS locret_BANK2_8649\n\n\tLDY IsHorizontalLevel\n\tBNE loc_BANK2_86BD\n\n\tLSR A\n\tROR byte_RAM_E\n\tLSR A\n\tROR byte_RAM_E\n\tLSR A\n\tROR byte_RAM_E\n\tLSR A\n\tROR byte_RAM_E\n\tLDA byte_RAM_E\n\n\tLDY #$FF\nloc_BANK2_86AD:\n\tSEC\n\tSBC #$0F\n\tINY\n\tBCS loc_BANK2_86AD\n\n\tSTY byte_RAM_D\n\tADC #$0F\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_E\n\nloc_BANK2_86BD:\n\tLDA byte_RAM_C\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_4\n\tORA byte_RAM_E\n\tSTA byte_RAM_5\n\tLDY #$00\n\tLDA ScreenBoundaryLeftHi\n\tCMP #$A\n\tBNE loc_BANK2_86D5\n\n\tSTY byte_RAM_D\n\tINY\n\nloc_BANK2_86D5:\n\tLDA #$10\n\tSTA byte_RAM_7\n\tLDA byte_BANK2_866E, Y\n\tSTA byte_RAM_8\n\tLDY byte_RAM_D\n\nloc_BANK2_86E0:\n\tLDA byte_RAM_7\n\tCLC\n\tADC #$F0\n\tSTA byte_RAM_7\n\tLDA byte_RAM_8\n\tADC #$00\n\tSTA byte_RAM_8\n\tDEY\n\tBPL loc_BANK2_86E0\n\n\tLDY byte_RAM_5\n\tLDA (byte_RAM_7), Y\n\tCMP #$9D\n\tBEQ loc_BANK2_8701\n\n\tCMP #$93\n\tBEQ loc_BANK2_8701\n\n\tCMP #$72\n\tBEQ loc_BANK2_8701\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8701:\n\tLDA #$40\n\tSTA (byte_RAM_7), Y\n\tLDA byte_RAM_D\n\tAND #$01\n\tEOR #$01\n\tASL A\n\nloc_BANK2_870C:\n\tASL A\n\tLDY IsHorizontalLevel\n\tBNE loc_BANK2_8712\n\n\tASL A\n\nloc_BANK2_8712:\n\tPHA\n\tLDA byte_RAM_E\n\tSTA byte_RAM_2\n\tLDA byte_RAM_C\n\tAND #$F0\n\tSTA byte_RAM_3\n\tLDA #$08\n\tSTA byte_RAM_0\n\tLDA byte_RAM_2\n\tASL A\n\tROL byte_RAM_0\n\tASL A\n\tROL byte_RAM_0\n\tAND #$E0\n\tSTA byte_RAM_1\n\tLDA byte_RAM_3\n\tLSR A\n\tLSR A\n\tLSR A\n\tORA byte_RAM_1\n\tLDX byte_RAM_300\n\tSTA PPUBuffer_301 + 1, X\n\tCLC\n\tADC #$20\n\tSTA PPUBuffer_301 + 6, X\n\tPLA\n\tORA byte_RAM_0\n\tSTA PPUBuffer_301, X\n\tADC #$00\n\tSTA PPUBuffer_301 + 5, X\n\nloc_BANK2_874B:\n\tLDA #$02\n\tSTA PPUBuffer_301 + 2, X\n\tSTA PPUBuffer_301 + 7, X\n\tLDA #$FA\n\tSTA PPUBuffer_301 + 3, X\n\tSTA PPUBuffer_301 + 4, X\n\tSTA PPUBuffer_301 + 8, X\n\tSTA PPUBuffer_301 + 9, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 10, X\n\tTXA\n\tCLC\n\tADC #$A\n\tSTA byte_RAM_300\n\tLDX #$08\n\nloc_BANK2_876F:\n\tLDA EnemyState, X\n\tBEQ loc_BANK2_8778\n\n\tDEX\n\tBPL loc_BANK2_876F\n\n\tBMI loc_BANK2_8795\n\nloc_BANK2_8778:\n\tLDA byte_RAM_C\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA byte_RAM_D\n\tLDY IsHorizontalLevel\n\tBNE loc_BANK2_8785\n\n\tTYA\n\nloc_BANK2_8785:\n\tSTA ObjectXHi, X\n\tLDA byte_RAM_B\n\tSTA ObjectYLo, X\n\tLDA byte_RAM_F\n\tSTA ObjectYHi, X\n\tJSR EnemyInit_BasicWithoutTimer\n\n\tJSR sub_BANK2_98C4\n\nloc_BANK2_8795:\n\tLDX byte_RAM_12\n\nlocret_BANK2_8797:\n\tRTS\n\n; End of function sub_BANK2_8670\n\n; ---------------------------------------------------------------------------\nbyte_BANK2_8798:\n\t.db $46\n\t.db $4A\n\t.db $4E\n\t.db $52\n; ---------------------------------------------------------------------------\n\nHandleEnemyState_PuffOfSmoke:\n\tJSR sub_BANK2_88E8\n\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_Mirrored\n\tSTA ObjectAttributes, X\n\tLDA EnemyTimer, X\n\tBNE loc_BANK2_87AC\n\nloc_BANK2_87A9:\n\tJMP loc_BANK2_8842\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_87AC:\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA byte_BANK2_8798, Y\n\tJSR RenderSprite_DrawObject\n\n\tLDA EnemyArray_SpawnsDoor, X\n\tBEQ locret_BANK2_8797\n\n\tLDA EnemyTimer, X\n\tCMP #$03\n\tBNE locret_BANK2_8797\n\n\tLDY #$22\n\tLDA ObjectType, X\n\tCMP #Enemy_Clawgrip\n\tBNE loc_BANK2_87CA\n\n\t; Clawgrip special hack:\n\t; Move the \"Draw the door\" PPU command\n\t; up 8 tile rows ($100) to be on the platform\n\tDEY\n\nloc_BANK2_87CA:\n\tSTY PPUBuffer_721B\n\tSTY byte_RAM_7222\n\tINY\n\tSTY byte_RAM_7229\n\tSTY byte_RAM_7232\n\tLDY #$03\n\nloc_BANK2_87D9:\n\tLDA unk_RAM_4EF, X\n\tAND #$01\n\tASL A\n\tASL A\n\tEOR #$04\n\tLDX IsHorizontalLevel\n\tBNE loc_BANK2_87E7\n\n\tASL A\n\nloc_BANK2_87E7:\n\tLDX EndOfLevelDoorRowOffsets, Y\n\tORA PPUBuffer_721B, X\n\tSTA PPUBuffer_721B, X\n\tLDX byte_RAM_12\n\tDEY\n\tBPL loc_BANK2_87D9\n\n\tLDA #$14\n\tSTA ScreenUpdateIndex\n\tLDY unk_RAM_4EF, X\n\tLDA #$5F\n\tSTA byte_RAM_1\n\tLDA #$10\n\tSTA byte_RAM_0\n\nloc_BANK2_8804:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$F0\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tADC #$00\n\tSTA byte_RAM_1\n\tDEY\n\tBPL loc_BANK2_8804\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Clawgrip\n\tBNE loc_BANK2_8827\n\n\tLDA byte_RAM_0\n\tSEC\n\tSBC #$40\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tSBC #$00\n\tSTA byte_RAM_1\n\nloc_BANK2_8827:\n\tLDY #$B8\n\tLDA #$56\n\tSTA (byte_RAM_0), Y\n\tLDY #$C8\n\tSTA (byte_RAM_0), Y\n\tLDA #$53\n\tLDY #$B9\n\tSTA (byte_RAM_0), Y\n\tLDY #$CA\n\tSTA (byte_RAM_0), Y\n\tLDA #$54\n\tLDY #$C9\n\tSTA (byte_RAM_0), Y\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8842:\n\tLDA ObjectType, X\n\tCMP #Enemy_FryguySplit\n\tBNE loc_BANK2_8855\n\n\tDEC FryguySplitFlames\n\tBPL loc_BANK2_8855\n\n\tINC EnemyArray_SpawnsDoor, X\n\tINC ObjectType, X\n\tJMP loc_BANK2_8509\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8855:\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nHandleEnemyState_Sand:\n\tJSR sub_BANK2_88E8\n\n\tLDA #$12\n\tSTA ObjectAttributes, X\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_8888\n\n\tLDA #$F8\n\tSTA ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\n\tLDA #$B2\n\tLDY EnemyTimer, X\n\tCPY #$10\n\tBCS loc_BANK2_8885\n\n\tLDA #%10000000\n\tSTA EnemyArray_46E, X\n\tLDA #$01\n\tSTA ObjectAttributes, X\n\tASL A\n\tSTA EnemyMovementDirection, X\n\tINC ObjectAnimationTimer, X\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA #$B4\n\nloc_BANK2_8885:\n\tJMP RenderSprite_DrawObject\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8888:\n\tCPX ObjectBeingCarriedIndex\n\tBNE loc_BANK2_8891\n\n\tLDA #$00\n\tSTA HoldingItem\n\nloc_BANK2_8891:\n\tJMP EnemyDestroy\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_8894:\n\tLDA #$00\n\tSTA byte_RAM_EE\n\tLDA ObjectAttributes, X\n\tLDY #$01\n\tAND #ObjAttrib_Horizontal\n\tBNE loc_BANK2_88B9\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Pokey\n\tBEQ loc_BANK2_88B9\n\n\tCMP #Enemy_Ostro\n\tBEQ loc_BANK2_88B9\n\n\tCMP #Enemy_HawkmouthBoss\n\tBEQ loc_BANK2_88B9\n\n\tCMP #Enemy_Clawgrip\n\tBEQ loc_BANK2_88B9\n\n\tLDA EnemyArray_46E, X\n\tAND #%00100000\n\tBEQ loc_BANK2_88BB\n\nloc_BANK2_88B9:\n\t; something for double-wide sprites?\n\tLDY #$03\n\n; seems to be logic for positioning sprites onscreen\nloc_BANK2_88BB:\n\tLDA ObjectXLo, X\n\tCLC\n\tADC byte_BANK2_88E4, Y\n\tSTA byte_RAM_E\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA byte_RAM_F\n\tLDA byte_RAM_E\n\tCMP ScreenBoundaryLeftLo\n\tLDA byte_RAM_F\n\tSBC ScreenBoundaryLeftHi\n\tBEQ loc_BANK2_88DC\n\n\tLDA byte_RAM_EE\n\tORA byte_BANK2_88E0, Y\n\tSTA byte_RAM_EE\n\nloc_BANK2_88DC:\n\tDEY\n\tBPL loc_BANK2_88BB\n\nlocret_BANK2_88DF:\n\tRTS\n\n; End of function sub_BANK2_8894\n\n; ---------------------------------------------------------------------------\n; threshold for x-wrapping sprites near the edge of the screen\nbyte_BANK2_88E0: ; hi\n\t.db $08\n\t.db $04\n\t.db $02\n\t.db $01\nbyte_BANK2_88E4: ; lo\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $18\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_88E8:\n\tJSR sub_BANK2_8894\n\n\tLDA #$22\n\tLDY ObjectType, X\n\tCPY #Enemy_Wart\n\tBEQ loc_BANK2_88F9\n\n\tCPY #Enemy_Tryclyde\n\tBEQ loc_BANK2_88F9\n\n\tLDA #$10\n\nloc_BANK2_88F9:\n\tADC ObjectYLo, X\n\tSTA byte_RAM_0\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA byte_RAM_1\n\tLDA byte_RAM_0\n\tCMP ScreenYLo\n\tLDA byte_RAM_1\n\tSBC ScreenYHi\n\tSTA byte_RAM_EF\n\n\tCPY #Enemy_Phanto\n\tBEQ locret_BANK2_88DF\n\n\tCPY #Enemy_FlyingCarpet\n\tBEQ locret_BANK2_88DF\n\n\tCPY #Enemy_HawkmouthLeft\n\tBEQ locret_BANK2_88DF\n\n\tCPY #Enemy_HawkmouthBoss\n\tBEQ locret_BANK2_88DF\n\n\tTXA\n\tAND #$01\n\tSTA byte_RAM_0\n\tLDA byte_RAM_10\n\tAND #$01\n\tEOR byte_RAM_0\n\tBNE locret_BANK2_88DF\n\n\tLDA ScreenYLo\n\tSBC #$30\n\tSTA byte_RAM_1\n\tLDA ScreenYHi\n\tSBC #$00\n\tSTA byte_RAM_0\n\tINC byte_RAM_0\n\tLDA ScreenYLo\n\tADC #$FF\n\tPHP\n\tADC #$30\n\tSTA byte_RAM_3\n\tLDA ScreenYHi\n\tADC #$00\n\tPLP\n\tADC #$00\n\tSTA byte_RAM_2\n\tINC byte_RAM_2\n\tLDA ObjectYLo, X\n\tCMP byte_RAM_1\n\tLDY ObjectYHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_0\n\tBMI loc_BANK2_89A5\n\n\tLDA ObjectYLo, X\n\tCMP byte_RAM_3\n\tLDY ObjectYHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_2\n\tBPL loc_BANK2_89A5\n\n\tLDA ScreenBoundaryLeftLo\n\tSBC #$30\n\tSTA byte_RAM_1\n\tLDA ScreenBoundaryLeftHi\n\tSBC #$00\n\tSTA byte_RAM_0\n\tINC byte_RAM_0\n\tLDA ScreenBoundaryRightLo\n\tADC #$30\n\tSTA byte_RAM_3\n\tLDA ScreenBoundaryRightHi\n\tADC #$00\n\tSTA byte_RAM_2\n\tINC byte_RAM_2\n\tLDA ObjectXLo, X\n\tCMP byte_RAM_1\n\tLDY ObjectXHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_0\n\tBMI loc_BANK2_899C\n\n\tLDA ObjectXLo, X\n\tCMP byte_RAM_3\n\tLDY ObjectXHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_2\n\tBMI EnemyDestroy_Exit\n\nloc_BANK2_899C:\n\tLDY ObjectType, X\n\tLDA EnemyArray_46E_Data, Y\n\tAND #$08\n\tBNE EnemyDestroy_Exit\n\nloc_BANK2_89A5:\n\tLDA ObjectBeingCarriedTimer, X\n\tBNE EnemyDestroy_Exit\n\n; End of function sub_BANK2_88E8\n\n; =============== S U B R O U T I N E =======================================\n\nEnemyDestroy:\n\t; load raw enemy data offset so we can allow the level object to respawn\n\tLDY unk_RAM_441, X\n\t; nothing to reset if offset is invalid\n\tBMI EnemyDestroy_AfterAllowRespawn\n\n\t; disabling bit 7 allows the object to respawn\n\tLDA (RawEnemyData), Y\n\tAND #$7F\n\tSTA (RawEnemyData), Y\n\nEnemyDestroy_AfterAllowRespawn:\n\tLDA #EnemyState_Inactive\n\tSTA EnemyState, X\n\nEnemyDestroy_Exit:\n\tRTS\n\n; End of function EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nHandleEnemyState_Alive:\n\tLDA #$01\n\tSTA unk_RAM_4A4, X\n\tLDY EnemyArray_42F, X\n\tDEY\n\tCPY #$1F\n\tBCS loc_BANK2_89C9\n\n\tINC EnemyArray_42F, X\n\nloc_BANK2_89C9:\n\tJSR sub_BANK2_88E8\n\n\tLDA PlayerState\n\tCMP #PlayerState_ChangingSize\n\tBEQ loc_BANK2_89E2\n\n\tLDA NeedVerticalScroll\n\tAND #$04\n\tBNE loc_BANK2_8A07\n\n\tLDA StopwatchTimer\n\tBNE loc_BANK2_89E2\n\n\tLDA EnemyArray_438, X\n\tBEQ loc_BANK2_8A0A\n\nloc_BANK2_89E2:\n\tLDA ObjectType, X\n\nIFDEF REV_A\n\tCMP #Enemy_FryguySplit\n\tBEQ loc_BANK2_8A0A\nENDIF\n\n\tCMP #Enemy_Heart\n\tBEQ loc_BANK2_8A0A\n\n\tCMP #Enemy_FlyingCarpet\n\tBEQ loc_BANK2_89F0\n\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_8A0A\n\nloc_BANK2_89F0:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK2_89FB\n\n\tJSR ApplyObjectMovement\n\nloc_BANK2_89FB:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_8A04\n\n\tDEC ObjectAnimationTimer, X\n\nloc_BANK2_8A01:\n\tJMP CarryObject\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8A04:\n\tJSR sub_BANK3_B5CC\n\nloc_BANK2_8A07:\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8A0A:\n\tLDY #$01\n\tLDA ObjectXVelocity, X\n\tBEQ loc_BANK2_8A15\n\n\tBPL loc_BANK2_8A13\n\n\tINY\n\nloc_BANK2_8A13:\n\tSTY EnemyMovementDirection, X\n\nloc_BANK2_8A15:\n\tLDY ObjectType, X\n\tLDA ObjectAttributeTable, Y\n\tAND #ObjAttrib_Palette0 | ObjAttrib_BehindBackground\n\tBNE loc_BANK2_8A41\n\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_16x32 | ObjAttrib_UpsideDown\n\tSTA ObjectAttributes, X\n\tLDA ObjectBeingCarriedTimer, X\n\tCMP #$02\n\tBCC loc_BANK2_8A41\n\n\tLDA ObjectType, X\n\tCMP #Enemy_BobOmb\n\tBNE loc_BANK2_8A36\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBNE loc_BANK2_8A3B\n\nloc_BANK2_8A36:\n\tLDA ObjectAttributeTable, Y\n\tBPL loc_BANK2_8A41\n\nloc_BANK2_8A3B:\n\tLDA ObjectAttributes, X\n\tORA #$20\n\tSTA ObjectAttributes, X\n\nloc_BANK2_8A41:\n\tJSR RunEnemyBehavior\n\n\tLDA ObjectYHi, X\n\tBMI loc_BANK2_8A50\n\n\tLDA SpriteTempScreenY\n\tCMP #$E8\n\tBCC loc_BANK2_8A50\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8A50:\n\tJMP sub_BANK3_B5CC\n\n; ---------------------------------------------------------------------------\n\nRunEnemyBehavior:\n\tLDA ObjectType, X\n\tJSR JumpToTableAfterJump\n\n\nEnemyBehaviorPointerTable:\n\t.dw EnemyBehavior_00\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_Ostro\n\t.dw EnemyBehavior_BobOmb\n\t.dw EnemyBehavior_Albatoss ; 10\n\t.dw EnemyBehavior_Albatoss\n\t.dw EnemyBehavior_Albatoss\n\t.dw EnemyBehavior_NinjiRunning\n\t.dw EnemyBehavior_NinjiJumping\n\t.dw EnemyBehavior_Beezo\n\t.dw EnemyBehavior_Beezo\n\t.dw EnemyBehavior_WartBubble\n\t.dw EnemyBehavior_Pidgit\n\t.dw EnemyBehavior_Trouter\n\t.dw EnemyBehavior_Hoopstar ; 20\n\t.dw EnemyBehavior_JarGenerators\n\t.dw EnemyBehavior_JarGenerators\n\t.dw EnemyBehavior_Phanto\n\t.dw EnemyBehavior_CobratJar\n\t.dw EnemyBehavior_CobratGround\n\t.dw EnemyBehavior_Pokey\n\t.dw EnemyBehavior_BulletAndEgg\n\t.dw EnemyBehavior_Birdo\n\t.dw EnemyBehavior_Mouser\n\t.dw EnemyBehavior_BulletAndEgg ; 30\n\t.dw EnemyBehavior_Tryclyde\n\t.dw EnemyBehavior_Fireball\n\t.dw EnemyBehavior_Clawgrip\n\t.dw EnemyBehavior_ClawgripRock\n\t.dw EnemyBehavior_PanserRedAndGray\n\t.dw EnemyBehavior_PanserPink\n\t.dw EnemyBehavior_PanserRedAndGray\n\t.dw EnemyBehavior_Autobomb\n\t.dw EnemyBehavior_AutobombFire\n\t.dw EnemyBehavior_WhaleSpout ; 40\n\t.dw EnemyBehavior_Flurry\n\t.dw EnemyBehavior_Fryguy\n\t.dw EnemyBehavior_FryguySplit\n\t.dw EnemyBehavior_Wart\n\t.dw EnemyBehavior_HawkmouthBoss\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Vegetable ; 50\n\t.dw EnemyBehavior_Vegetable\n\t.dw EnemyBehavior_Vegetable\n\t.dw EnemyBehavior_Shell\n\t.dw EnemyBehavior_Coin\n\t.dw EnemyBehavior_Bomb\n\t.dw EnemyBehavior_Rocket\n\t.dw EnemyBehavior_MushroomBlockAndPOW\n\t.dw EnemyBehavior_MushroomBlockAndPOW\n\t.dw EnemyBehavior_FallingLogs\n\t.dw EnemyBehavior_SubspaceDoor ; 60\n\t.dw EnemyBehavior_Key\n\t.dw EnemyBehavior_SubspacePotion\n\t.dw EnemyBehavior_Mushroom\n\t.dw EnemyBehavior_Mushroom1up\n\t.dw EnemyBehavior_FlyingCarpet\n\t.dw EnemyBehavior_Hawkmouth\n\t.dw EnemyBehavior_Hawkmouth\n\t.dw EnemyBehavior_CrystalBall\n\t.dw EnemyBehavior_Starman\n\t.dw EnemyBehavior_Mushroom ; 70\nEnemyBehaviorPointerTable_End:\n\n\nEnemyInit_JarGenerators:\n\tJSR EnemyInit_Basic\n\n\tLDA #$50\n\tSTA ObjectAnimationTimer, X\n\tRTS\n\n\nSparkAccelerationTable:\n\t.db $F0\n\t.db $E0\n\t.db $F0\n\t.db $E0\n\t.db $10\n\t.db $20\n\n\nEnemyInit_Sparks:\n\tJSR EnemyInit_Basic\n\n\tLDY ObjectType, X\n\tLDA SparkAccelerationTable - Enemy_Spark1, Y\n\tSTA ObjectXVelocity, X\n\tLDA SparkAccelerationTable - Enemy_Spark1 + 2, Y\n\tSTA ObjectYVelocity, X\n\tRTS\n\n\nSparkCollision: ; spark movement based on collision\n\t.db CollisionFlags_Up | CollisionFlags_Down ; horizontal\n\t.db CollisionFlags_Left | CollisionFlags_Right ; vertical\n\nSparkTurnOffset:\n\t.db $00 ; clockwise\n\t.db $0A ; counter-clockwise\n\n\n;\n; Spark movement works by traveling along one axis at a time and turning when\n; either colliding along the movement axis or running out of wall along the\n; axis perpendicular to movement.\n;\nEnemyBehavior_Spark:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR IncrementAnimationTimerBy2\n\n\tJSR RenderSprite\n\n\tLDA ObjectXLo, X\n\tORA ObjectYLo, X\n\tAND #$0F\n\tBNE EnemyBehavior_Spark_Move\n\n\tJSR ObjectTileCollision_SolidBackground\n\n\tLDY EnemyArray_477, X\n\tLDA EnemyCollision, X\n\tAND SparkCollision, Y\n\tBEQ EnemyBehavior_Spark_Turn\n\n\tLDA SparkCollision, Y\n\tEOR #$0F\n\tAND EnemyCollision, X\n\tBEQ EnemyBehavior_Spark_Move\n\n\tTYA\n\tEOR #$01\n\tSTA EnemyArray_477, X\n\tTAY\n\n;\n; Reverses the direction of movement for the specified axis\n;\n; Input\n;   X = enemy slot\n;   Y = movement axis\n;\nEnemyBehavior_Spark_FlipAxisVelocity:\n\tTXA\n\tCLC\n\tADC SparkTurnOffset, Y\n\tTAY\n\tLDA ObjectXVelocity, Y\n\tEOR #$FF\n\tADC #$01\n\tSTA ObjectXVelocity, Y\n\tRTS\n\n\nEnemyBehavior_Spark_Turn:\n\tTYA\n\tEOR #$01\n\tSTA EnemyArray_477, X\n\tJSR EnemyBehavior_Spark_FlipAxisVelocity\n\nEnemyBehavior_Spark_Move:\n\tLDA EnemyArray_477, X\n\tBNE EnemyBehavior_Spark_MoveVertical\n\nEnemyBehavior_Spark_MoveHorizontal:\n\tJMP ApplyObjectPhysicsX\n\nEnemyBehavior_Spark_MoveVertical:\n\tJMP ApplyObjectPhysicsY\n\n\nIncrementAnimationTimerBy2:\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tRTS\n\n\nAlbatossSwarmStartXLo:\n\t.db $F0\n\t.db $00\n\nAlbatossSwarmStartXHi:\n\t.db $FF\n\t.db $01\n\n\nSwarm_AlbatossCarryingBobOmb:\n\tJSR Swarm_CreateEnemy\n\n\tADC AlbatossSwarmStartXLo, Y\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC AlbatossSwarmStartXHi, Y\n\tSTA ObjectXHi, X\n\tSTY byte_RAM_1\n\tLDA #Enemy_AlbatossCarryingBobOmb\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA PseudoRNGValues + 2\n\tAND #$1F\n\tADC #$20\n\tSTA ObjectYLo, X\n\tLDY byte_RAM_1\n\tJSR EnemyInit_BasicMovement\n\n\tASL ObjectXVelocity, X\n\tRTS\n\n\nBeezoSwarmStartXLo:\n\t.db $00\n\t.db $FF\n\n\nSwarm_BeezoDiving:\n\tJSR Swarm_CreateEnemy\n\n\tADC BeezoSwarmStartXLo, Y\n\tSTA ObjectXLo, X\n\tLDA IsHorizontalLevel\n\tBEQ Swarm_BeezoDiving_Vertical\n\nSwarm_BeezoDiving_Horizontal:\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\nSwarm_BeezoDiving_Vertical:\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tSTA ObjectYHi, X\n\tSTY byte_RAM_1\n\tLDA #Enemy_BeezoDiving\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDY byte_RAM_1\n\tJSR EnemyInit_BasicMovement\n\n\tJSR EnemyBeezoDiveSetup\n\n\tRTS\n\n\n;\n; Generates a swarm enemy\n;\n; Output\n;   A = ScreenBoundaryLeftLo\n;   X = enemy slot (byte_RAM_0)\n;   Y = enemy direction\n;\nSwarm_CreateEnemy:\n\t; Pause for the Stopwatch\n\tLDA StopwatchTimer\n\tBNE Swarm_CreateEnemy_Fail\n\n\t; Generate an enemy when the counter overflows\n\tLDA SwarmCounter\n\tCLC\n\tADC #$03\n\tSTA SwarmCounter\n\tBCC Swarm_CreateEnemy_Fail\n\n\t; Create the enemy, but bail if it's not possible\n\tJSR CreateEnemy\n\n\tBMI Swarm_CreateEnemy_Fail\n\n\t; Pick a direction\n\tLDY #$00\n\tLDA byte_RAM_10\n\tAND #$40\n\tBNE Swarm_CreateEnemy_Exit\n\n\tINY\n\nSwarm_CreateEnemy_Exit:\n\tLDX byte_RAM_0\n\tLDA ScreenBoundaryLeftLo\n\tRTS\n\nSwarm_CreateEnemy_Fail:\n\t; Break out of the parent swarm subroutine\n\tPLA\n\tPLA\n\tRTS\n\n\nEnemyBehavior_Fireball:\n\tJSR ObjectTileCollision\n\n\tJSR sub_BANK2_927A\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR RenderSprite\n\n\tLDA EnemyVariable, X\n\tBNE EnemyBehavior_Fireball_CheckCollision\n\n\tJMP ApplyObjectMovement\n\n\nEnemyBehavior_Fireball_CheckCollision:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ EnemyBehavior_Fireball_Exit\n\n\tJSR TurnIntoPuffOfSmoke\n\nEnemyBehavior_Fireball_Exit:\n\tJMP sub_BANK2_9430\n\n\nPanserFireXVelocity:\n\t.db $10\n\t.db $F0\n\n\nEnemyBehavior_PanserPink:\n\tLDA ObjectAnimationTimer, X\n\tASL A\n\tBNE EnemyBehavior_PanserRedAndGray\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nEnemyBehavior_PanserRedAndGray:\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK2_8C1A\n\n\tJSR ResetObjectYVelocity\n\nloc_BANK2_8C1A:\n\tPLA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK2_8C22\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK2_8C22:\n\tJSR ApplyObjectMovement\n\n\tLDA #%10000011\n\tSTA EnemyArray_46E, X\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$2F\n\tBNE loc_BANK2_8C3D\n\n\tLDA #$10\n\tSTA EnemyTimer, X\n\nloc_BANK2_8C3D:\n\tLDY EnemyTimer, X\n\tBEQ loc_BANK2_8C8E\n\n\tCPY #$06\n\tBNE loc_BANK2_8C7C\n\n\tJSR CreateEnemy\n\n\tBMI loc_BANK2_8C7C\n\n\tLDA ObjectType, X\n\tPHA\n\tLDX byte_RAM_0\n\tLDA PseudoRNGValues + 2\n\tAND #$0F\n\tORA #$BC\n\tSTA ObjectYVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tPLA\n\tCMP #Enemy_PanserStationaryFiresUp\n\tLDA PanserFireXVelocity, Y\n\tBCC loc_BANK2_8C65\n\n\tLDA #$00\n\nloc_BANK2_8C65:\n\tSTA ObjectXVelocity, X\n\tLDA ObjectXLo, X\n\tSBC #$05\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, X\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tLDA #Enemy_Fireball\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK2_8C7C:\n\tLDA ObjectAttributes, X\n\tORA #$10\n\tSTA ObjectAttributes, X\n\tLDA #$AE\n\tJSR RenderSprite_DrawObject\n\n\tLDA ObjectAttributes, X\n\tAND #$EF\n\tSTA ObjectAttributes, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8C8E:\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_Key:\n\tLDY #$05\n\nloc_BANK2_8C93:\n\tLDA EnemyState, Y\n\tBEQ loc_BANK2_8CA3\n\nloc_BANK2_8C98:\n\tCPY byte_RAM_12\n\tBEQ loc_BANK2_8CA3\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBEQ loc_BANK2_8CAE\n\nloc_BANK2_8CA3:\n\tDEY\n\tBPL loc_BANK2_8C93\n\n\tLDA KeyUsed\n\tBNE loc_BANK2_8CAE\n\nloc_BANK2_8CAB:\n\tJMP EnemyInit_Stationary\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8CAE:\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_CrystalBallStarmanStopwatch:\n\tLDY #$05\n\nloc_BANK2_8CB3:\n\tLDA EnemyState, Y\n\tBEQ loc_BANK2_8CC3\n\n\tCPY byte_RAM_12\n\tBEQ loc_BANK2_8CC3\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_CrystalBall\n\tBEQ loc_BANK2_8CAE\n\nloc_BANK2_8CC3:\n\tDEY\n\tBPL loc_BANK2_8CB3\n\n\tLDA CrystalAndHawkmouthOpenSize\n\tBNE loc_BANK2_8CAE\n\n\tBEQ loc_BANK2_8CAB\n\n\tJSR CreateEnemy\n\n\tBMI locret_BANK2_8CF7\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Starman\n\tSTA ObjectType, X\n\tLDA ScreenBoundaryLeftLo\n\tADC #$D0\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tADC #$E0\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tADC #$00\n\tSTA ObjectYHi, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nlocret_BANK2_8CF7:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Starman:\n\tLDA #$FC\n\tSTA ObjectYVelocity, X\n\tLDY #$F8\n\tLDA byte_RAM_10\n\tSTA EnemyArray_45C, X\n\tBPL loc_BANK2_8D07\n\n\tLDY #$08\n\nloc_BANK2_8D07:\n\tSTY ObjectXVelocity, X\n\tJMP RenderSpriteAndApplyObjectMovement\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_JarGenerators:\n\tJSR ObjectTileCollision\n\n\tAND #$03\n\tBNE EnemyBehavior_JarGenerators_Active\n\n\tJMP EnemyDestroy\n\nEnemyBehavior_JarGenerators_Active:\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tASL A\n\tBNE locret_BANK2_8D5E\n\n\tJSR CreateEnemy\n\n\tBMI locret_BANK2_8D5E\n\n\tLDY byte_RAM_0\n\tLDA ObjectXLo, Y\n\tSEC\n\tSBC #$06\n\tSTA ObjectXLo, Y\n\tLDA ObjectYLo, Y\n\tSBC #$04\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, Y\n\tSBC #$00\n\tSTA ObjectYHi, Y\n\tLDA #$1A\n\tSTA EnemyArray_480, Y\n\tLDA #$F8\n\tSTA ObjectYVelocity, Y\n\tLDA ObjectType, X\n\tCMP #Enemy_JarGeneratorBobOmb\n\tBNE locret_BANK2_8D5E\n\n\tLDA #Enemy_BobOmb\n\tSTA ObjectType, Y\n\tLDA ObjectXVelocity, Y\n\tASL A\n\tSTA ObjectXVelocity, Y\n\tLDA #$FF\n\tSTA EnemyTimer, Y\n\nlocret_BANK2_8D5E:\n\tRTS\n\n\nEnemyInit_Hawkmouth:\n\tDEC ObjectYLo, X\n\tDEC ObjectYLo, X\n\tLDY #$01\n\tSTY byte_RAM_711F\n\tINY\n\tSTY byte_RAM_710B\n\n\nEnemyInit_Stationary:\n\tJSR EnemyInit_Basic\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tRTS\n\n\nEnemyBehavior_Hawkmouth:\n\tLDA byte_RAM_EE\n\tBEQ loc_BANK2_8D7B\n\nloc_BANK2_8D78:\n\tJMP RenderSprite_HawkmouthLeft\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8D7B:\n\tLDA HawkmouthOpenTimer\n\tBEQ loc_BANK2_8D8A\n\n\tDEC HawkmouthOpenTimer\n\tBNE loc_BANK2_8D78\n\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\nloc_BANK2_8D8A:\n\tLDA HawkmouthClosing\n\tBEQ loc_BANK2_8DBA\n\n\tDEC CrystalAndHawkmouthOpenSize\n\tBNE loc_BANK2_8D78\n\n\tLDA #$00\n\tSTA HawkmouthClosing\n\tLDA #TransitionType_Door\n\tSTA TransitionType\n\tJSR DoAreaReset\n\n\tLDY CurrentLevelRelative\n\tLDA CurrentWorldTileset\n\tCMP #$06\n\tBNE loc_BANK2_8DAC\n\n\tINY\n\nloc_BANK2_8DAC:\n\tCPY #$02\n\tBCC SetGameModeBonusChance\n\n\tINC DoAreaTransition\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nSetGameModeBonusChance:\n\tLDA #GameMode_BonusChance\n\tSTA GameMode\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8DBA:\n\tLDA CrystalAndHawkmouthOpenSize\n\tBEQ RenderSprite_HawkmouthLeft\n\n\tCMP #$30\n\tBEQ loc_BANK2_8DDB\n\n\tLDA byte_RAM_EE\n\tAND #$04\n\tBNE RenderSprite_HawkmouthLeft\n\n\tINC CrystalAndHawkmouthOpenSize\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE loc_BANK2_8DD8\n\n\tDEC byte_RAM_711F\n\tINC byte_RAM_710B\n\nloc_BANK2_8DD8:\n\tJMP RenderSprite_HawkmouthLeft\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8DDB:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_PlayerInsideMaybe\n\tBEQ RenderSprite_HawkmouthLeft\n\n\tLDA ObjectYLo, X\n\tCMP PlayerYLo\n\tBCS RenderSprite_HawkmouthLeft\n\n\tLDA PlayerCollision\n\tAND #CollisionFlags_Down\n\tBEQ RenderSprite_HawkmouthLeft\n\n\tLDA HoldingItem\n\tBNE RenderSprite_HawkmouthLeft\n\n\tLDA #PlayerState_HawkmouthEating\n\tSTA PlayerState\n\tLDA #$30\n\tSTA PlayerStateTimer\n\tLDA #$FC\n\tSTA PlayerYVelocity\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\tINC HawkmouthClosing\n\nRenderSprite_HawkmouthLeft:\n\tLDA byte_RAM_EF\n\tBNE loc_BANK2_8E60\n\n\tLDA ObjectType, X\n\tSEC\n\tSBC #$41\n\tSTA EnemyMovementDirection, X\n\tLDA CrystalAndHawkmouthOpenSize\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_8E13:\n\tSTA byte_RAM_7\n\tLSR A\n\tLSR A\n\tEOR #$FF\n\tSEC\n\tADC SpriteTempScreenY\n\tSTA SpriteTempScreenY\n\tLDY DoorAnimationTimer\n\tBEQ loc_BANK2_8E27\n\n\tLDY #$10\n\nloc_BANK2_8E27:\n\tSTY byte_RAM_F4\n\tLDA #$8E\n\tLDY byte_RAM_7\n\tBEQ loc_BANK2_8E31\n\n\tLDA #$92\n\nloc_BANK2_8E31:\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_7\n\tTAY\n\tLSR A\n\tCLC\n\tADC SpriteTempScreenY\n\tADC #$08\n\tCPY #$00\n\tBNE loc_BANK2_8E44\n\n\tADC #$07\n\nloc_BANK2_8E44:\n\tSTA byte_RAM_0\n\tJSR FindSpriteSlot\n\n\tLDX #$9A\n\tLDA byte_RAM_7\n\tBEQ loc_BANK2_8E58\n\n\tLDA HawkmouthClosing\n\tBEQ loc_BANK2_8E56\n\n\tLDY #$10\n\nloc_BANK2_8E56:\n\tLDX #$96\n\nloc_BANK2_8E58:\n\tSTY byte_RAM_F4\n\tJSR SetSpriteTiles\n\n\tJSR SetSpriteTiles\n\nloc_BANK2_8E60:\n\tLDX byte_RAM_12\n\tRTS\n\n; End of function sub_BANK2_8E13\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_Trouter:\n\tJSR EnemyInit_Stationary\n\n\tLDA ObjectXLo, X\n\tADC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectYLo, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_B1, X\n\tLDA #$80\n\tSTA EnemyTimer, X\n\nlocret_BANK2_8E78:\n\tRTS\n\n\nbyte_BANK2_8E79:\n\t.db $AC\n\t.db $AE\n\t.db $B1\n\t.db $B5\n\t.db $B8\n\t.db $BC\n\t.db $C0\n\t.db $C4\n\t.db $C8\n\t.db $CC\n\t.db $D2\n\t.db $D8\n\nbyte_BANK2_8E85:\n\t.db $92\n\t.db $EA\n\n\nEnemyBehavior_Trouter:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA #$09\n\tLDY ObjectYVelocity, X\n\tBMI loc_BANK2_8E9A\n\n\tLDA #$89\n\nloc_BANK2_8E9A:\n\tSTA ObjectAttributes, X\n\tLDY IsHorizontalLevel\n\tLDA ObjectYLo, X\n\tCMP byte_BANK2_8E85, Y\n\tBCC loc_BANK2_8EB6\n\n\tLDY EnemyTimer, X\n\tBNE locret_BANK2_8E78\n\n\tSTA ObjectYLo, X\n\tLDY EnemyArray_B1, X\n\tLDA byte_BANK2_8E79, Y\n\tSTA ObjectYVelocity, X\n\tLDA #$C0\n\tSTA EnemyTimer, X\n\nloc_BANK2_8EB6:\n\tJSR sub_BANK2_9430\n\n\tINC ObjectYVelocity, X\n\tJMP RenderSprite\n\n\nEnemy_Hoopstar_YVelocity:\n\t.db $FA ; up\n\t.db $0C ; down\n\nEnemy_Hoopstar_Attributes:\n\t.db $91 ; up\n\t.db $11 ; down\n\n\nEnemyBehavior_Hoopstar:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR RenderSprite\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tJSR sub_BANK3_B4E2\n\n\tLDY EnemyArray_477, X\n\tBCC loc_BANK2_8EEC\n\n\tLDA ObjectYLo, X\n\tCMP ScreenYLo\n\tLDA ObjectYHi, X\n\tSBC ScreenYHi\n\tBEQ loc_BANK2_8EF3\n\n\tASL A\n\tROL A\n\tAND #$01\n\tBPL loc_BANK2_8EEF\n\nloc_BANK2_8EEC:\n\tTYA\n\tEOR #$01\n\nloc_BANK2_8EEF:\n\tSTA EnemyArray_477, X\n\tTAY\n\nloc_BANK2_8EF3:\n\tLDA Enemy_Hoopstar_YVelocity, Y\n\tSTA ObjectYVelocity, X\n\tLDA Enemy_Hoopstar_Attributes, Y\n\tSTA ObjectAttributes, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$10\n\tCMP #$20\n\tBCS loc_BANK2_8F0A\n\n\tASL ObjectYVelocity, X\n\nloc_BANK2_8F0A:\n\tJMP ApplyObjectPhysicsY\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_00:\n\tLDA byte_RAM_EF\n\tBEQ loc_BANK2_8F14\n\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8F14:\n\tLDY #$FC\n\tLDA byte_RAM_10\n\tAND #$20\n\tBEQ loc_BANK2_8F1E\n\n\tLDY #$04\n\nloc_BANK2_8F1E:\n\tSTY ObjectXVelocity, X\n\tLDA #$F8\n\tSTA ObjectYVelocity, X\n\tJSR sub_BANK2_9430\n\nRenderSprite_Heart:\n\tLDA byte_RAM_EE\n\tAND #$08\n\tORA byte_RAM_EF\n\tBNE RenderSprite_Heart_Exit\n\n\t; This part of the code seems to only run\n\t; if the graph we're trying to draw is\n\t; a heart sprite ...\n\tLDY byte_RAM_F4\n\tLDA SpriteTempScreenY\n\tSTA SpriteDMAArea, Y\n\tLDA SpriteTempScreenX\n\tSTA SpriteDMAArea + 3, Y\nSetHeartSprite:\n\tLDA #$D8\n\tSTA SpriteDMAArea + 1, Y\n\tLDA byte_RAM_10\n\tAND #$20\n\tEOR #$20\n\tASL A\n\tORA #$01\n\tSTA SpriteDMAArea + 2, Y\n\nRenderSprite_Heart_Exit:\n\tRTS\n\n\nEnemy_Birdo_Attributes:\n\t.db ObjAttrib_Palette3 | ObjAttrib_16x32\n\t.db ObjAttrib_Palette1 | ObjAttrib_16x32\n\t.db ObjAttrib_Palette2 | ObjAttrib_16x32\n\n\n;\n; Initializes a Birdo (and a few other boss enemies)\n;\nEnemyInit_Birdo:\n\tJSR EnemyInit_Basic\n\n\tLDY #$00 ; Default to the Gray Birdo (fires only fireballs)\n\tLDA ObjectXLo, X ; Check if this is a special Birdo.\n\tCMP #$A0 ; means this is a Pink Birdo (fires only eggs, slowly)\n\tBEQ EnemyInit_Birdo_SetType\n\n\tINY\n\tCMP #$B0 ; tile x-position on page = $B\n\tBEQ EnemyInit_Birdo_SetType ; If yes, this is a Red Birdo (fires eggs and fireballs)\n\n\tINY\n\nEnemyInit_Birdo_SetType:\n\tSTY EnemyVariable, X ; Set the Birdo type\n\tLDA Enemy_Birdo_Attributes, Y\n\tSTA ObjectAttributes, X\n\tLDA #$02\n\tSTA EnemyHP, X\n\nEnemyInit_Birdo_Exit:\n\tLDA ObjectXHi, X\n\tSTA unk_RAM_4EF, X\n\tRTS\n\n\nProjectileLaunchXOffsets:\n\t.db $FE\n\t.db $F8\n\n\nEnemyBehavior_Birdo:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\tJSR RenderSprite\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK2_8FD2\n\n\tJSR ResetObjectYVelocity\n\n\tLDA byte_RAM_10\n\tBNE loc_BANK2_8FA3\n\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tBNE loc_BANK2_8FD2\n\n\nBirdoSpitDelay:\n\t.db $7F\n\t.db $3F\n\t.db $3F\n\n\n; Health-based Birdo egg/fire chances.\n; If PRNG & $1F >= this, shoot an egg\n; Otherwise, shoot a fireball\nBirdoHealthEggProbabilities:\n\t.db $08\n\t.db $06\n\t.db $04\n\n\nloc_BANK2_8FA3:\n\tLDY EnemyVariable, X\n\tLDA BirdoSpitDelay, Y\n\tAND byte_RAM_10\n\tBNE loc_BANK2_8FB6\n\n\tLDA byte_RAM_EE\n\tAND #$0C\n\tBNE loc_BANK2_8FB6\n\n\tLDA #$1C\n\tSTA EnemyTimer, X\n\nloc_BANK2_8FB6:\n\tLDY EnemyTimer, X\n\tBNE BirdoBehavior_SpitProjectile\n\n\tINC EnemyArray_B1, X\n\tLDA EnemyArray_B1, X\n\tAND #$40\n\tBEQ loc_BANK2_901B\n\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA #$0A\n\tLDY EnemyArray_B1, X\n\tBMI loc_BANK2_8FCD\n\n\tLDA #$F6\n\nloc_BANK2_8FCD:\n\tSTA ObjectXVelocity, X\n\tJMP ApplyObjectPhysicsX\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_8FD2:\n\tJMP ApplyObjectMovement_Vertical\n\n; ---------------------------------------------------------------------------\n\nBirdoBehavior_SpitProjectile:\n\tCPY #$08\n\tBNE loc_BANK2_901B\n\n\tLDA #SoundEffect1_BirdoShot\n\tSTA SoundEffectQueue1\n\tJSR sub_BANK2_95E5\n\n\tBMI loc_BANK2_901B\n\n\tLDY EnemyHP, X\n\tLDA EnemyVariable, X\n\tLDX byte_RAM_0\n\tCMP #$02 ; If we're a Gray Birdo, always shoot fire\n\tBEQ _Birdo_SpitFire\n\n\tCMP #$01 ; If we're a Pink Birdo, always shoot eggs\n\tBNE _Birdo_SpitEgg\n\n\tLDA PseudoRNGValues + 2 ; Otherwise, randomly determine what to fire\n\tAND #$1F ; If PRNG & $1F >= our health-probability number,\n\tCMP BirdoHealthEggProbabilities, Y ; fire an egg out\n\tBCS _Birdo_SpitEgg ; Otherwise just fall through to barfing fire\n\n_Birdo_SpitFire:\n\tINC EnemyVariable, X ; Shoot a fireball\n\tLDA #Enemy_Fireball\n\tBNE EnemyBehavior_SpitProjectile\n\n_Birdo_SpitEgg:\n\tLDA #Enemy_Egg ; Shoot an egg\n\n\n;\n; Spits an object (used by Birdo and Autobomb)\n;\n; Input\n;   A = Object type\n;   X = Enemy index\n;\nEnemyBehavior_SpitProjectile:\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$03\n\tSTA ObjectYLo, X\n\tLDY EnemyMovementDirection, X\n\tLDA ObjectXLo, X\n\tADC ProjectileLaunchXOffsets - 1, Y\n\tSTA ObjectXLo, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK2_901B:\n\tJMP RenderSprite\n\n\n; ---------------------------------------------------------------------------\n\t.db $18\n\t.db $E8\n\nbyte_BANK2_9020:\n\t.db $FE\n\t.db $F8\n\t.db $F0\n\t.db $E8\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Coin:\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA ObjectYVelocity, X\n\tCMP #$EA\n\tBNE EnemyBehavior_Mushroom1up\n\n\tLDA #SoundEffect2_CoinGet\n\tSTA SoundEffectQueue2\n\nEnemyBehavior_Mushroom1up:\n\tLDA ObjectYVelocity, X\n\tCMP #$10\n\tBMI EnemyBehavior_Mushroom\n\n\tJSR TurnIntoPuffOfSmoke\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Mushroom1up\n\tBEQ Award1upMushroom\n\n\tINC SlotMachineCoins\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nAward1upMushroom:\n\tINC Mushroom1upPulled\n\tINC ExtraLives\n\tBNE loc_BANK2_9050 ; Check if lives overflow. If so, reduce by one again\n\n\tDEC ExtraLives\n\nloc_BANK2_9050:\n\tLDA #SoundEffect1_1UP\n\tSTA SoundEffectQueue1\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_CrystalBall:\n\tINC SpriteTempScreenY\n\tJSR AttachObjectToBirdo\n\n;\n; Behavior for objects that turn into smoke after you pick them up\n; (eg. mushrooms, crystal ball, stopwatch)\n;\nEnemyBehavior_Mushroom:\n\tLDA ObjectBeingCarriedTimer, X\n\tCMP #$01\n\tBNE EnemyBehavior_Mushroom_StayMaterial\n\n\tLDA PlayerDucking\n\tBEQ EnemyBehavior_Mushroom_PickUp\n\nEnemyBehavior_Mushroom_StayMaterial:\n\tJMP EnemyBehavior_Bomb\n\nEnemyBehavior_Mushroom_PickUp:\n\tJSR CarryObject\n\n\tLDA #$00\n\tSTA HoldingItem\n\tSTA ObjectBeingCarriedTimer, X\n\tJSR TurnIntoPuffOfSmoke\n\n\tLDA ObjectType, X\n\tCMP #Enemy_CrystalBall\n\tBNE EnemyBehavior_PickUpNotCrystalBall\n\n\tLDA CrystalAndHawkmouthOpenSize\n\tBNE EnemyBehavior_CrystalBall_Exit\n\n\tLDA #Music2_CrystalGetFanfare\n\tSTA MusicQueue2\n\tLDA #$60\n\tSTA HawkmouthOpenTimer\n\tINC CrystalAndHawkmouthOpenSize\n\nEnemyBehavior_CrystalBall_Exit:\n\tRTS\n\nEnemyBehavior_PickUpNotCrystalBall:\n\tCMP #Enemy_Mushroom1up\n\tBEQ EnemyBehavior_PickUpMushroom1up\n\n\tCMP #Enemy_Stopwatch\n\tBEQ EnemyBehavior_PickUpStopwatch\n\n\tCMP #Enemy_Mushroom\n\tBNE EnemyBehavior_PickUpNotMushroom\n\nEnemyBehavior_PickUpMushroom:\n\tLDX EnemyVariable\n\tINC Mushroom1Pulled, X\n\tLDX byte_RAM_12\n\tINC PlayerMaxHealth\n\tJSR RestorePlayerToFullHealth\n\n\tLDA #Music2_MushroomGetJingle\n\tSTA MusicQueue2\n\tRTS\n\nEnemyBehavior_PickUpMushroom1up:\n\tLDA #$09\n\tSTA ObjectAttributes, X\n\nEnemyBehavior_PickUpNotMushroom:\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tLDA #$01\n\tSTA EnemyState, X\n\tRTS\n\nEnemyBehavior_PickUpStopwatch:\n\tLDA #$FF\n\tSTA StopwatchTimer\n\tRTS\n\n\nEnemyBehavior_Key:\n\tJSR AttachObjectToBirdo\n\n;\n; Behavior for objects that have background collision detection\n;\nEnemyBehavior_Bomb:\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND EnemyMovementDirection, X\n\tBEQ loc_BANK2_90D9\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\tJSR HalfObjectVelocityX\n\tJSR HalfObjectVelocityX\n\nloc_BANK2_90D9:\n\tPLA\n\tAND #$04\n\tBEQ loc_BANK2_90FB\n\n\tLDA ObjectYVelocity, X\n\tCMP #$09\n\tBCC loc_BANK2_90F2\n\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA byte_BANK2_9020, Y\n\tJSR sub_BANK2_95AA\n\n\tJMP loc_BANK2_90FB\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_90F2:\n\tJSR ResetObjectYVelocity\n\n\tLDA byte_RAM_B\n\tBNE loc_BANK2_90FB\n\n\tSTA ObjectXVelocity, X\n\nloc_BANK2_90FB:\n\tLDA ObjectType, X\n\tCMP #Enemy_Bomb\n\tBNE EnemyBehavior_Vegetable\n\n\tLDA EnemyTimer, X\n\tBNE loc_BANK2_9122\n\n\tLDY ObjectBeingCarriedTimer, X\n\tBEQ EnemyBehavior_Bomb_Explode\n\n\tSTA HoldingItem\n\tSTA ObjectBeingCarriedTimer, X\n\nEnemyBehavior_Bomb_Explode:\n\tLDA #EnemyState_BombExploding\n\tSTA EnemyState, X\n\tLDA #$20\n\tSTA EnemyTimer, X\n\tSTA SkyFlashTimer\n\tLDA #DPCM_DoorOpenBombBom\n\tSTA DPCMQueue\n\tLSR A\n\t; A = $00\n\tSTA EnemyArray_42F, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9122:\n\tCMP #Enemy_Mushroom1up\n\tBCS EnemyBehavior_Vegetable\n\n\tLSR A\n\tBCC EnemyBehavior_Vegetable\n\n\tINC ObjectAttributes, X\n\tLDA ObjectAttributes, X\n\tAND #$FB\n\tSTA ObjectAttributes, X\n\nEnemyBehavior_Vegetable:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ApplyObjectMovement\n\nRenderSprite_VegetableLarge:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK2_913E\n\n\tJMP RenderSprite_NotAlbatoss\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_913E:\n\tJMP RenderSprite_DrawObject\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_SubspacePotion:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ EnemyBehavior_SubspacePotion_CheckGroundCollision\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\tJSR HalfObjectVelocityX\n\nEnemyBehavior_SubspacePotion_CheckGroundCollision:\n\tPLA\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Vegetable\n\n\tJSR ResetObjectYVelocity\n\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$10\n\tSTA ObjectYLo, X\n\tLDA ObjectXLo, X\n\tADC #$07\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA #$10\n\tSTA EnemyArray_453, X\n\tLDA #SoundEffect1_PotionDoorBong\n\tSTA SoundEffectQueue1\n\tINC EnemyArray_B1, X\n\tLDA #Enemy_SubspaceDoor\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$10\n\tSTA byte_RAM_5BB\n\n\t; No Subspace Doors allowed in vertical levels\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK2_9198\n\n\tLDA #DPCM_BossHurt\n\tSTA DPCMQueue\n\tJSR EnemyDestroy\n\nloc_BANK2_9198:\n\tJSR CreateEnemy\n\n\tBMI TurnIntoPuffOfSmoke_Exit\n\n\tLDY byte_RAM_0\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDA #$41\n\tSTA ObjectAttributes, Y\n\tTYA\n\tTAX\n\n\n;\n; Turns an object into a puff of smoke\n;\n; Input\n;   X = enemy index of object to poof\n;\nTurnIntoPuffOfSmoke:\n\tLDA ObjectAttributes, X ; Get current object sprite attributes...\n\tAND #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_16x32 | ObjAttrib_UpsideDown\n\tORA #ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, X ; WINNERS DON'T SMOKE SHROOMS\n\tSTA ObjectAnimationTimer, X ; No idea what this address is for\n\tLDA #$1F\n\tSTA EnemyTimer, X ; Puff-of-smoke animation timer?\n\tLDX byte_RAM_12\n\nTurnIntoPuffOfSmoke_Exit:\n\tRTS\n\n\nbyte_BANK2_91C5:\n\t.db $F8\n\t.db $08\n\n\n;\n; Look for a Birdo to attach to\n;\nAttachObjectToBirdo:\n\tLDA EnemyVariable, X\n\tBNE AttachObjectToBirdo_Skip\n\n\tLDY #$05\nAttachObjectToBirdo_Loop:\n\tLDA EnemyState, Y\n\tCMP #EnemyState_Alive\n\tBNE AttachObjectToBirdo_NotLiveBirdo\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Birdo\n\tBEQ AttachObjectToBirdo_DoAttach\n\nAttachObjectToBirdo_NotLiveBirdo:\n\tDEY\n\tBPL AttachObjectToBirdo_Loop\n\nAttachObjectToBirdo_Skip:\n\tLDA #$01\n\tSTA EnemyVariable, X\n\tJMP SetEnemyAttributes\n\nAttachObjectToBirdo_DoAttach:\n\tLDA ObjectXHi, Y\n\tCMP ObjectXHi, X\n\tBNE AttachObjectToBirdo_Skip\n\n\tLDA ObjectXLo, Y\n\tSTA ObjectXLo, X\n\tLDA ObjectYLo, Y\n\tADC #$0E\n\tSTA ObjectYLo, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_BANK2_91C5, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tPLA\n\tPLA\n\tLDA #%00000111\n\tSTA EnemyArray_46E, X\n\tLDA #$30\n\tSTA byte_RAM_F4\n\tJMP RenderSprite\n\n\n\nbyte_BANK2_9212:\n\t.db $F0\n\nbyte_BANK2_9213:\n\t.db $FF\n\t.db $00\n; ---------------------------------------------------------------------------\n\nEnemyInit_AlbatossStartLeft:\n\tJSR EnemyInit_Basic\n\n\tLDA #$F0\n\tBNE loc_BANK2_9221\n\nEnemyInit_AlbatossStartRight:\n\tJSR EnemyInit_Basic\n\n\tLDA #$10\n\nloc_BANK2_9221:\n\tSTA ObjectXVelocity, X\n\tINC EnemyArray_B1, X\n\tLDA ObjectType, X\n\tSEC\n\nloc_BANK2_9228:\n\tSBC #$0B\n\tTAY\n\tLDA ScreenBoundaryLeftLo\n\tADC byte_BANK2_9212, Y\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC byte_BANK2_9213, Y\n\tSTA ObjectXHi, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Albatoss:\n\tJSR RenderSprite_Albatoss\n\n\tINC ObjectAnimationTimer, X\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK2_9271\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Damage\n\tBNE loc_BANK2_9256\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$30\n\tCMP #$60\n\tBCS loc_BANK2_926E\n\nloc_BANK2_9256:\n\tJSR CreateEnemy\n\n\tBMI loc_BANK2_926E\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_BobOmb\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tADC #$10\n\tSTA ObjectYLo, X\n\tJSR EnemyInit_Bobomb\n\n\tLDX byte_RAM_12\n\tINC EnemyArray_B1, X\n\nloc_BANK2_926E:\n\tJMP loc_BANK2_9274\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9271:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\nloc_BANK2_9274:\n\tJMP ApplyObjectPhysicsX\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_AutobombFire:\n\tJSR sub_BANK2_9289\n\nsub_BANK2_927A:\n\tASL ObjectAttributes, X\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tROR ObjectAttributes, X\n\tRTS\n\n\n; Unused?\n\t.db $D0\n\t.db $03\n\n\nEnemyBehavior_BulletAndEgg:\n\tJSR ObjectTileCollision\n\nsub_BANK2_9289:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA EnemyArray_B1, X\n\tORA EnemyArray_42F, X\n\tBEQ loc_BANK2_9299\n\n\tJMP RenderSpriteAndApplyObjectMovement\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9299:\n\tLDA ObjectYVelocity, X\n\tBPL loc_BANK2_929F\n\n\tSTA EnemyArray_B1, X\n\nloc_BANK2_929F:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK2_92BE\n\n\tSTA EnemyArray_B1, X\n\tLDA ObjectType, X\n\tCMP #Enemy_Bullet\n\tBNE loc_BANK2_92B5\n\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\tINC ObjectYLo, X\n\tINC ObjectYLo, X\n\nloc_BANK2_92B5:\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK2_92BE:\n\tJSR ApplyObjectPhysicsX\n\n\tJMP RenderSprite\n\n; End of function sub_BANK2_9289\n\n\n;\n; Creates a generic red Shyguy enemy and\n; does some basic initialization for it.\n;\n; CreateEnemy_TryAllSlots checks all 9 object slots\n; CreateEnemy only checks the first 6 object slots\n;\n; Output\n;   N = enabled if no empty slot was found\n;   Y = $FF if there no empty slot was found\n;   byte_RAM_0 = slot used\n;\nCreateEnemy_TryAllSlots:\n\tLDY #$08\n\tBNE CreateEnemy_FindSlot\n\nCreateEnemy:\n\tLDY #$05\n\nCreateEnemy_FindSlot:\n\tLDA EnemyState, Y\n\tBEQ CreateEnemy_FoundSlot\n\n\tDEY\n\tBPL CreateEnemy_FindSlot\n\n\tRTS\n\nCreateEnemy_FoundSlot:\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, Y\n\tLSR A\n\tSTA EnemyArray_SpawnsDoor, Y\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, Y\n\tLDA ObjectXLo, X\n\tADC #$05\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, Y\n\tLDA ObjectYLo, X\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tSTA ObjectYHi, Y\n\tSTY byte_RAM_0\n\tTYA\n\tTAX\n\n\tJSR EnemyInit_Basic\n\tJSR UnlinkEnemyFromRawData\n\n\tLDX byte_RAM_12\n\tRTS\n\n\nPhanto_AccelX:\n\t.db $01\n\t.db $FF\nPhanto_MaxVelX:\n\t.db $30\n\t.db $D0\nPhanto_AccelY:\n\t.db $01\n\t.db $FF ; Exit up\n\t.db $01 ; Exit down\nPhanto_MaxVelY:\n\t.db $18\n\t.db $E8\n\t.db $18\n\nEnemyBehavior_Phanto:\n\tLDA ObjectShakeTimer, X\n\tBEQ Phanto_AfterDecrementShakeTimer\n\n\tDEC ObjectShakeTimer, X\n\nPhanto_AfterDecrementShakeTimer:\n\tJSR RenderSprite\n\n\tLDY #$01 ; Move away from player\n\tLDA HoldingItem\n\tBEQ Phanto_Movement\n\n\tLDX ObjectBeingCarriedIndex\n\tLDA ObjectType, X\n\tLDX byte_RAM_12\n\n\t; Strange code. Phanto only chases you if you have the key.\n\t; So you should just be able to use BEQ/BNE.\n\t; This way seems to imply that Phanto would\n\t; chase you if you were carrying a range of items,\n\t; but...  what could those items have been?\n\t; But instead we do it like this for... reasons.\n\t; Nintendo.\n\tCMP #Enemy_Key\n\tBCC Phanto_Movement\n\n\t; Subspace Potion is >= Enemy_Key, so ignore it\n\tCMP #Enemy_SubspacePotion\n\tBCS Phanto_Movement\n\n\tLDA PhantoActivateTimer\n\tCMP #$A0\n\tBNE Phanto_AfterStartTimer\n\n\t; Kick off Phanto activation timer\n\tDEC PhantoActivateTimer\n\nPhanto_AfterStartTimer:\n\tDEY ; Move toward player\n\nPhanto_Movement:\n\tLDA ObjectYHi, X\n\tCLC\n\tADC #$01\n\tSTA byte_RAM_5\n\tLDA PlayerYLo\n\tCMP ObjectYLo, X\n\tLDX PlayerYHi\n\tINX\n\tTXA\n\tLDX byte_RAM_12\n\tSBC byte_RAM_5\n\tBPL loc_BANK2_9351\n\n\tINY ; Other side of player vertically\n\nloc_BANK2_9351:\n\tLDA ObjectYVelocity, X\n\tCMP Phanto_MaxVelY, Y\n\tBEQ loc_BANK2_935E\n\n\tCLC\n\tADC Phanto_AccelY, Y\n\tSTA ObjectYVelocity, X\n\nloc_BANK2_935E:\n\tLDA EnemyArray_480, X\n\tCLC\n\tADC #$A0\n\tSTA EnemyArray_480, X\n\tBCC loc_BANK2_937F\n\n\tLDA EnemyArray_477, X\n\tAND #$01\n\tTAY\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC Phanto_AccelX, Y\n\tSTA ObjectXVelocity, X\n\tCMP Phanto_MaxVelX, Y\n\tBNE loc_BANK2_937F\n\n\tINC EnemyArray_477, X\n\nloc_BANK2_937F:\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK2_9388\n\n\tLDA PlayerXVelocity\n\tSTA ObjectXAcceleration, X\n\nloc_BANK2_9388:\n\tLDY PhantoActivateTimer\n\tBEQ Phanto_Activated\n\n\t; Hold the timer at $A0\n\tCPY #$A0\n\tBEQ Phanto_AfterDecrementActivateTimer\n\n\tCPY #$80\n\tBNE Phanto_AfterFlashing\n\n\t; Start flashing\n\tLDA #$40\n\tSTA EnemyArray_45C, X\n\nPhanto_AfterFlashing:\n\tCPY #$40\n\tBNE Phanto_AfterSound\n\n\t; Start vibrating\n\tLDA #$40\n\tSTA ObjectShakeTimer, X\n\n\t; Play Phanto activation sound effect\n\tLDA #SoundEffect3_Rumble_B\n\tSTA SoundEffectQueue3\n\nPhanto_AfterSound:\n\tDEC PhantoActivateTimer\n\nPhanto_AfterDecrementActivateTimer:\n\tLDA #$00\n\tSTA ObjectXAcceleration, X\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\nPhanto_Activated:\n\tJMP sub_BANK2_9430\n\n\nEnemy_Ninji_JumpVelocity:\n\t.db $E8\n\t.db $D0\n\t.db $D8\n\t.db $D0\n\n\nEnemyBehavior_NinjiJumping:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Ninji_MidAir\n\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_NinjiJumping_DetermineJump\n\n\t; stop x-velocity\n\tSTA ObjectXVelocity, X\n\nEnemyBehavior_NinjiJumping_DetermineJump:\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tAND #$3F\n\tBNE EnemyBehavior_Ninji_MidAir\n\n\tLDA ObjectAnimationTimer, X\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA Enemy_Ninji_JumpVelocity, Y\n\tBNE EnemyBehavior_Ninji_Jump\n\nEnemyBehavior_NinjiRunning:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Ninji_MidAir\n\n\tLDA PlayerYLo\n\tCLC\n\tADC #$10\n\tCMP ObjectYLo, X\n\tBNE EnemyBehavior_Ninji_MidAir\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tTYA\n\tCMP EnemyMovementDirection, X\n\tBNE EnemyBehavior_Ninji_MidAir\n\n\tLDA byte_RAM_F\n\tADC #$28\n\tCMP #$50\n\tBCS EnemyBehavior_Ninji_MidAir\n\n\tLDA #$D8\n\nEnemyBehavior_Ninji_Jump:\n\tSTA ObjectYVelocity, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$F0\n\tSTA ObjectAnimationTimer, X\n\tJSR ApplyObjectPhysicsY\n\nEnemyBehavior_Ninji_MidAir:\n\tJMP EnemyBehavior_BasicWalker\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Beezo:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR RenderSprite\n\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR IncrementAnimationTimerBy2\n\nloc_BANK2_941D:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA ObjectYVelocity, X\n\tBEQ loc_BANK2_9436\n\n\tBPL loc_BANK2_9429\n\n\tSTA EnemyArray_42F, X\n\nloc_BANK2_9429:\n\tLDA byte_RAM_10\n\tLSR A\n\tBCC sub_BANK2_9430\n\n\tDEC ObjectYVelocity, X\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_9430:\n\tJSR ApplyObjectPhysicsX\n\n\tJMP ApplyObjectPhysicsY\n\n; End of function sub_BANK2_9430\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9436:\n\tJSR ApplyObjectPhysicsX\n\nloc_BANK2_9439:\n\tJMP sub_BANK2_9430\n\n\nBulletProjectileXSpeeds:\n\t.db $20\n\t.db $E0\n\n\nEnemyBehavior_BobOmb:\n\tLDY EnemyTimer, X\n\tCPY #$3A ; When to stop walking\n\tBCS EnemyBehavior_BasicWalker\n\n\t; Stop walking if the BobOmb is touching the ground\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_BobOmb_CheckFuse\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\nEnemyBehavior_BobOmb_CheckFuse:\n\tDEC ObjectAnimationTimer, X\n\tTYA\n\tBNE EnemyBehavior_BobOmb_Flash\n\n\t; Unset HoldingItem if this BobOmb is being carried\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ EnemyBehavior_BobOmb_Explode\n\n\tSTY HoldingItem\n\tSTY ObjectBeingCarriedTimer, X\n\nEnemyBehavior_BobOmb_Explode:\n\tJMP EnemyBehavior_Bomb_Explode\n\n\nEnemyBehavior_BobOmb_Flash:\n\tCMP #$30 ; When to start flashing\n\tBCS EnemyBehavior_BasicWalker\n\n\t; Palette cycle every other frame\n\tLSR A\n\tBCC EnemyBehavior_BasicWalker\n\n\tINC ObjectAttributes, X\n\tLDA ObjectAttributes, X\n\tAND #%11111011\n\tSTA ObjectAttributes, X\n\n\nEnemyBehavior_BasicWalker:\n\tJSR ObjectTileCollision\n\nloc_BANK2_9470:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA EnemyArray_480, X\n\tBEQ loc_BANK2_9492\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Up\n\tBEQ loc_BANK2_9481\n\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9481:\n\tDEC EnemyArray_480, X\n\tINC EnemyTimer, X\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_9486:\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_BehindBackground\n\tSTA ObjectAttributes, X\n\tJSR ApplyObjectPhysicsY\n\n\tJMP RenderSprite\n\n; End of function sub_BANK2_9486\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9492:\n\tLDA EnemyCollision, X\n\tAND EnemyMovementDirection, X\n\tBEQ loc_BANK2_94A6\n\n\tJSR EnemyBehavior_TurnAround\n\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK2_94A6\n\n\tJSR HalfObjectVelocityX\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK2_94A6:\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\nloc_BANK2_94AB:\n\tJSR RenderSprite\n\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitGray\n\tBNE loc_BANK2_94BB\n\n\tLDA EnemyArray_42F, X\n\tBNE loc_BANK2_94BB\n\n\tSTA ObjectXVelocity, X\n\nloc_BANK2_94BB:\n\tJSR ApplyObjectMovement\n\n\tLDA EnemyCollision, X\n\tLDY ObjectYVelocity, X\n\tBPL loc_BANK2_9503\n\n\tAND #$08\n\tBEQ loc_BANK2_94CD\n\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_94CD:\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_Walk\n\n\t; check if this enemy fires bullets when jumping\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitGray\n\tBNE EnemyBehavior_Walk\n\n\t; bullet generator\n\tLDA ObjectYVelocity, X ; check if enemy is starting to fall\n\tCMP #$FE\n\tBNE EnemyBehavior_Walk\n\n\tLDA PseudoRNGValues + 2 ; check random number generator\n\tBPL EnemyBehavior_Walk\n\n\t; jumper high bullet\n\tJSR CreateBullet\n\nEnemyBehavior_Walk:\n\tDEC ObjectAnimationTimer, X\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitPink\n\tBEQ EnemyBehavior_TurnAtCliff\n\n\tCMP #Enemy_ShyguyPink\n\tBNE EnemyBehavior_BasicWalkerExit\n\nEnemyBehavior_TurnAtCliff:\n\t; skip if being thrown\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_BasicWalkerExit\n\n\t; skip if already turning around\n\tLDA EnemyArray_477, X\n\tBNE EnemyBehavior_BasicWalkerExit\n\n\tINC EnemyArray_477, X\n\tJMP EnemyBehavior_TurnAround\n\nEnemyBehavior_BasicWalkerExit:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9503:\n\tAND #$04\n\tBEQ loc_BANK2_94CD\n\n\tLDA #$00\n\tSTA EnemyArray_477, X\n\tLDY ObjectType, X ; Get the current object ID\n\tCPY #Enemy_Tweeter ; Check if this enemy is a Tweeter\n\tBNE loc_BANK2_9528 ; If not, go handle some other enemies\n\n\t; ...but very, very, very rarely, only\n\t; when their timer (that increments once per bounce)\n\t; hits #$3F -- almost unnoticable\n\tLDA #$3F\n\tJSR sub_BANK2_9599\n\n\tINC EnemyVariable, X ; Make small jump 3 times, then make big jump\n\tLDY #$F0\n\tLDA EnemyVariable, X\n\tAND #$03 ; Check if the timer is a multiple of 4\n\tBNE loc_BANK2_9523 ; If not, skip over the next bit\n\n\tLDY #$E0\n\nloc_BANK2_9523:\n\tSTY ObjectYVelocity, X ; Set Y acceleration for bouncing\n\tJMP ApplyObjectPhysicsY\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9528:\n\tLDA #$1F\n\tCPY #Enemy_BobOmb\n\tBEQ sub_BANK2_9599\n\n\tCPY #Enemy_Flurry\n\tBEQ sub_BANK2_9599\n\n\tLDA #$3F\n\tCPY #Enemy_NinjiRunning\n\tBEQ sub_BANK2_9599\n\n\t; this redundant red snifit check smells funny, almost like there was\n\t; some other follow-the-player enemy\n\tLDA #$7F ; unused\n\tCPY #Enemy_SnifitRed\n\tBEQ EnemyBehavior_Snifit\n\n\tCPY #Enemy_SnifitRed\n\tBEQ EnemyBehavior_Snifit\n\n\tCPY #Enemy_SnifitPink\n\tBEQ EnemyBehavior_Snifit\n\n\tCPY #Enemy_SnifitGray\n\tBNE loc_BANK2_959D\n\n\tLDA EnemyArray_42F, X\n\tBNE loc_BANK2_959D\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$3F\n\tBNE EnemyBehavior_Snifit\n\n\tLDA #$E8\n\tSTA ObjectYVelocity, X\n\tJMP ApplyObjectPhysicsY\n\n\nEnemyBehavior_Snifit:\n\tLDA ObjectShakeTimer, X\n\tBEQ EnemyBehavior_Snifit_NoBullet\n\n\tDEC ObjectAnimationTimer, X\n\tDEC ObjectShakeTimer, X\n\tBNE EnemyBehavior_Snifit_NoBullet\n\n\t; telegraphed bullet (walking snifits)\n\tJSR CreateBullet\n\n\tJMP loc_BANK2_95BB\n\nEnemyBehavior_Snifit_NoBullet:\nloc_BANK2_9574:\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tASL A\n\tBNE EnemyBehavior_Snifit_AnimationTimer\n\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitGray\n\tBNE EnemyBehavior_Snifit_CheckPlayerY\n\n\t; jumper low bullet\n\tJSR CreateBullet\n\n\tJMP EnemyInit_DisableObjectAttributeBit8\n\n\nEnemyBehavior_Snifit_CheckPlayerY:\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$10\n\tCMP PlayerYLo\n\tBNE EnemyBehavior_Snifit_AnimationTimer\n\n\tLDA #$30 ; shake duration\n\tSTA ObjectShakeTimer, X\n\nEnemyBehavior_Snifit_AnimationTimer:\n\tLDA #$7F\n\n;\n; Gives em the ol' razzle-dazzle\n;\n; Input\n;   A = timer mask\n;\nsub_BANK2_9599:\n\tAND ObjectAnimationTimer, X\n\tBEQ loc_BANK2_95B8\n\nloc_BANK2_959D:\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK2_95BB\n\n\tLDA ObjectYVelocity, X\n\tCMP #$1A\n\tBCC loc_BANK2_95B8\n\n\tLDA #$F0\n\n;\n; Sets the y-velocity, applies vertical physics, and cuts x-velocity in half\n;\n; Input\n;   A = y-velocity\n;   X = enemy index\n;\nsub_BANK2_95AA:\n\tJSR SetObjectYVelocity\n\tJSR ApplyObjectPhysicsY\n\n;\n; Cuts the x-velocity of the current object in half\n;\n; Input\n;   X = enemy index\n; Output\n;   RAM_0 = previous x-velocity\n;\nHalfObjectVelocityX:\n\t; Store the current X-velocity in RAM_0\n\tLDA ObjectXVelocity, X\n\tSTA byte_RAM_0\n\t; Shift left to save the sign in the carry bit\n\tASL A\n\t; Cut in half and preserve the sign\n\tROR ObjectXVelocity, X\n\tRTS\n\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_95B8:\n\tJSR EnemyInit_BasicWithoutTimer\n\nloc_BANK2_95BB:\n\tLDA ObjectType, X\n\tCMP #Enemy_ShyguyRed\n\tBNE EnemyInit_DisableObjectAttributeBit8\n\n\tLDA ObjectYVelocity, X\n\tCMP #$04\n\tBCC EnemyInit_DisableObjectAttributeBit8\n\n\tJSR EnemyInit_BasicWithoutTimer\n\n;\n; Disables bit 8 on the object attribute, which causes the object to appear\n; behind the background while being pulled\n;\nEnemyInit_DisableObjectAttributeBit8:\n\tASL ObjectAttributes, X\n\tLSR ObjectAttributes, X\n\n;\n; Does SetObjectYVelocity with y-velocity of 0\n;\nResetObjectYVelocity:\n\tLDA #$00\n\n;\n; Sets the y-velocity of an object and shifts it half a tile down if it's not a\n; a vegetable\n;\n; Input\n;   A = y-velocity\n;   X = enemy index\n;\nSetObjectYVelocity:\n\tSTA ObjectYVelocity, X\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tLDA ObjectYLo, X\n\tBCS SetObjectYVelocity_Exit\n\n\tADC #$08\n\tBCC SetObjectYVelocity_Exit\n\n\tINC ObjectYHi, X\n\nSetObjectYVelocity_Exit:\n\tAND #$F0\n\tSTA ObjectYLo, X\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_95E5:\n\tJSR CreateEnemy_TryAllSlots\n\n\tJMP CreateBullet_WithSlotInY\n\n; End of function sub_BANK2_95E5\n\n; =============== S U B R O U T I N E =======================================\n\nCreateBullet:\n\tJSR CreateEnemy\n\nCreateBullet_WithSlotInY:\n\tBMI CreateBullet_Exit\n\n\tLDY EnemyMovementDirection, X\n\tLDX byte_RAM_0\n\tLDA BulletProjectileXSpeeds - 1, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\tLDA #Enemy_Bullet\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nCreateBullet_Exit:\n\tRTS\n\n\nCharacterYOffsetCrouch:\n\t.db $0A ; Mario\n\t.db $0E ; Princess\n\t.db $0A ; Toad\n\t.db $0D ; Luigi\n\t.db $04 ; Small Mario\n\t.db $07 ; Small Princess\n\t.db $04 ; Small Toad\n\t.db $06 ; Small Luigi\n\n\n; This is run when the player is carrying\n; something, to update its position to\n; wherever the player is above their head\nCarryObject:\n\tLDA PlayerDirection\n\tEOR #$01\n\tTAY\n\tINY\n\tSTY EnemyMovementDirection, X\n\tLDA PlayerXLo\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tSTA ObjectXHi, X\n\n\tLDA PlayerYHi\n\tSTA byte_RAM_7\n\tLDA PlayerYLo\n\tLDY EnemyArray_489, X\n\tCPY #$03\n\tBEQ loc_BANK2_9636\n\n\tCPY #$02\n\tBEQ loc_BANK2_9636\n\n\tSBC #$0E\n\tBCS loc_BANK2_9636\n\n\tDEC byte_RAM_7\n\nloc_BANK2_9636:\n\tLDY PlayerAnimationFrame\n\tCPY #SpriteAnimation_Ducking\n\tCLC\n\tBNE loc_BANK2_964D\n\n\tLDY PlayerCurrentSize\n\tCPY #$01\n\tLDY CurrentCharacter\n\tBCC loc_BANK2_964A\n\n\tINY\n\tINY\n\tINY\n\tINY\n\nloc_BANK2_964A:\n\tADC CharacterYOffsetCrouch, Y\n\nloc_BANK2_964D:\n\tPHP\n\tLDY ObjectBeingCarriedTimer, X\n\tCLC\n\tLDX PlayerCurrentSize\n\tBEQ loc_BANK2_965D\n\n\tINY\n\tINY\n\tINY\n\tINY\n\tINY\n\tINY\n\tINY\n\nloc_BANK2_965D:\n\tADC ItemCarryYOffsetsRAM - 1, Y\n\tLDX byte_RAM_12\n\tSTA ObjectYLo, X\n\tLDA byte_RAM_7\n\tADC ItemCarryYOffsetsRAM + $D, Y\n\tPLP\n\tADC #$00\n\tSTA ObjectYHi, X\n\tLDY ObjectBeingCarriedTimer, X\n\tCPY #$05\n\tBCS loc_BANK2_9686\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_9686\n\n\tLDA EnemyArray_438, X\n\nloc_BANK2_967D:\n\tBNE loc_BANK2_9681\n\n\tINC ObjectAnimationTimer, X\n\nloc_BANK2_9681:\n\tASL ObjectAttributes, X\n\tSEC\n\tROR ObjectAttributes, X\n\nloc_BANK2_9686:\n\tJSR PutCarriedObjectInHands\n\n\tJMP RenderSprite\n\n\n; Unused?\n\t.db $10\n\t.db $F0\n\n\nEnemyBehavior_MushroomBlockAndPOW:\n\tJSR sub_BANK2_9692\n\nEnemyBehavior_MushroomBlockAndPOW_Exit:\n\tRTS\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_9692:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_969B\n\n\tPLA\n\tPLA\n\tJMP CarryObject\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_969B:\n\tJSR RenderSprite\n\n\tLDA ObjectType, X\n\tCMP #Enemy_POWBlock\n\tBCS loc_BANK2_96AA\n\n\tJSR ObjectTileCollision_SolidBackground\n\n\tJMP loc_BANK2_96AD\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_96AA:\n\tJSR ObjectTileCollision\n\nloc_BANK2_96AD:\n\tLDA EnemyArray_42F, X\n\tBEQ EnemyBehavior_MushroomBlockAndPOW_Exit\n\n\tJSR ApplyObjectMovement\n\n\tPLA\n\tPLA\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK2_96D4\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tLDA ObjectXLo, X\n\tADC #$08\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK2_96D4\n\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, X\n\nloc_BANK2_96D4:\n\tPLA\n\tLDY ObjectYVelocity, X\n\tBMI locret_BANK2_9718\n\n\tAND #CollisionFlags_Down\n\tBEQ locret_BANK2_9718\n\n\tLDA byte_RAM_E\n\tCMP #$16\n\tBNE loc_BANK2_96EC\n\n\tLDA ObjectXVelocity, X\n\tBEQ loc_BANK2_96EC\n\n\tLDA #$14\n\tJMP SetObjectYVelocity\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_96EC:\n\tLDA ObjectType, X\n\tCMP #Enemy_POWBlock\n\tBNE loc_BANK2_96FF\n\n\tLDA #$20\n\tSTA POWQuakeTimer\n\tLDA #SoundEffect3_Rumble_B\n\tSTA SoundEffectQueue3\n\tJMP sub_BANK2_98C4\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_96FF:\n\tLDA ObjectYVelocity, X\n\tCMP #$16\n\tBCC loc_BANK2_970D\n\n\tJSR ResetObjectYVelocity\n\n\tLDA #$F5\n\tJMP sub_BANK2_95AA\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_970D:\n\tJSR ResetObjectYVelocity\n\n\tLDA EnemyVariable, X\n\tJSR ReplaceTile\n\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nlocret_BANK2_9718:\n\tRTS\n\n; End of function sub_BANK2_9692\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_SubspaceDoor:\n\tLDA #$04\n\tSTA EnemyArray_489, X\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tLDY SubspaceTimer\n\tBEQ loc_BANK2_9741\n\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE loc_BANK2_9741\n\n\tLDY PlayerState\n\tCPY #PlayerState_Dying\n\tBEQ loc_BANK2_9741\n\n\tDEC SubspaceTimer\n\tBNE loc_BANK2_9741\n\n\tSTA InSubspaceOrJar\n\tJSR DoAreaReset\n\n\tJMP loc_BANK2_97FF\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9741:\n\tLDA EnemyArray_453, X\n\tBNE locret_BANK2_9718\n\n\tLDA SubspaceDoorTimer\n\tBEQ loc_BANK2_9753\n\n\tDEC SubspaceDoorTimer\n\tBNE loc_BANK2_9753\n\n\tJMP TurnIntoPuffOfSmoke\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9753:\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDY DoorAnimationTimer\n\tLDA DoorSpriteAnimation, Y\n\tLDY #$00\n\tASL A\n\tBCC loc_BANK2_9767\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\nloc_BANK2_9767:\n\tLDA DoorAnimationTimer\n\tBEQ loc_BANK2_979A\n\n\tLDA byte_RAM_F4\n\tPHA\n\tJSR FindSpriteSlot\n\n\tCPY byte_RAM_F4\n\tPHP\n\tLDA EnemyMovementDirection, X\n\tCMP #$01\n\tBNE loc_BANK2_977F\n\n\tPLA\n\tEOR #$01\n\tPHA\n\nloc_BANK2_977F:\n\tPLP\n\tBCC loc_BANK2_9784\n\n\tSTY byte_RAM_F4\n\nloc_BANK2_9784:\n\tLDA #$7A\n\tJSR RenderSprite_DrawObject\n\n\tLDY byte_RAM_F4\n\tLDA SpriteDMAArea + 7, Y\n\tSEC\n\tSBC #$04\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $F, Y\n\tPLA\n\tSTA byte_RAM_F4\n\nloc_BANK2_979A:\n\tJSR FindSpriteSlot\n\n\tCPY byte_RAM_F4\n\tPHP\n\tLDA EnemyMovementDirection, X\n\tCMP #$01\n\tBNE loc_BANK2_97AA\n\n\tPLA\n\tEOR #$01\n\tPHA\n\nloc_BANK2_97AA:\n\tPLP\n\tBCS loc_BANK2_97AF\n\n\tSTY byte_RAM_F4\n\nloc_BANK2_97AF:\n\tLDA DoorAnimationTimer\n\tCMP #$19\n\tBCC loc_BANK2_97BA\n\n\tLDY #$00\n\tSTY byte_RAM_F4\n\nloc_BANK2_97BA:\n\tLDA #$76\n\tLDY EnemyArray_477, X\n\tBEQ loc_BANK2_97C3\n\n\tLDA #$7E\n\nloc_BANK2_97C3:\n\tJSR RenderSprite_DrawObject\n\n\tLDX DoorAnimationTimer\n\tBEQ loc_BANK2_9805\n\n\tINC DoorAnimationTimer\n\tLDY byte_RAM_F4\n\tLDA DoorSpriteAnimation, X\n\tBMI loc_BANK2_9805\n\n\tCLC\n\tADC SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + $B, Y\n\tCPX #(DoorSpriteAnimationEnd-DoorSpriteAnimation)\n\tBNE loc_BANK2_9805\n\n\tLDA #$00\n\tSTA DoorAnimationTimer\n\tJSR DoAreaReset\n\n\tLDA TransitionType\n\tCMP #TransitionType_Door\n\tBNE loc_BANK2_97F7\n\n\tINC DoAreaTransition\n\tBNE loc_BANK2_97FF\n\nloc_BANK2_97F7:\n\tLDA InSubspaceOrJar\n\tEOR #$02\n\tSTA InSubspaceOrJar\n\nloc_BANK2_97FF:\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\nloc_BANK2_9805:\n\tLDX byte_RAM_12\n\tRTS\n\n\nDoorSpriteAnimation:\n\t.db $00\n\t.db $01\n\t.db $01\n\t.db $02\n\t.db $02\n\t.db $03\n\t.db $04\n\t.db $06\n\t.db $08\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $08\n\t.db $06\n\t.db $04\n\t.db $03\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $01\n\t.db $01\n\t.db $01\n\t.db $01\n\t.db $01\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\nDoorSpriteAnimationEnd:\n\t.db $00\n\n; Unused?\n\t.db $A9\n\t.db $02\n\t.db $D0\n\t.db $06\n\n\n;\n; Note: Door animation code copied from Bank 1\n;\n; It's here, but seems to be unused?\n;\nDoorAnimation_Locked_Bank2:\n\tLDA #$01\n\tBNE DoorAnimation_Bank2\n\nDoorAnimation_Unlocked_Bank2:\n\tLDA #$00\n\nDoorAnimation_Bank2:\n\tPHA\n\tLDY #$08\n\nDoorAnimation_Loop_Bank2:\n\t; skip if inactive\n\tLDA EnemyState, Y\n\tBEQ DoorAnimation_LoopNext_Bank2\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_SubspaceDoor\n\tBNE DoorAnimation_LoopNext_Bank2\n\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, Y\n\tLDA #$20\n\tSTA EnemyTimer, Y\n\nDoorAnimation_LoopNext_Bank2:\n\tDEY\n\tBPL DoorAnimation_Loop_Bank2\n\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI DoorAnimation_Exit_Bank2\n\n\tLDA #$00\n\tSTA DoorAnimationTimer\n\tSTA SubspaceDoorTimer\n\tLDX byte_RAM_0\n\tPLA\n\tSTA EnemyArray_477, X\n\tLDA #Enemy_SubspaceDoor\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA PlayerXLo\n\tADC #$08\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA PlayerYLo\n\tSTA ObjectYLo, X\n\tLDA PlayerYHi\n\tSTA ObjectYHi, X\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDX byte_RAM_12\n\tRTS\n\nDoorAnimation_Exit_Bank2:\n\tPLA\n\tRTS\n\n\nShellSpeed:\n\t.db $1C\n\t.db $E4\n\n\nEnemyBehavior_Shell:\n\tJSR ObjectTileCollision\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ EnemyBehavior_Shell_Slide\n\nEnemyBehavior_Shell_Destroy:\n\tLDA #SoundEffect1_EnemyHit\n\tSTA SoundEffectQueue1\n\tJMP TurnIntoPuffOfSmoke\n\n\nEnemyBehavior_Shell_Slide:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Shell_Render\n\n\tJSR ResetObjectYVelocity\n\nEnemyBehavior_Shell_Render:\n\tJSR RenderSprite\n\n\tLDY EnemyMovementDirection, X\n\tLDA ShellSpeed - 1, Y\n\tSTA ObjectXVelocity, X\n\tJMP ApplyObjectMovement\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK2_98C4:\n\tLDA #EnemyState_BlockFizzle\n\tSTA EnemyState, X\n\tLDA #$18\n\tSTA EnemyTimer, X\n\nlocret_BANK2_98CC:\n\tRTS\n\n; End of function sub_BANK2_98C4\n\n\n;\n; Intercepts the normal enemy behavior when the object is being carried\n;\nEnemyBehavior_CheckBeingCarriedTimerInterrupt:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ locret_BANK2_98CC\n\n\t; Cancel previous subroutine and go into carry mode\n\tPLA\n\tPLA\n\tJMP CarryObject\n\n\n;\n; If EnemyArray_42F is set, interrupt the EnemyBehavior subroutine and just\n; render the sprite and run physics\n;\n; Input\n;   X = enemy index\n;\nEnemyBehavior_Check42FPhysicsInterrupt:\n\tLDA EnemyArray_42F, X\n\tBEQ locret_BANK2_98EA\n\n\tPLA\n\tPLA\n\tJMP RenderSpriteAndApplyObjectMovement\n\n\nEnemyInit_FallingLogs:\n\tJSR EnemyInit_Stationary\n\n\tSTA EnemyArray_438, X\n\tLDA ObjectYLo, X\n\tSTA EnemyVariable, X\n\nlocret_BANK2_98EA:\n\tRTS\n\n\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_FallingLogs:\n\tASL ObjectAttributes, X\n\tLDA byte_RAM_10\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tROR ObjectAttributes, X\n\tLDY EnemyArray_B1, X\n\tBNE loc_BANK2_9919\n\n\t; behind background\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_BehindBackground\n\tSTA ObjectAttributes, X\n\tLDA EnemyVariable, X\n\tSEC\n\tSBC #$0C\n\tCMP ObjectYLo, X\n\tLDA #$FE\n\tBCC loc_BANK2_9914\n\n\t; in front of background\n\tLDA ObjectAttributes, X\n\tAND #$DF\n\tSTA ObjectAttributes, X\n\tINC EnemyArray_B1, X\n\tLDA #$04\n\nloc_BANK2_9914:\n\tSTA ObjectYVelocity, X\n\tJMP loc_BANK2_9921\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9919:\n\tLDA byte_RAM_10\n\tAND #$07\n\tBNE loc_BANK2_9921\n\n\tINC ObjectYVelocity, X\n\nloc_BANK2_9921:\n\tJSR ApplyObjectPhysicsY\n\n\tLDA ObjectYLo, X\n\tCMP #$F0\n\tBCC loc_BANK2_9932\n\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tLDA EnemyVariable, X\n\tSTA ObjectYLo, X\n\nloc_BANK2_9932:\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\n;\n; Kills all enemies on the screen (ie. POW block quake)\n;\nKillOnscreenEnemies:\n\tLDA #$00\n\n;\n; Destroys all enemies on the screen\n;\n; Input\n;   A = 0 for POW\n;\nDestroyOnscreenEnemies:\n\tSTA byte_RAM_0\n\tLDX #$08\n\nDestroyOnscreenEnemies_Loop:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBNE DestroyOnscreenEnemies_Next\n\n\tLDA byte_RAM_0\n\tBEQ KillOnscreenEnemies_CheckCollision\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Bomb\n\tBEQ DestroyOnscreenEnemies_DestroyItem\n\n\tCMP #Enemy_VegetableSmall\n\tBCS DestroyOnscreenEnemies_Next\n\nDestroyOnscreenEnemies_DestroyItem:\n\tLDA HoldingItem\n\tBEQ DestroyOnscreenEnemies_Poof\n\n\tCPX ObjectBeingCarriedIndex\n\tBNE DestroyOnscreenEnemies_Poof\n\n\tLDA #$00\n\tSTA HoldingItem\n\nDestroyOnscreenEnemies_Poof:\n\tSTX byte_RAM_E\n\tJSR TurnIntoPuffOfSmoke\n\n\tLDX byte_RAM_E\n\tJMP DestroyOnscreenEnemies_Next\n\nKillOnscreenEnemies_CheckCollision:\n\tLDA EnemyCollision, X\n\tBEQ DestroyOnscreenEnemies_Next\n\nIFDEF FIX_POW_LOG_GLITCH\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS KillOnscreenEnemies_SetCollision\nENDIF\n\n\t; BUG: For object that don't follow normal gravity rules, this will send\n\t; them flying into the air, ie. throwing a POW block from a falling log\n\tLDA #$D8\n\tSTA ObjectYVelocity, X\n\nKillOnscreenEnemies_SetCollision:\n\tLDA EnemyCollision, X\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, X\n\nDestroyOnscreenEnemies_Next:\n\tDEX\n\tBPL DestroyOnscreenEnemies_Loop\n\n\tLDX byte_RAM_12\n\tRTS\n\n\n;\n; Checks whether the enemy is taking mortal damage\n;\n; If so, play the sound effect, kill the enemy, and cancel the previous enemy\n; behavior subroutine.\n;\n; Input\n;   X = enemy index\n;\nEnemyBehavior_CheckDamagedInterrupt:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Damage\n\tBEQ EnemyBehavior_CheckDamagedInterrupt_Exit\n\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ EnemyBehavior_CheckDamagedInterrupt_SoundEffect\n\n\t; remove the item from the player's hands\n\tLDA #$00\n\tSTA HoldingItem\n\nEnemyBehavior_CheckDamagedInterrupt_SoundEffect:\n\tLDY ObjectType, X\n\t; is this enemy a squawker?\n\tLDA EnemyArray_46E_Data, Y\n\tAND #%00001000\n\tASL A ; then A = DPCM_BossDeath\n\tBNE EnemyBehavior_CheckDamagedInterrupt_BossDeathSound\n\n\t; normal enemy hit sound\n\tLDA DPCMQueue\n\tBNE EnemyBehavior_CheckDamagedInterrupt_CheckPidgit\n\n\tLDA #SoundEffect1_EnemyHit\n\tSTA SoundEffectQueue1\n\tBNE EnemyBehavior_CheckDamagedInterrupt_CheckPidgit\n\nEnemyBehavior_CheckDamagedInterrupt_BossDeathSound:\nIFDEF EXPAND_MUSIC\n\tLDA #DPCM_BossDeath\nENDIF\n\tSTA DPCMQueue\n\nEnemyBehavior_CheckDamagedInterrupt_CheckPidgit:\n\t; killing pidgit leaves a flying carpet behind\n\tCPY #Enemy_Pidgit\n\tBNE EnemyBehavior_CheckDamagedInterrupt_SetDead\n\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_CheckDamagedInterrupt_SetDead\n\n\tJSR CreateFlyingCarpet\n\nEnemyBehavior_CheckDamagedInterrupt_SetDead:\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\t; interrupt the previous subroutine\n\tPLA\n\tPLA\n\nEnemyBehavior_CheckDamagedInterrupt_Exit:\n\tRTS\n\n\nEnemyTilemap1:\n\t.db $D0,$D2 ; $00\n\t.db $D4,$D6 ; $02\n\t.db $F8,$F8 ; $04\n\t.db $FA,$FA ; $06\n\t.db $CC,$CE ; $08\n\t.db $CC,$CE ; $0A\n\t.db $C8,$CA ; $0C\n\t.db $C8,$CA ; $0E\n\t.db $70,$72 ; $10\n\t.db $74,$76 ; $12\n\t.db $C0,$C2 ; $14\n\t.db $C4,$C6 ; $16\n\t.db $E1,$E3 ; $18\n\t.db $E5,$E7 ; $1A\n\t.db $E1,$E3 ; $1C\n\t.db $E5,$E7 ; $1E\n\t.db $78,$7A ; $20\n\t.db $7C,$7E ; $22\n\t.db $DC,$DA ; $24\n\t.db $DC,$DE ; $26\n\t.db $FE,$FE ; $28\n\t.db $FC,$FC ; $2A\n\t.db $94,$94 ; $2C\n\t.db $96,$96 ; $2E\n\t.db $98,$98 ; $30\n\t.db $9A,$9A ; $32\n\t.db $DB,$DD ; $34\n\t.db $DB,$DD ; $36\n\t.db $7D,$7F ; $38\n\t.db $C1,$C3 ; $3A\n\t.db $8C,$8C ; $3C\n\t.db $8E,$8E ; $3E\n\t.db $E0,$E2 ; $40\n\t.db $6B,$6D ; $42\n\t.db $6D,$6F ; $44\n\t.db $3A,$3A ; $46\n\t.db $3A,$3A ; $48\n\t.db $38,$38 ; $4A\n\t.db $38,$38 ; $4C\n\t.db $36,$36 ; $4E\n\t.db $36,$36 ; $50\n\t.db $34,$34 ; $52\n\t.db $34,$34 ; $54\n\t.db $AE,$FB ; $56\n\t.db $AE,$FB ; $58\n\t.db $80,$82 ; $5A\n\t.db $84,$86 ; $5C\n\t.db $80,$82 ; $5E\n\t.db $AA,$AC ; $60\n\t.db $88,$8A ; $62\n\t.db $84,$86 ; $64\n\t.db $88,$8A ; $66\n\t.db $AA,$AC ; $68\n\t.db $BC,$BE ; $6A\n\t.db $AA,$AC ; $6C\n\t.db $BC,$BE ; $6E\n\t.db $AA,$AC ; $70\n\t.db $B5,$B9 ; $72\n\t.db $B5,$B9 ; $74\n\t.db $81,$83 ; $76\n\t.db $85,$87 ; $78\n\t.db $FF,$FF ; $7A\n\t.db $FF,$FF ; $7C\n\t.db $81,$83 ; $7E\n\t.db $F5,$87 ; $80\n\t.db $C5,$C7 ; $82\n\t.db $C9,$CB ; $84\n\t.db $92,$94 ; $86\n\t.db $29,$29 ; $88\n\t.db $2B,$2B ; $8A\n\t.db $3D,$3F ; $8C\n\t.db $4C,$4E ; $8E\n\t.db $50,$52 ; $90\n\t.db $4C,$4E ; $92\n\t.db $56,$58 ; $94\n\t.db $FB,$5C ; $96\n\t.db $FB,$5A ; $98\n\t.db $FB,$FB ; $9A\n\t.db $FB,$54 ; $9C\n\t.db $CF,$CF ; $9E\n\t.db $A5,$A5 ; $A0\n\t.db $B0,$B2 ; $A2\n\t.db $90,$90 ; $A4\n\t.db $CD,$CD ; $A6\n\t.db $A8,$A8 ; $A8\n\t.db $A8,$A8 ; $AA\n\t.db $A0,$A2 ; $AC\n\t.db $A4,$A4 ; $AE\n\t.db $A4,$A4 ; $B0\n\t.db $4D,$4D ; $B2\n\t.db $8C,$8C ; $B4\n\t.db $A6,$A6 ; $B6\n\t.db $AB,$AB ; $B8\nIFDEF EXPAND_TABLES\n\tunusedSpace EnemyTilemap1 + $100, $FB\nENDIF\n\n;\n; Enemy Animation table\n; =====================\n;\n; These point to the tilemaps offset for an object's animation frames.\n;\n; $FF is used to make an enemy invisible\n;\nEnemyAnimationTable:\n\t.db $00 ; $00 Enemy_Heart\n\t.db $00 ; $01 Enemy_ShyguyRed\n\t.db $08 ; $02 Enemy_Tweeter\n\t.db $00 ; $03 Enemy_ShyguyPink\n\t.db $0C ; $04 Enemy_Porcupo\n\t.db $10 ; $05 Enemy_SnifitRed\n\t.db $10 ; $06 Enemy_SnifitGray\n\t.db $10 ; $07 Enemy_SnifitPink\n\t.db $40 ; $08 Enemy_Ostro\n\t.db $14 ; $09 Enemy_BobOmb\n\t.db $18 ; $0A Enemy_AlbatossCarryingBobOmb\n\t.db $18 ; $0B Enemy_AlbatossStartRight\n\t.db $18 ; $0C Enemy_AlbatossStartLeft\n\t.db $20 ; $0D Enemy_NinjiRunning\n\t.db $20 ; $0E Enemy_NinjiJumping\n\t.db $24 ; $0F Enemy_BeezoDiving\n\t.db $24 ; $10 Enemy_BeezoStraight\n\t.db $BE ; $11 Enemy_WartBubble\n\t.db $00 ; $12 Enemy_Pidgit\n\t.db $86 ; $13 Enemy_Trouter\n\t.db $88 ; $14 Enemy_Hoopstar\n\t.db $FF ; $15 Enemy_JarGeneratorShyguy\n\t.db $FF ; $16 Enemy_JarGeneratorBobOmb\n\t.db $8C ; $17 Enemy_Phanto\n\t.db $5C ; $18 Enemy_CobratJar\n\t.db $5C ; $19 Enemy_CobratSand\n\t.db $6C ; $1A Enemy_Pokey\n\t.db $56 ; $1B Enemy_Bullet\n\t.db $5A ; $1C Enemy_Birdo\n\t.db $14 ; $1D Enemy_Mouser\n\t.db $72 ; $1E Enemy_Egg\n\t.db $00 ; $1F Enemy_Tryclyde\n\t.db $A8 ; $20 Enemy_Fireball\n\t.db $00 ; $21 Enemy_Clawgrip\n\t.db $D6 ; $22 Enemy_ClawgripRock\n\t.db $AC ; $23 Enemy_PanserStationaryFiresAngled\n\t.db $AC ; $24 Enemy_PanserWalking\n\t.db $AC ; $25 Enemy_PanserStationaryFiresUp\n\t.db $74 ; $26 Enemy_Autobomb\n\t.db $7A ; $27 Enemy_AutobombFire\n\t.db $92 ; $28 Enemy_WhaleSpout\n\t.db $9A ; $29 Enemy_Flurry\n\t.db $80 ; $2A Enemy_Fryguy\n\t.db $90 ; $2B Enemy_FryguySplit\n\t.db $00 ; $2C Enemy_Wart\n\t.db $00 ; $2D Enemy_HawkmouthBoss\n\t.db $B6 ; $2E Enemy_Spark1\n\t.db $B6 ; $2F Enemy_Spark2\n\t.db $B6 ; $30 Enemy_Spark3\n\t.db $B6 ; $31 Enemy_Spark4\n\t.db $28 ; $32 Enemy_VegetableSmall\n\t.db $2A ; $33 Enemy_VegetableLarge\n\t.db $2C ; $34 Enemy_VegetableWart\n\t.db $2E ; $35 Enemy_Shell\n\t.db $30 ; $36 Enemy_Coin\n\t.db $34 ; $37 Enemy_Bomb\n\t.db $00 ; $38 Enemy_Rocket\n\t.db $38 ; $39 Enemy_MushroomBlock\n\t.db $3A ; $3A Enemy_POWBlock\n\t.db $42 ; $3B Enemy_FallingLogs\n\t.db $82 ; $3C Enemy_SubspaceDoor\n\t.db $82 ; $3D Enemy_Key\n\t.db $84 ; $3E Enemy_SubspacePotion\n\t.db $A0 ; $3F Enemy_Mushroom\n\t.db $A2 ; $40 Enemy_Mushroom1up\n\t.db $04 ; $41 Enemy_FlyingCarpet\n\t.db $8E ; $42 Enemy_HawkmouthRight\n\t.db $8E ; $43 Enemy_HawkmouthLeft\n\t.db $9E ; $44 Enemy_CrystalBall\n\t.db $A6 ; $45 Enemy_Starman\n\t.db $A4 ; $46 Enemy_Stopwatch\n\n; =============== S U B R O U T I N E =======================================\n\n; The first part of this routine determines if we are the Princess,\n; who does not bob her vegetables (or whatever other Subcon detritus\n; she happens to be holding)\n;\n; After that it just moves the sprite into the player's hands.\n\nPutCarriedObjectInHands:\n\tLDA ObjectYLo, X\n\tCLC\n\tSBC ScreenYLo\n\tLDY ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_9ACA\n\n\tLDY PlayerAnimationFrame\n\tBNE loc_BANK2_9ACA\n\n\tLDY CurrentCharacter ; Check if we are Princess\n\tDEY\n\tBEQ loc_BANK2_9ACA ; If so, skip making it bob sometimes.\n\n\tSEC\n\tSBC #$01\n\nloc_BANK2_9ACA:\n\tSTA SpriteTempScreenY ; Determine where it should show up on\n\tLDA ObjectXLo, X ; the screen and put it in that place.\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA SpriteTempScreenX\n\tRTS\n\n; End of function PutCarriedObjectInHands\n\n; ---------------------------------------------------------------------------\n\nRenderSprite_Birdo:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBNE loc_BANK2_9AE2\n\n\tLDA EnemyArray_45C, X\n\tBEQ loc_BANK2_9AE6\n\nloc_BANK2_9AE2:\n\tLDA #$6A\n\tBNE loc_BANK2_9AEC\n\nloc_BANK2_9AE6:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_9AEF\n\n\tLDA #$62\n\nloc_BANK2_9AEC:\n\tJMP RenderSprite_DrawObject\n\n; ---------------------------------------------------------------------------\n\nloc_BANK2_9AEF:\n\tJMP RenderSprite_NotAlbatoss\n\n\nRenderSprite_Albatoss:\n\tLDA byte_RAM_EE\n\tPHA\n\tJSR RenderSprite_NotAlbatoss\n\n\tPLA\n\tASL A\n\tSTA byte_RAM_EE\n\tLDA EnemyArray_B1, X\n\tORA byte_RAM_EF\n\tBNE RenderSprite_Invisible\n\n\tLDA SpriteTempScreenX\n\tADC #$08\n\tSTA byte_RAM_1\n\tLDA EnemyMovementDirection, X\n\tSTA byte_RAM_2\n\tLDA #$01\n\tSTA byte_RAM_3\n\tSTA byte_RAM_5\n\tJSR FindSpriteSlot\n\n\tLDX #$14\n\tJMP loc_BANK2_9C7A\n\n\n; =============== S U B R O U T I N E =======================================\n\n;\n; Renders a sprite for an object based on the enemy animation table lookup\n;\n; There are a lot of special cases basd on ObjectType\n;\n; Input\n;   X = enemy index\n;\nRenderSprite:\n\tLDY ObjectType, X\n\tLDA EnemyAnimationTable, Y\n\tCMP #$FF\n\tBEQ RenderSprite_Invisible\n\n\tCPY #Enemy_Mouser\n\tBNE RenderSprite_NotMouser\n\n\tJMP RenderSprite_Mouser\n\nRenderSprite_NotMouser:\n\tCPY #Enemy_Clawgrip\n\tBNE RenderSprite_NotClawgrip\n\n\tJMP RenderSprite_Clawgrip\n\nRenderSprite_NotClawgrip:\n\tCPY #Enemy_ClawgripRock\n\tBNE RenderSprite_NotClawgripRock\n\n\tJMP RenderSprite_ClawgripRock\n\nRenderSprite_NotClawgripRock:\n\tCPY #Enemy_HawkmouthBoss\n\tBNE RenderSprite_NotHawkmouthBoss\n\n\tJMP RenderSprite_HawkmouthBoss\n\nRenderSprite_Invisible:\n\tRTS\n\nRenderSprite_NotHawkmouthBoss:\n\tCPY #Enemy_Pidgit\n\tBNE RenderSprite_NotPidgit\n\n\tJMP RenderSprite_Pidgit\n\nRenderSprite_NotPidgit:\n\tCPY #Enemy_Porcupo\n\tBNE RenderSprite_NotPorcupo\n\n\tJMP RenderSprite_Porcupo\n\nRenderSprite_NotPorcupo:\n\tCPY #Enemy_VegetableLarge\n\tBNE RenderSprite_NotVegetableLarge\n\n\tJMP RenderSprite_VegetableLarge\n\nRenderSprite_NotVegetableLarge:\n\tCPY #Enemy_Autobomb\n\tBNE RenderSprite_NotAutobomb\n\n\tJMP RenderSprite_Autobomb\n\nRenderSprite_NotAutobomb:\n\tCPY #Enemy_Fryguy\n\tBNE RenderSprite_NotFryguy\n\n\tJMP RenderSprite_Fryguy\n\nRenderSprite_NotFryguy:\n\tCPY #Enemy_HawkmouthLeft\n\tBNE RenderSprite_NotHawkmouthLeft\n\n\tJMP RenderSprite_HawkmouthLeft\n\nRenderSprite_NotHawkmouthLeft:\n\tCPY #Enemy_Wart\n\tBNE RenderSprite_NotWart\n\n\tJMP RenderSprite_Wart\n\nRenderSprite_NotWart:\n\tCPY #Enemy_WhaleSpout\n\tBNE RenderSprite_NotWhaleSpout\n\n\tJMP RenderSprite_WhaleSpout\n\nRenderSprite_NotWhaleSpout:\n\tCPY #Enemy_Pokey\n\tBNE RenderSprite_NotPokey\n\n\tJMP RenderSprite_Pokey\n\nRenderSprite_NotPokey:\n\tCPY #Enemy_Heart\n\tBNE RenderSprite_NotHeart\n\n\t; This jump appears to never be taken;\n\t; I don't think this code even runs with an enemy ID of 0 (heart)\n\tJMP RenderSprite_Heart\n\nRenderSprite_NotHeart:\n\tCPY #Enemy_Ostro\n\tBNE RenderSprite_NotOstro\n\n\tJMP RenderSprite_Ostro\n\nRenderSprite_NotOstro:\n\tCPY #Enemy_Tryclyde\n\tBNE RenderSprite_NotTryclyde\n\n\tJMP RenderSprite_Tryclyde\n\nRenderSprite_NotTryclyde:\n\tCPY #Enemy_Birdo\n\tBNE RenderSprite_NotBirdo\n\n\tJMP RenderSprite_Birdo\n\nRenderSprite_NotBirdo:\n\tCPY #Enemy_AlbatossCarryingBobOmb\n\tBCC RenderSprite_NotAlbatoss\n\n\tCPY #Enemy_NinjiRunning\n\tBCS RenderSprite_NotAlbatoss\n\n\tJMP RenderSprite_Albatoss\n\nRenderSprite_NotAlbatoss:\n\tLDY ObjectType, X\n\tCPY #Enemy_Rocket\n\tBNE RenderSprite_NotRocket\n\n\tJMP RenderSprite_Rocket\n\nRenderSprite_NotRocket:\n\tLDA EnemyAnimationTable, Y\n\n\n;\n; Draws an object to the screen\n;\n; Input\n;   A = tile index\n;   X = enemy index\n;   byte_RAM_EE = sprite clipping\n;   byte_RAM_EF = whether the enemy should be invisible\n;   byte_RAM_F4 = sprite slot offset\n;   SpriteTempScreenX = screen x-position\n;   SpriteTempScreenY = screen y-position\n;\nRenderSprite_DrawObject:\n\tSTA byte_RAM_F\n\tLDA byte_RAM_EF\n\tBNE RenderSprite_Invisible\n\n\t; tilemap switcher\n\tLDA EnemyArray_46E, X\n\tAND #%00010000\n\tSTA byte_RAM_B\n\tLDY EnemyMovementDirection, X\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_FrontFacing | ObjAttrib_Mirrored\n\tBEQ loc_BANK2_9BD2\n\n\tLDY #$02\n\tLDA InSubspaceOrJar\n\tCMP #$02\n\tBNE loc_BANK2_9BD2\n\n\tDEY\n\nloc_BANK2_9BD2:\n\tSTY byte_RAM_2\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_16x32 | ObjAttrib_Horizontal\n\tSTA byte_RAM_5\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDA #$00\n\tSTA byte_RAM_D\n\tLDA ObjectShakeTimer, X\n\tAND #$02\n\tLSR A\n\tLDY byte_RAM_EE\n\tBEQ loc_BANK2_9BEF\n\n\tLDA #$00\n\nloc_BANK2_9BEF:\n\tADC SpriteTempScreenX\n\tSTA byte_RAM_1\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground | ObjAttrib_Palette\n\tLDY EnemyArray_45C, X\n\tBEQ loc_BANK2_9C07\n\n\tAND #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground\n\tSTA byte_RAM_8\n\tTYA\n\tLSR A\n\tAND #$03\n\tORA byte_RAM_8\n\nloc_BANK2_9C07:\n\tSTA byte_RAM_3\n\tLDA EnemyArray_46E, X\n\tSTA byte_RAM_C\n\tASL A\n\tLDA ObjectAnimationTimer, X\n\tLDX byte_RAM_F\n\tAND #$08\n\tBEQ loc_BANK2_9C31\n\n\tBCC loc_BANK2_9C1F\n\n\tLDA #$01\n\tSTA byte_RAM_2\n\tBNE loc_BANK2_9C31\n\nloc_BANK2_9C1F:\n\tINX\n\tINX\n\tLDA byte_RAM_5\n\tAND #$40\n\tBEQ loc_BANK2_9C31\n\n\tINX\n\tINX\n\tLDA byte_RAM_C\n\tAND #$20\n\tBEQ loc_BANK2_9C31\n\n\tINX\n\tINX\n\nloc_BANK2_9C31:\n\tLDY byte_RAM_F4\n\tLDA byte_RAM_5\n\tAND #$40\n\tBEQ loc_BANK2_9C7A\n\n\tLDA byte_RAM_5\n\tAND #$04\n\tBEQ loc_BANK2_9C53\n\n\tLDA byte_RAM_EE\n\tSTA byte_RAM_8\n\tLDA byte_RAM_2\n\tCMP #$01\n\tBNE loc_BANK2_9C53\n\n\tLDA byte_RAM_1\n\tADC #$0F\n\tSTA byte_RAM_1\n\tASL byte_RAM_EE\n\tASL byte_RAM_EE\n\nloc_BANK2_9C53:\n\tJSR SetSpriteTiles\n\n\tLDA byte_RAM_5\n\tAND #$04\n\tBEQ loc_BANK2_9C7A\n\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDA SpriteTempScreenX\n\tSTA byte_RAM_1\n\tLDA byte_RAM_8\n\tSTA byte_RAM_EE\n\tLDA byte_RAM_2\n\tCMP #$01\n\tBEQ loc_BANK2_9C7A\n\n\tLDA byte_RAM_1\n\tADC #$0F\n\tSTA byte_RAM_1\n\tASL byte_RAM_EE\n\tASL byte_RAM_EE\n\nloc_BANK2_9C7A:\n\tJSR SetSpriteTiles\n\n\tLDY byte_RAM_F4\n\tLDA byte_RAM_5\n\tCMP #$40\n\tBNE loc_BANK2_9CD9\n\n\tLDA byte_RAM_3\n\tBPL loc_BANK2_9CD9\n\n\tLDA byte_RAM_C\n\tAND #$20\n\tBEQ loc_BANK2_9CBD\n\n\tLDX byte_RAM_D\n\tLDA SpriteDMAArea + $00, X\n\tPHA\n\tLDA SpriteDMAArea + $00, Y\n\tSTA SpriteDMAArea + $00, X\n\tPLA\n\nloc_BANK2_9C9C:\n\tSTA SpriteDMAArea + $00, Y\n\tLDA SpriteDMAArea + $04, X\n\tPHA\n\tLDA SpriteDMAArea + $04, Y\n\tSTA SpriteDMAArea + $04, X\n\tPLA\n\tSTA SpriteDMAArea + $04, Y\n\tLDA SpriteDMAArea + $08, X\n\tPHA\n\tLDA SpriteDMAArea + $08, Y\n\tSTA SpriteDMAArea + $08, X\n\tPLA\n\tSTA SpriteDMAArea + $08, Y\n\tBCS loc_BANK2_9CD9\n\nloc_BANK2_9CBD:\n\tLDA SpriteDMAArea, Y\n\tPHA\n\tLDA SpriteDMAArea + $08, Y\n\tSTA SpriteDMAArea + $00, Y\n\tPLA\n\tSTA SpriteDMAArea + $08, Y\n\tLDA SpriteDMAArea + $04, Y\n\tPHA\n\tLDA SpriteDMAArea + $0C, Y\n\tSTA SpriteDMAArea + $04, Y\n\tPLA\n\tSTA SpriteDMAArea + $0C, Y\n\nloc_BANK2_9CD9:\n\tLDX byte_RAM_12\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_Mirrored\n\tBEQ locret_BANK2_9CF1\n\n\tLDA byte_RAM_3\n\tSTA SpriteDMAArea + $02, Y\n\tSTA SpriteDMAArea + $0A, Y\n\tORA #$40\n\tSTA SpriteDMAArea + $06, Y\n\tSTA SpriteDMAArea + $0E, Y\n\nlocret_BANK2_9CF1:\n\tRTS\n\n\n;\n; Sets tiles for an object\n;\n; Input\n;   X = tilemap offset\n;   Y = sprite slot offset\n;   byte_RAM_0 = screen y-offset\n;   byte_RAM_1 = screen x-offset\n;   byte_RAM_2 = sprite direction: $00 for left, $02 for right\n;   byte_RAM_B = use EnemyTilemap2\n;   byte_RAM_C = use 24x16 mode when set to $20\n;   byte_RAM_EE = used for horizontal clipping/wrapping\n; Output\n;   X = next tilemap offset\n;   Y = next sprite slot offset\n;\nSetSpriteTiles:\n\tLDA byte_RAM_C\n\tAND #$20\n\tBNE SetSpriteTiles_24x16\n\n\tLDA byte_RAM_B\n\tBNE SetSpriteTiles_Tilemap2\n\nSetSpriteTiles_Tilemap1:\n\tLDA EnemyTilemap1, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA EnemyTilemap1 + 1, X\n\tSTA SpriteDMAArea + 5, Y\n\tBNE SetSpriteTiles_CheckDirection\n\nSetSpriteTiles_Tilemap2:\n\tLDA EnemyTilemap2, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA EnemyTilemap2 + 1, X\n\tSTA SpriteDMAArea + 5, Y\n\nSetSpriteTiles_CheckDirection:\n\tLDA byte_RAM_2\n\tLSR A\n\tLDA #$00\n\tBCC SetSpriteTiles_Left\n\nSetSpriteTiles_Right:\n\tLDA SpriteDMAArea + 1, Y\n\tPHA\n\tLDA SpriteDMAArea + 5, Y\n\tSTA SpriteDMAArea + 1, Y\n\tPLA\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$40\n\nSetSpriteTiles_Left:\n\tORA byte_RAM_3\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tLDA #$F8\n\tSTA SpriteDMAArea, Y\n\tSTA SpriteDMAArea + 4, Y\n\n\tLDA byte_RAM_EE\n\tAND #$08\n\tBNE loc_BANK2_9D48\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea, Y\n\nloc_BANK2_9D48:\n\tLDA byte_RAM_EE\n\tAND #$04\n\tBNE loc_BANK2_9D53\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 4, Y\n\nloc_BANK2_9D53:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tSTA SpriteDMAArea + 3, Y\n\tCLC\n\tADC #$08\n\tSTA SpriteDMAArea + 7, Y\n\tTYA\n\tCLC\n\tADC #$08\n\tTAY\n\tINX\n\tINX\n\tRTS\n\nSetSpriteTiles_24x16:\n\tLDA EnemyTilemap2, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA EnemyTilemap2 + 1, X\n\tSTA SpriteDMAArea + 5, Y\n\tLDA EnemyTilemap2 + 2, X\n\tSTA SpriteDMAArea + 9, Y\n\n\tLDA byte_RAM_2\n\tLSR A\n\tLDA #$00\n\tBCC SetSpriteTiles_24x16_Left\n\nSetSpriteTiles_24x16_Right:\n\tLDA SpriteDMAArea + 1, Y\n\tPHA\n\tLDA SpriteDMAArea + 9, Y\n\tSTA SpriteDMAArea + 1, Y\n\tPLA\n\tSTA SpriteDMAArea + 9, Y\n\tLDA #$40\n\nSetSpriteTiles_24x16_Left:\n\tORA byte_RAM_3\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tLDA #$F8\n\tSTA SpriteDMAArea, Y\n\tSTA SpriteDMAArea + 4, Y\n\tSTA SpriteDMAArea + 8, Y\n\n\tLDA byte_RAM_EE\n\tAND #$08\n\tBNE loc_BANK2_9DB7\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea, Y\n\nloc_BANK2_9DB7:\n\tLDA byte_RAM_EE\n\tAND #$04\n\tBNE loc_BANK2_9DC2\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 4, Y\n\nloc_BANK2_9DC2:\n\tLDA byte_RAM_EE\n\tAND #$02\n\tBNE loc_BANK2_9DCD\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 8, Y\n\nloc_BANK2_9DCD:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tSTA SpriteDMAArea + 3, Y\n\tADC #$08\n\tSTA SpriteDMAArea + 7, Y\n\tADC #$08\n\tSTA SpriteDMAArea + $B, Y\n\tTXA\n\tPHA\n\tJSR FindSpriteSlot\n\n\tPLA\n\tTAX\n\tLDA byte_RAM_D\n\tBNE loc_BANK2_9DF0\n\n\tSTY byte_RAM_D\n\nloc_BANK2_9DF0:\n\tINX\n\tINX\n\tINX\n\n\tRTS\n\n\nUNUSED_PorcupoOffset:\n\t.db $04\n\t.db $00\nPorcupoOffsetXRight:\n\t.db $FF\n\t.db $FF\n\t.db $00\n\t.db $00\nPorcupoOffsetXLeft:\n\t.db $01\n\t.db $01\n\t.db $00\n\t.db $00\nPorcupoOffsetYRight:\n\t.db $01\n\t.db $00\n\t.db $00\n\t.db $01\nPorcupoOffsetYLeft:\n\t.db $01\n\t.db $00\n\t.db $00\n\t.db $01\n\n\nRenderSprite_Porcupo:\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA byte_RAM_EE\n\tAND #$0C\n\tBNE locret_BANK2_9E3A\n\n\tLDA ObjectAnimationTimer, X\n\tAND #$0C\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_0\n\tLDA EnemyMovementDirection, X\n\tTAX\n\tLDA PorcupoOffsetXRight - 3, X\n\tADC byte_RAM_F4\n\tTAY\n\tTXA\n\tASL A\n\tASL A\n\tADC byte_RAM_0\n\tTAX\n\tLDA SpriteDMAArea, Y\n\tADC PorcupoOffsetYRight - 4, X\n\tSTA SpriteDMAArea, Y\n\tLDA SpriteDMAArea + 3, Y\n\tADC PorcupoOffsetXRight - 4, X\n\tSTA SpriteDMAArea + 3, Y\n\tLDX byte_RAM_12\n\nlocret_BANK2_9E3A:\n\tRTS\n\n\n;\n; Compares our position to the player's and returns\n;\n; Ouput\n;   Y = 1 when player is to the left, 0 when player is to the right\n;\nEnemyFindWhichSidePlayerIsOn:\n\tLDA PlayerXLo\n\tSBC ObjectXLo, X\n\tSTA byte_RAM_F\n\tLDA PlayerXHi\n\tLDY #$00\n\tSBC ObjectXHi, X\n\tBCS EnemyFindWhichSidePlayerIsOn_Exit\n\n\tINY\n\nEnemyFindWhichSidePlayerIsOn_Exit:\n\tRTS\n\n\n;\n; Applies object physics for the y-axis\n;\n; Input\n;   X = enemy index\n;\nApplyObjectPhysicsY:\n\tTXA\n\tCLC\n\tADC #$0A\n\tTAX\n\n;\n; Applies object physics for the x-axis\n;\n; Input\n;   X = enemy index, physics direction\n;       ($00-$09 for horizontal, $0A-$13 for vertical)\n;\n; Output\n;   X = RAM_12\n;\nApplyObjectPhysicsX:\n\t; Add acceleration to velocity\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC ObjectXAcceleration, X\n\n\tPHA\n\t; Lower nybble of velocity is for subpixel position\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_1\n\n\t; Upper nybble of velocity is for lo position\n\tPLA\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\n\tCMP #$08\n\tBCC ApplyObjectPhysics_StoreVelocityLo\n\n\t; Left/up: Carry negative bits through upper nybble\n\tORA #$F0\n\nApplyObjectPhysics_StoreVelocityLo:\n\tSTA byte_RAM_0\n\n\tLDY #$00\n\tASL A\n\tBCC ApplyObjectPhysics_StoreDirection\n\n\t; Left/up\n\tDEY\n\nApplyObjectPhysics_StoreDirection:\n\tSTY byte_RAM_2\n\n\t; Add lower nybble of velocity for subpixel position\n\tLDA ObjectXSubpixel, X\n\tCLC\n\tADC byte_RAM_1\n\tSTA ObjectXSubpixel, X\n\n\t; Add upper nybble of velocity for lo position\n\tLDA ObjectXLo, X\n\tADC byte_RAM_0\n\tSTA ObjectXLo, X\n\n\tROL byte_RAM_1\n\n\t; X < 10 is horizontal physics, X >= 10 is vertical physics\n\tCPX #$0A\n\tBCS ApplyObjectPhysics_PositionHi\n\nApplyObjectPhysics_HorizontalSpecialCases:\n\tLDA #$00\n\tSTA unk_RAM_4A4, X\n\tLDA ObjectType, X\n\tCMP #Enemy_Bullet\n\tBEQ ApplyObjectPhysics_PositionHi\n\n\tCMP #Enemy_BeezoDiving\n\tBEQ ApplyObjectPhysics_PositionHi\n\n\tCMP #Enemy_BeezoStraight\n\tBEQ ApplyObjectPhysics_PositionHi\n\n\tLDY IsHorizontalLevel\n\tBEQ ApplyObjectPhysics_Exit\n\nApplyObjectPhysics_PositionHi:\n\tLSR byte_RAM_1\n\tLDA ObjectXHi, X\n\tADC byte_RAM_2\n\tSTA ObjectXHi, X\n\nApplyObjectPhysics_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\nEnemyBehavior_TurnAround:\n\t; flip x-velocity\n\tLDA ObjectXVelocity, X\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA ObjectXVelocity, X\n\t; if the enemy is not moving, flip direction next\n\tBEQ EnemyBehavior_TurnAroundExit\n\n\t; flip enemy movement direction\n\tLDA EnemyMovementDirection, X\n\tEOR #$03 ; $01 XOR $03 = $02, $02 XOR $03 = $01\n\tSTA EnemyMovementDirection, X\n\nEnemyBehavior_TurnAroundExit:\n\tJMP ApplyObjectPhysicsX\n\n\n; Unused space in the original ($9EBD - $A02F)\nunusedSpace $A030, $FF\n\n\nEnemyTilemap2:\n\t.db $2D,$2F ; $00\n\t.db $2D,$2F ; $02\n\t.db $E0,$E2 ; $04\n\t.db $E4,$E6 ; $06\n\t.db $E0,$E2 ; $08\n\t.db $E4,$E6 ; $0A\n\t.db $E8,$EA ; $0C\n\t.db $EC,$EE ; $0E\n\t.db $E8,$EA ; $10\n\t.db $EC,$EE ; $12\n\t.db $01,$03 ; $14\n\t.db $09,$05 ; $16\n\t.db $07,$0B ; $18\n\t.db $0D,$0F ; $1A\n\t.db $15,$11 ; $1C\n\t.db $13,$17 ; $1E\n\t.db $01,$03 ; $20\n\t.db $09,$05 ; $22\n\t.db $19,$1B ; $24\n\t.db $01,$03 ; $26\n\t.db $09,$05 ; $28\n\t.db $19,$1B ; $2A\n\t.db $1D,$1F ; $2C\n\t.db $25,$21 ; $2E\n\t.db $23,$27 ; $30\n\t.db $1D,$1F ; $32\n\t.db $25,$21 ; $34\n\t.db $23,$27 ; $36\n\t.db $9C,$9E ; $38\n\t.db $9C,$9E ; $3A\n\t.db $D0,$D2 ; $3C\n\t.db $D4,$D6 ; $3E\n\t.db $F0,$F2 ; $40\n\t.db $F4,$F6 ; $42\n\t.db $F0,$F2 ; $44\n\t.db $F8,$FA ; $46\n\t.db $0F,$11 ; $48\n\t.db $13,$15 ; $4A\n\t.db $1F,$11 ; $4C\n\t.db $13,$15 ; $4E\n\t.db $17,$19 ; $50\n\t.db $1B,$17 ; $52\n\t.db $19,$1D ; $54\n\t.db $09,$0B ; $56\n\t.db $01,$03 ; $58\n\t.db $05,$07 ; $5A\n\t.db $55,$59 ; $5C\n\t.db $5B,$5D ; $5E\n\t.db $F0,$F2 ; $60\n\t.db $F4,$F6 ; $62\n\t.db $45,$59 ; $64\n\t.db $5B,$5D ; $66\n\t.db $45,$59 ; $68\n\t.db $5B,$5D ; $6A\n\t.db $E8,$EA ; $6C\n\t.db $EC,$EE ; $6E\n\t.db $EC,$EE ; $70\n\t.db $EC,$EE ; $72\n\t.db $F0,$F2 ; $74\n\t.db $F0,$F2 ; $76\n\t.db $F4,$F6 ; $78\n\t.db $F8,$FA ; $7A\n\t.db $D0,$D2 ; $7C\n\t.db $D4,$D6 ; $7E\n\t.db $01,$03 ; $80\n\t.db $05,$07 ; $82\n\t.db $09,$0B ; $84\n\t.db $0D,$0F ; $86\n\t.db $01,$11 ; $88\n\t.db $05,$15 ; $8A\n\t.db $13,$0B ; $8C\n\t.db $17,$0F ; $8E\n\t.db $19,$1B ; $90\n\t.db $2D,$2F ; $92\n\t.db $3A,$3A ; $94\n\t.db $E0,$E2 ; $96\n\t.db $E4,$E6 ; $98\n\t.db $E8,$EA ; $9A\n\t.db $EC,$EE ; $9C\n\t.db $01,$03 ; $9E\n\t.db $05,$07 ; $A0\n\t.db $4F,$5D ; $A2\n\t.db $05,$07 ; $A4\n\t.db $09,$0B ; $A6\n\t.db $0D,$0F ; $A8\n\t.db $27,$79 ; $AA\n\t.db $7B,$2D ; $AC\n\t.db $4F,$2F ; $AE\n\t.db $45,$55 ; $B0\n\t.db $11,$13 ; $B2\n\t.db $15,$17 ; $B4\n\t.db $1F,$21 ; $B6\n\t.db $23,$25 ; $B8\n\t.db $11,$13 ; $BA\n\t.db $23,$25 ; $BC\n\t.db $59,$59 ; $BE\n\t.db $5B,$5B ; $C0\n\t.db $01,$03 ; $C2\n\t.db $05,$07 ; $C4\n\t.db $09,$0B ; $C6\n\t.db $0D,$0F ; $C8\n\t.db $FB,$11 ; $CA\n\t.db $15,$17 ; $CC\n\t.db $13,$FB ; $CE\n\t.db $19,$1B ; $D0\n\t.db $1D,$1F ; $D2\n\t.db $21,$23 ; $D4\n\t.db $25,$27 ; $D6\n\t.db $25,$27 ; $D8\nIFDEF EXPAND_TABLES\n\tunusedSpace EnemyTilemap2 + $100, $FB\nENDIF\n\n\nEnemyInit_Clawgrip:\n\tJSR EnemyInit_Birdo\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$03\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$04\n\tSTA EnemyHP, X\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$04\n\tSTA ObjectXLo, X\n\tJMP SetEnemyAttributes\n\n; ---------------------------------------------------------------------------\nunk_BANK3_A120:\n\t.db $C8\n\t.db $D0\n\t.db $E0\n\t.db $F0\n\t.db $00\n\t.db $10\n\t.db $20\n\t.db $C8\nunk_BANK3_A128:\n\t.db $DC\n\t.db $E2\n\t.db $E8\n\t.db $F0\n\t.db $F8\n\t.db $E8\n\t.db $DC\n\t.db $DC\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Clawgrip:\n\tLDA EnemyArray_45C, X\n\tORA EnemyArray_438, X\n\tBEQ loc_BANK3_A13B\n\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A13B:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA ObjectYLo, X\n\tCMP #$70\n\tBCC loc_BANK3_A147\n\n\tJSR ResetObjectYVelocity\n\nloc_BANK3_A147:\n\tLDA EnemyTimer, X\n\tBNE loc_BANK3_A179\n\n\tLDA EnemyVariable, X\n\tAND #$3F\n\tBNE loc_BANK3_A168\n\n\tLDA PseudoRNGValues + 2\n\tAND #$03\n\tBEQ loc_BANK3_A168\n\n\tLDY ScreenBoundaryLeftLo\n\tDEY\n\tCPY #$80\n\tBCC loc_BANK3_A168\n\n\tLDA #$7F\n\tSTA EnemyTimer, X\n\tLDY #$00\n\tBEQ loc_BANK3_A174\n\nloc_BANK3_A168:\n\tINC EnemyVariable, X\n\tLDY #$F0\n\tLDA EnemyVariable, X\n\tAND #$20\n\tBEQ loc_BANK3_A174\n\n\tLDY #$10\n\nloc_BANK3_A174:\n\tSTY ObjectXVelocity, X\n\tJMP loc_BANK3_A1CD\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A179:\n\tCMP #$50\n\tBNE loc_BANK3_A17D\n\nloc_BANK3_A17D:\n\tCMP #$20\n\tBNE loc_BANK3_A1CD\n\n\tLDA PseudoRNGValues + 2\n\tAND #$07\n\tTAY\n\tLDA unk_BANK3_A128, Y\n\tSTA ObjectYVelocity, X\n\tDEC ObjectYLo, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_A1CD\n\n\tLDY byte_RAM_0\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$00\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tSBC #$00\n\tSTA ObjectYHi, Y\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$08\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, Y\n\tLDX byte_RAM_0\n\tLDA #Enemy_ClawgripRock\n\tSTA ObjectType, X\n\tLDA PseudoRNGValues + 2\n\tAND #$07\n\tTAY\n\tLDA unk_BANK3_A120, Y\n\tSTA ObjectYVelocity, X\n\tLDA #$D0\n\tSTA ObjectXVelocity, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK3_A1CD:\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectMovement_Vertical\n\nloc_BANK3_A1D3:\n\tJMP RenderSprite\n\n\n\t.db $08\n\t.db $08\n\nbyte_BANK3_A1D8:\n\t.db $1C\n\t.db $F4\n\t.db $11\n\t.db $0F\n\nbyte_BANK3_A1DC:\n\t.db $04\n\t.db $06\n\t.db $08\n\t.db $08\n\t.db $08\n\t.db $08\n\t.db $06\n\t.db $04\n\n\nRenderSprite_Clawgrip:\n\tLDA_abs byte_RAM_F4\n\n\tSTA EnemyArray_B1, X\n\tLDY EnemyState, X\n\tDEY\n\tTYA\n\tORA EnemyArray_45C, X\n\tBEQ loc_BANK3_A1FA\n\n\tLDY #$D2\n\tLDA #$00\n\tSTA EnemyTimer, X\n\tBEQ loc_BANK3_A21C\n\nloc_BANK3_A1FA:\n\tLDY #$C2\n\tLDA byte_RAM_10\n\tAND #$10\n\tBNE loc_BANK3_A204\n\n\tLDY #$C6\n\nloc_BANK3_A204:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK3_A21C\n\n\tLDY #$CA\n\tCMP #$60\n\tBCS loc_BANK3_A21C\n\n\tLDY #$C2\n\tCMP #$40\n\tBCS loc_BANK3_A21C\n\n\tLDY #$C6\n\tCMP #$20\n\tBCS loc_BANK3_A21C\n\n\tLDY #$C2\n\nloc_BANK3_A21C:\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tTYA\n\tJSR RenderSprite_DrawObject\n\n\tLDY #$C6\n\tLDA byte_RAM_10\n\tAND #$10\n\tBNE loc_BANK3_A22E\n\n\tLDY #$C2\n\nloc_BANK3_A22E:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK3_A246\n\n\tLDY #$CE\n\tCMP #$60\n\tBCS loc_BANK3_A246\n\n\tLDY #$C2\n\tCMP #$40\n\tBCS loc_BANK3_A246\n\n\tLDY #$C6\n\tCMP #$20\n\tBCS loc_BANK3_A246\n\n\tLDY #$C2\n\nloc_BANK3_A246:\n\tLDA EnemyArray_45C, X\n\tBEQ loc_BANK3_A24D\n\n\tLDY #$D2\n\nloc_BANK3_A24D:\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$10\n\tSTA SpriteTempScreenX\n\tASL byte_RAM_EE\n\tASL byte_RAM_EE\n\tLDA EnemyTimer, X\n\tCMP #$60\n\tBCS loc_BANK3_A262\n\n\tLSR EnemyMovementDirection, X\n\nloc_BANK3_A262:\n\tTYA\n\tPHA\n\tJSR FindSpriteSlot\n\n\tSTY byte_RAM_F4\n\tPLA\n\tJSR RenderSprite_DrawObject\n\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK3_A2D2\n\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tBEQ locret_BANK3_A2D1\n\n\tTAY\n\tLDA ObjectXLo, X\n\tPHA\n\tCLC\n\tADC loc_BANK3_A1D3 + 2, Y\n\tSTA ObjectXLo, X\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA SpriteTempScreenX\n\tLDA ObjectYLo, X\n\tCLC\n\tADC byte_BANK3_A1D8, Y\n\tSTA SpriteTempScreenY\n\tLDA EnemyTimer, X\n\tCMP #$30\n\tBCC loc_BANK3_A2AA\n\n\tCMP #$40\n\tBCS loc_BANK3_A2AA\n\n\tLSR A\n\tAND #$07\n\tTAY\n\tLDA SpriteTempScreenY\n\tSEC\n\tSBC byte_BANK3_A1DC, Y\n\tSTA SpriteTempScreenY\n\nloc_BANK3_A2AA:\n\tJSR sub_BANK2_8894\n\n\tLDY #$00\n\tSTY_abs byte_RAM_F4\n\n\tLDA ObjectAttributes, X\n\tPHA\n\tLDA #$02\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_46E, X\n\tPHA\n\tLDA #%00010000\n\tSTA EnemyArray_46E, X\n\tLDA #$D6\n\tJSR RenderSprite_DrawObject\n\n\tPLA\n\tSTA EnemyArray_46E, X\n\tPLA\n\tSTA ObjectAttributes, X\n\tPLA\n\tSTA ObjectXLo, X\n\nlocret_BANK3_A2D1:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A2D2:\n\tLDA byte_RAM_10\n\tAND #$04\n\tBEQ loc_BANK3_A2E1\n\n\tLDX_abs byte_RAM_F4\n\n\tDEC SpriteDMAArea + $C, X\n\tLDX byte_RAM_12\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A2E1:\n\tLDA EnemyArray_B1, X\n\tTAX\n\tDEC SpriteDMAArea + 8, X\n\tLDX byte_RAM_12\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_ClawgripRock:\n\tLDA #$00\n\tSTA EnemyArray_45C, X\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectMovement_Vertical\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_A30A\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK3_A30A:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_A320\n\n\tLDA ObjectYLo, X\n\tAND #$F0\n\tSTA ObjectYLo, X\n\tLDA ObjectYVelocity, X\n\tLSR A\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA ObjectYVelocity, X\n\nloc_BANK3_A320:\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nRenderSprite_ClawgripRock:\n\tLDA_abs_X ObjectBeingCarriedTimer ;, X\n\n\tORA EnemyArray_438, X\n\tBNE loc_BANK3_A362\n\n\tLDA byte_RAM_10\n\tSTA byte_RAM_0\n\tLDA ObjectXVelocity, X\n\tBPL loc_BANK3_A338\n\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\nloc_BANK3_A338:\n\tCMP #$20\n\tBCS loc_BANK3_A344\n\n\tLSR byte_RAM_0\n\tCMP #$08\n\tBCS loc_BANK3_A344\n\n\tLSR byte_RAM_0\n\nloc_BANK3_A344:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$04\n\tAND #$08\n\tLSR A\n\tLSR A\n\tLSR A\n\tLDY ObjectXVelocity, X\n\tBPL loc_BANK3_A354\n\n\tEOR #$01\n\nloc_BANK3_A354:\n\tSTA EnemyMovementDirection, X\n\tLDA byte_RAM_0\n\tAND #$08\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tORA #$02\n\tSTA ObjectAttributes, X\n\nloc_BANK3_A362:\n\tJMP RenderSprite_NotAlbatoss\n\n\nFlyingCarpetSpeed:\n\t.db $00\n\t.db $15\n\t.db $EB\n\t.db $00\n\n\nEnemyBehavior_FlyingCarpet:\n\tJSR ObjectTileCollision\n\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE loc_BANK3_A37C\n\n\tDEC EnemyArray_B1, X\n\tBNE loc_BANK3_A37C\n\n\tSTA PlayerRidingCarpet\n\tJMP EnemyDestroy\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A37C:\n\tLDA PlayerRidingCarpet\n\tBEQ loc_BANK3_A38F\n\n\tLDA PlayerYVelocity\n\tBPL loc_BANK3_A38F\n\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\tSTA PlayerRidingCarpet\n\tJMP RenderSprite_FlyingCarpet\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A38F:\n\tLDA EnemyCollision, X\n\tAND #$20\n\tSTA PlayerRidingCarpet\n\tBNE loc_BANK3_A39B\n\n\tJMP loc_BANK3_A42A\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A39B:\n\tLDA ObjectXVelocity, X\n\tBEQ loc_BANK3_A3A5\n\n\tLDA EnemyMovementDirection, X\n\tAND #$01\n\tSTA PlayerDirection\n\nloc_BANK3_A3A5:\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$1A\n\tSTA PlayerYLo\n\tLDA ObjectYHi, X\n\tSBC #$00\n\tSTA PlayerYHi\n\tLDA PlayerXLo\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tLDY #$01\n\tLDA ObjectXVelocity, X\n\tBMI loc_BANK3_A3C7\n\n\tLDY #$FF\n\nloc_BANK3_A3C7:\n\tSTY byte_RAM_71CC\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tTAY\n\tAND_abs PlayerCollision\n\n\tBNE loc_BANK3_A3E6\n\n\tLDA FlyingCarpetSpeed, Y\n\tCMP ObjectXVelocity, X\n\tBEQ loc_BANK3_A3E3\n\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC byte_RAM_71CC, Y\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_A3E3:\n\tJMP loc_BANK3_A3EA\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A3E6:\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_A3EA:\n\tLDY #$01\n\tLDA ObjectYVelocity, X\n\tBMI loc_BANK3_A3F2\n\n\tLDY #$FF\n\nloc_BANK3_A3F2:\n\tSTY byte_RAM_71CC\n\tLDA #$20\n\tCMP SpriteTempScreenY\n\tLDA #$00\n\tROL A\n\tASL A\n\tASL A\n\tASL A\n\tAND Player1JoypadHeld\n\tBNE loc_BANK3_A417\n\n\tLDA EnemyCollision, X\n\tLSR A\n\tLSR A\n\tAND #$03\n\tSTA byte_RAM_0\n\tLDA Player1JoypadHeld\n\tLSR A\n\tLSR A\n\tAND #$03\n\tTAY\n\tAND byte_RAM_0\n\tBEQ loc_BANK3_A41B\n\nloc_BANK3_A417:\n\tLDA #$00\n\tBEQ loc_BANK3_A428\n\nloc_BANK3_A41B:\n\tLDA FlyingCarpetSpeed, Y\n\tCMP ObjectYVelocity, X\n\tBEQ loc_BANK3_A42A\n\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC byte_RAM_71CC, Y\n\nloc_BANK3_A428:\n\tSTA ObjectYVelocity, X\n\nloc_BANK3_A42A:\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectPhysicsY\n\n\tLDA EnemyArray_B1, X\n\tCMP #$20\n\tBCS EnemyBehavior_FlyingCarpet_Render\n\n\tLDA byte_RAM_10\n\tAND #$02\n\nloc_BANK3_A43A:\n\tBNE EnemyBehavior_FlyingCarpet_Render\n\n\tRTS\n\nEnemyBehavior_FlyingCarpet_Render:\n\tJMP RenderSprite_FlyingCarpet\n\n\nCreateFlyingCarpet:\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI CreateFlyingCarpet_Exit\n\n\tLDX byte_RAM_0\n\tLDY byte_RAM_12\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\tLDA #Enemy_FlyingCarpet\n\tSTA ObjectType, X\n\tLDA ObjectXLo, Y\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, Y\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tLDA ObjectYLo, Y\n\tCLC\n\tADC #$0E\n\tSTA ObjectYLo, X\n\tLDA ObjectYHi, Y\n\tADC #$00\n\tSTA ObjectYHi, X\n\tJSR SetEnemyAttributes\n\n\t; life of carpet\n\tLDA #$A0\n\tSTA EnemyArray_B1, X\n\nCreateFlyingCarpet_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\nFlyingCarpetMirroring:\n\t.db $02\n\t.db $02\n\t.db $01\n\t.db $01\n\nFlyingCarpetTilemapIndex:\n\t.db $04\n\t.db $0C\n\t.db $0C\n\t.db $04\n\nPidgitYAcceleration:\n\t.db $01\n\t.db $FF\n\nPidgitTurnYVelocity:\n\t.db $08\n\t.db $F8\n\nPidgitXAcceleration:\n\t.db $01\n\t.db $FF\n\nPidgitTurnXVelocity:\n\t.db $20\n\t.db $E0\n\nPidgitDiveXVelocity:\n\t.db $14\n\t.db $EC\n\n\nEnemyBehavior_Pidgit:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tLDA EnemyArray_42F, X\n\tBEQ EnemyBehavior_Pidgit_Alive\n\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_UpsideDown\n\tSTA ObjectAttributes, X\n\tJSR RenderSprite_Pidgit\n\n\tJMP ApplyObjectMovement\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Pidgit_Alive:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA EnemyArray_B1, X\n\tBEQ loc_BANK3_A4C1\n\n\tDEC ObjectYVelocity, X\n\tBPL loc_BANK3_A4BE\n\n\tLDA ObjectYLo, X\n\tCMP #$30\n\tBCS loc_BANK3_A4BE\n\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\tDEC EnemyTimer, X\n\nloc_BANK3_A4BE:\n\tJMP loc_BANK3_A502\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A4C1:\n\tLDA EnemyTimer, X\n\tBNE loc_BANK3_A4D6\n\n\tLDA #$30\n\tSTA ObjectYVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA PidgitDiveXVelocity, Y\n\tSTA ObjectXVelocity, X\n\tINC EnemyArray_B1, X\n\tJMP RenderSprite_Pidgit\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A4D6:\n\tLDA EnemyArray_480, X\n\tAND #$01\n\tTAY\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC PidgitYAcceleration, Y\n\tSTA ObjectYVelocity, X\n\tCMP PidgitTurnYVelocity, Y\n\tBNE loc_BANK3_A4EC\n\n\tINC EnemyArray_480, X\n\nloc_BANK3_A4EC:\n\tLDA EnemyArray_477, X\n\tAND #$01\n\tTAY\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC PidgitXAcceleration, Y\n\tSTA ObjectXVelocity, X\n\tCMP PidgitTurnXVelocity, Y\n\tBNE loc_BANK3_A502\n\n\tINC EnemyArray_477, X\n\nloc_BANK3_A502:\n\tJSR ApplyObjectPhysicsY\n\n\tJSR ApplyObjectPhysicsX\n\n\nRenderSprite_Pidgit:\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA EnemyState, X\n\tSEC\n\tSBC #$01\n\tORA EnemyArray_42F, X\n\tORA ObjectBeingCarriedTimer, X\n\tBNE RenderSprite_Pidgit_Exit\n\n\t; Render Pidgit's carpet\n\tJSR FindSpriteSlot\n\n\tSTY_abs byte_RAM_F4\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_Horizontal | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDA ObjectXLo, X\n\tPHA\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, X\n\tPHA\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tJSR sub_BANK2_8894\n\n\tPLA\n\tSTA ObjectXHi, X\n\tPLA\n\tSTA ObjectXLo, X\n\tLDA SpriteTempScreenY\n\tCLC\n\tADC #$0C\n\tSTA SpriteTempScreenY\n\tLDA SpriteTempScreenX\n\tSBC #$07\n\tSTA SpriteTempScreenX\n\tJSR RenderSprite_FlyingCarpet\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_Horizontal | ObjAttrib_FrontFacing\n\tSTA ObjectAttributes, X\n\nRenderSprite_Pidgit_Exit:\n\tRTS\n\n\nRenderSprite_FlyingCarpet:\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$03\n\tLDY ObjectXVelocity, X\n\tBMI loc_BANK3_A55F\n\n\tEOR #$03\n\nloc_BANK3_A55F:\n\tTAY\n\tLDA FlyingCarpetMirroring, Y\n\tSTA EnemyMovementDirection, X\n\tLDA FlyingCarpetTilemapIndex, Y\n\tJMP RenderSprite_DrawObject\n\n\nEnemyInit_Mouser:\n\tJSR EnemyInit_Birdo\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$00\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$02\n\tLDY CurrentWorldTileset\n\tBEQ EnemyInit_Mouser_SetHP\n\n\tLDA #$04\n\nEnemyInit_Mouser_SetHP:\n\tSTA EnemyHP, X\n\tRTS\n\n;\n; Mouser\n; ======\n;\n; Runs back and forth, throws bombs\n;\n; byte_RAM_10 = timer used for jumping and throwing\n; EnemyArray_45C = pauses Mouser when not $00\n; EnemyTimer = counter used to time throwing (wind up and pitch)\n; EnemyArray_B1 = counter used for movement direction and non-throw pauses\n;\nEnemyBehavior_Mouser:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA EnemyArray_45C, X\n\tBEQ EnemyBehavior_Mouser_Active\n\n\tJMP RenderSprite\n\nEnemyBehavior_Mouser_Active:\n\tJSR ObjectTileCollision\n\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tJSR RenderSprite\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Mouser_Falling\n\n\tJSR ResetObjectYVelocity\n\n\tLDA byte_RAM_10\n\tAND #$FF\n\tBNE EnemyBehavior_Mouser_Move\n\nEnemyBehavior_Mouser_Jump:\n\tLDA #$D8\n\tSTA ObjectYVelocity, X\n\tBNE EnemyBehavior_Mouser_Falling\n\nEnemyBehavior_Mouser_Move:\n\tLDA byte_RAM_10\n\tAND #$3F\n\tBNE loc_BANK3_A5AF\n\n\t; the wind-up\n\tLDA #$20\n\tSTA EnemyTimer, X\n\nloc_BANK3_A5AF:\n\tLDY EnemyTimer, X\n\tBNE EnemyBehavior_Mouser_MaybeThrow\n\n\tINC EnemyArray_B1, X\n\tLDA EnemyArray_B1, X\n\tAND #$20\n\tBEQ EnemyBehavior_Mouser_Exit\n\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tLDY #$18 ; right\n\tLDA EnemyArray_B1, X\n\tAND #$40\n\tBNE EnemyBehavior_Mouser_PhysicsX\n\n\tLDY #$E8 ; left\n\nEnemyBehavior_Mouser_PhysicsX:\n\tSTY ObjectXVelocity, X\n\tJMP ApplyObjectPhysicsX\n\nEnemyBehavior_Mouser_MaybeThrow:\n\t; the pitch\n\tCPY #$10\n\tBNE EnemyBehavior_Mouser_Exit\n\nEnemyBehavior_Mouser_Throw:\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI EnemyBehavior_Mouser_Exit\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Bomb\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tADC #$03\n\tSTA ObjectYLo, X\n\tLDA #$E0 ; throw y-velocity\n\tSTA ObjectYVelocity, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$FF ; bomb fuse\n\tSTA EnemyTimer, X\n\tLDA #$E0 ; throw x-velocity\n\tSTA ObjectXVelocity, X\n\tLDX byte_RAM_12\n\nEnemyBehavior_Mouser_Exit:\n\tRTS\n\nEnemyBehavior_Mouser_Falling:\n\tJMP ApplyObjectMovement_Vertical\n\n\nRenderSprite_Mouser:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBNE RenderSprite_Mouser_Hurt\n\n\tLDA EnemyArray_45C, X\n\tBEQ RenderSprite_Mouser_Throw\n\n\tINC ObjectAnimationTimer, X\n\tLDA #ObjAttrib_16x32 | ObjAttrib_FrontFacing | ObjAttrib_Palette2\n\tSTA ObjectAttributes, X\n\nRenderSprite_Mouser_Hurt:\n\tLDA #%10110011\n\tSTA EnemyArray_46E, X\n\tLDA #$2C ; hurt sprite\n\tBNE RenderSprite_Mouser_DrawObject\n\nRenderSprite_Mouser_Throw:\n\tLDY EnemyTimer, X\n\tDEY\n\tCPY #$10\n\tBCS RenderSprite_Mouser_Walk\n\n\tLDA #$20 ; throwing sprite\n\nRenderSprite_Mouser_DrawObject:\n\tJSR RenderSprite_DrawObject\n\n\tJMP RenderSprite_Mouser_Exit\n\nRenderSprite_Mouser_Walk:\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA EnemyTimer, X\n\tCMP #$10\n\tBCC RenderSprite_Mouser_Exit\n\nRenderSprite_Mouser_Bomb:\n\tLDA #ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDA #%00010000 ; use tilemap 2\n\tSTA EnemyArray_46E, X\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$0B\n\tSTA SpriteTempScreenX\n\tASL byte_RAM_EE\n\tLDY #$00\n\tSTY_abs byte_RAM_F4\n\tLDA #$38 ; could have been $34 from tilemap 1 instead\n\tJSR RenderSprite_DrawObject\n\nRenderSprite_Mouser_Exit:\n\t; restore Mouser attributes after drawing the bomb\n\tLDA #ObjAttrib_16x32 | ObjAttrib_Palette3\n\tSTA ObjectAttributes, X\n\tLDA #%00110011\n\tSTA EnemyArray_46E, X\n\n\tRTS\n\n\n; ---------------------------------------------------------------------------\nbyte_BANK3_A652:\n\t.db $FB\n\t.db $05\n; ---------------------------------------------------------------------------\n\nRenderSprite_Ostro:\n\tJSR RenderSprite_NotRocket\n\n\tLDA byte_RAM_EE\n\tAND #$0E\n\tORA byte_RAM_EF\n\tORA EnemyArray_B1, X\n\tBNE locret_BANK3_A67C\n\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$02\n\tSTA byte_RAM_0\n\tLDY EnemyMovementDirection, X\n\tLDA byte_RAM_1\n\tCLC\n\tADC byte_BANK3_A652 - 1, Y\n\tSTA byte_RAM_1\n\tJSR FindSpriteSlot\n\n\tLDX #$3C\n\tJSR SetSpriteTiles\n\n\tLDX byte_RAM_12\n\nlocret_BANK3_A67C:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Ostro:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_A6DB\n\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK3_A6BD\n\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tJSR CreateEnemy\n\n\tBMI locret_BANK3_A6BC\n\n\tLDY byte_RAM_0\n\tLDA #Enemy_Ostro\n\tSTA ObjectType, Y\n\tSTA EnemyArray_B1, Y\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDA unk_RAM_441, X\n\tSTA unk_RAM_441, Y\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tLDA ObjectXVelocity, X\n\tSTA ObjectXVelocity, Y\n\tTYA\n\tTAX\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nlocret_BANK3_A6BC:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A6BD:\n\tLDA EnemyCollision, X\n\tAND #$10\n\tBEQ loc_BANK3_A6DB\n\n\tINC EnemyArray_B1, X\n\tSTA ObjectAnimationTimer, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_A6DB\n\n\tLDY byte_RAM_0\n\tLDA ObjectXVelocity, X\n\tSTA ObjectXVelocity, Y\n\tLDA #$20\n\tSTA EnemyArray_453, Y\n\tJMP loc_BANK3_A6E1\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_A6DB:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\nloc_BANK3_A6E1:\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND EnemyMovementDirection, X\n\tBEQ loc_BANK3_A6ED\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK3_A6ED:\n\tLDA EnemyCollision, X\n\tAND #$04\n\tBEQ loc_BANK3_A70D\n\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK3_A700\n\n\tLDA #$00\n\tSTA EnemyArray_42F, X\n\tJSR EnemyInit_BasicAttributes\n\nloc_BANK3_A700:\n\tLDA ObjectAnimationTimer, X\n\tEOR #$08\n\tSTA ObjectAnimationTimer, X\n\tJSR ResetObjectYVelocity\n\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\nloc_BANK3_A70D:\n\tINC EnemyArray_477, X\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_A71E\n\n\tLDA EnemyArray_477, X\n\tAND #$3F\n\tBNE loc_BANK3_A71E\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK3_A71E:\n\tJSR ApplyObjectMovement\n\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_Tryclyde:\n\tJSR EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$01\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$40\n\tSTA EnemyArray_477, X\n\tLDA #$02\n\tSTA EnemyHP, X\n\tJMP EnemyInit_Birdo_Exit\n\n\nTryclydeHeadPosition:\n\t.db $00\n\t.db $FF\n\t.db $FE\n\t.db $FD\n\t.db $FC\n\t.db $FB\n\t.db $FA\n\t.db $F9\n\t.db $F8\n\t.db $F9\n\t.db $FA\n\t.db $FB\n\t.db $FC\n\t.db $FD\n\t.db $FE\n\t.db $FF\n\nTryclydeFireYVelocity:\n\t.db $0B\n\t.db $0C\n\t.db $0D\n\t.db $0F\n\t.db $10\n\t.db $12\n\t.db $14\n\t.db $17\n\t.db $1A\n\t.db $1D\n\t.db $1F\n\t.db $20\n\nTryclydeFireXVelocity:\n\t.db $E2\n\t.db $E2\n\t.db $E2\n\t.db $E3\n\t.db $E4\n\t.db $E5\n\t.db $E7\n\t.db $E9\n\t.db $ED\n\t.db $F1\n\t.db $F8\n\t.db $00\n\n\nlocret_BANK3_A75C:\n\tRTS\n\n\n;\n; Tryclyde\n; ========\n;\n; Drifts back and forth slightly, spits fire\n;\n; EnemyArray_477 = counter used to determine movement direction and top head position\n; EnemyArray_B1 = counter used to determine whether or not the bottom head should move\n; EnemyArray_45C = used to determine whether Tryclyde is taking damage\n; EnemyArray_480 = counter used to determine bottom head position\n;\nEnemyBehavior_Tryclyde:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDY #$00\n\tLDA EnemyArray_477, X\n\tASL A\n\tBCC EnemyBehavior_Tryclyde_PhysicsX\n\n\tLDY #$02\n\tASL A\n\tBCC EnemyBehavior_Tryclyde_PhysicsX\n\n\tLDY #$FE\n\nEnemyBehavior_Tryclyde_PhysicsX:\n\tSTY ObjectXVelocity, X\n\tJSR ApplyObjectPhysicsX\n\n\tINC EnemyArray_477, X\n\tLDA EnemyArray_B1, X\n\tCLC\n\tADC #$D0\n\tSTA EnemyArray_B1, X\n\tBCC RenderSprite_Tryclyde\n\n\tINC EnemyArray_480, X\n\nRenderSprite_Tryclyde:\n\tLDA byte_RAM_EF\n\tBNE locret_BANK3_A75C\n\n\tLDA #ObjAttrib_16x32 | ObjAttrib_FrontFacing | ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDY #$48 ; static head regular\n\tLDA EnemyState, X\n\tSEC\n\tSBC #$01\n\tORA EnemyArray_45C, X\n\tSTA byte_RAM_7\n\tBEQ RenderSprite_Tryclyde_DrawBody\n\n\tLDY #$4C ; static head hurt\n\nRenderSprite_Tryclyde_DrawBody:\n\tTYA\n\tLDY #$30\n\tSTY_abs byte_RAM_F4\n\tJSR RenderSprite_DrawObject\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_FrontFacing\n\tSTA ObjectAttributes, X\n\tLDA #%00110011\n\tSTA EnemyArray_46E, X\n\tLDA ObjectXLo, X\n\tPHA\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tJSR sub_BANK2_8894\n\n\tLDX #$50 ; tail up\n\tLDA byte_RAM_10\n\tAND #$20\n\tBNE RenderSprite_Tryclyde_DrawTail\n\n\tLDA #$04\n\tAND byte_RAM_10\n\tBEQ RenderSprite_Tryclyde_DrawTail\n\n\tLDX #$53 ; tail down\n\nRenderSprite_Tryclyde_DrawTail:\n\t; tail\n\tLDA byte_RAM_1\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_1\n\tLDA #$20\n\tSTA byte_RAM_C\n\tLDY #$E0\n\tJSR SetSpriteTiles\n\n\t; top head\n\tLDX byte_RAM_12\n\tLDA ObjectXLo, X\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tJSR sub_BANK2_8894\n\n\tPLA\n\tSTA ObjectXLo, X\n\tLDA #%00010011\n\tSTA EnemyArray_46E, X\n\tLDA ObjectYLo, X\n\tSTA byte_RAM_0\n\tLDA EnemyArray_477, X\n\tAND #$78\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA TryclydeHeadPosition, Y\n\tADC SpriteTempScreenX\n\tADC #$F0\n\tSTA byte_RAM_1\n\tLDX #$56\n\tLDA byte_RAM_7\n\tBNE RenderSprite_Tryclyde_DrawTopHead\n\n\tLDX #$58\n\tDEY\n\tDEY\n\tDEY\n\tDEY\n\tCPY #$07\n\tBCS RenderSprite_Tryclyde_DrawTopHead\n\n\tLDX #$5A\n\nRenderSprite_Tryclyde_DrawTopHead:\n\tLDY #$00\n\tJSR SetSpriteTiles\n\n\t; bottom head\n\tLDX byte_RAM_12\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tLDA EnemyArray_480, X\n\tAND #$78\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA TryclydeHeadPosition, Y\n\tADC SpriteTempScreenX\n\tADC #$F0\n\tSTA byte_RAM_1\n\tLDA #$00\n\tSTA byte_RAM_C\n\tLDX #$56\n\tLDA byte_RAM_7\n\tBNE RenderSprite_Tryclyde_DrawBottomHead\n\n\tLDX #$58\n\tDEY\n\tDEY\n\tDEY\n\tDEY\n\tCPY #$07\n\tBCS RenderSprite_Tryclyde_DrawBottomHead\n\n\tLDX #$5A\n\nRenderSprite_Tryclyde_DrawBottomHead:\n\tLDY #$08\n\tJSR SetSpriteTiles\n\n\tLDX byte_RAM_12\n\tLDA #%00010011\n\tSTA EnemyArray_46E, X\n\tLDA byte_RAM_EE\n\tBNE EnemyBehavior_Tryclyde_SpitFireballs\n\nRenderSprite_Tryclyde_DrawBottomNeck:\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + $58\n\tLDA #$0D ; neck sprite\n\tSTA SpriteDMAArea + $59\n\tSTA SpriteDMAArea + $5D ; bottom neck\n\tLDA SpriteDMAArea + $32\n\tSTA SpriteDMAArea + $5A\n\tSTA SpriteDMAArea + $5E ; bottom neck\n\tLDA byte_RAM_1\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + $5B\n\nRenderSprite_Tryclyde_DrawTopNeck:\n\tLDA ObjectYLo, X\n\tSTA SpriteDMAArea + $5C\n\tLDA SpriteTempScreenX\n\tSEC\n\tSBC #$08\n\tSTA SpriteDMAArea + $5F\n\nEnemyBehavior_Tryclyde_SpitFireballs:\n\tLDA #$00\n\tSTA byte_RAM_5\n\tLDA EnemyArray_477, X\n\tJSR EnemyBehavior_Tryclyde_SpitFireball\n\n\tINC byte_RAM_5\n\tLDA EnemyArray_480, X\n\nEnemyBehavior_Tryclyde_SpitFireball:\n\tAND #$67\n\tCMP #$40\n\tBNE RenderSprite_Tryclyde_Exit\n\n\tLDA EnemyArray_45C, X\n\tBNE RenderSprite_Tryclyde_Exit\n\n\tJSR CreateEnemy\n\n\tBMI RenderSprite_Tryclyde_Exit\n\n\tLDA #SoundEffect1_BirdoShot\n\tSTA SoundEffectQueue1\n\tLDY byte_RAM_0\n\tLDA #Enemy_Fireball\n\tSTA ObjectType, Y\n\tSTA EnemyVariable, Y\n\tSTA EnemyArray_B1, Y\n\tLDA ObjectXLo, X\n\tSBC #$18\n\tSTA ObjectXLo, Y\n\tLDA byte_RAM_5\n\tBEQ EnemyBehavior_Tryclyde_GetFireAngle\n\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA ObjectYLo, Y\n\nEnemyBehavior_Tryclyde_GetFireAngle:\n\t; angle the fireball based on the player's position\n\tLDA PlayerXLo\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$0F\n\tCMP #$0B\n\tBCC EnemyBehavior_Tryclyde_SetFireVelocity\n\n\tLDA #$0B\n\nEnemyBehavior_Tryclyde_SetFireVelocity:\n\tTAX ; These may be fireball speed pointers\n\tLDA TryclydeFireYVelocity, X\n\tSTA ObjectYVelocity, Y\n\tLDA TryclydeFireXVelocity, X\n\tSTA ObjectXVelocity, Y\n\n;\n; Sets enemy attributes to defaults, restores X, and exits\n;\n; Input\n;   Y = enemy index\n; Output\n;   X = enemy index\n;\nRenderSprite_Tryclyde_ResetAttributes:\n\tTYA\n\tTAX\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nRenderSprite_Tryclyde_Exit:\n\tRTS\n\n\nEnemyInit_Cobrats:\n\tJSR EnemyInit_Basic\n\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$08\n\tSTA EnemyVariable, X\n\tRTS\n\n\n;\n; Cobrat (Ground)\n; ===============\n;\n; Bobs up and down until the player gets close, then jumps up, chases, and shoots bullets\n;\n; EnemyVariable = target y-position\n; EnemyArray_480 = flag that gets enabled when the player gets close\n; EnemyArray_477 = counter used to determine bobbing direction\n; ObjectAnimationTimer = counter used to determine how quickly Cobrat turns\n; EnemyArray_453 = counter used to determine when to fire a bullet\n;\nEnemyBehavior_CobratGround:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyArray_480, X\n\tBNE EnemyBehavior_CobratGround_Jump\n\n\tSTA ObjectXVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$40\n\tCMP #$80\n\tBCS EnemyBehavior_CobratGround_Bob\n\n\tINC EnemyArray_480, X\n\tLDA #$C0\n\tSTA ObjectYVelocity, X\n\tBNE EnemyBehavior_CobratGround_Jump\n\nEnemyBehavior_CobratGround_Bob:\n\tINC EnemyArray_477, X\n\tLDY #$FC\n\tLDA EnemyArray_477, X\n\tAND #$20\n\tBEQ EnemyBehavior_CobratGround_BobMovement\n\n\tLDY #$04\n\nEnemyBehavior_CobratGround_BobMovement:\n\tSTY ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\n\tLDA #ObjAttrib_16x32 | ObjAttrib_BehindBackground | ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tJMP RenderSprite\n\nEnemyBehavior_CobratGround_Jump:\n\tLDA ObjectYVelocity, X\n\tBMI EnemyBehavior_CobratGround_Movement\n\n\tLDA EnemyVariable, X\n\tSEC\n\tSBC #$18\n\tCMP ObjectYLo, X\n\tBCS EnemyBehavior_CobratGround_Movement\n\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\nEnemyBehavior_CobratGround_Movement:\n\tJSR ApplyObjectMovement\n\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tPHA\n\tAND #$3F\n\tBNE EnemyBehavior_CobratGround_AfterBasicMovement\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nEnemyBehavior_CobratGround_AfterBasicMovement:\n\tPLA\n\tBNE EnemyBehavior_CobratGround_CheckCollision\n\n\tLDA #$18\n\tSTA EnemyArray_453, X\n\nEnemyBehavior_CobratGround_CheckCollision:\n\tLDA EnemyCollision, X\n\tAND #$03\n\tBEQ EnemyBehavior_CobratGround_SetAttributes\n\n\tJSR EnemyBehavior_TurnAround\n\nEnemyBehavior_CobratGround_SetAttributes:\n\tLDA #ObjAttrib_16x32 | ObjAttrib_Palette1\n\tLDY ObjectYVelocity, X\n\tBPL EnemyBehavior_CobratGround_Shoot\n\n\tLDA #ObjAttrib_16x32 | ObjAttrib_BehindBackground | ObjAttrib_Palette1\n\nEnemyBehavior_CobratGround_Shoot:\n\tJMP EnemyBehavior_CobratJar_Shoot\n\n\n;\n; Cobrat (Jar)\n; ============\n;\n; Bobs up and down, then occasionally jumps up to shoot a bullet at the player\n;\n; EnemyVariable = target y-position\n; EnemyArray_B1 = flag that gets set when the Cobrat jumps\n; byte_RAM_10 = counter used to determine when to jump and fire\n; EnemyArray_453 = counter used to determine when to fire a bullet\n;\nEnemyBehavior_CobratJar:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Up\n\tBEQ EnemyBehavior_CobratJar_Uncorked\n\nEnemyBehavior_CobratJar_Corked:\n\tLDA EnemyVariable, X\n\tSTA ObjectYLo, X\n\tRTS\n\nEnemyBehavior_CobratJar_Uncorked:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\n\tLDA EnemyArray_B1, X\n\tBNE EnemyBehavior_CobratJar_Jump\n\n\tLDA EnemyTimer, X\n\tBNE EnemyBehavior_CobratJar_Bob\n\n\tLDA #$D0\n\tSTA ObjectYVelocity, X\n\tINC EnemyArray_B1, X\n\tJMP EnemyBehavior_CobratJar_Movement\n\nEnemyBehavior_CobratJar_Bob:\n\tLDY #$FC\n\tLDA byte_RAM_10\n\tAND #$20\n\tBEQ EnemyBehavior_CobratJar_BobMovement\n\n\tLDY #$04\n\nEnemyBehavior_CobratJar_BobMovement:\n\tSTY ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\n\tJMP EnemyBehavior_CobratJar_SetAttributes\n\nEnemyBehavior_CobratJar_Jump:\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectYVelocity, X\n\tBMI EnemyBehavior_CobratJar_Movement\n\n\tBNE EnemyBehavior_CobratJar_CheckLanding\n\n\tLDA #$10\n\tSTA EnemyArray_453, X\n\nEnemyBehavior_CobratJar_CheckLanding:\n\tLDA ObjectYVelocity, X\n\tBMI EnemyBehavior_CobratJar_CheckReset\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_CobratJar_CheckReset\n\n\tLDA byte_RAM_E\n\tSEC\n\tSBC #$6F\n\tCMP #$06\n\tBCC EnemyBehavior_CobratJar_CheckReset\n\nEnemyBehavior_CobratJar_Blocked:\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tLDA #DPCM_BossHurt\n\tSTA DPCMQueue\n\nEnemyBehavior_CobratJar_CheckReset:\n\tLDA EnemyVariable, X\n\tCMP ObjectYLo, X\n\tBCS EnemyBehavior_CobratJar_Movement\n\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tLDA #$A0\n\tSTA EnemyTimer, X\n\nEnemyBehavior_CobratJar_Movement:\n\tJSR ApplyObjectMovement_Vertical\n\nEnemyBehavior_CobratJar_SetAttributes:\n\tLDA #ObjAttrib_16x32 | ObjAttrib_BehindBackground | ObjAttrib_Palette1\n\nEnemyBehavior_CobratJar_Shoot:\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_453, X\n\tBEQ EnemyBehavior_CobratJar_Render\n\n\tCMP #$05\n\tBNE EnemyBehavior_CobratJar_RenderShot\n\n\tJSR CreateBullet\n\nEnemyBehavior_CobratJar_RenderShot:\n\tLDA #$64 ; firing bullet\n\tJMP RenderSprite_DrawObject\n\nEnemyBehavior_CobratJar_Render:\n\tJMP RenderSprite\n\n\nEnemyInit_Pokey:\n\tJSR EnemyInit_Basic\n\n\tLDA #$03\n\tSTA EnemyVariable, X\n\tRTS\n\n; ---------------------------------------------------------------------------\nunk_BANK3_AA1C:\n\t.db $02\n\t.db $04\n\t.db $0D\n\t.db $0E\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Pokey:\n\tLDA EnemyVariable, X\n\tBNE loc_BANK3_AA2D\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\nloc_BANK3_AA2D:\n\tLDA EnemyCollision, X\n\tAND #$10\n\tBEQ loc_BANK3_AA3A\n\n\tJSR sub_BANK3_AA3E\n\n\tINC EnemyArray_42F, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_AA3A:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK3_AA99\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_AA3E:\n\tLDA EnemyVariable, X\n\tBEQ loc_BANK3_AA99\n\n\tSTA EnemyArray_477, X\n\tLDA #$00\n\tSTA EnemyVariable, X\n\tLDA #$02\n\tSTA EnemyArray_489, X\n\tLDA unk_RAM_441, X\n\tSTA byte_RAM_6\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_AA99\n\n\tLDY byte_RAM_0\n\tLDA #Enemy_Pokey\n\tSTA ObjectType, Y\n\tJSR RenderSprite_Tryclyde_ResetAttributes\n\n\tLDY byte_RAM_0\n\tLDA byte_RAM_6\n\tSTA unk_RAM_441, Y\n\tLDA EnemyArray_477, X\n\tSEC\n\tSBC #$01\n\tSTA EnemyVariable, Y\n\tTAY\n\nloc_BANK3_AA78:\n\tLDA unk_BANK3_AA1C, Y\n\tLDY byte_RAM_0\n\tSTA EnemyArray_489, Y\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA ObjectYHi, Y\n\nloc_BANK3_AA99:\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$3F\n\tBNE loc_BANK3_AAA4\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK3_AAA4:\n\tJSR ApplyObjectPhysicsX\n\n\tJMP RenderSprite\n\n; End of function sub_BANK3_AA3E\n\n\nPokeyWiggleOffset:\n\t.db $00\n\t.db $01\n\t.db $00\n\t.db $FF\n\t.db $00\n\t.db $01\n\t.db $00\n\n\nRenderSprite_Pokey:\n\tLDY #$00\n\tLDA byte_RAM_EE\n\tBNE RenderSprite_Pokey_Segments\n\n\tLDA byte_RAM_10\n\tAND #$18\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\nRenderSprite_Pokey_Segments:\n\tSTY byte_RAM_7\n\tLDA SpriteTempScreenX\n\tSTA PokeyTempScreenX\n\tCLC\n\tADC PokeyWiggleOffset, Y\n\tSTA SpriteTempScreenX\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA EnemyVariable, X\n\tSTA byte_RAM_9\n\tBEQ RenderSprite_Pokey_Exit\n\n\tTYA\n\tCLC\n\tADC #$10\n\tTAY\n\tLDX byte_RAM_7\n\tLDA PokeyTempScreenX\n\tADC PokeyWiggleOffset + 1, X\n\tSTA byte_RAM_1\n\tLDX #$70\n\tJSR SetSpriteTiles\n\n\tDEC byte_RAM_9\n\tBEQ RenderSprite_Pokey_Exit\n\n\tJSR FindSpriteSlot\n\n\tLDX byte_RAM_7\n\tLDA PokeyTempScreenX\n\tCLC\n\tADC PokeyWiggleOffset + 2, X\n\tSTA byte_RAM_1\n\tLDX #$70\n\tJSR SetSpriteTiles\n\n\tDEC byte_RAM_9\n\tBEQ RenderSprite_Pokey_Exit\n\n\tLDX byte_RAM_7\n\tLDA PokeyTempScreenX\n\tCLC\n\tADC PokeyWiggleOffset + 3, X\n\tSTA byte_RAM_1\n\tLDX #$70\n\tJSR SetSpriteTiles\n\nRenderSprite_Pokey_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\nEnemyBehavior_Rocket:\n\tLDA EnemyArray_B1, X\n\tBNE EnemyBehavior_Rocket_Flying\n\tJMP EnemyBehavior_Rocket_Launching\n\nEnemyBehavior_Rocket_Flying:\n\tLDY #$03\n\tLDA ObjectYVelocity, X\n\tBEQ EnemyBehavior_Rocket_Slow\n\n\tCMP #$FD\n\tBCC EnemyBehavior_Rocket_Fast\n\nEnemyBehavior_Rocket_Slow:\n\tLDY #$3F\n\tINC SpriteTempScreenX\n\tLDA byte_RAM_10\n\tAND #$02\n\tBNE EnemyBehavior_Rocket_Fast\n\n\tDEC SpriteTempScreenX\n\tDEC SpriteTempScreenX\n\nEnemyBehavior_Rocket_Fast:\n\tTYA\n\tAND byte_RAM_10\n\tBNE EnemyBehavior_Rocket_ApplyPhysics\n\n\tDEC ObjectYVelocity, X\n\nEnemyBehavior_Rocket_ApplyPhysics:\n\tJSR ApplyObjectPhysicsY\n\n\tLDA EnemyArray_477, X\n\tBNE EnemyBehavior_Rocket_DroppingOff\n\n\tLDY ObjectYHi, X\n\tBPL EnemyBehavior_Rocket_Render\n\n\tJSR DoAreaReset\n\n\tLDA #Enemy_Rocket\n\tSTA ObjectCarriedOver\n\tINC DoAreaTransition\n\tLDA #TransitionType_Rocket\n\tSTA TransitionType\n\tLDA #$00\n\tSTA_abs PlayerState\n\n\tRTS\n\nEnemyBehavior_Rocket_DroppingOff:\n\tLDA ObjectYLo, X\n\tCMP #$30\n\tBCS EnemyBehavior_Rocket_Render\n\n\tLDY PlayerInRocket\n\tBNE EnemyBehavior_Rocket_DropPlayer\n\n\tCMP #$18\n\tBCS EnemyBehavior_Rocket_Render\n\n\tJMP EnemyBehavior_Bomb_Explode\n\nEnemyBehavior_Rocket_DropPlayer:\n\tLDA #$00\n\tSTA PlayerInRocket\n\tSTA HoldingItem\n\tSTA PlayerXVelocity\n\tLDA ObjectYLo, X\n\tADC #$20\n\tSTA PlayerYLo\n\tSTA PlayerScreenYLo\n\nEnemyBehavior_Rocket_Render:\n\tJSR RenderSprite_Rocket\n\n\tLDA SpriteTempScreenX\n\tSEC\n\tSBC #$04\n\tSTA SpriteDMAArea + $93\n\tADC #$07\n\tSTA SpriteDMAArea + $97\n\tADC #$08\n\tSTA SpriteDMAArea + $9B\n\n\tLDA #$20 ; long trail\n\tLDY ObjectYVelocity, X\n\tCPY #$FD\n\tBMI EnemyBehavior_Rocket_RenderTrails\n\n\tLDA #$15 ; short trail\n\nEnemyBehavior_Rocket_RenderTrails:\n\tADC SpriteTempScreenY\n\tSTA SpriteDMAArea + $90\n\tSTA SpriteDMAArea + $94\n\tSTA SpriteDMAArea + $98\n\tLDA #$8C\n\tSTA SpriteDMAArea + $91\n\tSTA SpriteDMAArea + $95\n\tSTA SpriteDMAArea + $99\n\tLDA byte_RAM_10\n\tLSR A\n\tAND #$03\n\tSTA byte_RAM_0\n\tLSR A\n\tROR A\n\tROR A\n\tAND #$C0\n\tORA byte_RAM_0\n\tSTA SpriteDMAArea + $92\n\tSTA SpriteDMAArea + $96\n\tSTA SpriteDMAArea + $9A\n\tRTS\n\nEnemyBehavior_Rocket_Launching:\n\t; Wait until ObjectBeingCarriedTimer reaches 1 to start the boosters\n\tLDA ObjectBeingCarriedTimer, X\n\tCMP #$01\n\tBNE EnemyBehavior_Rocket_Carry\n\n\t; Setting EnemyArray_B1 puts the rocket in the area\n\tSTA EnemyArray_B1, X\n\tSTA PlayerInRocket\n\tLDA #SoundEffect3_Rumble_A\n\tSTA SoundEffectQueue3\n\tLDA #$FE\n\tSTA ObjectYVelocity, X\n\nEnemyBehavior_Rocket_Carry:\n\tJSR CarryObject\n\nRenderSprite_Rocket:\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDA SpriteTempScreenX\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_1\n\tLDA #$02\n\tSTA byte_RAM_2\n\tSTA byte_RAM_5\n\tSTA byte_RAM_C\n\tLDA ObjectAttributes, X\n\tAND #$23\n\tSTA byte_RAM_3\n\tLDY #$00\n\tLDX #$96\n\tJSR loc_BANK2_9C53\n\n\tLDA byte_RAM_1\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_1\n\tDEC byte_RAM_2\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDY #$10\n\tLDX #$96\n\tJMP loc_BANK2_9C53\n\n\n; ---------------------------------------------------------------------------\nbyte_BANK3_AC25:\n\t.db $F0\n\nbyte_BANK3_AC26:\n\t.db $00\n\t.db $F0\n\n\n; =============== S U B R O U T I N E =======================================\n\nRenderSprite_Fryguy:\n\tLDA #$00\n\tSTA byte_RAM_EE\n\tLDA ObjectAnimationTimer, X\n\tAND #$08\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_7\n\tLDY byte_RAM_7\n\tLDA SpriteTempScreenX\n\tPHA\n\tCLC\n\tADC byte_BANK3_AC25, Y\n\tSTA SpriteTempScreenX\n\tLDA #$80\n\tLDY EnemyArray_45C, X\n\tBEQ loc_BANK3_AC4B\n\n\tLDA #$88\n\nloc_BANK3_AC4B:\n\tJSR RenderSprite_DrawObject\n\n\tJSR FindSpriteSlot\n\n\tSTY_abs byte_RAM_F4\n\tPLA\n\tCLC\n\tLDY byte_RAM_7\n\tADC byte_BANK3_AC26, Y\n\tSTA SpriteTempScreenX\n\tLDA #$84\n\tLDY EnemyArray_45C, X\n\tBEQ loc_BANK3_AC67\n\n\tLDA #$8C\n\nloc_BANK3_AC67:\n\tJMP RenderSprite_DrawObject\n\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_Fryguy:\n\tJSR EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$02\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$04\n\tSTA EnemyHP, X\n\tLDA #$00\n\tSTA EnemyVariable, X\n\tRTS\n\n; ---------------------------------------------------------------------------\nbyte_BANK3_AC77:\n\t.db $E0\n\t.db $20\n\t.db $F0\n\t.db $10\n\nbyte_BANK3_AC7B:\n\t.db $04\n\t.db $0C\n\t.db $04\n\t.db $0C\n\nbyte_BANK3_AC7F:\n\t.db $04\n\t.db $04\n\t.db $0C\n\t.db $0C\n\nbyte_BANK3_AC83:\n\t.db $01\n\t.db $FF\n\nbyte_BANK3_AC85:\n\t.db $2A\n\t.db $D6\n\nbyte_BANK3_AC87:\n\t.db $01\n\t.db $FF\n\nbyte_BANK3_AC89:\n\t.db $18\n\t.db $E8\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Fryguy:\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tINC ObjectAnimationTimer, X\n\tLDY EnemyHP, X\n\tDEY\n\tBNE loc_BANK3_ACE7\n\n\tLDA #$03\n\tSTA byte_RAM_9\n\tSTA FryguySplitFlames\n\tJSR EnemyDestroy\n\nloc_BANK3_ACA1:\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_ACE3\n\n\tLDY byte_RAM_0\n\tLDA ObjectYHi, X\n\tSTA unk_RAM_4EF, Y\n\tLDA #$F0\n\tSTA ObjectYVelocity, Y\n\tLDA #Enemy_FryguySplit\n\tSTA ObjectType, Y\n\tLDA #$30\n\tSTA EnemyArray_453, Y\n\tLDA ObjectYLo, X\n\tPHA\n\tLDX byte_RAM_9\n\tLDA byte_BANK3_AC77, X\n\tSTA ObjectXVelocity, Y\n\tLDA SpriteTempScreenX\n\tADC byte_BANK3_AC7B, X\n\tSTA ObjectXLo, Y\n\tPLA\n\tADC byte_BANK3_AC7F, X\n\tSTA ObjectYLo, Y\n\tLDA #$00\n\tSTA ObjectXHi, Y\n\tTYA\n\tTAX\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK3_ACE3:\n\tDEC byte_RAM_9\n\tBPL loc_BANK3_ACA1\n\nloc_BANK3_ACE7:\n\tLDA byte_RAM_10\n\tAND #$1F\n\tBNE loc_BANK3_AD07\n\n\tJSR CreateEnemy\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Fireball\n\tSTA ObjectType, X\n\tLDA ObjectXLo, X\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectYLo, X\n\tADC #$18\n\tSTA ObjectYLo, X\n\tJSR EnemyInit_BasicAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK3_AD07:\n\tLDA byte_RAM_10\n\tAND #$01\n\tBNE loc_BANK3_AD37\n\n\tLDA EnemyVariable, X\n\tAND #$01\n\tTAY\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC byte_BANK3_AC87, Y\n\tSTA ObjectYVelocity, X\n\tCMP byte_BANK3_AC89, Y\n\tBNE loc_BANK3_AD21\n\n\tINC EnemyVariable, X\n\nloc_BANK3_AD21:\n\tLDA EnemyArray_477, X\n\tAND #$01\n\tTAY\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC byte_BANK3_AC83, Y\n\tSTA ObjectXVelocity, X\n\tCMP byte_BANK3_AC85, Y\n\tBNE loc_BANK3_AD37\n\n\tINC EnemyArray_477, X\n\nloc_BANK3_AD37:\n\tJSR RenderSprite_Fryguy\n\n\tJSR ApplyObjectPhysicsY\n\n\tJMP ApplyObjectPhysicsX\n\n; ---------------------------------------------------------------------------\nunk_BANK3_AD40:\n\t.db $3F\n\t.db $3F\n\t.db $3F\n\t.db $7F\nunk_BANK3_AD44:\n\t.db $D4\n\t.db $D8\n\t.db $DA\n\t.db $DE\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_FryguySplit:\n\tLDA EnemyCollision, X\n\tAND #$10\n\tBEQ loc_BANK3_AD59\n\n\tJSR PlayBossHurtSound\n\n\tLDA #%00000000\n\tSTA EnemyArray_46E, X\n\tJMP TurnIntoPuffOfSmoke\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_AD59:\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tLDA byte_RAM_10\n\tSTA ObjectShakeTimer, X\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tJSR ObjectTileCollision\n\n\tJSR RenderSprite\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_AD7A\n\n\tJSR ResetObjectYVelocity\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_AD7A:\n\tPLA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_AD85\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK3_AD85:\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tLDY FryguySplitFlames\n\tAND unk_BANK3_AD40, Y\n\tORA ObjectYVelocity, X\n\tBNE loc_BANK3_ADAB\n\n\tLDA PseudoRNGValues + 2\n\tAND #$1F\n\tORA unk_BANK3_AD44, Y\n\tSTA ObjectYVelocity, X\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\n\tLDA FryguySplitFlames\n\tCMP #$02\n\tBCS loc_BANK3_ADAB\n\n\tASL ObjectXVelocity, X\n\nloc_BANK3_ADAB:\nIFDEF REV_A\n\tLDA PlayerState\n\tCMP #PlayerState_ChangingSize\n\tBEQ +\nENDIF\n\n\tJSR ApplyObjectPhysicsX\n\n\tJMP ApplyObjectMovement_Vertical\n\nIFDEF REV_A\n\t+ RTS\nENDIF\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Autobomb:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_ADF9\n\n\tLDA EnemyCollision, X\n\tAND #$10\n\tORA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK3_ADF9\n\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA unk_RAM_441, X\n\tSTA byte_RAM_6\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_ADF9\n\n\tLDY byte_RAM_0\n\tLDA byte_RAM_6\n\tSTA unk_RAM_441, Y\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDX byte_RAM_0\n\tLDA #Enemy_Autobomb\n\tSTA ObjectType, X\n\tJSR EnemyInit_BasicAttributes\n\n\tINC EnemyArray_B1, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$04\n\tSTA EnemyArray_489, X\n\tLDX byte_RAM_12\n\nloc_BANK3_ADF9:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_AE09\n\n\tJSR ResetObjectYVelocity\n\nloc_BANK3_AE09:\n\tPLA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_AE14\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR ApplyObjectPhysicsX\n\nloc_BANK3_AE14:\n\tINC ObjectAnimationTimer, X\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_AE45\n\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tAND #$7F\n\tBNE loc_BANK3_AE28\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK3_AE28:\n\tLDA ObjectAnimationTimer, X\n\tAND #%01111111\n\tBNE loc_BANK3_AE45\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\n\t; which bullet?\n\tJSR CreateBullet\n\n\tBMI loc_BANK3_AE45\n\n\tLDX byte_RAM_0 ; X has the new enemy index\n\tLDA #Enemy_AutobombFire\n\t; Set the enemy type and attributes\n\t; BUG: The subroutine overwrites RAM_0 (enemy index)\n\t; Should have pushed it to stack instead.\n\tJSR EnemyBehavior_SpitProjectile\n\n\tLDX byte_RAM_0\n\tDEC ObjectYLo, X\n\tDEC ObjectYLo, X\n\tLDX byte_RAM_12\n\nloc_BANK3_AE45:\n\tJSR ApplyObjectMovement\n\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nRenderSprite_Autobomb:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBEQ loc_BANK3_AE5C\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_16x32 | ObjAttrib_UpsideDown\n\tSTA ObjectAttributes, X\n\tSTA ObjectAnimationTimer, X\n\tLDA #$76\n\tJMP RenderSprite_DrawObject\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_AE5C:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_AE7C\n\n\tLDA_abs byte_RAM_F4\n\tPHA\n\tLDA SpriteTempScreenY\n\tCLC\n\tADC #$F5\n\tSTA SpriteTempScreenY\n\tJSR FindSpriteSlot\n\n\tSTY_abs byte_RAM_F4\n\tLDA #$7C\n\tJSR RenderSprite_DrawObject\n\n\tPLA\n\tSTA_abs byte_RAM_F4\n\nloc_BANK3_AE7C:\n\tLDA ObjectYLo, X\n\tSTA SpriteTempScreenY\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tTYA\n\tCLC\n\tADC #$08\n\tSTA_abs byte_RAM_F4\n\tLDA byte_RAM_0\n\tSTA SpriteTempScreenY\n\tLDA #%11010000\n\tSTA EnemyArray_46E, X\n\tLDA #$78\n\tJSR RenderSprite_DrawObject\n\n\tLDA #$50\n\tLDY EnemyArray_B1, X\n\tBEQ loc_BANK3_AEA6\n\n\tLDA #%01010010\n\nloc_BANK3_AEA6:\n\tSTA EnemyArray_46E, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_WhaleSpout:\n\tJSR EnemyInit_Basic\n\n\tLDA ObjectYLo, X\n\tSTA EnemyArray_B1, X\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_WhaleSpout:\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tINC EnemyVariable, X\n\tLDA EnemyVariable, X\n\tCMP #$40\n\tBCS loc_BANK3_AEC3\n\n\tLDA #$E0\n\tSTA ObjectYLo, X\n\nlocret_BANK3_AEC2:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_AEC3:\n\tBNE loc_BANK3_AECD\n\n\tLDA #$D0\n\tSTA ObjectYVelocity, X\n\tLDA EnemyArray_B1, X\n\tSTA ObjectYLo, X\n\nloc_BANK3_AECD:\n\tLDA #SoundEffect3_ShortNoise\n\tSTA SoundEffectQueue3\n\tLDA EnemyVariable, X\n\tCMP #$80\n\tBCC loc_BANK3_AEE6\n\n\tCMP #$DC\n\tBCS loc_BANK3_AEE6\n\n\tLDY #$03\n\tAND #$10\n\tBEQ loc_BANK3_AEE4\n\n\tLDY #$FB\n\nloc_BANK3_AEE4:\n\tSTY ObjectYVelocity, X\n\nloc_BANK3_AEE6:\n\tINC ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\nRenderSprite_WhaleSpout:\n\tLDA byte_RAM_EE\n\tAND #$C\n\tBNE locret_BANK3_AEC2\n\n\tLDA EnemyVariable, X\n\tSTA byte_RAM_7\n\tLDA #$29\n\tSTA ObjectAttributes, X\n\tLDA #$92\n\tLDY EnemyVariable, X\n\tCPY #$DC\n\tBCC loc_BANK3_AF03\n\n\tLDA #$94\n\nloc_BANK3_AF03:\n\tJSR RenderSprite_DrawObject\n\n\tJSR FindSpriteSlot\n\n\tLDA #$55\n\tLDX byte_RAM_7\n\tCPX #$E0\n\tBCC loc_BANK3_AF13\n\n\tLDA #$3A\n\nloc_BANK3_AF13:\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$55\n\tCPX #$E8\n\tBCC loc_BANK3_AF1E\n\n\tLDA #$3A\n\nloc_BANK3_AF1E:\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$55\n\tCPX #$F0\n\tBCC loc_BANK3_AF29\n\n\tLDA #$3A\n\nloc_BANK3_AF29:\n\tSTA SpriteDMAArea + 9, Y\n\tLDA #$55\n\tCPX #$F8\n\tBCC loc_BANK3_AF34\n\n\tLDA #$3A\n\nloc_BANK3_AF34:\n\tSTA SpriteDMAArea + $D, Y\n\tLDX_abs byte_RAM_F4\n\tLDA SpriteDMAArea + 2, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tSTA SpriteDMAArea + $E, Y\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$04\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $B, Y\n\tSTA SpriteDMAArea + $F, Y\n\tLDX byte_RAM_12\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$F\n\tSTA SpriteDMAArea, Y\n\tADC #$10\n\tSTA SpriteDMAArea + 4, Y\n\tADC #$10\n\tSTA SpriteDMAArea + 8, Y\n\tADC #$10\n\tSTA SpriteDMAArea + $C, Y\n\nlocret_BANK3_AF74:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\t.db $1C\nbyte_BANK3_AF76:\n\t.db $E4\n\n\t.db $01\n\t.db $FF\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_Flurry:\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_AF8D\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK3_AF8D:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_AFB4\n\n\tLDA ObjectYVelocity, X\n\tPHA\n\tJSR ResetObjectYVelocity\n\n\tPLA\n\tLDY EnemyArray_42F, X\n\tBEQ loc_BANK3_AFB4\n\n\tCMP #$18\n\tBMI loc_BANK3_AFAC\n\n\tJSR HalfObjectVelocityX\n\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\tBNE loc_BANK3_AFDA\n\nloc_BANK3_AFAC:\n\tLDA #$00\n\tSTA EnemyArray_42F, X\n\tJSR SetEnemyAttributes\n\nloc_BANK3_AFB4:\n\tLDA byte_RAM_E\n\tCMP #$16\n\tBEQ loc_BANK3_AFBF\n\n\tDEC ObjectAnimationTimer, X\n\tJMP loc_BANK2_9470\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_AFBF:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\tLDA byte_RAM_10\n\tAND #$01\n\tBNE loc_BANK3_AFDA\n\n\tLDA ObjectXVelocity, X\n\tCMP locret_BANK3_AF74, Y\n\tBEQ loc_BANK3_AFDA\n\n\tCLC\n\tADC byte_BANK3_AF76, Y\n\tSTA ObjectXVelocity, X\n\tINC ObjectAnimationTimer, X\n\nloc_BANK3_AFDA:\n\tJSR ApplyObjectMovement\n\n\tINC unk_RAM_4A4, X\n\tJMP RenderSprite\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_HawkmouthBoss:\n\tJSR EnemyInit_Hawkmouth ; Falls through to EnemyInit_Stationary\n\n\tLDA #$03\n\tSTA EnemyHP, X\n\tRTS\n\n; ---------------------------------------------------------------------------\nbyte_BANK3_AFEC:\n\t.db $01\n\t.db $FF\nbyte_BANK3_AFEE:\n\t.db $28\n\t.db $D8\nbyte_BANK3_AFF0:\n\t.db $01\n\t.db $FF\nbyte_BANK3_AFF2:\n\t.db $10\n\t.db $F0\n; ---------------------------------------------------------------------------\n\nEnemyBehavior_HawkmouthBoss:\n\tJSR RenderSprite_HawkmouthBoss\n\n\tLDA #%00000110\n\tSTA EnemyArray_46E, X\n\tLDA #$02\n\tSTA byte_RAM_71FE\n\tLDA CrystalAndHawkmouthOpenSize\n\tBEQ locret_BANK3_B05F\n\n\tCMP #$01\n\tBNE loc_BANK3_B01C\n\n\tSTA EnemyArray_480, X\n\tLDA #$90\n\tSTA EnemyTimer, X\n\tLDA #$40\n\tSTA EnemyArray_438, X\n\tSTA EnemyArray_45C, X\n\tSTA CrystalAndHawkmouthOpenSize\n\nloc_BANK3_B01C:\n\tLDA EnemyArray_480, X\n\tCMP #$02\n\tBCC loc_BANK3_B09B\n\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_B03B\n\n\tINC EnemyArray_480, X\n\tLDA EnemyArray_480, X\n\tCMP #$31\n\tBNE HawkmouthEat\n\n\tLDA EnemyArray_453, X\n\tBNE loc_BANK3_B03B\n\n\tINC EnemyArray_B1, X\n\tJSR sub_BANK3_B095\n\nloc_BANK3_B03B:\n\tDEC EnemyArray_480, X\n\tLDY EnemyArray_480, X\n\tDEY\n\tBNE HawkmouthEat\n\n\tDEC EnemyArray_B1, X\n\tLDA PlayerState\n\tCMP #PlayerState_HawkmouthEating\n\tBNE HawkmouthEat\n\n\tLDA #TransitionType_Door\n\tSTA TransitionType\n\tJSR DoAreaReset\n\n\tLDA #$09\n\tSTA PlayerXHi\n\tINC DoAreaTransition\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\nlocret_BANK3_B05F:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nHawkmouthEat:\n\tLDA EnemyArray_480, X ; Hawkmouth code?\n\tCMP #$30\n\tBNE locret_BANK3_B09A\n\n\tLDA EnemyCollision, X ; make sure the player is inside Hawkmouth\n\tAND #CollisionFlags_PlayerInsideMaybe\n\tBEQ locret_BANK3_B09A\n\n\tLDA HoldingItem ; make sure player is not holding something\n\tBNE locret_BANK3_B09A\n\n\tSTA PlayerCollision ; start eating player\n\tINC EnemyArray_B1, X\n\tINC HawkmouthClosing\n\tDEC EnemyArray_480, X\n\tLDA ObjectXLo, X\n\tSTA PlayerXLo\n\tLDA ObjectXHi, X\n\tSTA PlayerXHi\n\tLDA ObjectYLo, X\n\tADC #$10\n\tSTA PlayerYLo\n\tLDA #PlayerState_HawkmouthEating\n\tSTA PlayerState\n\tLDA #$60\n\tSTA PlayerStateTimer\n\tLDA #$FC\n\tSTA PlayerYVelocity\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_B095:\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\nlocret_BANK3_B09A:\n\tRTS\n\n; End of function sub_BANK3_B095\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B09B:\n\tLDA #%00000011\n\tSTA EnemyArray_46E, X\n\tLDA #$00\n\tSTA byte_RAM_71FE\n\tLDA EnemyHP, X\n\tBNE loc_BANK3_B0BA\n\n\tLDA #$03 ; Hawkmouth Boss health?\n\tSTA EnemyHP, X\n\tJSR sub_BANK3_B095\n\n\tINC EnemyArray_480, X\n\tLDA #$FF\n\tSTA EnemyArray_453, X\n\nloc_BANK3_B0BA:\n\tLDA byte_RAM_10\n\tLSR A\n\tBCC loc_BANK3_B0E3\n\n\tLDA EnemyVariable, X\n\tAND #$01\n\tTAY\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC byte_BANK3_AFF0, Y\n\tSTA ObjectYVelocity, X\n\tCMP byte_BANK3_AFF2, Y\n\tBNE loc_BANK3_B0D3\n\n\tINC EnemyVariable, X\n\nloc_BANK3_B0D3:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA ObjectXVelocity, X\n\tCMP byte_BANK3_AFEE, Y\n\tBEQ loc_BANK3_B0E3\n\n\tCLC\n\tADC byte_BANK3_AFEC, Y\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_B0E3:\n\tJMP sub_BANK2_9430\n\n; ---------------------------------------------------------------------------\nbyte_BANK3_B0E6:\n\t.db $F8\n\t.db $10\n\n; =============== S U B R O U T I N E =======================================\n\nRenderSprite_HawkmouthBoss:\n\tLDA EnemyArray_480, X\n\tJSR sub_BANK2_8E13\n\n\tLDA CrystalAndHawkmouthOpenSize\n\tBEQ loc_BANK3_B16D\n\n\tLDA byte_RAM_EE\n\tAND #$0C\n\tBNE loc_BANK3_B16D\n\n\t; draw the back of Hawkmouth\n\tLDA EnemyTimer, X\n\tSTA byte_RAM_7\n\tJSR FindSpriteSlot\n\n\tLDX byte_RAM_2\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC byte_BANK3_B0E6 - 1, X\n\tPHA\n\tPHP\n\tDEX\n\tBEQ loc_BANK3_B112\n\n\tPLA\n\tEOR #$01\n\tPHA\n\nloc_BANK3_B112:\n\tPLP\n\tPLA\n\tBCC loc_BANK3_B16D\n\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $B, Y\n\tSTA SpriteDMAArea + $F, Y\n\tLDX DoorAnimationTimer\n\tBEQ loc_BANK3_B129\n\n\tLDX #$10\n\nloc_BANK3_B129:\n\tLDA SpriteDMAArea, X\n\tSTA SpriteDMAArea, Y\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + 4, Y\n\tLDA byte_RAM_7\n\tBEQ loc_BANK3_B13B\n\n\tLDA #$20\n\nloc_BANK3_B13B:\n\tORA SpriteDMAArea + 2, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tSTA SpriteDMAArea + $E, Y\n\tLDX_abs byte_RAM_F4\n\tLDA SpriteDMAArea, X\n\tSTA SpriteDMAArea + 8, Y\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + $C, Y\n\tLDA #$F0\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$F2\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$F4\n\tSTA SpriteDMAArea + 9, Y\n\tLDA #$F6\n\tSTA SpriteDMAArea + $D, Y\n\nloc_BANK3_B16D:\n\tLDX byte_RAM_12\n\tRTS\n\n\nVegetableThrowerOffsetX:\n\t.db $08\n\t.db $28\n\t.db $48\n\t.db $28\n\nVegetableThrowerOffsetY:\n\t.db $94\n\t.db $84\n\t.db $94\n\t.db $84\n\nVegetableThrowerVelocity:\n\t.db $F8\n\t.db $08\n\t.db $F8\n\t.db $08\n\t.db $08\n\t.db $F8\n\t.db $08\n\t.db $F8\n\n\nGenerator_VegetableThrower:\n\tLDA HoldingItem\n\tBNE locret_BANK3_B1CC\n\n\tLDA byte_RAM_10\n\tAND #$FF\n\tBNE locret_BANK3_B1CC\n\n\tINC VegetableThrowerShotCounter\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI locret_BANK3_B1CC\n\n\tLDX byte_RAM_0\n\tLDA VegetableThrowerShotCounter\n\tAND #$07\n\tTAY\n\tLDA VegetableThrowerVelocity, Y\n\tSTA ObjectXVelocity, X\n\tTYA\n\tAND #$03\n\tTAY\n\tLDA #$02\n\tSTA ObjectXHi, X\n\tLDA VegetableThrowerOffsetX, Y\n\tSTA ObjectXLo, X\n\tLDA VegetableThrowerOffsetY, Y\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA ObjectYHi, X\n\tLDA PseudoRNGValues + 2\n\tAND #$03\n\tCMP #$02\n\tBCC loc_BANK3_B1C1\n\n\tASL A\n\tSTA EnemyArray_B1, X\n\nloc_BANK3_B1C1:\n\tLDY #Enemy_VegetableLarge\n\tSTY ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$D0\n\tSTA ObjectYVelocity, X\n\nlocret_BANK3_B1CC:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyInit_Wart:\n\tJSR EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$04\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$06\n\tSTA EnemyHP, X\n\tLDA ObjectXHi, X\n\tSTA unk_RAM_4EF, X\n\tRTS\n\n\nWartBubbleYVelocity:\n\t.db $E0\n\t.db $F0\n\t.db $E8\n\t.db $E4\n\n\n;\n; Wart\n; ====\n;\n; Walks back and forth, spits bubbles\n;\n; EnemyTimer = counter used to determing the bubble spit distance\n; EnemyVariable = counter used to pause while walking back and forth\n; EnemyArray_480 = counter used to determine the bubble spit height\n; EnemyArray_B1 = counter for death animation\n; EnemyArray_477 = counter used for alternating steps\n; EnemyArray_45C = counter for blinking while hurt\n;\nEnemyBehavior_Wart:\n\tLDA EnemyArray_B1, X\n\tBNE EnemyBehavior_Wart_Death\n\n\tLDA EnemyHP, X\n\tBNE EnemyBehavior_Wart_Alive\n\n\t; start the death sequence\n\tLDA #$80\n\tSTA EnemyTimer, X\n\tSTA EnemyArray_B1, X\n\tBNE EnemyBehavior_Wart_Exit\n\nEnemyBehavior_Wart_Alive:\n\tINC EnemyVariable, X\n\tLDA byte_RAM_10\n\tAND #%11111111\n\tBNE EnemyBehavior_Wart_Movement\n\n\t; spit bubbles\n\tLDA #$5F\n\tSTA EnemyTimer, X\n\t; counter that determines which index of WartBubbleYVelocity to use\n\tINC EnemyArray_480, X\n\nEnemyBehavior_Wart_Movement:\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\n\t; pause at the end of movement\n\tLDA EnemyVariable, X\n\tAND #%01000000\n\tBEQ EnemyBehavior_Wart_PhysicsX\n\n\t; increment animation timer\n\tINC EnemyArray_477, X\n\tLDA #$F8 ; left movement\n\tLDY EnemyVariable, X\n\tBPL EnemyBehavior_Wart_SetXVelocity\n\n\tLDA #$08 ; right movement\n\nEnemyBehavior_Wart_SetXVelocity:\n\tSTA ObjectXVelocity, X\n\nEnemyBehavior_Wart_PhysicsX:\n\tJSR ApplyObjectPhysicsX\n\n\tLDA EnemyArray_45C, X\n\tBNE EnemyBehavior_Wart_Exit\n\n\tLDA EnemyTimer, X\n\tBEQ EnemyBehavior_Wart_Exit\n\n\tAND #$0F\n\tBNE EnemyBehavior_Wart_Exit\n\n\t; try to create a new enemy for the bubble\n\tJSR CreateEnemy\n\n\tBMI EnemyBehavior_Wart_Exit\n\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\t; determines how high to spit the bubble\n\tLDA EnemyArray_480, X\n\tAND #$03\n\tTAY\n\t; determines how far to spit the bubble\n\tLDA EnemyTimer, X\n\n\t; set up the bubble\n\tLDX byte_RAM_0\n\tLSR A\n\tEOR #$FF\n\tSTA ObjectXVelocity, X\n\tLDA WartBubbleYVelocity, Y\n\tSTA ObjectYVelocity, X\n\tLDA #Enemy_WartBubble\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tADC #$08\n\tSTA ObjectYLo, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nEnemyBehavior_Wart_Exit:\n\tJMP RenderSprite\n\n\nEnemyBehavior_Wart_Death:\n\tLDA EnemyTimer, X\n\tBEQ EnemyBehavior_Wart_DeathFall\n\n\t; going up\n\tSTA EnemyArray_45C, X\n\tINC EnemyArray_477, X\n\tINC EnemyArray_477, X\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\tBNE EnemyBehavior_Wart_Death_Exit\n\nEnemyBehavior_Wart_DeathFall:\n\tLDA #$04\n\tSTA ObjectXVelocity, X\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectPhysicsY\n\n\t; every other frame\n\tLDA byte_RAM_10\n\tLSR A\n\tBCS EnemyBehavior_Wart_CheckDeathComplete\n\n\tINC ObjectYVelocity, X\n\tBMI EnemyBehavior_Wart_CheckDeathComplete\n\n\tLDA byte_RAM_10\n\tAND #$1F\n\tBNE EnemyBehavior_Wart_CheckDeathComplete\n\n\tLDA #DPCM_BossDeath\n\tSTA DPCMQueue\n\tJSR CreateEnemy\n\n\tLDX byte_RAM_0\n\tLDA ObjectYLo, X\n\tADC #$08\n\tSTA ObjectYLo, X\n\tJSR TurnIntoPuffOfSmoke\n\nEnemyBehavior_Wart_CheckDeathComplete:\n\tLDA ObjectYLo, X\n\tCMP #$D0\n\tBCC EnemyBehavior_Wart_Death_Exit\n\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\nEnemyBehavior_Wart_Death_Exit:\n\tJMP RenderSprite\n\n\nEnemyBehavior_WartBubble:\n\tINC ObjectAnimationTimer, X\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectPhysicsY\n\n\tINC ObjectYVelocity, X\n\tJMP RenderSprite\n\nEnemyBehavior_WartBubble_Exit:\n\tRTS\n\n\nRenderSprite_Wart:\n\tLDA_abs byte_RAM_F4\n\tSTA byte_RAM_7267\n\tSTA byte_RAM_726B\n\tLDA byte_RAM_10\n\tAND #$03\n\tSTA byte_RAM_7\n\tTAY\n\tLDA unk_RAM_7265, Y\n\tSTA_abs byte_RAM_F4\n\tLDA byte_RAM_EF\n\tBNE EnemyBehavior_WartBubble_Exit\n\n\tLDY EnemyHP, X\n\tBNE RenderSprite_Wart_AfterObjAttrib\n\n\t; he dead\n\tLDA #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_16x32 | ObjAttrib_Palette2\n\tSTA ObjectAttributes, X\n\nRenderSprite_Wart_AfterObjAttrib:\n\tLDA byte_RAM_EE\n\tPHA\n\tPHA\n\tLDY #$AE ; top row: shocked\n\tLDA EnemyArray_B1, X ; death counter\n\tBNE RenderSprite_Wart_TopHurt\n\n\tLDA EnemyArray_45C, X ; enemy timer\n\tBEQ RenderSprite_Wart_TopRegular\n\n\tCMP #$30\n\tBCS RenderSprite_Wart_TopHurt\n\n\tAND #$08\n\tBNE RenderSprite_Wart_TopHurt\n\n\tLDY #$9E ; top row: blinking\n\nRenderSprite_Wart_TopHurt:\n\tTYA\n\tBNE RenderSprite_Wart_DrawTop\n\nRenderSprite_Wart_TopRegular:\n\tLDA #$9E ; top row: regular\n\tLDY EnemyTimer, X\n\tBEQ RenderSprite_Wart_DrawTop\n\n\tLDA #$A2 ; top row: spitting\n\nRenderSprite_Wart_DrawTop:\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_0\n\tSTA SpriteTempScreenY\n\tLDY byte_RAM_7\n\tLDA unk_RAM_7266, Y\n\tSTA_abs byte_RAM_F4\n\tLDY #$A6 ; middle row: regular\n\tLDA EnemyArray_B1, X\n\tBNE RenderSprite_Wart_MiddleHurt\n\n\tLDA EnemyArray_45C, X\n\tBEQ RenderSprite_Wart_MiddleRegular\n\n\tCMP #$30\n\tBCS RenderSprite_Wart_MiddleHurt\n\n\tAND #$08\n\tBNE RenderSprite_Wart_MiddleHurt\n\n\tBEQ RenderSprite_Wart_DrawMiddle\n\nRenderSprite_Wart_MiddleRegular:\n\tLDA EnemyTimer, X\n\tBEQ RenderSprite_Wart_DrawMiddle\n\nRenderSprite_Wart_MiddleHurt:\n\tLDY #$AA ; middle row: spitting\n\nRenderSprite_Wart_DrawMiddle:\n\tPLA\n\tSTA byte_RAM_EE\n\tTYA\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_0\n\tSTA SpriteTempScreenY\n\tLDY byte_RAM_7\n\tLDA byte_RAM_7267, Y\n\tSTA_abs byte_RAM_F4\n\tLDY #$BA ; bottom row: standing\n\tLDA ObjectXVelocity, X\n\tBEQ RenderSprite_Wart_DrawBottom\n\n\tLDY #$B2 ; bottom row: left foot up\n\tLDA EnemyArray_477, X\n\tAND #$10\n\tBEQ RenderSprite_Wart_DrawBottom\n\n\tLDY #$B6 ; bottom row: right foot up\n\nRenderSprite_Wart_DrawBottom:\n\tPLA\n\tSTA byte_RAM_EE\n\tTYA\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_EE\n\tBNE RenderSprite_Wart_Exit\n\n\t; draw backside\n\tLDY byte_RAM_7\n\tLDX byte_RAM_7267, Y\n\tLDA unk_RAM_7268, Y\n\tTAY\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$20\n\tBCS RenderSprite_Wart_Exit\n\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $B, Y\n\tLDA byte_RAM_0\n\tSBC #$2F\n\tSTA SpriteDMAArea, Y\n\tADC #$0F\n\tSTA SpriteDMAArea + 4, Y\n\tADC #$10\n\tSTA SpriteDMAArea + 8, Y\n\tLDA SpriteDMAArea + 2, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tLDA #$19 ; top\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$1B ; middle\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$1D ; bottom\n\tSTA SpriteDMAArea + 9, Y\n\nRenderSprite_Wart_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\n; Unused space in the original ($B39B - $B4DF)\nunusedSpace $B4E0, $FF\n\n\nbyte_BANK3_B4E0:\n\t.db $F0\n\t.db $10\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_B4E2:\n\tJSR ClearDirectionalCollisionFlags\n\n\tTAY\n\tLDA ObjectYVelocity - 1, X\n\tBMI loc_BANK3_B4EB\n\n\tINY\n\nloc_BANK3_B4EB:\n\tJSR sub_BANK3_BB5A\n\n\tBCS loc_BANK3_B4F7\n\n\tLDA byte_RAM_0\n\tCMP #$82\n\tBEQ loc_BANK3_B4F7\n\n\tCLC\n\nloc_BANK3_B4F7:\n\tDEX\n\tRTS\n\n; End of function sub_BANK3_B4E2\n\n\n;\n; Object/background collision that treats non-sky background tiles as solid,\n; such as for Sparks and Mushroom Blocks\n;\nObjectTileCollision_SolidBackground:\n\tLDA #$04\n\tBNE ObjectTileCollision_Main\n\n;\n; Normal object/background collision\n;\nObjectTileCollision:\n\tLDA #$00\n\n;\n; Object Tile Collision\n; =====================\n;\n; Handles object collision with background tiles\n;\n; Input\n;   A = whether or not to treat walk-through tiles as solid\n;   X = enemy index\n; Output\n;  EnemyCollision, X = collision flags\n;\nObjectTileCollision_Main:\n\tSTA byte_RAM_7\n\tLDA #$00\n\tSTA byte_RAM_B\n\tSTA byte_RAM_E\n\tJSR ClearDirectionalCollisionFlags\n\n\tSTA byte_RAM_8\n\tLDA ObjectYVelocity - 1, X\n\tBPL ObjectTileCollision_Downward\n\nObjectTileCollision_Upward:\n\tJSR CheckEnemyTileCollision\n\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tBNE loc_BANK3_B57B\n\nObjectTileCollision_Downward:\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tJSR CheckEnemyTileCollision\n\nObjectTileCollision_CheckQuicksand:\n\tLDA ObjectType - 1, X\n\tCMP #Enemy_CobratJar\n\tBEQ ObjectTileCollision_CheckConveyor\n\n\tCMP #Enemy_CobratSand\n\tBEQ ObjectTileCollision_CheckConveyor\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\tLDA byte_RAM_0\n\tSEC\n\tSBC #BackgroundTile_QuicksandSlow\n\tCMP #$02\n\tBCS ObjectTileCollision_CheckConveyor\nELSE\n\tLDY byte_RAM_0\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00001100\n\tCMP #%00001000\n\tBNE ObjectTileCollision_CheckConveyor\n\n\tLDA byte_RAM_0\n\tSEC\n\tSBC #BackgroundTile_QuicksandSlow\nENDIF\n\n\tASL A\n\tADC #$01\n\tSTA ObjectYVelocity - 1, X\n\tLDA #EnemyState_Sinking\n\tSTA EnemyState - 1, X\n\tLDA #$FF\n\tSTA EnemyTimer - 1, X\n\nObjectTileCollision_CheckConveyor:\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\tLDA byte_RAM_0\n\tSTA byte_RAM_E\n\n\tSEC\n\tSBC #BackgroundTile_ConveyorLeft\n\tCMP #$02\n\tBCS loc_BANK3_B57B\n\nELSE\n\tLDY byte_RAM_0\n\tSTY byte_RAM_E\n\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00001100\n\tCMP #%00001100\n\n\tBNE loc_BANK3_B57B\n\n\tTYA\n\tAND #%00000001\nENDIF\n\n\tLDY EnemyArray_438 - 1, X\n\tBNE loc_BANK3_B57B\n\n\tLDY ObjectType - 1, X\n\tCPY #Enemy_VegetableSmall\n\tBCC loc_BANK3_B56C\n\n\tTAY\n\tLDA ObjectYVelocity - 1, X\n\tCMP #$03\n\tBCS loc_BANK3_B57B\n\n\tLDA byte_RAM_D\n\tAND #$03\n\tBNE loc_BANK3_B57B\n\n\tLDA byte_BANK3_B4E0, Y\n\tSTA ObjectXVelocity - 1, X\n\tSTA byte_RAM_B\n\tBNE loc_BANK3_B57B\n\nloc_BANK3_B56C:\n\tLDY ObjectXVelocity - 1, X\n\tBEQ loc_BANK3_B579\n\n\tEOR EnemyMovementDirection - 1, X\n\tLSR A\n\tBCS loc_BANK3_B579\n\n\tDEC ObjectAnimationTimer - 1, X\n\tDEC ObjectAnimationTimer - 1, X\n\nloc_BANK3_B579:\n\tINC ObjectAnimationTimer - 1, X\n\nloc_BANK3_B57B:\n\tLDA ObjectXVelocity - 1, X\n\tCLC\n\tADC ObjectXAcceleration - 1, X\n\tBMI loc_BANK3_B587\n\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\nloc_BANK3_B587:\n\tJSR CheckEnemyTileCollision\n\n\tDEX\n\tRTS\n\n\n\n;\n; Check collision attributes for the next two tiles\n;\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckEnemyTileCollision:\n\tLDY byte_RAM_8\n\tJSR sub_BANK3_BB87\n\n\tLDY byte_RAM_7\n\tLDA EnemyTileCollisionTable, Y\n\tTAY\n\tLDA byte_RAM_0\n\tJSR CheckTileUsesCollisionType_Bank3\n\n\tBCC CheckEnemyTileCollision_Exit\n\n\tLDY byte_RAM_7\n\tLDA EnemyEnableCollisionFlagTable, Y\n\tORA EnemyCollision - 1, X\n\tSTA EnemyCollision - 1, X\n\nELSE\nCheckEnemyTileCollision:\n\tLDY byte_RAM_8\n\tJSR sub_BANK3_BB87\n\n\t; check tile attributes\n\tLDY byte_RAM_0\n\tLDA TileCollisionAttributesTable, Y\n\tLDY byte_RAM_7\n\tAND CheckEnemyTileCollisionAttributesTable, Y\n\n\tBEQ CheckEnemyTileCollision_Exit\n\n\tLDA EnemyEnableCollisionFlagTable, Y\n\tORA EnemyCollision - 1, X\n\tSTA EnemyCollision - 1, X\nENDIF\n\nCheckEnemyTileCollision_Exit:\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tRTS\n\n\n;\n; Resets directional collision flags and loads collision data pointer\n;\n; Input\n;   X = enemy index\n; Output\n;   byte_RAM_D = previous collision flags\n;   EnemyCollision = collision flags with up/down/left/right disabled\n;   A = collision data pointer\n;   X = X + 1\n;\nClearDirectionalCollisionFlags:\n\tINX\n\tLDA EnemyCollision - 1, X\n\tSTA byte_RAM_D\n\tAND #CollisionFlags_Damage | CollisionFlags_PlayerOnTop | CollisionFlags_PlayerInsideMaybe | CollisionFlags_80\n\tSTA EnemyCollision - 1, X\n\tLDY EnemyArray_492 - 1, X\n\tLDA byte_BANKF_F000, Y\n\nClearDirectionalCollisionFlags_Exit:\n\tRTS\n\n\nEnemyTileCollisionTable:\n\t.db $02 ; jumpthrough bottom (y-velocity < 0)\n\t.db $01 ; jumpthrough top (y-velocity > 0)\n\t.db $02 ; jumpthrough right (x-velocity < 0)\n\t.db $02 ; jumpthrough left (x-velocity > 0)\n\t.db $00 ; treat background as solid\n\t.db $00 ; treat background as solid\n\t.db $00 ; treat background as solid\n\t.db $00 ; treat background as solid\n\n\nIFDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckEnemyTileCollisionAttributesTable:\n\t.db %00001000 ; bottom (y-velocity < 0)\n\t.db %00000100 ; top (y-velocity > 0)\n\t.db %00000010 ; right (x-velocity < 0)\n\t.db %00000001 ; left (x-velocity > 0)\n\t.db %10001000 ; background-interactive bottom (y-velocity < 0)\n\t.db %01000100 ; background-interactive top (y-velocity > 0)\n\t.db %00100010 ; background-interactive right (x-velocity < 0)\n\t.db %00010001 ; background-interactive left (x-velocity > 0)\nENDIF\n\nEnemyEnableCollisionFlagTable:\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Right\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Right\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_B5CC:\n\tLDA #$00\n\tSTA ObjectXAcceleration, X\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left | CollisionFlags_Down | CollisionFlags_Up\n\tSTA EnemyCollision, X\n\tLDA EnemyState, X\n\tCMP #EnemyState_BombExploding\n\tBNE loc_BANK3_B5E1\n\n\tLDY #$06\n\tBNE loc_BANK3_B5FF\n\nloc_BANK3_B5E1:\n\tCMP #$07\n\tBEQ loc_BANK3_B5F8\n\n\tLDY ObjectType, X\n\tCPY #Enemy_Egg\n\tBEQ loc_BANK3_B5F4\n\n\tCPY #$1A\n\tBEQ loc_BANK3_B5F4\n\n\tLDY EnemyArray_42F, X\n\tBNE loc_BANK3_B5F8\n\nloc_BANK3_B5F4:\n\tCMP #$01\n\tBNE ClearDirectionalCollisionFlags_Exit\n\nloc_BANK3_B5F8:\n\tLDA ObjectBeingCarriedTimer, X\n\tBNE ClearDirectionalCollisionFlags_Exit\n\n\tLDY EnemyArray_489, X\n\nloc_BANK3_B5FF:\n\tLDA unk_RAM_7128, Y\n\tSTA byte_RAM_9\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7100, Y\n\tBPL loc_BANK3_B60F\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B60F:\n\tCLC\n\tADC ObjectXLo, X\n\tSTA byte_RAM_5\n\tLDA ObjectXHi, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_1\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_B620\n\n\tSTA byte_RAM_1\n\nloc_BANK3_B620:\n\tLDA unk_RAM_713C, Y\n\tSTA byte_RAM_B\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7114, Y\n\tBPL loc_BANK3_B630\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B630:\n\tCLC\n\tADC ObjectYLo, X\n\tSTA byte_RAM_7\n\tLDA ObjectYHi, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_3\n\nloc_BANK3_B63B:\n\tSTX byte_RAM_ED\n\tTXA\n\tBNE loc_BANK3_B661\n\n\tLDA PlayerInRocket\n\tORA PlayerLock\n\tBNE loc_BANK3_B64E\n\n\tLDA EnemyState - 1, X\n\tCMP #$02\n\tBCC loc_BANK3_B651 ; branch if A < $02\n\nloc_BANK3_B64E:\n\tJMP loc_BANK3_B6F0\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B651:\n\tLDY byte_RAM_12\n\tLDA EnemyArray_42F, Y\n\tBEQ loc_BANK3_B65C\n\n\tCMP #$20\n\tBCC loc_BANK3_B64E\n\nloc_BANK3_B65C:\n\tLDY PlayerDucking\n\tJMP loc_BANK3_B6A6\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B661:\n\tLDY byte_RAM_12\n\tLDA EnemyState, Y\n\tCMP #$04\n\tBEQ loc_BANK3_B671\n\n\tLDA EnemyArray_46E, Y\n\tAND #%00000100\n\tBNE loc_BANK3_B690\n\nloc_BANK3_B671:\n\tLDA EnemyState - 1, X\n\tCMP #EnemyState_BombExploding ; what does this mean for an enemy?\n\tBNE loc_BANK3_B67B\n\n\tLDY #$06\n\tBNE loc_BANK3_B6A6\n\nloc_BANK3_B67B:\n\tCMP #$07\n\tBEQ loc_BANK3_B692\n\n\tLDY ObjectType - 1, X\n\tCPY #Enemy_Egg\n\tBEQ loc_BANK3_B68E\n\n\tCPY #$1A\n\tBEQ loc_BANK3_B68E\n\n\tLDY EnemyArray_42F - 1, X\n\tBNE loc_BANK3_B692\n\nloc_BANK3_B68E:\n\tCMP #$01\n\nloc_BANK3_B690:\n\tBNE loc_BANK3_B6F0\n\nloc_BANK3_B692:\n\tLDA ObjectBeingCarriedTimer - 1, X\n\tBNE loc_BANK3_B6F0\n\n\tLDA EnemyCollision - 1, X\n\tAND #CollisionFlags_Damage\n\tBNE loc_BANK3_B6F0\n\n\tLDA EnemyArray_46E - 1, X\n\tAND #$04\n\tBNE loc_BANK3_B6F0\n\n\tLDY EnemyArray_489 - 1, X\n\nloc_BANK3_B6A6:\n\tLDA unk_RAM_7128, Y\n\tSTA byte_RAM_A\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7100, Y\n\tBPL loc_BANK3_B6B6\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B6B6:\n\tCLC\n\tADC ObjectXLo - 1, X\n\tSTA byte_RAM_6\n\tLDA ObjectXHi - 1, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_2\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_B6C7\n\n\tSTA byte_RAM_2\n\nloc_BANK3_B6C7:\n\tLDA unk_RAM_713C, Y\n\tSTA byte_RAM_C\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7114, Y\n\tBPL loc_BANK3_B6D7\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B6D7:\n\tCLC\n\tADC ObjectYLo - 1, X\n\tSTA byte_RAM_8\n\tLDA ObjectYHi - 1, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_4\n\tJSR sub_BANK3_BDC5\n\n\tBCS loc_BANK3_B6F0\n\n\tLDA byte_RAM_B\n\tPHA\n\tJSR EnemyCollisionBehavior\n\n\tPLA\n\tSTA byte_RAM_B\n\nloc_BANK3_B6F0:\n\tDEX\n\tBMI loc_BANK3_B6F6\n\n\tJMP loc_BANK3_B63B\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B6F6:\n\tLDX byte_RAM_12\n\nlocret_BANK3_B6F8:\n\tRTS\n\n; End of function sub_BANK3_B5CC\n\n; =============== S U B R O U T I N E =======================================\n\nEnemyCollisionBehavior:\n\tTXA\n\tBNE EnemyCollisionBehavior_ReadCollisionType\n\n\tLDA HoldingItem\n\tBEQ EnemyCollisionBehavior_ReadCollisionType\n\n\tLDA ObjectBeingCarriedIndex\n\tCMP byte_RAM_12\n\tBEQ locret_BANK3_B6F8\n\nEnemyCollisionBehavior_ReadCollisionType:\n\tLDY byte_RAM_12\n\tLDA ObjectType, Y\n\tTAY\n\tLDA unk_RAM_71D1, Y\n\tJSR JumpToTableAfterJump\n\n\t.dw EnemyCollisionBehavior_Enemy\n\t.dw EnemyCollisionBehavior_ProjectileItem\n\t.dw EnemyCollisionBehavior_Object\n\t.dw EnemyCollisionBehavior_POW\n\t.dw EnemyCollisionBehavior_Door\n\n\nEnemyCollisionBehavior_Door:\n\tTXA\n\tBNE EnemyCollisionBehavior_Exit\n\n\tLDA Player1JoypadPress\n\tAND #ControllerInput_Up\n\tBEQ EnemyCollisionBehavior_Exit\n\n\tLDA PlayerCollision\n\tAND #CollisionFlags_Down\n\tBEQ EnemyCollisionBehavior_Exit\n\n\tLDA byte_RAM_426\n\tCMP #$FA\n\tBCS EnemyCollisionBehavior_Exit\n\n\tLDA DoorAnimationTimer\n\tORA SubspaceDoorTimer\n\tBNE EnemyCollisionBehavior_Exit\n\n\tLDA HoldingItem\n\tBEQ loc_BANK3_B749\n\n\tLDY ObjectBeingCarriedIndex\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBNE EnemyCollisionBehavior_Exit\n\nloc_BANK3_B749:\n\tLDY byte_RAM_12\n\tLDA ObjectXLo, Y\n\tSTA PlayerXLo\n\tLDA ObjectXHi, Y\n\tSTA PlayerXHi\n\tJSR StashPlayerPosition\n\n\tLDA #TransitionType_SubSpace\n\tSTA TransitionType\n\tJMP DoorHandling_GoThroughDoor_Bank3\n\nEnemyCollisionBehavior_Exit:\n\tRTS\n\n\nEnemyCollisionBehavior_Enemy:\n\tLDY byte_RAM_12\n\tTXA\n\tBEQ CheckCollisionWithPlayer\n\n\tLDA EnemyArray_45C, Y\n\tORA EnemyArray_45C - 1, X\n\tBNE EnemyCollisionBehavior_Exit\n\n\tLDA EnemyArray_42F, Y\n\tBNE loc_BANK3_B792\n\n\tLDA EnemyState, Y\n\tCMP #EnemyState_BombExploding\n\tBEQ loc_BANK3_B792\n\n\tTXA\n\tTAY\n\tDEY\n\tLDX byte_RAM_12\n\tINX\n\tLDA EnemyState, Y\n\tCMP #EnemyState_BombExploding\n\tBEQ loc_BANK3_B792\n\n\tLDA EnemyArray_42F, Y\n\tBEQ loc_BANK3_B7E0\n\n\tLDA EnemyCollision - 1, X\n\tAND #CollisionFlags_Damage\n\tBNE loc_BANK3_B7E0\n\nloc_BANK3_B792:\n\tLDA EnemyArray_453, Y\n\tORA EnemyArray_45C, Y\n\tBNE loc_BANK3_B7D7\n\n\tLDA EnemyArray_46E, Y\n\tAND #%00001000\n\tBEQ loc_BANK3_B7A4\n\n\tJSR PlayBossHurtSound\n\nloc_BANK3_B7A4:\n\tLDA EnemyHP, Y\n\tSEC\n\tSBC #$01\n\tSTA EnemyHP, Y\n\tBMI loc_BANK3_B7BD\n\n\tJSR PlayBossHurtSound\n\n\tLDA #$21\n\tSTA EnemyArray_45C, Y\n\tLSR A\n\tSTA EnemyArray_438, Y\n\tBNE loc_BANK3_B7D7\n\nloc_BANK3_B7BD:\n\tLDA EnemyCollision, Y\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, Y\n\tLDA #$E0\n\tSTA ObjectYVelocity, Y\n\tLDA ObjectXVelocity, Y\n\tSTA byte_RAM_0\n\tASL A\n\tROR byte_RAM_0\n\tLDA byte_RAM_0\n\tSTA ObjectXVelocity, Y\n\nloc_BANK3_B7D7:\n\tLDA ObjectType - 1, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK3_B7E0\n\n\tJSR sub_BANK3_BA5D\n\nloc_BANK3_B7E0:\n\tLDX byte_RAM_ED\n\tRTS\n\n; ---------------------------------------------------------------------------\nInvincibilityKill_VelocityX:\n\t.db $F8 ; to the left\n\t.db $08 ; to the right\n; ---------------------------------------------------------------------------\n\nCheckCollisionWithPlayer:\n\tLDA byte_RAM_EE\n\tAND #CollisionFlags_Up\n\tBNE CheckCollisionWithPlayer_Exit\n\n\t; check if it's a heart\n\tLDA ObjectType, Y\n\tBNE CheckCollisionWithPlayer_NotHeart\n\n\t; accept the heart into your life\n\tSTA EnemyState, Y\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\tLDY PlayerMaxHealth\n\tLDA PlayerHealth\n\tCLC\n\tADC #$10\n\tSTA PlayerHealth\n\tCMP PlayerHealthValueByHeartCount, Y\n\tBCC CheckCollisionWithPlayer_Exit\n\n\tJMP RestorePlayerToFullHealth\n\n; ---------------------------------------------------------------------------\n\nCheckCollisionWithPlayer_NotHeart:\n\tCMP #Enemy_Phanto\n\tBNE CheckCollisionWithPlayer_NotPhanto\n\n\tLDY PhantoActivateTimer\n\tBNE CheckCollisionWithPlayer_Exit\n\nCheckCollisionWithPlayer_NotPhanto:\n\tCMP #Enemy_Starman\n\tBNE CheckCollisionWithPlayer_NotStarman\n\n\tLDA #$3F\n\tSTA StarInvincibilityTimer\n\tLDA #Music1_Invincible\n\tSTA MusicQueue1\n\tLDA #EnemyState_Inactive\n\tSTA EnemyState, Y\n\nCheckCollisionWithPlayer_Exit:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nCheckCollisionWithPlayer_NotStarman:\n\tCMP #Enemy_WhaleSpout\n\tBNE CheckCollisionWithPlayer_NotWhaleSpout\n\n\tLDA EnemyVariable, Y\n\tCMP #$DC\n\tBCS CheckCollisionWithPlayer_Exit2\n\n\tLDA StarInvincibilityTimer\n\tBEQ CheckCollisionWithPlayer_NotInvincible\n\n\tLDA #$DC\n\tSTA EnemyVariable, Y\n\tLDA #$00\n\tSTA ObjectYVelocity, Y\n\nCheckCollisionWithPlayer_Exit2:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nCheckCollisionWithPlayer_NotWhaleSpout:\n\tCMP #Enemy_Wart\n\tBNE CheckCollisionWithPlayer_NotWart\n\n\tLDA EnemyArray_B1, X\n\tBNE CheckCollisionWithPlayer_Exit2\n\nCheckCollisionWithPlayer_NotWart:\n\tLDY StarInvincibilityTimer\n\tBEQ CheckCollisionWithPlayer_NotInvincible\n\n\t; player is invincible\n\tLDX byte_RAM_12\n\tCMP #Enemy_AutobombFire\n\tBEQ CheckCollisionWithPlayer_Poof\n\n\tCMP #Enemy_Fireball\n\tBNE CheckCollisionWithPlayer_KillEnemy\n\n; turn into a puff of smoke\nCheckCollisionWithPlayer_Poof:\n\tLDA #%00000000\n\tSTA EnemyArray_46E, X\n\tJSR EnemyBehavior_Shell_Destroy\n\n\tJMP loc_BANK3_B878\n\n; ---------------------------------------------------------------------------\n\n; die and fall off\nCheckCollisionWithPlayer_KillEnemy:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA InvincibilityKill_VelocityX, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tLDA EnemyCollision, X\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, X\n\nloc_BANK3_B878:\n\tLDX byte_RAM_ED\n\tLDY byte_RAM_12\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nCheckCollisionWithPlayer_NotInvincible:\n\tLDY byte_RAM_12\n\tLDA EnemyState, Y\n\tCMP #EnemyState_BombExploding\n\tBEQ CheckCollisionWithPlayer_HurtPlayer\n\n\t; should we damage the player for jumping on top?\n\tLDA EnemyArray_46E, Y\n\tAND #%00000001\n\tBNE CheckCollisionWithPlayer_HurtPlayer\n\n\t; let player land on top\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND #$0B\n\tBEQ CheckCollisionWithPlayer_StandingOnHead\n\nCheckCollisionWithPlayer_HurtPlayer:\n\tJMP DamagePlayer\n\n\nCheckCollisionWithPlayer_StandingOnHead:\n\tLDA #$00\n\tSTA PlayerInAir\n\tLDX byte_RAM_12\n\tLDA EnemyCollision, X\n\tORA #CollisionFlags_PlayerOnTop\n\tSTA EnemyCollision, X\n\n\t; can you even lift\n\tLDA EnemyArray_46E, X\n\tAND #%00000010\n\tBNE CheckCollisionWithPlayer_NoLift\n\n\t; check B button\n\tBIT Player1JoypadPress\n\tBVC CheckCollisionWithPlayer_NoLift\n\n\t; bail if we already have an item or are ducking\n\tLDA HoldingItem\n\tORA PlayerDucking\n\tBNE CheckCollisionWithPlayer_NoLift\n\n\tSTA EnemyCollision, X\n\tSTX ObjectBeingCarriedIndex\n\tSTA ObjectShakeTimer, X\n\tLDA #$07\n\tSTA ObjectBeingCarriedTimer, X\n\tJSR SetPlayerStateLifting\n\n\t; leave a flying carpet behind if we're picking up pidgit\n\tLDA ObjectType, X\n\tCMP #Enemy_Pidgit\n\tBNE CheckCollisionWithPlayer_NoLift\n\n\tJSR CreateFlyingCarpet\n\nCheckCollisionWithPlayer_NoLift:\n\tLDX byte_RAM_ED\n\tRTS\n\n; End of function CheckCollisionWithPlayer_StandingOnHead\n\n; ---------------------------------------------------------------------------\n\nEnemyCollisionBehavior_Object:\n\tLDY byte_RAM_12\n\tTXA\n\tBEQ loc_BANK3_B905\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBNE loc_BANK3_B8E4\n\n\tLDA EnemyCollision, Y\n\tAND #CollisionFlags_Down\n\tBNE locret_BANK3_B902\n\nloc_BANK3_B8E4:\n\tLDA EnemyArray_42F, Y\n\tBNE loc_BANK3_B8FF\n\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND EnemyMovementDirection - 1, X\n\tBEQ loc_BANK3_B8F8\n\n\tDEX\n\tJSR EnemyBehavior_TurnAround\n\n\tLDX byte_RAM_ED\n\nloc_BANK3_B8F8:\n\tJSR sub_BANK3_BB31\n\n\tCPY #$00\n\tBEQ locret_BANK3_B902\n\nloc_BANK3_B8FF:\n\tJMP loc_BANK3_B9EA\n\n; ---------------------------------------------------------------------------\n\nlocret_BANK3_B902:\n\tRTS\n\n; ---------------------------------------------------------------------------\nunk_BANK3_B903:\n\t.db $08\n\t.db $04\n; ---------------------------------------------------------------------------\n\n; collision with items that the player can stand on\nloc_BANK3_B905:\n\tLDA EnemyCollision, Y\n\tORA #CollisionFlags_PlayerInsideMaybe\n\tSTA EnemyCollision, Y\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND PlayerMovementDirection\n\tBEQ loc_BANK3_B919\n\n\tJSR PlayerHorizontalCollision\n\nloc_BANK3_B919:\n\tLDA byte_RAM_F\n\tAND #$04\n\tBEQ loc_BANK3_B922\n\n\tJSR CheckCollisionWithPlayer_StandingOnHead\n\nloc_BANK3_B922:\n\tJSR sub_BANK3_BB31\n\n\tCPY #$01\n\tBNE locret_BANK3_B955\n\n\tLDY byte_RAM_12\n\tLDA ObjectYVelocity, Y\n\tBEQ locret_BANK3_B955\n\n\tAND #$80\n\tASL A\n\tROL A\n\tTAY\n\tLDA byte_RAM_F\n\tAND unk_BANK3_B903, Y\n\tBEQ locret_BANK3_B955\n\n\tLDY byte_RAM_12\n\tLDA ObjectYVelocity, Y\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA ObjectYVelocity, Y\n\tLDA #$01\n\tSTA PlayerDucking\n\tLDA #$04\n\tSTA PlayerAnimationFrame\n\tLDA #$10\n\tSTA PlayerStateTimer\n\nlocret_BANK3_B955:\n\tRTS\n\nEnemyCollisionBehavior_POW:\n\tTXA\n\tBEQ locret_BANK3_B955\n\tJMP loc_BANK3_B9EA\n\nEnemyCollisionBehavior_ProjectileItem:\n\tLDY byte_RAM_12\n\tTXA\n\nloc_BANK3_B95F:\n\tBNE loc_BANK3_B993\n\n\tLDA EnemyState, Y\n\nloc_BANK3_B964:\n\tCMP #$04\n\tBNE loc_BANK3_B96E\n\n\tLDA StarInvincibilityTimer\n\tBEQ loc_BANK3_B990\n\nlocret_BANK3_B96D:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B96E:\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND #$08\n\tBEQ loc_BANK3_B987\n\n\tLDA HoldingItem\n\tBNE locret_BANK3_B96D\n\n\tLDY byte_RAM_12\n\tSTY ObjectBeingCarriedIndex\n\tLDA #$01\n\tSTA ObjectBeingCarriedTimer, Y\n\tINC HoldingItem\n\nloc_BANK3_B987:\n\tLDA byte_RAM_F\n\tAND #$04\n\tBEQ locret_BANK3_B96D\n\n\tJMP CheckCollisionWithPlayer_StandingOnHead\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B990:\n\tJMP DamagePlayer\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B993:\n\tLDA ObjectType - 1, X\n\tCMP #Enemy_Wart\n\tBNE loc_BANK3_B9B7\n\n\tLDA EnemyTimer - 1, X\n\tBEQ locret_BANK3_B9F9\n\n\tLDA #$00\n\tSTA EnemyState, Y\n\tJSR sub_BANK3_BA5D\n\n\tLDA #$60\n\tSTA EnemyArray_45C - 1, X\n\tLSR A\n\tSTA EnemyArray_438 - 1, X\n\tLDA EnemyHP - 1, X\n\tBNE locret_BANK3_B9B6\n\n\tINC ScrollXLock\n\nlocret_BANK3_B9B6:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B9B7:\n\tCMP #$32\n\tBCS locret_BANK3_B9B6\n\n\tCMP #$11\n\tBNE loc_BANK3_B9CA\n\n\tLDA #$05\n\tSTA EnemyState, Y\n\tLDA #$1E\n\tSTA EnemyTimer, Y\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_B9CA:\n\tLDA EnemyState, Y\n\tCMP #$04\n\tBEQ loc_BANK3_B9EC\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Shell\n\tBEQ loc_BANK3_B9EA\n\n\tLDA #$E8\n\tSTA ObjectYVelocity, Y\n\tSTX byte_RAM_0\n\tLDX ObjectXVelocity, Y\n\tBMI loc_BANK3_B9E5\n\n\tLDA #$18\n\nloc_BANK3_B9E5:\n\tSTA ObjectXVelocity, Y\n\tLDX byte_RAM_0\n\nloc_BANK3_B9EA:\n\tLDY byte_RAM_12\n\nloc_BANK3_B9EC:\n\tJSR sub_BANK3_BA5D\n\n\tBNE locret_BANK3_B9F9\n\n\tLDA ObjectXVelocity - 1, X\n\tASL A\n\tROR ObjectXVelocity - 1, X\n\tASL A\n\tROR ObjectXVelocity - 1, X\n\nlocret_BANK3_B9F9:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nDamagePlayer:\n\tLDA DamageInvulnTime\n\tBNE locret_BANK3_BA31\n\n\tLDA PlayerHealth\n\tSEC\n\tSBC #$10\n\tBCC loc_BANK3_BA32\n\n\tSTA PlayerHealth\n\tLDY #$7F\n\tSTY DamageInvulnTime\n\tLDY #$00\n\tSTY PlayerYVelocity\n\tSTY PlayerXVelocity\n\tCMP #$10\n\tBCC loc_BANK3_BA2C\n\n\tLDA PlayerScreenX\n\tSEC\n\tSBC SpriteTempScreenX\n\tASL A\n\tASL A\n\tSTA PlayerXVelocity\n\tLDA #$C0\n\tLDY PlayerYVelocity\n\tBPL loc_BANK3_BA2A\n\n\tLDA #$00\n\nloc_BANK3_BA2A:\n\tSTA PlayerYVelocity\n\nloc_BANK3_BA2C:\n\tLDA #DPCM_PlayerHurt\n\tSTA DPCMQueue\n\nlocret_BANK3_BA31:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_BA32:\n\tTXA\n\nloc_BANK3_BA33:\n\tPHA\n\tLDX byte_RAM_12\n\tLDA ObjectType, X\n\tCMP #Enemy_BeezoDiving\n\tBCS loc_BANK3_BA48\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tTYA\n\tCMP EnemyMovementDirection, X\n\tBEQ loc_BANK3_BA48\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK3_BA48:\n\tPLA\n\tTAX\n\tLDA #$C0\n\tSTA PlayerYVelocity\n\nloc_BANK3_BA4E:\n\tLDA #$20\n\tSTA PlayerStateTimer\n\tLDY byte_RAM_12\n\tBMI loc_BANK3_BA5A\n\n\tLSR A\n\tSTA EnemyArray_438, Y\n\nloc_BANK3_BA5A:\n\tJMP KillPlayer\n\n; =============== S U B R O U T I N E =======================================\n\n; Damage enemy\nsub_BANK3_BA5D:\n\tLDA EnemyArray_453 - 1, X\n\tORA EnemyArray_45C - 1, X\n\tBNE locret_BANK3_BA94\n\n\tLDA EnemyArray_46E - 1, X\n\tAND #Enemy_Ostro\n\tBEQ EnemyTakeDamage\n\n\tJSR PlayBossHurtSound\n\nEnemyTakeDamage:\n\tDEC EnemyHP - 1, X ; Subtract hit point\n\tBMI EnemyKnockout\n\n\tLDA #$21 ; Flash\n\tSTA EnemyArray_45C - 1, X\n\tLSR A\n\nloc_BANK3_BA7A:\n\tSTA EnemyArray_438 - 1, X\n\n; End of function sub_BANK3_BA5D\n\nPlayBossHurtSound:\n\tLDA #DPCM_BossHurt\n\tSTA DPCMQueue\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nEnemyKnockout:\n\tLDA EnemyCollision - 1, X\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision - 1, X\n\tLDA #$E0\n\tSTA ObjectYVelocity - 1, X\n\tLDA ObjectXVelocity, Y\n\tSTA ObjectXVelocity - 1, X\n\tLDA #$00\n\nlocret_BANK3_BA94:\n\tRTS\n\n;\n; Determines the collision flags for two objects\n;\n; Input:\n;   RAM_12 = main object\n;   X = collision object (usually player?)\n; Output:\n;   byte_RAM_F = collision flags\n;\nDetermineCollisionFlags:\n\tLDA #$00\n\tSTA byte_RAM_F\n\tLDY byte_RAM_12 ; stash Y\n\tLDA byte_RAM_427\n\tCMP #$F6\n\tBCS DetermineCollisionFlags_Y\n\n\tLDA ObjectXLo, Y\n\tLDY #CollisionFlags_Left\n\tCMP ObjectXLo - 1, X\n\tBMI DetermineCollisionFlags_SetFlagsX\n\n\tLDY #CollisionFlags_Right\n\nDetermineCollisionFlags_SetFlagsX:\n\tSTY byte_RAM_F\n\tTYA\n\tAND EnemyMovementDirection - 1, X\n\tBEQ DetermineCollisionFlags_ExitX\n\n\tLDY byte_RAM_12 ; restore Y\n\tLDA unk_RAM_4A4, Y\n\tBNE DetermineCollisionFlags_ExitX\n\n\t; @TODO: Looks like a way to make objects move together horizontally\n\tLDA ObjectXVelocity, Y\n\tSTA ObjectXAcceleration - 1, X\n\nDetermineCollisionFlags_ExitX:\n\tRTS\n\n\nDetermineCollisionFlags_Y:\n\tLDA ObjectYLo, Y\n\tCPX #$01\n\tBCS loc_BANK3_BAD1\n\n\tPHA\n\tLDY PlayerDucking\n\tPLA\n\tSEC\n\tSBC byte_BANK3_BB2F, Y\n\nloc_BANK3_BAD1:\n\tCMP ObjectYLo - 1, X\n\tBMI loc_BANK3_BB02\n\n\tLDA ObjectYVelocity - 1, X\n\tBMI DetermineCollisionFlags_ExitY\n\n\tLDY byte_RAM_12\n\tLDA unk_RAM_4A4, Y\n\tBNE loc_BANK3_BAE6\n\n\tLDA ObjectXVelocity, Y\n\tSTA ObjectXAcceleration - 1, X\n\nloc_BANK3_BAE6:\n\tLDY #$00\n\tINC byte_RAM_427\n\tINC byte_RAM_427\n\tBPL loc_BANK3_BAF1\n\n\tDEY\n\nloc_BANK3_BAF1:\n\tLDA byte_RAM_427\n\tCLC\n\tADC ObjectYLo - 1, X\n\tSTA ObjectYLo - 1, X\n\tTYA\n\tADC ObjectYHi - 1, X\n\tSTA ObjectYHi - 1, X\n\tLDY #CollisionFlags_Down\n\tBNE loc_BANK3_BB13\n\nloc_BANK3_BB02:\n\tLDA ObjectYVelocity - 1, X\n\tBEQ loc_BANK3_BB11\n\n\tBPL DetermineCollisionFlags_ExitY\n\n\tLDY byte_RAM_12\n\tLDA ObjectType, Y\n\tCMP #Enemy_Coin\n\tBEQ DetermineCollisionFlags_ExitY\n\nloc_BANK3_BB11:\n\tLDY #CollisionFlags_Up\n\nloc_BANK3_BB13:\n\tSTY byte_RAM_F\n\tLDY byte_RAM_12\n\tLDA unk_RAM_4A4, Y\n\tBNE loc_BANK3_BB22\n\n\t; @TODO: Looks like a way to make objects move together vertically\n\tLDA ObjectYVelocity, Y\n\tSTA ObjectYAcceleration - 1, X\n\nloc_BANK3_BB22:\n\tLDA #$00\n\tSTA ObjectYVelocity - 1, X\n\tLDA ObjectYSubpixel, Y\n\tSTA ObjectYSubpixel - 1, X\n\tINC ObjectAnimationTimer - 1, X\n\nDetermineCollisionFlags_ExitY:\n\tRTS\n\n\nbyte_BANK3_BB2F:\n\t.db $0B\n\t.db $10\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BB31:\n\tLDY #$00\n\tLDA EnemyCollision - 1, X\n\tORA byte_RAM_F\n\tAND #$0C\n\tCMP #$0C\n\tBEQ loc_BANK3_BB48\n\n\tLDA EnemyCollision - 1, X\n\tORA byte_RAM_F\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tCMP #CollisionFlags_Right | CollisionFlags_Left\n\tBNE locret_BANK3_BB49\n\n\tINY\n\nloc_BANK3_BB48:\n\tINY\n\nlocret_BANK3_BB49:\n\tRTS\n\n; End of function sub_BANK3_BB31\n\n; ---------------------------------------------------------------------------\n_unused_BANK3_BB4A:\n\t.db $FF ; May not be used, but wasn't marked as data\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\nbyte_BANK3_BB50:\n\t.db $C2\n\t.db $D4\n\t.db $C3\n\t.db $C4\n\t.db $07\n\t.db $80\n\t.db $81\n\t.db $94\n\t.db $95\n\t.db $17\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BB5A:\n\tJSR sub_BANK3_BB87\n\n\tLDA byte_RAM_0\n\n\tLDY #$09\nloc_BANK3_BB61:\n\tCMP byte_BANK3_BB50, Y\n\tBEQ locret_BANK3_BB6A\n\tDEY\n\tBPL loc_BANK3_BB61\n\n\tCLC\n\nlocret_BANK3_BB6A:\n\tRTS\n\n\nItemCarryYOffsets:\n\t.db $F9\n\t.db $FF\n\t.db $00\n\t.db $08\n\t.db $0C\n\t.db $18\n\t.db $1A\n\t.db $01\n\t.db $06\n\t.db $0A\n\t.db $0C\n\t.db $18\n\t.db $1A\n\t.db $1C\n\t.db $FF\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BB87:\n\tTXA\n\tPHA\n\n\tLDA #$00\n\tSTA byte_RAM_0\n\tSTA byte_RAM_1\n\tLDA byte_BANKF_F011, Y\n\tBPL loc_BANK3_BB96\n\n\tDEC byte_RAM_0\n\nloc_BANK3_BB96:\n\tCLC\n\tADC ObjectXLo - 1, X\n\tAND #$F0\n\tSTA byte_RAM_5\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA ObjectXHi - 1, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_BBB5\n\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\nloc_BANK3_BBB5:\n\tLDA byte_BANKF_F055, Y\n\tBPL loc_BANK3_BBBC\n\n\tDEC byte_RAM_1\n\nloc_BANK3_BBBC:\n\tCLC\n\tADC ObjectYLo - 1, X\n\tAND #$F0\n\tSTA byte_RAM_6\n\tSTA byte_RAM_E6\n\tLDA ObjectYHi - 1, X\n\tADC byte_RAM_1\n\tSTA byte_RAM_1\n\tSTA byte_RAM_4\n\tJSR sub_BANK3_BC2E\n\n\tBCC loc_BANK3_BBD6\n\n\tLDA #$00\n\tBEQ loc_BANK3_BBDD\n\nloc_BANK3_BBD6:\n\tJSR SetTileOffsetAndAreaPageAddr\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\nloc_BANK3_BBDD:\n\tSTA byte_RAM_0\n\tPLA\n\tTAX\n\tRTS\n\n\n;\n; Check whether a tile should use the given collision handler type\n;\n; Input\n;   A = tile ID\n;   Y = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)\n; Output\n;   C = whether or not collision type Y is relevant\n;\nCheckTileUsesCollisionType_Bank3:\n\tPHA ; stash tile ID for later\n\n\t; determine which tile table to use (0-3)\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\n\t; add the offset for the type of collision we're checking\n\tADC TileGroupTable_Bank3, Y\n\tTAY\n\n\t; check which side of the tile ID pivot we're on\n\tPLA\n\tCMP TileSolidnessTable, Y\n\tRTS\n\n\n;\n; These map the two high bits of a tile to offets in TileSolidnessTable\n;\nTileGroupTable_Bank3:\n\t.db $00 ; solid to mushroom blocks\n\t.db $04 ; solid on top\n\t.db $08 ; solid on all sides\n\n\nDoorHandling_GoThroughDoor_Bank3:\n\tINC DoorAnimationTimer\n\tINC PlayerLock\n\tJSR SnapPlayerToTile_Bank3\n\n\tLDA #DPCM_DoorOpenBombBom\n\tSTA DPCMQueue\n\tRTS\n\n\n;\n; Checks horizontal collision with the player and stops them if necessary\n;\nPlayerHorizontalCollision:\n\tLDX #$00\n\tLDY PlayerMovementDirection\n\tLDA PlayerXVelocity\n\tEOR PlayerCollisionResultTable - 1, Y\n\tBPL loc_BANK3_BC10\n\n\tSTX PlayerXVelocity\n\nloc_BANK3_BC10:\n\tLDA PlayerXAcceleration\n\tEOR PlayerCollisionResultTable - 1, Y\n\tBPL loc_BANK3_BC1B\n\n\tSTX PlayerXAcceleration\n\nloc_BANK3_BC1B:\n\tSTX PlayerXSubpixel\n\nlocret_BANK3_BC1E:\n\tRTS\n\n\n;\n; Set the player state to lifting and Kick off the lifting animation\n;\nSetPlayerStateLifting:\n\tLDA #PlayerState_Lifting\n\tSTA PlayerState\n\tLDA #$06\n\tSTA PlayerStateTimer\n\tLDA #$08\n\tSTA PlayerAnimationFrame\n\tINC HoldingItem\n\tRTS\n\n\n;\n; @TODO: Figure out what this does exactly\n;\nsub_BANK3_BC2E:\n\tLDY byte_RAM_1\n\tLDA byte_RAM_E6\n\tJSR sub_BANK3_BD6B\n\n\tSTY byte_RAM_1\n\tSTA byte_RAM_E6\n\tLDY IsHorizontalLevel\n\tLDA byte_RAM_1, Y\n\tSTA byte_RAM_E8\n\tLDA byte_RAM_2\n\tCMP byte_BANK3_BC4D + 1, Y\n\tBCS locret_BANK3_BC4C\n\n\tLDA byte_RAM_1\n\tCMP byte_BANK3_BC4D, Y\n\nlocret_BANK3_BC4C:\n\tRTS\n\n\nbyte_BANK3_BC4D:\n\t.db $0A\n\t.db $01\n\t.db $0B\n\n\n;\n; Replaces a tile when something is thrown\n;\n; Input\n;   A = target tile\n;   X = enemy index of object being thrown\n;\nReplaceTile:\n\tPHA\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$08\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA ObjectXHi, X\n\tLDY IsHorizontalLevel\n\tBEQ ReplaceTile_StoreXHi\n\n\tADC #$00\n\nReplaceTile_StoreXHi:\n\tSTA byte_RAM_2\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA byte_RAM_E6\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA byte_RAM_1\n\tJSR sub_BANK3_BC2E\n\n\tPLA\n\tBCS locret_BANK3_BC1E\n\n\tSTX byte_RAM_3\n\tPHA\n\tJSR SetTileOffsetAndAreaPageAddr\n\n\tPLA\n\tLDY byte_RAM_E7\n\tSTA (byte_RAM_1), Y\n\tPHA\n\tLDX byte_RAM_300\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tTYA\n\tAND #$F0\n\tASL A\n\tROL PPUBuffer_301, X\n\tASL A\n\tROL PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 1, X\n\tTYA\n\tAND #$0F\n\tASL A\n\n\tADC PPUBuffer_301 + 1, X\n\tSTA PPUBuffer_301 + 1, X\n\tCLC\n\tADC #$20\n\tSTA PPUBuffer_301 + 6, X\n\tLDA IsHorizontalLevel\n\tASL A\n\tTAY\n\tLDA byte_RAM_1\n\tAND #$10\n\tBNE loc_BANK3_BCBA\n\n\tINY\n\nloc_BANK3_BCBA:\n\tLDA unk_BANK3_BD0B, Y\n\tCLC\n\tADC PPUBuffer_301, X\n\tSTA PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 5, X\n\tLDA #$02\n\tSTA PPUBuffer_301 + 2, X\n\tSTA PPUBuffer_301 + 7, X\n\tPLA\n\tPHA\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\tPLA\n\tASL A\n\tASL A\n\tTAY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 3, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 4, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 8, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 9, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 10, X\n\tTXA\n\tCLC\n\tADC #$A\n\tSTA byte_RAM_300\n\tLDX byte_RAM_3\n\tRTS\n\n\n; Another byte of PPU high addresses for horiz/vert levels\nunk_BANK3_BD0B:\n\t.db $20\n\t.db $28\n\t.db $20\n\t.db $24\n\n\nStashPlayerPosition:\n\tLDA InSubspaceOrJar\n\tBNE StashPlayerPosition_Exit\n\n\tLDA PlayerXHi\n\tSTA PlayerXHi_Backup\n\tLDA PlayerXLo\n\tSTA PlayerXLo_Backup\n\tLDA PlayerYHi\n\tSTA PlayerYHi_Backup\n\tLDA PlayerYLo\n\tSTA PlayerYLo_Backup\n\nStashPlayerPosition_Exit:\n\tRTS\n\n\n;\n; Updates the area page and tile placement offset @TODO\n;\n; Input\n;   byte_RAM_E8 = area page\n;   byte_RAM_E5 = tile placement offset shift\n;   byte_RAM_E6 = previous tile placement offset\n; Output\n;   RAM_1 = low byte of decoded level data RAM\n;   RAM_2 = low byte of decoded level data RAM\n;   byte_RAM_E7 = target tile placement offset\n;\nSetTileOffsetAndAreaPageAddr:\n\tLDX byte_RAM_E8\n\tJSR SetAreaPageAddr\n\n\tLDA byte_RAM_E6\n\tCLC\n\tADC byte_RAM_E5\n\tSTA byte_RAM_E7\n\tRTS\n\n\nDecodedLevelPageStartLo:\n\t.db <DecodedLevelData\n\t.db <(DecodedLevelData+$00F0)\n\t.db <(DecodedLevelData+$01E0)\n\t.db <(DecodedLevelData+$02D0)\n\t.db <(DecodedLevelData+$03C0)\n\t.db <(DecodedLevelData+$04B0)\n\t.db <(DecodedLevelData+$05A0)\n\t.db <(DecodedLevelData+$0690)\n\t.db <(DecodedLevelData+$0780)\n\t.db <(DecodedLevelData+$0870)\n\t.db <(SubAreaTileLayout)\n\nDecodedLevelPageStartHi:\n\t.db >DecodedLevelData\n\t.db >(DecodedLevelData+$00F0)\n\t.db >(DecodedLevelData+$01E0)\n\t.db >(DecodedLevelData+$02D0)\n\t.db >(DecodedLevelData+$03C0)\n\t.db >(DecodedLevelData+$04B0)\n\t.db >(DecodedLevelData+$05A0)\n\t.db >(DecodedLevelData+$0690)\n\t.db >(DecodedLevelData+$0780)\n\t.db >(DecodedLevelData+$0870)\n\t.db >(SubAreaTileLayout)\n\n\n\n;\n; Updates the area page that we're reading tiles from\n;\n; Input\n;   X = area page\n; Output\n;   byte_RAM_1 = low byte of decoded level data RAM\n;   byte_RAM_2 = low byte of decoded level data RAM\n;\nSetAreaPageAddr:\n\tLDA DecodedLevelPageStartLo, X\n\tSTA byte_RAM_1\n\tLDA DecodedLevelPageStartHi, X\n\tSTA byte_RAM_2\n\tRTS\n\n\nPlayerCollisionResultTable:\n\t.db CollisionFlags_80\n\t.db CollisionFlags_00\n\n; =============== S U B R O U T I N E =======================================\n\n;\n; Note: Door animation code copied from Bank 0\n;\n; Snaps the player to the closest tile (for entering doors and jars)\n;\nSnapPlayerToTile_Bank3:\n\tLDA PlayerXLo\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA PlayerXLo\n\tBCC SnapPlayerToTile_Exit_Bank3\n\n\tLDA IsHorizontalLevel\n\tBEQ SnapPlayerToTile_Exit_Bank3\n\n\tINC PlayerXHi\n\nSnapPlayerToTile_Exit_Bank3:\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BD6B:\n\tSTA byte_RAM_F\n\tTYA\n\tBMI locret_BANK3_BD81\n\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCLC\n\tADC byte_RAM_F\n\tBCS loc_BANK3_BD7D\n\n\tCMP #$F0\n\tBCC locret_BANK3_BD81\n\nloc_BANK3_BD7D:\n\tCLC\n\tADC #$10\n\tINY\n\nlocret_BANK3_BD81:\n\tRTS\n\n; End of function sub_BANK3_BD6B\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BD82:\n\tLDA byte_RAM_5, Y\n\tSEC\n\tSBC byte_RAM_6, Y\n\tBPL loc_BANK3_BD91\n\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tDEX\n\nloc_BANK3_BD91:\n\tSEC\n\tSBC byte_RAM_9, X\n\tRTS\n\n; End of function sub_BANK3_BD82\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BD95:\n\tLDA byte_RAM_5, Y\n\tSEC\n\tSBC byte_RAM_6, Y\n\tSTA byte_RAM_6, Y\n\tLDA byte_RAM_1, Y\n\tSBC byte_RAM_2, Y\n\tBPL loc_BANK3_BDB9\n\n\tEOR #$FF\n\tPHA\n\tLDA byte_RAM_6, Y\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA byte_RAM_6, Y\n\tPLA\n\tADC #$00\n\tDEX\n\nloc_BANK3_BDB9:\n\tCMP #$00\n\tBEQ loc_BANK3_BDBF\n\n\tSEC\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_BDBF:\n\tLDA byte_RAM_6, Y\n\tSBC byte_RAM_9, X\n\tRTS\n\n; End of function sub_BANK3_BD95\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK3_BDC5:\n\tTXA\n\tPHA\n\tLDY #$02\n\nloc_BANK3_BDC9:\n\tTYA\n\tTAX\n\tINX\n\tCPY #$00\n\tBNE loc_BANK3_BDDA\n\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_BDDA\n\n\tJSR sub_BANK3_BD82\n\n\tJMP loc_BANK3_BDDD\n\n; ---------------------------------------------------------------------------\n\nloc_BANK3_BDDA:\n\tJSR sub_BANK3_BD95\n\nloc_BANK3_BDDD:\n\tBCS loc_BANK3_BDEC\n\n\tPHA\n\tTYA\n\tLSR A\n\tTAX\n\tPLA\n\tSTA byte_RAM_426, X\n\tDEY\n\tDEY\n\tBPL loc_BANK3_BDC9\n\n\tCLC\n\nloc_BANK3_BDEC:\n\tPLA\n\tTAX\n\tRTS\n\n; End of function sub_BANK3_BDC5\n\n; ---------------------------------------------------------------------------\nHealthBarTiles:\n\t.db $BA ; 0\n\t.db $BA\n\t.db $BA\n\t.db $BA\n\t.db $B8 ; 1\n\t.db $BA\n\t.db $BA\n\t.db $BA\n\t.db $B8 ; 2\n\t.db $B8\n\t.db $BA\n\t.db $BA\n\t.db $B8 ; 3\n\t.db $B8\n\t.db $B8\n\t.db $BA\n\t.db $B8 ; 4\n\t.db $B8\n\t.db $B8\n\t.db $B8\n\nPOWQuakeOffsets:\n\t.db $00\n\t.db $03\n\t.db $00\n\t.db $FD\n\nSkyFlashColors:\n\t.db $26\n\t.db $2A\n\t.db $22\n\t.db $26\n\n; =============== S U B R O U T I N E =======================================\n\nAreaSecondaryRoutine:\n\tLDA SkyFlashTimer\n\tBEQ AreaSecondaryRoutine_HealthBar\n\n\t; sky flash timer (ie. explosions)\n\tDEC SkyFlashTimer\n\tLDX byte_RAM_300\n\tLDA #$3F\n\tSTA PPUBuffer_301, X\n\tLDA #$10\n\tSTA PPUBuffer_301 + 1, X\n\tLDA #$04\n\tSTA PPUBuffer_301 + 2, X\n\tLDA SkyColor\n\tLDY SkyFlashTimer\n\tBEQ AreaSecondaryRoutine_PlayerPalette\n\n\tTYA\n\tAND #$03\n\tTAY\n\tLDA SkyFlashColors, Y\n\nAreaSecondaryRoutine_PlayerPalette:\n\tSTA PPUBuffer_301 + 3, X\n\tLDA RestorePlayerPalette1\n\tSTA PPUBuffer_301 + 4, X\n\tLDA RestorePlayerPalette2\n\tSTA PPUBuffer_301 + 5, X\n\tLDA RestorePlayerPalette3\n\tSTA PPUBuffer_301 + 6, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 7, X\n\tTXA\n\tCLC\n\tADC #$07\n\tSTA byte_RAM_300\n\nAreaSecondaryRoutine_HealthBar:\n\tLDA #$30\n\tSTA byte_RAM_0\n\tJSR FindSpriteSlot\n\n\tLDA PlayerHealth\n\tBEQ AreaSecondaryRoutine_HealthBar_Draw\n\n\tAND #$F0\n\tLSR A\n\tLSR A\n\tADC #$04 ; max health\n\nAreaSecondaryRoutine_HealthBar_Draw:\n\tTAX\n\n\tLDA #$FE\n\tSTA byte_RAM_3\nAreaSecondaryRoutine_HealthBar_Loop:\n\tLDA HealthBarTiles, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$10\n\tSTA SpriteDMAArea + 3, Y\n\tLDA #$01\n\tSTA SpriteDMAArea + 2, Y\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea, Y\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tINX\n\tINY\n\tINY\n\tINY\n\tINY\n\tINC byte_RAM_3\n\tLDA byte_RAM_3\n\tCMP PlayerMaxHealth\n\tBNE AreaSecondaryRoutine_HealthBar_Loop\n\nAreaSecondaryRoutine_POW:\n\tLDA POWQuakeTimer\n\tBEQ AreaSecondaryRoutine_Exit\n\n\tDEC POWQuakeTimer\n\tLSR A\n\tAND #$01\n\tTAY\n\tLDA PPUScrollYMirror\n\tBPL AreaSecondaryRoutine_POW_OffsetScreen\n\n\tINY\n\tINY\n\nAreaSecondaryRoutine_POW_OffsetScreen:\n\tLDA POWQuakeOffsets, Y\n\tSTA BackgroundYOffset\n\tJMP KillOnscreenEnemies\n\nAreaSecondaryRoutine_Exit:\n\tRTS\n\n\nIFDEF RESET_CHR_LATCH\nSetBossTileset:\n\tSTA BossTileset\n\tINC ResetCHRLatch\n\tRTS\nENDIF\n\n\nIFDEF CONTROLLER_2_DEBUG\n;\n; Copies all character stats to RAM for hot-swapping the current character\n;\nCopyCarryYOffsets:\n\tLDX #(AreaMainRoutine - CarryYOffsets - 1)\nCopyCarryYOffsets_Loop:\n\tLDA CarryYOffsets, X\n\tSTA CarryYOffsetsRAM, X\n\tDEX\n\tBPL CopyCarryYOffsets_Loop\n\n\tRTS\n\nAreaDebugRoutine:\n\tLDA CreateObjectType\n\tBEQ AreaDebugRoutine_Exit\n\n\tJSR DebugCreateObject\n\nAreaDebugRoutine_Exit:\n\tRTS\n\n;\n; Input\n;   CreateObjectType = object type\n;\nDebugCreateObject:\n\tJSR CreateEnemy\n\n\tBMI AreaDebugRoutine_Exit\n\n\tLDX byte_RAM_0\n\tLDA CreateObjectType\n\tSTA ObjectType, X\n\tLDA ScreenBoundaryLeftLo\n\tADC #$80\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tADC #$00\n\tSTA ObjectYHi, X\n\n\tJSR InitializeEnemy\n\n\tLDA CreateObjectAttributes\n\tBEQ DebugCreateObject_ClearObjectType\n\nDebugCreateObject_ObjectCarried:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectTimer\n\n\tLDA #$01\n\tSTA HoldingItem\n\tSTA ObjectBeingCarriedTimer, X\n\tSTX ObjectBeingCarriedIndex\n\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\nDebugCreateObject_ObjectTimer:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectBottomScreen\n\n\tLDA #$FF\n\tSTA EnemyTimer, X\n\nDebugCreateObject_ObjectBottomScreen:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_Bit4\n\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$E0\n\tSTA ObjectYLo, X\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA ObjectYHi, X\n\nDebugCreateObject_Bit4:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_Bit3\n\nDebugCreateObject_Bit3:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_Bit2\n\nDebugCreateObject_Bit2:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectThrown\n\nDebugCreateObject_ObjectThrown:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectNoVelocityReset\n\n\tLDA #$01\n\tSTA EnemyArray_42F, X\n\nDebugCreateObject_ObjectNoVelocityReset:\n\tROL CreateObjectAttributes\n\tBCS DebugCreateObject_ClearObjectType\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\nDebugCreateObject_ClearObjectType:\n\tLDA #$00\n\tSTA CreateObjectType\n\nDebugCreateObject_Exit:\n\tRTS\n\nENDIF\n","sections":[{"comment":"\nBank 2 & Bank 3\n===============\n\nWhat's inside:\n\n- Enemy initialization and logic\n","content":"\nCarryYOffsets:\nCarryYOffsetBigLo:\n\t.db $FA ; Mario\n\t.db $F6 ; Princess\n\t.db $FC ; Toad\n\t.db $F7 ; Luigi\n\nCarryYOffsetBigHi:\n\t.db $FF ; Mario\n\t.db $FF ; Princess\n\t.db $FF ; Toad\n\t.db $FF ; Luigi\n\nCarryYOffsetSmallLo:\n\t.db $02 ; Mario\n\t.db $FE ; Princess\n\t.db $04 ; Toad\n\t.db $FF ; Luigi\n\nCarryYOffsetSmallHi:\n\t.db $00 ; Mario\n\t.db $FF ; Princess\n\t.db $00 ; Toad\n\t.db $FF ; Luigi\n\n\nAreaMainRoutine:\n\tLDA DoAreaTransition\n\tBEQ AreaMainRoutine_NoTransition\n\tRTS\n\nAreaMainRoutine_NoTransition:\n\tLDA AreaInitialized\n\tBEQ AreaInitialization\n\n\tJMP loc_BANK2_816C\n\n","htmlComment":"<h1>Bank 2 &#x26; Bank 3</h1>\n<p>What's inside:</p>\n<ul>\n<li>Enemy initialization and logic</li>\n</ul>\n","htmlContent":"\nCarryYOffsets:\nCarryYOffsetBigLo:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FA</span> <span class=\"token comment\">; Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F6</span> <span class=\"token comment\">; Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span> <span class=\"token comment\">; Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F7</span> <span class=\"token comment\">; Luigi</span>\n\nCarryYOffsetBigHi:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Luigi</span>\n\nCarryYOffsetSmallLo:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span> <span class=\"token comment\">; Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Luigi</span>\n\nCarryYOffsetSmallHi:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Luigi</span>\n\n\nAreaMainRoutine:\n\t<span class=\"token opcode property\">LDA</span> DoAreaTransition\n\t<span class=\"token opcode property\">BEQ</span> AreaMainRoutine_NoTransition\n\t<span class=\"token opcode property\">RTS</span>\n\nAreaMainRoutine_NoTransition:\n\t<span class=\"token opcode property\">LDA</span> AreaInitialized\n\t<span class=\"token opcode property\">BEQ</span> AreaInitialization\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">816</span>C\n\n","line":9},{"comment":"---------------------------------------------------------------------------","content":"AreaInitialization:\n\tINC AreaInitialized\n\tSTA byte_RAM_5BA\n\tSTA POWQuakeTimer\n\tSTA SkyFlashTimer\n\tSTA CrystalAndHawkmouthOpenSize\n\tSTA HawkmouthClosing\n\tSTA SwarmType\n\tSTA HawkmouthOpenTimer\n\tSTA ScrollXLock\n\tSTA VerticalScrollDirection\n\tSTA PlayerXVelocity\n\tSTA DamageInvulnTime\n\tSTA HoldingItem\n\tSTA PlayerStateTimer\n\tSTA BackgroundYOffset\n\tSTA PokeyTempScreenX\n\tSTA CrouchJumpTimer\n\tSTA JumpFloatTimer\n\tSTA QuicksandDepth\n\tSTA BossBeaten\n\nIFDEF RESET_CHR_LATCH\n\tLDY #$FF\n\tSTY BossTileset\n\tINC ResetCHRLatch\nENDIF\n\n\tLDY #$1B\nAreaInitialization_CarryYOffsetLoop:","htmlComment":"<hr>\n","htmlContent":"AreaInitialization:\n\t<span class=\"token opcode property\">INC</span> AreaInitialized\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>BA\n\t<span class=\"token opcode property\">STA</span> POWQuakeTimer\n\t<span class=\"token opcode property\">STA</span> SkyFlashTimer\n\t<span class=\"token opcode property\">STA</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">STA</span> HawkmouthClosing\n\t<span class=\"token opcode property\">STA</span> SwarmType\n\t<span class=\"token opcode property\">STA</span> HawkmouthOpenTimer\n\t<span class=\"token opcode property\">STA</span> ScrollXLock\n\t<span class=\"token opcode property\">STA</span> VerticalScrollDirection\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">STA</span> DamageInvulnTime\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">STA</span> BackgroundYOffset\n\t<span class=\"token opcode property\">STA</span> PokeyTempScreenX\n\t<span class=\"token opcode property\">STA</span> CrouchJumpTimer\n\t<span class=\"token opcode property\">STA</span> JumpFloatTimer\n\t<span class=\"token opcode property\">STA</span> QuicksandDepth\n\t<span class=\"token opcode property\">STA</span> BossBeaten\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STY</span> BossTileset\n\t<span class=\"token opcode property\">INC</span> ResetCHRLatch\nENDIF\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$1B</span>\nAreaInitialization_CarryYOffsetLoop:","line":48},{"comment":"Copy the global carrying Y offsets to memory\nThese are used for every character for different frames of the pickup animation","content":"\tLDA ItemCarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM, Y\n\tDEY\n\tBPL AreaInitialization_CarryYOffsetLoop\n\nIFDEF CONTROLLER_2_DEBUG\n\tJSR CopyCarryYOffsets\nENDIF\n","htmlComment":"<p>Copy the global carrying Y offsets to memory\nThese are used for every character for different frames of the pickup animation</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ItemCarryYOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> AreaInitialization_CarryYOffsetLoop\n\nIFDEF CONTROLLER_<span class=\"token decimalnumber string\">2</span>_DEBUG\n\t<span class=\"token opcode property\">JSR</span> CopyCarryYOffsets\nENDIF\n","line":81},{"comment":"Copy the character-specific FINAL carrying heights into memory","content":"\tLDY CurrentCharacter\n\tLDA CarryYOffsetBigLo, Y\n\tSTA ItemCarryYOffsetsRAM\n\tLDA CarryYOffsetSmallLo, Y\n\tSTA ItemCarryYOffsetsRAM + $07\n\tLDA CarryYOffsetBigHi, Y\n\tSTA ItemCarryYOffsetsRAM + $0E\n\tLDA CarryYOffsetSmallHi, Y\n\tSTA ItemCarryYOffsetsRAM + $15\n\n\tLDA #$B6\n\tSTA PseudoRNGValues\n\tLDA TransitionType\n","htmlComment":"<p>Copy the character-specific FINAL carrying heights into memory</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> CurrentCharacter\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetBigLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetSmallLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM + <span class=\"token hexnumber string\">$07</span>\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetBigHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM + <span class=\"token hexnumber string\">$0E</span>\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetSmallHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM + <span class=\"token hexnumber string\">$15</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$B6</span>\n\t<span class=\"token opcode property\">STA</span> PseudoRNGValues\n\t<span class=\"token opcode property\">LDA</span> TransitionType\n","line":91},{"comment":"Play the slide-whistle when you start the game and drop into 1-1","content":"\tORA CurrentLevel\n\tBNE AreaInitialization_CheckObjectCarriedOver\n\n\tLDA #SoundEffect2_IntroFallSlide\n\tSTA SoundEffectQueue2\n\nAreaInitialization_CheckObjectCarriedOver:\n\tLDA ObjectCarriedOver\n\tBEQ AreaInitialization_SetEnemyData\n\n\tLDX #$05\n\tSTX byte_RAM_12\n\tCMP #Enemy_Mushroom\n\tBEQ AreaInitialization_SetEnemyData\n\n\tSTA ObjectType, X\n\tLDY #EnemyState_Alive\n\tSTY EnemyState + 5\n\tLDY #$FF\n\tSTY unk_RAM_441 + 5\n\tCMP #Enemy_Rocket\n\tBNE AreaInitialization_NonRocketCarryOver\n\nAreaInitialization_Rocket:","htmlComment":"<p>Play the slide-whistle when you start the game and drop into 1-1</p>\n","htmlContent":"\t<span class=\"token opcode property\">ORA</span> CurrentLevel\n\t<span class=\"token opcode property\">BNE</span> AreaInitialization_CheckObjectCarriedOver\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">2</span>_IntroFallSlide\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">2</span>\n\nAreaInitialization_CheckObjectCarriedOver:\n\t<span class=\"token opcode property\">LDA</span> ObjectCarriedOver\n\t<span class=\"token opcode property\">BEQ</span> AreaInitialization_SetEnemyData\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Mushroom\n\t<span class=\"token opcode property\">BEQ</span> AreaInitialization_SetEnemyData\n\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">STY</span> EnemyState + <span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STY</span> unk_RAM_<span class=\"token decimalnumber string\">441</span> + <span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Rocket\n\t<span class=\"token opcode property\">BNE</span> AreaInitialization_NonRocketCarryOver\n\nAreaInitialization_Rocket:","line":106},{"comment":"A = $38 (Enemy_Rocket)\nX = $05 (from above)","content":"\tSTA EnemyArray_B1, X\n\tSTA PlayerInRocket, X ; Bug? This sets ObjectXAcceleration for enemy 0\n\tSTA EnemyArray_477, X\n\tLDA #$00\n\tSTA ObjectXHi, X\n\tSTA ObjectYHi, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\tASL A\n\tSTA ObjectYLo, X\n\tLDA #$78\n\tSTA ObjectXLo, X\n\tBNE AreaInitialization_SetEnemyData\n\nAreaInitialization_NonRocketCarryOver:\n\tPHA\n\tSTX ObjectBeingCarriedIndex\n\tJSR EnemyInit_Basic\n\n\tLDA #$01\n\tSTA ObjectBeingCarriedTimer, X\n\tSTA HoldingItem\n\tJSR CarryObject\n\n\tPLA\n\tCMP #Enemy_Key\n\tBNE AreaInitialization_SetEnemyData\n\nAreaInitialization_KeyCarryOver:\n\tINC EnemyVariable, X\n\tDEX\n\tSTX byte_RAM_12\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, X\n\tLDA #Enemy_Phanto\n\tSTA ObjectType, X\n\tJSR EnemyInit_Basic\n\n\tLDA #$00\n\tSTA PhantoActivateTimer\n\tLDA ScreenYLo\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tSTA ObjectYHi, X\n\tLDA ScreenBoundaryLeftLo\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tSTA ObjectXHi, X\n\tJSR UnlinkEnemyFromRawData\n\nAreaInitialization_SetEnemyData:\n\tLDA #<RawEnemyDataAddr\n\tSTA RawEnemyData\n\tLDA #>RawEnemyDataAddr\n\tSTA RawEnemyData + 1\n\tLDA IsHorizontalLevel\n\tBNE AreaInitialization_HorizontalArea\n\nAreaInitialization_VerticalArea:","htmlComment":"<p>A = $38 (Enemy_Rocket)\nX = $05 (from above)</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerInRocket, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Bug? This sets ObjectXAcceleration for enemy 0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$78</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> AreaInitialization_SetEnemyData\n\nAreaInitialization_NonRocketCarryOver:\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">STX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\t<span class=\"token opcode property\">JSR</span> CarryObject\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Key\n\t<span class=\"token opcode property\">BNE</span> AreaInitialization_SetEnemyData\n\nAreaInitialization_KeyCarryOver:\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Phanto\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PhantoActivateTimer\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> UnlinkEnemyFromRawData\n\nAreaInitialization_SetEnemyData:\n\t<span class=\"token opcode property\">LDA</span> #&#x3C;RawEnemyDataAddr\n\t<span class=\"token opcode property\">STA</span> RawEnemyData\n\t<span class=\"token opcode property\">LDA</span> #>RawEnemyDataAddr\n\t<span class=\"token opcode property\">STA</span> RawEnemyData + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> AreaInitialization_HorizontalArea\n\nAreaInitialization_VerticalArea:","line":132},{"comment":"Loads area enemies based on the vertical screen scroll","content":"\tLDA #$14\n\tSTA byte_RAM_9\n\tLDA ScreenYLo\n\tSBC #$30\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenYHi\n\tSBC #$00\n\tSTA byte_RAM_6\n\nloc_BANK2_8124:\n\tLDA byte_RAM_6\n\tCMP #$0B\n\tBCS loc_BANK2_8130\n\n\tJSR loc_BANK2_8311\n\tJSR loc_BANK2_8311\n\nloc_BANK2_8130:\n\tJSR sub_BANK2_8138\n\n\tDEC byte_RAM_9\n\tBPL loc_BANK2_8124\n\n\tRTS\n","htmlComment":"<p>Loads area enemies based on the vertical screen scroll</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$14</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8124</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8130</span>\n\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8311</span>\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8311</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8130</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8138</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8124</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n","line":194},{"comment":"End of function AreaMainRoutine","content":"\n","htmlComment":"<p>End of function AreaMainRoutine</p>\n","htmlContent":"\n","line":221},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_8138:\n\tLDA byte_RAM_5\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_5\n\tBCC locret_BANK2_8143\n\n\tINC byte_RAM_6\n\nlocret_BANK2_8143:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8138</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BCC</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8143</span>\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8143</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":223},{"comment":"End of function sub_BANK2_8138","content":"\n","htmlComment":"<p>End of function sub_BANK2_8138</p>\n","htmlContent":"\n","line":237},{"comment":"---------------------------------------------------------------------------","content":"AreaInitialization_HorizontalArea:","htmlComment":"<hr>\n","htmlContent":"AreaInitialization_HorizontalArea:","line":239},{"comment":"Loads area enemies based on the horizontal screen scroll","content":"\tLDA ScreenBoundaryLeftLo\n\tSBC #$30\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenBoundaryLeftHi\n\tSBC #$00\n\tSTA byte_RAM_6\n\tLDA #$17\n\tSTA byte_RAM_9\n\nloc_BANK2_8158:\n\tLDA byte_RAM_6\n\tCMP #$B\n\tBCS loc_BANK2_8164\n\n\tJSR sub_BANK2_827D\n\tJSR sub_BANK2_827D\n\nloc_BANK2_8164:\n\tJSR sub_BANK2_8138\n\n\tDEC byte_RAM_9\n\tBPL loc_BANK2_8158\n\n\tRTS\n\n","htmlComment":"<p>Loads area enemies based on the horizontal screen scroll</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$17</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8158</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> #$B\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8164</span>\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">827</span>D\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">827</span>D\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8164</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8138</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8158</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":242},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_816C:\n\tJSR loc_BANK2_8256\n\nIFDEF RESET_CHR_LATCH\n\tJSR CheckResetCHRLatch\nENDIF\n\n\tLDA StopwatchTimer\n\tBEQ loc_BANK2_8185\n\n\tLDA byte_RAM_10\n\tAND #$1F\n\tBNE loc_BANK2_817F\n\n\tLDY #SoundEffect1_StopwatchTick\n\tSTY SoundEffectQueue1\n\nloc_BANK2_817F:\n\tLSR A\n\tBCC loc_BANK2_8185\n\n\tDEC StopwatchTimer\n\nloc_BANK2_8185:\n\tLDA ScreenBoundaryLeftLo\n\tCLC\n\tADC #$FF\n\tSTA ScreenBoundaryRightLo\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ScreenBoundaryRightHi\n\tLDX #$08\n\nloc_BANK2_8198:\n\tSTX byte_RAM_12\n\tTXA\n\tCLC\n\tADC SpriteFlickerSlot\n\tTAY\n\nloc_BANK2_81A0:\n\tLDA SpriteFlickerDMAOffset, Y\n\tLDY ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_81B1\n\n\tLDA #Enemy_BeezoStraight\n\tLDY ObjectType, X\n\tCMP #Enemy_Rocket\n\tBNE loc_BANK2_81B1\n\n\tLDA #$00\n\nloc_BANK2_81B1:\n\tSTA byte_RAM_F4\n\tLDA EnemyState, X\n\tCMP #EnemyState_Dead\n\tBCS loc_BANK2_81C4\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_81C4\n\n\tLDA StopwatchTimer\n\tBNE loc_BANK2_81D2\n\nloc_BANK2_81C4:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_81CA\n\n\tDEC EnemyTimer, X\n\nloc_BANK2_81CA:\n\tLDA EnemyArray_453, X\n\tBEQ loc_BANK2_81D2\n\n\tDEC EnemyArray_453, X\n\nloc_BANK2_81D2:\n\tLDA EnemyArray_45C, X\n\nloc_BANK2_81D5:\n\tBEQ loc_BANK2_81DA\n\n\tDEC EnemyArray_45C, X\n\nloc_BANK2_81DA:\n\tLDA EnemyArray_438, X\n\tBEQ loc_BANK2_81E7\n\n\tLDA byte_RAM_10\n\tLSR A\n\tBCC loc_BANK2_81E7\n\n\tDEC EnemyArray_438, X\n\nloc_BANK2_81E7:\n\tJSR DoPRNGBullshitProbably\n\n\tJSR PutCarriedObjectInHands\n\n\tJSR HandleEnemyState\n\n\tLDX byte_RAM_12\n\tDEX\n\tBPL loc_BANK2_8198\n\n\tLDA SwarmType\n\tBEQ HandleEnemyState_Inactive\n\nInitializeSwarm:\n\tSEC\n\tSBC #((EnemyInitializationTable_End - EnemyInitializationTable) / 2)\n\nInitializeSwarmRelative:\n\tJSR JumpToTableAfterJump\n\n\nGeneratorInitializationTable:\n\t.dw Swarm_AlbatossCarryingBobOmb\n\t.dw Swarm_BeezoDiving\n\t.dw Swarm_Stop\n\t.dw Generator_VegetableThrower\nGeneratorInitializationTable_End:\n\n\nSwarm_Stop:\n\tLDA #$00\n\tSTA SwarmType\n\nHandleEnemyState_Inactive:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">816</span>C:\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8256</span>\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">JSR</span> CheckResetCHRLatch\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> StopwatchTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8185</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">817</span>F\n\n\t<span class=\"token opcode property\">LDY</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_StopwatchTick\n\t<span class=\"token opcode property\">STY</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">817</span>F:\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8185</span>\n\n\t<span class=\"token opcode property\">DEC</span> StopwatchTimer\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8185</span>:\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryRightLo\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryRightHi\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$08</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8198</span>:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> SpriteFlickerSlot\n\t<span class=\"token opcode property\">TAY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> SpriteFlickerDMAOffset, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>B<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_BeezoStraight\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Rocket\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>B<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>B<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Dead\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>C<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>C<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> StopwatchTimer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>D<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>C<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>CA\n\n\t<span class=\"token opcode property\">DEC</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>CA:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>D<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>D<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>D<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>DA\n\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>DA:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>E<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>E<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">81</span>E<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">JSR</span> DoPRNGBullshitProbably\n\n\t<span class=\"token opcode property\">JSR</span> PutCarriedObjectInHands\n\n\t<span class=\"token opcode property\">JSR</span> HandleEnemyState\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8198</span>\n\n\t<span class=\"token opcode property\">LDA</span> SwarmType\n\t<span class=\"token opcode property\">BEQ</span> HandleEnemyState_Inactive\n\nInitializeSwarm:\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #((EnemyInitializationTable_End - EnemyInitializationTable) / <span class=\"token decimalnumber string\">2</span>)\n\nInitializeSwarmRelative:\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\nGeneratorInitializationTable:\n\t<span class=\"token directive keyword\">.dw</span> Swarm_AlbatossCarryingBobOmb\n\t<span class=\"token directive keyword\">.dw</span> Swarm_BeezoDiving\n\t<span class=\"token directive keyword\">.dw</span> Swarm_Stop\n\t<span class=\"token directive keyword\">.dw</span> Generator_VegetableThrower\nGeneratorInitializationTable_End:\n\n\nSwarm_Stop:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> SwarmType\n\nHandleEnemyState_Inactive:\n\t<span class=\"token opcode property\">RTS</span>\n","line":269},{"comment":"End of function Swarm_Stop","content":"","htmlComment":"<p>End of function Swarm_Stop</p>\n","htmlContent":"","line":403},{"comment":"=============== S U B R O U T I N E =======================================","content":"\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"\n","line":405},{"comment":"I am very good at figuring out what things do. Yes.","content":"DoPRNGBullshitProbably:\n\tLDY #$00\n\tJSR sub_BANK2_8214\n\n\tINY\n","htmlComment":"<p>I am very good at figuring out what things do. Yes.</p>\n","htmlContent":"DoPRNGBullshitProbably:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8214</span>\n\n\t<span class=\"token opcode property\">INY</span>\n","line":407},{"comment":"End of function DoPRNGBullshitProbably","content":"\n","htmlComment":"<p>End of function DoPRNGBullshitProbably</p>\n","htmlContent":"\n","line":415},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_8214:\n\tLDA PseudoRNGValues\n\tASL A\n\tASL A\n\tSEC\n\tADC PseudoRNGValues\n\tSTA PseudoRNGValues\n\tASL PseudoRNGValues + 1\n\tLDA #$20\n\tBIT PseudoRNGValues + 1\n\tBCC loc_BANK2_822E\n\n\tBEQ loc_BANK2_8233\n\n\tBNE loc_BANK2_8230\n\nloc_BANK2_822E:\n\tBNE loc_BANK2_8233\n\nloc_BANK2_8230:\n\tINC PseudoRNGValues + 1\n\nloc_BANK2_8233:\n\tLDA PseudoRNGValues + 1\n\tEOR PseudoRNGValues\n\tSTA PseudoRNGValues + 2, Y\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8214</span>:\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">ADC</span> PseudoRNGValues\n\t<span class=\"token opcode property\">STA</span> PseudoRNGValues\n\t<span class=\"token opcode property\">ASL</span> PseudoRNGValues + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BIT</span> PseudoRNGValues + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">822</span>E\n\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8233</span>\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8230</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">822</span>E:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8233</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8230</span>:\n\t<span class=\"token opcode property\">INC</span> PseudoRNGValues + <span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8233</span>:\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">EOR</span> PseudoRNGValues\n\t<span class=\"token opcode property\">STA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":417},{"comment":"End of function sub_BANK2_8214","content":"\n","htmlComment":"<p>End of function sub_BANK2_8214</p>\n","htmlContent":"\n","line":447},{"comment":"---------------------------------------------------------------------------","content":"HandleEnemyState:\n\tLDA EnemyState, X\n\tJSR JumpToTableAfterJump\n\n\t.dw HandleEnemyState_Inactive ; 0 (not active)\n\t.dw HandleEnemyState_Alive ; Alive\n\t.dw HandleEnemyState_Dead ; Dead\n\t.dw HandleEnemyState_BlockFizzle ; Block fizzle\n\t.dw HandleEnemyState_BombExploding ; Bomb exploding\n\t.dw HandleEnemyState_PuffOfSmoke ; Puff of smoke\n\t.dw HandleEnemyState_Sand ; Sand after digging\n\t.dw loc_BANK2_85B2 ; Object carried/thrown?\n\n\nbyte_BANK2_8252:\n\t.db $18\n\t.db $E0\n\t.db $01\n\t.db $FF\n\n\nloc_BANK2_8256:\n\tLDA BossBeaten\n\tBNE locret_BANK2_82AB\n\n\tLDA IsHorizontalLevel\n\tJSR JumpToTableAfterJump\n\n\t.dw loc_BANK2_82ED ; vertical\n\t.dw loc_BANK2_8264 ; horizontal\n\n\nloc_BANK2_8264:\n\tLDY PlayerMovementDirection\n\tLDA ScreenBoundaryLeftLo\n\tCLC\n\tADC byte_BANK2_8252 - 1, Y\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenBoundaryLeftHi\n\tADC byte_BANK2_8252 + 1, Y\n\tSTA byte_RAM_6\n\tCMP #$0A\n\tBCS locret_BANK2_82AB\n\n","htmlComment":"<hr>\n","htmlContent":"HandleEnemyState:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_Inactive <span class=\"token comment\">; 0 (not active)</span>\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_Alive <span class=\"token comment\">; Alive</span>\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_Dead <span class=\"token comment\">; Dead</span>\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_BlockFizzle <span class=\"token comment\">; Block fizzle</span>\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_BombExploding <span class=\"token comment\">; Bomb exploding</span>\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_PuffOfSmoke <span class=\"token comment\">; Puff of smoke</span>\n\t<span class=\"token directive keyword\">.dw</span> HandleEnemyState_Sand <span class=\"token comment\">; Sand after digging</span>\n\t<span class=\"token directive keyword\">.dw</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>B<span class=\"token decimalnumber string\">2</span> <span class=\"token comment\">; Object carried/thrown?</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8252</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8256</span>:\n\t<span class=\"token opcode property\">LDA</span> BossBeaten\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AB\n\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\t<span class=\"token directive keyword\">.dw</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>ED <span class=\"token comment\">; vertical</span>\n\t<span class=\"token directive keyword\">.dw</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8264</span> <span class=\"token comment\">; horizontal</span>\n\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8264</span>:\n\t<span class=\"token opcode property\">LDY</span> PlayerMovementDirection\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8252</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8252</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AB\n\n","line":449},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_827D:\n\tLDA InSubspaceOrJar\n\tCMP #$02\n\tBEQ locret_BANK2_82AB\n\n\tLDX #$00\n\tSTX byte_RAM_0\n\nloc_BANK2_8288:\n\tCPX byte_RAM_6\n\tBEQ loc_BANK2_8298\n\n\tLDA byte_RAM_0\n\tTAY\n\tCLC\n\tADC (RawEnemyData), Y\n\tSTA byte_RAM_0\n\tINX\n\tJMP loc_BANK2_8288\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">827</span>D:\n\t<span class=\"token opcode property\">LDA</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AB\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8288</span>:\n\t<span class=\"token opcode property\">CPX</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8298</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8288</span>\n\n","line":496},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8298:\n\tLDY byte_RAM_0\n\tLDA (RawEnemyData), Y\n\tSTA byte_RAM_1\n\tLDX #$FF\n\tDEY\n\nloc_BANK2_82A1:\n\tINY\n\tINY\n\tINX\n\tINX\n\tCPX byte_RAM_1\n\tBCC loc_BANK2_82AC\n\n\tLDX byte_RAM_12\n\nlocret_BANK2_82AB:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8298</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPX</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AC\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AB:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":518},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_82AC:\n\tLDA (RawEnemyData), Y\n\tBMI loc_BANK2_82A1\n\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\n\tAND #$F0\n\tCMP byte_RAM_5\n\tBNE loc_BANK2_82A1\n\n\tLDA (RawEnemyData), Y\n\tCMP #Enemy_BossBirdo\n\tBCS loc_BANK2_82C8\n\n\tCMP #((EnemyInitializationTable_End - EnemyInitializationTable) / 2)\n\tBCC loc_BANK2_82C8\n\n\tSTA SwarmType\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AC:\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BossBirdo\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>C<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">CMP</span> #((EnemyInitializationTable_End - EnemyInitializationTable) / <span class=\"token decimalnumber string\">2</span>)\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>C<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">STA</span> SwarmType\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":540},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_82C8:\n\tLDX #$04\nloc_BANK2_82CA:\n\tLDA EnemyState, X\n\tBEQ loc_BANK2_82D2\n\n\tDEX\n\tBPL loc_BANK2_82CA\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>C<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$04</span>\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>CA:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>D<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>CA\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":564},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_82D2:\n\tSTX byte_RAM_12\n\tLDA byte_RAM_5\n\tSTA ObjectXLo, X\n\tLDA byte_RAM_6\n\tSTA ObjectXHi, X\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA ObjectYHi, X\n\tJMP loc_BANK2_8377\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>D<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8377</span>\n","line":577},{"comment":"End of function sub_BANK2_827D","content":"\n","htmlComment":"<p>End of function sub_BANK2_827D</p>\n","htmlContent":"\n","line":597},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_82ED:\n\tLDA byte_RAM_10\n\tAND #$01\n\tTAY\n\tINY\n\tLDA NeedVerticalScroll\n\tBEQ loc_BANK2_82FC\n\n\tAND #$03\n\tEOR #$03\n\tTAY\n\nloc_BANK2_82FC:\n\tLDA ScreenYLo\n\tCLC\n\tADC byte_BANK2_8252 - 1, Y\n\tAND #$F0\n\tSTA byte_RAM_5\n\tLDA ScreenYHi\n\tADC byte_BANK2_8252 + 1, Y\n\tSTA byte_RAM_6\n\tCMP #$0A\n\tBCS locret_BANK2_82AB\n\nloc_BANK2_8311:\n\tLDX #$00\n\tSTX byte_RAM_0\n\nloc_BANK2_8315:\n\tCPX byte_RAM_6\n\tBEQ loc_BANK2_8325\n\n\tLDA byte_RAM_0\n\tTAY\n\tCLC\n\tADC (RawEnemyData), Y\n\tSTA byte_RAM_0\n\tINX\n\tJMP loc_BANK2_8315\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>ED:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>FC\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>FC:\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8252</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8252</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">82</span>AB\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8311</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8315</span>:\n\t<span class=\"token opcode property\">CPX</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8325</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8315</span>\n\n","line":599},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8325:\n\tLDY byte_RAM_0\n\tLDA (RawEnemyData), Y\n\tSTA byte_RAM_1\n\tLDX #$FF\n\tDEY\n\nloc_BANK2_832E:\n\tINY\n\tINY\n\tINX\n\tINX\n\tCPX byte_RAM_1\n\tBCC loc_BANK2_8339\n\n\tLDX byte_RAM_12\n\nlocret_BANK2_8338:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8325</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">832</span>E:\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPX</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8339</span>\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8338</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":641},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8339:\n\tLDA (RawEnemyData), Y\n\tBMI loc_BANK2_832E\n\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCMP byte_RAM_5\n\tBNE loc_BANK2_832E\n\n\tLDA (RawEnemyData), Y\n\tCMP #Enemy_BossBirdo\n\tBCS loc_BANK2_8357\n\n\tCMP #((EnemyInitializationTable_End - EnemyInitializationTable) / 2)\n\tBCC loc_BANK2_8357\n\n\tSTA SwarmType\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8339</span>:\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">832</span>E\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">832</span>E\n\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BossBirdo\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8357</span>\n\n\t<span class=\"token opcode property\">CMP</span> #((EnemyInitializationTable_End - EnemyInitializationTable) / <span class=\"token decimalnumber string\">2</span>)\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8357</span>\n\n\t<span class=\"token opcode property\">STA</span> SwarmType\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":663},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8357:\n\tLDX #$04\nloc_BANK2_8359:\n\tLDA EnemyState, X\n\tBEQ loc_BANK2_8361\n\n\tDEX\n\tBPL loc_BANK2_8359\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8357</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$04</span>\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8359</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8361</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8359</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":689},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8361:\n\tSTX byte_RAM_12\n\tLDA byte_RAM_5\n\tSTA ObjectYLo, X\n\tLDA byte_RAM_6\n\tSTA ObjectYHi, X\n\tINY\n\tLDA (RawEnemyData), Y\n\tDEY\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA #$00\n\tSTA ObjectXHi, X\n\nloc_BANK2_8377:\n\tSTA EnemyArray_SpawnsDoor, X\n\tSTY byte_RAM_C\n\tLDA (RawEnemyData), Y\n\tAND #%00111111\n\tCMP #$32\n\tBCS loc_BANK2_8393\n\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK2_8393\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$18\n\tCMP #$30\n\tBCC locret_BANK2_8338\n\nloc_BANK2_8393:","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8361</span>:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8377</span>:\n\t<span class=\"token opcode property\">STA</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00111111</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$32</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8393</span>\n\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8393</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BCC</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8338</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8393</span>:","line":702},{"comment":"enable bit 7 of the raw enemy data to indicate that the enemy has spawned","content":"\tLDY byte_RAM_C\n\tLDA (RawEnemyData), Y\n\tORA #%10000000\n\tSTA (RawEnemyData), Y\n\n\tCMP #%10000000 | Enemy_BossBirdo\n\tAND #%01111111\n\tBCC loc_BANK2_83A6\n\n\tAND #%00111111\n\tSTA EnemyArray_SpawnsDoor, X\n\nloc_BANK2_83A6:\n\tSTA ObjectType, X\n\tTYA\n\tSTA unk_RAM_441, X\n\tINC EnemyState, X\n\tLDA ObjectType, X\n\nInitializeEnemy:\n\tJSR JumpToTableAfterJump\n","htmlComment":"<p>enable bit 7 of the raw enemy data to indicate that the enemy has spawned</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token binarynumber string\">#%10000000</span>\n\t<span class=\"token opcode property\">STA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token binarynumber string\">#%10000000</span> | Enemy_BossBirdo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%01111111</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">83</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00111111</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">83</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\nInitializeEnemy:\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n","line":737},{"comment":"---------------------------------------------------------------------------","content":"EnemyInitializationTable:\n\t.dw EnemyInit_Basic ; Heart\n\t.dw EnemyInit_Basic ; ShyguyRed\n\t.dw EnemyInit_Basic ; Tweeter\n\t.dw EnemyInit_Basic ; ShyguyPink\n\t.dw EnemyInit_Basic ; Porcupo\n\t.dw EnemyInit_Basic ; SnifitRed\n\t.dw EnemyInit_Stationary ; SnifitGray\n\t.dw EnemyInit_Basic ; SnifitPink\n\t.dw EnemyInit_Basic ; Ostro\n\t.dw EnemyInit_Bobomb ; BobOmb\n\t.dw EnemyInit_Basic ; AlbatossCarryingBobOmb\n\t.dw EnemyInit_AlbatossStartRight ; AlbatossStartRight\n\t.dw EnemyInit_AlbatossStartLeft ; AlbatossStartLeft\n\t.dw EnemyInit_Basic ; NinjiRunning\n\t.dw EnemyInit_Stationary ; NinjiJumping\n\t.dw EnemyInit_BeezoDiving ; BeezoDiving\n\t.dw EnemyInit_Basic ; BeezoStraight\n\t.dw EnemyInit_Basic ; WartBubble\n\t.dw EnemyInit_Basic ; Pidgit\n\t.dw EnemyInit_Trouter ; Trouter\n\t.dw EnemyInit_Basic ; Hoopstar\n\t.dw EnemyInit_JarGenerators ; JarGeneratorShyguy\n\t.dw EnemyInit_JarGenerators ; JarGeneratorBobOmb\n\t.dw EnemyInit_Phanto ; Phanto\n\t.dw EnemyInit_Cobrats ; CobratJar\n\t.dw EnemyInit_Cobrats ; CobratSand\n\t.dw EnemyInit_Pokey ; Pokey\n\t.dw EnemyInit_Basic ; Bullet\n\t.dw EnemyInit_Birdo ; Birdo\n\t.dw EnemyInit_Mouser ; Mouser\n\t.dw EnemyInit_Basic ; Egg\n\t.dw EnemyInit_Tryclyde ; Tryclyde\n\t.dw EnemyInit_Basic ; Fireball\n\t.dw EnemyInit_Clawgrip ; Clawgrip\n\t.dw EnemyInit_Basic ; ClawgripRock\n\t.dw EnemyInit_Stationary ; PanserStationaryFiresAngled\n\t.dw EnemyInit_Basic ; PanserWalking\n\t.dw EnemyInit_Stationary ; PanserStationaryFiresUp\n\t.dw EnemyInit_Basic ; Autobomb\n\t.dw EnemyInit_Basic ; AutobombFire\n\t.dw EnemyInit_WhaleSpout ; WhaleSpout\n\t.dw EnemyInit_Basic ; Flurry\n\t.dw EnemyInit_Fryguy ; Fryguy\n\t.dw EnemyInit_Fryguy ; FryguySplit\n\t.dw EnemyInit_Wart ; Wart\n\t.dw EnemyInit_HawkmouthBoss ; HawkmouthBoss\n\t.dw EnemyInit_Sparks ; Spark1\n\t.dw EnemyInit_Sparks ; Spark2\n\t.dw EnemyInit_Sparks ; Spark3\n\t.dw EnemyInit_Sparks ; Spark4\n\t.dw EnemyInit_Basic ; VegetableSmall\n\t.dw EnemyInit_Basic ; VegetableLarge\n\t.dw EnemyInit_Basic ; VegetableWart\n\t.dw EnemyInit_Basic ; Shell\n\t.dw EnemyInit_Basic ; Coin\n\t.dw EnemyInit_Basic ; Bomb\n\t.dw EnemyInit_Basic ; Rocket\n\t.dw EnemyInit_Basic ; MushroomBlock\n\t.dw EnemyInit_Basic ; POWBlock\n\t.dw EnemyInit_FallingLogs ; FallingLogs\n\t.dw EnemyInit_Basic ; SubspaceDoor\n\t.dw EnemyInit_Key ; Key\n\t.dw EnemyInit_Basic ; SubspacePotion\n\t.dw EnemyInit_Stationary ; Mushroom\n\t.dw EnemyInit_Stationary ; Mushroom1up\n\t.dw EnemyInit_Basic ; FlyingCarpet\n\t.dw EnemyInit_Hawkmouth ; HawkmouthRight\n\t.dw EnemyInit_Hawkmouth ; HawkmouthLeft\n\t.dw EnemyInit_CrystalBallStarmanStopwatch ; CrystalBall\n\t.dw EnemyInit_CrystalBallStarmanStopwatch ; Starman\n\t.dw EnemyInit_CrystalBallStarmanStopwatch ; Stopwatch\nEnemyInitializationTable_End:\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInitializationTable:\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Heart</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; ShyguyRed</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Tweeter</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; ShyguyPink</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Porcupo</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; SnifitRed</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Stationary <span class=\"token comment\">; SnifitGray</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; SnifitPink</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Ostro</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Bobomb <span class=\"token comment\">; BobOmb</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; AlbatossCarryingBobOmb</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_AlbatossStartRight <span class=\"token comment\">; AlbatossStartRight</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_AlbatossStartLeft <span class=\"token comment\">; AlbatossStartLeft</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; NinjiRunning</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Stationary <span class=\"token comment\">; NinjiJumping</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_BeezoDiving <span class=\"token comment\">; BeezoDiving</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; BeezoStraight</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; WartBubble</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Pidgit</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Trouter <span class=\"token comment\">; Trouter</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Hoopstar</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_JarGenerators <span class=\"token comment\">; JarGeneratorShyguy</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_JarGenerators <span class=\"token comment\">; JarGeneratorBobOmb</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Phanto <span class=\"token comment\">; Phanto</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Cobrats <span class=\"token comment\">; CobratJar</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Cobrats <span class=\"token comment\">; CobratSand</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Pokey <span class=\"token comment\">; Pokey</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Bullet</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Birdo <span class=\"token comment\">; Birdo</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Mouser <span class=\"token comment\">; Mouser</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Egg</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Tryclyde <span class=\"token comment\">; Tryclyde</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Fireball</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Clawgrip <span class=\"token comment\">; Clawgrip</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; ClawgripRock</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Stationary <span class=\"token comment\">; PanserStationaryFiresAngled</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; PanserWalking</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Stationary <span class=\"token comment\">; PanserStationaryFiresUp</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Autobomb</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; AutobombFire</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_WhaleSpout <span class=\"token comment\">; WhaleSpout</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Flurry</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Fryguy <span class=\"token comment\">; Fryguy</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Fryguy <span class=\"token comment\">; FryguySplit</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Wart <span class=\"token comment\">; Wart</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_HawkmouthBoss <span class=\"token comment\">; HawkmouthBoss</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Sparks <span class=\"token comment\">; Spark1</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Sparks <span class=\"token comment\">; Spark2</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Sparks <span class=\"token comment\">; Spark3</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Sparks <span class=\"token comment\">; Spark4</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; VegetableSmall</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; VegetableLarge</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; VegetableWart</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Shell</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Coin</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Bomb</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; Rocket</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; MushroomBlock</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; POWBlock</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_FallingLogs <span class=\"token comment\">; FallingLogs</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; SubspaceDoor</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Key <span class=\"token comment\">; Key</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; SubspacePotion</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Stationary <span class=\"token comment\">; Mushroom</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Stationary <span class=\"token comment\">; Mushroom1up</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Basic <span class=\"token comment\">; FlyingCarpet</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Hawkmouth <span class=\"token comment\">; HawkmouthRight</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_Hawkmouth <span class=\"token comment\">; HawkmouthLeft</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_CrystalBallStarmanStopwatch <span class=\"token comment\">; CrystalBall</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_CrystalBallStarmanStopwatch <span class=\"token comment\">; Starman</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyInit_CrystalBallStarmanStopwatch <span class=\"token comment\">; Stopwatch</span>\nEnemyInitializationTable_End:\n\n","line":760},{"comment":"\nSets enemy attributes to the default for the object type\n\nInput\nX = enemy index\n","content":"SetEnemyAttributes:\n\tLDY ObjectType, X\n\tLDA ObjectAttributeTable, Y\n\tAND #$7F\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_46E_Data, Y\n\tSTA EnemyArray_46E, X\n\tLDA EnemyArray_489_Data, Y\n\tSTA EnemyArray_489, X\n\tLDA EnemyArray_492_Data, Y\n\tSTA EnemyArray_492, X\n\tRTS\n\n","htmlComment":"<p>Sets enemy attributes to the default for the object type</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"SetEnemyAttributes:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributeTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">492</span>_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">492</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":841},{"comment":"\nEnemy initialization with a timer reset\n","content":"EnemyInit_Basic:\n\tLDA #$00\n\tSTA EnemyTimer, X\n","htmlComment":"<p>Enemy initialization with a timer reset</p>\n","htmlContent":"EnemyInit_Basic:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n","line":858},{"comment":"\nEnemy initialization without an explicit timer reset\n\nMost things are set to $00\n","content":"EnemyInit_BasicWithoutTimer:\n\tLDA #$00\n\tSTA EnemyVariable, X\n\tLDA #$00 ; You do realize you already LDA #$00, right???\n\tSTA EnemyArray_B1, X\n\tSTA EnemyArray_42F, X\n\tSTA ObjectBeingCarriedTimer, X\n\tSTA ObjectAnimationTimer, X\n\tSTA ObjectShakeTimer, X\n\tSTA EnemyCollision, X\n\tSTA EnemyArray_438, X\n\tSTA EnemyArray_453, X\n\tSTA ObjectXAcceleration, X\n\tSTA ObjectYAcceleration, X\n\tSTA EnemyArray_45C, X\n\tSTA EnemyArray_477, X\n\tSTA EnemyArray_480, X\n\tSTA EnemyHP, X\n\tSTA ObjectYVelocity, X\n\nEnemyInit_BasicAttributes:\n\tJSR SetEnemyAttributes\n","htmlComment":"<p>Enemy initialization without an explicit timer reset</p>\n<p>Most things are set to $00</p>\n","htmlContent":"EnemyInit_BasicWithoutTimer:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span> <span class=\"token comment\">; You do realize you already LDA #$00, right???</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nEnemyInit_BasicAttributes:\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n","line":867},{"comment":"Initialize enemy movement in direction of player","content":"EnemyInit_BasicMovementTowardPlayer:\n\tJSR EnemyFindWhichSidePlayerIsOn\n","htmlComment":"<p>Initialize enemy movement in direction of player</p>\n","htmlContent":"EnemyInit_BasicMovementTowardPlayer:\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n","line":891},{"comment":"Initialize enemy movement\nY = 1 (move to the left)\nY = 0 (move to the right)","content":"EnemyInit_BasicMovement:\n\tINY ; uses using index 1 or 2 of EnemyInitialAccelerationTable\n\tSTY EnemyMovementDirection, X\n\tLDA EnemyInitialAccelerationTable, Y\n\tSTA ObjectXVelocity, X\n","htmlComment":"<p>Initialize enemy movement\nY = 1 (move to the left)\nY = 0 (move to the right)</p>\n","htmlContent":"EnemyInit_BasicMovement:\n\t<span class=\"token opcode property\">INY</span> <span class=\"token comment\">; uses using index 1 or 2 of EnemyInitialAccelerationTable</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyInitialAccelerationTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n","line":897},{"comment":"Double the speed of objects when bit 6 of 46E is set","content":"\tLDA EnemyArray_46E, X\n\tAND #%01000000\n\tBEQ EnemyInit_BasicMovementExit\n\tASL ObjectXVelocity, X ; Change the speed of certain objects?\n\nEnemyInit_BasicMovementExit:\n\tRTS\n","htmlComment":"<p>Double the speed of objects when bit 6 of 46E is set</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%01000000</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyInit_BasicMovementExit\n\t<span class=\"token opcode property\">ASL</span> ObjectXVelocity, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Change the speed of certain objects?</span>\n\nEnemyInit_BasicMovementExit:\n\t<span class=\"token opcode property\">RTS</span>\n","line":904},{"comment":"End of function EnemyInit_BasicWithoutTimer","content":"","htmlComment":"<p>End of function EnemyInit_BasicWithoutTimer</p>\n","htmlContent":"","line":913},{"comment":"---------------------------------------------------------------------------","content":"BeezoXOffsetTable:\n\t.db $FE ; If player moving right\n\t.db $00 ; If moving left\nBeezoDiveSpeedTable:\n\t.db $12,$16,$1A,$1E,$22,$26,$2A,$2D\n\t.db $30,$32,$34,$37,$39,$3B,$3D,$3E\n","htmlComment":"<hr>\n","htmlContent":"BeezoXOffsetTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span> <span class=\"token comment\">; If player moving right</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; If moving left</span>\nBeezoDiveSpeedTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$12</span>,<span class=\"token hexnumber string\">$16</span>,<span class=\"token hexnumber string\">$1A</span>,<span class=\"token hexnumber string\">$1E</span>,<span class=\"token hexnumber string\">$22</span>,<span class=\"token hexnumber string\">$26</span>,<span class=\"token hexnumber string\">$2A</span>,<span class=\"token hexnumber string\">$2D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span>,<span class=\"token hexnumber string\">$32</span>,<span class=\"token hexnumber string\">$34</span>,<span class=\"token hexnumber string\">$37</span>,<span class=\"token hexnumber string\">$39</span>,<span class=\"token hexnumber string\">$3B</span>,<span class=\"token hexnumber string\">$3D</span>,<span class=\"token hexnumber string\">$3E</span>\n","line":915},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_BeezoDiving:\n\tJSR EnemyInit_Basic\n\n\tLDY PlayerMovementDirection ; $02 = left, $01 = right\n\tLDA ScreenBoundaryLeftLo\n\tADC BeezoXOffsetTable - 1, Y\n\tSTA ObjectXLo, X ; Spawn in front of the player to dive at them\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_BeezoDiving:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDY</span> PlayerMovementDirection <span class=\"token comment\">; $02 = left, $01 = right</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">ADC</span> BeezoXOffsetTable - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Spawn in front of the player to dive at them</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\n","line":922},{"comment":"=============== S U B R O U T I N E =======================================","content":"EnemyBeezoDiveSetup:\n\tLDA PlayerYHi\n\tBPL loc_BANK2_84D5\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"EnemyBeezoDiveSetup:\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">84</span>D<span class=\"token decimalnumber string\">5</span>\n","line":935},{"comment":"If above the screen, just abort and use the least descend-y one","content":"\tLDY #$00\n\tBEQ loc_BANK2_84DF\n\nloc_BANK2_84D5:\n\tLDA PlayerYLo ; Check how far down on the screen the player is\n\tSEC\n\tSBC ScreenYLo\n\tLSR A ; And then take only the highest 4 bits\n\tLSR A ; (divide by 16)\n\tLSR A\n\tLSR A\n\tTAY\n\nloc_BANK2_84DF:\n\tLDA BeezoDiveSpeedTable, Y\n\tSTA ObjectYVelocity, X\n\tRTS\n","htmlComment":"<p>If above the screen, just abort and use the least descend-y one</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">84</span>DF\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">84</span>D<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo <span class=\"token comment\">; Check how far down on the screen the player is</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenYLo\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span> <span class=\"token comment\">; And then take only the highest 4 bits</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span> <span class=\"token comment\">; (divide by 16)</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">84</span>DF:\n\t<span class=\"token opcode property\">LDA</span> BeezoDiveSpeedTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":941},{"comment":"End of function EnemyBeezoDiveSetup","content":"\n","htmlComment":"<p>End of function EnemyBeezoDiveSetup</p>\n","htmlContent":"\n","line":960},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_Phanto:\n\tJSR EnemyInit_Basic\n\n\tLDA #$0C\n\tSTA ObjectXVelocity, X\n\tLDA #$A0\n\tSTA PhantoActivateTimer\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_Phanto:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> PhantoActivateTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":962},{"comment":"=============== S U B R O U T I N E =======================================","content":"EnemyInit_Bobomb:\n\tJSR EnemyInit_Basic\n\n\tLDA #$FF\n\tSTA EnemyTimer, X\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"EnemyInit_Bobomb:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":973},{"comment":"End of function EnemyInit_Bobomb","content":"\n","htmlComment":"<p>End of function EnemyInit_Bobomb</p>\n","htmlContent":"\n","line":982},{"comment":"---------------------------------------------------------------------------","content":"HandleEnemyState_Dead:\n\tJSR sub_BANK3_B5CC\n\n\tJSR sub_BANK2_88E8\n\nloc_BANK2_8500:\n\tLDA EnemyState, X\n\tBNE MakeEnemyFlipUpsideDown\n\n\tLDA EnemyArray_SpawnsDoor, X\n\tBEQ EnemyDeathMaybe\n\nloc_BANK2_8509:\n\tSTA BossBeaten\n\tJSR DestroyOnscreenEnemies\n\n\tJSR Swarm_Stop\n\n\tLDA #Music2_BossClearFanfare\n\tSTA MusicQueue2\n\tLDA unk_RAM_4EF, X\n\tSTA ObjectXHi, X\n\tLDA #$80\n\tSTA ObjectXLo, X\n\tASL A\n\tSTA ObjectYHi, X\n\tLDA #$B0\n\tLDY ObjectType, X\n\tCPY #Enemy_Clawgrip\n\tBNE loc_BANK2_852D\n\n\tLDA #$70\n\nloc_BANK2_852D:\n\tSTA ObjectYLo, X\n\tLDA #%01000001\n\tSTA ObjectAttributes, X\n\tSTA EnemyArray_46E, X\n\tJMP TurnIntoPuffOfSmoke\n\n","htmlComment":"<hr>\n","htmlContent":"HandleEnemyState_Dead:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>CC\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8500</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> MakeEnemyFlipUpsideDown\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyDeathMaybe\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8509</span>:\n\t<span class=\"token opcode property\">STA</span> BossBeaten\n\t<span class=\"token opcode property\">JSR</span> DestroyOnscreenEnemies\n\n\t<span class=\"token opcode property\">JSR</span> Swarm_Stop\n\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">2</span>_BossClearFanfare\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span>EF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$B0</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Clawgrip\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">852</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$70</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">852</span>D:\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%01000001</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> TurnIntoPuffOfSmoke\n\n","line":984},{"comment":"---------------------------------------------------------------------------","content":"EnemyDeathMaybe:\n\tLDA ObjectType, X\n\tCMP #Enemy_Bullet ; \"Stray bullet\" enemy type\n\tBEQ MakeEnemyFlipUpsideDown\n\n\tINC EnemiesKilledForHeart\n\tLDY EnemiesKilledForHeart\n\tCPY #$08 ; number of enemies to kill before a heart appears\n\tBCC MakeEnemyFlipUpsideDown\n\n\tLDA #$00 ; reset enemy kill counter for heart counter\n\tSTA EnemiesKilledForHeart\n\n\tLDA #EnemyState_Alive ; convert dead enemy to living heart\n\tSTA EnemyState, X\n\tSTA ObjectAttributes, X\n\tLDA #%00000111 ; what's this magic number for?\n\tSTA EnemyArray_46E, X\n\tLDA #Enemy_Heart\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tSBC #$60 ; subtract this amount from the y position where the enemy despawned\n\tSTA ObjectYLo, X\n\tLDA ObjectYHi, X\n\tSBC #$00\n\tSTA ObjectYHi, X\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyDeathMaybe:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bullet <span class=\"token comment\">; \"Stray bullet\" enemy type</span>\n\t<span class=\"token opcode property\">BEQ</span> MakeEnemyFlipUpsideDown\n\n\t<span class=\"token opcode property\">INC</span> EnemiesKilledForHeart\n\t<span class=\"token opcode property\">LDY</span> EnemiesKilledForHeart\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$08</span> <span class=\"token comment\">; number of enemies to kill before a heart appears</span>\n\t<span class=\"token opcode property\">BCC</span> MakeEnemyFlipUpsideDown\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span> <span class=\"token comment\">; reset enemy kill counter for heart counter</span>\n\t<span class=\"token opcode property\">STA</span> EnemiesKilledForHeart\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Alive <span class=\"token comment\">; convert dead enemy to living heart</span>\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000111</span> <span class=\"token comment\">; what's this magic number for?</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Heart\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$60</span> <span class=\"token comment\">; subtract this amount from the y position where the enemy despawned</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\n","line":1026},{"comment":"\nSpawned enemies are linked to an offset in the raw enemy data, which prevents\nfrom being respawned until they are killed or moved offscreen.\n\nThis subroutine ensures that the enemy in a particular slot is not linked to\nthe raw enemy data\ns\nInput\nX = enemy slot\n","content":"UnlinkEnemyFromRawData:\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tRTS\n\n\nMakeEnemyFlipUpsideDown:\n\tASL ObjectAttributes, X ; Shift left...\n\tSEC ; Set carry...\n\tROR ObjectAttributes, X ; Shift right. Effectively sets $80 bit\n\nRenderSpriteAndApplyObjectMovement:\n\tJSR RenderSprite\n\n","htmlComment":"<p>Spawned enemies are linked to an offset in the raw enemy data, which prevents\nfrom being respawned until they are killed or moved offscreen.</p>\n<p>This subroutine ensures that the enemy in a particular slot is not linked to\nthe raw enemy data\ns\nInput\nX = enemy slot</p>\n","htmlContent":"UnlinkEnemyFromRawData:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nMakeEnemyFlipUpsideDown:\n\t<span class=\"token opcode property\">ASL</span> ObjectAttributes, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Shift left...</span>\n\t<span class=\"token opcode property\">SEC</span> <span class=\"token comment\">; Set carry...</span>\n\t<span class=\"token opcode property\">ROR</span> ObjectAttributes, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Shift right. Effectively sets $80 bit</span>\n\nRenderSpriteAndApplyObjectMovement:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n","line":1065},{"comment":"\nApplies object physics\n\nInput\nX = enemy index\n","content":"ApplyObjectMovement:","htmlComment":"<p>Applies object physics</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"ApplyObjectMovement:","line":1086},{"comment":"disable horiziontal physics while shaking","content":"\tLDA ObjectShakeTimer, X\n\tBNE ApplyObjectMovement_Vertical\n\n\tJSR ApplyObjectPhysicsX\n\nApplyObjectMovement_Vertical:\n\tJSR ApplyObjectPhysicsY\n\n\tLDA ObjectYVelocity, X\n\tBMI ApplyObjectMovement_Gravity\n","htmlComment":"<p>disable horiziontal physics while shaking</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> ApplyObjectMovement_Vertical\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\nApplyObjectMovement_Vertical:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> ApplyObjectMovement_Gravity\n","line":1088},{"comment":"Check terminal velocity","content":"\tCMP #$3E\n\tBCS ApplyObjectMovement_Exit\n\nApplyObjectMovement_Gravity:\n\tINC ObjectYVelocity, X\n\tINC ObjectYVelocity, X\n\nApplyObjectMovement_Exit:\n\tRTS\n\n\nHandleEnemyState_BlockFizzle:\n\tJSR sub_BANK2_88E8\n\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_85AF\n\n\tTAY\n\tLSR A\n\tLSR A\n\tAND #$01\n\tSTA EnemyMovementDirection, X\n\tLDA #%00000001\n\tSTA ObjectAttributes, X\n\tSTA EnemyArray_46E, X\n\tLDA #$3C\n\tCPY #$C\n\tBCC loc_BANK2_85AC\n\n\tLDA #$3E\n\nloc_BANK2_85AC:\n\tJMP RenderSprite_DrawObject\n\n","htmlComment":"<p>Check terminal velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$3E</span>\n\t<span class=\"token opcode property\">BCS</span> ApplyObjectMovement_Exit\n\nApplyObjectMovement_Gravity:\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nApplyObjectMovement_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nHandleEnemyState_BlockFizzle:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AF\n\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000001</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3C</span>\n\t<span class=\"token opcode property\">CPY</span> #$C\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AC\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3E</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AC:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n","line":1100},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_85AF:\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AF:\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":1135},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_85B2:\n\tJSR sub_BANK2_88E8\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_85C1\n\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>B<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1140},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_85C1:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_85AF\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_85E1\n\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA byte_RAM_10\n\tAND #$03\n\tSTA ObjectShakeTimer, X\n\tLDA byte_RAM_10\n\tAND #$10\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tADC #$01\n\tSTA EnemyMovementDirection, X\n\nloc_BANK2_85E1:\n\tJSR sub_BANK2_9486\n\n\tJMP sub_BANK3_B5CC\n\n\nExplosionTileXOffsets:\n\t.db $F8\n\t.db $00\n\t.db $F8\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $08\n\t.db $10\n\nExplosionTileYOffsets:\n\t.db $F8\n\t.db $F8\n\nEnemyInitialAccelerationTable:","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AF\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>E<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">JSR</span> IncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>E<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9486</span>\n\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>CC\n\n\nExplosionTileXOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\nExplosionTileYOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\nEnemyInitialAccelerationTable:","line":1154},{"comment":"these values are shared with ExplosionTileYOffsets!","content":"\t.db $08\n\t.db $08\n\t.db $F8\n\t.db $F8\n\t.db $08\n\t.db $08\n\n\nHandleEnemyState_BombExploding:\n\tJSR sub_BANK2_88E8\n\n\tLDA byte_RAM_EE\n\tORA byte_RAM_EF\n\tBNE loc_BANK2_85AF\n\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_85AF\n\n\tCMP #$1A\n\tBCS loc_BANK2_8610\n\n\tSBC #$11\n\tBMI loc_BANK2_8610\n\n\tTAY\n\tJSR sub_BANK2_8670\n\nloc_BANK2_8610:\n\tLDA #$60\n\tSTA byte_RAM_0\n\tLDX #$00\n\tLDY #$40\n\nloc_BANK2_8618:\n\tLDA SpriteTempScreenY\n\tCLC\n\tADC ExplosionTileYOffsets, X\n\tSTA SpriteDMAArea, Y\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC ExplosionTileXOffsets, X\n\tSTA SpriteDMAArea + 3, Y\n\tLDA #$01\n\tSTA SpriteDMAArea + 2, Y\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 1, Y\n\tCLC\n\tADC #$02\n\tSTA byte_RAM_0\n\tINY\n\tINY\n\tINY\n\tINY\n\tINX\n\tCPX #$08\n\tBNE loc_BANK2_8618\n\n\tLDX byte_RAM_12\n\tJMP sub_BANK3_B5CC\n\n","htmlComment":"<p>these values are shared with ExplosionTileYOffsets!</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\n\nHandleEnemyState_BombExploding:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AF\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">85</span>AF\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$1A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8610</span>\n\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$11</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8610</span>\n\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8670</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8610</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$40</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8618</span>:\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ExplosionTileYOffsets, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ExplosionTileXOffsets, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8618</span>\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>CC\n\n","line":1199},{"comment":"---------------------------------------------------------------------------","content":"locret_BANK2_8649:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8649</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":1260},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK2_864A:\n\t.db $FB\n\t.db $08\n\t.db $15\n\t.db $FB\n\t.db $08\n\t.db $15\n\t.db $FB\n\t.db $08\n\t.db $15\n\nbyte_BANK2_8653:\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $FF\n\t.db $00\n\t.db $00\n\nbyte_BANK2_865C:\n\t.db $FC\n\t.db $FC\n\t.db $FC\n\t.db $08\n\t.db $08\n\t.db $08\n\t.db $14\n\t.db $14\n\t.db $14\n\nbyte_BANK2_8665:\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\nbyte_BANK2_866E:\n\t.db $5F\n\t.db $06\n\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">864</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8653</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">865</span>C:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8665</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">866</span>E:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\n","line":1265},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_8670:\n\tLDA ObjectXLo, X\n\tCLC\n\tADC byte_BANK2_864A, Y\n\tSTA byte_RAM_C\n\tLDA ObjectXHi, X\n\tADC byte_BANK2_8653, Y\n\tSTA byte_RAM_D\n\tCMP #$B\n\tBCS locret_BANK2_8649\n\n\tLDA ObjectYLo, X\n\tADC byte_BANK2_865C, Y\n\tAND #$F0\n\tSTA byte_RAM_E\n\tSTA byte_RAM_B\n\tLDA ObjectYHi, X\n\tADC byte_BANK2_8665, Y\n\tSTA byte_RAM_F\n\tCMP #$A\n\tBCS locret_BANK2_8649\n\n\tLDY IsHorizontalLevel\n\tBNE loc_BANK2_86BD\n\n\tLSR A\n\tROR byte_RAM_E\n\tLSR A\n\tROR byte_RAM_E\n\tLSR A\n\tROR byte_RAM_E\n\tLSR A\n\tROR byte_RAM_E\n\tLDA byte_RAM_E\n\n\tLDY #$FF\nloc_BANK2_86AD:\n\tSEC\n\tSBC #$0F\n\tINY\n\tBCS loc_BANK2_86AD\n\n\tSTY byte_RAM_D\n\tADC #$0F\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_E\n\nloc_BANK2_86BD:\n\tLDA byte_RAM_C\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_4\n\tORA byte_RAM_E\n\tSTA byte_RAM_5\n\tLDY #$00\n\tLDA ScreenBoundaryLeftHi\n\tCMP #$A\n\tBNE loc_BANK2_86D5\n\n\tSTY byte_RAM_D\n\tINY\n\nloc_BANK2_86D5:\n\tLDA #$10\n\tSTA byte_RAM_7\n\tLDA byte_BANK2_866E, Y\n\tSTA byte_RAM_8\n\tLDY byte_RAM_D\n\nloc_BANK2_86E0:\n\tLDA byte_RAM_7\n\tCLC\n\tADC #$F0\n\tSTA byte_RAM_7\n\tLDA byte_RAM_8\n\tADC #$00\n\tSTA byte_RAM_8\n\tDEY\n\tBPL loc_BANK2_86E0\n\n\tLDY byte_RAM_5\n\tLDA (byte_RAM_7), Y\n\tCMP #$9D\n\tBEQ loc_BANK2_8701\n\n\tCMP #$93\n\tBEQ loc_BANK2_8701\n\n\tCMP #$72\n\tBEQ loc_BANK2_8701\n\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8670</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">864</span><span class=\"token register variable\">A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8653</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D\n\t<span class=\"token opcode property\">CMP</span> #$B\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8649</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">865</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8665</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">CMP</span> #$<span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8649</span>\n\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>BD\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> byte_RAM_E\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> byte_RAM_E\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> byte_RAM_E\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> byte_RAM_E\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FF</span>\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>AD:\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>AD\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_D\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>BD:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_E\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">CMP</span> #$<span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>D<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_D\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>D<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">866</span>E, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">7</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$9D</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8701</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$93</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8701</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$72</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8701</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1314},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8701:\n\tLDA #$40\n\tSTA (byte_RAM_7), Y\n\tLDA byte_RAM_D\n\tAND #$01\n\tEOR #$01\n\tASL A\n\nloc_BANK2_870C:\n\tASL A\n\tLDY IsHorizontalLevel\n\tBNE loc_BANK2_8712\n\n\tASL A\n\nloc_BANK2_8712:\n\tPHA\n\tLDA byte_RAM_E\n\tSTA byte_RAM_2\n\tLDA byte_RAM_C\n\tAND #$F0\n\tSTA byte_RAM_3\n\tLDA #$08\n\tSTA byte_RAM_0\n\tLDA byte_RAM_2\n\tASL A\n\tROL byte_RAM_0\n\tASL A\n\tROL byte_RAM_0\n\tAND #$E0\n\tSTA byte_RAM_1\n\tLDA byte_RAM_3\n\tLSR A\n\tLSR A\n\tLSR A\n\tORA byte_RAM_1\n\tLDX byte_RAM_300\n\tSTA PPUBuffer_301 + 1, X\n\tCLC\n\tADC #$20\n\tSTA PPUBuffer_301 + 6, X\n\tPLA\n\tORA byte_RAM_0\n\tSTA PPUBuffer_301, X\n\tADC #$00\n\tSTA PPUBuffer_301 + 5, X\n\nloc_BANK2_874B:\n\tLDA #$02\n\tSTA PPUBuffer_301 + 2, X\n\tSTA PPUBuffer_301 + 7, X\n\tLDA #$FA\n\tSTA PPUBuffer_301 + 3, X\n\tSTA PPUBuffer_301 + 4, X\n\tSTA PPUBuffer_301 + 8, X\n\tSTA PPUBuffer_301 + 9, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 10, X\n\tTXA\n\tCLC\n\tADC #$A\n\tSTA byte_RAM_300\n\tLDX #$08\n\nloc_BANK2_876F:\n\tLDA EnemyState, X\n\tBEQ loc_BANK2_8778\n\n\tDEX\n\tBPL loc_BANK2_876F\n\n\tBMI loc_BANK2_8795\n\nloc_BANK2_8778:\n\tLDA byte_RAM_C\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA byte_RAM_D\n\tLDY IsHorizontalLevel\n\tBNE loc_BANK2_8785\n\n\tTYA\n\nloc_BANK2_8785:\n\tSTA ObjectXHi, X\n\tLDA byte_RAM_B\n\tSTA ObjectYLo, X\n\tLDA byte_RAM_F\n\tSTA ObjectYHi, X\n\tJSR EnemyInit_BasicWithoutTimer\n\n\tJSR sub_BANK2_98C4\n\nloc_BANK2_8795:\n\tLDX byte_RAM_12\n\nlocret_BANK2_8797:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8701</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">7</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">870</span>C:\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8712</span>\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8712</span>:\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">874</span>B:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FA</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">10</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> #$<span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$08</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">876</span>F:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8778</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">876</span>F\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8795</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8778</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8785</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8785</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_B\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicWithoutTimer\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>C<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8795</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8797</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":1414},{"comment":"End of function sub_BANK2_8670","content":"","htmlComment":"<p>End of function sub_BANK2_8670</p>\n","htmlContent":"","line":1515},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK2_8798:\n\t.db $46\n\t.db $4A\n\t.db $4E\n\t.db $52\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8798</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$46</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$52</span>\n","line":1517},{"comment":"---------------------------------------------------------------------------","content":"HandleEnemyState_PuffOfSmoke:\n\tJSR sub_BANK2_88E8\n\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_Mirrored\n\tSTA ObjectAttributes, X\n\tLDA EnemyTimer, X\n\tBNE loc_BANK2_87AC\n\nloc_BANK2_87A9:\n\tJMP loc_BANK2_8842\n\n","htmlComment":"<hr>\n","htmlContent":"HandleEnemyState_PuffOfSmoke:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_Mirrored\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>AC\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8842</span>\n\n","line":1523},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_87AC:\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA byte_BANK2_8798, Y\n\tJSR RenderSprite_DrawObject\n\n\tLDA EnemyArray_SpawnsDoor, X\n\tBEQ locret_BANK2_8797\n\n\tLDA EnemyTimer, X\n\tCMP #$03\n\tBNE locret_BANK2_8797\n\n\tLDY #$22\n\tLDA ObjectType, X\n\tCMP #Enemy_Clawgrip\n\tBNE loc_BANK2_87CA\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>AC:\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8798</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8797</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8797</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$22</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Clawgrip\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>CA\n","line":1537},{"comment":"Clawgrip special hack:\nMove the \"Draw the door\" PPU command\nup 8 tile rows ($100) to be on the platform","content":"\tDEY\n\nloc_BANK2_87CA:\n\tSTY PPUBuffer_721B\n\tSTY byte_RAM_7222\n\tINY\n\tSTY byte_RAM_7229\n\tSTY byte_RAM_7232\n\tLDY #$03\n\nloc_BANK2_87D9:\n\tLDA unk_RAM_4EF, X\n\tAND #$01\n\tASL A\n\tASL A\n\tEOR #$04\n\tLDX IsHorizontalLevel\n\tBNE loc_BANK2_87E7\n\n\tASL A\n\nloc_BANK2_87E7:\n\tLDX EndOfLevelDoorRowOffsets, Y\n\tORA PPUBuffer_721B, X\n\tSTA PPUBuffer_721B, X\n\tLDX byte_RAM_12\n\tDEY\n\tBPL loc_BANK2_87D9\n\n\tLDA #$14\n\tSTA ScreenUpdateIndex\n\tLDY unk_RAM_4EF, X\n\tLDA #$5F\n\tSTA byte_RAM_1\n\tLDA #$10\n\tSTA byte_RAM_0\n\nloc_BANK2_8804:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$F0\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tADC #$00\n\tSTA byte_RAM_1\n\tDEY\n\tBPL loc_BANK2_8804\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Clawgrip\n\tBNE loc_BANK2_8827\n\n\tLDA byte_RAM_0\n\tSEC\n\tSBC #$40\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tSBC #$00\n\tSTA byte_RAM_1\n\nloc_BANK2_8827:\n\tLDY #$B8\n\tLDA #$56\n\tSTA (byte_RAM_0), Y\n\tLDY #$C8\n\tSTA (byte_RAM_0), Y\n\tLDA #$53\n\tLDY #$B9\n\tSTA (byte_RAM_0), Y\n\tLDY #$CA\n\tSTA (byte_RAM_0), Y\n\tLDA #$54\n\tLDY #$C9\n\tSTA (byte_RAM_0), Y\n\tRTS\n\n","htmlComment":"<p>Clawgrip special hack:\nMove the \"Draw the door\" PPU command\nup 8 tile rows ($100) to be on the platform</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>CA:\n\t<span class=\"token opcode property\">STY</span> PPUBuffer_<span class=\"token decimalnumber string\">721</span>B\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">7222</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">7229</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">7232</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>D<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span>EF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">LDX</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>E<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>E<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDX</span> EndOfLevelDoorRowOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> PPUBuffer_<span class=\"token decimalnumber string\">721</span>B, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">721</span>B, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">87</span>D<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$14</span>\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">LDY</span> unk_RAM_<span class=\"token decimalnumber string\">4</span>EF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$5F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8804</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8804</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Clawgrip\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8827</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8827</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$B8</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$56</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C8</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$53</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$B9</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$CA</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$54</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C9</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1561},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8842:\n\tLDA ObjectType, X\n\tCMP #Enemy_FryguySplit\n\tBNE loc_BANK2_8855\n\n\tDEC FryguySplitFlames\n\tBPL loc_BANK2_8855\n\n\tINC EnemyArray_SpawnsDoor, X\n\tINC ObjectType, X\n\tJMP loc_BANK2_8509\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8842</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_FryguySplit\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8855</span>\n\n\t<span class=\"token opcode property\">DEC</span> FryguySplitFlames\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8855</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8509</span>\n\n","line":1638},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8855:\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8855</span>:\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":1652},{"comment":"---------------------------------------------------------------------------","content":"HandleEnemyState_Sand:\n\tJSR sub_BANK2_88E8\n\n\tLDA #$12\n\tSTA ObjectAttributes, X\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_8888\n\n\tLDA #$F8\n\tSTA ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\n\tLDA #$B2\n\tLDY EnemyTimer, X\n\tCPY #$10\n\tBCS loc_BANK2_8885\n\n\tLDA #%10000000\n\tSTA EnemyArray_46E, X\n\tLDA #$01\n\tSTA ObjectAttributes, X\n\tASL A\n\tSTA EnemyMovementDirection, X\n\tINC ObjectAnimationTimer, X\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA #$B4\n\nloc_BANK2_8885:\n\tJMP RenderSprite_DrawObject\n\n","htmlComment":"<hr>\n","htmlContent":"HandleEnemyState_Sand:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$12</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8888</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$B2</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8885</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%10000000</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> IncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$B4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8885</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n","line":1657},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8888:\n\tCPX ObjectBeingCarriedIndex\n\tBNE loc_BANK2_8891\n\n\tLDA #$00\n\tSTA HoldingItem\n\nloc_BANK2_8891:\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8888</span>:\n\t<span class=\"token opcode property\">CPX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8891</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8891</span>:\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":1690},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_8894:\n\tLDA #$00\n\tSTA byte_RAM_EE\n\tLDA ObjectAttributes, X\n\tLDY #$01\n\tAND #ObjAttrib_Horizontal\n\tBNE loc_BANK2_88B9\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Pokey\n\tBEQ loc_BANK2_88B9\n\n\tCMP #Enemy_Ostro\n\tBEQ loc_BANK2_88B9\n\n\tCMP #Enemy_HawkmouthBoss\n\tBEQ loc_BANK2_88B9\n\n\tCMP #Enemy_Clawgrip\n\tBEQ loc_BANK2_88B9\n\n\tLDA EnemyArray_46E, X\n\tAND #%00100000\n\tBEQ loc_BANK2_88BB\n\nloc_BANK2_88B9:","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8894</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_Horizontal\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>B<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Pokey\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>B<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Ostro\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>B<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_HawkmouthBoss\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>B<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Clawgrip\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>B<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00100000</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>BB\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>B<span class=\"token decimalnumber string\">9</span>:","line":1702},{"comment":"something for double-wide sprites?","content":"\tLDY #$03\n","htmlComment":"<p>something for double-wide sprites?</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\n","line":1730},{"comment":"seems to be logic for positioning sprites onscreen","content":"loc_BANK2_88BB:\n\tLDA ObjectXLo, X\n\tCLC\n\tADC byte_BANK2_88E4, Y\n\tSTA byte_RAM_E\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA byte_RAM_F\n\tLDA byte_RAM_E\n\tCMP ScreenBoundaryLeftLo\n\tLDA byte_RAM_F\n\tSBC ScreenBoundaryLeftHi\n\tBEQ loc_BANK2_88DC\n\n\tLDA byte_RAM_EE\n\tORA byte_BANK2_88E0, Y\n\tSTA byte_RAM_EE\n\nloc_BANK2_88DC:\n\tDEY\n\tBPL loc_BANK2_88BB\n\nlocret_BANK2_88DF:\n\tRTS\n","htmlComment":"<p>seems to be logic for positioning sprites onscreen</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>BB:\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">CMP</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">SBC</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DC\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">ORA</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DC:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>BB\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DF:\n\t<span class=\"token opcode property\">RTS</span>\n","line":1733},{"comment":"End of function sub_BANK2_8894","content":"","htmlComment":"<p>End of function sub_BANK2_8894</p>\n","htmlContent":"","line":1759},{"comment":"---------------------------------------------------------------------------\nthreshold for x-wrapping sprites near the edge of the screen","content":"byte_BANK2_88E0: ; hi\n\t.db $08\n\t.db $04\n\t.db $02\n\t.db $01\nbyte_BANK2_88E4: ; lo\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $18\n\n","htmlComment":"<hr>\n<p>threshold for x-wrapping sprites near the edge of the screen</p>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">0</span>: <span class=\"token comment\">; hi</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">4</span>: <span class=\"token comment\">; lo</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\n","line":1762},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_88E8:\n\tJSR sub_BANK2_8894\n\n\tLDA #$22\n\tLDY ObjectType, X\n\tCPY #Enemy_Wart\n\tBEQ loc_BANK2_88F9\n\n\tCPY #Enemy_Tryclyde\n\tBEQ loc_BANK2_88F9\n\n\tLDA #$10\n\nloc_BANK2_88F9:\n\tADC ObjectYLo, X\n\tSTA byte_RAM_0\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA byte_RAM_1\n\tLDA byte_RAM_0\n\tCMP ScreenYLo\n\tLDA byte_RAM_1\n\tSBC ScreenYHi\n\tSTA byte_RAM_EF\n\n\tCPY #Enemy_Phanto\n\tBEQ locret_BANK2_88DF\n\n\tCPY #Enemy_FlyingCarpet\n\tBEQ locret_BANK2_88DF\n\n\tCPY #Enemy_HawkmouthLeft\n\tBEQ locret_BANK2_88DF\n\n\tCPY #Enemy_HawkmouthBoss\n\tBEQ locret_BANK2_88DF\n\n\tTXA\n\tAND #$01\n\tSTA byte_RAM_0\n\tLDA byte_RAM_10\n\tAND #$01\n\tEOR byte_RAM_0\n\tBNE locret_BANK2_88DF\n\n\tLDA ScreenYLo\n\tSBC #$30\n\tSTA byte_RAM_1\n\tLDA ScreenYHi\n\tSBC #$00\n\tSTA byte_RAM_0\n\tINC byte_RAM_0\n\tLDA ScreenYLo\n\tADC #$FF\n\tPHP\n\tADC #$30\n\tSTA byte_RAM_3\n\tLDA ScreenYHi\n\tADC #$00\n\tPLP\n\tADC #$00\n\tSTA byte_RAM_2\n\tINC byte_RAM_2\n\tLDA ObjectYLo, X\n\tCMP byte_RAM_1\n\tLDY ObjectYHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_0\n\tBMI loc_BANK2_89A5\n\n\tLDA ObjectYLo, X\n\tCMP byte_RAM_3\n\tLDY ObjectYHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_2\n\tBPL loc_BANK2_89A5\n\n\tLDA ScreenBoundaryLeftLo\n\tSBC #$30\n\tSTA byte_RAM_1\n\tLDA ScreenBoundaryLeftHi\n\tSBC #$00\n\tSTA byte_RAM_0\n\tINC byte_RAM_0\n\tLDA ScreenBoundaryRightLo\n\tADC #$30\n\tSTA byte_RAM_3\n\tLDA ScreenBoundaryRightHi\n\tADC #$00\n\tSTA byte_RAM_2\n\tINC byte_RAM_2\n\tLDA ObjectXLo, X\n\tCMP byte_RAM_1\n\tLDY ObjectXHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_0\n\tBMI loc_BANK2_899C\n\n\tLDA ObjectXLo, X\n\tCMP byte_RAM_3\n\tLDY ObjectXHi, X\n\tINY\n\tTYA\n\tSBC byte_RAM_2\n\tBMI EnemyDestroy_Exit\n\nloc_BANK2_899C:\n\tLDY ObjectType, X\n\tLDA EnemyArray_46E_Data, Y\n\tAND #$08\n\tBNE EnemyDestroy_Exit\n\nloc_BANK2_89A5:\n\tLDA ObjectBeingCarriedTimer, X\n\tBNE EnemyDestroy_Exit\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8894</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$22</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Wart\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Tryclyde\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">ADC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> ScreenYLo\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenYHi\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EF\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Phanto\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DF\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_FlyingCarpet\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DF\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_HawkmouthLeft\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DF\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_HawkmouthBoss\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DF\n\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">EOR</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>DF\n\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryRightLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryRightHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">899</span>C\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyDestroy_Exit\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">899</span>C:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyDestroy_Exit\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyDestroy_Exit\n","line":1774},{"comment":"End of function sub_BANK2_88E8","content":"\n","htmlComment":"<p>End of function sub_BANK2_88E8</p>\n","htmlContent":"\n","line":1895},{"comment":"=============== S U B R O U T I N E =======================================","content":"EnemyDestroy:","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"EnemyDestroy:","line":1897},{"comment":"load raw enemy data offset so we can allow the level object to respawn","content":"\tLDY unk_RAM_441, X","htmlComment":"<p>load raw enemy data offset so we can allow the level object to respawn</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>","line":1900},{"comment":"nothing to reset if offset is invalid","content":"\tBMI EnemyDestroy_AfterAllowRespawn\n","htmlComment":"<p>nothing to reset if offset is invalid</p>\n","htmlContent":"\t<span class=\"token opcode property\">BMI</span> EnemyDestroy_AfterAllowRespawn\n","line":1902},{"comment":"disabling bit 7 allows the object to respawn","content":"\tLDA (RawEnemyData), Y\n\tAND #$7F\n\tSTA (RawEnemyData), Y\n\nEnemyDestroy_AfterAllowRespawn:\n\tLDA #EnemyState_Inactive\n\tSTA EnemyState, X\n\nEnemyDestroy_Exit:\n\tRTS\n","htmlComment":"<p>disabling bit 7 allows the object to respawn</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">STA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\nEnemyDestroy_AfterAllowRespawn:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Inactive\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\nEnemyDestroy_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n","line":1905},{"comment":"End of function EnemyDestroy","content":"\n","htmlComment":"<p>End of function EnemyDestroy</p>\n","htmlContent":"\n","line":1917},{"comment":"---------------------------------------------------------------------------","content":"HandleEnemyState_Alive:\n\tLDA #$01\n\tSTA unk_RAM_4A4, X\n\tLDY EnemyArray_42F, X\n\tDEY\n\tCPY #$1F\n\tBCS loc_BANK2_89C9\n\n\tINC EnemyArray_42F, X\n\nloc_BANK2_89C9:\n\tJSR sub_BANK2_88E8\n\n\tLDA PlayerState\n\tCMP #PlayerState_ChangingSize\n\tBEQ loc_BANK2_89E2\n\n\tLDA NeedVerticalScroll\n\tAND #$04\n\tBNE loc_BANK2_8A07\n\n\tLDA StopwatchTimer\n\tBNE loc_BANK2_89E2\n\n\tLDA EnemyArray_438, X\n\tBEQ loc_BANK2_8A0A\n\nloc_BANK2_89E2:\n\tLDA ObjectType, X\n\nIFDEF REV_A\n\tCMP #Enemy_FryguySplit\n\tBEQ loc_BANK2_8A0A\nENDIF\n\n\tCMP #Enemy_Heart\n\tBEQ loc_BANK2_8A0A\n\n\tCMP #Enemy_FlyingCarpet\n\tBEQ loc_BANK2_89F0\n\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_8A0A\n\nloc_BANK2_89F0:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK2_89FB\n\n\tJSR ApplyObjectMovement\n\nloc_BANK2_89FB:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_8A04\n\n\tDEC ObjectAnimationTimer, X\n\nloc_BANK2_8A01:\n\tJMP CarryObject\n\n","htmlComment":"<hr>\n","htmlContent":"HandleEnemyState_Alive:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>C<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>C<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">88</span>E<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">CMP</span> #PlayerState_ChangingSize\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>E<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">07</span>\n\n\t<span class=\"token opcode property\">LDA</span> StopwatchTimer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>E<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>E<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\nIFDEF REV_A\n\t<span class=\"token opcode property\">CMP</span> #Enemy_FryguySplit\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>\nENDIF\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Heart\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_FlyingCarpet\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>F<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>F<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>FB\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">89</span>FB:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">04</span>\n\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">01</span>:\n\t<span class=\"token opcode property\">JMP</span> CarryObject\n\n","line":1919},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8A04:\n\tJSR sub_BANK3_B5CC\n\nloc_BANK2_8A07:\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">04</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>CC\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">07</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":1982},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8A0A:\n\tLDY #$01\n\tLDA ObjectXVelocity, X\n\tBEQ loc_BANK2_8A15\n\n\tBPL loc_BANK2_8A13\n\n\tINY\n\nloc_BANK2_8A13:\n\tSTY EnemyMovementDirection, X\n\nloc_BANK2_8A15:\n\tLDY ObjectType, X\n\tLDA ObjectAttributeTable, Y\n\tAND #ObjAttrib_Palette0 | ObjAttrib_BehindBackground\n\tBNE loc_BANK2_8A41\n\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_16x32 | ObjAttrib_UpsideDown\n\tSTA ObjectAttributes, X\n\tLDA ObjectBeingCarriedTimer, X\n\tCMP #$02\n\tBCC loc_BANK2_8A41\n\n\tLDA ObjectType, X\n\tCMP #Enemy_BobOmb\n\tBNE loc_BANK2_8A36\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBNE loc_BANK2_8A3B\n\nloc_BANK2_8A36:\n\tLDA ObjectAttributeTable, Y\n\tBPL loc_BANK2_8A41\n\nloc_BANK2_8A3B:\n\tLDA ObjectAttributes, X\n\tORA #$20\n\tSTA ObjectAttributes, X\n\nloc_BANK2_8A41:\n\tJSR RunEnemyBehavior\n\n\tLDA ObjectYHi, X\n\tBMI loc_BANK2_8A50\n\n\tLDA SpriteTempScreenY\n\tCMP #$E8\n\tBCC loc_BANK2_8A50\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">15</span>\n\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">13</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">13</span>:\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">15</span>:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributeTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">0</span> | ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">41</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_UpsideDown\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">41</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BobOmb\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">36</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">3</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">36</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributeTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">41</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">3</span>B:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">41</span>:\n\t<span class=\"token opcode property\">JSR</span> RunEnemyBehavior\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">50</span>\n\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$E8</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">50</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1990},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8A50:\n\tJMP sub_BANK3_B5CC\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">50</span>:\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>CC\n\n","line":2046},{"comment":"---------------------------------------------------------------------------","content":"RunEnemyBehavior:\n\tLDA ObjectType, X\n\tJSR JumpToTableAfterJump\n\n\nEnemyBehaviorPointerTable:\n\t.dw EnemyBehavior_00\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_BasicWalker\n\t.dw EnemyBehavior_Ostro\n\t.dw EnemyBehavior_BobOmb\n\t.dw EnemyBehavior_Albatoss ; 10\n\t.dw EnemyBehavior_Albatoss\n\t.dw EnemyBehavior_Albatoss\n\t.dw EnemyBehavior_NinjiRunning\n\t.dw EnemyBehavior_NinjiJumping\n\t.dw EnemyBehavior_Beezo\n\t.dw EnemyBehavior_Beezo\n\t.dw EnemyBehavior_WartBubble\n\t.dw EnemyBehavior_Pidgit\n\t.dw EnemyBehavior_Trouter\n\t.dw EnemyBehavior_Hoopstar ; 20\n\t.dw EnemyBehavior_JarGenerators\n\t.dw EnemyBehavior_JarGenerators\n\t.dw EnemyBehavior_Phanto\n\t.dw EnemyBehavior_CobratJar\n\t.dw EnemyBehavior_CobratGround\n\t.dw EnemyBehavior_Pokey\n\t.dw EnemyBehavior_BulletAndEgg\n\t.dw EnemyBehavior_Birdo\n\t.dw EnemyBehavior_Mouser\n\t.dw EnemyBehavior_BulletAndEgg ; 30\n\t.dw EnemyBehavior_Tryclyde\n\t.dw EnemyBehavior_Fireball\n\t.dw EnemyBehavior_Clawgrip\n\t.dw EnemyBehavior_ClawgripRock\n\t.dw EnemyBehavior_PanserRedAndGray\n\t.dw EnemyBehavior_PanserPink\n\t.dw EnemyBehavior_PanserRedAndGray\n\t.dw EnemyBehavior_Autobomb\n\t.dw EnemyBehavior_AutobombFire\n\t.dw EnemyBehavior_WhaleSpout ; 40\n\t.dw EnemyBehavior_Flurry\n\t.dw EnemyBehavior_Fryguy\n\t.dw EnemyBehavior_FryguySplit\n\t.dw EnemyBehavior_Wart\n\t.dw EnemyBehavior_HawkmouthBoss\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Spark\n\t.dw EnemyBehavior_Vegetable ; 50\n\t.dw EnemyBehavior_Vegetable\n\t.dw EnemyBehavior_Vegetable\n\t.dw EnemyBehavior_Shell\n\t.dw EnemyBehavior_Coin\n\t.dw EnemyBehavior_Bomb\n\t.dw EnemyBehavior_Rocket\n\t.dw EnemyBehavior_MushroomBlockAndPOW\n\t.dw EnemyBehavior_MushroomBlockAndPOW\n\t.dw EnemyBehavior_FallingLogs\n\t.dw EnemyBehavior_SubspaceDoor ; 60\n\t.dw EnemyBehavior_Key\n\t.dw EnemyBehavior_SubspacePotion\n\t.dw EnemyBehavior_Mushroom\n\t.dw EnemyBehavior_Mushroom1up\n\t.dw EnemyBehavior_FlyingCarpet\n\t.dw EnemyBehavior_Hawkmouth\n\t.dw EnemyBehavior_Hawkmouth\n\t.dw EnemyBehavior_CrystalBall\n\t.dw EnemyBehavior_Starman\n\t.dw EnemyBehavior_Mushroom ; 70\nEnemyBehaviorPointerTable_End:\n\n\nEnemyInit_JarGenerators:\n\tJSR EnemyInit_Basic\n\n\tLDA #$50\n\tSTA ObjectAnimationTimer, X\n\tRTS\n\n\nSparkAccelerationTable:\n\t.db $F0\n\t.db $E0\n\t.db $F0\n\t.db $E0\n\t.db $10\n\t.db $20\n\n\nEnemyInit_Sparks:\n\tJSR EnemyInit_Basic\n\n\tLDY ObjectType, X\n\tLDA SparkAccelerationTable - Enemy_Spark1, Y\n\tSTA ObjectXVelocity, X\n\tLDA SparkAccelerationTable - Enemy_Spark1 + 2, Y\n\tSTA ObjectYVelocity, X\n\tRTS\n\n\nSparkCollision: ; spark movement based on collision\n\t.db CollisionFlags_Up | CollisionFlags_Down ; horizontal\n\t.db CollisionFlags_Left | CollisionFlags_Right ; vertical\n\nSparkTurnOffset:\n\t.db $00 ; clockwise\n\t.db $0A ; counter-clockwise\n\n","htmlComment":"<hr>\n","htmlContent":"RunEnemyBehavior:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\nEnemyBehaviorPointerTable:\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_<span class=\"token decimalnumber string\">00</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BasicWalker\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Ostro\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BobOmb\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Albatoss <span class=\"token comment\">; 10</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Albatoss\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Albatoss\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_NinjiRunning\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_NinjiJumping\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Beezo\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Beezo\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_WartBubble\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Pidgit\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Trouter\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Hoopstar <span class=\"token comment\">; 20</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_JarGenerators\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_JarGenerators\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Phanto\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_CobratJar\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_CobratGround\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Pokey\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BulletAndEgg\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Birdo\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Mouser\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_BulletAndEgg <span class=\"token comment\">; 30</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Tryclyde\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Fireball\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Clawgrip\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_ClawgripRock\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_PanserRedAndGray\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_PanserPink\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_PanserRedAndGray\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Autobomb\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_AutobombFire\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_WhaleSpout <span class=\"token comment\">; 40</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Flurry\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Fryguy\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_FryguySplit\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Wart\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_HawkmouthBoss\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Spark\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Spark\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Spark\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Spark\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Vegetable <span class=\"token comment\">; 50</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Vegetable\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Vegetable\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Shell\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Coin\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Bomb\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Rocket\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_MushroomBlockAndPOW\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_MushroomBlockAndPOW\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_FallingLogs\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_SubspaceDoor <span class=\"token comment\">; 60</span>\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Key\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_SubspacePotion\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Mushroom\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Mushroom<span class=\"token decimalnumber string\">1</span>up\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_FlyingCarpet\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Hawkmouth\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Hawkmouth\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_CrystalBall\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Starman\n\t<span class=\"token directive keyword\">.dw</span> EnemyBehavior_Mushroom <span class=\"token comment\">; 70</span>\nEnemyBehaviorPointerTable_End:\n\n\nEnemyInit_JarGenerators:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$50</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nSparkAccelerationTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\n\nEnemyInit_Sparks:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> SparkAccelerationTable - Enemy_Spark<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> SparkAccelerationTable - Enemy_Spark<span class=\"token decimalnumber string\">1</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nSparkCollision: <span class=\"token comment\">; spark movement based on collision</span>\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Up | CollisionFlags_Down <span class=\"token comment\">; horizontal</span>\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Left | CollisionFlags_Right <span class=\"token comment\">; vertical</span>\n\nSparkTurnOffset:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; clockwise</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span> <span class=\"token comment\">; counter-clockwise</span>\n\n","line":2051},{"comment":"\nSpark movement works by traveling along one axis at a time and turning when\neither colliding along the movement axis or running out of wall along the\naxis perpendicular to movement.\n","content":"EnemyBehavior_Spark:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR IncrementAnimationTimerBy2\n\n\tJSR RenderSprite\n\n\tLDA ObjectXLo, X\n\tORA ObjectYLo, X\n\tAND #$0F\n\tBNE EnemyBehavior_Spark_Move\n\n\tJSR ObjectTileCollision_SolidBackground\n\n\tLDY EnemyArray_477, X\n\tLDA EnemyCollision, X\n\tAND SparkCollision, Y\n\tBEQ EnemyBehavior_Spark_Turn\n\n\tLDA SparkCollision, Y\n\tEOR #$0F\n\tAND EnemyCollision, X\n\tBEQ EnemyBehavior_Spark_Move\n\n\tTYA\n\tEOR #$01\n\tSTA EnemyArray_477, X\n\tTAY\n","htmlComment":"<p>Spark movement works by traveling along one axis at a time and turning when\neither colliding along the movement axis or running out of wall along the\naxis perpendicular to movement.</p>\n","htmlContent":"EnemyBehavior_Spark:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> IncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Spark_Move\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision_SolidBackground\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> SparkCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Spark_Turn\n\n\t<span class=\"token opcode property\">LDA</span> SparkCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">AND</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Spark_Move\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TAY</span>\n","line":2174},{"comment":"\nReverses the direction of movement for the specified axis\n\nInput\nX = enemy slot\nY = movement axis\n","content":"EnemyBehavior_Spark_FlipAxisVelocity:\n\tTXA\n\tCLC\n\tADC SparkTurnOffset, Y\n\tTAY\n\tLDA ObjectXVelocity, Y\n\tEOR #$FF\n\tADC #$01\n\tSTA ObjectXVelocity, Y\n\tRTS\n\n\nEnemyBehavior_Spark_Turn:\n\tTYA\n\tEOR #$01\n\tSTA EnemyArray_477, X\n\tJSR EnemyBehavior_Spark_FlipAxisVelocity\n\nEnemyBehavior_Spark_Move:\n\tLDA EnemyArray_477, X\n\tBNE EnemyBehavior_Spark_MoveVertical\n\nEnemyBehavior_Spark_MoveHorizontal:\n\tJMP ApplyObjectPhysicsX\n\nEnemyBehavior_Spark_MoveVertical:\n\tJMP ApplyObjectPhysicsY\n\n\nIncrementAnimationTimerBy2:\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tRTS\n\n\nAlbatossSwarmStartXLo:\n\t.db $F0\n\t.db $00\n\nAlbatossSwarmStartXHi:\n\t.db $FF\n\t.db $01\n\n\nSwarm_AlbatossCarryingBobOmb:\n\tJSR Swarm_CreateEnemy\n\n\tADC AlbatossSwarmStartXLo, Y\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC AlbatossSwarmStartXHi, Y\n\tSTA ObjectXHi, X\n\tSTY byte_RAM_1\n\tLDA #Enemy_AlbatossCarryingBobOmb\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA PseudoRNGValues + 2\n\tAND #$1F\n\tADC #$20\n\tSTA ObjectYLo, X\n\tLDY byte_RAM_1\n\tJSR EnemyInit_BasicMovement\n\n\tASL ObjectXVelocity, X\n\tRTS\n\n\nBeezoSwarmStartXLo:\n\t.db $00\n\t.db $FF\n\n\nSwarm_BeezoDiving:\n\tJSR Swarm_CreateEnemy\n\n\tADC BeezoSwarmStartXLo, Y\n\tSTA ObjectXLo, X\n\tLDA IsHorizontalLevel\n\tBEQ Swarm_BeezoDiving_Vertical\n\nSwarm_BeezoDiving_Horizontal:\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\nSwarm_BeezoDiving_Vertical:\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tSTA ObjectYHi, X\n\tSTY byte_RAM_1\n\tLDA #Enemy_BeezoDiving\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDY byte_RAM_1\n\tJSR EnemyInit_BasicMovement\n\n\tJSR EnemyBeezoDiveSetup\n\n\tRTS\n\n","htmlComment":"<p>Reverses the direction of movement for the specified axis</p>\n<p>Input\nX = enemy slot\nY = movement axis</p>\n","htmlContent":"EnemyBehavior_Spark_FlipAxisVelocity:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> SparkTurnOffset, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyBehavior_Spark_Turn:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Spark_FlipAxisVelocity\n\nEnemyBehavior_Spark_Move:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Spark_MoveVertical\n\nEnemyBehavior_Spark_MoveHorizontal:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsX\n\nEnemyBehavior_Spark_MoveVertical:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsY\n\n\nIncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nAlbatossSwarmStartXLo:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nAlbatossSwarmStartXHi:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\n\nSwarm_AlbatossCarryingBobOmb:\n\t<span class=\"token opcode property\">JSR</span> Swarm_CreateEnemy\n\n\t<span class=\"token opcode property\">ADC</span> AlbatossSwarmStartXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> AlbatossSwarmStartXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_AlbatossCarryingBobOmb\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovement\n\n\t<span class=\"token opcode property\">ASL</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nBeezoSwarmStartXLo:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\n\nSwarm_BeezoDiving:\n\t<span class=\"token opcode property\">JSR</span> Swarm_CreateEnemy\n\n\t<span class=\"token opcode property\">ADC</span> BeezoSwarmStartXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> Swarm_BeezoDiving_Vertical\n\nSwarm_BeezoDiving_Horizontal:\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\nSwarm_BeezoDiving_Vertical:\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_BeezoDiving\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovement\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBeezoDiveSetup\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2210},{"comment":"\nGenerates a swarm enemy\n\nOutput\nA = ScreenBoundaryLeftLo\nX = enemy slot (byte_RAM_0)\nY = enemy direction\n","content":"Swarm_CreateEnemy:","htmlComment":"<p>Generates a swarm enemy</p>\n<p>Output\nA = ScreenBoundaryLeftLo\nX = enemy slot (byte_RAM_0)\nY = enemy direction</p>\n","htmlContent":"Swarm_CreateEnemy:","line":2322},{"comment":"Pause for the Stopwatch","content":"\tLDA StopwatchTimer\n\tBNE Swarm_CreateEnemy_Fail\n","htmlComment":"<p>Pause for the Stopwatch</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> StopwatchTimer\n\t<span class=\"token opcode property\">BNE</span> Swarm_CreateEnemy_Fail\n","line":2324},{"comment":"Generate an enemy when the counter overflows","content":"\tLDA SwarmCounter\n\tCLC\n\tADC #$03\n\tSTA SwarmCounter\n\tBCC Swarm_CreateEnemy_Fail\n","htmlComment":"<p>Generate an enemy when the counter overflows</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> SwarmCounter\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> SwarmCounter\n\t<span class=\"token opcode property\">BCC</span> Swarm_CreateEnemy_Fail\n","line":2328},{"comment":"Create the enemy, but bail if it's not possible","content":"\tJSR CreateEnemy\n\n\tBMI Swarm_CreateEnemy_Fail\n","htmlComment":"<p>Create the enemy, but bail if it's not possible</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> Swarm_CreateEnemy_Fail\n","line":2335},{"comment":"Pick a direction","content":"\tLDY #$00\n\tLDA byte_RAM_10\n\tAND #$40\n\tBNE Swarm_CreateEnemy_Exit\n\n\tINY\n\nSwarm_CreateEnemy_Exit:\n\tLDX byte_RAM_0\n\tLDA ScreenBoundaryLeftLo\n\tRTS\n\nSwarm_CreateEnemy_Fail:","htmlComment":"<p>Pick a direction</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BNE</span> Swarm_CreateEnemy_Exit\n\n\t<span class=\"token opcode property\">INY</span>\n\nSwarm_CreateEnemy_Exit:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">RTS</span>\n\nSwarm_CreateEnemy_Fail:","line":2340},{"comment":"Break out of the parent swarm subroutine","content":"\tPLA\n\tPLA\n\tRTS\n\n\nEnemyBehavior_Fireball:\n\tJSR ObjectTileCollision\n\n\tJSR sub_BANK2_927A\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR RenderSprite\n\n\tLDA EnemyVariable, X\n\tBNE EnemyBehavior_Fireball_CheckCollision\n\n\tJMP ApplyObjectMovement\n\n\nEnemyBehavior_Fireball_CheckCollision:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ EnemyBehavior_Fireball_Exit\n\n\tJSR TurnIntoPuffOfSmoke\n\nEnemyBehavior_Fireball_Exit:\n\tJMP sub_BANK2_9430\n\n\nPanserFireXVelocity:\n\t.db $10\n\t.db $F0\n\n\nEnemyBehavior_PanserPink:\n\tLDA ObjectAnimationTimer, X\n\tASL A\n\tBNE EnemyBehavior_PanserRedAndGray\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nEnemyBehavior_PanserRedAndGray:\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK2_8C1A\n\n\tJSR ResetObjectYVelocity\n\nloc_BANK2_8C1A:\n\tPLA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK2_8C22\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK2_8C22:\n\tJSR ApplyObjectMovement\n\n\tLDA #%10000011\n\tSTA EnemyArray_46E, X\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$2F\n\tBNE loc_BANK2_8C3D\n\n\tLDA #$10\n\tSTA EnemyTimer, X\n\nloc_BANK2_8C3D:\n\tLDY EnemyTimer, X\n\tBEQ loc_BANK2_8C8E\n\n\tCPY #$06\n\tBNE loc_BANK2_8C7C\n\n\tJSR CreateEnemy\n\n\tBMI loc_BANK2_8C7C\n\n\tLDA ObjectType, X\n\tPHA\n\tLDX byte_RAM_0\n\tLDA PseudoRNGValues + 2\n\tAND #$0F\n\tORA #$BC\n\tSTA ObjectYVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tPLA\n\tCMP #Enemy_PanserStationaryFiresUp\n\tLDA PanserFireXVelocity, Y\n\tBCC loc_BANK2_8C65\n\n\tLDA #$00\n\nloc_BANK2_8C65:\n\tSTA ObjectXVelocity, X\n\tLDA ObjectXLo, X\n\tSBC #$05\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, X\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tLDA #Enemy_Fireball\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK2_8C7C:\n\tLDA ObjectAttributes, X\n\tORA #$10\n\tSTA ObjectAttributes, X\n\tLDA #$AE\n\tJSR RenderSprite_DrawObject\n\n\tLDA ObjectAttributes, X\n\tAND #$EF\n\tSTA ObjectAttributes, X\n\tRTS\n\n","htmlComment":"<p>Break out of the parent swarm subroutine</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyBehavior_Fireball:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">927</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Fireball_CheckCollision\n\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectMovement\n\n\nEnemyBehavior_Fireball_CheckCollision:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Fireball_Exit\n\n\t<span class=\"token opcode property\">JSR</span> TurnIntoPuffOfSmoke\n\nEnemyBehavior_Fireball_Exit:\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n\n\nPanserFireXVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\n\nEnemyBehavior_PanserPink:\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_PanserRedAndGray\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n\nEnemyBehavior_PanserRedAndGray:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">1</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">1</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">22</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">22</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%10000011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$2F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">3</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">3</span>D:\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">8</span>E\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">7</span>C\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">7</span>C\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$BC</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_PanserStationaryFiresUp\n\t<span class=\"token opcode property\">LDA</span> PanserFireXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">65</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">65</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Fireball\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">7</span>C:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$AE</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$EF</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2354},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8C8E:\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">8</span>E:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":2485},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_Key:\n\tLDY #$05\n\nloc_BANK2_8C93:\n\tLDA EnemyState, Y\n\tBEQ loc_BANK2_8CA3\n\nloc_BANK2_8C98:\n\tCPY byte_RAM_12\n\tBEQ loc_BANK2_8CA3\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBEQ loc_BANK2_8CAE\n\nloc_BANK2_8CA3:\n\tDEY\n\tBPL loc_BANK2_8C93\n\n\tLDA KeyUsed\n\tBNE loc_BANK2_8CAE\n\nloc_BANK2_8CAB:\n\tJMP EnemyInit_Stationary\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_Key:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">93</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CA<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">98</span>:\n\t<span class=\"token opcode property\">CPY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CA<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Key\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAE\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CA<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">93</span>\n\n\t<span class=\"token opcode property\">LDA</span> KeyUsed\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAE\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAB:\n\t<span class=\"token opcode property\">JMP</span> EnemyInit_Stationary\n\n","line":2490},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8CAE:\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAE:\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":2517},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_CrystalBallStarmanStopwatch:\n\tLDY #$05\n\nloc_BANK2_8CB3:\n\tLDA EnemyState, Y\n\tBEQ loc_BANK2_8CC3\n\n\tCPY byte_RAM_12\n\tBEQ loc_BANK2_8CC3\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_CrystalBall\n\tBEQ loc_BANK2_8CAE\n\nloc_BANK2_8CC3:\n\tDEY\n\tBPL loc_BANK2_8CB3\n\n\tLDA CrystalAndHawkmouthOpenSize\n\tBNE loc_BANK2_8CAE\n\n\tBEQ loc_BANK2_8CAB\n\n\tJSR CreateEnemy\n\n\tBMI locret_BANK2_8CF7\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Starman\n\tSTA ObjectType, X\n\tLDA ScreenBoundaryLeftLo\n\tADC #$D0\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tADC #$E0\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tADC #$00\n\tSTA ObjectYHi, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nlocret_BANK2_8CF7:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_CrystalBallStarmanStopwatch:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CB<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CC<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">CPY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CC<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_CrystalBall\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAE\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CC<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CB<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAE\n\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CAB\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CF<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Starman\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>CF<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2522},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Starman:\n\tLDA #$FC\n\tSTA ObjectYVelocity, X\n\tLDY #$F8\n\tLDA byte_RAM_10\n\tSTA EnemyArray_45C, X\n\tBPL loc_BANK2_8D07\n\n\tLDY #$08\n\nloc_BANK2_8D07:\n\tSTY ObjectXVelocity, X\n\tJMP RenderSpriteAndApplyObjectMovement\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Starman:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FC</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">07</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$08</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">07</span>:\n\t<span class=\"token opcode property\">STY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSpriteAndApplyObjectMovement\n\n","line":2573},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_JarGenerators:\n\tJSR ObjectTileCollision\n\n\tAND #$03\n\tBNE EnemyBehavior_JarGenerators_Active\n\n\tJMP EnemyDestroy\n\nEnemyBehavior_JarGenerators_Active:\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tASL A\n\tBNE locret_BANK2_8D5E\n\n\tJSR CreateEnemy\n\n\tBMI locret_BANK2_8D5E\n\n\tLDY byte_RAM_0\n\tLDA ObjectXLo, Y\n\tSEC\n\tSBC #$06\n\tSTA ObjectXLo, Y\n\tLDA ObjectYLo, Y\n\tSBC #$04\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, Y\n\tSBC #$00\n\tSTA ObjectYHi, Y\n\tLDA #$1A\n\tSTA EnemyArray_480, Y\n\tLDA #$F8\n\tSTA ObjectYVelocity, Y\n\tLDA ObjectType, X\n\tCMP #Enemy_JarGeneratorBobOmb\n\tBNE locret_BANK2_8D5E\n\n\tLDA #Enemy_BobOmb\n\tSTA ObjectType, Y\n\tLDA ObjectXVelocity, Y\n\tASL A\n\tSTA ObjectXVelocity, Y\n\tLDA #$FF\n\tSTA EnemyTimer, Y\n\nlocret_BANK2_8D5E:\n\tRTS\n\n\nEnemyInit_Hawkmouth:\n\tDEC ObjectYLo, X\n\tDEC ObjectYLo, X\n\tLDY #$01\n\tSTY byte_RAM_711F\n\tINY\n\tSTY byte_RAM_710B\n\n\nEnemyInit_Stationary:\n\tJSR EnemyInit_Basic\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tRTS\n\n\nEnemyBehavior_Hawkmouth:\n\tLDA byte_RAM_EE\n\tBEQ loc_BANK2_8D7B\n\nloc_BANK2_8D78:\n\tJMP RenderSprite_HawkmouthLeft\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_JarGenerators:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_JarGenerators_Active\n\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\nEnemyBehavior_JarGenerators_Active:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">5</span>E\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">5</span>E\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_JarGeneratorBobOmb\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">5</span>E\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_BobOmb\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">Y</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">5</span>E:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyInit_Hawkmouth:\n\t<span class=\"token opcode property\">DEC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">711</span>F\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">710</span>B\n\n\nEnemyInit_Stationary:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyBehavior_Hawkmouth:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">7</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">78</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_HawkmouthLeft\n\n","line":2589},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8D7B:\n\tLDA HawkmouthOpenTimer\n\tBEQ loc_BANK2_8D8A\n\n\tDEC HawkmouthOpenTimer\n\tBNE loc_BANK2_8D78\n\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\nloc_BANK2_8D8A:\n\tLDA HawkmouthClosing\n\tBEQ loc_BANK2_8DBA\n\n\tDEC CrystalAndHawkmouthOpenSize\n\tBNE loc_BANK2_8D78\n\n\tLDA #$00\n\tSTA HawkmouthClosing\n\tLDA #TransitionType_Door\n\tSTA TransitionType\n\tJSR DoAreaReset\n\n\tLDY CurrentLevelRelative\n\tLDA CurrentWorldTileset\n\tCMP #$06\n\tBNE loc_BANK2_8DAC\n\n\tINY\n\nloc_BANK2_8DAC:\n\tCPY #$02\n\tBCC SetGameModeBonusChance\n\n\tINC DoAreaTransition\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">7</span>B:\n\t<span class=\"token opcode property\">LDA</span> HawkmouthOpenTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">DEC</span> HawkmouthOpenTimer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">78</span>\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_HawkOpen_WartBarf\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDA</span> HawkmouthClosing\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DBA\n\n\t<span class=\"token opcode property\">DEC</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">78</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> HawkmouthClosing\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_Door\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">LDY</span> CurrentLevelRelative\n\t<span class=\"token opcode property\">LDA</span> CurrentWorldTileset\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DAC\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DAC:\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> SetGameModeBonusChance\n\n\t<span class=\"token opcode property\">INC</span> DoAreaTransition\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2664},{"comment":"---------------------------------------------------------------------------","content":"SetGameModeBonusChance:\n\tLDA #GameMode_BonusChance\n\tSTA GameMode\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"SetGameModeBonusChance:\n\t<span class=\"token opcode property\">LDA</span> #GameMode_BonusChance\n\t<span class=\"token opcode property\">STA</span> GameMode\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2703},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8DBA:\n\tLDA CrystalAndHawkmouthOpenSize\n\tBEQ RenderSprite_HawkmouthLeft\n\n\tCMP #$30\n\tBEQ loc_BANK2_8DDB\n\n\tLDA byte_RAM_EE\n\tAND #$04\n\tBNE RenderSprite_HawkmouthLeft\n\n\tINC CrystalAndHawkmouthOpenSize\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE loc_BANK2_8DD8\n\n\tDEC byte_RAM_711F\n\tINC byte_RAM_710B\n\nloc_BANK2_8DD8:\n\tJMP RenderSprite_HawkmouthLeft\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DBA:\n\t<span class=\"token opcode property\">LDA</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_HawkmouthLeft\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DDB\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_HawkmouthLeft\n\n\t<span class=\"token opcode property\">INC</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DD<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">711</span>F\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">710</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DD<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_HawkmouthLeft\n\n","line":2710},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8DDB:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_PlayerInsideMaybe\n\tBEQ RenderSprite_HawkmouthLeft\n\n\tLDA ObjectYLo, X\n\tCMP PlayerYLo\n\tBCS RenderSprite_HawkmouthLeft\n\n\tLDA PlayerCollision\n\tAND #CollisionFlags_Down\n\tBEQ RenderSprite_HawkmouthLeft\n\n\tLDA HoldingItem\n\tBNE RenderSprite_HawkmouthLeft\n\n\tLDA #PlayerState_HawkmouthEating\n\tSTA PlayerState\n\tLDA #$30\n\tSTA PlayerStateTimer\n\tLDA #$FC\n\tSTA PlayerYVelocity\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\tINC HawkmouthClosing\n\nRenderSprite_HawkmouthLeft:\n\tLDA byte_RAM_EF\n\tBNE loc_BANK2_8E60\n\n\tLDA ObjectType, X\n\tSEC\n\tSBC #$41\n\tSTA EnemyMovementDirection, X\n\tLDA CrystalAndHawkmouthOpenSize\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>DDB:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_PlayerInsideMaybe\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_HawkmouthLeft\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> PlayerYLo\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_HawkmouthLeft\n\n\t<span class=\"token opcode property\">LDA</span> PlayerCollision\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_HawkmouthLeft\n\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_HawkmouthLeft\n\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_HawkmouthEating\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FC</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_HawkOpen_WartBarf\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">INC</span> HawkmouthClosing\n\nRenderSprite_HawkmouthLeft:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">60</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$41</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CrystalAndHawkmouthOpenSize\n\n","line":2734},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_8E13:\n\tSTA byte_RAM_7\n\tLSR A\n\tLSR A\n\tEOR #$FF\n\tSEC\n\tADC SpriteTempScreenY\n\tSTA SpriteTempScreenY\n\tLDY DoorAnimationTimer\n\tBEQ loc_BANK2_8E27\n\n\tLDY #$10\n\nloc_BANK2_8E27:\n\tSTY byte_RAM_F4\n\tLDA #$8E\n\tLDY byte_RAM_7\n\tBEQ loc_BANK2_8E31\n\n\tLDA #$92\n\nloc_BANK2_8E31:\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_7\n\tTAY\n\tLSR A\n\tCLC\n\tADC SpriteTempScreenY\n\tADC #$08\n\tCPY #$00\n\tBNE loc_BANK2_8E44\n\n\tADC #$07\n\nloc_BANK2_8E44:\n\tSTA byte_RAM_0\n\tJSR FindSpriteSlot\n\n\tLDX #$9A\n\tLDA byte_RAM_7\n\tBEQ loc_BANK2_8E58\n\n\tLDA HawkmouthClosing\n\tBEQ loc_BANK2_8E56\n\n\tLDY #$10\n\nloc_BANK2_8E56:\n\tLDX #$96\n\nloc_BANK2_8E58:\n\tSTY byte_RAM_F4\n\tJSR SetSpriteTiles\n\n\tJSR SetSpriteTiles\n\nloc_BANK2_8E60:\n\tLDX byte_RAM_12\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">13</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">ADC</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDY</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">27</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">27</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$8E</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$92</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">31</span>:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">44</span>\n\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$07</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">44</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$9A</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">58</span>\n\n\t<span class=\"token opcode property\">LDA</span> HawkmouthClosing\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">56</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">56</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$96</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">58</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">60</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":2772},{"comment":"End of function sub_BANK2_8E13","content":"\n","htmlComment":"<p>End of function sub_BANK2_8E13</p>\n","htmlContent":"\n","line":2835},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_Trouter:\n\tJSR EnemyInit_Stationary\n\n\tLDA ObjectXLo, X\n\tADC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectYLo, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_B1, X\n\tLDA #$80\n\tSTA EnemyTimer, X\n\nlocret_BANK2_8E78:\n\tRTS\n\n\nbyte_BANK2_8E79:\n\t.db $AC\n\t.db $AE\n\t.db $B1\n\t.db $B5\n\t.db $B8\n\t.db $BC\n\t.db $C0\n\t.db $C4\n\t.db $C8\n\t.db $CC\n\t.db $D2\n\t.db $D8\n\nbyte_BANK2_8E85:\n\t.db $92\n\t.db $EA\n\n\nEnemyBehavior_Trouter:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA #$09\n\tLDY ObjectYVelocity, X\n\tBMI loc_BANK2_8E9A\n\n\tLDA #$89\n\nloc_BANK2_8E9A:\n\tSTA ObjectAttributes, X\n\tLDY IsHorizontalLevel\n\tLDA ObjectYLo, X\n\tCMP byte_BANK2_8E85, Y\n\tBCC loc_BANK2_8EB6\n\n\tLDY EnemyTimer, X\n\tBNE locret_BANK2_8E78\n\n\tSTA ObjectYLo, X\n\tLDY EnemyArray_B1, X\n\tLDA byte_BANK2_8E79, Y\n\tSTA ObjectYVelocity, X\n\tLDA #$C0\n\tSTA EnemyTimer, X\n\nloc_BANK2_8EB6:\n\tJSR sub_BANK2_9430\n\n\tINC ObjectYVelocity, X\n\tJMP RenderSprite\n\n\nEnemy_Hoopstar_YVelocity:\n\t.db $FA ; up\n\t.db $0C ; down\n\nEnemy_Hoopstar_Attributes:\n\t.db $91 ; up\n\t.db $11 ; down\n\n\nEnemyBehavior_Hoopstar:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR RenderSprite\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tJSR sub_BANK3_B4E2\n\n\tLDY EnemyArray_477, X\n\tBCC loc_BANK2_8EEC\n\n\tLDA ObjectYLo, X\n\tCMP ScreenYLo\n\tLDA ObjectYHi, X\n\tSBC ScreenYHi\n\tBEQ loc_BANK2_8EF3\n\n\tASL A\n\tROL A\n\tAND #$01\n\tBPL loc_BANK2_8EEF\n\nloc_BANK2_8EEC:\n\tTYA\n\tEOR #$01\n\nloc_BANK2_8EEF:\n\tSTA EnemyArray_477, X\n\tTAY\n\nloc_BANK2_8EF3:\n\tLDA Enemy_Hoopstar_YVelocity, Y\n\tSTA ObjectYVelocity, X\n\tLDA Enemy_Hoopstar_Attributes, Y\n\tSTA ObjectAttributes, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$10\n\tCMP #$20\n\tBCS loc_BANK2_8F0A\n\n\tASL ObjectYVelocity, X\n\nloc_BANK2_8F0A:\n\tJMP ApplyObjectPhysicsY\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_Trouter:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Stationary\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">78</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">79</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$CC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D8</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">85</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$92</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EA</span>\n\n\nEnemyBehavior_Trouter:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">9</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$89</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">9</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">85</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EB<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">78</span>\n\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">79</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EB<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\nEnemy_Hoopstar_YVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FA</span> <span class=\"token comment\">; up</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span> <span class=\"token comment\">; down</span>\n\nEnemy_Hoopstar_Attributes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$91</span> <span class=\"token comment\">; up</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$11</span> <span class=\"token comment\">; down</span>\n\n\nEnemyBehavior_Hoopstar:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>E<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EEC\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> ScreenYLo\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenYHi\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EF<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EEF\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EEC:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EEF:\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>EF<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDA</span> Enemy_Hoopstar_YVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> Enemy_Hoopstar_Attributes, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">ASL</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsY\n\n","line":2837},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_00:\n\tLDA byte_RAM_EF\n\tBEQ loc_BANK2_8F14\n\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_<span class=\"token decimalnumber string\">00</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">14</span>\n\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":2977},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8F14:\n\tLDY #$FC\n\tLDA byte_RAM_10\n\tAND #$20\n\tBEQ loc_BANK2_8F1E\n\n\tLDY #$04\n\nloc_BANK2_8F1E:\n\tSTY ObjectXVelocity, X\n\tLDA #$F8\n\tSTA ObjectYVelocity, X\n\tJSR sub_BANK2_9430\n\nRenderSprite_Heart:\n\tLDA byte_RAM_EE\n\tAND #$08\n\tORA byte_RAM_EF\n\tBNE RenderSprite_Heart_Exit\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">14</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FC</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">1</span>E\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">1</span>E:\n\t<span class=\"token opcode property\">STY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n\nRenderSprite_Heart:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Heart_Exit\n","line":2985},{"comment":"This part of the code seems to only run\nif the graph we're trying to draw is\na heart sprite ...","content":"\tLDY byte_RAM_F4\n\tLDA SpriteTempScreenY\n\tSTA SpriteDMAArea, Y\n\tLDA SpriteTempScreenX\n\tSTA SpriteDMAArea + 3, Y\nSetHeartSprite:\n\tLDA #$D8\n\tSTA SpriteDMAArea + 1, Y\n\tLDA byte_RAM_10\n\tAND #$20\n\tEOR #$20\n\tASL A\n\tORA #$01\n\tSTA SpriteDMAArea + 2, Y\n\nRenderSprite_Heart_Exit:\n\tRTS\n\n\nEnemy_Birdo_Attributes:\n\t.db ObjAttrib_Palette3 | ObjAttrib_16x32\n\t.db ObjAttrib_Palette1 | ObjAttrib_16x32\n\t.db ObjAttrib_Palette2 | ObjAttrib_16x32\n\n","htmlComment":"<p>This part of the code seems to only run\nif the graph we're trying to draw is\na heart sprite ...</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\nSetHeartSprite:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D8</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\nRenderSprite_Heart_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemy_Birdo_Attributes:\n\t<span class=\"token directive keyword\">.db</span> ObjAttrib_Palette<span class=\"token decimalnumber string\">3</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token directive keyword\">.db</span> ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token directive keyword\">.db</span> ObjAttrib_Palette<span class=\"token decimalnumber string\">2</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\n","line":3009},{"comment":"\nInitializes a Birdo (and a few other boss enemies)\n","content":"EnemyInit_Birdo:\n\tJSR EnemyInit_Basic\n\n\tLDY #$00 ; Default to the Gray Birdo (fires only fireballs)\n\tLDA ObjectXLo, X ; Check if this is a special Birdo.\n\tCMP #$A0 ; means this is a Pink Birdo (fires only eggs, slowly)\n\tBEQ EnemyInit_Birdo_SetType\n\n\tINY\n\tCMP #$B0 ; tile x-position on page = $B\n\tBEQ EnemyInit_Birdo_SetType ; If yes, this is a Red Birdo (fires eggs and fireballs)\n\n\tINY\n\nEnemyInit_Birdo_SetType:\n\tSTY EnemyVariable, X ; Set the Birdo type\n\tLDA Enemy_Birdo_Attributes, Y\n\tSTA ObjectAttributes, X\n\tLDA #$02\n\tSTA EnemyHP, X\n\nEnemyInit_Birdo_Exit:\n\tLDA ObjectXHi, X\n\tSTA unk_RAM_4EF, X\n\tRTS\n\n\nProjectileLaunchXOffsets:\n\t.db $FE\n\t.db $F8\n\n\nEnemyBehavior_Birdo:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\tJSR RenderSprite\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK2_8FD2\n\n\tJSR ResetObjectYVelocity\n\n\tLDA byte_RAM_10\n\tBNE loc_BANK2_8FA3\n\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tBNE loc_BANK2_8FD2\n\n\nBirdoSpitDelay:\n\t.db $7F\n\t.db $3F\n\t.db $3F\n\n","htmlComment":"<p>Initializes a Birdo (and a few other boss enemies)</p>\n","htmlContent":"EnemyInit_Birdo:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span> <span class=\"token comment\">; Default to the Gray Birdo (fires only fireballs)</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Check if this is a special Birdo.</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$A0</span> <span class=\"token comment\">; means this is a Pink Birdo (fires only eggs, slowly)</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyInit_Birdo_SetType\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$B0</span> <span class=\"token comment\">; tile x-position on page = $B</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyInit_Birdo_SetType <span class=\"token comment\">; If yes, this is a Red Birdo (fires eggs and fireballs)</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\nEnemyInit_Birdo_SetType:\n\t<span class=\"token opcode property\">STY</span> EnemyVariable, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Set the Birdo type</span>\n\t<span class=\"token opcode property\">LDA</span> Enemy_Birdo_Attributes, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\nEnemyInit_Birdo_Exit:\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span>EF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nProjectileLaunchXOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\n\nEnemyBehavior_Birdo:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FD<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FA<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FD<span class=\"token decimalnumber string\">2</span>\n\n\nBirdoSpitDelay:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$7F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>\n\n","line":3037},{"comment":"Health-based Birdo egg/fire chances.\nIf PRNG & $1F >= this, shoot an egg\nOtherwise, shoot a fireball","content":"BirdoHealthEggProbabilities:\n\t.db $08\n\t.db $06\n\t.db $04\n\n\nloc_BANK2_8FA3:\n\tLDY EnemyVariable, X\n\tLDA BirdoSpitDelay, Y\n\tAND byte_RAM_10\n\tBNE loc_BANK2_8FB6\n\n\tLDA byte_RAM_EE\n\tAND #$0C\n\tBNE loc_BANK2_8FB6\n\n\tLDA #$1C\n\tSTA EnemyTimer, X\n\nloc_BANK2_8FB6:\n\tLDY EnemyTimer, X\n\tBNE BirdoBehavior_SpitProjectile\n\n\tINC EnemyArray_B1, X\n\tLDA EnemyArray_B1, X\n\tAND #$40\n\tBEQ loc_BANK2_901B\n\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA #$0A\n\tLDY EnemyArray_B1, X\n\tBMI loc_BANK2_8FCD\n\n\tLDA #$F6\n\nloc_BANK2_8FCD:\n\tSTA ObjectXVelocity, X\n\tJMP ApplyObjectPhysicsX\n\n","htmlComment":"<p>Health-based Birdo egg/fire chances.\nIf PRNG &#x26; $1F >= this, shoot an egg\nOtherwise, shoot a fireball</p>\n","htmlContent":"BirdoHealthEggProbabilities:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FA<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDY</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> BirdoSpitDelay, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FB<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FB<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1C</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FB<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> BirdoBehavior_SpitProjectile\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">901</span>B\n\n\t<span class=\"token opcode property\">JSR</span> IncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FCD\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FCD:\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsX\n\n","line":3105},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_8FD2:\n\tJMP ApplyObjectMovement_Vertical\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>FD<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectMovement_Vertical\n\n","line":3146},{"comment":"---------------------------------------------------------------------------","content":"BirdoBehavior_SpitProjectile:\n\tCPY #$08\n\tBNE loc_BANK2_901B\n\n\tLDA #SoundEffect1_BirdoShot\n\tSTA SoundEffectQueue1\n\tJSR sub_BANK2_95E5\n\n\tBMI loc_BANK2_901B\n\n\tLDY EnemyHP, X\n\tLDA EnemyVariable, X\n\tLDX byte_RAM_0\n\tCMP #$02 ; If we're a Gray Birdo, always shoot fire\n\tBEQ _Birdo_SpitFire\n\n\tCMP #$01 ; If we're a Pink Birdo, always shoot eggs\n\tBNE _Birdo_SpitEgg\n\n\tLDA PseudoRNGValues + 2 ; Otherwise, randomly determine what to fire\n\tAND #$1F ; If PRNG & $1F >= our health-probability number,\n\tCMP BirdoHealthEggProbabilities, Y ; fire an egg out\n\tBCS _Birdo_SpitEgg ; Otherwise just fall through to barfing fire\n\n_Birdo_SpitFire:\n\tINC EnemyVariable, X ; Shoot a fireball\n\tLDA #Enemy_Fireball\n\tBNE EnemyBehavior_SpitProjectile\n\n_Birdo_SpitEgg:\n\tLDA #Enemy_Egg ; Shoot an egg\n\n","htmlComment":"<hr>\n","htmlContent":"BirdoBehavior_SpitProjectile:\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">901</span>B\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_BirdoShot\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>E<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">901</span>B\n\n\t<span class=\"token opcode property\">LDY</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span> <span class=\"token comment\">; If we're a Gray Birdo, always shoot fire</span>\n\t<span class=\"token opcode property\">BEQ</span> _Birdo_SpitFire\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span> <span class=\"token comment\">; If we're a Pink Birdo, always shoot eggs</span>\n\t<span class=\"token opcode property\">BNE</span> _Birdo_SpitEgg\n\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span> <span class=\"token comment\">; Otherwise, randomly determine what to fire</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1F</span> <span class=\"token comment\">; If PRNG &#x26; $1F >= our health-probability number,</span>\n\t<span class=\"token opcode property\">CMP</span> BirdoHealthEggProbabilities, <span class=\"token register variable\">Y</span> <span class=\"token comment\">; fire an egg out</span>\n\t<span class=\"token opcode property\">BCS</span> _Birdo_SpitEgg <span class=\"token comment\">; Otherwise just fall through to barfing fire</span>\n\n_Birdo_SpitFire:\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Shoot a fireball</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Fireball\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_SpitProjectile\n\n_Birdo_SpitEgg:\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Egg <span class=\"token comment\">; Shoot an egg</span>\n\n","line":3151},{"comment":"\nSpits an object (used by Birdo and Autobomb)\n\nInput\nA = Object type\nX = Enemy index\n","content":"EnemyBehavior_SpitProjectile:\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$03\n\tSTA ObjectYLo, X\n\tLDY EnemyMovementDirection, X\n\tLDA ObjectXLo, X\n\tADC ProjectileLaunchXOffsets - 1, Y\n\tSTA ObjectXLo, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK2_901B:\n\tJMP RenderSprite\n\n","htmlComment":"<p>Spits an object (used by Birdo and Autobomb)</p>\n<p>Input\nA = Object type\nX = Enemy index</p>\n","htmlContent":"EnemyBehavior_SpitProjectile:\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> ProjectileLaunchXOffsets - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">901</span>B:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":3192},{"comment":"---------------------------------------------------------------------------","content":"\t.db $18\n\t.db $E8\n\nbyte_BANK2_9020:\n\t.db $FE\n\t.db $F8\n\t.db $F0\n\t.db $E8\n","htmlComment":"<hr>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9020</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n","line":3211},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Coin:\n\tJSR IncrementAnimationTimerBy2\n\n\tLDA ObjectYVelocity, X\n\tCMP #$EA\n\tBNE EnemyBehavior_Mushroom1up\n\n\tLDA #SoundEffect2_CoinGet\n\tSTA SoundEffectQueue2\n\nEnemyBehavior_Mushroom1up:\n\tLDA ObjectYVelocity, X\n\tCMP #$10\n\tBMI EnemyBehavior_Mushroom\n\n\tJSR TurnIntoPuffOfSmoke\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Mushroom1up\n\tBEQ Award1upMushroom\n\n\tINC SlotMachineCoins\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Coin:\n\t<span class=\"token opcode property\">JSR</span> IncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$EA</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mushroom<span class=\"token decimalnumber string\">1</span>up\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">2</span>_CoinGet\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">2</span>\n\nEnemyBehavior_Mushroom<span class=\"token decimalnumber string\">1</span>up:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_Mushroom\n\n\t<span class=\"token opcode property\">JSR</span> TurnIntoPuffOfSmoke\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Mushroom<span class=\"token decimalnumber string\">1</span>up\n\t<span class=\"token opcode property\">BEQ</span> Award<span class=\"token decimalnumber string\">1</span>upMushroom\n\n\t<span class=\"token opcode property\">INC</span> SlotMachineCoins\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3220},{"comment":"---------------------------------------------------------------------------","content":"Award1upMushroom:\n\tINC Mushroom1upPulled\n\tINC ExtraLives\n\tBNE loc_BANK2_9050 ; Check if lives overflow. If so, reduce by one again\n\n\tDEC ExtraLives\n\nloc_BANK2_9050:\n\tLDA #SoundEffect1_1UP\n\tSTA SoundEffectQueue1\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"Award<span class=\"token decimalnumber string\">1</span>upMushroom:\n\t<span class=\"token opcode property\">INC</span> Mushroom<span class=\"token decimalnumber string\">1</span>upPulled\n\t<span class=\"token opcode property\">INC</span> ExtraLives\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9050</span> <span class=\"token comment\">; Check if lives overflow. If so, reduce by one again</span>\n\n\t<span class=\"token opcode property\">DEC</span> ExtraLives\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9050</span>:\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_<span class=\"token decimalnumber string\">1</span>UP\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3246},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_CrystalBall:\n\tINC SpriteTempScreenY\n\tJSR AttachObjectToBirdo\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_CrystalBall:\n\t<span class=\"token opcode property\">INC</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">JSR</span> AttachObjectToBirdo\n","line":3260},{"comment":"\nBehavior for objects that turn into smoke after you pick them up\n(eg. mushrooms, crystal ball, stopwatch)\n","content":"EnemyBehavior_Mushroom:\n\tLDA ObjectBeingCarriedTimer, X\n\tCMP #$01\n\tBNE EnemyBehavior_Mushroom_StayMaterial\n\n\tLDA PlayerDucking\n\tBEQ EnemyBehavior_Mushroom_PickUp\n\nEnemyBehavior_Mushroom_StayMaterial:\n\tJMP EnemyBehavior_Bomb\n\nEnemyBehavior_Mushroom_PickUp:\n\tJSR CarryObject\n\n\tLDA #$00\n\tSTA HoldingItem\n\tSTA ObjectBeingCarriedTimer, X\n\tJSR TurnIntoPuffOfSmoke\n\n\tLDA ObjectType, X\n\tCMP #Enemy_CrystalBall\n\tBNE EnemyBehavior_PickUpNotCrystalBall\n\n\tLDA CrystalAndHawkmouthOpenSize\n\tBNE EnemyBehavior_CrystalBall_Exit\n\n\tLDA #Music2_CrystalGetFanfare\n\tSTA MusicQueue2\n\tLDA #$60\n\tSTA HawkmouthOpenTimer\n\tINC CrystalAndHawkmouthOpenSize\n\nEnemyBehavior_CrystalBall_Exit:\n\tRTS\n\nEnemyBehavior_PickUpNotCrystalBall:\n\tCMP #Enemy_Mushroom1up\n\tBEQ EnemyBehavior_PickUpMushroom1up\n\n\tCMP #Enemy_Stopwatch\n\tBEQ EnemyBehavior_PickUpStopwatch\n\n\tCMP #Enemy_Mushroom\n\tBNE EnemyBehavior_PickUpNotMushroom\n\nEnemyBehavior_PickUpMushroom:\n\tLDX EnemyVariable\n\tINC Mushroom1Pulled, X\n\tLDX byte_RAM_12\n\tINC PlayerMaxHealth\n\tJSR RestorePlayerToFullHealth\n\n\tLDA #Music2_MushroomGetJingle\n\tSTA MusicQueue2\n\tRTS\n\nEnemyBehavior_PickUpMushroom1up:\n\tLDA #$09\n\tSTA ObjectAttributes, X\n\nEnemyBehavior_PickUpNotMushroom:\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tLDA #$01\n\tSTA EnemyState, X\n\tRTS\n\nEnemyBehavior_PickUpStopwatch:\n\tLDA #$FF\n\tSTA StopwatchTimer\n\tRTS\n\n\nEnemyBehavior_Key:\n\tJSR AttachObjectToBirdo\n","htmlComment":"<p>Behavior for objects that turn into smoke after you pick them up\n(eg. mushrooms, crystal ball, stopwatch)</p>\n","htmlContent":"EnemyBehavior_Mushroom:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mushroom_StayMaterial\n\n\t<span class=\"token opcode property\">LDA</span> PlayerDucking\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Mushroom_PickUp\n\nEnemyBehavior_Mushroom_StayMaterial:\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_Bomb\n\nEnemyBehavior_Mushroom_PickUp:\n\t<span class=\"token opcode property\">JSR</span> CarryObject\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> TurnIntoPuffOfSmoke\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_CrystalBall\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_PickUpNotCrystalBall\n\n\t<span class=\"token opcode property\">LDA</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CrystalBall_Exit\n\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">2</span>_CrystalGetFanfare\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> HawkmouthOpenTimer\n\t<span class=\"token opcode property\">INC</span> CrystalAndHawkmouthOpenSize\n\nEnemyBehavior_CrystalBall_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_PickUpNotCrystalBall:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Mushroom<span class=\"token decimalnumber string\">1</span>up\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_PickUpMushroom<span class=\"token decimalnumber string\">1</span>up\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Stopwatch\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_PickUpStopwatch\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Mushroom\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_PickUpNotMushroom\n\nEnemyBehavior_PickUpMushroom:\n\t<span class=\"token opcode property\">LDX</span> EnemyVariable\n\t<span class=\"token opcode property\">INC</span> Mushroom<span class=\"token decimalnumber string\">1</span>Pulled, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">INC</span> PlayerMaxHealth\n\t<span class=\"token opcode property\">JSR</span> RestorePlayerToFullHealth\n\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">2</span>_MushroomGetJingle\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_PickUpMushroom<span class=\"token decimalnumber string\">1</span>up:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_PickUpNotMushroom:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_PickUpStopwatch:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> StopwatchTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyBehavior_Key:\n\t<span class=\"token opcode property\">JSR</span> AttachObjectToBirdo\n","line":3269},{"comment":"\nBehavior for objects that have background collision detection\n","content":"EnemyBehavior_Bomb:\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND EnemyMovementDirection, X\n\tBEQ loc_BANK2_90D9\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\tJSR HalfObjectVelocityX\n\tJSR HalfObjectVelocityX\n\nloc_BANK2_90D9:\n\tPLA\n\tAND #$04\n\tBEQ loc_BANK2_90FB\n\n\tLDA ObjectYVelocity, X\n\tCMP #$09\n\tBCC loc_BANK2_90F2\n\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA byte_BANK2_9020, Y\n\tJSR sub_BANK2_95AA\n\n\tJMP loc_BANK2_90FB\n\n","htmlComment":"<p>Behavior for objects that have background collision detection</p>\n","htmlContent":"EnemyBehavior_Bomb:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>D<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>D<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>FB\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>F<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9020</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>AA\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>FB\n\n","line":3348},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_90F2:\n\tJSR ResetObjectYVelocity\n\n\tLDA byte_RAM_B\n\tBNE loc_BANK2_90FB\n\n\tSTA ObjectXVelocity, X\n\nloc_BANK2_90FB:\n\tLDA ObjectType, X\n\tCMP #Enemy_Bomb\n\tBNE EnemyBehavior_Vegetable\n\n\tLDA EnemyTimer, X\n\tBNE loc_BANK2_9122\n\n\tLDY ObjectBeingCarriedTimer, X\n\tBEQ EnemyBehavior_Bomb_Explode\n\n\tSTA HoldingItem\n\tSTA ObjectBeingCarriedTimer, X\n\nEnemyBehavior_Bomb_Explode:\n\tLDA #EnemyState_BombExploding\n\tSTA EnemyState, X\n\tLDA #$20\n\tSTA EnemyTimer, X\n\tSTA SkyFlashTimer\n\tLDA #DPCM_DoorOpenBombBom\n\tSTA DPCMQueue\n\tLSR A","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>F<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_B\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>FB\n\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">90</span>FB:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bomb\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Vegetable\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9122</span>\n\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Bomb_Explode\n\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Bomb_Explode:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_BombExploding\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SkyFlashTimer\n\t<span class=\"token opcode property\">LDA</span> #DPCM_DoorOpenBombBom\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>","line":3382},{"comment":"A = $00","content":"\tSTA EnemyArray_42F, X\n\tRTS\n\n","htmlComment":"<p>A = $00</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3415},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9122:\n\tCMP #Enemy_Mushroom1up\n\tBCS EnemyBehavior_Vegetable\n\n\tLSR A\n\tBCC EnemyBehavior_Vegetable\n\n\tINC ObjectAttributes, X\n\tLDA ObjectAttributes, X\n\tAND #$FB\n\tSTA ObjectAttributes, X\n\nEnemyBehavior_Vegetable:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ApplyObjectMovement\n\nRenderSprite_VegetableLarge:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK2_913E\n\n\tJMP RenderSprite_NotAlbatoss\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9122</span>:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Mushroom<span class=\"token decimalnumber string\">1</span>up\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_Vegetable\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_Vegetable\n\n\t<span class=\"token opcode property\">INC</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$FB</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Vegetable:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\nRenderSprite_VegetableLarge:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">913</span>E\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_NotAlbatoss\n\n","line":3419},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_913E:\n\tJMP RenderSprite_DrawObject\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">913</span>E:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n","line":3444},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_SubspacePotion:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ EnemyBehavior_SubspacePotion_CheckGroundCollision\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\tJSR HalfObjectVelocityX\n\nEnemyBehavior_SubspacePotion_CheckGroundCollision:\n\tPLA\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Vegetable\n\n\tJSR ResetObjectYVelocity\n\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$10\n\tSTA ObjectYLo, X\n\tLDA ObjectXLo, X\n\tADC #$07\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA #$10\n\tSTA EnemyArray_453, X\n\tLDA #SoundEffect1_PotionDoorBong\n\tSTA SoundEffectQueue1\n\tINC EnemyArray_B1, X\n\tLDA #Enemy_SubspaceDoor\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$10\n\tSTA byte_RAM_5BB\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_SubspacePotion:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_SubspacePotion_CheckGroundCollision\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\nEnemyBehavior_SubspacePotion_CheckGroundCollision:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Vegetable\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_PotionDoorBong\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_SubspaceDoor\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>BB\n","line":3449},{"comment":"No Subspace Doors allowed in vertical levels","content":"\tLDA IsHorizontalLevel\n\tBNE loc_BANK2_9198\n\n\tLDA #DPCM_BossHurt\n\tSTA DPCMQueue\n\tJSR EnemyDestroy\n\nloc_BANK2_9198:\n\tJSR CreateEnemy\n\n\tBMI TurnIntoPuffOfSmoke_Exit\n\n\tLDY byte_RAM_0\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDA #$41\n\tSTA ObjectAttributes, Y\n\tTYA\n\tTAX\n\n","htmlComment":"<p>No Subspace Doors allowed in vertical levels</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9198</span>\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_BossHurt\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\t<span class=\"token opcode property\">JSR</span> EnemyDestroy\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9198</span>:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> TurnIntoPuffOfSmoke_Exit\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$41</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\n","line":3496},{"comment":"\nTurns an object into a puff of smoke\n\nInput\nX = enemy index of object to poof\n","content":"TurnIntoPuffOfSmoke:\n\tLDA ObjectAttributes, X ; Get current object sprite attributes...\n\tAND #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_16x32 | ObjAttrib_UpsideDown\n\tORA #ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, X ; WINNERS DON'T SMOKE SHROOMS\n\tSTA ObjectAnimationTimer, X ; No idea what this address is for\n\tLDA #$1F\n\tSTA EnemyTimer, X ; Puff-of-smoke animation timer?\n\tLDX byte_RAM_12\n\nTurnIntoPuffOfSmoke_Exit:\n\tRTS\n\n\nbyte_BANK2_91C5:\n\t.db $F8\n\t.db $08\n\n","htmlComment":"<p>Turns an object into a puff of smoke</p>\n<p>Input\nX = enemy index of object to poof</p>\n","htmlContent":"TurnIntoPuffOfSmoke:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Get current object sprite attributes...</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_UpsideDown\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_PuffOfSmoke\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span> <span class=\"token comment\">; WINNERS DON'T SMOKE SHROOMS</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span> <span class=\"token comment\">; No idea what this address is for</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Puff-of-smoke animation timer?</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nTurnIntoPuffOfSmoke_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">91</span>C<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\n","line":3525},{"comment":"\nLook for a Birdo to attach to\n","content":"AttachObjectToBirdo:\n\tLDA EnemyVariable, X\n\tBNE AttachObjectToBirdo_Skip\n\n\tLDY #$05\nAttachObjectToBirdo_Loop:\n\tLDA EnemyState, Y\n\tCMP #EnemyState_Alive\n\tBNE AttachObjectToBirdo_NotLiveBirdo\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Birdo\n\tBEQ AttachObjectToBirdo_DoAttach\n\nAttachObjectToBirdo_NotLiveBirdo:\n\tDEY\n\tBPL AttachObjectToBirdo_Loop\n\nAttachObjectToBirdo_Skip:\n\tLDA #$01\n\tSTA EnemyVariable, X\n\tJMP SetEnemyAttributes\n\nAttachObjectToBirdo_DoAttach:\n\tLDA ObjectXHi, Y\n\tCMP ObjectXHi, X\n\tBNE AttachObjectToBirdo_Skip\n\n\tLDA ObjectXLo, Y\n\tSTA ObjectXLo, X\n\tLDA ObjectYLo, Y\n\tADC #$0E\n\tSTA ObjectYLo, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_BANK2_91C5, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tPLA\n\tPLA\n\tLDA #%00000111\n\tSTA EnemyArray_46E, X\n\tLDA #$30\n\tSTA byte_RAM_F4\n\tJMP RenderSprite\n\n\n\nbyte_BANK2_9212:\n\t.db $F0\n\nbyte_BANK2_9213:\n\t.db $FF\n\t.db $00\n","htmlComment":"<p>Look for a Birdo to attach to</p>\n","htmlContent":"AttachObjectToBirdo:\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> AttachObjectToBirdo_Skip\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\nAttachObjectToBirdo_Loop:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">BNE</span> AttachObjectToBirdo_NotLiveBirdo\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Birdo\n\t<span class=\"token opcode property\">BEQ</span> AttachObjectToBirdo_DoAttach\n\nAttachObjectToBirdo_NotLiveBirdo:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> AttachObjectToBirdo_Loop\n\nAttachObjectToBirdo_Skip:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> SetEnemyAttributes\n\nAttachObjectToBirdo_DoAttach:\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> AttachObjectToBirdo_Skip\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0E</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">91</span>C<span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000111</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9212</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9213</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n","line":3549},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_AlbatossStartLeft:\n\tJSR EnemyInit_Basic\n\n\tLDA #$F0\n\tBNE loc_BANK2_9221\n\nEnemyInit_AlbatossStartRight:\n\tJSR EnemyInit_Basic\n\n\tLDA #$10\n\nloc_BANK2_9221:\n\tSTA ObjectXVelocity, X\n\tINC EnemyArray_B1, X\n\tLDA ObjectType, X\n\tSEC\n\nloc_BANK2_9228:\n\tSBC #$0B\n\tTAY\n\tLDA ScreenBoundaryLeftLo\n\tADC byte_BANK2_9212, Y\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC byte_BANK2_9213, Y\n\tSTA ObjectXHi, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_AlbatossStartLeft:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9221</span>\n\nEnemyInit_AlbatossStartRight:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9221</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9228</span>:\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9212</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9213</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3605},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Albatoss:\n\tJSR RenderSprite_Albatoss\n\n\tINC ObjectAnimationTimer, X\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK2_9271\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Damage\n\tBNE loc_BANK2_9256\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$30\n\tCMP #$60\n\tBCS loc_BANK2_926E\n\nloc_BANK2_9256:\n\tJSR CreateEnemy\n\n\tBMI loc_BANK2_926E\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_BobOmb\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tADC #$10\n\tSTA ObjectYLo, X\n\tJSR EnemyInit_Bobomb\n\n\tLDX byte_RAM_12\n\tINC EnemyArray_B1, X\n\nloc_BANK2_926E:\n\tJMP loc_BANK2_9274\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Albatoss:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_Albatoss\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9271</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9256</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">926</span>E\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9256</span>:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">926</span>E\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_BobOmb\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Bobomb\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">926</span>E:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9274</span>\n\n","line":3635},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9271:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\nloc_BANK2_9274:\n\tJMP ApplyObjectPhysicsX\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9271</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9274</span>:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsX\n\n","line":3674},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_AutobombFire:\n\tJSR sub_BANK2_9289\n\nsub_BANK2_927A:\n\tASL ObjectAttributes, X\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tROR ObjectAttributes, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_AutobombFire:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9289</span>\n\nsub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">927</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">ASL</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3682},{"comment":"Unused?","content":"\t.db $D0\n\t.db $03\n\n\nEnemyBehavior_BulletAndEgg:\n\tJSR ObjectTileCollision\n\nsub_BANK2_9289:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA EnemyArray_B1, X\n\tORA EnemyArray_42F, X\n\tBEQ loc_BANK2_9299\n\n\tJMP RenderSpriteAndApplyObjectMovement\n\n","htmlComment":"<p>Unused?</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\n\nEnemyBehavior_BulletAndEgg:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\nsub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9289</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9299</span>\n\n\t<span class=\"token opcode property\">JMP</span> RenderSpriteAndApplyObjectMovement\n\n","line":3697},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9299:\n\tLDA ObjectYVelocity, X\n\tBPL loc_BANK2_929F\n\n\tSTA EnemyArray_B1, X\n\nloc_BANK2_929F:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK2_92BE\n\n\tSTA EnemyArray_B1, X\n\tLDA ObjectType, X\n\tCMP #Enemy_Bullet\n\tBNE loc_BANK2_92B5\n\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\tINC ObjectYLo, X\n\tINC ObjectYLo, X\n\nloc_BANK2_92B5:\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK2_92BE:\n\tJSR ApplyObjectPhysicsX\n\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9299</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">929</span>F\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">929</span>F:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">92</span>BE\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bullet\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">92</span>B<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Dead\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">92</span>B<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">92</span>BE:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":3716},{"comment":"End of function sub_BANK2_9289","content":"","htmlComment":"<p>End of function sub_BANK2_9289</p>\n","htmlContent":"","line":3751},{"comment":"\nCreates a generic red Shyguy enemy and\ndoes some basic initialization for it.\n\nCreateEnemy_TryAllSlots checks all 9 object slots\nCreateEnemy only checks the first 6 object slots\n\nOutput\nN = enabled if no empty slot was found\nY = $FF if there no empty slot was found\nbyte_RAM_0 = slot used\n","content":"CreateEnemy_TryAllSlots:\n\tLDY #$08\n\tBNE CreateEnemy_FindSlot\n\nCreateEnemy:\n\tLDY #$05\n\nCreateEnemy_FindSlot:\n\tLDA EnemyState, Y\n\tBEQ CreateEnemy_FoundSlot\n\n\tDEY\n\tBPL CreateEnemy_FindSlot\n\n\tRTS\n\nCreateEnemy_FoundSlot:\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, Y\n\tLSR A\n\tSTA EnemyArray_SpawnsDoor, Y\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, Y\n\tLDA ObjectXLo, X\n\tADC #$05\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, Y\n\tLDA ObjectYLo, X\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tSTA ObjectYHi, Y\n\tSTY byte_RAM_0\n\tTYA\n\tTAX\n\n\tJSR EnemyInit_Basic\n\tJSR UnlinkEnemyFromRawData\n\n\tLDX byte_RAM_12\n\tRTS\n\n\nPhanto_AccelX:\n\t.db $01\n\t.db $FF\nPhanto_MaxVelX:\n\t.db $30\n\t.db $D0\nPhanto_AccelY:\n\t.db $01\n\t.db $FF ; Exit up\n\t.db $01 ; Exit down\nPhanto_MaxVelY:\n\t.db $18\n\t.db $E8\n\t.db $18\n\nEnemyBehavior_Phanto:\n\tLDA ObjectShakeTimer, X\n\tBEQ Phanto_AfterDecrementShakeTimer\n\n\tDEC ObjectShakeTimer, X\n\nPhanto_AfterDecrementShakeTimer:\n\tJSR RenderSprite\n\n\tLDY #$01 ; Move away from player\n\tLDA HoldingItem\n\tBEQ Phanto_Movement\n\n\tLDX ObjectBeingCarriedIndex\n\tLDA ObjectType, X\n\tLDX byte_RAM_12\n","htmlComment":"<p>Creates a generic red Shyguy enemy and\ndoes some basic initialization for it.</p>\n<p>CreateEnemy_TryAllSlots checks all 9 object slots\nCreateEnemy only checks the first 6 object slots</p>\n<p>Output\nN = enabled if no empty slot was found\nY = $FF if there no empty slot was found\nbyte_RAM_0 = slot used</p>\n","htmlContent":"CreateEnemy_TryAllSlots:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> CreateEnemy_FindSlot\n\nCreateEnemy:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\n\nCreateEnemy_FindSlot:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> CreateEnemy_FoundSlot\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> CreateEnemy_FindSlot\n\n\t<span class=\"token opcode property\">RTS</span>\n\nCreateEnemy_FoundSlot:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_ShyguyRed\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\t<span class=\"token opcode property\">JSR</span> UnlinkEnemyFromRawData\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPhanto_AccelX:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\nPhanto_MaxVelX:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\nPhanto_AccelY:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; Exit up</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; Exit down</span>\nPhanto_MaxVelY:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\nEnemyBehavior_Phanto:\n\t<span class=\"token opcode property\">LDA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> Phanto_AfterDecrementShakeTimer\n\n\t<span class=\"token opcode property\">DEC</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\nPhanto_AfterDecrementShakeTimer:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span> <span class=\"token comment\">; Move away from player</span>\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> Phanto_Movement\n\n\t<span class=\"token opcode property\">LDX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n","line":3765},{"comment":"Strange code. Phanto only chases you if you have the key.\nSo you should just be able to use BEQ/BNE.\nThis way seems to imply that Phanto would\nchase you if you were carrying a range of items,\nbut...  what could those items have been?\nBut instead we do it like this for... reasons.\nNintendo.","content":"\tCMP #Enemy_Key\n\tBCC Phanto_Movement\n","htmlComment":"<p>Strange code. Phanto only chases you if you have the key.\nSo you should just be able to use BEQ/BNE.\nThis way seems to imply that Phanto would\nchase you if you were carrying a range of items,\nbut...  what could those items have been?\nBut instead we do it like this for... reasons.\nNintendo.</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> #Enemy_Key\n\t<span class=\"token opcode property\">BCC</span> Phanto_Movement\n","line":3848},{"comment":"Subspace Potion is >= Enemy_Key, so ignore it","content":"\tCMP #Enemy_SubspacePotion\n\tBCS Phanto_Movement\n\n\tLDA PhantoActivateTimer\n\tCMP #$A0\n\tBNE Phanto_AfterStartTimer\n","htmlComment":"<p>Subspace Potion is >= Enemy_Key, so ignore it</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> #Enemy_SubspacePotion\n\t<span class=\"token opcode property\">BCS</span> Phanto_Movement\n\n\t<span class=\"token opcode property\">LDA</span> PhantoActivateTimer\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">BNE</span> Phanto_AfterStartTimer\n","line":3852},{"comment":"Kick off Phanto activation timer","content":"\tDEC PhantoActivateTimer\n\nPhanto_AfterStartTimer:\n\tDEY ; Move toward player\n\nPhanto_Movement:\n\tLDA ObjectYHi, X\n\tCLC\n\tADC #$01\n\tSTA byte_RAM_5\n\tLDA PlayerYLo\n\tCMP ObjectYLo, X\n\tLDX PlayerYHi\n\tINX\n\tTXA\n\tLDX byte_RAM_12\n\tSBC byte_RAM_5\n\tBPL loc_BANK2_9351\n\n\tINY ; Other side of player vertically\n\nloc_BANK2_9351:\n\tLDA ObjectYVelocity, X\n\tCMP Phanto_MaxVelY, Y\n\tBEQ loc_BANK2_935E\n\n\tCLC\n\tADC Phanto_AccelY, Y\n\tSTA ObjectYVelocity, X\n\nloc_BANK2_935E:\n\tLDA EnemyArray_480, X\n\tCLC\n\tADC #$A0\n\tSTA EnemyArray_480, X\n\tBCC loc_BANK2_937F\n\n\tLDA EnemyArray_477, X\n\tAND #$01\n\tTAY\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC Phanto_AccelX, Y\n\tSTA ObjectXVelocity, X\n\tCMP Phanto_MaxVelX, Y\n\tBNE loc_BANK2_937F\n\n\tINC EnemyArray_477, X\n\nloc_BANK2_937F:\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK2_9388\n\n\tLDA PlayerXVelocity\n\tSTA ObjectXAcceleration, X\n\nloc_BANK2_9388:\n\tLDY PhantoActivateTimer\n\tBEQ Phanto_Activated\n","htmlComment":"<p>Kick off Phanto activation timer</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEC</span> PhantoActivateTimer\n\nPhanto_AfterStartTimer:\n\t<span class=\"token opcode property\">DEY</span> <span class=\"token comment\">; Move toward player</span>\n\nPhanto_Movement:\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">CMP</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> PlayerYHi\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9351</span>\n\n\t<span class=\"token opcode property\">INY</span> <span class=\"token comment\">; Other side of player vertically</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9351</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> Phanto_MaxVelY, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">935</span>E\n\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> Phanto_AccelY, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">935</span>E:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">937</span>F\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> Phanto_AccelX, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> Phanto_MaxVelX, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">937</span>F\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">937</span>F:\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9388</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9388</span>:\n\t<span class=\"token opcode property\">LDY</span> PhantoActivateTimer\n\t<span class=\"token opcode property\">BEQ</span> Phanto_Activated\n","line":3860},{"comment":"Hold the timer at $A0","content":"\tCPY #$A0\n\tBEQ Phanto_AfterDecrementActivateTimer\n\n\tCPY #$80\n\tBNE Phanto_AfterFlashing\n","htmlComment":"<p>Hold the timer at $A0</p>\n","htmlContent":"\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">BEQ</span> Phanto_AfterDecrementActivateTimer\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BNE</span> Phanto_AfterFlashing\n","line":3921},{"comment":"Start flashing","content":"\tLDA #$40\n\tSTA EnemyArray_45C, X\n\nPhanto_AfterFlashing:\n\tCPY #$40\n\tBNE Phanto_AfterSound\n","htmlComment":"<p>Start flashing</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\nPhanto_AfterFlashing:\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BNE</span> Phanto_AfterSound\n","line":3928},{"comment":"Start vibrating","content":"\tLDA #$40\n\tSTA ObjectShakeTimer, X\n","htmlComment":"<p>Start vibrating</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n","line":3936},{"comment":"Play Phanto activation sound effect","content":"\tLDA #SoundEffect3_Rumble_B\n\tSTA SoundEffectQueue3\n\nPhanto_AfterSound:\n\tDEC PhantoActivateTimer\n\nPhanto_AfterDecrementActivateTimer:\n\tLDA #$00\n\tSTA ObjectXAcceleration, X\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\nPhanto_Activated:\n\tJMP sub_BANK2_9430\n\n\nEnemy_Ninji_JumpVelocity:\n\t.db $E8\n\t.db $D0\n\t.db $D8\n\t.db $D0\n\n\nEnemyBehavior_NinjiJumping:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Ninji_MidAir\n\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_NinjiJumping_DetermineJump\n","htmlComment":"<p>Play Phanto activation sound effect</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">3</span>_Rumble_B\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">3</span>\n\nPhanto_AfterSound:\n\t<span class=\"token opcode property\">DEC</span> PhantoActivateTimer\n\nPhanto_AfterDecrementActivateTimer:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nPhanto_Activated:\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n\n\nEnemy_Ninji_JumpVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\n\n\nEnemyBehavior_NinjiJumping:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Ninji_MidAir\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_NinjiJumping_DetermineJump\n","line":3940},{"comment":"stop x-velocity","content":"\tSTA ObjectXVelocity, X\n\nEnemyBehavior_NinjiJumping_DetermineJump:\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tAND #$3F\n\tBNE EnemyBehavior_Ninji_MidAir\n\n\tLDA ObjectAnimationTimer, X\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA Enemy_Ninji_JumpVelocity, Y\n\tBNE EnemyBehavior_Ninji_Jump\n\nEnemyBehavior_NinjiRunning:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Ninji_MidAir\n\n\tLDA PlayerYLo\n\tCLC\n\tADC #$10\n\tCMP ObjectYLo, X\n\tBNE EnemyBehavior_Ninji_MidAir\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tTYA\n\tCMP EnemyMovementDirection, X\n\tBNE EnemyBehavior_Ninji_MidAir\n\n\tLDA byte_RAM_F\n\tADC #$28\n\tCMP #$50\n\tBCS EnemyBehavior_Ninji_MidAir\n\n\tLDA #$D8\n\nEnemyBehavior_Ninji_Jump:\n\tSTA ObjectYVelocity, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$F0\n\tSTA ObjectAnimationTimer, X\n\tJSR ApplyObjectPhysicsY\n\nEnemyBehavior_Ninji_MidAir:\n\tJMP EnemyBehavior_BasicWalker\n\n","htmlComment":"<p>stop x-velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_NinjiJumping_DetermineJump:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Ninji_MidAir\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> Enemy_Ninji_JumpVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Ninji_Jump\n\nEnemyBehavior_NinjiRunning:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Ninji_MidAir\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Ninji_MidAir\n\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">CMP</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Ninji_MidAir\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$28</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$50</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_Ninji_MidAir\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D8</span>\n\nEnemyBehavior_Ninji_Jump:\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\nEnemyBehavior_Ninji_MidAir:\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_BasicWalker\n\n","line":3972},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Beezo:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR RenderSprite\n\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR IncrementAnimationTimerBy2\n\nloc_BANK2_941D:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA ObjectYVelocity, X\n\tBEQ loc_BANK2_9436\n\n\tBPL loc_BANK2_9429\n\n\tSTA EnemyArray_42F, X\n\nloc_BANK2_9429:\n\tLDA byte_RAM_10\n\tLSR A\n\tBCC sub_BANK2_9430\n\n\tDEC ObjectYVelocity, X\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Beezo:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> IncrementAnimationTimerBy<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">941</span>D:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9436</span>\n\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9429</span>\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9429</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n\n\t<span class=\"token opcode property\">DEC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\n","line":4028},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_9430:\n\tJSR ApplyObjectPhysicsX\n\n\tJMP ApplyObjectPhysicsY\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsY\n","line":4057},{"comment":"End of function sub_BANK2_9430","content":"\n","htmlComment":"<p>End of function sub_BANK2_9430</p>\n","htmlContent":"\n","line":4064},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9436:\n\tJSR ApplyObjectPhysicsX\n\nloc_BANK2_9439:\n\tJMP sub_BANK2_9430\n\n\nBulletProjectileXSpeeds:\n\t.db $20\n\t.db $E0\n\n\nEnemyBehavior_BobOmb:\n\tLDY EnemyTimer, X\n\tCPY #$3A ; When to stop walking\n\tBCS EnemyBehavior_BasicWalker\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9436</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9439</span>:\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n\n\nBulletProjectileXSpeeds:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\n\nEnemyBehavior_BobOmb:\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$3A</span> <span class=\"token comment\">; When to stop walking</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_BasicWalker\n","line":4066},{"comment":"Stop walking if the BobOmb is touching the ground","content":"\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_BobOmb_CheckFuse\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\nEnemyBehavior_BobOmb_CheckFuse:\n\tDEC ObjectAnimationTimer, X\n\tTYA\n\tBNE EnemyBehavior_BobOmb_Flash\n","htmlComment":"<p>Stop walking if the BobOmb is touching the ground</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_BobOmb_CheckFuse\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_BobOmb_CheckFuse:\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_BobOmb_Flash\n","line":4085},{"comment":"Unset HoldingItem if this BobOmb is being carried","content":"\tLDA ObjectBeingCarriedTimer, X\n\tBEQ EnemyBehavior_BobOmb_Explode\n\n\tSTY HoldingItem\n\tSTY ObjectBeingCarriedTimer, X\n\nEnemyBehavior_BobOmb_Explode:\n\tJMP EnemyBehavior_Bomb_Explode\n\n\nEnemyBehavior_BobOmb_Flash:\n\tCMP #$30 ; When to start flashing\n\tBCS EnemyBehavior_BasicWalker\n","htmlComment":"<p>Unset HoldingItem if this BobOmb is being carried</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_BobOmb_Explode\n\n\t<span class=\"token opcode property\">STY</span> HoldingItem\n\t<span class=\"token opcode property\">STY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_BobOmb_Explode:\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_Bomb_Explode\n\n\nEnemyBehavior_BobOmb_Flash:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span> <span class=\"token comment\">; When to start flashing</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_BasicWalker\n","line":4098},{"comment":"Palette cycle every other frame","content":"\tLSR A\n\tBCC EnemyBehavior_BasicWalker\n\n\tINC ObjectAttributes, X\n\tLDA ObjectAttributes, X\n\tAND #%11111011\n\tSTA ObjectAttributes, X\n\n\nEnemyBehavior_BasicWalker:\n\tJSR ObjectTileCollision\n\nloc_BANK2_9470:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA EnemyArray_480, X\n\tBEQ loc_BANK2_9492\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Up\n\tBEQ loc_BANK2_9481\n\n\tJMP EnemyDestroy\n\n","htmlComment":"<p>Palette cycle every other frame</p>\n","htmlContent":"\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_BasicWalker\n\n\t<span class=\"token opcode property\">INC</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%11111011</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\n\nEnemyBehavior_BasicWalker:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9470</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9492</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Up\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9481</span>\n\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":4113},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9481:\n\tDEC EnemyArray_480, X\n\tINC EnemyTimer, X\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9481</span>:\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\n","line":4138},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_9486:\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_BehindBackground\n\tSTA ObjectAttributes, X\n\tJSR ApplyObjectPhysicsY\n\n\tJMP RenderSprite\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9486</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n","line":4144},{"comment":"End of function sub_BANK2_9486","content":"\n","htmlComment":"<p>End of function sub_BANK2_9486</p>\n","htmlContent":"\n","line":4154},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9492:\n\tLDA EnemyCollision, X\n\tAND EnemyMovementDirection, X\n\tBEQ loc_BANK2_94A6\n\n\tJSR EnemyBehavior_TurnAround\n\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK2_94A6\n\n\tJSR HalfObjectVelocityX\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK2_94A6:\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\nloc_BANK2_94AB:\n\tJSR RenderSprite\n\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitGray\n\tBNE loc_BANK2_94BB\n\n\tLDA EnemyArray_42F, X\n\tBNE loc_BANK2_94BB\n\n\tSTA ObjectXVelocity, X\n\nloc_BANK2_94BB:\n\tJSR ApplyObjectMovement\n\n\tLDA EnemyCollision, X\n\tLDY ObjectYVelocity, X\n\tBPL loc_BANK2_9503\n\n\tAND #$08\n\tBEQ loc_BANK2_94CD\n\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9492</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>AB:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_SnifitGray\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>BB\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>BB\n\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>BB:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9503</span>\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>CD\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4156},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_94CD:\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_Walk\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>CD:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Walk\n","line":4202},{"comment":"check if this enemy fires bullets when jumping","content":"\tLDA ObjectType, X\n\tCMP #Enemy_SnifitGray\n\tBNE EnemyBehavior_Walk\n","htmlComment":"<p>check if this enemy fires bullets when jumping</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_SnifitGray\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Walk\n","line":4208},{"comment":"bullet generator","content":"\tLDA ObjectYVelocity, X ; check if enemy is starting to fall\n\tCMP #$FE\n\tBNE EnemyBehavior_Walk\n\n\tLDA PseudoRNGValues + 2 ; check random number generator\n\tBPL EnemyBehavior_Walk\n","htmlComment":"<p>bullet generator</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span> <span class=\"token comment\">; check if enemy is starting to fall</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$FE</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Walk\n\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span> <span class=\"token comment\">; check random number generator</span>\n\t<span class=\"token opcode property\">BPL</span> EnemyBehavior_Walk\n","line":4213},{"comment":"jumper high bullet","content":"\tJSR CreateBullet\n\nEnemyBehavior_Walk:\n\tDEC ObjectAnimationTimer, X\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitPink\n\tBEQ EnemyBehavior_TurnAtCliff\n\n\tCMP #Enemy_ShyguyPink\n\tBNE EnemyBehavior_BasicWalkerExit\n\nEnemyBehavior_TurnAtCliff:","htmlComment":"<p>jumper high bullet</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> CreateBullet\n\nEnemyBehavior_Walk:\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_SnifitPink\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_TurnAtCliff\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_ShyguyPink\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_BasicWalkerExit\n\nEnemyBehavior_TurnAtCliff:","line":4221},{"comment":"skip if being thrown","content":"\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_BasicWalkerExit\n","htmlComment":"<p>skip if being thrown</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_BasicWalkerExit\n","line":4234},{"comment":"skip if already turning around","content":"\tLDA EnemyArray_477, X\n\tBNE EnemyBehavior_BasicWalkerExit\n\n\tINC EnemyArray_477, X\n\tJMP EnemyBehavior_TurnAround\n\nEnemyBehavior_BasicWalkerExit:\n\tRTS\n\n","htmlComment":"<p>skip if already turning around</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_BasicWalkerExit\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_TurnAround\n\nEnemyBehavior_BasicWalkerExit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4238},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9503:\n\tAND #$04\n\tBEQ loc_BANK2_94CD\n\n\tLDA #$00\n\tSTA EnemyArray_477, X\n\tLDY ObjectType, X ; Get the current object ID\n\tCPY #Enemy_Tweeter ; Check if this enemy is a Tweeter\n\tBNE loc_BANK2_9528 ; If not, go handle some other enemies\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9503</span>:\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">94</span>CD\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Get the current object ID</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Tweeter <span class=\"token comment\">; Check if this enemy is a Tweeter</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9528</span> <span class=\"token comment\">; If not, go handle some other enemies</span>\n","line":4248},{"comment":"...but very, very, very rarely, only\nwhen their timer (that increments once per bounce)\nhits #$3F -- almost unnoticable","content":"\tLDA #$3F\n\tJSR sub_BANK2_9599\n\n\tINC EnemyVariable, X ; Make small jump 3 times, then make big jump\n\tLDY #$F0\n\tLDA EnemyVariable, X\n\tAND #$03 ; Check if the timer is a multiple of 4\n\tBNE loc_BANK2_9523 ; If not, skip over the next bit\n\n\tLDY #$E0\n\nloc_BANK2_9523:\n\tSTY ObjectYVelocity, X ; Set Y acceleration for bouncing\n\tJMP ApplyObjectPhysicsY\n\n","htmlComment":"<p>...but very, very, very rarely, only\nwhen their timer (that increments once per bounce)\nhits #$3F -- almost unnoticable</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9599</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Make small jump 3 times, then make big jump</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span> <span class=\"token comment\">; Check if the timer is a multiple of 4</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9523</span> <span class=\"token comment\">; If not, skip over the next bit</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$E0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9523</span>:\n\t<span class=\"token opcode property\">STY</span> ObjectYVelocity, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Set Y acceleration for bouncing</span>\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsY\n\n","line":4262},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9528:\n\tLDA #$1F\n\tCPY #Enemy_BobOmb\n\tBEQ sub_BANK2_9599\n\n\tCPY #Enemy_Flurry\n\tBEQ sub_BANK2_9599\n\n\tLDA #$3F\n\tCPY #Enemy_NinjiRunning\n\tBEQ sub_BANK2_9599\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9528</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_BobOmb\n\t<span class=\"token opcode property\">BEQ</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9599</span>\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Flurry\n\t<span class=\"token opcode property\">BEQ</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9599</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_NinjiRunning\n\t<span class=\"token opcode property\">BEQ</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9599</span>\n","line":4278},{"comment":"this redundant red snifit check smells funny, almost like there was\nsome other follow-the-player enemy","content":"\tLDA #$7F ; unused\n\tCPY #Enemy_SnifitRed\n\tBEQ EnemyBehavior_Snifit\n\n\tCPY #Enemy_SnifitRed\n\tBEQ EnemyBehavior_Snifit\n\n\tCPY #Enemy_SnifitPink\n\tBEQ EnemyBehavior_Snifit\n\n\tCPY #Enemy_SnifitGray\n\tBNE loc_BANK2_959D\n\n\tLDA EnemyArray_42F, X\n\tBNE loc_BANK2_959D\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$3F\n\tBNE EnemyBehavior_Snifit\n\n\tLDA #$E8\n\tSTA ObjectYVelocity, X\n\tJMP ApplyObjectPhysicsY\n\n\nEnemyBehavior_Snifit:\n\tLDA ObjectShakeTimer, X\n\tBEQ EnemyBehavior_Snifit_NoBullet\n\n\tDEC ObjectAnimationTimer, X\n\tDEC ObjectShakeTimer, X\n\tBNE EnemyBehavior_Snifit_NoBullet\n","htmlComment":"<p>this redundant red snifit check smells funny, almost like there was\nsome other follow-the-player enemy</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7F</span> <span class=\"token comment\">; unused</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_SnifitRed\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Snifit\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_SnifitRed\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Snifit\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_SnifitPink\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Snifit\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_SnifitGray\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">959</span>D\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">959</span>D\n\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Snifit\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsY\n\n\nEnemyBehavior_Snifit:\n\t<span class=\"token opcode property\">LDA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Snifit_NoBullet\n\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Snifit_NoBullet\n","line":4293},{"comment":"telegraphed bullet (walking snifits)","content":"\tJSR CreateBullet\n\n\tJMP loc_BANK2_95BB\n\nEnemyBehavior_Snifit_NoBullet:\nloc_BANK2_9574:\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tASL A\n\tBNE EnemyBehavior_Snifit_AnimationTimer\n\n\tLDA ObjectType, X\n\tCMP #Enemy_SnifitGray\n\tBNE EnemyBehavior_Snifit_CheckPlayerY\n","htmlComment":"<p>telegraphed bullet (walking snifits)</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> CreateBullet\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>BB\n\nEnemyBehavior_Snifit_NoBullet:\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9574</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Snifit_AnimationTimer\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_SnifitGray\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Snifit_CheckPlayerY\n","line":4331},{"comment":"jumper low bullet","content":"\tJSR CreateBullet\n\n\tJMP EnemyInit_DisableObjectAttributeBit8\n\n\nEnemyBehavior_Snifit_CheckPlayerY:\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$10\n\tCMP PlayerYLo\n\tBNE EnemyBehavior_Snifit_AnimationTimer\n\n\tLDA #$30 ; shake duration\n\tSTA ObjectShakeTimer, X\n\nEnemyBehavior_Snifit_AnimationTimer:\n\tLDA #$7F\n","htmlComment":"<p>jumper low bullet</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> CreateBullet\n\n\t<span class=\"token opcode property\">JMP</span> EnemyInit_DisableObjectAttributeBit<span class=\"token decimalnumber string\">8</span>\n\n\nEnemyBehavior_Snifit_CheckPlayerY:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">CMP</span> PlayerYLo\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Snifit_AnimationTimer\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$30</span> <span class=\"token comment\">; shake duration</span>\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Snifit_AnimationTimer:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7F</span>\n","line":4350},{"comment":"\nGives em the ol' razzle-dazzle\n\nInput\nA = timer mask\n","content":"sub_BANK2_9599:\n\tAND ObjectAnimationTimer, X\n\tBEQ loc_BANK2_95B8\n\nloc_BANK2_959D:\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK2_95BB\n\n\tLDA ObjectYVelocity, X\n\tCMP #$1A\n\tBCC loc_BANK2_95B8\n\n\tLDA #$F0\n","htmlComment":"<p>Gives em the ol' razzle-dazzle</p>\n<p>Input\nA = timer mask</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9599</span>:\n\t<span class=\"token opcode property\">AND</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>B<span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">959</span>D:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>BB\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$1A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>B<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n","line":4374},{"comment":"\nSets the y-velocity, applies vertical physics, and cuts x-velocity in half\n\nInput\nA = y-velocity\nX = enemy index\n","content":"sub_BANK2_95AA:\n\tJSR SetObjectYVelocity\n\tJSR ApplyObjectPhysicsY\n","htmlComment":"<p>Sets the y-velocity, applies vertical physics, and cuts x-velocity in half</p>\n<p>Input\nA = y-velocity\nX = enemy index</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>AA:\n\t<span class=\"token opcode property\">JSR</span> SetObjectYVelocity\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n","line":4395},{"comment":"\nCuts the x-velocity of the current object in half\n\nInput\nX = enemy index\nOutput\nRAM_0 = previous x-velocity\n","content":"HalfObjectVelocityX:","htmlComment":"<p>Cuts the x-velocity of the current object in half</p>\n<p>Input\nX = enemy index\nOutput\nRAM_0 = previous x-velocity</p>\n","htmlContent":"HalfObjectVelocityX:","line":4407},{"comment":"Store the current X-velocity in RAM_0","content":"\tLDA ObjectXVelocity, X\n\tSTA byte_RAM_0","htmlComment":"<p>Store the current X-velocity in RAM_0</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>","line":4409},{"comment":"Shift left to save the sign in the carry bit","content":"\tASL A","htmlComment":"<p>Shift left to save the sign in the carry bit</p>\n","htmlContent":"\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>","line":4412},{"comment":"Cut in half and preserve the sign","content":"\tROR ObjectXVelocity, X\n\tRTS\n\n\n","htmlComment":"<p>Cut in half and preserve the sign</p>\n","htmlContent":"\t<span class=\"token opcode property\">ROR</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":4414},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_95B8:\n\tJSR EnemyInit_BasicWithoutTimer\n\nloc_BANK2_95BB:\n\tLDA ObjectType, X\n\tCMP #Enemy_ShyguyRed\n\tBNE EnemyInit_DisableObjectAttributeBit8\n\n\tLDA ObjectYVelocity, X\n\tCMP #$04\n\tBCC EnemyInit_DisableObjectAttributeBit8\n\n\tJSR EnemyInit_BasicWithoutTimer\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>B<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicWithoutTimer\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>BB:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_ShyguyRed\n\t<span class=\"token opcode property\">BNE</span> EnemyInit_DisableObjectAttributeBit<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyInit_DisableObjectAttributeBit<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicWithoutTimer\n","line":4419},{"comment":"\nDisables bit 8 on the object attribute, which causes the object to appear\nbehind the background while being pulled\n","content":"EnemyInit_DisableObjectAttributeBit8:\n\tASL ObjectAttributes, X\n\tLSR ObjectAttributes, X\n","htmlComment":"<p>Disables bit 8 on the object attribute, which causes the object to appear\nbehind the background while being pulled</p>\n","htmlContent":"EnemyInit_DisableObjectAttributeBit<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">ASL</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n","line":4438},{"comment":"\nDoes SetObjectYVelocity with y-velocity of 0\n","content":"ResetObjectYVelocity:\n\tLDA #$00\n","htmlComment":"<p>Does SetObjectYVelocity with y-velocity of 0</p>\n","htmlContent":"ResetObjectYVelocity:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n","line":4445},{"comment":"\nSets the y-velocity of an object and shifts it half a tile down if it's not a\na vegetable\n\nInput\nA = y-velocity\nX = enemy index\n","content":"SetObjectYVelocity:\n\tSTA ObjectYVelocity, X\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tLDA ObjectYLo, X\n\tBCS SetObjectYVelocity_Exit\n\n\tADC #$08\n\tBCC SetObjectYVelocity_Exit\n\n\tINC ObjectYHi, X\n\nSetObjectYVelocity_Exit:\n\tAND #$F0\n\tSTA ObjectYLo, X\n\tRTS\n\n\n","htmlComment":"<p>Sets the y-velocity of an object and shifts it half a tile down if it's not a\na vegetable</p>\n<p>Input\nA = y-velocity\nX = enemy index</p>\n","htmlContent":"SetObjectYVelocity:\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCS</span> SetObjectYVelocity_Exit\n\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCC</span> SetObjectYVelocity_Exit\n\n\t<span class=\"token opcode property\">INC</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\nSetObjectYVelocity_Exit:\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":4456},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_95E5:\n\tJSR CreateEnemy_TryAllSlots\n\n\tJMP CreateBullet_WithSlotInY\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>E<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_TryAllSlots\n\n\t<span class=\"token opcode property\">JMP</span> CreateBullet_WithSlotInY\n","line":4475},{"comment":"End of function sub_BANK2_95E5","content":"\n","htmlComment":"<p>End of function sub_BANK2_95E5</p>\n","htmlContent":"\n","line":4482},{"comment":"=============== S U B R O U T I N E =======================================","content":"CreateBullet:\n\tJSR CreateEnemy\n\nCreateBullet_WithSlotInY:\n\tBMI CreateBullet_Exit\n\n\tLDY EnemyMovementDirection, X\n\tLDX byte_RAM_0\n\tLDA BulletProjectileXSpeeds - 1, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\tLDA #Enemy_Bullet\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nCreateBullet_Exit:\n\tRTS\n\n\nCharacterYOffsetCrouch:\n\t.db $0A ; Mario\n\t.db $0E ; Princess\n\t.db $0A ; Toad\n\t.db $0D ; Luigi\n\t.db $04 ; Small Mario\n\t.db $07 ; Small Princess\n\t.db $04 ; Small Toad\n\t.db $06 ; Small Luigi\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"CreateBullet:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\nCreateBullet_WithSlotInY:\n\t<span class=\"token opcode property\">BMI</span> CreateBullet_Exit\n\n\t<span class=\"token opcode property\">LDY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> BulletProjectileXSpeeds - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Bullet\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nCreateBullet_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nCharacterYOffsetCrouch:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span> <span class=\"token comment\">; Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0E</span> <span class=\"token comment\">; Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span> <span class=\"token comment\">; Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span> <span class=\"token comment\">; Luigi</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; Small Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; Small Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; Small Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span> <span class=\"token comment\">; Small Luigi</span>\n\n","line":4484},{"comment":"This is run when the player is carrying\nsomething, to update its position to\nwherever the player is above their head","content":"CarryObject:\n\tLDA PlayerDirection\n\tEOR #$01\n\tTAY\n\tINY\n\tSTY EnemyMovementDirection, X\n\tLDA PlayerXLo\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tSTA ObjectXHi, X\n\n\tLDA PlayerYHi\n\tSTA byte_RAM_7\n\tLDA PlayerYLo\n\tLDY EnemyArray_489, X\n\tCPY #$03\n\tBEQ loc_BANK2_9636\n\n\tCPY #$02\n\tBEQ loc_BANK2_9636\n\n\tSBC #$0E\n\tBCS loc_BANK2_9636\n\n\tDEC byte_RAM_7\n\nloc_BANK2_9636:\n\tLDY PlayerAnimationFrame\n\tCPY #SpriteAnimation_Ducking\n\tCLC\n\tBNE loc_BANK2_964D\n\n\tLDY PlayerCurrentSize\n\tCPY #$01\n\tLDY CurrentCharacter\n\tBCC loc_BANK2_964A\n\n\tINY\n\tINY\n\tINY\n\tINY\n\nloc_BANK2_964A:\n\tADC CharacterYOffsetCrouch, Y\n\nloc_BANK2_964D:\n\tPHP\n\tLDY ObjectBeingCarriedTimer, X\n\tCLC\n\tLDX PlayerCurrentSize\n\tBEQ loc_BANK2_965D\n\n\tINY\n\tINY\n\tINY\n\tINY\n\tINY\n\tINY\n\tINY\n\nloc_BANK2_965D:\n\tADC ItemCarryYOffsetsRAM - 1, Y\n\tLDX byte_RAM_12\n\tSTA ObjectYLo, X\n\tLDA byte_RAM_7\n\tADC ItemCarryYOffsetsRAM + $D, Y\n\tPLP\n\tADC #$00\n\tSTA ObjectYHi, X\n\tLDY ObjectBeingCarriedTimer, X\n\tCPY #$05\n\tBCS loc_BANK2_9686\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK2_9686\n\n\tLDA EnemyArray_438, X\n\nloc_BANK2_967D:\n\tBNE loc_BANK2_9681\n\n\tINC ObjectAnimationTimer, X\n\nloc_BANK2_9681:\n\tASL ObjectAttributes, X\n\tSEC\n\tROR ObjectAttributes, X\n\nloc_BANK2_9686:\n\tJSR PutCarriedObjectInHands\n\n\tJMP RenderSprite\n\n","htmlComment":"<p>This is run when the player is carrying\nsomething, to update its position to\nwherever the player is above their head</p>\n","htmlContent":"CarryObject:\n\t<span class=\"token opcode property\">LDA</span> PlayerDirection\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9636</span>\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9636</span>\n\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$0E</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9636</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9636</span>:\n\t<span class=\"token opcode property\">LDY</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">CPY</span> #SpriteAnimation_Ducking\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">964</span>D\n\n\t<span class=\"token opcode property\">LDY</span> PlayerCurrentSize\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDY</span> CurrentCharacter\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">964</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">964</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">ADC</span> CharacterYOffsetCrouch, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">964</span>D:\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">LDX</span> PlayerCurrentSize\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">965</span>D\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">965</span>D:\n\t<span class=\"token opcode property\">ADC</span> ItemCarryYOffsetsRAM - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">ADC</span> ItemCarryYOffsetsRAM + $D, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9686</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9686</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">967</span>D:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9681</span>\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9681</span>:\n\t<span class=\"token opcode property\">ASL</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">ROR</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9686</span>:\n\t<span class=\"token opcode property\">JSR</span> PutCarriedObjectInHands\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":4521},{"comment":"Unused?","content":"\t.db $10\n\t.db $F0\n\n\nEnemyBehavior_MushroomBlockAndPOW:\n\tJSR sub_BANK2_9692\n\nEnemyBehavior_MushroomBlockAndPOW_Exit:\n\tRTS\n\n","htmlComment":"<p>Unused?</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\n\nEnemyBehavior_MushroomBlockAndPOW:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9692</span>\n\nEnemyBehavior_MushroomBlockAndPOW_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4617},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_9692:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_969B\n\n\tPLA\n\tPLA\n\tJMP CarryObject\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9692</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">969</span>B\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JMP</span> CarryObject\n\n","line":4628},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_969B:\n\tJSR RenderSprite\n\n\tLDA ObjectType, X\n\tCMP #Enemy_POWBlock\n\tBCS loc_BANK2_96AA\n\n\tJSR ObjectTileCollision_SolidBackground\n\n\tJMP loc_BANK2_96AD\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">969</span>B:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_POWBlock\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>AA\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision_SolidBackground\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>AD\n\n","line":4638},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_96AA:\n\tJSR ObjectTileCollision\n\nloc_BANK2_96AD:\n\tLDA EnemyArray_42F, X\n\tBEQ EnemyBehavior_MushroomBlockAndPOW_Exit\n\n\tJSR ApplyObjectMovement\n\n\tPLA\n\tPLA\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK2_96D4\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tLDA ObjectXLo, X\n\tADC #$08\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK2_96D4\n\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, X\n\nloc_BANK2_96D4:\n\tPLA\n\tLDY ObjectYVelocity, X\n\tBMI locret_BANK2_9718\n\n\tAND #CollisionFlags_Down\n\tBEQ locret_BANK2_9718\n\n\tLDA byte_RAM_E\n\tCMP #$16\n\tBNE loc_BANK2_96EC\n\n\tLDA ObjectXVelocity, X\n\tBEQ loc_BANK2_96EC\n\n\tLDA #$14\n\tJMP SetObjectYVelocity\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>AA:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>AD:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_MushroomBlockAndPOW_Exit\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>D<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>D<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>D<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9718</span>\n\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9718</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$16</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>EC\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>EC\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$14</span>\n\t<span class=\"token opcode property\">JMP</span> SetObjectYVelocity\n\n","line":4651},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_96EC:\n\tLDA ObjectType, X\n\tCMP #Enemy_POWBlock\n\tBNE loc_BANK2_96FF\n\n\tLDA #$20\n\tSTA POWQuakeTimer\n\tLDA #SoundEffect3_Rumble_B\n\tSTA SoundEffectQueue3\n\tJMP sub_BANK2_98C4\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>EC:\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_POWBlock\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>FF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> POWQuakeTimer\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">3</span>_Rumble_B\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>C<span class=\"token decimalnumber string\">4</span>\n\n","line":4700},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_96FF:\n\tLDA ObjectYVelocity, X\n\tCMP #$16\n\tBCC loc_BANK2_970D\n\n\tJSR ResetObjectYVelocity\n\n\tLDA #$F5\n\tJMP sub_BANK2_95AA\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">96</span>FF:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$16</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">970</span>D\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F5</span>\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">95</span>AA\n\n","line":4713},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_970D:\n\tJSR ResetObjectYVelocity\n\n\tLDA EnemyVariable, X\n\tJSR ReplaceTile\n\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">970</span>D:\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ReplaceTile\n\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":4725},{"comment":"---------------------------------------------------------------------------","content":"locret_BANK2_9718:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9718</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":4735},{"comment":"End of function sub_BANK2_9692","content":"\n","htmlComment":"<p>End of function sub_BANK2_9692</p>\n","htmlContent":"\n","line":4740},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_SubspaceDoor:\n\tLDA #$04\n\tSTA EnemyArray_489, X\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tLDY SubspaceTimer\n\tBEQ loc_BANK2_9741\n\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE loc_BANK2_9741\n\n\tLDY PlayerState\n\tCPY #PlayerState_Dying\n\tBEQ loc_BANK2_9741\n\n\tDEC SubspaceTimer\n\tBNE loc_BANK2_9741\n\n\tSTA InSubspaceOrJar\n\tJSR DoAreaReset\n\n\tJMP loc_BANK2_97FF\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_SubspaceDoor:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> SubspaceTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9741</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9741</span>\n\n\t<span class=\"token opcode property\">LDY</span> PlayerState\n\t<span class=\"token opcode property\">CPY</span> #PlayerState_Dying\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9741</span>\n\n\t<span class=\"token opcode property\">DEC</span> SubspaceTimer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9741</span>\n\n\t<span class=\"token opcode property\">STA</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>FF\n\n","line":4742},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9741:\n\tLDA EnemyArray_453, X\n\tBNE locret_BANK2_9718\n\n\tLDA SubspaceDoorTimer\n\tBEQ loc_BANK2_9753\n\n\tDEC SubspaceDoorTimer\n\tBNE loc_BANK2_9753\n\n\tJMP TurnIntoPuffOfSmoke\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9741</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9718</span>\n\n\t<span class=\"token opcode property\">LDA</span> SubspaceDoorTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9753</span>\n\n\t<span class=\"token opcode property\">DEC</span> SubspaceDoorTimer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9753</span>\n\n\t<span class=\"token opcode property\">JMP</span> TurnIntoPuffOfSmoke\n\n","line":4768},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9753:\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDY DoorAnimationTimer\n\tLDA DoorSpriteAnimation, Y\n\tLDY #$00\n\tASL A\n\tBCC loc_BANK2_9767\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\nloc_BANK2_9767:\n\tLDA DoorAnimationTimer\n\tBEQ loc_BANK2_979A\n\n\tLDA byte_RAM_F4\n\tPHA\n\tJSR FindSpriteSlot\n\n\tCPY byte_RAM_F4\n\tPHP\n\tLDA EnemyMovementDirection, X\n\tCMP #$01\n\tBNE loc_BANK2_977F\n\n\tPLA\n\tEOR #$01\n\tPHA\n\nloc_BANK2_977F:\n\tPLP\n\tBCC loc_BANK2_9784\n\n\tSTY byte_RAM_F4\n\nloc_BANK2_9784:\n\tLDA #$7A\n\tJSR RenderSprite_DrawObject\n\n\tLDY byte_RAM_F4\n\tLDA SpriteDMAArea + 7, Y\n\tSEC\n\tSBC #$04\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $F, Y\n\tPLA\n\tSTA byte_RAM_F4\n\nloc_BANK2_979A:\n\tJSR FindSpriteSlot\n\n\tCPY byte_RAM_F4\n\tPHP\n\tLDA EnemyMovementDirection, X\n\tCMP #$01\n\tBNE loc_BANK2_97AA\n\n\tPLA\n\tEOR #$01\n\tPHA\n\nloc_BANK2_97AA:\n\tPLP\n\tBCS loc_BANK2_97AF\n\n\tSTY byte_RAM_F4\n\nloc_BANK2_97AF:\n\tLDA DoorAnimationTimer\n\tCMP #$19\n\tBCC loc_BANK2_97BA\n\n\tLDY #$00\n\tSTY byte_RAM_F4\n\nloc_BANK2_97BA:\n\tLDA #$76\n\tLDY EnemyArray_477, X\n\tBEQ loc_BANK2_97C3\n\n\tLDA #$7E\n\nloc_BANK2_97C3:\n\tJSR RenderSprite_DrawObject\n\n\tLDX DoorAnimationTimer\n\tBEQ loc_BANK2_9805\n\n\tINC DoorAnimationTimer\n\tLDY byte_RAM_F4\n\tLDA DoorSpriteAnimation, X\n\tBMI loc_BANK2_9805\n\n\tCLC\n\tADC SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + $B, Y\n\tCPX #(DoorSpriteAnimationEnd-DoorSpriteAnimation)\n\tBNE loc_BANK2_9805\n\n\tLDA #$00\n\tSTA DoorAnimationTimer\n\tJSR DoAreaReset\n\n\tLDA TransitionType\n\tCMP #TransitionType_Door\n\tBNE loc_BANK2_97F7\n\n\tINC DoAreaTransition\n\tBNE loc_BANK2_97FF\n\nloc_BANK2_97F7:\n\tLDA InSubspaceOrJar\n\tEOR #$02\n\tSTA InSubspaceOrJar\n\nloc_BANK2_97FF:\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\nloc_BANK2_9805:\n\tLDX byte_RAM_12\n\tRTS\n\n\nDoorSpriteAnimation:\n\t.db $00\n\t.db $01\n\t.db $01\n\t.db $02\n\t.db $02\n\t.db $03\n\t.db $04\n\t.db $06\n\t.db $08\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $08\n\t.db $06\n\t.db $04\n\t.db $03\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $01\n\t.db $01\n\t.db $01\n\t.db $01\n\t.db $01\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\nDoorSpriteAnimationEnd:\n\t.db $00\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9753</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">LDA</span> DoorSpriteAnimation, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9767</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9767</span>:\n\t<span class=\"token opcode property\">LDA</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">979</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">CPY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">977</span>F\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">PHA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">977</span>F:\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9784</span>\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9784</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7A</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">979</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">CPY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>AA\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">PHA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>AA:\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>AF\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>AF:\n\t<span class=\"token opcode property\">LDA</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$19</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>BA\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>BA:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$76</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>C<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7E</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>C<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDX</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9805</span>\n\n\t<span class=\"token opcode property\">INC</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> DoorSpriteAnimation, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9805</span>\n\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CPX</span> #(DoorSpriteAnimationEnd-DoorSpriteAnimation)\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9805</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">LDA</span> TransitionType\n\t<span class=\"token opcode property\">CMP</span> #TransitionType_Door\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>F<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">INC</span> DoAreaTransition\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>FF\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>F<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> InSubspaceOrJar\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">97</span>FF:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9805</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDoorSpriteAnimation:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\nDoorSpriteAnimationEnd:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n","line":4782},{"comment":"Unused?","content":"\t.db $A9\n\t.db $02\n\t.db $D0\n\t.db $06\n\n","htmlComment":"<p>Unused?</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A9</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\n","line":4967},{"comment":"\nNote: Door animation code copied from Bank 1\n\nIt's here, but seems to be unused?\n","content":"DoorAnimation_Locked_Bank2:\n\tLDA #$01\n\tBNE DoorAnimation_Bank2\n\nDoorAnimation_Unlocked_Bank2:\n\tLDA #$00\n\nDoorAnimation_Bank2:\n\tPHA\n\tLDY #$08\n\nDoorAnimation_Loop_Bank2:","htmlComment":"<p>Note: Door animation code copied from Bank 1</p>\n<p>It's here, but seems to be unused?</p>\n","htmlContent":"DoorAnimation_Locked_Bank<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> DoorAnimation_Bank<span class=\"token decimalnumber string\">2</span>\n\nDoorAnimation_Unlocked_Bank<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nDoorAnimation_Bank<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$08</span>\n\nDoorAnimation_Loop_Bank<span class=\"token decimalnumber string\">2</span>:","line":4978},{"comment":"skip if inactive","content":"\tLDA EnemyState, Y\n\tBEQ DoorAnimation_LoopNext_Bank2\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_SubspaceDoor\n\tBNE DoorAnimation_LoopNext_Bank2\n\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, Y\n\tLDA #$20\n\tSTA EnemyTimer, Y\n\nDoorAnimation_LoopNext_Bank2:\n\tDEY\n\tBPL DoorAnimation_Loop_Bank2\n\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI DoorAnimation_Exit_Bank2\n\n\tLDA #$00\n\tSTA DoorAnimationTimer\n\tSTA SubspaceDoorTimer\n\tLDX byte_RAM_0\n\tPLA\n\tSTA EnemyArray_477, X\n\tLDA #Enemy_SubspaceDoor\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA PlayerXLo\n\tADC #$08\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA PlayerYLo\n\tSTA ObjectYLo, X\n\tLDA PlayerYHi\n\tSTA ObjectYHi, X\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDX byte_RAM_12\n\tRTS\n\nDoorAnimation_Exit_Bank2:\n\tPLA\n\tRTS\n\n\nShellSpeed:\n\t.db $1C\n\t.db $E4\n\n\nEnemyBehavior_Shell:\n\tJSR ObjectTileCollision\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ EnemyBehavior_Shell_Slide\n\nEnemyBehavior_Shell_Destroy:\n\tLDA #SoundEffect1_EnemyHit\n\tSTA SoundEffectQueue1\n\tJMP TurnIntoPuffOfSmoke\n\n\nEnemyBehavior_Shell_Slide:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Shell_Render\n\n\tJSR ResetObjectYVelocity\n\nEnemyBehavior_Shell_Render:\n\tJSR RenderSprite\n\n\tLDY EnemyMovementDirection, X\n\tLDA ShellSpeed - 1, Y\n\tSTA ObjectXVelocity, X\n\tJMP ApplyObjectMovement\n\n\n","htmlComment":"<p>skip if inactive</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> DoorAnimation_LoopNext_Bank<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_SubspaceDoor\n\t<span class=\"token opcode property\">BNE</span> DoorAnimation_LoopNext_Bank<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_PuffOfSmoke\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">Y</span>\n\nDoorAnimation_LoopNext_Bank<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> DoorAnimation_Loop_Bank<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_TryAllSlots\n\n\t<span class=\"token opcode property\">BMI</span> DoorAnimation_Exit_Bank<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">STA</span> SubspaceDoorTimer\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_SubspaceDoor\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nDoorAnimation_Exit_Bank<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nShellSpeed:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>\n\n\nEnemyBehavior_Shell:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Shell_Slide\n\nEnemyBehavior_Shell_Destroy:\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_EnemyHit\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JMP</span> TurnIntoPuffOfSmoke\n\n\nEnemyBehavior_Shell_Slide:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Shell_Render\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\nEnemyBehavior_Shell_Render:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ShellSpeed - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectMovement\n\n\n","line":4991},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK2_98C4:\n\tLDA #EnemyState_BlockFizzle\n\tSTA EnemyState, X\n\tLDA #$18\n\tSTA EnemyTimer, X\n\nlocret_BANK2_98CC:\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>C<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_BlockFizzle\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>CC:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5079},{"comment":"End of function sub_BANK2_98C4","content":"","htmlComment":"<p>End of function sub_BANK2_98C4</p>\n","htmlContent":"","line":5090},{"comment":"\nIntercepts the normal enemy behavior when the object is being carried\n","content":"EnemyBehavior_CheckBeingCarriedTimerInterrupt:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ locret_BANK2_98CC\n","htmlComment":"<p>Intercepts the normal enemy behavior when the object is being carried</p>\n","htmlContent":"EnemyBehavior_CheckBeingCarriedTimerInterrupt:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>CC\n","line":5095},{"comment":"Cancel previous subroutine and go into carry mode","content":"\tPLA\n\tPLA\n\tJMP CarryObject\n\n","htmlComment":"<p>Cancel previous subroutine and go into carry mode</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JMP</span> CarryObject\n\n","line":5100},{"comment":"\nIf EnemyArray_42F is set, interrupt the EnemyBehavior subroutine and just\nrender the sprite and run physics\n\nInput\nX = enemy index\n","content":"EnemyBehavior_Check42FPhysicsInterrupt:\n\tLDA EnemyArray_42F, X\n\tBEQ locret_BANK2_98EA\n\n\tPLA\n\tPLA\n\tJMP RenderSpriteAndApplyObjectMovement\n\n\nEnemyInit_FallingLogs:\n\tJSR EnemyInit_Stationary\n\n\tSTA EnemyArray_438, X\n\tLDA ObjectYLo, X\n\tSTA EnemyVariable, X\n\nlocret_BANK2_98EA:\n\tRTS\n\n\n\n","htmlComment":"<p>If EnemyArray_42F is set, interrupt the EnemyBehavior subroutine and just\nrender the sprite and run physics</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>EA\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSpriteAndApplyObjectMovement\n\n\nEnemyInit_FallingLogs:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Stationary\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">98</span>EA:\n\t<span class=\"token opcode property\">RTS</span>\n\n\n\n","line":5112},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_FallingLogs:\n\tASL ObjectAttributes, X\n\tLDA byte_RAM_10\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tROR ObjectAttributes, X\n\tLDY EnemyArray_B1, X\n\tBNE loc_BANK2_9919\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_FallingLogs:\n\t<span class=\"token opcode property\">ASL</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9919</span>\n","line":5134},{"comment":"behind background","content":"\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_BehindBackground\n\tSTA ObjectAttributes, X\n\tLDA EnemyVariable, X\n\tSEC\n\tSBC #$0C\n\tCMP ObjectYLo, X\n\tLDA #$FE\n\tBCC loc_BANK2_9914\n","htmlComment":"<p>behind background</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FE</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9914</span>\n","line":5147},{"comment":"in front of background","content":"\tLDA ObjectAttributes, X\n\tAND #$DF\n\tSTA ObjectAttributes, X\n\tINC EnemyArray_B1, X\n\tLDA #$04\n\nloc_BANK2_9914:\n\tSTA ObjectYVelocity, X\n\tJMP loc_BANK2_9921\n\n","htmlComment":"<p>in front of background</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$DF</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9914</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9921</span>\n\n","line":5158},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9919:\n\tLDA byte_RAM_10\n\tAND #$07\n\tBNE loc_BANK2_9921\n\n\tINC ObjectYVelocity, X\n\nloc_BANK2_9921:\n\tJSR ApplyObjectPhysicsY\n\n\tLDA ObjectYLo, X\n\tCMP #$F0\n\tBCC loc_BANK2_9932\n\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tLDA EnemyVariable, X\n\tSTA ObjectYLo, X\n\nloc_BANK2_9932:\n\tJMP RenderSprite\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9919</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9921</span>\n\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9921</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9932</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9932</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n","line":5169},{"comment":"---------------------------------------------------------------------------","content":"","htmlComment":"<hr>\n","htmlContent":"","line":5193},{"comment":"\nKills all enemies on the screen (ie. POW block quake)\n","content":"KillOnscreenEnemies:\n\tLDA #$00\n","htmlComment":"<p>Kills all enemies on the screen (ie. POW block quake)</p>\n","htmlContent":"KillOnscreenEnemies:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n","line":5197},{"comment":"\nDestroys all enemies on the screen\n\nInput\nA = 0 for POW\n","content":"DestroyOnscreenEnemies:\n\tSTA byte_RAM_0\n\tLDX #$08\n\nDestroyOnscreenEnemies_Loop:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBNE DestroyOnscreenEnemies_Next\n\n\tLDA byte_RAM_0\n\tBEQ KillOnscreenEnemies_CheckCollision\n\n\tLDA ObjectType, X\n\tCMP #Enemy_Bomb\n\tBEQ DestroyOnscreenEnemies_DestroyItem\n\n\tCMP #Enemy_VegetableSmall\n\tBCS DestroyOnscreenEnemies_Next\n\nDestroyOnscreenEnemies_DestroyItem:\n\tLDA HoldingItem\n\tBEQ DestroyOnscreenEnemies_Poof\n\n\tCPX ObjectBeingCarriedIndex\n\tBNE DestroyOnscreenEnemies_Poof\n\n\tLDA #$00\n\tSTA HoldingItem\n\nDestroyOnscreenEnemies_Poof:\n\tSTX byte_RAM_E\n\tJSR TurnIntoPuffOfSmoke\n\n\tLDX byte_RAM_E\n\tJMP DestroyOnscreenEnemies_Next\n\nKillOnscreenEnemies_CheckCollision:\n\tLDA EnemyCollision, X\n\tBEQ DestroyOnscreenEnemies_Next\n\nIFDEF FIX_POW_LOG_GLITCH\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCS KillOnscreenEnemies_SetCollision\nENDIF\n","htmlComment":"<p>Destroys all enemies on the screen</p>\n<p>Input\nA = 0 for POW</p>\n","htmlContent":"DestroyOnscreenEnemies:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$08</span>\n\nDestroyOnscreenEnemies_Loop:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">BNE</span> DestroyOnscreenEnemies_Next\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">BEQ</span> KillOnscreenEnemies_CheckCollision\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bomb\n\t<span class=\"token opcode property\">BEQ</span> DestroyOnscreenEnemies_DestroyItem\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> DestroyOnscreenEnemies_Next\n\nDestroyOnscreenEnemies_DestroyItem:\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> DestroyOnscreenEnemies_Poof\n\n\t<span class=\"token opcode property\">CPX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">BNE</span> DestroyOnscreenEnemies_Poof\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\nDestroyOnscreenEnemies_Poof:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_E\n\t<span class=\"token opcode property\">JSR</span> TurnIntoPuffOfSmoke\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_E\n\t<span class=\"token opcode property\">JMP</span> DestroyOnscreenEnemies_Next\n\nKillOnscreenEnemies_CheckCollision:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> DestroyOnscreenEnemies_Next\n\nIFDEF FIX_POW_LOG_GLITCH\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> KillOnscreenEnemies_SetCollision\nENDIF\n","line":5206},{"comment":"BUG: For object that don't follow normal gravity rules, this will send\nthem flying into the air, ie. throwing a POW block from a falling log","content":"\tLDA #$D8\n\tSTA ObjectYVelocity, X\n\nKillOnscreenEnemies_SetCollision:\n\tLDA EnemyCollision, X\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, X\n\nDestroyOnscreenEnemies_Next:\n\tDEX\n\tBPL DestroyOnscreenEnemies_Loop\n\n\tLDX byte_RAM_12\n\tRTS\n\n","htmlComment":"<p>BUG: For object that don't follow normal gravity rules, this will send\nthem flying into the air, ie. throwing a POW block from a falling log</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nKillOnscreenEnemies_SetCollision:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\nDestroyOnscreenEnemies_Next:\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> DestroyOnscreenEnemies_Loop\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5254},{"comment":"\nChecks whether the enemy is taking mortal damage\n\nIf so, play the sound effect, kill the enemy, and cancel the previous enemy\nbehavior subroutine.\n\nInput\nX = enemy index\n","content":"EnemyBehavior_CheckDamagedInterrupt:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Damage\n\tBEQ EnemyBehavior_CheckDamagedInterrupt_Exit\n\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ EnemyBehavior_CheckDamagedInterrupt_SoundEffect\n","htmlComment":"<p>Checks whether the enemy is taking mortal damage</p>\n<p>If so, play the sound effect, kill the enemy, and cancel the previous enemy\nbehavior subroutine.</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"EnemyBehavior_CheckDamagedInterrupt:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CheckDamagedInterrupt_Exit\n\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CheckDamagedInterrupt_SoundEffect\n","line":5279},{"comment":"remove the item from the player's hands","content":"\tLDA #$00\n\tSTA HoldingItem\n\nEnemyBehavior_CheckDamagedInterrupt_SoundEffect:\n\tLDY ObjectType, X","htmlComment":"<p>remove the item from the player's hands</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\nEnemyBehavior_CheckDamagedInterrupt_SoundEffect:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>","line":5288},{"comment":"is this enemy a squawker?","content":"\tLDA EnemyArray_46E_Data, Y\n\tAND #%00001000\n\tASL A ; then A = DPCM_BossDeath\n\tBNE EnemyBehavior_CheckDamagedInterrupt_BossDeathSound\n","htmlComment":"<p>is this enemy a squawker?</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00001000</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span> <span class=\"token comment\">; then A = DPCM_BossDeath</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CheckDamagedInterrupt_BossDeathSound\n","line":5294},{"comment":"normal enemy hit sound","content":"\tLDA DPCMQueue\n\tBNE EnemyBehavior_CheckDamagedInterrupt_CheckPidgit\n\n\tLDA #SoundEffect1_EnemyHit\n\tSTA SoundEffectQueue1\n\tBNE EnemyBehavior_CheckDamagedInterrupt_CheckPidgit\n\nEnemyBehavior_CheckDamagedInterrupt_BossDeathSound:\nIFDEF EXPAND_MUSIC\n\tLDA #DPCM_BossDeath\nENDIF\n\tSTA DPCMQueue\n\nEnemyBehavior_CheckDamagedInterrupt_CheckPidgit:","htmlComment":"<p>normal enemy hit sound</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> DPCMQueue\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CheckDamagedInterrupt_CheckPidgit\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_EnemyHit\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CheckDamagedInterrupt_CheckPidgit\n\nEnemyBehavior_CheckDamagedInterrupt_BossDeathSound:\nIFDEF EXPAND_MUSIC\n\t<span class=\"token opcode property\">LDA</span> #DPCM_BossDeath\nENDIF\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nEnemyBehavior_CheckDamagedInterrupt_CheckPidgit:","line":5300},{"comment":"killing pidgit leaves a flying carpet behind","content":"\tCPY #Enemy_Pidgit\n\tBNE EnemyBehavior_CheckDamagedInterrupt_SetDead\n\n\tLDA EnemyArray_42F, X\n\tBNE EnemyBehavior_CheckDamagedInterrupt_SetDead\n\n\tJSR CreateFlyingCarpet\n\nEnemyBehavior_CheckDamagedInterrupt_SetDead:\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X","htmlComment":"<p>killing pidgit leaves a flying carpet behind</p>\n","htmlContent":"\t<span class=\"token opcode property\">CPY</span> #Enemy_Pidgit\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CheckDamagedInterrupt_SetDead\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CheckDamagedInterrupt_SetDead\n\n\t<span class=\"token opcode property\">JSR</span> CreateFlyingCarpet\n\nEnemyBehavior_CheckDamagedInterrupt_SetDead:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Dead\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>","line":5315},{"comment":"interrupt the previous subroutine","content":"\tPLA\n\tPLA\n\nEnemyBehavior_CheckDamagedInterrupt_Exit:\n\tRTS\n\n\nEnemyTilemap1:\n\t.db $D0,$D2 ; $00\n\t.db $D4,$D6 ; $02\n\t.db $F8,$F8 ; $04\n\t.db $FA,$FA ; $06\n\t.db $CC,$CE ; $08\n\t.db $CC,$CE ; $0A\n\t.db $C8,$CA ; $0C\n\t.db $C8,$CA ; $0E\n\t.db $70,$72 ; $10\n\t.db $74,$76 ; $12\n\t.db $C0,$C2 ; $14\n\t.db $C4,$C6 ; $16\n\t.db $E1,$E3 ; $18\n\t.db $E5,$E7 ; $1A\n\t.db $E1,$E3 ; $1C\n\t.db $E5,$E7 ; $1E\n\t.db $78,$7A ; $20\n\t.db $7C,$7E ; $22\n\t.db $DC,$DA ; $24\n\t.db $DC,$DE ; $26\n\t.db $FE,$FE ; $28\n\t.db $FC,$FC ; $2A\n\t.db $94,$94 ; $2C\n\t.db $96,$96 ; $2E\n\t.db $98,$98 ; $30\n\t.db $9A,$9A ; $32\n\t.db $DB,$DD ; $34\n\t.db $DB,$DD ; $36\n\t.db $7D,$7F ; $38\n\t.db $C1,$C3 ; $3A\n\t.db $8C,$8C ; $3C\n\t.db $8E,$8E ; $3E\n\t.db $E0,$E2 ; $40\n\t.db $6B,$6D ; $42\n\t.db $6D,$6F ; $44\n\t.db $3A,$3A ; $46\n\t.db $3A,$3A ; $48\n\t.db $38,$38 ; $4A\n\t.db $38,$38 ; $4C\n\t.db $36,$36 ; $4E\n\t.db $36,$36 ; $50\n\t.db $34,$34 ; $52\n\t.db $34,$34 ; $54\n\t.db $AE,$FB ; $56\n\t.db $AE,$FB ; $58\n\t.db $80,$82 ; $5A\n\t.db $84,$86 ; $5C\n\t.db $80,$82 ; $5E\n\t.db $AA,$AC ; $60\n\t.db $88,$8A ; $62\n\t.db $84,$86 ; $64\n\t.db $88,$8A ; $66\n\t.db $AA,$AC ; $68\n\t.db $BC,$BE ; $6A\n\t.db $AA,$AC ; $6C\n\t.db $BC,$BE ; $6E\n\t.db $AA,$AC ; $70\n\t.db $B5,$B9 ; $72\n\t.db $B5,$B9 ; $74\n\t.db $81,$83 ; $76\n\t.db $85,$87 ; $78\n\t.db $FF,$FF ; $7A\n\t.db $FF,$FF ; $7C\n\t.db $81,$83 ; $7E\n\t.db $F5,$87 ; $80\n\t.db $C5,$C7 ; $82\n\t.db $C9,$CB ; $84\n\t.db $92,$94 ; $86\n\t.db $29,$29 ; $88\n\t.db $2B,$2B ; $8A\n\t.db $3D,$3F ; $8C\n\t.db $4C,$4E ; $8E\n\t.db $50,$52 ; $90\n\t.db $4C,$4E ; $92\n\t.db $56,$58 ; $94\n\t.db $FB,$5C ; $96\n\t.db $FB,$5A ; $98\n\t.db $FB,$FB ; $9A\n\t.db $FB,$54 ; $9C\n\t.db $CF,$CF ; $9E\n\t.db $A5,$A5 ; $A0\n\t.db $B0,$B2 ; $A2\n\t.db $90,$90 ; $A4\n\t.db $CD,$CD ; $A6\n\t.db $A8,$A8 ; $A8\n\t.db $A8,$A8 ; $AA\n\t.db $A0,$A2 ; $AC\n\t.db $A4,$A4 ; $AE\n\t.db $A4,$A4 ; $B0\n\t.db $4D,$4D ; $B2\n\t.db $8C,$8C ; $B4\n\t.db $A6,$A6 ; $B6\n\t.db $AB,$AB ; $B8\nIFDEF EXPAND_TABLES\n\tunusedSpace EnemyTilemap1 + $100, $FB\nENDIF\n","htmlComment":"<p>interrupt the previous subroutine</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\nEnemyBehavior_CheckDamagedInterrupt_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyTilemap<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>,<span class=\"token hexnumber string\">$D2</span> <span class=\"token comment\">; $00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D4</span>,<span class=\"token hexnumber string\">$D6</span> <span class=\"token comment\">; $02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>,<span class=\"token hexnumber string\">$F8</span> <span class=\"token comment\">; $04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FA</span>,<span class=\"token hexnumber string\">$FA</span> <span class=\"token comment\">; $06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$CC</span>,<span class=\"token hexnumber string\">$CE</span> <span class=\"token comment\">; $08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$CC</span>,<span class=\"token hexnumber string\">$CE</span> <span class=\"token comment\">; $0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>,<span class=\"token hexnumber string\">$CA</span> <span class=\"token comment\">; $0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>,<span class=\"token hexnumber string\">$CA</span> <span class=\"token comment\">; $0E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$70</span>,<span class=\"token hexnumber string\">$72</span> <span class=\"token comment\">; $10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$74</span>,<span class=\"token hexnumber string\">$76</span> <span class=\"token comment\">; $12</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C0</span>,<span class=\"token hexnumber string\">$C2</span> <span class=\"token comment\">; $14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C4</span>,<span class=\"token hexnumber string\">$C6</span> <span class=\"token comment\">; $16</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E1</span>,<span class=\"token hexnumber string\">$E3</span> <span class=\"token comment\">; $18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E5</span>,<span class=\"token hexnumber string\">$E7</span> <span class=\"token comment\">; $1A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E1</span>,<span class=\"token hexnumber string\">$E3</span> <span class=\"token comment\">; $1C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E5</span>,<span class=\"token hexnumber string\">$E7</span> <span class=\"token comment\">; $1E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$78</span>,<span class=\"token hexnumber string\">$7A</span> <span class=\"token comment\">; $20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$7C</span>,<span class=\"token hexnumber string\">$7E</span> <span class=\"token comment\">; $22</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>,<span class=\"token hexnumber string\">$DA</span> <span class=\"token comment\">; $24</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>,<span class=\"token hexnumber string\">$DE</span> <span class=\"token comment\">; $26</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span>,<span class=\"token hexnumber string\">$FE</span> <span class=\"token comment\">; $28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>,<span class=\"token hexnumber string\">$FC</span> <span class=\"token comment\">; $2A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$94</span>,<span class=\"token hexnumber string\">$94</span> <span class=\"token comment\">; $2C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$96</span>,<span class=\"token hexnumber string\">$96</span> <span class=\"token comment\">; $2E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$98</span>,<span class=\"token hexnumber string\">$98</span> <span class=\"token comment\">; $30</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$9A</span>,<span class=\"token hexnumber string\">$9A</span> <span class=\"token comment\">; $32</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DB</span>,<span class=\"token hexnumber string\">$DD</span> <span class=\"token comment\">; $34</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DB</span>,<span class=\"token hexnumber string\">$DD</span> <span class=\"token comment\">; $36</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$7D</span>,<span class=\"token hexnumber string\">$7F</span> <span class=\"token comment\">; $38</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C1</span>,<span class=\"token hexnumber string\">$C3</span> <span class=\"token comment\">; $3A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8C</span>,<span class=\"token hexnumber string\">$8C</span> <span class=\"token comment\">; $3C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8E</span>,<span class=\"token hexnumber string\">$8E</span> <span class=\"token comment\">; $3E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>,<span class=\"token hexnumber string\">$E2</span> <span class=\"token comment\">; $40</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6B</span>,<span class=\"token hexnumber string\">$6D</span> <span class=\"token comment\">; $42</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6D</span>,<span class=\"token hexnumber string\">$6F</span> <span class=\"token comment\">; $44</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3A</span>,<span class=\"token hexnumber string\">$3A</span> <span class=\"token comment\">; $46</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3A</span>,<span class=\"token hexnumber string\">$3A</span> <span class=\"token comment\">; $48</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$38</span>,<span class=\"token hexnumber string\">$38</span> <span class=\"token comment\">; $4A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$38</span>,<span class=\"token hexnumber string\">$38</span> <span class=\"token comment\">; $4C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$36</span>,<span class=\"token hexnumber string\">$36</span> <span class=\"token comment\">; $4E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$36</span>,<span class=\"token hexnumber string\">$36</span> <span class=\"token comment\">; $50</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$34</span>,<span class=\"token hexnumber string\">$34</span> <span class=\"token comment\">; $52</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$34</span>,<span class=\"token hexnumber string\">$34</span> <span class=\"token comment\">; $54</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AE</span>,<span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; $56</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AE</span>,<span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; $58</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>,<span class=\"token hexnumber string\">$82</span> <span class=\"token comment\">; $5A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$84</span>,<span class=\"token hexnumber string\">$86</span> <span class=\"token comment\">; $5C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>,<span class=\"token hexnumber string\">$82</span> <span class=\"token comment\">; $5E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AA</span>,<span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $60</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$88</span>,<span class=\"token hexnumber string\">$8A</span> <span class=\"token comment\">; $62</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$84</span>,<span class=\"token hexnumber string\">$86</span> <span class=\"token comment\">; $64</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$88</span>,<span class=\"token hexnumber string\">$8A</span> <span class=\"token comment\">; $66</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AA</span>,<span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $68</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BC</span>,<span class=\"token hexnumber string\">$BE</span> <span class=\"token comment\">; $6A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AA</span>,<span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $6C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BC</span>,<span class=\"token hexnumber string\">$BE</span> <span class=\"token comment\">; $6E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AA</span>,<span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $70</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B5</span>,<span class=\"token hexnumber string\">$B9</span> <span class=\"token comment\">; $72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B5</span>,<span class=\"token hexnumber string\">$B9</span> <span class=\"token comment\">; $74</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>,<span class=\"token hexnumber string\">$83</span> <span class=\"token comment\">; $76</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$85</span>,<span class=\"token hexnumber string\">$87</span> <span class=\"token comment\">; $78</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>,<span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; $7A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>,<span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; $7C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>,<span class=\"token hexnumber string\">$83</span> <span class=\"token comment\">; $7E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F5</span>,<span class=\"token hexnumber string\">$87</span> <span class=\"token comment\">; $80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C5</span>,<span class=\"token hexnumber string\">$C7</span> <span class=\"token comment\">; $82</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C9</span>,<span class=\"token hexnumber string\">$CB</span> <span class=\"token comment\">; $84</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$92</span>,<span class=\"token hexnumber string\">$94</span> <span class=\"token comment\">; $86</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$29</span>,<span class=\"token hexnumber string\">$29</span> <span class=\"token comment\">; $88</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2B</span>,<span class=\"token hexnumber string\">$2B</span> <span class=\"token comment\">; $8A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3D</span>,<span class=\"token hexnumber string\">$3F</span> <span class=\"token comment\">; $8C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4C</span>,<span class=\"token hexnumber string\">$4E</span> <span class=\"token comment\">; $8E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$50</span>,<span class=\"token hexnumber string\">$52</span> <span class=\"token comment\">; $90</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4C</span>,<span class=\"token hexnumber string\">$4E</span> <span class=\"token comment\">; $92</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$56</span>,<span class=\"token hexnumber string\">$58</span> <span class=\"token comment\">; $94</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>,<span class=\"token hexnumber string\">$5C</span> <span class=\"token comment\">; $96</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>,<span class=\"token hexnumber string\">$5A</span> <span class=\"token comment\">; $98</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>,<span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; $9A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>,<span class=\"token hexnumber string\">$54</span> <span class=\"token comment\">; $9C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$CF</span>,<span class=\"token hexnumber string\">$CF</span> <span class=\"token comment\">; $9E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A5</span>,<span class=\"token hexnumber string\">$A5</span> <span class=\"token comment\">; $A0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B0</span>,<span class=\"token hexnumber string\">$B2</span> <span class=\"token comment\">; $A2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$90</span>,<span class=\"token hexnumber string\">$90</span> <span class=\"token comment\">; $A4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$CD</span>,<span class=\"token hexnumber string\">$CD</span> <span class=\"token comment\">; $A6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A8</span>,<span class=\"token hexnumber string\">$A8</span> <span class=\"token comment\">; $A8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A8</span>,<span class=\"token hexnumber string\">$A8</span> <span class=\"token comment\">; $AA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span>,<span class=\"token hexnumber string\">$A2</span> <span class=\"token comment\">; $AC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A4</span>,<span class=\"token hexnumber string\">$A4</span> <span class=\"token comment\">; $AE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A4</span>,<span class=\"token hexnumber string\">$A4</span> <span class=\"token comment\">; $B0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4D</span>,<span class=\"token hexnumber string\">$4D</span> <span class=\"token comment\">; $B2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8C</span>,<span class=\"token hexnumber string\">$8C</span> <span class=\"token comment\">; $B4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A6</span>,<span class=\"token hexnumber string\">$A6</span> <span class=\"token comment\">; $B6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AB</span>,<span class=\"token hexnumber string\">$AB</span> <span class=\"token comment\">; $B8</span>\nIFDEF EXPAND_TABLES\n\tunusedSpace EnemyTilemap<span class=\"token decimalnumber string\">1</span> + <span class=\"token hexnumber string\">$100</span>, <span class=\"token hexnumber string\">$FB</span>\nENDIF\n","line":5327},{"comment":"\nEnemy Animation table\n=====================\n\nThese point to the tilemaps offset for an object's animation frames.\n\n$FF is used to make an enemy invisible\n","content":"EnemyAnimationTable:\n\t.db $00 ; $00 Enemy_Heart\n\t.db $00 ; $01 Enemy_ShyguyRed\n\t.db $08 ; $02 Enemy_Tweeter\n\t.db $00 ; $03 Enemy_ShyguyPink\n\t.db $0C ; $04 Enemy_Porcupo\n\t.db $10 ; $05 Enemy_SnifitRed\n\t.db $10 ; $06 Enemy_SnifitGray\n\t.db $10 ; $07 Enemy_SnifitPink\n\t.db $40 ; $08 Enemy_Ostro\n\t.db $14 ; $09 Enemy_BobOmb\n\t.db $18 ; $0A Enemy_AlbatossCarryingBobOmb\n\t.db $18 ; $0B Enemy_AlbatossStartRight\n\t.db $18 ; $0C Enemy_AlbatossStartLeft\n\t.db $20 ; $0D Enemy_NinjiRunning\n\t.db $20 ; $0E Enemy_NinjiJumping\n\t.db $24 ; $0F Enemy_BeezoDiving\n\t.db $24 ; $10 Enemy_BeezoStraight\n\t.db $BE ; $11 Enemy_WartBubble\n\t.db $00 ; $12 Enemy_Pidgit\n\t.db $86 ; $13 Enemy_Trouter\n\t.db $88 ; $14 Enemy_Hoopstar\n\t.db $FF ; $15 Enemy_JarGeneratorShyguy\n\t.db $FF ; $16 Enemy_JarGeneratorBobOmb\n\t.db $8C ; $17 Enemy_Phanto\n\t.db $5C ; $18 Enemy_CobratJar\n\t.db $5C ; $19 Enemy_CobratSand\n\t.db $6C ; $1A Enemy_Pokey\n\t.db $56 ; $1B Enemy_Bullet\n\t.db $5A ; $1C Enemy_Birdo\n\t.db $14 ; $1D Enemy_Mouser\n\t.db $72 ; $1E Enemy_Egg\n\t.db $00 ; $1F Enemy_Tryclyde\n\t.db $A8 ; $20 Enemy_Fireball\n\t.db $00 ; $21 Enemy_Clawgrip\n\t.db $D6 ; $22 Enemy_ClawgripRock\n\t.db $AC ; $23 Enemy_PanserStationaryFiresAngled\n\t.db $AC ; $24 Enemy_PanserWalking\n\t.db $AC ; $25 Enemy_PanserStationaryFiresUp\n\t.db $74 ; $26 Enemy_Autobomb\n\t.db $7A ; $27 Enemy_AutobombFire\n\t.db $92 ; $28 Enemy_WhaleSpout\n\t.db $9A ; $29 Enemy_Flurry\n\t.db $80 ; $2A Enemy_Fryguy\n\t.db $90 ; $2B Enemy_FryguySplit\n\t.db $00 ; $2C Enemy_Wart\n\t.db $00 ; $2D Enemy_HawkmouthBoss\n\t.db $B6 ; $2E Enemy_Spark1\n\t.db $B6 ; $2F Enemy_Spark2\n\t.db $B6 ; $30 Enemy_Spark3\n\t.db $B6 ; $31 Enemy_Spark4\n\t.db $28 ; $32 Enemy_VegetableSmall\n\t.db $2A ; $33 Enemy_VegetableLarge\n\t.db $2C ; $34 Enemy_VegetableWart\n\t.db $2E ; $35 Enemy_Shell\n\t.db $30 ; $36 Enemy_Coin\n\t.db $34 ; $37 Enemy_Bomb\n\t.db $00 ; $38 Enemy_Rocket\n\t.db $38 ; $39 Enemy_MushroomBlock\n\t.db $3A ; $3A Enemy_POWBlock\n\t.db $42 ; $3B Enemy_FallingLogs\n\t.db $82 ; $3C Enemy_SubspaceDoor\n\t.db $82 ; $3D Enemy_Key\n\t.db $84 ; $3E Enemy_SubspacePotion\n\t.db $A0 ; $3F Enemy_Mushroom\n\t.db $A2 ; $40 Enemy_Mushroom1up\n\t.db $04 ; $41 Enemy_FlyingCarpet\n\t.db $8E ; $42 Enemy_HawkmouthRight\n\t.db $8E ; $43 Enemy_HawkmouthLeft\n\t.db $9E ; $44 Enemy_CrystalBall\n\t.db $A6 ; $45 Enemy_Starman\n\t.db $A4 ; $46 Enemy_Stopwatch\n","htmlComment":"<h1>Enemy Animation table</h1>\n<p>These point to the tilemaps offset for an object's animation frames.</p>\n<p>$FF is used to make an enemy invisible</p>\n","htmlContent":"EnemyAnimationTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $00 Enemy_Heart</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $01 Enemy_ShyguyRed</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span> <span class=\"token comment\">; $02 Enemy_Tweeter</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $03 Enemy_ShyguyPink</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span> <span class=\"token comment\">; $04 Enemy_Porcupo</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span> <span class=\"token comment\">; $05 Enemy_SnifitRed</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span> <span class=\"token comment\">; $06 Enemy_SnifitGray</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span> <span class=\"token comment\">; $07 Enemy_SnifitPink</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$40</span> <span class=\"token comment\">; $08 Enemy_Ostro</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span> <span class=\"token comment\">; $09 Enemy_BobOmb</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span> <span class=\"token comment\">; $0A Enemy_AlbatossCarryingBobOmb</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span> <span class=\"token comment\">; $0B Enemy_AlbatossStartRight</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span> <span class=\"token comment\">; $0C Enemy_AlbatossStartLeft</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span> <span class=\"token comment\">; $0D Enemy_NinjiRunning</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span> <span class=\"token comment\">; $0E Enemy_NinjiJumping</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$24</span> <span class=\"token comment\">; $0F Enemy_BeezoDiving</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$24</span> <span class=\"token comment\">; $10 Enemy_BeezoStraight</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BE</span> <span class=\"token comment\">; $11 Enemy_WartBubble</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $12 Enemy_Pidgit</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$86</span> <span class=\"token comment\">; $13 Enemy_Trouter</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$88</span> <span class=\"token comment\">; $14 Enemy_Hoopstar</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; $15 Enemy_JarGeneratorShyguy</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; $16 Enemy_JarGeneratorBobOmb</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8C</span> <span class=\"token comment\">; $17 Enemy_Phanto</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5C</span> <span class=\"token comment\">; $18 Enemy_CobratJar</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5C</span> <span class=\"token comment\">; $19 Enemy_CobratSand</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6C</span> <span class=\"token comment\">; $1A Enemy_Pokey</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$56</span> <span class=\"token comment\">; $1B Enemy_Bullet</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5A</span> <span class=\"token comment\">; $1C Enemy_Birdo</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span> <span class=\"token comment\">; $1D Enemy_Mouser</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span> <span class=\"token comment\">; $1E Enemy_Egg</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $1F Enemy_Tryclyde</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A8</span> <span class=\"token comment\">; $20 Enemy_Fireball</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $21 Enemy_Clawgrip</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D6</span> <span class=\"token comment\">; $22 Enemy_ClawgripRock</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $23 Enemy_PanserStationaryFiresAngled</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $24 Enemy_PanserWalking</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$AC</span> <span class=\"token comment\">; $25 Enemy_PanserStationaryFiresUp</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$74</span> <span class=\"token comment\">; $26 Enemy_Autobomb</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$7A</span> <span class=\"token comment\">; $27 Enemy_AutobombFire</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$92</span> <span class=\"token comment\">; $28 Enemy_WhaleSpout</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$9A</span> <span class=\"token comment\">; $29 Enemy_Flurry</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; $2A Enemy_Fryguy</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$90</span> <span class=\"token comment\">; $2B Enemy_FryguySplit</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $2C Enemy_Wart</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $2D Enemy_HawkmouthBoss</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B6</span> <span class=\"token comment\">; $2E Enemy_Spark1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B6</span> <span class=\"token comment\">; $2F Enemy_Spark2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B6</span> <span class=\"token comment\">; $30 Enemy_Spark3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B6</span> <span class=\"token comment\">; $31 Enemy_Spark4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span> <span class=\"token comment\">; $32 Enemy_VegetableSmall</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2A</span> <span class=\"token comment\">; $33 Enemy_VegetableLarge</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2C</span> <span class=\"token comment\">; $34 Enemy_VegetableWart</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2E</span> <span class=\"token comment\">; $35 Enemy_Shell</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span> <span class=\"token comment\">; $36 Enemy_Coin</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$34</span> <span class=\"token comment\">; $37 Enemy_Bomb</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; $38 Enemy_Rocket</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$38</span> <span class=\"token comment\">; $39 Enemy_MushroomBlock</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3A</span> <span class=\"token comment\">; $3A Enemy_POWBlock</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$42</span> <span class=\"token comment\">; $3B Enemy_FallingLogs</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$82</span> <span class=\"token comment\">; $3C Enemy_SubspaceDoor</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$82</span> <span class=\"token comment\">; $3D Enemy_Key</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$84</span> <span class=\"token comment\">; $3E Enemy_SubspacePotion</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; $3F Enemy_Mushroom</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A2</span> <span class=\"token comment\">; $40 Enemy_Mushroom1up</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; $41 Enemy_FlyingCarpet</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8E</span> <span class=\"token comment\">; $42 Enemy_HawkmouthRight</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8E</span> <span class=\"token comment\">; $43 Enemy_HawkmouthLeft</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$9E</span> <span class=\"token comment\">; $44 Enemy_CrystalBall</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A6</span> <span class=\"token comment\">; $45 Enemy_Starman</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A4</span> <span class=\"token comment\">; $46 Enemy_Stopwatch</span>\n","line":5440},{"comment":"=============== S U B R O U T I N E =======================================","content":"\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"\n","line":5514},{"comment":"The first part of this routine determines if we are the Princess,\nwho does not bob her vegetables (or whatever other Subcon detritus\nshe happens to be holding)\n\nAfter that it just moves the sprite into the player's hands.","content":"PutCarriedObjectInHands:\n\tLDA ObjectYLo, X\n\tCLC\n\tSBC ScreenYLo\n\tLDY ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK2_9ACA\n\n\tLDY PlayerAnimationFrame\n\tBNE loc_BANK2_9ACA\n\n\tLDY CurrentCharacter ; Check if we are Princess\n\tDEY\n\tBEQ loc_BANK2_9ACA ; If so, skip making it bob sometimes.\n\n\tSEC\n\tSBC #$01\n\nloc_BANK2_9ACA:\n\tSTA SpriteTempScreenY ; Determine where it should show up on\n\tLDA ObjectXLo, X ; the screen and put it in that place.\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA SpriteTempScreenX\n\tRTS\n","htmlComment":"<p>The first part of this routine determines if we are the Princess,\nwho does not bob her vegetables (or whatever other Subcon detritus\nshe happens to be holding)</p>\n<p>After that it just moves the sprite into the player's hands.</p>\n","htmlContent":"PutCarriedObjectInHands:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenYLo\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>ACA\n\n\t<span class=\"token opcode property\">LDY</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>ACA\n\n\t<span class=\"token opcode property\">LDY</span> CurrentCharacter <span class=\"token comment\">; Check if we are Princess</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>ACA <span class=\"token comment\">; If so, skip making it bob sometimes.</span>\n\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>ACA:\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY <span class=\"token comment\">; Determine where it should show up on</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span> <span class=\"token comment\">; the screen and put it in that place.</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">RTS</span>\n","line":5520},{"comment":"End of function PutCarriedObjectInHands","content":"\n","htmlComment":"<p>End of function PutCarriedObjectInHands</p>\n","htmlContent":"\n","line":5547},{"comment":"---------------------------------------------------------------------------","content":"RenderSprite_Birdo:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBNE loc_BANK2_9AE2\n\n\tLDA EnemyArray_45C, X\n\tBEQ loc_BANK2_9AE6\n\nloc_BANK2_9AE2:\n\tLDA #$6A\n\tBNE loc_BANK2_9AEC\n\nloc_BANK2_9AE6:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK2_9AEF\n\n\tLDA #$62\n\nloc_BANK2_9AEC:\n\tJMP RenderSprite_DrawObject\n\n","htmlComment":"<hr>\n","htmlContent":"RenderSprite_Birdo:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AE<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AE<span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AE<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$6A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AEC\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AE<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AEF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$62</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AEC:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n","line":5549},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK2_9AEF:\n\tJMP RenderSprite_NotAlbatoss\n\n\nRenderSprite_Albatoss:\n\tLDA byte_RAM_EE\n\tPHA\n\tJSR RenderSprite_NotAlbatoss\n\n\tPLA\n\tASL A\n\tSTA byte_RAM_EE\n\tLDA EnemyArray_B1, X\n\tORA byte_RAM_EF\n\tBNE RenderSprite_Invisible\n\n\tLDA SpriteTempScreenX\n\tADC #$08\n\tSTA byte_RAM_1\n\tLDA EnemyMovementDirection, X\n\tSTA byte_RAM_2\n\tLDA #$01\n\tSTA byte_RAM_3\n\tSTA byte_RAM_5\n\tJSR FindSpriteSlot\n\n\tLDX #$14\n\tJMP loc_BANK2_9C7A\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>AEF:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_NotAlbatoss\n\n\nRenderSprite_Albatoss:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Invisible\n\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$14</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>\n\n","line":5572},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":5604},{"comment":"\nRenders a sprite for an object based on the enemy animation table lookup\n\nThere are a lot of special cases basd on ObjectType\n\nInput\nX = enemy index\n","content":"RenderSprite:\n\tLDY ObjectType, X\n\tLDA EnemyAnimationTable, Y\n\tCMP #$FF\n\tBEQ RenderSprite_Invisible\n\n\tCPY #Enemy_Mouser\n\tBNE RenderSprite_NotMouser\n\n\tJMP RenderSprite_Mouser\n\nRenderSprite_NotMouser:\n\tCPY #Enemy_Clawgrip\n\tBNE RenderSprite_NotClawgrip\n\n\tJMP RenderSprite_Clawgrip\n\nRenderSprite_NotClawgrip:\n\tCPY #Enemy_ClawgripRock\n\tBNE RenderSprite_NotClawgripRock\n\n\tJMP RenderSprite_ClawgripRock\n\nRenderSprite_NotClawgripRock:\n\tCPY #Enemy_HawkmouthBoss\n\tBNE RenderSprite_NotHawkmouthBoss\n\n\tJMP RenderSprite_HawkmouthBoss\n\nRenderSprite_Invisible:\n\tRTS\n\nRenderSprite_NotHawkmouthBoss:\n\tCPY #Enemy_Pidgit\n\tBNE RenderSprite_NotPidgit\n\n\tJMP RenderSprite_Pidgit\n\nRenderSprite_NotPidgit:\n\tCPY #Enemy_Porcupo\n\tBNE RenderSprite_NotPorcupo\n\n\tJMP RenderSprite_Porcupo\n\nRenderSprite_NotPorcupo:\n\tCPY #Enemy_VegetableLarge\n\tBNE RenderSprite_NotVegetableLarge\n\n\tJMP RenderSprite_VegetableLarge\n\nRenderSprite_NotVegetableLarge:\n\tCPY #Enemy_Autobomb\n\tBNE RenderSprite_NotAutobomb\n\n\tJMP RenderSprite_Autobomb\n\nRenderSprite_NotAutobomb:\n\tCPY #Enemy_Fryguy\n\tBNE RenderSprite_NotFryguy\n\n\tJMP RenderSprite_Fryguy\n\nRenderSprite_NotFryguy:\n\tCPY #Enemy_HawkmouthLeft\n\tBNE RenderSprite_NotHawkmouthLeft\n\n\tJMP RenderSprite_HawkmouthLeft\n\nRenderSprite_NotHawkmouthLeft:\n\tCPY #Enemy_Wart\n\tBNE RenderSprite_NotWart\n\n\tJMP RenderSprite_Wart\n\nRenderSprite_NotWart:\n\tCPY #Enemy_WhaleSpout\n\tBNE RenderSprite_NotWhaleSpout\n\n\tJMP RenderSprite_WhaleSpout\n\nRenderSprite_NotWhaleSpout:\n\tCPY #Enemy_Pokey\n\tBNE RenderSprite_NotPokey\n\n\tJMP RenderSprite_Pokey\n\nRenderSprite_NotPokey:\n\tCPY #Enemy_Heart\n\tBNE RenderSprite_NotHeart\n","htmlComment":"<p>Renders a sprite for an object based on the enemy animation table lookup</p>\n<p>There are a lot of special cases basd on ObjectType</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"RenderSprite:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyAnimationTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Invisible\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Mouser\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotMouser\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Mouser\n\nRenderSprite_NotMouser:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Clawgrip\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotClawgrip\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Clawgrip\n\nRenderSprite_NotClawgrip:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_ClawgripRock\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotClawgripRock\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_ClawgripRock\n\nRenderSprite_NotClawgripRock:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_HawkmouthBoss\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotHawkmouthBoss\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_HawkmouthBoss\n\nRenderSprite_Invisible:\n\t<span class=\"token opcode property\">RTS</span>\n\nRenderSprite_NotHawkmouthBoss:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Pidgit\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotPidgit\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Pidgit\n\nRenderSprite_NotPidgit:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Porcupo\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotPorcupo\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Porcupo\n\nRenderSprite_NotPorcupo:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_VegetableLarge\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotVegetableLarge\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_VegetableLarge\n\nRenderSprite_NotVegetableLarge:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Autobomb\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotAutobomb\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Autobomb\n\nRenderSprite_NotAutobomb:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Fryguy\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotFryguy\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Fryguy\n\nRenderSprite_NotFryguy:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_HawkmouthLeft\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotHawkmouthLeft\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_HawkmouthLeft\n\nRenderSprite_NotHawkmouthLeft:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Wart\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotWart\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Wart\n\nRenderSprite_NotWart:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_WhaleSpout\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotWhaleSpout\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_WhaleSpout\n\nRenderSprite_NotWhaleSpout:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Pokey\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotPokey\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Pokey\n\nRenderSprite_NotPokey:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Heart\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotHeart\n","line":5613},{"comment":"This jump appears to never be taken;\nI don't think this code even runs with an enemy ID of 0 (heart)","content":"\tJMP RenderSprite_Heart\n\nRenderSprite_NotHeart:\n\tCPY #Enemy_Ostro\n\tBNE RenderSprite_NotOstro\n\n\tJMP RenderSprite_Ostro\n\nRenderSprite_NotOstro:\n\tCPY #Enemy_Tryclyde\n\tBNE RenderSprite_NotTryclyde\n\n\tJMP RenderSprite_Tryclyde\n\nRenderSprite_NotTryclyde:\n\tCPY #Enemy_Birdo\n\tBNE RenderSprite_NotBirdo\n\n\tJMP RenderSprite_Birdo\n\nRenderSprite_NotBirdo:\n\tCPY #Enemy_AlbatossCarryingBobOmb\n\tBCC RenderSprite_NotAlbatoss\n\n\tCPY #Enemy_NinjiRunning\n\tBCS RenderSprite_NotAlbatoss\n\n\tJMP RenderSprite_Albatoss\n\nRenderSprite_NotAlbatoss:\n\tLDY ObjectType, X\n\tCPY #Enemy_Rocket\n\tBNE RenderSprite_NotRocket\n\n\tJMP RenderSprite_Rocket\n\nRenderSprite_NotRocket:\n\tLDA EnemyAnimationTable, Y\n\n","htmlComment":"<p>This jump appears to never be taken;\nI don't think this code even runs with an enemy ID of 0 (heart)</p>\n","htmlContent":"\t<span class=\"token opcode property\">JMP</span> RenderSprite_Heart\n\nRenderSprite_NotHeart:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Ostro\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotOstro\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Ostro\n\nRenderSprite_NotOstro:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Tryclyde\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotTryclyde\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Tryclyde\n\nRenderSprite_NotTryclyde:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Birdo\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotBirdo\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Birdo\n\nRenderSprite_NotBirdo:\n\t<span class=\"token opcode property\">CPY</span> #Enemy_AlbatossCarryingBobOmb\n\t<span class=\"token opcode property\">BCC</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">CPY</span> #Enemy_NinjiRunning\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Albatoss\n\nRenderSprite_NotAlbatoss:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Rocket\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_NotRocket\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Rocket\n\nRenderSprite_NotRocket:\n\t<span class=\"token opcode property\">LDA</span> EnemyAnimationTable, <span class=\"token register variable\">Y</span>\n\n","line":5705},{"comment":"\nDraws an object to the screen\n\nInput\nA = tile index\nX = enemy index\nbyte_RAM_EE = sprite clipping\nbyte_RAM_EF = whether the enemy should be invisible\nbyte_RAM_F4 = sprite slot offset\nSpriteTempScreenX = screen x-position\nSpriteTempScreenY = screen y-position\n","content":"RenderSprite_DrawObject:\n\tSTA byte_RAM_F\n\tLDA byte_RAM_EF\n\tBNE RenderSprite_Invisible\n","htmlComment":"<p>Draws an object to the screen</p>\n<p>Input\nA = tile index\nX = enemy index\nbyte_RAM_EE = sprite clipping\nbyte_RAM_EF = whether the enemy should be invisible\nbyte_RAM_F4 = sprite slot offset\nSpriteTempScreenX = screen x-position\nSpriteTempScreenY = screen y-position</p>\n","htmlContent":"RenderSprite_DrawObject:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Invisible\n","line":5757},{"comment":"tilemap switcher","content":"\tLDA EnemyArray_46E, X\n\tAND #%00010000\n\tSTA byte_RAM_B\n\tLDY EnemyMovementDirection, X\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_FrontFacing | ObjAttrib_Mirrored\n\tBEQ loc_BANK2_9BD2\n\n\tLDY #$02\n\tLDA InSubspaceOrJar\n\tCMP #$02\n\tBNE loc_BANK2_9BD2\n\n\tDEY\n\nloc_BANK2_9BD2:\n\tSTY byte_RAM_2\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_16x32 | ObjAttrib_Horizontal\n\tSTA byte_RAM_5\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDA #$00\n\tSTA byte_RAM_D\n\tLDA ObjectShakeTimer, X\n\tAND #$02\n\tLSR A\n\tLDY byte_RAM_EE\n\tBEQ loc_BANK2_9BEF\n\n\tLDA #$00\n\nloc_BANK2_9BEF:\n\tADC SpriteTempScreenX\n\tSTA byte_RAM_1\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground | ObjAttrib_Palette\n\tLDY EnemyArray_45C, X\n\tBEQ loc_BANK2_9C07\n\n\tAND #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground\n\tSTA byte_RAM_8\n\tTYA\n\tLSR A\n\tAND #$03\n\tORA byte_RAM_8\n\nloc_BANK2_9C07:\n\tSTA byte_RAM_3\n\tLDA EnemyArray_46E, X\n\tSTA byte_RAM_C\n\tASL A\n\tLDA ObjectAnimationTimer, X\n\tLDX byte_RAM_F\n\tAND #$08\n\tBEQ loc_BANK2_9C31\n\n\tBCC loc_BANK2_9C1F\n\n\tLDA #$01\n\tSTA byte_RAM_2\n\tBNE loc_BANK2_9C31\n\nloc_BANK2_9C1F:\n\tINX\n\tINX\n\tLDA byte_RAM_5\n\tAND #$40\n\tBEQ loc_BANK2_9C31\n\n\tINX\n\tINX\n\tLDA byte_RAM_C\n\tAND #$20\n\tBEQ loc_BANK2_9C31\n\n\tINX\n\tINX\n\nloc_BANK2_9C31:\n\tLDY byte_RAM_F4\n\tLDA byte_RAM_5\n\tAND #$40\n\tBEQ loc_BANK2_9C7A\n\n\tLDA byte_RAM_5\n\tAND #$04\n\tBEQ loc_BANK2_9C53\n\n\tLDA byte_RAM_EE\n\tSTA byte_RAM_8\n\tLDA byte_RAM_2\n\tCMP #$01\n\tBNE loc_BANK2_9C53\n\n\tLDA byte_RAM_1\n\tADC #$0F\n\tSTA byte_RAM_1\n\tASL byte_RAM_EE\n\tASL byte_RAM_EE\n\nloc_BANK2_9C53:\n\tJSR SetSpriteTiles\n\n\tLDA byte_RAM_5\n\tAND #$04\n\tBEQ loc_BANK2_9C7A\n\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDA SpriteTempScreenX\n\tSTA byte_RAM_1\n\tLDA byte_RAM_8\n\tSTA byte_RAM_EE\n\tLDA byte_RAM_2\n\tCMP #$01\n\tBEQ loc_BANK2_9C7A\n\n\tLDA byte_RAM_1\n\tADC #$0F\n\tSTA byte_RAM_1\n\tASL byte_RAM_EE\n\tASL byte_RAM_EE\n\nloc_BANK2_9C7A:\n\tJSR SetSpriteTiles\n\n\tLDY byte_RAM_F4\n\tLDA byte_RAM_5\n\tCMP #$40\n\tBNE loc_BANK2_9CD9\n\n\tLDA byte_RAM_3\n\tBPL loc_BANK2_9CD9\n\n\tLDA byte_RAM_C\n\tAND #$20\n\tBEQ loc_BANK2_9CBD\n\n\tLDX byte_RAM_D\n\tLDA SpriteDMAArea + $00, X\n\tPHA\n\tLDA SpriteDMAArea + $00, Y\n\tSTA SpriteDMAArea + $00, X\n\tPLA\n\nloc_BANK2_9C9C:\n\tSTA SpriteDMAArea + $00, Y\n\tLDA SpriteDMAArea + $04, X\n\tPHA\n\tLDA SpriteDMAArea + $04, Y\n\tSTA SpriteDMAArea + $04, X\n\tPLA\n\tSTA SpriteDMAArea + $04, Y\n\tLDA SpriteDMAArea + $08, X\n\tPHA\n\tLDA SpriteDMAArea + $08, Y\n\tSTA SpriteDMAArea + $08, X\n\tPLA\n\tSTA SpriteDMAArea + $08, Y\n\tBCS loc_BANK2_9CD9\n\nloc_BANK2_9CBD:\n\tLDA SpriteDMAArea, Y\n\tPHA\n\tLDA SpriteDMAArea + $08, Y\n\tSTA SpriteDMAArea + $00, Y\n\tPLA\n\tSTA SpriteDMAArea + $08, Y\n\tLDA SpriteDMAArea + $04, Y\n\tPHA\n\tLDA SpriteDMAArea + $0C, Y\n\tSTA SpriteDMAArea + $04, Y\n\tPLA\n\tSTA SpriteDMAArea + $0C, Y\n\nloc_BANK2_9CD9:\n\tLDX byte_RAM_12\n\tLDA ObjectAttributes, X\n\tAND #ObjAttrib_Mirrored\n\tBEQ locret_BANK2_9CF1\n\n\tLDA byte_RAM_3\n\tSTA SpriteDMAArea + $02, Y\n\tSTA SpriteDMAArea + $0A, Y\n\tORA #$40\n\tSTA SpriteDMAArea + $06, Y\n\tSTA SpriteDMAArea + $0E, Y\n\nlocret_BANK2_9CF1:\n\tRTS\n\n","htmlComment":"<p>tilemap switcher</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00010000</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\t<span class=\"token opcode property\">LDY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_FrontFacing | ObjAttrib_Mirrored\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>BD<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>BD<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>BD<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_Horizontal\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D\n\t<span class=\"token opcode property\">LDA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_EE\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>BEF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>BEF:\n\t<span class=\"token opcode property\">ADC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground | ObjAttrib_Palette\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">07</span>\n\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">07</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">1</span>F\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">31</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">1</span>F:\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">31</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">53</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">53</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">53</span>:\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CD<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CD<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CBD\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_D\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$00</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$00</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$00</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">9</span>C:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$00</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$04</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$04</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$04</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$04</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$08</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$08</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$08</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$08</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CD<span class=\"token decimalnumber string\">9</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CBD:\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$08</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$00</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$08</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$04</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$0C</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$04</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$0C</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CD<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_Mirrored\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CF<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$02</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$0A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$06</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$0E</span>, <span class=\"token register variable\">Y</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>CF<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5763},{"comment":"\nSets tiles for an object\n\nInput\nX = tilemap offset\nY = sprite slot offset\nbyte_RAM_0 = screen y-offset\nbyte_RAM_1 = screen x-offset\nbyte_RAM_2 = sprite direction: $00 for left, $02 for right\nbyte_RAM_B = use EnemyTilemap2\nbyte_RAM_C = use 24x16 mode when set to $20\nbyte_RAM_EE = used for horizontal clipping/wrapping\nOutput\nX = next tilemap offset\nY = next sprite slot offset\n","content":"SetSpriteTiles:\n\tLDA byte_RAM_C\n\tAND #$20\n\tBNE SetSpriteTiles_24x16\n\n\tLDA byte_RAM_B\n\tBNE SetSpriteTiles_Tilemap2\n\nSetSpriteTiles_Tilemap1:\n\tLDA EnemyTilemap1, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA EnemyTilemap1 + 1, X\n\tSTA SpriteDMAArea + 5, Y\n\tBNE SetSpriteTiles_CheckDirection\n\nSetSpriteTiles_Tilemap2:\n\tLDA EnemyTilemap2, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA EnemyTilemap2 + 1, X\n\tSTA SpriteDMAArea + 5, Y\n\nSetSpriteTiles_CheckDirection:\n\tLDA byte_RAM_2\n\tLSR A\n\tLDA #$00\n\tBCC SetSpriteTiles_Left\n\nSetSpriteTiles_Right:\n\tLDA SpriteDMAArea + 1, Y\n\tPHA\n\tLDA SpriteDMAArea + 5, Y\n\tSTA SpriteDMAArea + 1, Y\n\tPLA\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$40\n\nSetSpriteTiles_Left:\n\tORA byte_RAM_3\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tLDA #$F8\n\tSTA SpriteDMAArea, Y\n\tSTA SpriteDMAArea + 4, Y\n\n\tLDA byte_RAM_EE\n\tAND #$08\n\tBNE loc_BANK2_9D48\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea, Y\n\nloc_BANK2_9D48:\n\tLDA byte_RAM_EE\n\tAND #$04\n\tBNE loc_BANK2_9D53\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 4, Y\n\nloc_BANK2_9D53:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tSTA SpriteDMAArea + 3, Y\n\tCLC\n\tADC #$08\n\tSTA SpriteDMAArea + 7, Y\n\tTYA\n\tCLC\n\tADC #$08\n\tTAY\n\tINX\n\tINX\n\tRTS\n\nSetSpriteTiles_24x16:\n\tLDA EnemyTilemap2, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA EnemyTilemap2 + 1, X\n\tSTA SpriteDMAArea + 5, Y\n\tLDA EnemyTilemap2 + 2, X\n\tSTA SpriteDMAArea + 9, Y\n\n\tLDA byte_RAM_2\n\tLSR A\n\tLDA #$00\n\tBCC SetSpriteTiles_24x16_Left\n\nSetSpriteTiles_24x16_Right:\n\tLDA SpriteDMAArea + 1, Y\n\tPHA\n\tLDA SpriteDMAArea + 9, Y\n\tSTA SpriteDMAArea + 1, Y\n\tPLA\n\tSTA SpriteDMAArea + 9, Y\n\tLDA #$40\n\nSetSpriteTiles_24x16_Left:\n\tORA byte_RAM_3\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tLDA #$F8\n\tSTA SpriteDMAArea, Y\n\tSTA SpriteDMAArea + 4, Y\n\tSTA SpriteDMAArea + 8, Y\n\n\tLDA byte_RAM_EE\n\tAND #$08\n\tBNE loc_BANK2_9DB7\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea, Y\n\nloc_BANK2_9DB7:\n\tLDA byte_RAM_EE\n\tAND #$04\n\tBNE loc_BANK2_9DC2\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 4, Y\n\nloc_BANK2_9DC2:\n\tLDA byte_RAM_EE\n\tAND #$02\n\tBNE loc_BANK2_9DCD\n\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea + 8, Y\n\nloc_BANK2_9DCD:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tLDA byte_RAM_1\n\tSTA SpriteDMAArea + 3, Y\n\tADC #$08\n\tSTA SpriteDMAArea + 7, Y\n\tADC #$08\n\tSTA SpriteDMAArea + $B, Y\n\tTXA\n\tPHA\n\tJSR FindSpriteSlot\n\n\tPLA\n\tTAX\n\tLDA byte_RAM_D\n\tBNE loc_BANK2_9DF0\n\n\tSTY byte_RAM_D\n\nloc_BANK2_9DF0:\n\tINX\n\tINX\n\tINX\n\n\tRTS\n\n\nUNUSED_PorcupoOffset:\n\t.db $04\n\t.db $00\nPorcupoOffsetXRight:\n\t.db $FF\n\t.db $FF\n\t.db $00\n\t.db $00\nPorcupoOffsetXLeft:\n\t.db $01\n\t.db $01\n\t.db $00\n\t.db $00\nPorcupoOffsetYRight:\n\t.db $01\n\t.db $00\n\t.db $00\n\t.db $01\nPorcupoOffsetYLeft:\n\t.db $01\n\t.db $00\n\t.db $00\n\t.db $01\n\n\nRenderSprite_Porcupo:\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA byte_RAM_EE\n\tAND #$0C\n\tBNE locret_BANK2_9E3A\n\n\tLDA ObjectAnimationTimer, X\n\tAND #$0C\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_0\n\tLDA EnemyMovementDirection, X\n\tTAX\n\tLDA PorcupoOffsetXRight - 3, X\n\tADC byte_RAM_F4\n\tTAY\n\tTXA\n\tASL A\n\tASL A\n\tADC byte_RAM_0\n\tTAX\n\tLDA SpriteDMAArea, Y\n\tADC PorcupoOffsetYRight - 4, X\n\tSTA SpriteDMAArea, Y\n\tLDA SpriteDMAArea + 3, Y\n\tADC PorcupoOffsetXRight - 4, X\n\tSTA SpriteDMAArea + 3, Y\n\tLDX byte_RAM_12\n\nlocret_BANK2_9E3A:\n\tRTS\n\n","htmlComment":"<p>Sets tiles for an object</p>\n<p>Input\nX = tilemap offset\nY = sprite slot offset\nbyte_RAM_0 = screen y-offset\nbyte_RAM_1 = screen x-offset\nbyte_RAM_2 = sprite direction: $00 for left, $02 for right\nbyte_RAM_B = use EnemyTilemap2\nbyte_RAM_C = use 24x16 mode when set to $20\nbyte_RAM_EE = used for horizontal clipping/wrapping\nOutput\nX = next tilemap offset\nY = next sprite slot offset</p>\n","htmlContent":"SetSpriteTiles:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> SetSpriteTiles_<span class=\"token decimalnumber string\">24</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_B\n\t<span class=\"token opcode property\">BNE</span> SetSpriteTiles_Tilemap<span class=\"token decimalnumber string\">2</span>\n\nSetSpriteTiles_Tilemap<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">1</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> SetSpriteTiles_CheckDirection\n\nSetSpriteTiles_Tilemap<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">2</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\nSetSpriteTiles_CheckDirection:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BCC</span> SetSpriteTiles_Left\n\nSetSpriteTiles_Right:\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\nSetSpriteTiles_Left:\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>D<span class=\"token decimalnumber string\">48</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>D<span class=\"token decimalnumber string\">48</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>D<span class=\"token decimalnumber string\">53</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>D<span class=\"token decimalnumber string\">53</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nSetSpriteTiles_<span class=\"token decimalnumber string\">24</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">2</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTilemap<span class=\"token decimalnumber string\">2</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BCC</span> SetSpriteTiles_<span class=\"token decimalnumber string\">24</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span>_Left\n\nSetSpriteTiles_<span class=\"token decimalnumber string\">24</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span>_Right:\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\nSetSpriteTiles_<span class=\"token decimalnumber string\">24</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span>_Left:\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $<span class=\"token register variable\">A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DB<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DB<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DC<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DC<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DCD\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DCD:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DF<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_D\n\nloc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>DF<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\nUNUSED_PorcupoOffset:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\nPorcupoOffsetXRight:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\nPorcupoOffsetXLeft:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\nPorcupoOffsetYRight:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\nPorcupoOffsetYLeft:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\n\nRenderSprite_Porcupo:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>E<span class=\"token decimalnumber string\">3</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> PorcupoOffsetXRight - <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> PorcupoOffsetYRight - <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> PorcupoOffsetXRight - <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>E<span class=\"token decimalnumber string\">3</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5972},{"comment":"\nCompares our position to the player's and returns\n\nOuput\nY = 1 when player is to the left, 0 when player is to the right\n","content":"EnemyFindWhichSidePlayerIsOn:\n\tLDA PlayerXLo\n\tSBC ObjectXLo, X\n\tSTA byte_RAM_F\n\tLDA PlayerXHi\n\tLDY #$00\n\tSBC ObjectXHi, X\n\tBCS EnemyFindWhichSidePlayerIsOn_Exit\n\n\tINY\n\nEnemyFindWhichSidePlayerIsOn_Exit:\n\tRTS\n\n","htmlComment":"<p>Compares our position to the player's and returns</p>\n<p>Ouput\nY = 1 when player is to the left, 0 when player is to the right</p>\n","htmlContent":"EnemyFindWhichSidePlayerIsOn:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">SBC</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">SBC</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyFindWhichSidePlayerIsOn_Exit\n\n\t<span class=\"token opcode property\">INY</span>\n\nEnemyFindWhichSidePlayerIsOn_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":6199},{"comment":"\nApplies object physics for the y-axis\n\nInput\nX = enemy index\n","content":"ApplyObjectPhysicsY:\n\tTXA\n\tCLC\n\tADC #$0A\n\tTAX\n","htmlComment":"<p>Applies object physics for the y-axis</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"ApplyObjectPhysicsY:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">TAX</span>\n","line":6220},{"comment":"\nApplies object physics for the x-axis\n\nInput\nX = enemy index, physics direction\n($00-$09 for horizontal, $0A-$13 for vertical)\n\nOutput\nX = RAM_12\n","content":"ApplyObjectPhysicsX:","htmlComment":"<p>Applies object physics for the x-axis</p>\n<p>Input\nX = enemy index, physics direction\n($00-$09 for horizontal, $0A-$13 for vertical)</p>\n<p>Output\nX = RAM_12</p>\n","htmlContent":"ApplyObjectPhysicsX:","line":6236},{"comment":"Add acceleration to velocity","content":"\tLDA ObjectXVelocity, X\n\tCLC\n\tADC ObjectXAcceleration, X\n\n\tPHA","htmlComment":"<p>Add acceleration to velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">PHA</span>","line":6238},{"comment":"Lower nybble of velocity is for subpixel position","content":"\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_1\n","htmlComment":"<p>Lower nybble of velocity is for subpixel position</p>\n","htmlContent":"\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n","line":6244},{"comment":"Upper nybble of velocity is for lo position","content":"\tPLA\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\n\tCMP #$08\n\tBCC ApplyObjectPhysics_StoreVelocityLo\n","htmlComment":"<p>Upper nybble of velocity is for lo position</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCC</span> ApplyObjectPhysics_StoreVelocityLo\n","line":6251},{"comment":"Left/up: Carry negative bits through upper nybble","content":"\tORA #$F0\n\nApplyObjectPhysics_StoreVelocityLo:\n\tSTA byte_RAM_0\n\n\tLDY #$00\n\tASL A\n\tBCC ApplyObjectPhysics_StoreDirection\n","htmlComment":"<p>Left/up: Carry negative bits through upper nybble</p>\n","htmlContent":"\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$F0</span>\n\nApplyObjectPhysics_StoreVelocityLo:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> ApplyObjectPhysics_StoreDirection\n","line":6261},{"comment":"Left/up","content":"\tDEY\n\nApplyObjectPhysics_StoreDirection:\n\tSTY byte_RAM_2\n","htmlComment":"<p>Left/up</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEY</span>\n\nApplyObjectPhysics_StoreDirection:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n","line":6271},{"comment":"Add lower nybble of velocity for subpixel position","content":"\tLDA ObjectXSubpixel, X\n\tCLC\n\tADC byte_RAM_1\n\tSTA ObjectXSubpixel, X\n","htmlComment":"<p>Add lower nybble of velocity for subpixel position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXSubpixel, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXSubpixel, <span class=\"token register variable\">X</span>\n","line":6277},{"comment":"Add upper nybble of velocity for lo position","content":"\tLDA ObjectXLo, X\n\tADC byte_RAM_0\n\tSTA ObjectXLo, X\n\n\tROL byte_RAM_1\n","htmlComment":"<p>Add upper nybble of velocity for lo position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">ROL</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n","line":6283},{"comment":"X < 10 is horizontal physics, X >= 10 is vertical physics","content":"\tCPX #$0A\n\tBCS ApplyObjectPhysics_PositionHi\n\nApplyObjectPhysics_HorizontalSpecialCases:\n\tLDA #$00\n\tSTA unk_RAM_4A4, X\n\tLDA ObjectType, X\n\tCMP #Enemy_Bullet\n\tBEQ ApplyObjectPhysics_PositionHi\n\n\tCMP #Enemy_BeezoDiving\n\tBEQ ApplyObjectPhysics_PositionHi\n\n\tCMP #Enemy_BeezoStraight\n\tBEQ ApplyObjectPhysics_PositionHi\n\n\tLDY IsHorizontalLevel\n\tBEQ ApplyObjectPhysics_Exit\n\nApplyObjectPhysics_PositionHi:\n\tLSR byte_RAM_1\n\tLDA ObjectXHi, X\n\tADC byte_RAM_2\n\tSTA ObjectXHi, X\n\nApplyObjectPhysics_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\nEnemyBehavior_TurnAround:","htmlComment":"<p>X &#x3C; 10 is horizontal physics, X >= 10 is vertical physics</p>\n","htmlContent":"\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BCS</span> ApplyObjectPhysics_PositionHi\n\nApplyObjectPhysics_HorizontalSpecialCases:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bullet\n\t<span class=\"token opcode property\">BEQ</span> ApplyObjectPhysics_PositionHi\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BeezoDiving\n\t<span class=\"token opcode property\">BEQ</span> ApplyObjectPhysics_PositionHi\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BeezoStraight\n\t<span class=\"token opcode property\">BEQ</span> ApplyObjectPhysics_PositionHi\n\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> ApplyObjectPhysics_Exit\n\nApplyObjectPhysics_PositionHi:\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\nApplyObjectPhysics_Exit:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyBehavior_TurnAround:","line":6290},{"comment":"flip x-velocity","content":"\tLDA ObjectXVelocity, X\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA ObjectXVelocity, X","htmlComment":"<p>flip x-velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>","line":6322},{"comment":"if the enemy is not moving, flip direction next","content":"\tBEQ EnemyBehavior_TurnAroundExit\n","htmlComment":"<p>if the enemy is not moving, flip direction next</p>\n","htmlContent":"\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_TurnAroundExit\n","line":6328},{"comment":"flip enemy movement direction","content":"\tLDA EnemyMovementDirection, X\n\tEOR #$03 ; $01 XOR $03 = $02, $02 XOR $03 = $01\n\tSTA EnemyMovementDirection, X\n\nEnemyBehavior_TurnAroundExit:\n\tJMP ApplyObjectPhysicsX\n\n","htmlComment":"<p>flip enemy movement direction</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$03</span> <span class=\"token comment\">; $01 XOR $03 = $02, $02 XOR $03 = $01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_TurnAroundExit:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsX\n\n","line":6331},{"comment":"Unused space in the original ($9EBD - $A02F)","content":"unusedSpace $A030, $FF\n\n\nEnemyTilemap2:\n\t.db $2D,$2F ; $00\n\t.db $2D,$2F ; $02\n\t.db $E0,$E2 ; $04\n\t.db $E4,$E6 ; $06\n\t.db $E0,$E2 ; $08\n\t.db $E4,$E6 ; $0A\n\t.db $E8,$EA ; $0C\n\t.db $EC,$EE ; $0E\n\t.db $E8,$EA ; $10\n\t.db $EC,$EE ; $12\n\t.db $01,$03 ; $14\n\t.db $09,$05 ; $16\n\t.db $07,$0B ; $18\n\t.db $0D,$0F ; $1A\n\t.db $15,$11 ; $1C\n\t.db $13,$17 ; $1E\n\t.db $01,$03 ; $20\n\t.db $09,$05 ; $22\n\t.db $19,$1B ; $24\n\t.db $01,$03 ; $26\n\t.db $09,$05 ; $28\n\t.db $19,$1B ; $2A\n\t.db $1D,$1F ; $2C\n\t.db $25,$21 ; $2E\n\t.db $23,$27 ; $30\n\t.db $1D,$1F ; $32\n\t.db $25,$21 ; $34\n\t.db $23,$27 ; $36\n\t.db $9C,$9E ; $38\n\t.db $9C,$9E ; $3A\n\t.db $D0,$D2 ; $3C\n\t.db $D4,$D6 ; $3E\n\t.db $F0,$F2 ; $40\n\t.db $F4,$F6 ; $42\n\t.db $F0,$F2 ; $44\n\t.db $F8,$FA ; $46\n\t.db $0F,$11 ; $48\n\t.db $13,$15 ; $4A\n\t.db $1F,$11 ; $4C\n\t.db $13,$15 ; $4E\n\t.db $17,$19 ; $50\n\t.db $1B,$17 ; $52\n\t.db $19,$1D ; $54\n\t.db $09,$0B ; $56\n\t.db $01,$03 ; $58\n\t.db $05,$07 ; $5A\n\t.db $55,$59 ; $5C\n\t.db $5B,$5D ; $5E\n\t.db $F0,$F2 ; $60\n\t.db $F4,$F6 ; $62\n\t.db $45,$59 ; $64\n\t.db $5B,$5D ; $66\n\t.db $45,$59 ; $68\n\t.db $5B,$5D ; $6A\n\t.db $E8,$EA ; $6C\n\t.db $EC,$EE ; $6E\n\t.db $EC,$EE ; $70\n\t.db $EC,$EE ; $72\n\t.db $F0,$F2 ; $74\n\t.db $F0,$F2 ; $76\n\t.db $F4,$F6 ; $78\n\t.db $F8,$FA ; $7A\n\t.db $D0,$D2 ; $7C\n\t.db $D4,$D6 ; $7E\n\t.db $01,$03 ; $80\n\t.db $05,$07 ; $82\n\t.db $09,$0B ; $84\n\t.db $0D,$0F ; $86\n\t.db $01,$11 ; $88\n\t.db $05,$15 ; $8A\n\t.db $13,$0B ; $8C\n\t.db $17,$0F ; $8E\n\t.db $19,$1B ; $90\n\t.db $2D,$2F ; $92\n\t.db $3A,$3A ; $94\n\t.db $E0,$E2 ; $96\n\t.db $E4,$E6 ; $98\n\t.db $E8,$EA ; $9A\n\t.db $EC,$EE ; $9C\n\t.db $01,$03 ; $9E\n\t.db $05,$07 ; $A0\n\t.db $4F,$5D ; $A2\n\t.db $05,$07 ; $A4\n\t.db $09,$0B ; $A6\n\t.db $0D,$0F ; $A8\n\t.db $27,$79 ; $AA\n\t.db $7B,$2D ; $AC\n\t.db $4F,$2F ; $AE\n\t.db $45,$55 ; $B0\n\t.db $11,$13 ; $B2\n\t.db $15,$17 ; $B4\n\t.db $1F,$21 ; $B6\n\t.db $23,$25 ; $B8\n\t.db $11,$13 ; $BA\n\t.db $23,$25 ; $BC\n\t.db $59,$59 ; $BE\n\t.db $5B,$5B ; $C0\n\t.db $01,$03 ; $C2\n\t.db $05,$07 ; $C4\n\t.db $09,$0B ; $C6\n\t.db $0D,$0F ; $C8\n\t.db $FB,$11 ; $CA\n\t.db $15,$17 ; $CC\n\t.db $13,$FB ; $CE\n\t.db $19,$1B ; $D0\n\t.db $1D,$1F ; $D2\n\t.db $21,$23 ; $D4\n\t.db $25,$27 ; $D6\n\t.db $25,$27 ; $D8\nIFDEF EXPAND_TABLES\n\tunusedSpace EnemyTilemap2 + $100, $FB\nENDIF\n\n\nEnemyInit_Clawgrip:\n\tJSR EnemyInit_Birdo\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$03\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$04\n\tSTA EnemyHP, X\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$04\n\tSTA ObjectXLo, X\n\tJMP SetEnemyAttributes\n","htmlComment":"<p>Unused space in the original ($9EBD - $A02F)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$A030</span>, <span class=\"token hexnumber string\">$FF</span>\n\n\nEnemyTilemap<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2D</span>,<span class=\"token hexnumber string\">$2F</span> <span class=\"token comment\">; $00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2D</span>,<span class=\"token hexnumber string\">$2F</span> <span class=\"token comment\">; $02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>,<span class=\"token hexnumber string\">$E2</span> <span class=\"token comment\">; $04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>,<span class=\"token hexnumber string\">$E6</span> <span class=\"token comment\">; $06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>,<span class=\"token hexnumber string\">$E2</span> <span class=\"token comment\">; $08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>,<span class=\"token hexnumber string\">$E6</span> <span class=\"token comment\">; $0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>,<span class=\"token hexnumber string\">$EA</span> <span class=\"token comment\">; $0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>,<span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; $0E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>,<span class=\"token hexnumber string\">$EA</span> <span class=\"token comment\">; $10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>,<span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; $12</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$05</span> <span class=\"token comment\">; $16</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$07</span>,<span class=\"token hexnumber string\">$0B</span> <span class=\"token comment\">; $18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span>,<span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; $1A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>,<span class=\"token hexnumber string\">$11</span> <span class=\"token comment\">; $1C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$13</span>,<span class=\"token hexnumber string\">$17</span> <span class=\"token comment\">; $1E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$05</span> <span class=\"token comment\">; $22</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>,<span class=\"token hexnumber string\">$1B</span> <span class=\"token comment\">; $24</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $26</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$05</span> <span class=\"token comment\">; $28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>,<span class=\"token hexnumber string\">$1B</span> <span class=\"token comment\">; $2A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1D</span>,<span class=\"token hexnumber string\">$1F</span> <span class=\"token comment\">; $2C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$25</span>,<span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; $2E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>,<span class=\"token hexnumber string\">$27</span> <span class=\"token comment\">; $30</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1D</span>,<span class=\"token hexnumber string\">$1F</span> <span class=\"token comment\">; $32</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$25</span>,<span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; $34</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>,<span class=\"token hexnumber string\">$27</span> <span class=\"token comment\">; $36</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$9C</span>,<span class=\"token hexnumber string\">$9E</span> <span class=\"token comment\">; $38</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$9C</span>,<span class=\"token hexnumber string\">$9E</span> <span class=\"token comment\">; $3A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>,<span class=\"token hexnumber string\">$D2</span> <span class=\"token comment\">; $3C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D4</span>,<span class=\"token hexnumber string\">$D6</span> <span class=\"token comment\">; $3E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>,<span class=\"token hexnumber string\">$F2</span> <span class=\"token comment\">; $40</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F4</span>,<span class=\"token hexnumber string\">$F6</span> <span class=\"token comment\">; $42</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>,<span class=\"token hexnumber string\">$F2</span> <span class=\"token comment\">; $44</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>,<span class=\"token hexnumber string\">$FA</span> <span class=\"token comment\">; $46</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>,<span class=\"token hexnumber string\">$11</span> <span class=\"token comment\">; $48</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$13</span>,<span class=\"token hexnumber string\">$15</span> <span class=\"token comment\">; $4A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1F</span>,<span class=\"token hexnumber string\">$11</span> <span class=\"token comment\">; $4C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$13</span>,<span class=\"token hexnumber string\">$15</span> <span class=\"token comment\">; $4E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$17</span>,<span class=\"token hexnumber string\">$19</span> <span class=\"token comment\">; $50</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1B</span>,<span class=\"token hexnumber string\">$17</span> <span class=\"token comment\">; $52</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>,<span class=\"token hexnumber string\">$1D</span> <span class=\"token comment\">; $54</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$0B</span> <span class=\"token comment\">; $56</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $58</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>,<span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; $5A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$55</span>,<span class=\"token hexnumber string\">$59</span> <span class=\"token comment\">; $5C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5B</span>,<span class=\"token hexnumber string\">$5D</span> <span class=\"token comment\">; $5E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>,<span class=\"token hexnumber string\">$F2</span> <span class=\"token comment\">; $60</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F4</span>,<span class=\"token hexnumber string\">$F6</span> <span class=\"token comment\">; $62</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$45</span>,<span class=\"token hexnumber string\">$59</span> <span class=\"token comment\">; $64</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5B</span>,<span class=\"token hexnumber string\">$5D</span> <span class=\"token comment\">; $66</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$45</span>,<span class=\"token hexnumber string\">$59</span> <span class=\"token comment\">; $68</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5B</span>,<span class=\"token hexnumber string\">$5D</span> <span class=\"token comment\">; $6A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>,<span class=\"token hexnumber string\">$EA</span> <span class=\"token comment\">; $6C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>,<span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; $6E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>,<span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; $70</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>,<span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; $72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>,<span class=\"token hexnumber string\">$F2</span> <span class=\"token comment\">; $74</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>,<span class=\"token hexnumber string\">$F2</span> <span class=\"token comment\">; $76</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F4</span>,<span class=\"token hexnumber string\">$F6</span> <span class=\"token comment\">; $78</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>,<span class=\"token hexnumber string\">$FA</span> <span class=\"token comment\">; $7A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>,<span class=\"token hexnumber string\">$D2</span> <span class=\"token comment\">; $7C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D4</span>,<span class=\"token hexnumber string\">$D6</span> <span class=\"token comment\">; $7E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>,<span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; $82</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$0B</span> <span class=\"token comment\">; $84</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span>,<span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; $86</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$11</span> <span class=\"token comment\">; $88</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>,<span class=\"token hexnumber string\">$15</span> <span class=\"token comment\">; $8A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$13</span>,<span class=\"token hexnumber string\">$0B</span> <span class=\"token comment\">; $8C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$17</span>,<span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; $8E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>,<span class=\"token hexnumber string\">$1B</span> <span class=\"token comment\">; $90</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2D</span>,<span class=\"token hexnumber string\">$2F</span> <span class=\"token comment\">; $92</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3A</span>,<span class=\"token hexnumber string\">$3A</span> <span class=\"token comment\">; $94</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>,<span class=\"token hexnumber string\">$E2</span> <span class=\"token comment\">; $96</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>,<span class=\"token hexnumber string\">$E6</span> <span class=\"token comment\">; $98</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>,<span class=\"token hexnumber string\">$EA</span> <span class=\"token comment\">; $9A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>,<span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; $9C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $9E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>,<span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; $A0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>,<span class=\"token hexnumber string\">$5D</span> <span class=\"token comment\">; $A2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>,<span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; $A4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$0B</span> <span class=\"token comment\">; $A6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span>,<span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; $A8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>,<span class=\"token hexnumber string\">$79</span> <span class=\"token comment\">; $AA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$7B</span>,<span class=\"token hexnumber string\">$2D</span> <span class=\"token comment\">; $AC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>,<span class=\"token hexnumber string\">$2F</span> <span class=\"token comment\">; $AE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$45</span>,<span class=\"token hexnumber string\">$55</span> <span class=\"token comment\">; $B0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$11</span>,<span class=\"token hexnumber string\">$13</span> <span class=\"token comment\">; $B2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>,<span class=\"token hexnumber string\">$17</span> <span class=\"token comment\">; $B4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1F</span>,<span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; $B6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>,<span class=\"token hexnumber string\">$25</span> <span class=\"token comment\">; $B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$11</span>,<span class=\"token hexnumber string\">$13</span> <span class=\"token comment\">; $BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>,<span class=\"token hexnumber string\">$25</span> <span class=\"token comment\">; $BC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$59</span>,<span class=\"token hexnumber string\">$59</span> <span class=\"token comment\">; $BE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5B</span>,<span class=\"token hexnumber string\">$5B</span> <span class=\"token comment\">; $C0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>,<span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; $C2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>,<span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; $C4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>,<span class=\"token hexnumber string\">$0B</span> <span class=\"token comment\">; $C6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span>,<span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; $C8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>,<span class=\"token hexnumber string\">$11</span> <span class=\"token comment\">; $CA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>,<span class=\"token hexnumber string\">$17</span> <span class=\"token comment\">; $CC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$13</span>,<span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; $CE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>,<span class=\"token hexnumber string\">$1B</span> <span class=\"token comment\">; $D0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1D</span>,<span class=\"token hexnumber string\">$1F</span> <span class=\"token comment\">; $D2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>,<span class=\"token hexnumber string\">$23</span> <span class=\"token comment\">; $D4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$25</span>,<span class=\"token hexnumber string\">$27</span> <span class=\"token comment\">; $D6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$25</span>,<span class=\"token hexnumber string\">$27</span> <span class=\"token comment\">; $D8</span>\nIFDEF EXPAND_TABLES\n\tunusedSpace EnemyTilemap<span class=\"token decimalnumber string\">2</span> + <span class=\"token hexnumber string\">$100</span>, <span class=\"token hexnumber string\">$FB</span>\nENDIF\n\n\nEnemyInit_Clawgrip:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Birdo\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">JSR</span> SetBossTileset\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> SetEnemyAttributes\n","line":6340},{"comment":"---------------------------------------------------------------------------","content":"unk_BANK3_A120:\n\t.db $C8\n\t.db $D0\n\t.db $E0\n\t.db $F0\n\t.db $00\n\t.db $10\n\t.db $20\n\t.db $C8\nunk_BANK3_A128:\n\t.db $DC\n\t.db $E2\n\t.db $E8\n\t.db $F0\n\t.db $F8\n\t.db $E8\n\t.db $DC\n\t.db $DC\n","htmlComment":"<hr>\n","htmlContent":"unk_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">120</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>\nunk_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">128</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>\n","line":6477},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Clawgrip:\n\tLDA EnemyArray_45C, X\n\tORA EnemyArray_438, X\n\tBEQ loc_BANK3_A13B\n\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Clawgrip:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">13</span>B\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":6496},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A13B:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA ObjectYLo, X\n\tCMP #$70\n\tBCC loc_BANK3_A147\n\n\tJSR ResetObjectYVelocity\n\nloc_BANK3_A147:\n\tLDA EnemyTimer, X\n\tBNE loc_BANK3_A179\n\n\tLDA EnemyVariable, X\n\tAND #$3F\n\tBNE loc_BANK3_A168\n\n\tLDA PseudoRNGValues + 2\n\tAND #$03\n\tBEQ loc_BANK3_A168\n\n\tLDY ScreenBoundaryLeftLo\n\tDEY\n\tCPY #$80\n\tBCC loc_BANK3_A168\n\n\tLDA #$7F\n\tSTA EnemyTimer, X\n\tLDY #$00\n\tBEQ loc_BANK3_A174\n\nloc_BANK3_A168:\n\tINC EnemyVariable, X\n\tLDY #$F0\n\tLDA EnemyVariable, X\n\tAND #$20\n\tBEQ loc_BANK3_A174\n\n\tLDY #$10\n\nloc_BANK3_A174:\n\tSTY ObjectXVelocity, X\n\tJMP loc_BANK3_A1CD\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">13</span>B:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$70</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">147</span>\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">147</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">179</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">168</span>\n\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">168</span>\n\n\t<span class=\"token opcode property\">LDY</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">168</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">174</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">168</span>:\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">174</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">174</span>:\n\t<span class=\"token opcode property\">STY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>CD\n\n","line":6505},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A179:\n\tCMP #$50\n\tBNE loc_BANK3_A17D\n\nloc_BANK3_A17D:\n\tCMP #$20\n\tBNE loc_BANK3_A1CD\n\n\tLDA PseudoRNGValues + 2\n\tAND #$07\n\tTAY\n\tLDA unk_BANK3_A128, Y\n\tSTA ObjectYVelocity, X\n\tDEC ObjectYLo, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_A1CD\n\n\tLDY byte_RAM_0\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$00\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tSBC #$00\n\tSTA ObjectYHi, Y\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$08\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, Y\n\tLDX byte_RAM_0\n\tLDA #Enemy_ClawgripRock\n\tSTA ObjectType, X\n\tLDA PseudoRNGValues + 2\n\tAND #$07\n\tTAY\n\tLDA unk_BANK3_A120, Y\n\tSTA ObjectYVelocity, X\n\tLDA #$D0\n\tSTA ObjectXVelocity, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK3_A1CD:\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectMovement_Vertical\n\nloc_BANK3_A1D3:\n\tJMP RenderSprite\n\n\n\t.db $08\n\t.db $08\n\nbyte_BANK3_A1D8:\n\t.db $1C\n\t.db $F4\n\t.db $11\n\t.db $0F\n\nbyte_BANK3_A1DC:\n\t.db $04\n\t.db $06\n\t.db $08\n\t.db $08\n\t.db $08\n\t.db $08\n\t.db $06\n\t.db $04\n\n\nRenderSprite_Clawgrip:\n\tLDA_abs byte_RAM_F4\n\n\tSTA EnemyArray_B1, X\n\tLDY EnemyState, X\n\tDEY\n\tTYA\n\tORA EnemyArray_45C, X\n\tBEQ loc_BANK3_A1FA\n\n\tLDY #$D2\n\tLDA #$00\n\tSTA EnemyTimer, X\n\tBEQ loc_BANK3_A21C\n\nloc_BANK3_A1FA:\n\tLDY #$C2\n\tLDA byte_RAM_10\n\tAND #$10\n\tBNE loc_BANK3_A204\n\n\tLDY #$C6\n\nloc_BANK3_A204:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK3_A21C\n\n\tLDY #$CA\n\tCMP #$60\n\tBCS loc_BANK3_A21C\n\n\tLDY #$C2\n\tCMP #$40\n\tBCS loc_BANK3_A21C\n\n\tLDY #$C6\n\tCMP #$20\n\tBCS loc_BANK3_A21C\n\n\tLDY #$C2\n\nloc_BANK3_A21C:\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tTYA\n\tJSR RenderSprite_DrawObject\n\n\tLDY #$C6\n\tLDA byte_RAM_10\n\tAND #$10\n\tBNE loc_BANK3_A22E\n\n\tLDY #$C2\n\nloc_BANK3_A22E:\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK3_A246\n\n\tLDY #$CE\n\tCMP #$60\n\tBCS loc_BANK3_A246\n\n\tLDY #$C2\n\tCMP #$40\n\tBCS loc_BANK3_A246\n\n\tLDY #$C6\n\tCMP #$20\n\tBCS loc_BANK3_A246\n\n\tLDY #$C2\n\nloc_BANK3_A246:\n\tLDA EnemyArray_45C, X\n\tBEQ loc_BANK3_A24D\n\n\tLDY #$D2\n\nloc_BANK3_A24D:\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$10\n\tSTA SpriteTempScreenX\n\tASL byte_RAM_EE\n\tASL byte_RAM_EE\n\tLDA EnemyTimer, X\n\tCMP #$60\n\tBCS loc_BANK3_A262\n\n\tLSR EnemyMovementDirection, X\n\nloc_BANK3_A262:\n\tTYA\n\tPHA\n\tJSR FindSpriteSlot\n\n\tSTY byte_RAM_F4\n\tPLA\n\tJSR RenderSprite_DrawObject\n\n\tLDA EnemyTimer, X\n\tBEQ loc_BANK3_A2D2\n\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tBEQ locret_BANK3_A2D1\n\n\tTAY\n\tLDA ObjectXLo, X\n\tPHA\n\tCLC\n\tADC loc_BANK3_A1D3 + 2, Y\n\tSTA ObjectXLo, X\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA SpriteTempScreenX\n\tLDA ObjectYLo, X\n\tCLC\n\tADC byte_BANK3_A1D8, Y\n\tSTA SpriteTempScreenY\n\tLDA EnemyTimer, X\n\tCMP #$30\n\tBCC loc_BANK3_A2AA\n\n\tCMP #$40\n\tBCS loc_BANK3_A2AA\n\n\tLSR A\n\tAND #$07\n\tTAY\n\tLDA SpriteTempScreenY\n\tSEC\n\tSBC byte_BANK3_A1DC, Y\n\tSTA SpriteTempScreenY\n\nloc_BANK3_A2AA:\n\tJSR sub_BANK2_8894\n\n\tLDY #$00\n\tSTY_abs byte_RAM_F4\n\n\tLDA ObjectAttributes, X\n\tPHA\n\tLDA #$02\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_46E, X\n\tPHA\n\tLDA #%00010000\n\tSTA EnemyArray_46E, X\n\tLDA #$D6\n\tJSR RenderSprite_DrawObject\n\n\tPLA\n\tSTA EnemyArray_46E, X\n\tPLA\n\tSTA ObjectAttributes, X\n\tPLA\n\tSTA ObjectXLo, X\n\nlocret_BANK3_A2D1:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">179</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$50</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">17</span>D\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">17</span>D:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>CD\n\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">128</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>CD\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_ClawgripRock\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">120</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>CD:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement_Vertical\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>D<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>D<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$11</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>DC:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\n\nRenderSprite_Clawgrip:\n\tLDA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>FA\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$D2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">21</span>C\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>FA:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C2</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">204</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">204</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">21</span>C\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$CA</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">21</span>C\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C2</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">21</span>C\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">21</span>C\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">21</span>C:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C6</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">22</span>E\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">22</span>E:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">246</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$CE</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">246</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C2</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">246</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">246</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$C2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">246</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">24</span>D\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$D2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">24</span>D:\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">262</span>\n\n\t<span class=\"token opcode property\">LSR</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">262</span>:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>D<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>D<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>D<span class=\"token decimalnumber string\">3</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>D<span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>AA\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>AA\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">1</span>DC, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>AA:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8894</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\tSTY_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00010000</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D6</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>D<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":6551},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A2D2:\n\tLDA byte_RAM_10\n\tAND #$04\n\tBEQ loc_BANK3_A2E1\n\n\tLDX_abs byte_RAM_F4\n\n\tDEC SpriteDMAArea + $C, X\n\tLDX byte_RAM_12\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>D<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>E<span class=\"token decimalnumber string\">1</span>\n\n\tLDX_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">DEC</span> SpriteDMAArea + $C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":6794},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A2E1:\n\tLDA EnemyArray_B1, X\n\tTAX\n\tDEC SpriteDMAArea + 8, X\n\tLDX byte_RAM_12\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">2</span>E<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">DEC</span> SpriteDMAArea + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":6807},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_ClawgripRock:\n\tLDA #$00\n\tSTA EnemyArray_45C, X\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectMovement_Vertical\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_A30A\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK3_A30A:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_A320\n\n\tLDA ObjectYLo, X\n\tAND #$F0\n\tSTA ObjectYLo, X\n\tLDA ObjectYVelocity, X\n\tLSR A\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA ObjectYVelocity, X\n\nloc_BANK3_A320:\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_ClawgripRock:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement_Vertical\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">30</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">30</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">320</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">320</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":6816},{"comment":"---------------------------------------------------------------------------","content":"RenderSprite_ClawgripRock:\n\tLDA_abs_X ObjectBeingCarriedTimer ;, X\n\n\tORA EnemyArray_438, X\n\tBNE loc_BANK3_A362\n\n\tLDA byte_RAM_10\n\tSTA byte_RAM_0\n\tLDA ObjectXVelocity, X\n\tBPL loc_BANK3_A338\n\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\nloc_BANK3_A338:\n\tCMP #$20\n\tBCS loc_BANK3_A344\n\n\tLSR byte_RAM_0\n\tCMP #$08\n\tBCS loc_BANK3_A344\n\n\tLSR byte_RAM_0\n\nloc_BANK3_A344:\n\tLDA byte_RAM_0\n\tCLC\n\tADC #$04\n\tAND #$08\n\tLSR A\n\tLSR A\n\tLSR A\n\tLDY ObjectXVelocity, X\n\tBPL loc_BANK3_A354\n\n\tEOR #$01\n\nloc_BANK3_A354:\n\tSTA EnemyMovementDirection, X\n\tLDA byte_RAM_0\n\tAND #$08\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tORA #$02\n\tSTA ObjectAttributes, X\n\nloc_BANK3_A362:\n\tJMP RenderSprite_NotAlbatoss\n\n\nFlyingCarpetSpeed:\n\t.db $00\n\t.db $15\n\t.db $EB\n\t.db $00\n\n\nEnemyBehavior_FlyingCarpet:\n\tJSR ObjectTileCollision\n\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE loc_BANK3_A37C\n\n\tDEC EnemyArray_B1, X\n\tBNE loc_BANK3_A37C\n\n\tSTA PlayerRidingCarpet\n\tJMP EnemyDestroy\n\n","htmlComment":"<hr>\n","htmlContent":"RenderSprite_ClawgripRock:\n\tLDA_abs_X ObjectBeingCarriedTimer <span class=\"token comment\">;, X</span>\n\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">362</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">338</span>\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">338</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">344</span>\n\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">344</span>\n\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">344</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">354</span>\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">354</span>:\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">362</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_NotAlbatoss\n\n\nFlyingCarpetSpeed:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\n\nEnemyBehavior_FlyingCarpet:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">37</span>C\n\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">37</span>C\n\n\t<span class=\"token opcode property\">STA</span> PlayerRidingCarpet\n\t<span class=\"token opcode property\">JMP</span> EnemyDestroy\n\n","line":6857},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A37C:\n\tLDA PlayerRidingCarpet\n\tBEQ loc_BANK3_A38F\n\n\tLDA PlayerYVelocity\n\tBPL loc_BANK3_A38F\n\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\tSTA PlayerRidingCarpet\n\tJMP RenderSprite_FlyingCarpet\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">37</span>C:\n\t<span class=\"token opcode property\">LDA</span> PlayerRidingCarpet\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">38</span>F\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">38</span>F\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerRidingCarpet\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_FlyingCarpet\n\n","line":6932},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A38F:\n\tLDA EnemyCollision, X\n\tAND #$20\n\tSTA PlayerRidingCarpet\n\tBNE loc_BANK3_A39B\n\n\tJMP loc_BANK3_A42A\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">38</span>F:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerRidingCarpet\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">39</span>B\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">42</span><span class=\"token register variable\">A</span>\n\n","line":6946},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A39B:\n\tLDA ObjectXVelocity, X\n\tBEQ loc_BANK3_A3A5\n\n\tLDA EnemyMovementDirection, X\n\tAND #$01\n\tSTA PlayerDirection\n\nloc_BANK3_A3A5:\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$1A\n\tSTA PlayerYLo\n\tLDA ObjectYHi, X\n\tSBC #$00\n\tSTA PlayerYHi\n\tLDA PlayerXLo\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tLDY #$01\n\tLDA ObjectXVelocity, X\n\tBMI loc_BANK3_A3C7\n\n\tLDY #$FF\n\nloc_BANK3_A3C7:\n\tSTY byte_RAM_71CC\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tTAY\n\tAND_abs PlayerCollision\n\n\tBNE loc_BANK3_A3E6\n\n\tLDA FlyingCarpetSpeed, Y\n\tCMP ObjectXVelocity, X\n\tBEQ loc_BANK3_A3E3\n\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC byte_RAM_71CC, Y\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_A3E3:\n\tJMP loc_BANK3_A3EA\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">39</span>B:\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDirection\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$1A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYHi\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>C<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FF</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>C<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">71</span>CC\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Right | ControllerInput_Left\n\t<span class=\"token opcode property\">TAY</span>\n\tAND_abs PlayerCollision\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>E<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> FlyingCarpetSpeed, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>E<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">71</span>CC, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>E<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>EA\n\n","line":6956},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A3E6:\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_A3EA:\n\tLDY #$01\n\tLDA ObjectYVelocity, X\n\tBMI loc_BANK3_A3F2\n\n\tLDY #$FF\n\nloc_BANK3_A3F2:\n\tSTY byte_RAM_71CC\n\tLDA #$20\n\tCMP SpriteTempScreenY\n\tLDA #$00\n\tROL A\n\tASL A\n\tASL A\n\tASL A\n\tAND Player1JoypadHeld\n\tBNE loc_BANK3_A417\n\n\tLDA EnemyCollision, X\n\tLSR A\n\tLSR A\n\tAND #$03\n\tSTA byte_RAM_0\n\tLDA Player1JoypadHeld\n\tLSR A\n\tLSR A\n\tAND #$03\n\tTAY\n\tAND byte_RAM_0\n\tBEQ loc_BANK3_A41B\n\nloc_BANK3_A417:\n\tLDA #$00\n\tBEQ loc_BANK3_A428\n\nloc_BANK3_A41B:\n\tLDA FlyingCarpetSpeed, Y\n\tCMP ObjectYVelocity, X\n\tBEQ loc_BANK3_A42A\n\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC byte_RAM_71CC, Y\n\nloc_BANK3_A428:\n\tSTA ObjectYVelocity, X\n\nloc_BANK3_A42A:\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectPhysicsY\n\n\tLDA EnemyArray_B1, X\n\tCMP #$20\n\tBCS EnemyBehavior_FlyingCarpet_Render\n\n\tLDA byte_RAM_10\n\tAND #$02\n\nloc_BANK3_A43A:\n\tBNE EnemyBehavior_FlyingCarpet_Render\n\n\tRTS\n\nEnemyBehavior_FlyingCarpet_Render:\n\tJMP RenderSprite_FlyingCarpet\n\n\nCreateFlyingCarpet:\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI CreateFlyingCarpet_Exit\n\n\tLDX byte_RAM_0\n\tLDY byte_RAM_12\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\tLDA #Enemy_FlyingCarpet\n\tSTA ObjectType, X\n\tLDA ObjectXLo, Y\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, Y\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tLDA ObjectYLo, Y\n\tCLC\n\tADC #$0E\n\tSTA ObjectYLo, X\n\tLDA ObjectYHi, Y\n\tADC #$00\n\tSTA ObjectYHi, X\n\tJSR SetEnemyAttributes\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>E<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>EA:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>F<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FF</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">3</span>F<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">71</span>CC\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">CMP</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">417</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">AND</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">41</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">417</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">428</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">41</span>B:\n\t<span class=\"token opcode property\">LDA</span> FlyingCarpetSpeed, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">42</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">71</span>CC, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">428</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">42</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_FlyingCarpet_Render\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">43</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_FlyingCarpet_Render\n\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_FlyingCarpet_Render:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_FlyingCarpet\n\n\nCreateFlyingCarpet:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_TryAllSlots\n\n\t<span class=\"token opcode property\">BMI</span> CreateFlyingCarpet_Exit\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_FlyingCarpet\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0E</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n","line":7008},{"comment":"life of carpet","content":"\tLDA #$A0\n\tSTA EnemyArray_B1, X\n\nCreateFlyingCarpet_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\nFlyingCarpetMirroring:\n\t.db $02\n\t.db $02\n\t.db $01\n\t.db $01\n\nFlyingCarpetTilemapIndex:\n\t.db $04\n\t.db $0C\n\t.db $0C\n\t.db $04\n\nPidgitYAcceleration:\n\t.db $01\n\t.db $FF\n\nPidgitTurnYVelocity:\n\t.db $08\n\t.db $F8\n\nPidgitXAcceleration:\n\t.db $01\n\t.db $FF\n\nPidgitTurnXVelocity:\n\t.db $20\n\t.db $E0\n\nPidgitDiveXVelocity:\n\t.db $14\n\t.db $EC\n\n\nEnemyBehavior_Pidgit:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tINC ObjectAnimationTimer, X\n\tLDA EnemyArray_42F, X\n\tBEQ EnemyBehavior_Pidgit_Alive\n\n\tLDA ObjectAttributes, X\n\tORA #ObjAttrib_UpsideDown\n\tSTA ObjectAttributes, X\n\tJSR RenderSprite_Pidgit\n\n\tJMP ApplyObjectMovement\n\n","htmlComment":"<p>life of carpet</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nCreateFlyingCarpet_Exit:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nFlyingCarpetMirroring:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\nFlyingCarpetTilemapIndex:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\nPidgitYAcceleration:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nPidgitTurnYVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\nPidgitXAcceleration:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nPidgitTurnXVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\nPidgitDiveXVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>\n\n\nEnemyBehavior_Pidgit:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Pidgit_Alive\n\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_UpsideDown\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_Pidgit\n\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectMovement\n\n","line":7111},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Pidgit_Alive:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tLDA EnemyArray_B1, X\n\tBEQ loc_BANK3_A4C1\n\n\tDEC ObjectYVelocity, X\n\tBPL loc_BANK3_A4BE\n\n\tLDA ObjectYLo, X\n\tCMP #$30\n\tBCS loc_BANK3_A4BE\n\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\tDEC EnemyTimer, X\n\nloc_BANK3_A4BE:\n\tJMP loc_BANK3_A502\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Pidgit_Alive:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">DEC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>BE\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>BE\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>BE:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">502</span>\n\n","line":7167},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A4C1:\n\tLDA EnemyTimer, X\n\tBNE loc_BANK3_A4D6\n\n\tLDA #$30\n\tSTA ObjectYVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA PidgitDiveXVelocity, Y\n\tSTA ObjectXVelocity, X\n\tINC EnemyArray_B1, X\n\tJMP RenderSprite_Pidgit\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>C<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>D<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> PidgitDiveXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Pidgit\n\n","line":7191},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A4D6:\n\tLDA EnemyArray_480, X\n\tAND #$01\n\tTAY\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC PidgitYAcceleration, Y\n\tSTA ObjectYVelocity, X\n\tCMP PidgitTurnYVelocity, Y\n\tBNE loc_BANK3_A4EC\n\n\tINC EnemyArray_480, X\n\nloc_BANK3_A4EC:\n\tLDA EnemyArray_477, X\n\tAND #$01\n\tTAY\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC PidgitXAcceleration, Y\n\tSTA ObjectXVelocity, X\n\tCMP PidgitTurnXVelocity, Y\n\tBNE loc_BANK3_A502\n\n\tINC EnemyArray_477, X\n\nloc_BANK3_A502:\n\tJSR ApplyObjectPhysicsY\n\n\tJSR ApplyObjectPhysicsX\n\n\nRenderSprite_Pidgit:\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA EnemyState, X\n\tSEC\n\tSBC #$01\n\tORA EnemyArray_42F, X\n\tORA ObjectBeingCarriedTimer, X\n\tBNE RenderSprite_Pidgit_Exit\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>D<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PidgitYAcceleration, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> PidgitTurnYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>EC\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">4</span>EC:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PidgitXAcceleration, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> PidgitTurnXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">502</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">502</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\nRenderSprite_Pidgit:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Pidgit_Exit\n","line":7206},{"comment":"Render Pidgit's carpet","content":"\tJSR FindSpriteSlot\n\n\tSTY_abs byte_RAM_F4\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_Horizontal | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDA ObjectXLo, X\n\tPHA\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectXHi, X\n\tPHA\n\tSBC #$00\n\tSTA ObjectXHi, X\n\tJSR sub_BANK2_8894\n\n\tPLA\n\tSTA ObjectXHi, X\n\tPLA\n\tSTA ObjectXLo, X\n\tLDA SpriteTempScreenY\n\tCLC\n\tADC #$0C\n\tSTA SpriteTempScreenY\n\tLDA SpriteTempScreenX\n\tSBC #$07\n\tSTA SpriteTempScreenX\n\tJSR RenderSprite_FlyingCarpet\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_Horizontal | ObjAttrib_FrontFacing\n\tSTA ObjectAttributes, X\n\nRenderSprite_Pidgit_Exit:\n\tRTS\n\n\nRenderSprite_FlyingCarpet:\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$03\n\tLDY ObjectXVelocity, X\n\tBMI loc_BANK3_A55F\n\n\tEOR #$03\n\nloc_BANK3_A55F:\n\tTAY\n\tLDA FlyingCarpetMirroring, Y\n\tSTA EnemyMovementDirection, X\n\tLDA FlyingCarpetTilemapIndex, Y\n\tJMP RenderSprite_DrawObject\n\n\nEnemyInit_Mouser:\n\tJSR EnemyInit_Birdo\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$00\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$02\n\tLDY CurrentWorldTileset\n\tBEQ EnemyInit_Mouser_SetHP\n\n\tLDA #$04\n\nEnemyInit_Mouser_SetHP:\n\tSTA EnemyHP, X\n\tRTS\n","htmlComment":"<p>Render Pidgit's carpet</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\tSTY_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_Horizontal | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8894</span>\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_FlyingCarpet\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_Horizontal | ObjAttrib_FrontFacing\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nRenderSprite_Pidgit_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nRenderSprite_FlyingCarpet:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">55</span>F\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$03</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">55</span>F:\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> FlyingCarpetMirroring, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> FlyingCarpetTilemapIndex, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n\nEnemyInit_Mouser:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Birdo\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> SetBossTileset\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDY</span> CurrentWorldTileset\n\t<span class=\"token opcode property\">BEQ</span> EnemyInit_Mouser_SetHP\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\nEnemyInit_Mouser_SetHP:\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":7250},{"comment":"\nMouser\n======\n\nRuns back and forth, throws bombs\n\nbyte_RAM_10 = timer used for jumping and throwing\nEnemyArray_45C = pauses Mouser when not $00\nEnemyTimer = counter used to time throwing (wind up and pitch)\nEnemyArray_B1 = counter used for movement direction and non-throw pauses\n","content":"EnemyBehavior_Mouser:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDA EnemyArray_45C, X\n\tBEQ EnemyBehavior_Mouser_Active\n\n\tJMP RenderSprite\n\nEnemyBehavior_Mouser_Active:\n\tJSR ObjectTileCollision\n\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tJSR RenderSprite\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_Mouser_Falling\n\n\tJSR ResetObjectYVelocity\n\n\tLDA byte_RAM_10\n\tAND #$FF\n\tBNE EnemyBehavior_Mouser_Move\n\nEnemyBehavior_Mouser_Jump:\n\tLDA #$D8\n\tSTA ObjectYVelocity, X\n\tBNE EnemyBehavior_Mouser_Falling\n\nEnemyBehavior_Mouser_Move:\n\tLDA byte_RAM_10\n\tAND #$3F\n\tBNE loc_BANK3_A5AF\n","htmlComment":"<h1>Mouser</h1>\n<p>Runs back and forth, throws bombs</p>\n<p>byte_RAM_10 = timer used for jumping and throwing\nEnemyArray_45C = pauses Mouser when not $00\nEnemyTimer = counter used to time throwing (wind up and pitch)\nEnemyArray_B1 = counter used for movement direction and non-throw pauses</p>\n","htmlContent":"EnemyBehavior_Mouser:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Mouser_Active\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\nEnemyBehavior_Mouser_Active:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Mouser_Falling\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mouser_Move\n\nEnemyBehavior_Mouser_Jump:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mouser_Falling\n\nEnemyBehavior_Mouser_Move:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">5</span>AF\n","line":7335},{"comment":"the wind-up","content":"\tLDA #$20\n\tSTA EnemyTimer, X\n\nloc_BANK3_A5AF:\n\tLDY EnemyTimer, X\n\tBNE EnemyBehavior_Mouser_MaybeThrow\n\n\tINC EnemyArray_B1, X\n\tLDA EnemyArray_B1, X\n\tAND #$20\n\tBEQ EnemyBehavior_Mouser_Exit\n\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tLDY #$18 ; right\n\tLDA EnemyArray_B1, X\n\tAND #$40\n\tBNE EnemyBehavior_Mouser_PhysicsX\n\n\tLDY #$E8 ; left\n\nEnemyBehavior_Mouser_PhysicsX:\n\tSTY ObjectXVelocity, X\n\tJMP ApplyObjectPhysicsX\n\nEnemyBehavior_Mouser_MaybeThrow:","htmlComment":"<p>the wind-up</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">5</span>AF:\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mouser_MaybeThrow\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Mouser_Exit\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$18</span> <span class=\"token comment\">; right</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mouser_PhysicsX\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$E8</span> <span class=\"token comment\">; left</span>\n\nEnemyBehavior_Mouser_PhysicsX:\n\t<span class=\"token opcode property\">STY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsX\n\nEnemyBehavior_Mouser_MaybeThrow:","line":7371},{"comment":"the pitch","content":"\tCPY #$10\n\tBNE EnemyBehavior_Mouser_Exit\n\nEnemyBehavior_Mouser_Throw:\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI EnemyBehavior_Mouser_Exit\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Bomb\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tADC #$03\n\tSTA ObjectYLo, X\n\tLDA #$E0 ; throw y-velocity\n\tSTA ObjectYVelocity, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$FF ; bomb fuse\n\tSTA EnemyTimer, X\n\tLDA #$E0 ; throw x-velocity\n\tSTA ObjectXVelocity, X\n\tLDX byte_RAM_12\n\nEnemyBehavior_Mouser_Exit:\n\tRTS\n\nEnemyBehavior_Mouser_Falling:\n\tJMP ApplyObjectMovement_Vertical\n\n\nRenderSprite_Mouser:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBNE RenderSprite_Mouser_Hurt\n\n\tLDA EnemyArray_45C, X\n\tBEQ RenderSprite_Mouser_Throw\n\n\tINC ObjectAnimationTimer, X\n\tLDA #ObjAttrib_16x32 | ObjAttrib_FrontFacing | ObjAttrib_Palette2\n\tSTA ObjectAttributes, X\n\nRenderSprite_Mouser_Hurt:\n\tLDA #%10110011\n\tSTA EnemyArray_46E, X\n\tLDA #$2C ; hurt sprite\n\tBNE RenderSprite_Mouser_DrawObject\n\nRenderSprite_Mouser_Throw:\n\tLDY EnemyTimer, X\n\tDEY\n\tCPY #$10\n\tBCS RenderSprite_Mouser_Walk\n\n\tLDA #$20 ; throwing sprite\n\nRenderSprite_Mouser_DrawObject:\n\tJSR RenderSprite_DrawObject\n\n\tJMP RenderSprite_Mouser_Exit\n\nRenderSprite_Mouser_Walk:\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA EnemyTimer, X\n\tCMP #$10\n\tBCC RenderSprite_Mouser_Exit\n\nRenderSprite_Mouser_Bomb:\n\tLDA #ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDA #%00010000 ; use tilemap 2\n\tSTA EnemyArray_46E, X\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$0B\n\tSTA SpriteTempScreenX\n\tASL byte_RAM_EE\n\tLDY #$00\n\tSTY_abs byte_RAM_F4\n\tLDA #$38 ; could have been $34 from tilemap 1 instead\n\tJSR RenderSprite_DrawObject\n\nRenderSprite_Mouser_Exit:","htmlComment":"<p>the pitch</p>\n","htmlContent":"\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Mouser_Exit\n\nEnemyBehavior_Mouser_Throw:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_TryAllSlots\n\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_Mouser_Exit\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Bomb\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span> <span class=\"token comment\">; throw y-velocity</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span> <span class=\"token comment\">; bomb fuse</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span> <span class=\"token comment\">; throw x-velocity</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nEnemyBehavior_Mouser_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_Mouser_Falling:\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectMovement_Vertical\n\n\nRenderSprite_Mouser:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Mouser_Hurt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Mouser_Throw\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_FrontFacing | ObjAttrib_Palette<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nRenderSprite_Mouser_Hurt:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%10110011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$2C</span> <span class=\"token comment\">; hurt sprite</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Mouser_DrawObject\n\nRenderSprite_Mouser_Throw:\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_Mouser_Walk\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span> <span class=\"token comment\">; throwing sprite</span>\n\nRenderSprite_Mouser_DrawObject:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_Mouser_Exit\n\nRenderSprite_Mouser_Walk:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BCC</span> RenderSprite_Mouser_Exit\n\nRenderSprite_Mouser_Bomb:\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00010000</span> <span class=\"token comment\">; use tilemap 2</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ASL</span> byte_RAM_EE\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\tSTY_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$38</span> <span class=\"token comment\">; could have been $34 from tilemap 1 instead</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\nRenderSprite_Mouser_Exit:","line":7398},{"comment":"restore Mouser attributes after drawing the bomb","content":"\tLDA #ObjAttrib_16x32 | ObjAttrib_Palette3\n\tSTA ObjectAttributes, X\n\tLDA #%00110011\n\tSTA EnemyArray_46E, X\n\n\tRTS\n\n","htmlComment":"<p>restore Mouser attributes after drawing the bomb</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_Palette<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00110011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7484},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK3_A652:\n\t.db $FB\n\t.db $05\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">652</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>\n","line":7493},{"comment":"---------------------------------------------------------------------------","content":"RenderSprite_Ostro:\n\tJSR RenderSprite_NotRocket\n\n\tLDA byte_RAM_EE\n\tAND #$0E\n\tORA byte_RAM_EF\n\tORA EnemyArray_B1, X\n\tBNE locret_BANK3_A67C\n\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$02\n\tSTA byte_RAM_0\n\tLDY EnemyMovementDirection, X\n\tLDA byte_RAM_1\n\tCLC\n\tADC byte_BANK3_A652 - 1, Y\n\tSTA byte_RAM_1\n\tJSR FindSpriteSlot\n\n\tLDX #$3C\n\tJSR SetSpriteTiles\n\n\tLDX byte_RAM_12\n\nlocret_BANK3_A67C:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"RenderSprite_Ostro:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotRocket\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0E</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">67</span>C\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">652</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$3C</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">67</span>C:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7497},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Ostro:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_A6DB\n\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK3_A6BD\n\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tJSR CreateEnemy\n\n\tBMI locret_BANK3_A6BC\n\n\tLDY byte_RAM_0\n\tLDA #Enemy_Ostro\n\tSTA ObjectType, Y\n\tSTA EnemyArray_B1, Y\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDA unk_RAM_441, X\n\tSTA unk_RAM_441, Y\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tLDA ObjectXVelocity, X\n\tSTA ObjectXVelocity, Y\n\tTYA\n\tTAX\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nlocret_BANK3_A6BC:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Ostro:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>DB\n\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>BD\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_ShyguyRed\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>BC\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Ostro\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>BC:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7527},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A6BD:\n\tLDA EnemyCollision, X\n\tAND #$10\n\tBEQ loc_BANK3_A6DB\n\n\tINC EnemyArray_B1, X\n\tSTA ObjectAnimationTimer, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_A6DB\n\n\tLDY byte_RAM_0\n\tLDA ObjectXVelocity, X\n\tSTA ObjectXVelocity, Y\n\tLDA #$20\n\tSTA EnemyArray_453, Y\n\tJMP loc_BANK3_A6E1\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>BD:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>DB\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>DB\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>E<span class=\"token decimalnumber string\">1</span>\n\n","line":7567},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_A6DB:\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\nloc_BANK3_A6E1:\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND EnemyMovementDirection, X\n\tBEQ loc_BANK3_A6ED\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK3_A6ED:\n\tLDA EnemyCollision, X\n\tAND #$04\n\tBEQ loc_BANK3_A70D\n\n\tLDA EnemyArray_42F, X\n\tBEQ loc_BANK3_A700\n\n\tLDA #$00\n\tSTA EnemyArray_42F, X\n\tJSR EnemyInit_BasicAttributes\n\nloc_BANK3_A700:\n\tLDA ObjectAnimationTimer, X\n\tEOR #$08\n\tSTA ObjectAnimationTimer, X\n\tJSR ResetObjectYVelocity\n\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\nloc_BANK3_A70D:\n\tINC EnemyArray_477, X\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_A71E\n\n\tLDA EnemyArray_477, X\n\tAND #$3F\n\tBNE loc_BANK3_A71E\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK3_A71E:\n\tJSR ApplyObjectMovement\n\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>DB:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>E<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>ED\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">6</span>ED:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">70</span>D\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">700</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicAttributes\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">700</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">70</span>D:\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">71</span>E\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">71</span>E\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">71</span>E:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":7587},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_Tryclyde:\n\tJSR EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$01\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$40\n\tSTA EnemyArray_477, X\n\tLDA #$02\n\tSTA EnemyHP, X\n\tJMP EnemyInit_Birdo_Exit\n\n\nTryclydeHeadPosition:\n\t.db $00\n\t.db $FF\n\t.db $FE\n\t.db $FD\n\t.db $FC\n\t.db $FB\n\t.db $FA\n\t.db $F9\n\t.db $F8\n\t.db $F9\n\t.db $FA\n\t.db $FB\n\t.db $FC\n\t.db $FD\n\t.db $FE\n\t.db $FF\n\nTryclydeFireYVelocity:\n\t.db $0B\n\t.db $0C\n\t.db $0D\n\t.db $0F\n\t.db $10\n\t.db $12\n\t.db $14\n\t.db $17\n\t.db $1A\n\t.db $1D\n\t.db $1F\n\t.db $20\n\nTryclydeFireXVelocity:\n\t.db $E2\n\t.db $E2\n\t.db $E2\n\t.db $E3\n\t.db $E4\n\t.db $E5\n\t.db $E7\n\t.db $E9\n\t.db $ED\n\t.db $F1\n\t.db $F8\n\t.db $00\n\n\nlocret_BANK3_A75C:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_Tryclyde:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> SetBossTileset\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> EnemyInit_Birdo_Exit\n\n\nTryclydeHeadPosition:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F9</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F9</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nTryclydeFireYVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$12</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$17</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\nTryclydeFireXVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E9</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$ED</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">75</span>C:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7640},{"comment":"\nTryclyde\n========\n\nDrifts back and forth slightly, spits fire\n\nEnemyArray_477 = counter used to determine movement direction and top head position\nEnemyArray_B1 = counter used to determine whether or not the bottom head should move\nEnemyArray_45C = used to determine whether Tryclyde is taking damage\nEnemyArray_480 = counter used to determine bottom head position\n","content":"EnemyBehavior_Tryclyde:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tLDY #$00\n\tLDA EnemyArray_477, X\n\tASL A\n\tBCC EnemyBehavior_Tryclyde_PhysicsX\n\n\tLDY #$02\n\tASL A\n\tBCC EnemyBehavior_Tryclyde_PhysicsX\n\n\tLDY #$FE\n\nEnemyBehavior_Tryclyde_PhysicsX:\n\tSTY ObjectXVelocity, X\n\tJSR ApplyObjectPhysicsX\n\n\tINC EnemyArray_477, X\n\tLDA EnemyArray_B1, X\n\tCLC\n\tADC #$D0\n\tSTA EnemyArray_B1, X\n\tBCC RenderSprite_Tryclyde\n\n\tINC EnemyArray_480, X\n\nRenderSprite_Tryclyde:\n\tLDA byte_RAM_EF\n\tBNE locret_BANK3_A75C\n\n\tLDA #ObjAttrib_16x32 | ObjAttrib_FrontFacing | ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDY #$48 ; static head regular\n\tLDA EnemyState, X\n\tSEC\n\tSBC #$01\n\tORA EnemyArray_45C, X\n\tSTA byte_RAM_7\n\tBEQ RenderSprite_Tryclyde_DrawBody\n\n\tLDY #$4C ; static head hurt\n\nRenderSprite_Tryclyde_DrawBody:\n\tTYA\n\tLDY #$30\n\tSTY_abs byte_RAM_F4\n\tJSR RenderSprite_DrawObject\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_FrontFacing\n\tSTA ObjectAttributes, X\n\tLDA #%00110011\n\tSTA EnemyArray_46E, X\n\tLDA ObjectXLo, X\n\tPHA\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tJSR sub_BANK2_8894\n\n\tLDX #$50 ; tail up\n\tLDA byte_RAM_10\n\tAND #$20\n\tBNE RenderSprite_Tryclyde_DrawTail\n\n\tLDA #$04\n\tAND byte_RAM_10\n\tBEQ RenderSprite_Tryclyde_DrawTail\n\n\tLDX #$53 ; tail down\n\nRenderSprite_Tryclyde_DrawTail:","htmlComment":"<h1>Tryclyde</h1>\n<p>Drifts back and forth slightly, spits fire</p>\n<p>EnemyArray_477 = counter used to determine movement direction and top head position\nEnemyArray_B1 = counter used to determine whether or not the bottom head should move\nEnemyArray_45C = used to determine whether Tryclyde is taking damage\nEnemyArray_480 = counter used to determine bottom head position</p>\n","htmlContent":"EnemyBehavior_Tryclyde:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_Tryclyde_PhysicsX\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_Tryclyde_PhysicsX\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FE</span>\n\nEnemyBehavior_Tryclyde_PhysicsX:\n\t<span class=\"token opcode property\">STY</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCC</span> RenderSprite_Tryclyde\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\nRenderSprite_Tryclyde:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_A<span class=\"token decimalnumber string\">75</span>C\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_FrontFacing | ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$48</span> <span class=\"token comment\">; static head regular</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Tryclyde_DrawBody\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$4C</span> <span class=\"token comment\">; static head hurt</span>\n\nRenderSprite_Tryclyde_DrawBody:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$30</span>\n\tSTY_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_FrontFacing\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00110011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8894</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$50</span> <span class=\"token comment\">; tail up</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Tryclyde_DrawTail\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">AND</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Tryclyde_DrawTail\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$53</span> <span class=\"token comment\">; tail down</span>\n\nRenderSprite_Tryclyde_DrawTail:","line":7718},{"comment":"tail","content":"\tLDA byte_RAM_1\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_1\n\tLDA #$20\n\tSTA byte_RAM_C\n\tLDY #$E0\n\tJSR SetSpriteTiles\n","htmlComment":"<p>tail</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n","line":7791},{"comment":"top head","content":"\tLDX byte_RAM_12\n\tLDA ObjectXLo, X\n\tSEC\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tJSR sub_BANK2_8894\n\n\tPLA\n\tSTA ObjectXLo, X\n\tLDA #%00010011\n\tSTA EnemyArray_46E, X\n\tLDA ObjectYLo, X\n\tSTA byte_RAM_0\n\tLDA EnemyArray_477, X\n\tAND #$78\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA TryclydeHeadPosition, Y\n\tADC SpriteTempScreenX\n\tADC #$F0\n\tSTA byte_RAM_1\n\tLDX #$56\n\tLDA byte_RAM_7\n\tBNE RenderSprite_Tryclyde_DrawTopHead\n\n\tLDX #$58\n\tDEY\n\tDEY\n\tDEY\n\tDEY\n\tCPY #$07\n\tBCS RenderSprite_Tryclyde_DrawTopHead\n\n\tLDX #$5A\n\nRenderSprite_Tryclyde_DrawTopHead:\n\tLDY #$00\n\tJSR SetSpriteTiles\n","htmlComment":"<p>top head</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8894</span>\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00010011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$78</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> TryclydeHeadPosition, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$56</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Tryclyde_DrawTopHead\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$58</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_Tryclyde_DrawTopHead\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$5A</span>\n\nRenderSprite_Tryclyde_DrawTopHead:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n","line":7801},{"comment":"bottom head","content":"\tLDX byte_RAM_12\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tLDA EnemyArray_480, X\n\tAND #$78\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA TryclydeHeadPosition, Y\n\tADC SpriteTempScreenX\n\tADC #$F0\n\tSTA byte_RAM_1\n\tLDA #$00\n\tSTA byte_RAM_C\n\tLDX #$56\n\tLDA byte_RAM_7\n\tBNE RenderSprite_Tryclyde_DrawBottomHead\n\n\tLDX #$58\n\tDEY\n\tDEY\n\tDEY\n\tDEY\n\tCPY #$07\n\tBCS RenderSprite_Tryclyde_DrawBottomHead\n\n\tLDX #$5A\n\nRenderSprite_Tryclyde_DrawBottomHead:\n\tLDY #$08\n\tJSR SetSpriteTiles\n\n\tLDX byte_RAM_12\n\tLDA #%00010011\n\tSTA EnemyArray_46E, X\n\tLDA byte_RAM_EE\n\tBNE EnemyBehavior_Tryclyde_SpitFireballs\n\nRenderSprite_Tryclyde_DrawBottomNeck:\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + $58\n\tLDA #$0D ; neck sprite\n\tSTA SpriteDMAArea + $59\n\tSTA SpriteDMAArea + $5D ; bottom neck\n\tLDA SpriteDMAArea + $32\n\tSTA SpriteDMAArea + $5A\n\tSTA SpriteDMAArea + $5E ; bottom neck\n\tLDA byte_RAM_1\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + $5B\n\nRenderSprite_Tryclyde_DrawTopNeck:\n\tLDA ObjectYLo, X\n\tSTA SpriteDMAArea + $5C\n\tLDA SpriteTempScreenX\n\tSEC\n\tSBC #$08\n\tSTA SpriteDMAArea + $5F\n\nEnemyBehavior_Tryclyde_SpitFireballs:\n\tLDA #$00\n\tSTA byte_RAM_5\n\tLDA EnemyArray_477, X\n\tJSR EnemyBehavior_Tryclyde_SpitFireball\n\n\tINC byte_RAM_5\n\tLDA EnemyArray_480, X\n\nEnemyBehavior_Tryclyde_SpitFireball:\n\tAND #$67\n\tCMP #$40\n\tBNE RenderSprite_Tryclyde_Exit\n\n\tLDA EnemyArray_45C, X\n\tBNE RenderSprite_Tryclyde_Exit\n\n\tJSR CreateEnemy\n\n\tBMI RenderSprite_Tryclyde_Exit\n\n\tLDA #SoundEffect1_BirdoShot\n\tSTA SoundEffectQueue1\n\tLDY byte_RAM_0\n\tLDA #Enemy_Fireball\n\tSTA ObjectType, Y\n\tSTA EnemyVariable, Y\n\tSTA EnemyArray_B1, Y\n\tLDA ObjectXLo, X\n\tSBC #$18\n\tSTA ObjectXLo, Y\n\tLDA byte_RAM_5\n\tBEQ EnemyBehavior_Tryclyde_GetFireAngle\n\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA ObjectYLo, Y\n\nEnemyBehavior_Tryclyde_GetFireAngle:","htmlComment":"<p>bottom head</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$78</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> TryclydeHeadPosition, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$56</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Tryclyde_DrawBottomHead\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$58</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_Tryclyde_DrawBottomHead\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$5A</span>\n\nRenderSprite_Tryclyde_DrawBottomHead:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00010011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Tryclyde_SpitFireballs\n\nRenderSprite_Tryclyde_DrawBottomNeck:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$58</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0D</span> <span class=\"token comment\">; neck sprite</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$59</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$5D</span> <span class=\"token comment\">; bottom neck</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$32</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$5A</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$5E</span> <span class=\"token comment\">; bottom neck</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$5B</span>\n\nRenderSprite_Tryclyde_DrawTopNeck:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$5C</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$5F</span>\n\nEnemyBehavior_Tryclyde_SpitFireballs:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Tryclyde_SpitFireball\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Tryclyde_SpitFireball:\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$67</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Tryclyde_Exit\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Tryclyde_Exit\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> RenderSprite_Tryclyde_Exit\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_BirdoShot\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Fireball\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Tryclyde_GetFireAngle\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\nEnemyBehavior_Tryclyde_GetFireAngle:","line":7843},{"comment":"angle the fireball based on the player's position","content":"\tLDA PlayerXLo\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$0F\n\tCMP #$0B\n\tBCC EnemyBehavior_Tryclyde_SetFireVelocity\n\n\tLDA #$0B\n\nEnemyBehavior_Tryclyde_SetFireVelocity:\n\tTAX ; These may be fireball speed pointers\n\tLDA TryclydeFireYVelocity, X\n\tSTA ObjectYVelocity, Y\n\tLDA TryclydeFireXVelocity, X\n\tSTA ObjectXVelocity, Y\n","htmlComment":"<p>angle the fireball based on the player's position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_Tryclyde_SetFireVelocity\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0B</span>\n\nEnemyBehavior_Tryclyde_SetFireVelocity:\n\t<span class=\"token opcode property\">TAX</span> <span class=\"token comment\">; These may be fireball speed pointers</span>\n\t<span class=\"token opcode property\">LDA</span> TryclydeFireYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> TryclydeFireXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n","line":7949},{"comment":"\nSets enemy attributes to defaults, restores X, and exits\n\nInput\nY = enemy index\nOutput\nX = enemy index\n","content":"RenderSprite_Tryclyde_ResetAttributes:\n\tTYA\n\tTAX\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nRenderSprite_Tryclyde_Exit:\n\tRTS\n\n\nEnemyInit_Cobrats:\n\tJSR EnemyInit_Basic\n\n\tLDA ObjectYLo, X\n\tSEC\n\tSBC #$08\n\tSTA EnemyVariable, X\n\tRTS\n\n","htmlComment":"<p>Sets enemy attributes to defaults, restores X, and exits</p>\n<p>Input\nY = enemy index\nOutput\nX = enemy index</p>\n","htmlContent":"RenderSprite_Tryclyde_ResetAttributes:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nRenderSprite_Tryclyde_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyInit_Cobrats:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7975},{"comment":"\nCobrat (Ground)\n===============\n\nBobs up and down until the player gets close, then jumps up, chases, and shoots bullets\n\nEnemyVariable = target y-position\nEnemyArray_480 = flag that gets enabled when the player gets close\nEnemyArray_477 = counter used to determine bobbing direction\nObjectAnimationTimer = counter used to determine how quickly Cobrat turns\nEnemyArray_453 = counter used to determine when to fire a bullet\n","content":"EnemyBehavior_CobratGround:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyArray_480, X\n\tBNE EnemyBehavior_CobratGround_Jump\n\n\tSTA ObjectXVelocity, X\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA byte_RAM_F\n\tADC #$40\n\tCMP #$80\n\tBCS EnemyBehavior_CobratGround_Bob\n\n\tINC EnemyArray_480, X\n\tLDA #$C0\n\tSTA ObjectYVelocity, X\n\tBNE EnemyBehavior_CobratGround_Jump\n\nEnemyBehavior_CobratGround_Bob:\n\tINC EnemyArray_477, X\n\tLDY #$FC\n\tLDA EnemyArray_477, X\n\tAND #$20\n\tBEQ EnemyBehavior_CobratGround_BobMovement\n\n\tLDY #$04\n\nEnemyBehavior_CobratGround_BobMovement:\n\tSTY ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\n\tLDA #ObjAttrib_16x32 | ObjAttrib_BehindBackground | ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tJMP RenderSprite\n\nEnemyBehavior_CobratGround_Jump:\n\tLDA ObjectYVelocity, X\n\tBMI EnemyBehavior_CobratGround_Movement\n\n\tLDA EnemyVariable, X\n\tSEC\n\tSBC #$18\n\tCMP ObjectYLo, X\n\tBCS EnemyBehavior_CobratGround_Movement\n\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA ObjectYVelocity, X\n\nEnemyBehavior_CobratGround_Movement:\n\tJSR ApplyObjectMovement\n\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tPHA\n\tAND #$3F\n\tBNE EnemyBehavior_CobratGround_AfterBasicMovement\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nEnemyBehavior_CobratGround_AfterBasicMovement:\n\tPLA\n\tBNE EnemyBehavior_CobratGround_CheckCollision\n\n\tLDA #$18\n\tSTA EnemyArray_453, X\n\nEnemyBehavior_CobratGround_CheckCollision:\n\tLDA EnemyCollision, X\n\tAND #$03\n\tBEQ EnemyBehavior_CobratGround_SetAttributes\n\n\tJSR EnemyBehavior_TurnAround\n\nEnemyBehavior_CobratGround_SetAttributes:\n\tLDA #ObjAttrib_16x32 | ObjAttrib_Palette1\n\tLDY ObjectYVelocity, X\n\tBPL EnemyBehavior_CobratGround_Shoot\n\n\tLDA #ObjAttrib_16x32 | ObjAttrib_BehindBackground | ObjAttrib_Palette1\n\nEnemyBehavior_CobratGround_Shoot:\n\tJMP EnemyBehavior_CobratJar_Shoot\n\n","htmlComment":"<h1>Cobrat (Ground)</h1>\n<p>Bobs up and down until the player gets close, then jumps up, chases, and shoots bullets</p>\n<p>EnemyVariable = target y-position\nEnemyArray_480 = flag that gets enabled when the player gets close\nEnemyArray_477 = counter used to determine bobbing direction\nObjectAnimationTimer = counter used to determine how quickly Cobrat turns\nEnemyArray_453 = counter used to determine when to fire a bullet</p>\n","htmlContent":"EnemyBehavior_CobratGround:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratGround_Jump\n\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_CobratGround_Bob\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratGround_Jump\n\nEnemyBehavior_CobratGround_Bob:\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FC</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CobratGround_BobMovement\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span>\n\nEnemyBehavior_CobratGround_BobMovement:\n\t<span class=\"token opcode property\">STY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_BehindBackground | ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\nEnemyBehavior_CobratGround_Jump:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_CobratGround_Movement\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_CobratGround_Movement\n\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_CobratGround_Movement:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratGround_AfterBasicMovement\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n\nEnemyBehavior_CobratGround_AfterBasicMovement:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratGround_CheckCollision\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_CobratGround_CheckCollision:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CobratGround_SetAttributes\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\nEnemyBehavior_CobratGround_SetAttributes:\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> EnemyBehavior_CobratGround_Shoot\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_BehindBackground | ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\nEnemyBehavior_CobratGround_Shoot:\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_CobratJar_Shoot\n\n","line":8008},{"comment":"\nCobrat (Jar)\n============\n\nBobs up and down, then occasionally jumps up to shoot a bullet at the player\n\nEnemyVariable = target y-position\nEnemyArray_B1 = flag that gets set when the Cobrat jumps\nbyte_RAM_10 = counter used to determine when to jump and fire\nEnemyArray_453 = counter used to determine when to fire a bullet\n","content":"EnemyBehavior_CobratJar:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Up\n\tBEQ EnemyBehavior_CobratJar_Uncorked\n\nEnemyBehavior_CobratJar_Corked:\n\tLDA EnemyVariable, X\n\tSTA ObjectYLo, X\n\tRTS\n\nEnemyBehavior_CobratJar_Uncorked:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\n\tLDA EnemyArray_B1, X\n\tBNE EnemyBehavior_CobratJar_Jump\n\n\tLDA EnemyTimer, X\n\tBNE EnemyBehavior_CobratJar_Bob\n\n\tLDA #$D0\n\tSTA ObjectYVelocity, X\n\tINC EnemyArray_B1, X\n\tJMP EnemyBehavior_CobratJar_Movement\n\nEnemyBehavior_CobratJar_Bob:\n\tLDY #$FC\n\tLDA byte_RAM_10\n\tAND #$20\n\tBEQ EnemyBehavior_CobratJar_BobMovement\n\n\tLDY #$04\n\nEnemyBehavior_CobratJar_BobMovement:\n\tSTY ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\n\tJMP EnemyBehavior_CobratJar_SetAttributes\n\nEnemyBehavior_CobratJar_Jump:\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectYVelocity, X\n\tBMI EnemyBehavior_CobratJar_Movement\n\n\tBNE EnemyBehavior_CobratJar_CheckLanding\n\n\tLDA #$10\n\tSTA EnemyArray_453, X\n\nEnemyBehavior_CobratJar_CheckLanding:\n\tLDA ObjectYVelocity, X\n\tBMI EnemyBehavior_CobratJar_CheckReset\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ EnemyBehavior_CobratJar_CheckReset\n\n\tLDA byte_RAM_E\n\tSEC\n\tSBC #$6F\n\tCMP #$06\n\tBCC EnemyBehavior_CobratJar_CheckReset\n\nEnemyBehavior_CobratJar_Blocked:\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tLDA #DPCM_BossHurt\n\tSTA DPCMQueue\n\nEnemyBehavior_CobratJar_CheckReset:\n\tLDA EnemyVariable, X\n\tCMP ObjectYLo, X\n\tBCS EnemyBehavior_CobratJar_Movement\n\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tLDA #$A0\n\tSTA EnemyTimer, X\n\nEnemyBehavior_CobratJar_Movement:\n\tJSR ApplyObjectMovement_Vertical\n\nEnemyBehavior_CobratJar_SetAttributes:\n\tLDA #ObjAttrib_16x32 | ObjAttrib_BehindBackground | ObjAttrib_Palette1\n\nEnemyBehavior_CobratJar_Shoot:\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_453, X\n\tBEQ EnemyBehavior_CobratJar_Render\n\n\tCMP #$05\n\tBNE EnemyBehavior_CobratJar_RenderShot\n\n\tJSR CreateBullet\n\nEnemyBehavior_CobratJar_RenderShot:\n\tLDA #$64 ; firing bullet\n\tJMP RenderSprite_DrawObject\n\nEnemyBehavior_CobratJar_Render:\n\tJMP RenderSprite\n\n\nEnemyInit_Pokey:\n\tJSR EnemyInit_Basic\n\n\tLDA #$03\n\tSTA EnemyVariable, X\n\tRTS\n","htmlComment":"<h1>Cobrat (Jar)</h1>\n<p>Bobs up and down, then occasionally jumps up to shoot a bullet at the player</p>\n<p>EnemyVariable = target y-position\nEnemyArray_B1 = flag that gets set when the Cobrat jumps\nbyte_RAM_10 = counter used to determine when to jump and fire\nEnemyArray_453 = counter used to determine when to fire a bullet</p>\n","htmlContent":"EnemyBehavior_CobratJar:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Up\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CobratJar_Uncorked\n\nEnemyBehavior_CobratJar_Corked:\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_CobratJar_Uncorked:\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratJar_Jump\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratJar_Bob\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_CobratJar_Movement\n\nEnemyBehavior_CobratJar_Bob:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FC</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CobratJar_BobMovement\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span>\n\nEnemyBehavior_CobratJar_BobMovement:\n\t<span class=\"token opcode property\">STY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_CobratJar_SetAttributes\n\nEnemyBehavior_CobratJar_Jump:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_CobratJar_Movement\n\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratJar_CheckLanding\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_CobratJar_CheckLanding:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_CobratJar_CheckReset\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CobratJar_CheckReset\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$6F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_CobratJar_CheckReset\n\nEnemyBehavior_CobratJar_Blocked:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Dead\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #DPCM_BossHurt\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nEnemyBehavior_CobratJar_CheckReset:\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_CobratJar_Movement\n\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_CobratJar_Movement:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement_Vertical\n\nEnemyBehavior_CobratJar_SetAttributes:\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_BehindBackground | ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\nEnemyBehavior_CobratJar_Shoot:\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_CobratJar_Render\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_CobratJar_RenderShot\n\n\t<span class=\"token opcode property\">JSR</span> CreateBullet\n\nEnemyBehavior_CobratJar_RenderShot:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$64</span> <span class=\"token comment\">; firing bullet</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\nEnemyBehavior_CobratJar_Render:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\nEnemyInit_Pokey:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":8111},{"comment":"---------------------------------------------------------------------------","content":"unk_BANK3_AA1C:\n\t.db $02\n\t.db $04\n\t.db $0D\n\t.db $0E\n","htmlComment":"<hr>\n","htmlContent":"unk_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">1</span>C:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0E</span>\n","line":8235},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Pokey:\n\tLDA EnemyVariable, X\n\tBNE loc_BANK3_AA2D\n\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR EnemyBehavior_Check42FPhysicsInterrupt\n\nloc_BANK3_AA2D:\n\tLDA EnemyCollision, X\n\tAND #$10\n\tBEQ loc_BANK3_AA3A\n\n\tJSR sub_BANK3_AA3E\n\n\tINC EnemyArray_42F, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Pokey:\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">2</span>D\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Check<span class=\"token decimalnumber string\">42</span>FPhysicsInterrupt\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">2</span>D:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">3</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">3</span>E\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":8241},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_AA3A:\n\tLDA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK3_AA99\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">3</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">99</span>\n\n","line":8263},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_AA3E:\n\tLDA EnemyVariable, X\n\tBEQ loc_BANK3_AA99\n\n\tSTA EnemyArray_477, X\n\tLDA #$00\n\tSTA EnemyVariable, X\n\tLDA #$02\n\tSTA EnemyArray_489, X\n\tLDA unk_RAM_441, X\n\tSTA byte_RAM_6\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_AA99\n\n\tLDY byte_RAM_0\n\tLDA #Enemy_Pokey\n\tSTA ObjectType, Y\n\tJSR RenderSprite_Tryclyde_ResetAttributes\n\n\tLDY byte_RAM_0\n\tLDA byte_RAM_6\n\tSTA unk_RAM_441, Y\n\tLDA EnemyArray_477, X\n\tSEC\n\tSBC #$01\n\tSTA EnemyVariable, Y\n\tTAY\n\nloc_BANK3_AA78:\n\tLDA unk_BANK3_AA1C, Y\n\tLDY byte_RAM_0\n\tSTA EnemyArray_489, Y\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$10\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA ObjectYHi, Y\n\nloc_BANK3_AA99:\n\tINC ObjectAnimationTimer, X\n\tLDA ObjectAnimationTimer, X\n\tAND #$3F\n\tBNE loc_BANK3_AAA4\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK3_AAA4:\n\tJSR ApplyObjectPhysicsX\n\n\tJMP RenderSprite\n\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">3</span>E:\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">99</span>\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">99</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Pokey\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_Tryclyde_ResetAttributes\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">78</span>:\n\t<span class=\"token opcode property\">LDA</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">1</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AA<span class=\"token decimalnumber string\">99</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AAA<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AAA<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\n","line":8269},{"comment":"End of function sub_BANK3_AA3E","content":"PokeyWiggleOffset:\n\t.db $00\n\t.db $01\n\t.db $00\n\t.db $FF\n\t.db $00\n\t.db $01\n\t.db $00\n\n\nRenderSprite_Pokey:\n\tLDY #$00\n\tLDA byte_RAM_EE\n\tBNE RenderSprite_Pokey_Segments\n\n\tLDA byte_RAM_10\n\tAND #$18\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\nRenderSprite_Pokey_Segments:\n\tSTY byte_RAM_7\n\tLDA SpriteTempScreenX\n\tSTA PokeyTempScreenX\n\tCLC\n\tADC PokeyWiggleOffset, Y\n\tSTA SpriteTempScreenX\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA EnemyVariable, X\n\tSTA byte_RAM_9\n\tBEQ RenderSprite_Pokey_Exit\n\n\tTYA\n\tCLC\n\tADC #$10\n\tTAY\n\tLDX byte_RAM_7\n\tLDA PokeyTempScreenX\n\tADC PokeyWiggleOffset + 1, X\n\tSTA byte_RAM_1\n\tLDX #$70\n\tJSR SetSpriteTiles\n\n\tDEC byte_RAM_9\n\tBEQ RenderSprite_Pokey_Exit\n\n\tJSR FindSpriteSlot\n\n\tLDX byte_RAM_7\n\tLDA PokeyTempScreenX\n\tCLC\n\tADC PokeyWiggleOffset + 2, X\n\tSTA byte_RAM_1\n\tLDX #$70\n\tJSR SetSpriteTiles\n\n\tDEC byte_RAM_9\n\tBEQ RenderSprite_Pokey_Exit\n\n\tLDX byte_RAM_7\n\tLDA PokeyTempScreenX\n\tCLC\n\tADC PokeyWiggleOffset + 3, X\n\tSTA byte_RAM_1\n\tLDX #$70\n\tJSR SetSpriteTiles\n\nRenderSprite_Pokey_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n\nEnemyBehavior_Rocket:\n\tLDA EnemyArray_B1, X\n\tBNE EnemyBehavior_Rocket_Flying\n\tJMP EnemyBehavior_Rocket_Launching\n\nEnemyBehavior_Rocket_Flying:\n\tLDY #$03\n\tLDA ObjectYVelocity, X\n\tBEQ EnemyBehavior_Rocket_Slow\n\n\tCMP #$FD\n\tBCC EnemyBehavior_Rocket_Fast\n\nEnemyBehavior_Rocket_Slow:\n\tLDY #$3F\n\tINC SpriteTempScreenX\n\tLDA byte_RAM_10\n\tAND #$02\n\tBNE EnemyBehavior_Rocket_Fast\n\n\tDEC SpriteTempScreenX\n\tDEC SpriteTempScreenX\n\nEnemyBehavior_Rocket_Fast:\n\tTYA\n\tAND byte_RAM_10\n\tBNE EnemyBehavior_Rocket_ApplyPhysics\n\n\tDEC ObjectYVelocity, X\n\nEnemyBehavior_Rocket_ApplyPhysics:\n\tJSR ApplyObjectPhysicsY\n\n\tLDA EnemyArray_477, X\n\tBNE EnemyBehavior_Rocket_DroppingOff\n\n\tLDY ObjectYHi, X\n\tBPL EnemyBehavior_Rocket_Render\n\n\tJSR DoAreaReset\n\n\tLDA #Enemy_Rocket\n\tSTA ObjectCarriedOver\n\tINC DoAreaTransition\n\tLDA #TransitionType_Rocket\n\tSTA TransitionType\n\tLDA #$00\n\tSTA_abs PlayerState\n\n\tRTS\n\nEnemyBehavior_Rocket_DroppingOff:\n\tLDA ObjectYLo, X\n\tCMP #$30\n\tBCS EnemyBehavior_Rocket_Render\n\n\tLDY PlayerInRocket\n\tBNE EnemyBehavior_Rocket_DropPlayer\n\n\tCMP #$18\n\tBCS EnemyBehavior_Rocket_Render\n\n\tJMP EnemyBehavior_Bomb_Explode\n\nEnemyBehavior_Rocket_DropPlayer:\n\tLDA #$00\n\tSTA PlayerInRocket\n\tSTA HoldingItem\n\tSTA PlayerXVelocity\n\tLDA ObjectYLo, X\n\tADC #$20\n\tSTA PlayerYLo\n\tSTA PlayerScreenYLo\n\nEnemyBehavior_Rocket_Render:\n\tJSR RenderSprite_Rocket\n\n\tLDA SpriteTempScreenX\n\tSEC\n\tSBC #$04\n\tSTA SpriteDMAArea + $93\n\tADC #$07\n\tSTA SpriteDMAArea + $97\n\tADC #$08\n\tSTA SpriteDMAArea + $9B\n\n\tLDA #$20 ; long trail\n\tLDY ObjectYVelocity, X\n\tCPY #$FD\n\tBMI EnemyBehavior_Rocket_RenderTrails\n\n\tLDA #$15 ; short trail\n\nEnemyBehavior_Rocket_RenderTrails:\n\tADC SpriteTempScreenY\n\tSTA SpriteDMAArea + $90\n\tSTA SpriteDMAArea + $94\n\tSTA SpriteDMAArea + $98\n\tLDA #$8C\n\tSTA SpriteDMAArea + $91\n\tSTA SpriteDMAArea + $95\n\tSTA SpriteDMAArea + $99\n\tLDA byte_RAM_10\n\tLSR A\n\tAND #$03\n\tSTA byte_RAM_0\n\tLSR A\n\tROR A\n\tROR A\n\tAND #$C0\n\tORA byte_RAM_0\n\tSTA SpriteDMAArea + $92\n\tSTA SpriteDMAArea + $96\n\tSTA SpriteDMAArea + $9A\n\tRTS\n\nEnemyBehavior_Rocket_Launching:","htmlComment":"<p>End of function sub_BANK3_AA3E</p>\n","htmlContent":"PokeyWiggleOffset:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\n\nRenderSprite_Pokey:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Pokey_Segments\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nRenderSprite_Pokey_Segments:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">STA</span> PokeyTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PokeyWiggleOffset, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Pokey_Exit\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> PokeyTempScreenX\n\t<span class=\"token opcode property\">ADC</span> PokeyWiggleOffset + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$70</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Pokey_Exit\n\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> PokeyTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PokeyWiggleOffset + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$70</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Pokey_Exit\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> PokeyTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PokeyWiggleOffset + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$70</span>\n\t<span class=\"token opcode property\">JSR</span> SetSpriteTiles\n\nRenderSprite_Pokey_Exit:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyBehavior_Rocket:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Rocket_Flying\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_Rocket_Launching\n\nEnemyBehavior_Rocket_Flying:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Rocket_Slow\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$FD</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_Rocket_Fast\n\nEnemyBehavior_Rocket_Slow:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">INC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Rocket_Fast\n\n\t<span class=\"token opcode property\">DEC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">DEC</span> SpriteTempScreenX\n\nEnemyBehavior_Rocket_Fast:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Rocket_ApplyPhysics\n\n\t<span class=\"token opcode property\">DEC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Rocket_ApplyPhysics:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Rocket_DroppingOff\n\n\t<span class=\"token opcode property\">LDY</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> EnemyBehavior_Rocket_Render\n\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Rocket\n\t<span class=\"token opcode property\">STA</span> ObjectCarriedOver\n\t<span class=\"token opcode property\">INC</span> DoAreaTransition\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_Rocket\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\tSTA_abs PlayerState\n\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_Rocket_DroppingOff:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_Rocket_Render\n\n\t<span class=\"token opcode property\">LDY</span> PlayerInRocket\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Rocket_DropPlayer\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_Rocket_Render\n\n\t<span class=\"token opcode property\">JMP</span> EnemyBehavior_Bomb_Explode\n\nEnemyBehavior_Rocket_DropPlayer:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerInRocket\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYLo\n\nEnemyBehavior_Rocket_Render:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_Rocket\n\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$93</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$97</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$9B</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span> <span class=\"token comment\">; long trail</span>\n\t<span class=\"token opcode property\">LDY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$FD</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_Rocket_RenderTrails\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$15</span> <span class=\"token comment\">; short trail</span>\n\nEnemyBehavior_Rocket_RenderTrails:\n\t<span class=\"token opcode property\">ADC</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$90</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$94</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$98</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$8C</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$91</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$95</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$99</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$92</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$96</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$9A</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyBehavior_Rocket_Launching:","line":8331},{"comment":"Wait until ObjectBeingCarriedTimer reaches 1 to start the boosters","content":"\tLDA ObjectBeingCarriedTimer, X\n\tCMP #$01\n\tBNE EnemyBehavior_Rocket_Carry\n","htmlComment":"<p>Wait until ObjectBeingCarriedTimer reaches 1 to start the boosters</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Rocket_Carry\n","line":8526},{"comment":"Setting EnemyArray_B1 puts the rocket in the area","content":"\tSTA EnemyArray_B1, X\n\tSTA PlayerInRocket\n\tLDA #SoundEffect3_Rumble_A\n\tSTA SoundEffectQueue3\n\tLDA #$FE\n\tSTA ObjectYVelocity, X\n\nEnemyBehavior_Rocket_Carry:\n\tJSR CarryObject\n\nRenderSprite_Rocket:\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDA SpriteTempScreenX\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_1\n\tLDA #$02\n\tSTA byte_RAM_2\n\tSTA byte_RAM_5\n\tSTA byte_RAM_C\n\tLDA ObjectAttributes, X\n\tAND #$23\n\tSTA byte_RAM_3\n\tLDY #$00\n\tLDX #$96\n\tJSR loc_BANK2_9C53\n\n\tLDA byte_RAM_1\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_1\n\tDEC byte_RAM_2\n\tLDA SpriteTempScreenY\n\tSTA byte_RAM_0\n\tLDY #$10\n\tLDX #$96\n\tJMP loc_BANK2_9C53\n\n","htmlComment":"<p>Setting EnemyArray_B1 puts the rocket in the area</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerInRocket\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">3</span>_Rumble_A\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FE</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Rocket_Carry:\n\t<span class=\"token opcode property\">JSR</span> CarryObject\n\nRenderSprite_Rocket:\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$23</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$96</span>\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">53</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$96</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">53</span>\n\n","line":8531},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK3_AC25:\n\t.db $F0\n\nbyte_BANK3_AC26:\n\t.db $00\n\t.db $F0\n\n\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">25</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">26</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\n\n","line":8572},{"comment":"=============== S U B R O U T I N E =======================================","content":"RenderSprite_Fryguy:\n\tLDA #$00\n\tSTA byte_RAM_EE\n\tLDA ObjectAnimationTimer, X\n\tAND #$08\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_7\n\tLDY byte_RAM_7\n\tLDA SpriteTempScreenX\n\tPHA\n\tCLC\n\tADC byte_BANK3_AC25, Y\n\tSTA SpriteTempScreenX\n\tLDA #$80\n\tLDY EnemyArray_45C, X\n\tBEQ loc_BANK3_AC4B\n\n\tLDA #$88\n\nloc_BANK3_AC4B:\n\tJSR RenderSprite_DrawObject\n\n\tJSR FindSpriteSlot\n\n\tSTY_abs byte_RAM_F4\n\tPLA\n\tCLC\n\tLDY byte_RAM_7\n\tADC byte_BANK3_AC26, Y\n\tSTA SpriteTempScreenX\n\tLDA #$84\n\tLDY EnemyArray_45C, X\n\tBEQ loc_BANK3_AC67\n\n\tLDA #$8C\n\nloc_BANK3_AC67:\n\tJMP RenderSprite_DrawObject\n\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"RenderSprite_Fryguy:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">25</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">4</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$88</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">4</span>B:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\tSTY_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">26</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$84</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">67</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$8C</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">67</span>:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n\n","line":8581},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_Fryguy:\n\tJSR EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$02\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$04\n\tSTA EnemyHP, X\n\tLDA #$00\n\tSTA EnemyVariable, X\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_Fryguy:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">JSR</span> SetBossTileset\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":8625},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK3_AC77:\n\t.db $E0\n\t.db $20\n\t.db $F0\n\t.db $10\n\nbyte_BANK3_AC7B:\n\t.db $04\n\t.db $0C\n\t.db $04\n\t.db $0C\n\nbyte_BANK3_AC7F:\n\t.db $04\n\t.db $04\n\t.db $0C\n\t.db $0C\n\nbyte_BANK3_AC83:\n\t.db $01\n\t.db $FF\n\nbyte_BANK3_AC85:\n\t.db $2A\n\t.db $D6\n\nbyte_BANK3_AC87:\n\t.db $01\n\t.db $FF\n\nbyte_BANK3_AC89:\n\t.db $18\n\t.db $E8\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">77</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">7</span>B:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">7</span>F:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">83</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">85</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D6</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">87</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">89</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n","line":8641},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Fryguy:\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tINC ObjectAnimationTimer, X\n\tLDY EnemyHP, X\n\tDEY\n\tBNE loc_BANK3_ACE7\n\n\tLDA #$03\n\tSTA byte_RAM_9\n\tSTA FryguySplitFlames\n\tJSR EnemyDestroy\n\nloc_BANK3_ACA1:\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_ACE3\n\n\tLDY byte_RAM_0\n\tLDA ObjectYHi, X\n\tSTA unk_RAM_4EF, Y\n\tLDA #$F0\n\tSTA ObjectYVelocity, Y\n\tLDA #Enemy_FryguySplit\n\tSTA ObjectType, Y\n\tLDA #$30\n\tSTA EnemyArray_453, Y\n\tLDA ObjectYLo, X\n\tPHA\n\tLDX byte_RAM_9\n\tLDA byte_BANK3_AC77, X\n\tSTA ObjectXVelocity, Y\n\tLDA SpriteTempScreenX\n\tADC byte_BANK3_AC7B, X\n\tSTA ObjectXLo, Y\n\tPLA\n\tADC byte_BANK3_AC7F, X\n\tSTA ObjectYLo, Y\n\tLDA #$00\n\tSTA ObjectXHi, Y\n\tTYA\n\tTAX\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK3_ACE3:\n\tDEC byte_RAM_9\n\tBPL loc_BANK3_ACA1\n\nloc_BANK3_ACE7:\n\tLDA byte_RAM_10\n\tAND #$1F\n\tBNE loc_BANK3_AD07\n\n\tJSR CreateEnemy\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Fireball\n\tSTA ObjectType, X\n\tLDA ObjectXLo, X\n\tSBC #$08\n\tSTA ObjectXLo, X\n\tLDA ObjectYLo, X\n\tADC #$18\n\tSTA ObjectYLo, X\n\tJSR EnemyInit_BasicAttributes\n\n\tLDX byte_RAM_12\n\nloc_BANK3_AD07:\n\tLDA byte_RAM_10\n\tAND #$01\n\tBNE loc_BANK3_AD37\n\n\tLDA EnemyVariable, X\n\tAND #$01\n\tTAY\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC byte_BANK3_AC87, Y\n\tSTA ObjectYVelocity, X\n\tCMP byte_BANK3_AC89, Y\n\tBNE loc_BANK3_AD21\n\n\tINC EnemyVariable, X\n\nloc_BANK3_AD21:\n\tLDA EnemyArray_477, X\n\tAND #$01\n\tTAY\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC byte_BANK3_AC83, Y\n\tSTA ObjectXVelocity, X\n\tCMP byte_BANK3_AC85, Y\n\tBNE loc_BANK3_AD37\n\n\tINC EnemyArray_477, X\n\nloc_BANK3_AD37:\n\tJSR RenderSprite_Fryguy\n\n\tJSR ApplyObjectPhysicsY\n\n\tJMP ApplyObjectPhysicsX\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Fryguy:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ACE<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">STA</span> FryguySplitFlames\n\t<span class=\"token opcode property\">JSR</span> EnemyDestroy\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_ACA<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ACE<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span>EF, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_FryguySplit\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">77</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">7</span>B, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">7</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_ACE<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ACA<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_ACE<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">07</span>\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Fireball\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">07</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">37</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">87</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">89</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">21</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">21</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">83</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AC<span class=\"token decimalnumber string\">85</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">37</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">37</span>:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_Fryguy\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsX\n","line":8675},{"comment":"---------------------------------------------------------------------------","content":"unk_BANK3_AD40:\n\t.db $3F\n\t.db $3F\n\t.db $3F\n\t.db $7F\nunk_BANK3_AD44:\n\t.db $D4\n\t.db $D8\n\t.db $DA\n\t.db $DE\n","htmlComment":"<hr>\n","htmlContent":"unk_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">40</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$7F</span>\nunk_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">44</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DE</span>\n","line":8784},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_FryguySplit:\n\tLDA EnemyCollision, X\n\tAND #$10\n\tBEQ loc_BANK3_AD59\n\n\tJSR PlayBossHurtSound\n\n\tLDA #%00000000\n\tSTA EnemyArray_46E, X\n\tJMP TurnIntoPuffOfSmoke\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_FryguySplit:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">59</span>\n\n\t<span class=\"token opcode property\">JSR</span> PlayBossHurtSound\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000000</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> TurnIntoPuffOfSmoke\n\n","line":8795},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_AD59:\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tLDA byte_RAM_10\n\tSTA ObjectShakeTimer, X\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tJSR ObjectTileCollision\n\n\tJSR RenderSprite\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_AD7A\n\n\tJSR ResetObjectYVelocity\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_AD7A:\n\tPLA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_AD85\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR HalfObjectVelocityX\n\nloc_BANK3_AD85:\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tLDY FryguySplitFlames\n\tAND unk_BANK3_AD40, Y\n\tORA ObjectYVelocity, X\n\tBNE loc_BANK3_ADAB\n\n\tLDA PseudoRNGValues + 2\n\tAND #$1F\n\tORA unk_BANK3_AD44, Y\n\tSTA ObjectYVelocity, X\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\n\tLDA FryguySplitFlames\n\tCMP #$02\n\tBCS loc_BANK3_ADAB\n\n\tASL ObjectXVelocity, X\n\nloc_BANK3_ADAB:\nIFDEF REV_A\n\tLDA PlayerState\n\tCMP #PlayerState_ChangingSize\n\tBEQ +\nENDIF\n\n\tJSR ApplyObjectPhysicsX\n\n\tJMP ApplyObjectMovement_Vertical\n\nIFDEF REV_A\n\t+ RTS\nENDIF\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">59</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">JSR</span> RenderSprite\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">85</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">85</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDY</span> FryguySplitFlames\n\t<span class=\"token opcode property\">AND</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">40</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ADAB\n\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">ORA</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_AD<span class=\"token decimalnumber string\">44</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n\n\t<span class=\"token opcode property\">LDA</span> FryguySplitFlames\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ADAB\n\n\t<span class=\"token opcode property\">ASL</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_ADAB:\nIFDEF REV_A\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">CMP</span> #PlayerState_ChangingSize\n\t<span class=\"token opcode property\">BEQ</span> +\nENDIF\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectMovement_Vertical\n\nIFDEF REV_A\n\t+ <span class=\"token opcode property\">RTS</span>\nENDIF\n\n","line":8808},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Autobomb:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_ADF9\n\n\tLDA EnemyCollision, X\n\tAND #$10\n\tORA ObjectBeingCarriedTimer, X\n\tBEQ loc_BANK3_ADF9\n\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA unk_RAM_441, X\n\tSTA byte_RAM_6\n\tLDA #$FF\n\tSTA unk_RAM_441, X\n\tJSR CreateEnemy\n\n\tBMI loc_BANK3_ADF9\n\n\tLDY byte_RAM_0\n\tLDA byte_RAM_6\n\tSTA unk_RAM_441, Y\n\tLDA ObjectXLo, X\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tSTA ObjectXHi, Y\n\tLDX byte_RAM_0\n\tLDA #Enemy_Autobomb\n\tSTA ObjectType, X\n\tJSR EnemyInit_BasicAttributes\n\n\tINC EnemyArray_B1, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$04\n\tSTA EnemyArray_489, X\n\tLDX byte_RAM_12\n\nloc_BANK3_ADF9:\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tPHA\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_AE09\n\n\tJSR ResetObjectYVelocity\n\nloc_BANK3_AE09:\n\tPLA\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_AE14\n\n\tJSR EnemyBehavior_TurnAround\n\n\tJSR ApplyObjectPhysicsX\n\nloc_BANK3_AE14:\n\tINC ObjectAnimationTimer, X\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_AE45\n\n\tTXA\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tADC byte_RAM_10\n\tAND #$7F\n\tBNE loc_BANK3_AE28\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK3_AE28:\n\tLDA ObjectAnimationTimer, X\n\tAND #%01111111\n\tBNE loc_BANK3_AE45\n\n\tJSR EnemyInit_BasicMovementTowardPlayer\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Autobomb:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ADF<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">ORA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ADF<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_ShyguyRed\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_ADF<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">441</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Autobomb\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicAttributes\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_ADF<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">09</span>\n\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">09</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">14</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">14</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">45</span>\n\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">28</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">28</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%01111111</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">45</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_BasicMovementTowardPlayer\n","line":8878},{"comment":"which bullet?","content":"\tJSR CreateBullet\n\n\tBMI loc_BANK3_AE45\n\n\tLDX byte_RAM_0 ; X has the new enemy index\n\tLDA #Enemy_AutobombFire","htmlComment":"<p>which bullet?</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> CreateBullet\n\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">45</span>\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span> <span class=\"token comment\">; X has the new enemy index</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_AutobombFire","line":8964},{"comment":"Set the enemy type and attributes\nBUG: The subroutine overwrites RAM_0 (enemy index)\nShould have pushed it to stack instead.","content":"\tJSR EnemyBehavior_SpitProjectile\n\n\tLDX byte_RAM_0\n\tDEC ObjectYLo, X\n\tDEC ObjectYLo, X\n\tLDX byte_RAM_12\n\nloc_BANK3_AE45:\n\tJSR ApplyObjectMovement\n\n\tJMP RenderSprite\n\n","htmlComment":"<p>Set the enemy type and attributes\nBUG: The subroutine overwrites RAM_0 (enemy index)\nShould have pushed it to stack instead.</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_SpitProjectile\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">DEC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">45</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":8973},{"comment":"---------------------------------------------------------------------------","content":"RenderSprite_Autobomb:\n\tLDA EnemyState, X\n\tCMP #EnemyState_Alive\n\tBEQ loc_BANK3_AE5C\n\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_16x32 | ObjAttrib_UpsideDown\n\tSTA ObjectAttributes, X\n\tSTA ObjectAnimationTimer, X\n\tLDA #$76\n\tJMP RenderSprite_DrawObject\n\n","htmlComment":"<hr>\n","htmlContent":"RenderSprite_Autobomb:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">5</span>C\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_UpsideDown\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$76</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite_DrawObject\n\n","line":8986},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_AE5C:\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_AE7C\n\n\tLDA_abs byte_RAM_F4\n\tPHA\n\tLDA SpriteTempScreenY\n\tCLC\n\tADC #$F5\n\tSTA SpriteTempScreenY\n\tJSR FindSpriteSlot\n\n\tSTY_abs byte_RAM_F4\n\tLDA #$7C\n\tJSR RenderSprite_DrawObject\n\n\tPLA\n\tSTA_abs byte_RAM_F4\n\nloc_BANK3_AE7C:\n\tLDA ObjectYLo, X\n\tSTA SpriteTempScreenY\n\tJSR RenderSprite_NotAlbatoss\n\n\tLDA #$02\n\tSTA EnemyMovementDirection, X\n\tTYA\n\tCLC\n\tADC #$08\n\tSTA_abs byte_RAM_F4\n\tLDA byte_RAM_0\n\tSTA SpriteTempScreenY\n\tLDA #%11010000\n\tSTA EnemyArray_46E, X\n\tLDA #$78\n\tJSR RenderSprite_DrawObject\n\n\tLDA #$50\n\tLDY EnemyArray_B1, X\n\tBEQ loc_BANK3_AEA6\n\n\tLDA #%01010010\n\nloc_BANK3_AEA6:\n\tSTA EnemyArray_46E, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">5</span>C:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">7</span>C\n\n\tLDA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F5</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\tSTY_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7C</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">PLA</span>\n\tSTA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AE<span class=\"token decimalnumber string\">7</span>C:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_NotAlbatoss\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\tSTA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%11010000</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$78</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$50</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AEA<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%01010010</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AEA<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":8999},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_WhaleSpout:\n\tJSR EnemyInit_Basic\n\n\tLDA ObjectYLo, X\n\tSTA EnemyArray_B1, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_WhaleSpout:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":9048},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_WhaleSpout:\n\tINC ObjectAnimationTimer, X\n\tINC ObjectAnimationTimer, X\n\tINC EnemyVariable, X\n\tLDA EnemyVariable, X\n\tCMP #$40\n\tBCS loc_BANK3_AEC3\n\n\tLDA #$E0\n\tSTA ObjectYLo, X\n\nlocret_BANK3_AEC2:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_WhaleSpout:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AEC<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_AEC<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":9057},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_AEC3:\n\tBNE loc_BANK3_AECD\n\n\tLDA #$D0\n\tSTA ObjectYVelocity, X\n\tLDA EnemyArray_B1, X\n\tSTA ObjectYLo, X\n\nloc_BANK3_AECD:\n\tLDA #SoundEffect3_ShortNoise\n\tSTA SoundEffectQueue3\n\tLDA EnemyVariable, X\n\tCMP #$80\n\tBCC loc_BANK3_AEE6\n\n\tCMP #$DC\n\tBCS loc_BANK3_AEE6\n\n\tLDY #$03\n\tAND #$10\n\tBEQ loc_BANK3_AEE4\n\n\tLDY #$FB\n\nloc_BANK3_AEE4:\n\tSTY ObjectYVelocity, X\n\nloc_BANK3_AEE6:\n\tINC ObjectYVelocity, X\n\tJSR ApplyObjectPhysicsY\n\nRenderSprite_WhaleSpout:\n\tLDA byte_RAM_EE\n\tAND #$C\n\tBNE locret_BANK3_AEC2\n\n\tLDA EnemyVariable, X\n\tSTA byte_RAM_7\n\tLDA #$29\n\tSTA ObjectAttributes, X\n\tLDA #$92\n\tLDY EnemyVariable, X\n\tCPY #$DC\n\tBCC loc_BANK3_AF03\n\n\tLDA #$94\n\nloc_BANK3_AF03:\n\tJSR RenderSprite_DrawObject\n\n\tJSR FindSpriteSlot\n\n\tLDA #$55\n\tLDX byte_RAM_7\n\tCPX #$E0\n\tBCC loc_BANK3_AF13\n\n\tLDA #$3A\n\nloc_BANK3_AF13:\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$55\n\tCPX #$E8\n\tBCC loc_BANK3_AF1E\n\n\tLDA #$3A\n\nloc_BANK3_AF1E:\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$55\n\tCPX #$F0\n\tBCC loc_BANK3_AF29\n\n\tLDA #$3A\n\nloc_BANK3_AF29:\n\tSTA SpriteDMAArea + 9, Y\n\tLDA #$55\n\tCPX #$F8\n\tBCC loc_BANK3_AF34\n\n\tLDA #$3A\n\nloc_BANK3_AF34:\n\tSTA SpriteDMAArea + $D, Y\n\tLDX_abs byte_RAM_F4\n\tLDA SpriteDMAArea + 2, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tSTA SpriteDMAArea + $E, Y\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$04\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $B, Y\n\tSTA SpriteDMAArea + $F, Y\n\tLDX byte_RAM_12\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$F\n\tSTA SpriteDMAArea, Y\n\tADC #$10\n\tSTA SpriteDMAArea + 4, Y\n\tADC #$10\n\tSTA SpriteDMAArea + 8, Y\n\tADC #$10\n\tSTA SpriteDMAArea + $C, Y\n\nlocret_BANK3_AF74:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_AEC<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AECD\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AECD:\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">3</span>_ShortNoise\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AEE<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$DC</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AEE<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AEE<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$FB</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AEE<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">STY</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AEE<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\nRenderSprite_WhaleSpout:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> #$C\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_AEC<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$29</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$92</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$DC</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">03</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$94</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">03</span>:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$55</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">13</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">13</span>:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$55</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$E8</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">1</span>E\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">1</span>E:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$55</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">29</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">29</span>:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$55</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">34</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">34</span>:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $D, <span class=\"token register variable\">Y</span>\n\tLDX_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $<span class=\"token register variable\">A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $E, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> #$F\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $C, <span class=\"token register variable\">Y</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">74</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":9073},{"comment":"---------------------------------------------------------------------------","content":"\t.db $1C\nbyte_BANK3_AF76:\n\t.db $E4\n\n\t.db $01\n\t.db $FF\n","htmlComment":"<hr>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1C</span>\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">76</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n","line":9188},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_Flurry:\n\tINC ObjectAnimationTimer, X\n\tJSR EnemyBehavior_CheckDamagedInterrupt\n\n\tJSR EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\tJSR ObjectTileCollision\n\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ loc_BANK3_AF8D\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK3_AF8D:\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Down\n\tBEQ loc_BANK3_AFB4\n\n\tLDA ObjectYVelocity, X\n\tPHA\n\tJSR ResetObjectYVelocity\n\n\tPLA\n\tLDY EnemyArray_42F, X\n\tBEQ loc_BANK3_AFB4\n\n\tCMP #$18\n\tBMI loc_BANK3_AFAC\n\n\tJSR HalfObjectVelocityX\n\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\tBNE loc_BANK3_AFDA\n\nloc_BANK3_AFAC:\n\tLDA #$00\n\tSTA EnemyArray_42F, X\n\tJSR SetEnemyAttributes\n\nloc_BANK3_AFB4:\n\tLDA byte_RAM_E\n\tCMP #$16\n\tBEQ loc_BANK3_AFBF\n\n\tDEC ObjectAnimationTimer, X\n\tJMP loc_BANK2_9470\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_Flurry:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckDamagedInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt\n\n\t<span class=\"token opcode property\">JSR</span> ObjectTileCollision\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">8</span>D\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">8</span>D:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFB<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> ResetObjectYVelocity\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFB<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFAC\n\n\t<span class=\"token opcode property\">JSR</span> HalfObjectVelocityX\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFDA\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AFAC:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AFB<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$16</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFBF\n\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9470</span>\n\n","line":9195},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_AFBF:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tSTY EnemyMovementDirection, X\n\tLDA byte_RAM_10\n\tAND #$01\n\tBNE loc_BANK3_AFDA\n\n\tLDA ObjectXVelocity, X\n\tCMP locret_BANK3_AF74, Y\n\tBEQ loc_BANK3_AFDA\n\n\tCLC\n\tADC byte_BANK3_AF76, Y\n\tSTA ObjectXVelocity, X\n\tINC ObjectAnimationTimer, X\n\nloc_BANK3_AFDA:\n\tJSR ApplyObjectMovement\n\n\tINC unk_RAM_4A4, X\n\tJMP RenderSprite\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_AFBF:\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">STY</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFDA\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">74</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_AFDA\n\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AF<span class=\"token decimalnumber string\">76</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_AFDA:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement\n\n\t<span class=\"token opcode property\">INC</span> unk_RAM_<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n","line":9246},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_HawkmouthBoss:\n\tJSR EnemyInit_Hawkmouth ; Falls through to EnemyInit_Stationary\n\n\tLDA #$03\n\tSTA EnemyHP, X\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_HawkmouthBoss:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Hawkmouth <span class=\"token comment\">; Falls through to EnemyInit_Stationary</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":9272},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK3_AFEC:\n\t.db $01\n\t.db $FF\nbyte_BANK3_AFEE:\n\t.db $28\n\t.db $D8\nbyte_BANK3_AFF0:\n\t.db $01\n\t.db $FF\nbyte_BANK3_AFF2:\n\t.db $10\n\t.db $F0\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">3</span>_AFEC:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AFEE:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D8</span>\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AFF<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_AFF<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n","line":9281},{"comment":"---------------------------------------------------------------------------","content":"EnemyBehavior_HawkmouthBoss:\n\tJSR RenderSprite_HawkmouthBoss\n\n\tLDA #%00000110\n\tSTA EnemyArray_46E, X\n\tLDA #$02\n\tSTA byte_RAM_71FE\n\tLDA CrystalAndHawkmouthOpenSize\n\tBEQ locret_BANK3_B05F\n\n\tCMP #$01\n\tBNE loc_BANK3_B01C\n\n\tSTA EnemyArray_480, X\n\tLDA #$90\n\tSTA EnemyTimer, X\n\tLDA #$40\n\tSTA EnemyArray_438, X\n\tSTA EnemyArray_45C, X\n\tSTA CrystalAndHawkmouthOpenSize\n\nloc_BANK3_B01C:\n\tLDA EnemyArray_480, X\n\tCMP #$02\n\tBCC loc_BANK3_B09B\n\n\tLDA EnemyArray_B1, X\n\tBNE loc_BANK3_B03B\n\n\tINC EnemyArray_480, X\n\tLDA EnemyArray_480, X\n\tCMP #$31\n\tBNE HawkmouthEat\n\n\tLDA EnemyArray_453, X\n\tBNE loc_BANK3_B03B\n\n\tINC EnemyArray_B1, X\n\tJSR sub_BANK3_B095\n\nloc_BANK3_B03B:\n\tDEC EnemyArray_480, X\n\tLDY EnemyArray_480, X\n\tDEY\n\tBNE HawkmouthEat\n\n\tDEC EnemyArray_B1, X\n\tLDA PlayerState\n\tCMP #PlayerState_HawkmouthEating\n\tBNE HawkmouthEat\n\n\tLDA #TransitionType_Door\n\tSTA TransitionType\n\tJSR DoAreaReset\n\n\tLDA #$09\n\tSTA PlayerXHi\n\tINC DoAreaTransition\n\tPLA\n\tPLA\n\tPLA\n\tPLA\n\nlocret_BANK3_B05F:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyBehavior_HawkmouthBoss:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_HawkmouthBoss\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000110</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">71</span>FE\n\t<span class=\"token opcode property\">LDA</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">05</span>F\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">01</span>C\n\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$90</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> CrystalAndHawkmouthOpenSize\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">01</span>C:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">09</span>B\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">03</span>B\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$31</span>\n\t<span class=\"token opcode property\">BNE</span> HawkmouthEat\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">03</span>B\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">095</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">03</span>B:\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> HawkmouthEat\n\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">CMP</span> #PlayerState_HawkmouthEating\n\t<span class=\"token opcode property\">BNE</span> HawkmouthEat\n\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_Door\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">INC</span> DoAreaTransition\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">05</span>F:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":9294},{"comment":"---------------------------------------------------------------------------","content":"HawkmouthEat:\n\tLDA EnemyArray_480, X ; Hawkmouth code?\n\tCMP #$30\n\tBNE locret_BANK3_B09A\n\n\tLDA EnemyCollision, X ; make sure the player is inside Hawkmouth\n\tAND #CollisionFlags_PlayerInsideMaybe\n\tBEQ locret_BANK3_B09A\n\n\tLDA HoldingItem ; make sure player is not holding something\n\tBNE locret_BANK3_B09A\n\n\tSTA PlayerCollision ; start eating player\n\tINC EnemyArray_B1, X\n\tINC HawkmouthClosing\n\tDEC EnemyArray_480, X\n\tLDA ObjectXLo, X\n\tSTA PlayerXLo\n\tLDA ObjectXHi, X\n\tSTA PlayerXHi\n\tLDA ObjectYLo, X\n\tADC #$10\n\tSTA PlayerYLo\n\tLDA #PlayerState_HawkmouthEating\n\tSTA PlayerState\n\tLDA #$60\n\tSTA PlayerStateTimer\n\tLDA #$FC\n\tSTA PlayerYVelocity\n\n","htmlComment":"<hr>\n","htmlContent":"HawkmouthEat:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Hawkmouth code?</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">09</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span> <span class=\"token comment\">; make sure the player is inside Hawkmouth</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_PlayerInsideMaybe\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">09</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> HoldingItem <span class=\"token comment\">; make sure player is not holding something</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">09</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">STA</span> PlayerCollision <span class=\"token comment\">; start eating player</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> HawkmouthClosing\n\t<span class=\"token opcode property\">DEC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_HawkmouthEating\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FC</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\n","line":9362},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_B095:\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1\n\nlocret_BANK3_B09A:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">095</span>:\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_HawkOpen_WartBarf\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">09</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":9394},{"comment":"End of function sub_BANK3_B095","content":"\n","htmlComment":"<p>End of function sub_BANK3_B095</p>\n","htmlContent":"\n","line":9403},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B09B:\n\tLDA #%00000011\n\tSTA EnemyArray_46E, X\n\tLDA #$00\n\tSTA byte_RAM_71FE\n\tLDA EnemyHP, X\n\tBNE loc_BANK3_B0BA\n\n\tLDA #$03 ; Hawkmouth Boss health?\n\tSTA EnemyHP, X\n\tJSR sub_BANK3_B095\n\n\tINC EnemyArray_480, X\n\tLDA #$FF\n\tSTA EnemyArray_453, X\n\nloc_BANK3_B0BA:\n\tLDA byte_RAM_10\n\tLSR A\n\tBCC loc_BANK3_B0E3\n\n\tLDA EnemyVariable, X\n\tAND #$01\n\tTAY\n\tLDA ObjectYVelocity, X\n\tCLC\n\tADC byte_BANK3_AFF0, Y\n\tSTA ObjectYVelocity, X\n\tCMP byte_BANK3_AFF2, Y\n\tBNE loc_BANK3_B0D3\n\n\tINC EnemyVariable, X\n\nloc_BANK3_B0D3:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA ObjectXVelocity, X\n\tCMP byte_BANK3_AFEE, Y\n\tBEQ loc_BANK3_B0E3\n\n\tCLC\n\tADC byte_BANK3_AFEC, Y\n\tSTA ObjectXVelocity, X\n\nloc_BANK3_B0E3:\n\tJMP sub_BANK2_9430\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">09</span>B:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000011</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">71</span>FE\n\t<span class=\"token opcode property\">LDA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>BA\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span> <span class=\"token comment\">; Hawkmouth Boss health?</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">095</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>BA:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>E<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AFF<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AFF<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>D<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>D<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AFEE, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>E<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_AFEC, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>E<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">9430</span>\n","line":9405},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK3_B0E6:\n\t.db $F8\n\t.db $10\n\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>E<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\n","line":9454},{"comment":"=============== S U B R O U T I N E =======================================","content":"RenderSprite_HawkmouthBoss:\n\tLDA EnemyArray_480, X\n\tJSR sub_BANK2_8E13\n\n\tLDA CrystalAndHawkmouthOpenSize\n\tBEQ loc_BANK3_B16D\n\n\tLDA byte_RAM_EE\n\tAND #$0C\n\tBNE loc_BANK3_B16D\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"RenderSprite_HawkmouthBoss:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">2</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">13</span>\n\n\t<span class=\"token opcode property\">LDA</span> CrystalAndHawkmouthOpenSize\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">16</span>D\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">16</span>D\n","line":9459},{"comment":"draw the back of Hawkmouth","content":"\tLDA EnemyTimer, X\n\tSTA byte_RAM_7\n\tJSR FindSpriteSlot\n\n\tLDX byte_RAM_2\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC byte_BANK3_B0E6 - 1, X\n\tPHA\n\tPHP\n\tDEX\n\tBEQ loc_BANK3_B112\n\n\tPLA\n\tEOR #$01\n\tPHA\n\nloc_BANK3_B112:\n\tPLP\n\tPLA\n\tBCC loc_BANK3_B16D\n\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $B, Y\n\tSTA SpriteDMAArea + $F, Y\n\tLDX DoorAnimationTimer\n\tBEQ loc_BANK3_B129\n\n\tLDX #$10\n\nloc_BANK3_B129:\n\tLDA SpriteDMAArea, X\n\tSTA SpriteDMAArea, Y\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + 4, Y\n\tLDA byte_RAM_7\n\tBEQ loc_BANK3_B13B\n\n\tLDA #$20\n\nloc_BANK3_B13B:\n\tORA SpriteDMAArea + 2, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tSTA SpriteDMAArea + $E, Y\n\tLDX_abs byte_RAM_F4\n\tLDA SpriteDMAArea, X\n\tSTA SpriteDMAArea + 8, Y\n\tCLC\n\tADC #$10\n\tSTA SpriteDMAArea + $C, Y\n\tLDA #$F0\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$F2\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$F4\n\tSTA SpriteDMAArea + 9, Y\n\tLDA #$F6\n\tSTA SpriteDMAArea + $D, Y\n\nloc_BANK3_B16D:\n\tLDX byte_RAM_12\n\tRTS\n\n\nVegetableThrowerOffsetX:\n\t.db $08\n\t.db $28\n\t.db $48\n\t.db $28\n\nVegetableThrowerOffsetY:\n\t.db $94\n\t.db $84\n\t.db $94\n\t.db $84\n\nVegetableThrowerVelocity:\n\t.db $F8\n\t.db $08\n\t.db $F8\n\t.db $08\n\t.db $08\n\t.db $F8\n\t.db $08\n\t.db $F8\n\n\nGenerator_VegetableThrower:\n\tLDA HoldingItem\n\tBNE locret_BANK3_B1CC\n\n\tLDA byte_RAM_10\n\tAND #$FF\n\tBNE locret_BANK3_B1CC\n\n\tINC VegetableThrowerShotCounter\n\tJSR CreateEnemy_TryAllSlots\n\n\tBMI locret_BANK3_B1CC\n\n\tLDX byte_RAM_0\n\tLDA VegetableThrowerShotCounter\n\tAND #$07\n\tTAY\n\tLDA VegetableThrowerVelocity, Y\n\tSTA ObjectXVelocity, X\n\tTYA\n\tAND #$03\n\tTAY\n\tLDA #$02\n\tSTA ObjectXHi, X\n\tLDA VegetableThrowerOffsetX, Y\n\tSTA ObjectXLo, X\n\tLDA VegetableThrowerOffsetY, Y\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA ObjectYHi, X\n\tLDA PseudoRNGValues + 2\n\tAND #$03\n\tCMP #$02\n\tBCC loc_BANK3_B1C1\n\n\tASL A\n\tSTA EnemyArray_B1, X\n\nloc_BANK3_B1C1:\n\tLDY #Enemy_VegetableLarge\n\tSTY ObjectType, X\n\tJSR SetEnemyAttributes\n\n\tLDA #$D0\n\tSTA ObjectYVelocity, X\n\nlocret_BANK3_B1CC:\n\tRTS\n\n","htmlComment":"<p>draw the back of Hawkmouth</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">0</span>E<span class=\"token decimalnumber string\">6</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">112</span>\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">PHA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">112</span>:\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">16</span>D\n\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">129</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">129</span>:\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">13</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">13</span>B:\n\t<span class=\"token opcode property\">ORA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $<span class=\"token register variable\">A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $E, <span class=\"token register variable\">Y</span>\n\tLDX_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F2</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F4</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F6</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $D, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">16</span>D:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nVegetableThrowerOffsetX:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$48</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\nVegetableThrowerOffsetY:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$94</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$84</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$94</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$84</span>\n\nVegetableThrowerVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span>\n\n\nGenerator_VegetableThrower:\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">1</span>CC\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">1</span>CC\n\n\t<span class=\"token opcode property\">INC</span> VegetableThrowerShotCounter\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_TryAllSlots\n\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">1</span>CC\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> VegetableThrowerShotCounter\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> VegetableThrowerVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> VegetableThrowerOffsetX, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> VegetableThrowerOffsetY, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PseudoRNGValues + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">1</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">1</span>C<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDY</span> #Enemy_VegetableLarge\n\t<span class=\"token opcode property\">STY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">1</span>CC:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":9472},{"comment":"---------------------------------------------------------------------------","content":"EnemyInit_Wart:\n\tJSR EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\tLDA #$04\n\tJSR SetBossTileset\nENDIF\n\n\tLDA #$06\n\tSTA EnemyHP, X\n\tLDA ObjectXHi, X\n\tSTA unk_RAM_4EF, X\n\tRTS\n\n\nWartBubbleYVelocity:\n\t.db $E0\n\t.db $F0\n\t.db $E8\n\t.db $E4\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyInit_Wart:\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic\n\nIFDEF RESET_CHR_LATCH\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">JSR</span> SetBossTileset\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span>EF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nWartBubbleYVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E4</span>\n\n","line":9613},{"comment":"\nWart\n====\n\nWalks back and forth, spits bubbles\n\nEnemyTimer = counter used to determing the bubble spit distance\nEnemyVariable = counter used to pause while walking back and forth\nEnemyArray_480 = counter used to determine the bubble spit height\nEnemyArray_B1 = counter for death animation\nEnemyArray_477 = counter used for alternating steps\nEnemyArray_45C = counter for blinking while hurt\n","content":"EnemyBehavior_Wart:\n\tLDA EnemyArray_B1, X\n\tBNE EnemyBehavior_Wart_Death\n\n\tLDA EnemyHP, X\n\tBNE EnemyBehavior_Wart_Alive\n","htmlComment":"<h1>Wart</h1>\n<p>Walks back and forth, spits bubbles</p>\n<p>EnemyTimer = counter used to determing the bubble spit distance\nEnemyVariable = counter used to pause while walking back and forth\nEnemyArray_480 = counter used to determine the bubble spit height\nEnemyArray_B1 = counter for death animation\nEnemyArray_477 = counter used for alternating steps\nEnemyArray_45C = counter for blinking while hurt</p>\n","htmlContent":"EnemyBehavior_Wart:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Death\n\n\t<span class=\"token opcode property\">LDA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Alive\n","line":9649},{"comment":"start the death sequence","content":"\tLDA #$80\n\tSTA EnemyTimer, X\n\tSTA EnemyArray_B1, X\n\tBNE EnemyBehavior_Wart_Exit\n\nEnemyBehavior_Wart_Alive:\n\tINC EnemyVariable, X\n\tLDA byte_RAM_10\n\tAND #%11111111\n\tBNE EnemyBehavior_Wart_Movement\n","htmlComment":"<p>start the death sequence</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Exit\n\nEnemyBehavior_Wart_Alive:\n\t<span class=\"token opcode property\">INC</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%11111111</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Movement\n","line":9657},{"comment":"spit bubbles","content":"\tLDA #$5F\n\tSTA EnemyTimer, X","htmlComment":"<p>spit bubbles</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$5F</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>","line":9669},{"comment":"counter that determines which index of WartBubbleYVelocity to use","content":"\tINC EnemyArray_480, X\n\nEnemyBehavior_Wart_Movement:\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n","htmlComment":"<p>counter that determines which index of WartBubbleYVelocity to use</p>\n","htmlContent":"\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Wart_Movement:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n","line":9672},{"comment":"pause at the end of movement","content":"\tLDA EnemyVariable, X\n\tAND #%01000000\n\tBEQ EnemyBehavior_Wart_PhysicsX\n","htmlComment":"<p>pause at the end of movement</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%01000000</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Wart_PhysicsX\n","line":9679},{"comment":"increment animation timer","content":"\tINC EnemyArray_477, X\n\tLDA #$F8 ; left movement\n\tLDY EnemyVariable, X\n\tBPL EnemyBehavior_Wart_SetXVelocity\n\n\tLDA #$08 ; right movement\n\nEnemyBehavior_Wart_SetXVelocity:\n\tSTA ObjectXVelocity, X\n\nEnemyBehavior_Wart_PhysicsX:\n\tJSR ApplyObjectPhysicsX\n\n\tLDA EnemyArray_45C, X\n\tBNE EnemyBehavior_Wart_Exit\n\n\tLDA EnemyTimer, X\n\tBEQ EnemyBehavior_Wart_Exit\n\n\tAND #$0F\n\tBNE EnemyBehavior_Wart_Exit\n","htmlComment":"<p>increment animation timer</p>\n","htmlContent":"\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span> <span class=\"token comment\">; left movement</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> EnemyBehavior_Wart_SetXVelocity\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$08</span> <span class=\"token comment\">; right movement</span>\n\nEnemyBehavior_Wart_SetXVelocity:\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Wart_PhysicsX:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Exit\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Wart_Exit\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Exit\n","line":9684},{"comment":"try to create a new enemy for the bubble","content":"\tJSR CreateEnemy\n\n\tBMI EnemyBehavior_Wart_Exit\n\n\tLDA #SoundEffect1_HawkOpen_WartBarf\n\tSTA SoundEffectQueue1","htmlComment":"<p>try to create a new enemy for the bubble</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_Wart_Exit\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_HawkOpen_WartBarf\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>","line":9707},{"comment":"determines how high to spit the bubble","content":"\tLDA EnemyArray_480, X\n\tAND #$03\n\tTAY","htmlComment":"<p>determines how high to spit the bubble</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">TAY</span>","line":9714},{"comment":"determines how far to spit the bubble","content":"\tLDA EnemyTimer, X\n","htmlComment":"<p>determines how far to spit the bubble</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n","line":9718},{"comment":"set up the bubble","content":"\tLDX byte_RAM_0\n\tLSR A\n\tEOR #$FF\n\tSTA ObjectXVelocity, X\n\tLDA WartBubbleYVelocity, Y\n\tSTA ObjectYVelocity, X\n\tLDA #Enemy_WartBubble\n\tSTA ObjectType, X\n\tLDA ObjectYLo, X\n\tADC #$08\n\tSTA ObjectYLo, X\n\tJSR SetEnemyAttributes\n\n\tLDX byte_RAM_12\n\nEnemyBehavior_Wart_Exit:\n\tJMP RenderSprite\n\n\nEnemyBehavior_Wart_Death:\n\tLDA EnemyTimer, X\n\tBEQ EnemyBehavior_Wart_DeathFall\n","htmlComment":"<p>set up the bubble</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> WartBubbleYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_WartBubble\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetEnemyAttributes\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nEnemyBehavior_Wart_Exit:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\nEnemyBehavior_Wart_Death:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> EnemyBehavior_Wart_DeathFall\n","line":9721},{"comment":"going up","content":"\tSTA EnemyArray_45C, X\n\tINC EnemyArray_477, X\n\tINC EnemyArray_477, X\n\tLDA #$F0\n\tSTA ObjectYVelocity, X\n\tBNE EnemyBehavior_Wart_Death_Exit\n\nEnemyBehavior_Wart_DeathFall:\n\tLDA #$04\n\tSTA ObjectXVelocity, X\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectPhysicsY\n","htmlComment":"<p>going up</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_Death_Exit\n\nEnemyBehavior_Wart_DeathFall:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n","line":9745},{"comment":"every other frame","content":"\tLDA byte_RAM_10\n\tLSR A\n\tBCS EnemyBehavior_Wart_CheckDeathComplete\n\n\tINC ObjectYVelocity, X\n\tBMI EnemyBehavior_Wart_CheckDeathComplete\n\n\tLDA byte_RAM_10\n\tAND #$1F\n\tBNE EnemyBehavior_Wart_CheckDeathComplete\n\n\tLDA #DPCM_BossDeath\n\tSTA DPCMQueue\n\tJSR CreateEnemy\n\n\tLDX byte_RAM_0\n\tLDA ObjectYLo, X\n\tADC #$08\n\tSTA ObjectYLo, X\n\tJSR TurnIntoPuffOfSmoke\n\nEnemyBehavior_Wart_CheckDeathComplete:\n\tLDA ObjectYLo, X\n\tCMP #$D0\n\tBCC EnemyBehavior_Wart_Death_Exit\n\n\tLDA #EnemyState_Dead\n\tSTA EnemyState, X\n\nEnemyBehavior_Wart_Death_Exit:\n\tJMP RenderSprite\n\n\nEnemyBehavior_WartBubble:\n\tINC ObjectAnimationTimer, X\n\tJSR ApplyObjectPhysicsX\n\n\tJSR ApplyObjectPhysicsY\n\n\tINC ObjectYVelocity, X\n\tJMP RenderSprite\n\nEnemyBehavior_WartBubble_Exit:\n\tRTS\n\n\nRenderSprite_Wart:\n\tLDA_abs byte_RAM_F4\n\tSTA byte_RAM_7267\n\tSTA byte_RAM_726B\n\tLDA byte_RAM_10\n\tAND #$03\n\tSTA byte_RAM_7\n\tTAY\n\tLDA unk_RAM_7265, Y\n\tSTA_abs byte_RAM_F4\n\tLDA byte_RAM_EF\n\tBNE EnemyBehavior_WartBubble_Exit\n\n\tLDY EnemyHP, X\n\tBNE RenderSprite_Wart_AfterObjAttrib\n","htmlComment":"<p>every other frame</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyBehavior_Wart_CheckDeathComplete\n\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyBehavior_Wart_CheckDeathComplete\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_Wart_CheckDeathComplete\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_BossDeath\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> TurnIntoPuffOfSmoke\n\nEnemyBehavior_Wart_CheckDeathComplete:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">BCC</span> EnemyBehavior_Wart_Death_Exit\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Dead\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\nEnemyBehavior_Wart_Death_Exit:\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\n\nEnemyBehavior_WartBubble:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY\n\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> RenderSprite\n\nEnemyBehavior_WartBubble_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nRenderSprite_Wart:\n\tLDA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7267</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">726</span>B\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7265</span>, <span class=\"token register variable\">Y</span>\n\tSTA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EF\n\t<span class=\"token opcode property\">BNE</span> EnemyBehavior_WartBubble_Exit\n\n\t<span class=\"token opcode property\">LDY</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_AfterObjAttrib\n","line":9760},{"comment":"he dead","content":"\tLDA #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_16x32 | ObjAttrib_Palette2\n\tSTA ObjectAttributes, X\n\nRenderSprite_Wart_AfterObjAttrib:\n\tLDA byte_RAM_EE\n\tPHA\n\tPHA\n\tLDY #$AE ; top row: shocked\n\tLDA EnemyArray_B1, X ; death counter\n\tBNE RenderSprite_Wart_TopHurt\n\n\tLDA EnemyArray_45C, X ; enemy timer\n\tBEQ RenderSprite_Wart_TopRegular\n\n\tCMP #$30\n\tBCS RenderSprite_Wart_TopHurt\n\n\tAND #$08\n\tBNE RenderSprite_Wart_TopHurt\n\n\tLDY #$9E ; top row: blinking\n\nRenderSprite_Wart_TopHurt:\n\tTYA\n\tBNE RenderSprite_Wart_DrawTop\n\nRenderSprite_Wart_TopRegular:\n\tLDA #$9E ; top row: regular\n\tLDY EnemyTimer, X\n\tBEQ RenderSprite_Wart_DrawTop\n\n\tLDA #$A2 ; top row: spitting\n\nRenderSprite_Wart_DrawTop:\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_0\n\tSTA SpriteTempScreenY\n\tLDY byte_RAM_7\n\tLDA unk_RAM_7266, Y\n\tSTA_abs byte_RAM_F4\n\tLDY #$A6 ; middle row: regular\n\tLDA EnemyArray_B1, X\n\tBNE RenderSprite_Wart_MiddleHurt\n\n\tLDA EnemyArray_45C, X\n\tBEQ RenderSprite_Wart_MiddleRegular\n\n\tCMP #$30\n\tBCS RenderSprite_Wart_MiddleHurt\n\n\tAND #$08\n\tBNE RenderSprite_Wart_MiddleHurt\n\n\tBEQ RenderSprite_Wart_DrawMiddle\n\nRenderSprite_Wart_MiddleRegular:\n\tLDA EnemyTimer, X\n\tBEQ RenderSprite_Wart_DrawMiddle\n\nRenderSprite_Wart_MiddleHurt:\n\tLDY #$AA ; middle row: spitting\n\nRenderSprite_Wart_DrawMiddle:\n\tPLA\n\tSTA byte_RAM_EE\n\tTYA\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_0\n\tSTA SpriteTempScreenY\n\tLDY byte_RAM_7\n\tLDA byte_RAM_7267, Y\n\tSTA_abs byte_RAM_F4\n\tLDY #$BA ; bottom row: standing\n\tLDA ObjectXVelocity, X\n\tBEQ RenderSprite_Wart_DrawBottom\n\n\tLDY #$B2 ; bottom row: left foot up\n\tLDA EnemyArray_477, X\n\tAND #$10\n\tBEQ RenderSprite_Wart_DrawBottom\n\n\tLDY #$B6 ; bottom row: right foot up\n\nRenderSprite_Wart_DrawBottom:\n\tPLA\n\tSTA byte_RAM_EE\n\tTYA\n\tJSR RenderSprite_DrawObject\n\n\tLDA byte_RAM_EE\n\tBNE RenderSprite_Wart_Exit\n","htmlComment":"<p>he dead</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span> | ObjAttrib_Palette<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nRenderSprite_Wart_AfterObjAttrib:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$AE</span> <span class=\"token comment\">; top row: shocked</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span> <span class=\"token comment\">; death counter</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_TopHurt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span> <span class=\"token comment\">; enemy timer</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_TopRegular\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_Wart_TopHurt\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_TopHurt\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$9E</span> <span class=\"token comment\">; top row: blinking</span>\n\nRenderSprite_Wart_TopHurt:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_DrawTop\n\nRenderSprite_Wart_TopRegular:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$9E</span> <span class=\"token comment\">; top row: regular</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_DrawTop\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A2</span> <span class=\"token comment\">; top row: spitting</span>\n\nRenderSprite_Wart_DrawTop:\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7266</span>, <span class=\"token register variable\">Y</span>\n\tSTA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$A6</span> <span class=\"token comment\">; middle row: regular</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_MiddleHurt\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_MiddleRegular\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_Wart_MiddleHurt\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_MiddleHurt\n\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_DrawMiddle\n\nRenderSprite_Wart_MiddleRegular:\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_DrawMiddle\n\nRenderSprite_Wart_MiddleHurt:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$AA</span> <span class=\"token comment\">; middle row: spitting</span>\n\nRenderSprite_Wart_DrawMiddle:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenY\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7267</span>, <span class=\"token register variable\">Y</span>\n\tSTA_abs byte_RAM_F<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$BA</span> <span class=\"token comment\">; bottom row: standing</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_DrawBottom\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$B2</span> <span class=\"token comment\">; bottom row: left foot up</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> RenderSprite_Wart_DrawBottom\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$B6</span> <span class=\"token comment\">; bottom row: right foot up</span>\n\nRenderSprite_Wart_DrawBottom:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">JSR</span> RenderSprite_DrawObject\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">BNE</span> RenderSprite_Wart_Exit\n","line":9823},{"comment":"draw backside","content":"\tLDY byte_RAM_7\n\tLDX byte_RAM_7267, Y\n\tLDA unk_RAM_7268, Y\n\tTAY\n\tLDA SpriteTempScreenX\n\tCLC\n\tADC #$20\n\tBCS RenderSprite_Wart_Exit\n\n\tSTA SpriteDMAArea + 3, Y\n\tSTA SpriteDMAArea + 7, Y\n\tSTA SpriteDMAArea + $B, Y\n\tLDA byte_RAM_0\n\tSBC #$2F\n\tSTA SpriteDMAArea, Y\n\tADC #$0F\n\tSTA SpriteDMAArea + 4, Y\n\tADC #$10\n\tSTA SpriteDMAArea + 8, Y\n\tLDA SpriteDMAArea + 2, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tSTA SpriteDMAArea + $A, Y\n\tLDA #$19 ; top\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$1B ; middle\n\tSTA SpriteDMAArea + 5, Y\n\tLDA #$1D ; bottom\n\tSTA SpriteDMAArea + 9, Y\n\nRenderSprite_Wart_Exit:\n\tLDX byte_RAM_12\n\tRTS\n\n","htmlComment":"<p>draw backside</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7267</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7268</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCS</span> RenderSprite_Wart_Exit\n\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$2F</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + $<span class=\"token register variable\">A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$19</span> <span class=\"token comment\">; top</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1B</span> <span class=\"token comment\">; middle</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1D</span> <span class=\"token comment\">; bottom</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\nRenderSprite_Wart_Exit:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":9918},{"comment":"Unused space in the original ($B39B - $B4DF)","content":"unusedSpace $B4E0, $FF\n\n\nbyte_BANK3_B4E0:\n\t.db $F0\n\t.db $10\n\n","htmlComment":"<p>Unused space in the original ($B39B - $B4DF)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$B4E0</span>, <span class=\"token hexnumber string\">$FF</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>E<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\n","line":9954},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_B4E2:\n\tJSR ClearDirectionalCollisionFlags\n\n\tTAY\n\tLDA ObjectYVelocity - 1, X\n\tBMI loc_BANK3_B4EB\n\n\tINY\n\nloc_BANK3_B4EB:\n\tJSR sub_BANK3_BB5A\n\n\tBCS loc_BANK3_B4F7\n\n\tLDA byte_RAM_0\n\tCMP #$82\n\tBEQ loc_BANK3_B4F7\n\n\tCLC\n\nloc_BANK3_B4F7:\n\tDEX\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>E<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">JSR</span> ClearDirectionalCollisionFlags\n\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>EB\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>EB:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">5</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>F<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$82</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>F<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">CLC</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>F<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":9962},{"comment":"End of function sub_BANK3_B4E2","content":"","htmlComment":"<p>End of function sub_BANK3_B4E2</p>\n","htmlContent":"","line":9988},{"comment":"\nObject/background collision that treats non-sky background tiles as solid,\nsuch as for Sparks and Mushroom Blocks\n","content":"ObjectTileCollision_SolidBackground:\n\tLDA #$04\n\tBNE ObjectTileCollision_Main\n","htmlComment":"<p>Object/background collision that treats non-sky background tiles as solid,\nsuch as for Sparks and Mushroom Blocks</p>\n","htmlContent":"ObjectTileCollision_SolidBackground:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> ObjectTileCollision_Main\n","line":9994},{"comment":"\nNormal object/background collision\n","content":"ObjectTileCollision:\n\tLDA #$00\n","htmlComment":"<p>Normal object/background collision</p>\n","htmlContent":"ObjectTileCollision:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n","line":10001},{"comment":"\nObject Tile Collision\n=====================\n\nHandles object collision with background tiles\n\nInput\nA = whether or not to treat walk-through tiles as solid\nX = enemy index\nOutput\nEnemyCollision, X = collision flags\n","content":"ObjectTileCollision_Main:\n\tSTA byte_RAM_7\n\tLDA #$00\n\tSTA byte_RAM_B\n\tSTA byte_RAM_E\n\tJSR ClearDirectionalCollisionFlags\n\n\tSTA byte_RAM_8\n\tLDA ObjectYVelocity - 1, X\n\tBPL ObjectTileCollision_Downward\n\nObjectTileCollision_Upward:\n\tJSR CheckEnemyTileCollision\n\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tBNE loc_BANK3_B57B\n\nObjectTileCollision_Downward:\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tJSR CheckEnemyTileCollision\n\nObjectTileCollision_CheckQuicksand:\n\tLDA ObjectType - 1, X\n\tCMP #Enemy_CobratJar\n\tBEQ ObjectTileCollision_CheckConveyor\n\n\tCMP #Enemy_CobratSand\n\tBEQ ObjectTileCollision_CheckConveyor\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\tLDA byte_RAM_0\n\tSEC\n\tSBC #BackgroundTile_QuicksandSlow\n\tCMP #$02\n\tBCS ObjectTileCollision_CheckConveyor\nELSE\n\tLDY byte_RAM_0\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00001100\n\tCMP #%00001000\n\tBNE ObjectTileCollision_CheckConveyor\n\n\tLDA byte_RAM_0\n\tSEC\n\tSBC #BackgroundTile_QuicksandSlow\nENDIF\n\n\tASL A\n\tADC #$01\n\tSTA ObjectYVelocity - 1, X\n\tLDA #EnemyState_Sinking\n\tSTA EnemyState - 1, X\n\tLDA #$FF\n\tSTA EnemyTimer - 1, X\n\nObjectTileCollision_CheckConveyor:\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\tLDA byte_RAM_0\n\tSTA byte_RAM_E\n\n\tSEC\n\tSBC #BackgroundTile_ConveyorLeft\n\tCMP #$02\n\tBCS loc_BANK3_B57B\n\nELSE\n\tLDY byte_RAM_0\n\tSTY byte_RAM_E\n\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00001100\n\tCMP #%00001100\n\n\tBNE loc_BANK3_B57B\n\n\tTYA\n\tAND #%00000001\nENDIF\n\n\tLDY EnemyArray_438 - 1, X\n\tBNE loc_BANK3_B57B\n\n\tLDY ObjectType - 1, X\n\tCPY #Enemy_VegetableSmall\n\tBCC loc_BANK3_B56C\n\n\tTAY\n\tLDA ObjectYVelocity - 1, X\n\tCMP #$03\n\tBCS loc_BANK3_B57B\n\n\tLDA byte_RAM_D\n\tAND #$03\n\tBNE loc_BANK3_B57B\n\n\tLDA byte_BANK3_B4E0, Y\n\tSTA ObjectXVelocity - 1, X\n\tSTA byte_RAM_B\n\tBNE loc_BANK3_B57B\n\nloc_BANK3_B56C:\n\tLDY ObjectXVelocity - 1, X\n\tBEQ loc_BANK3_B579\n\n\tEOR EnemyMovementDirection - 1, X\n\tLSR A\n\tBCS loc_BANK3_B579\n\n\tDEC ObjectAnimationTimer - 1, X\n\tDEC ObjectAnimationTimer - 1, X\n\nloc_BANK3_B579:\n\tINC ObjectAnimationTimer - 1, X\n\nloc_BANK3_B57B:\n\tLDA ObjectXVelocity - 1, X\n\tCLC\n\tADC ObjectXAcceleration - 1, X\n\tBMI loc_BANK3_B587\n\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\nloc_BANK3_B587:\n\tJSR CheckEnemyTileCollision\n\n\tDEX\n\tRTS\n\n\n","htmlComment":"<h1>Object Tile Collision</h1>\n<p>Handles object collision with background tiles</p>\n<p>Input\nA = whether or not to treat walk-through tiles as solid\nX = enemy index\nOutput\nEnemyCollision, X = collision flags</p>\n","htmlContent":"ObjectTileCollision_Main:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\t<span class=\"token opcode property\">JSR</span> ClearDirectionalCollisionFlags\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BPL</span> ObjectTileCollision_Downward\n\nObjectTileCollision_Upward:\n\t<span class=\"token opcode property\">JSR</span> CheckEnemyTileCollision\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\nObjectTileCollision_Downward:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> CheckEnemyTileCollision\n\nObjectTileCollision_CheckQuicksand:\n\t<span class=\"token opcode property\">LDA</span> ObjectType - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_CobratJar\n\t<span class=\"token opcode property\">BEQ</span> ObjectTileCollision_CheckConveyor\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_CobratSand\n\t<span class=\"token opcode property\">BEQ</span> ObjectTileCollision_CheckConveyor\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #BackgroundTile_QuicksandSlow\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> ObjectTileCollision_CheckConveyor\nELSE\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> TileInteractionAttributesTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00001100</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token binarynumber string\">#%00001000</span>\n\t<span class=\"token opcode property\">BNE</span> ObjectTileCollision_CheckConveyor\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #BackgroundTile_QuicksandSlow\nENDIF\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Sinking\n\t<span class=\"token opcode property\">STA</span> EnemyState - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nObjectTileCollision_CheckConveyor:\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #BackgroundTile_ConveyorLeft\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\nELSE\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_E\n\n\t<span class=\"token opcode property\">LDA</span> TileInteractionAttributesTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00001100</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token binarynumber string\">#%00001100</span>\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00000001</span>\nENDIF\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">438</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\n\t<span class=\"token opcode property\">LDY</span> ObjectType - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">56</span>C\n\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">4</span>E<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">56</span>C:\n\t<span class=\"token opcode property\">LDY</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">579</span>\n\n\t<span class=\"token opcode property\">EOR</span> EnemyMovementDirection - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">579</span>\n\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> ObjectAnimationTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">579</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">57</span>B:\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXAcceleration - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">587</span>\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">587</span>:\n\t<span class=\"token opcode property\">JSR</span> CheckEnemyTileCollision\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":10016},{"comment":"\nCheck collision attributes for the next two tiles\n","content":"IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckEnemyTileCollision:\n\tLDY byte_RAM_8\n\tJSR sub_BANK3_BB87\n\n\tLDY byte_RAM_7\n\tLDA EnemyTileCollisionTable, Y\n\tTAY\n\tLDA byte_RAM_0\n\tJSR CheckTileUsesCollisionType_Bank3\n\n\tBCC CheckEnemyTileCollision_Exit\n\n\tLDY byte_RAM_7\n\tLDA EnemyEnableCollisionFlagTable, Y\n\tORA EnemyCollision - 1, X\n\tSTA EnemyCollision - 1, X\n\nELSE\nCheckEnemyTileCollision:\n\tLDY byte_RAM_8\n\tJSR sub_BANK3_BB87\n","htmlComment":"<p>Check collision attributes for the next two tiles</p>\n","htmlContent":"IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckEnemyTileCollision:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">87</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTileCollisionTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">JSR</span> CheckTileUsesCollisionType_Bank<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">BCC</span> CheckEnemyTileCollision_Exit\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyEnableCollisionFlagTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nELSE\nCheckEnemyTileCollision:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">87</span>\n","line":10152},{"comment":"check tile attributes","content":"\tLDY byte_RAM_0\n\tLDA TileCollisionAttributesTable, Y\n\tLDY byte_RAM_7\n\tAND CheckEnemyTileCollisionAttributesTable, Y\n\n\tBEQ CheckEnemyTileCollision_Exit\n\n\tLDA EnemyEnableCollisionFlagTable, Y\n\tORA EnemyCollision - 1, X\n\tSTA EnemyCollision - 1, X\nENDIF\n\nCheckEnemyTileCollision_Exit:\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tRTS\n\n","htmlComment":"<p>check tile attributes</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> TileCollisionAttributesTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">AND</span> CheckEnemyTileCollisionAttributesTable, <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">BEQ</span> CheckEnemyTileCollision_Exit\n\n\t<span class=\"token opcode property\">LDA</span> EnemyEnableCollisionFlagTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\nENDIF\n\nCheckEnemyTileCollision_Exit:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":10176},{"comment":"\nResets directional collision flags and loads collision data pointer\n\nInput\nX = enemy index\nOutput\nbyte_RAM_D = previous collision flags\nEnemyCollision = collision flags with up/down/left/right disabled\nA = collision data pointer\nX = X + 1\n","content":"ClearDirectionalCollisionFlags:\n\tINX\n\tLDA EnemyCollision - 1, X\n\tSTA byte_RAM_D\n\tAND #CollisionFlags_Damage | CollisionFlags_PlayerOnTop | CollisionFlags_PlayerInsideMaybe | CollisionFlags_80\n\tSTA EnemyCollision - 1, X\n\tLDY EnemyArray_492 - 1, X\n\tLDA byte_BANKF_F000, Y\n\nClearDirectionalCollisionFlags_Exit:\n\tRTS\n\n\nEnemyTileCollisionTable:\n\t.db $02 ; jumpthrough bottom (y-velocity < 0)\n\t.db $01 ; jumpthrough top (y-velocity > 0)\n\t.db $02 ; jumpthrough right (x-velocity < 0)\n\t.db $02 ; jumpthrough left (x-velocity > 0)\n\t.db $00 ; treat background as solid\n\t.db $00 ; treat background as solid\n\t.db $00 ; treat background as solid\n\t.db $00 ; treat background as solid\n\n\nIFDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckEnemyTileCollisionAttributesTable:\n\t.db %00001000 ; bottom (y-velocity < 0)\n\t.db %00000100 ; top (y-velocity > 0)\n\t.db %00000010 ; right (x-velocity < 0)\n\t.db %00000001 ; left (x-velocity > 0)\n\t.db %10001000 ; background-interactive bottom (y-velocity < 0)\n\t.db %01000100 ; background-interactive top (y-velocity > 0)\n\t.db %00100010 ; background-interactive right (x-velocity < 0)\n\t.db %00010001 ; background-interactive left (x-velocity > 0)\nENDIF\n\nEnemyEnableCollisionFlagTable:\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Right\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Right\n\n","htmlComment":"<p>Resets directional collision flags and loads collision data pointer</p>\n<p>Input\nX = enemy index\nOutput\nbyte_RAM_D = previous collision flags\nEnemyCollision = collision flags with up/down/left/right disabled\nA = collision data pointer\nX = X + 1</p>\n","htmlContent":"ClearDirectionalCollisionFlags:\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Damage | CollisionFlags_PlayerOnTop | CollisionFlags_PlayerInsideMaybe | CollisionFlags_<span class=\"token decimalnumber string\">80</span>\n\t<span class=\"token opcode property\">STA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">492</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANKF_F<span class=\"token decimalnumber string\">000</span>, <span class=\"token register variable\">Y</span>\n\nClearDirectionalCollisionFlags_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyTileCollisionTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; jumpthrough bottom (y-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; jumpthrough top (y-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; jumpthrough right (x-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; jumpthrough left (x-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; treat background as solid</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; treat background as solid</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; treat background as solid</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; treat background as solid</span>\n\n\nIFDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckEnemyTileCollisionAttributesTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00001000</span> <span class=\"token comment\">; bottom (y-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000100</span> <span class=\"token comment\">; top (y-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000010</span> <span class=\"token comment\">; right (x-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000001</span> <span class=\"token comment\">; left (x-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10001000</span> <span class=\"token comment\">; background-interactive bottom (y-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%01000100</span> <span class=\"token comment\">; background-interactive top (y-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00100010</span> <span class=\"token comment\">; background-interactive right (x-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00010001</span> <span class=\"token comment\">; background-interactive left (x-velocity > 0)</span>\nENDIF\n\nEnemyEnableCollisionFlagTable:\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Up\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Down\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Left\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Right\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Up\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Down\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Left\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Right\n\n","line":10205},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_B5CC:\n\tLDA #$00\n\tSTA ObjectXAcceleration, X\n\tLDA EnemyCollision, X\n\tAND #CollisionFlags_Right | CollisionFlags_Left | CollisionFlags_Down | CollisionFlags_Up\n\tSTA EnemyCollision, X\n\tLDA EnemyState, X\n\tCMP #EnemyState_BombExploding\n\tBNE loc_BANK3_B5E1\n\n\tLDY #$06\n\tBNE loc_BANK3_B5FF\n\nloc_BANK3_B5E1:\n\tCMP #$07\n\tBEQ loc_BANK3_B5F8\n\n\tLDY ObjectType, X\n\tCPY #Enemy_Egg\n\tBEQ loc_BANK3_B5F4\n\n\tCPY #$1A\n\tBEQ loc_BANK3_B5F4\n\n\tLDY EnemyArray_42F, X\n\tBNE loc_BANK3_B5F8\n\nloc_BANK3_B5F4:\n\tCMP #$01\n\tBNE ClearDirectionalCollisionFlags_Exit\n\nloc_BANK3_B5F8:\n\tLDA ObjectBeingCarriedTimer, X\n\tBNE ClearDirectionalCollisionFlags_Exit\n\n\tLDY EnemyArray_489, X\n\nloc_BANK3_B5FF:\n\tLDA unk_RAM_7128, Y\n\tSTA byte_RAM_9\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7100, Y\n\tBPL loc_BANK3_B60F\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B60F:\n\tCLC\n\tADC ObjectXLo, X\n\tSTA byte_RAM_5\n\tLDA ObjectXHi, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_1\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_B620\n\n\tSTA byte_RAM_1\n\nloc_BANK3_B620:\n\tLDA unk_RAM_713C, Y\n\tSTA byte_RAM_B\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7114, Y\n\tBPL loc_BANK3_B630\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B630:\n\tCLC\n\tADC ObjectYLo, X\n\tSTA byte_RAM_7\n\tLDA ObjectYHi, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_3\n\nloc_BANK3_B63B:\n\tSTX byte_RAM_ED\n\tTXA\n\tBNE loc_BANK3_B661\n\n\tLDA PlayerInRocket\n\tORA PlayerLock\n\tBNE loc_BANK3_B64E\n\n\tLDA EnemyState - 1, X\n\tCMP #$02\n\tBCC loc_BANK3_B651 ; branch if A < $02\n\nloc_BANK3_B64E:\n\tJMP loc_BANK3_B6F0\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>CC:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left | CollisionFlags_Down | CollisionFlags_Up\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_BombExploding\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>E<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>FF\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>E<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>F<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Egg\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$1A</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>F<span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>F<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> ClearDirectionalCollisionFlags_Exit\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>F<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> ClearDirectionalCollisionFlags_Exit\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">5</span>FF:\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7128</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7100</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">60</span>F\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">60</span>F:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">620</span>\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">620</span>:\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">713</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7114</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">630</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">630</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">63</span>B:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_ED\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">661</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerInRocket\n\t<span class=\"token opcode property\">ORA</span> PlayerLock\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">64</span>E\n\n\t<span class=\"token opcode property\">LDA</span> EnemyState - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">651</span> <span class=\"token comment\">; branch if A &#x3C; $02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">64</span>E:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>\n\n","line":10252},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B651:\n\tLDY byte_RAM_12\n\tLDA EnemyArray_42F, Y\n\tBEQ loc_BANK3_B65C\n\n\tCMP #$20\n\tBCC loc_BANK3_B64E\n\nloc_BANK3_B65C:\n\tLDY PlayerDucking\n\tJMP loc_BANK3_B6A6\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">651</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">65</span>C\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">64</span>E\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">65</span>C:\n\t<span class=\"token opcode property\">LDY</span> PlayerDucking\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>\n\n","line":10347},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B661:\n\tLDY byte_RAM_12\n\tLDA EnemyState, Y\n\tCMP #$04\n\tBEQ loc_BANK3_B671\n\n\tLDA EnemyArray_46E, Y\n\tAND #%00000100\n\tBNE loc_BANK3_B690\n\nloc_BANK3_B671:\n\tLDA EnemyState - 1, X\n\tCMP #EnemyState_BombExploding ; what does this mean for an enemy?\n\tBNE loc_BANK3_B67B\n\n\tLDY #$06\n\tBNE loc_BANK3_B6A6\n\nloc_BANK3_B67B:\n\tCMP #$07\n\tBEQ loc_BANK3_B692\n\n\tLDY ObjectType - 1, X\n\tCPY #Enemy_Egg\n\tBEQ loc_BANK3_B68E\n\n\tCPY #$1A\n\tBEQ loc_BANK3_B68E\n\n\tLDY EnemyArray_42F - 1, X\n\tBNE loc_BANK3_B692\n\nloc_BANK3_B68E:\n\tCMP #$01\n\nloc_BANK3_B690:\n\tBNE loc_BANK3_B6F0\n\nloc_BANK3_B692:\n\tLDA ObjectBeingCarriedTimer - 1, X\n\tBNE loc_BANK3_B6F0\n\n\tLDA EnemyCollision - 1, X\n\tAND #CollisionFlags_Damage\n\tBNE loc_BANK3_B6F0\n\n\tLDA EnemyArray_46E - 1, X\n\tAND #$04\n\tBNE loc_BANK3_B6F0\n\n\tLDY EnemyArray_489 - 1, X\n\nloc_BANK3_B6A6:\n\tLDA unk_RAM_7128, Y\n\tSTA byte_RAM_A\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7100, Y\n\tBPL loc_BANK3_B6B6\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B6B6:\n\tCLC\n\tADC ObjectXLo - 1, X\n\tSTA byte_RAM_6\n\tLDA ObjectXHi - 1, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_2\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_B6C7\n\n\tSTA byte_RAM_2\n\nloc_BANK3_B6C7:\n\tLDA unk_RAM_713C, Y\n\tSTA byte_RAM_C\n\tLDA #$00\n\tSTA byte_RAM_0\n\tLDA unk_RAM_7114, Y\n\tBPL loc_BANK3_B6D7\n\n\tDEC byte_RAM_0\n\nloc_BANK3_B6D7:\n\tCLC\n\tADC ObjectYLo - 1, X\n\tSTA byte_RAM_8\n\tLDA ObjectYHi - 1, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_4\n\tJSR sub_BANK3_BDC5\n\n\tBCS loc_BANK3_B6F0\n\n\tLDA byte_RAM_B\n\tPHA\n\tJSR EnemyCollisionBehavior\n\n\tPLA\n\tSTA byte_RAM_B\n\nloc_BANK3_B6F0:\n\tDEX\n\tBMI loc_BANK3_B6F6\n\n\tJMP loc_BANK3_B63B\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">661</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">671</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00000100</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">690</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">671</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyState - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_BombExploding <span class=\"token comment\">; what does this mean for an enemy?</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">67</span>B\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">67</span>B:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">692</span>\n\n\t<span class=\"token opcode property\">LDY</span> ObjectType - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Egg\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">68</span>E\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$1A</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">68</span>E\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">692</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">68</span>E:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">690</span>:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">692</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDY</span> EnemyArray_<span class=\"token decimalnumber string\">489</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7128</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_A\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7100</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>B<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>B<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>C<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>C<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">713</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">7114</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>D<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>D<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectYLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BDC<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_B\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyCollisionBehavior\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">63</span>B\n\n","line":10361},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B6F6:\n\tLDX byte_RAM_12\n\nlocret_BANK3_B6F8:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":10471},{"comment":"End of function sub_BANK3_B5CC","content":"\n","htmlComment":"<p>End of function sub_BANK3_B5CC</p>\n","htmlContent":"\n","line":10479},{"comment":"=============== S U B R O U T I N E =======================================","content":"EnemyCollisionBehavior:\n\tTXA\n\tBNE EnemyCollisionBehavior_ReadCollisionType\n\n\tLDA HoldingItem\n\tBEQ EnemyCollisionBehavior_ReadCollisionType\n\n\tLDA ObjectBeingCarriedIndex\n\tCMP byte_RAM_12\n\tBEQ locret_BANK3_B6F8\n\nEnemyCollisionBehavior_ReadCollisionType:\n\tLDY byte_RAM_12\n\tLDA ObjectType, Y\n\tTAY\n\tLDA unk_RAM_71D1, Y\n\tJSR JumpToTableAfterJump\n\n\t.dw EnemyCollisionBehavior_Enemy\n\t.dw EnemyCollisionBehavior_ProjectileItem\n\t.dw EnemyCollisionBehavior_Object\n\t.dw EnemyCollisionBehavior_POW\n\t.dw EnemyCollisionBehavior_Door\n\n\nEnemyCollisionBehavior_Door:\n\tTXA\n\tBNE EnemyCollisionBehavior_Exit\n\n\tLDA Player1JoypadPress\n\tAND #ControllerInput_Up\n\tBEQ EnemyCollisionBehavior_Exit\n\n\tLDA PlayerCollision\n\tAND #CollisionFlags_Down\n\tBEQ EnemyCollisionBehavior_Exit\n\n\tLDA byte_RAM_426\n\tCMP #$FA\n\tBCS EnemyCollisionBehavior_Exit\n\n\tLDA DoorAnimationTimer\n\tORA SubspaceDoorTimer\n\tBNE EnemyCollisionBehavior_Exit\n\n\tLDA HoldingItem\n\tBEQ loc_BANK3_B749\n\n\tLDY ObjectBeingCarriedIndex\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBNE EnemyCollisionBehavior_Exit\n\nloc_BANK3_B749:\n\tLDY byte_RAM_12\n\tLDA ObjectXLo, Y\n\tSTA PlayerXLo\n\tLDA ObjectXHi, Y\n\tSTA PlayerXHi\n\tJSR StashPlayerPosition\n\n\tLDA #TransitionType_SubSpace\n\tSTA TransitionType\n\tJMP DoorHandling_GoThroughDoor_Bank3\n\nEnemyCollisionBehavior_Exit:\n\tRTS\n\n\nEnemyCollisionBehavior_Enemy:\n\tLDY byte_RAM_12\n\tTXA\n\tBEQ CheckCollisionWithPlayer\n\n\tLDA EnemyArray_45C, Y\n\tORA EnemyArray_45C - 1, X\n\tBNE EnemyCollisionBehavior_Exit\n\n\tLDA EnemyArray_42F, Y\n\tBNE loc_BANK3_B792\n\n\tLDA EnemyState, Y\n\tCMP #EnemyState_BombExploding\n\tBEQ loc_BANK3_B792\n\n\tTXA\n\tTAY\n\tDEY\n\tLDX byte_RAM_12\n\tINX\n\tLDA EnemyState, Y\n\tCMP #EnemyState_BombExploding\n\tBEQ loc_BANK3_B792\n\n\tLDA EnemyArray_42F, Y\n\tBEQ loc_BANK3_B7E0\n\n\tLDA EnemyCollision - 1, X\n\tAND #CollisionFlags_Damage\n\tBNE loc_BANK3_B7E0\n\nloc_BANK3_B792:\n\tLDA EnemyArray_453, Y\n\tORA EnemyArray_45C, Y\n\tBNE loc_BANK3_B7D7\n\n\tLDA EnemyArray_46E, Y\n\tAND #%00001000\n\tBEQ loc_BANK3_B7A4\n\n\tJSR PlayBossHurtSound\n\nloc_BANK3_B7A4:\n\tLDA EnemyHP, Y\n\tSEC\n\tSBC #$01\n\tSTA EnemyHP, Y\n\tBMI loc_BANK3_B7BD\n\n\tJSR PlayBossHurtSound\n\n\tLDA #$21\n\tSTA EnemyArray_45C, Y\n\tLSR A\n\tSTA EnemyArray_438, Y\n\tBNE loc_BANK3_B7D7\n\nloc_BANK3_B7BD:\n\tLDA EnemyCollision, Y\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, Y\n\tLDA #$E0\n\tSTA ObjectYVelocity, Y\n\tLDA ObjectXVelocity, Y\n\tSTA byte_RAM_0\n\tASL A\n\tROR byte_RAM_0\n\tLDA byte_RAM_0\n\tSTA ObjectXVelocity, Y\n\nloc_BANK3_B7D7:\n\tLDA ObjectType - 1, X\n\tCMP #Enemy_VegetableSmall\n\tBCS loc_BANK3_B7E0\n\n\tJSR sub_BANK3_BA5D\n\nloc_BANK3_B7E0:\n\tLDX byte_RAM_ED\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"EnemyCollisionBehavior:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyCollisionBehavior_ReadCollisionType\n\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> EnemyCollisionBehavior_ReadCollisionType\n\n\t<span class=\"token opcode property\">LDA</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">6</span>F<span class=\"token decimalnumber string\">8</span>\n\nEnemyCollisionBehavior_ReadCollisionType:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">71</span>D<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\t<span class=\"token directive keyword\">.dw</span> EnemyCollisionBehavior_Enemy\n\t<span class=\"token directive keyword\">.dw</span> EnemyCollisionBehavior_ProjectileItem\n\t<span class=\"token directive keyword\">.dw</span> EnemyCollisionBehavior_Object\n\t<span class=\"token directive keyword\">.dw</span> EnemyCollisionBehavior_POW\n\t<span class=\"token directive keyword\">.dw</span> EnemyCollisionBehavior_Door\n\n\nEnemyCollisionBehavior_Door:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyCollisionBehavior_Exit\n\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Up\n\t<span class=\"token opcode property\">BEQ</span> EnemyCollisionBehavior_Exit\n\n\t<span class=\"token opcode property\">LDA</span> PlayerCollision\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BEQ</span> EnemyCollisionBehavior_Exit\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">426</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$FA</span>\n\t<span class=\"token opcode property\">BCS</span> EnemyCollisionBehavior_Exit\n\n\t<span class=\"token opcode property\">LDA</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">ORA</span> SubspaceDoorTimer\n\t<span class=\"token opcode property\">BNE</span> EnemyCollisionBehavior_Exit\n\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">749</span>\n\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Key\n\t<span class=\"token opcode property\">BNE</span> EnemyCollisionBehavior_Exit\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">749</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">JSR</span> StashPlayerPosition\n\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_SubSpace\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">JMP</span> DoorHandling_GoThroughDoor_Bank<span class=\"token decimalnumber string\">3</span>\n\nEnemyCollisionBehavior_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnemyCollisionBehavior_Enemy:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> EnemyCollisionBehavior_Exit\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">792</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_BombExploding\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">792</span>\n\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_BombExploding\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">792</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>E<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>E<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">792</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>D<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00001000</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">JSR</span> PlayBossHurtSound\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyHP, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>BD\n\n\t<span class=\"token opcode property\">JSR</span> PlayBossHurtSound\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$21</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>D<span class=\"token decimalnumber string\">7</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>BD:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>D<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectType - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>E<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">5</span>D\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">7</span>E<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_ED\n\t<span class=\"token opcode property\">RTS</span>\n","line":10481},{"comment":"---------------------------------------------------------------------------","content":"InvincibilityKill_VelocityX:\n\t.db $F8 ; to the left\n\t.db $08 ; to the right\n","htmlComment":"<hr>\n","htmlContent":"InvincibilityKill_VelocityX:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span> <span class=\"token comment\">; to the left</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span> <span class=\"token comment\">; to the right</span>\n","line":10634},{"comment":"---------------------------------------------------------------------------","content":"CheckCollisionWithPlayer:\n\tLDA byte_RAM_EE\n\tAND #CollisionFlags_Up\n\tBNE CheckCollisionWithPlayer_Exit\n","htmlComment":"<hr>\n","htmlContent":"CheckCollisionWithPlayer:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_EE\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Up\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_Exit\n","line":10638},{"comment":"check if it's a heart","content":"\tLDA ObjectType, Y\n\tBNE CheckCollisionWithPlayer_NotHeart\n","htmlComment":"<p>check if it's a heart</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NotHeart\n","line":10645},{"comment":"accept the heart into your life","content":"\tSTA EnemyState, Y\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\tLDY PlayerMaxHealth\n\tLDA PlayerHealth\n\tCLC\n\tADC #$10\n\tSTA PlayerHealth\n\tCMP PlayerHealthValueByHeartCount, Y\n\tBCC CheckCollisionWithPlayer_Exit\n\n\tJMP RestorePlayerToFullHealth\n\n","htmlComment":"<p>accept the heart into your life</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_CherryGet\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> PlayerMaxHealth\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerHealth\n\t<span class=\"token opcode property\">CMP</span> PlayerHealthValueByHeartCount, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BCC</span> CheckCollisionWithPlayer_Exit\n\n\t<span class=\"token opcode property\">JMP</span> RestorePlayerToFullHealth\n\n","line":10649},{"comment":"---------------------------------------------------------------------------","content":"CheckCollisionWithPlayer_NotHeart:\n\tCMP #Enemy_Phanto\n\tBNE CheckCollisionWithPlayer_NotPhanto\n\n\tLDY PhantoActivateTimer\n\tBNE CheckCollisionWithPlayer_Exit\n\nCheckCollisionWithPlayer_NotPhanto:\n\tCMP #Enemy_Starman\n\tBNE CheckCollisionWithPlayer_NotStarman\n\n\tLDA #$3F\n\tSTA StarInvincibilityTimer\n\tLDA #Music1_Invincible\n\tSTA MusicQueue1\n\tLDA #EnemyState_Inactive\n\tSTA EnemyState, Y\n\nCheckCollisionWithPlayer_Exit:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"CheckCollisionWithPlayer_NotHeart:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Phanto\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NotPhanto\n\n\t<span class=\"token opcode property\">LDY</span> PhantoActivateTimer\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_Exit\n\nCheckCollisionWithPlayer_NotPhanto:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Starman\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NotStarman\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">STA</span> StarInvincibilityTimer\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">1</span>_Invincible\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Inactive\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\nCheckCollisionWithPlayer_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":10663},{"comment":"---------------------------------------------------------------------------","content":"CheckCollisionWithPlayer_NotStarman:\n\tCMP #Enemy_WhaleSpout\n\tBNE CheckCollisionWithPlayer_NotWhaleSpout\n\n\tLDA EnemyVariable, Y\n\tCMP #$DC\n\tBCS CheckCollisionWithPlayer_Exit2\n\n\tLDA StarInvincibilityTimer\n\tBEQ CheckCollisionWithPlayer_NotInvincible\n\n\tLDA #$DC\n\tSTA EnemyVariable, Y\n\tLDA #$00\n\tSTA ObjectYVelocity, Y\n\nCheckCollisionWithPlayer_Exit2:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"CheckCollisionWithPlayer_NotStarman:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_WhaleSpout\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NotWhaleSpout\n\n\t<span class=\"token opcode property\">LDA</span> EnemyVariable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$DC</span>\n\t<span class=\"token opcode property\">BCS</span> CheckCollisionWithPlayer_Exit<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> StarInvincibilityTimer\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer_NotInvincible\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$DC</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\nCheckCollisionWithPlayer_Exit<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":10686},{"comment":"---------------------------------------------------------------------------","content":"CheckCollisionWithPlayer_NotWhaleSpout:\n\tCMP #Enemy_Wart\n\tBNE CheckCollisionWithPlayer_NotWart\n\n\tLDA EnemyArray_B1, X\n\tBNE CheckCollisionWithPlayer_Exit2\n\nCheckCollisionWithPlayer_NotWart:\n\tLDY StarInvincibilityTimer\n\tBEQ CheckCollisionWithPlayer_NotInvincible\n","htmlComment":"<hr>\n","htmlContent":"CheckCollisionWithPlayer_NotWhaleSpout:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Wart\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NotWart\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_Exit<span class=\"token decimalnumber string\">2</span>\n\nCheckCollisionWithPlayer_NotWart:\n\t<span class=\"token opcode property\">LDY</span> StarInvincibilityTimer\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer_NotInvincible\n","line":10707},{"comment":"player is invincible","content":"\tLDX byte_RAM_12\n\tCMP #Enemy_AutobombFire\n\tBEQ CheckCollisionWithPlayer_Poof\n\n\tCMP #Enemy_Fireball\n\tBNE CheckCollisionWithPlayer_KillEnemy\n","htmlComment":"<p>player is invincible</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_AutobombFire\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer_Poof\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Fireball\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_KillEnemy\n","line":10720},{"comment":"turn into a puff of smoke","content":"CheckCollisionWithPlayer_Poof:\n\tLDA #%00000000\n\tSTA EnemyArray_46E, X\n\tJSR EnemyBehavior_Shell_Destroy\n\n\tJMP loc_BANK3_B878\n","htmlComment":"<p>turn into a puff of smoke</p>\n","htmlContent":"CheckCollisionWithPlayer_Poof:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token binarynumber string\">#%00000000</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_Shell_Destroy\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">878</span>\n","line":10728},{"comment":"---------------------------------------------------------------------------","content":"","htmlComment":"<hr>\n","htmlContent":"","line":10736},{"comment":"die and fall off","content":"CheckCollisionWithPlayer_KillEnemy:\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tLDA InvincibilityKill_VelocityX, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$E0\n\tSTA ObjectYVelocity, X\n\tLDA EnemyCollision, X\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision, X\n\nloc_BANK3_B878:\n\tLDX byte_RAM_ED\n\tLDY byte_RAM_12\n\tRTS\n\n","htmlComment":"<p>die and fall off</p>\n","htmlContent":"CheckCollisionWithPlayer_KillEnemy:\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">LDA</span> InvincibilityKill_VelocityX, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">878</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_ED\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":10738},{"comment":"---------------------------------------------------------------------------","content":"CheckCollisionWithPlayer_NotInvincible:\n\tLDY byte_RAM_12\n\tLDA EnemyState, Y\n\tCMP #EnemyState_BombExploding\n\tBEQ CheckCollisionWithPlayer_HurtPlayer\n","htmlComment":"<hr>\n","htmlContent":"CheckCollisionWithPlayer_NotInvincible:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_BombExploding\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer_HurtPlayer\n","line":10755},{"comment":"should we damage the player for jumping on top?","content":"\tLDA EnemyArray_46E, Y\n\tAND #%00000001\n\tBNE CheckCollisionWithPlayer_HurtPlayer\n","htmlComment":"<p>should we damage the player for jumping on top?</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00000001</span>\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_HurtPlayer\n","line":10763},{"comment":"let player land on top","content":"\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND #$0B\n\tBEQ CheckCollisionWithPlayer_StandingOnHead\n\nCheckCollisionWithPlayer_HurtPlayer:\n\tJMP DamagePlayer\n\n\nCheckCollisionWithPlayer_StandingOnHead:\n\tLDA #$00\n\tSTA PlayerInAir\n\tLDX byte_RAM_12\n\tLDA EnemyCollision, X\n\tORA #CollisionFlags_PlayerOnTop\n\tSTA EnemyCollision, X\n","htmlComment":"<p>let player land on top</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> DetermineCollisionFlags\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">BEQ</span> CheckCollisionWithPlayer_StandingOnHead\n\nCheckCollisionWithPlayer_HurtPlayer:\n\t<span class=\"token opcode property\">JMP</span> DamagePlayer\n\n\nCheckCollisionWithPlayer_StandingOnHead:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerInAir\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_PlayerOnTop\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n","line":10768},{"comment":"can you even lift","content":"\tLDA EnemyArray_46E, X\n\tAND #%00000010\n\tBNE CheckCollisionWithPlayer_NoLift\n","htmlComment":"<p>can you even lift</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00000010</span>\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NoLift\n","line":10787},{"comment":"check B button","content":"\tBIT Player1JoypadPress\n\tBVC CheckCollisionWithPlayer_NoLift\n","htmlComment":"<p>check B button</p>\n","htmlContent":"\t<span class=\"token opcode property\">BIT</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">BVC</span> CheckCollisionWithPlayer_NoLift\n","line":10792},{"comment":"bail if we already have an item or are ducking","content":"\tLDA HoldingItem\n\tORA PlayerDucking\n\tBNE CheckCollisionWithPlayer_NoLift\n\n\tSTA EnemyCollision, X\n\tSTX ObjectBeingCarriedIndex\n\tSTA ObjectShakeTimer, X\n\tLDA #$07\n\tSTA ObjectBeingCarriedTimer, X\n\tJSR SetPlayerStateLifting\n","htmlComment":"<p>bail if we already have an item or are ducking</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">ORA</span> PlayerDucking\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NoLift\n\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> SetPlayerStateLifting\n","line":10796},{"comment":"leave a flying carpet behind if we're picking up pidgit","content":"\tLDA ObjectType, X\n\tCMP #Enemy_Pidgit\n\tBNE CheckCollisionWithPlayer_NoLift\n\n\tJSR CreateFlyingCarpet\n\nCheckCollisionWithPlayer_NoLift:\n\tLDX byte_RAM_ED\n\tRTS\n","htmlComment":"<p>leave a flying carpet behind if we're picking up pidgit</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Pidgit\n\t<span class=\"token opcode property\">BNE</span> CheckCollisionWithPlayer_NoLift\n\n\t<span class=\"token opcode property\">JSR</span> CreateFlyingCarpet\n\nCheckCollisionWithPlayer_NoLift:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_ED\n\t<span class=\"token opcode property\">RTS</span>\n","line":10808},{"comment":"End of function CheckCollisionWithPlayer_StandingOnHead","content":"\n","htmlComment":"<p>End of function CheckCollisionWithPlayer_StandingOnHead</p>\n","htmlContent":"\n","line":10819},{"comment":"---------------------------------------------------------------------------","content":"EnemyCollisionBehavior_Object:\n\tLDY byte_RAM_12\n\tTXA\n\tBEQ loc_BANK3_B905\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBNE loc_BANK3_B8E4\n\n\tLDA EnemyCollision, Y\n\tAND #CollisionFlags_Down\n\tBNE locret_BANK3_B902\n\nloc_BANK3_B8E4:\n\tLDA EnemyArray_42F, Y\n\tBNE loc_BANK3_B8FF\n\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND EnemyMovementDirection - 1, X\n\tBEQ loc_BANK3_B8F8\n\n\tDEX\n\tJSR EnemyBehavior_TurnAround\n\n\tLDX byte_RAM_ED\n\nloc_BANK3_B8F8:\n\tJSR sub_BANK3_BB31\n\n\tCPY #$00\n\tBEQ locret_BANK3_B902\n\nloc_BANK3_B8FF:\n\tJMP loc_BANK3_B9EA\n\n","htmlComment":"<hr>\n","htmlContent":"EnemyCollisionBehavior_Object:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">905</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Key\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">902</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">8</span>FF\n\n\t<span class=\"token opcode property\">JSR</span> DetermineCollisionFlags\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> EnemyMovementDirection - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_ED\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">8</span>F<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">902</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">8</span>FF:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>EA\n\n","line":10821},{"comment":"---------------------------------------------------------------------------","content":"locret_BANK3_B902:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">902</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":10860},{"comment":"---------------------------------------------------------------------------","content":"unk_BANK3_B903:\n\t.db $08\n\t.db $04","htmlComment":"<hr>\n","htmlContent":"unk_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">903</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>","line":10865},{"comment":"---------------------------------------------------------------------------","content":"","htmlComment":"<hr>\n","htmlContent":"","line":10869},{"comment":"collision with items that the player can stand on","content":"loc_BANK3_B905:\n\tLDA EnemyCollision, Y\n\tORA #CollisionFlags_PlayerInsideMaybe\n\tSTA EnemyCollision, Y\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND PlayerMovementDirection\n\tBEQ loc_BANK3_B919\n\n\tJSR PlayerHorizontalCollision\n\nloc_BANK3_B919:\n\tLDA byte_RAM_F\n\tAND #$04\n\tBEQ loc_BANK3_B922\n\n\tJSR CheckCollisionWithPlayer_StandingOnHead\n\nloc_BANK3_B922:\n\tJSR sub_BANK3_BB31\n\n\tCPY #$01\n\tBNE locret_BANK3_B955\n\n\tLDY byte_RAM_12\n\tLDA ObjectYVelocity, Y\n\tBEQ locret_BANK3_B955\n\n\tAND #$80\n\tASL A\n\tROL A\n\tTAY\n\tLDA byte_RAM_F\n\tAND unk_BANK3_B903, Y\n\tBEQ locret_BANK3_B955\n\n\tLDY byte_RAM_12\n\tLDA ObjectYVelocity, Y\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA ObjectYVelocity, Y\n\tLDA #$01\n\tSTA PlayerDucking\n\tLDA #$04\n\tSTA PlayerAnimationFrame\n\tLDA #$10\n\tSTA PlayerStateTimer\n\nlocret_BANK3_B955:\n\tRTS\n\nEnemyCollisionBehavior_POW:\n\tTXA\n\tBEQ locret_BANK3_B955\n\tJMP loc_BANK3_B9EA\n\nEnemyCollisionBehavior_ProjectileItem:\n\tLDY byte_RAM_12\n\tTXA\n\nloc_BANK3_B95F:\n\tBNE loc_BANK3_B993\n\n\tLDA EnemyState, Y\n\nloc_BANK3_B964:\n\tCMP #$04\n\tBNE loc_BANK3_B96E\n\n\tLDA StarInvincibilityTimer\n\tBEQ loc_BANK3_B990\n\nlocret_BANK3_B96D:\n\tRTS\n\n","htmlComment":"<p>collision with items that the player can stand on</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">905</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_PlayerInsideMaybe\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> DetermineCollisionFlags\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> PlayerMovementDirection\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">919</span>\n\n\t<span class=\"token opcode property\">JSR</span> PlayerHorizontalCollision\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">919</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">922</span>\n\n\t<span class=\"token opcode property\">JSR</span> CheckCollisionWithPlayer_StandingOnHead\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">922</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">955</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">955</span>\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">903</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">955</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDucking\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">955</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\nEnemyCollisionBehavior_POW:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">955</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>EA\n\nEnemyCollisionBehavior_ProjectileItem:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">TXA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">95</span>F:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">993</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">964</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">96</span>E\n\n\t<span class=\"token opcode property\">LDA</span> StarInvincibilityTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">990</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">96</span>D:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":10871},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B96E:\n\tJSR DetermineCollisionFlags\n\n\tLDA byte_RAM_F\n\tAND #$08\n\tBEQ loc_BANK3_B987\n\n\tLDA HoldingItem\n\tBNE locret_BANK3_B96D\n\n\tLDY byte_RAM_12\n\tSTY ObjectBeingCarriedIndex\n\tLDA #$01\n\tSTA ObjectBeingCarriedTimer, Y\n\tINC HoldingItem\n\nloc_BANK3_B987:\n\tLDA byte_RAM_F\n\tAND #$04\n\tBEQ locret_BANK3_B96D\n\n\tJMP CheckCollisionWithPlayer_StandingOnHead\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">96</span>E:\n\t<span class=\"token opcode property\">JSR</span> DetermineCollisionFlags\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">987</span>\n\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">96</span>D\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">STY</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INC</span> HoldingItem\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">987</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">96</span>D\n\n\t<span class=\"token opcode property\">JMP</span> CheckCollisionWithPlayer_StandingOnHead\n\n","line":10949},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B990:\n\tJMP DamagePlayer\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">990</span>:\n\t<span class=\"token opcode property\">JMP</span> DamagePlayer\n\n","line":10974},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B993:\n\tLDA ObjectType - 1, X\n\tCMP #Enemy_Wart\n\tBNE loc_BANK3_B9B7\n\n\tLDA EnemyTimer - 1, X\n\tBEQ locret_BANK3_B9F9\n\n\tLDA #$00\n\tSTA EnemyState, Y\n\tJSR sub_BANK3_BA5D\n\n\tLDA #$60\n\tSTA EnemyArray_45C - 1, X\n\tLSR A\n\tSTA EnemyArray_438 - 1, X\n\tLDA EnemyHP - 1, X\n\tBNE locret_BANK3_B9B6\n\n\tINC ScrollXLock\n\nlocret_BANK3_B9B6:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">993</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectType - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Wart\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>F<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">5</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyHP - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">INC</span> ScrollXLock\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":10979},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B9B7:\n\tCMP #$32\n\tBCS locret_BANK3_B9B6\n\n\tCMP #$11\n\tBNE loc_BANK3_B9CA\n\n\tLDA #$05\n\tSTA EnemyState, Y\n\tLDA #$1E\n\tSTA EnemyTimer, Y\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$32</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$11</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>CA\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1E</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11005},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_B9CA:\n\tLDA EnemyState, Y\n\tCMP #$04\n\tBEQ loc_BANK3_B9EC\n\n\tLDA ObjectType, Y\n\tCMP #Enemy_Shell\n\tBEQ loc_BANK3_B9EA\n\n\tLDA #$E8\n\tSTA ObjectYVelocity, Y\n\tSTX byte_RAM_0\n\tLDX ObjectXVelocity, Y\n\tBMI loc_BANK3_B9E5\n\n\tLDA #$18\n\nloc_BANK3_B9E5:\n\tSTA ObjectXVelocity, Y\n\tLDX byte_RAM_0\n\nloc_BANK3_B9EA:\n\tLDY byte_RAM_12\n\nloc_BANK3_B9EC:\n\tJSR sub_BANK3_BA5D\n\n\tBNE locret_BANK3_B9F9\n\n\tLDA ObjectXVelocity - 1, X\n\tASL A\n\tROR ObjectXVelocity - 1, X\n\tASL A\n\tROR ObjectXVelocity - 1, X\n\nlocret_BANK3_B9F9:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>CA:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>EC\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Shell\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>EA\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E8</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDX</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>E<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$18</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>E<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>EA:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>EC:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">5</span>D\n\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>F<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROR</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_B<span class=\"token decimalnumber string\">9</span>F<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11020},{"comment":"---------------------------------------------------------------------------","content":"DamagePlayer:\n\tLDA DamageInvulnTime\n\tBNE locret_BANK3_BA31\n\n\tLDA PlayerHealth\n\tSEC\n\tSBC #$10\n\tBCC loc_BANK3_BA32\n\n\tSTA PlayerHealth\n\tLDY #$7F\n\tSTY DamageInvulnTime\n\tLDY #$00\n\tSTY PlayerYVelocity\n\tSTY PlayerXVelocity\n\tCMP #$10\n\tBCC loc_BANK3_BA2C\n\n\tLDA PlayerScreenX\n\tSEC\n\tSBC SpriteTempScreenX\n\tASL A\n\tASL A\n\tSTA PlayerXVelocity\n\tLDA #$C0\n\tLDY PlayerYVelocity\n\tBPL loc_BANK3_BA2A\n\n\tLDA #$00\n\nloc_BANK3_BA2A:\n\tSTA PlayerYVelocity\n\nloc_BANK3_BA2C:\n\tLDA #DPCM_PlayerHurt\n\tSTA DPCMQueue\n\nlocret_BANK3_BA31:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"DamagePlayer:\n\t<span class=\"token opcode property\">LDA</span> DamageInvulnTime\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">31</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">32</span>\n\n\t<span class=\"token opcode property\">STA</span> PlayerHealth\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">STY</span> DamageInvulnTime\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STY</span> PlayerYVelocity\n\t<span class=\"token opcode property\">STY</span> PlayerXVelocity\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">2</span>C\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenX\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">LDY</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">2</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">2</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">2</span>C:\n\t<span class=\"token opcode property\">LDA</span> #DPCM_PlayerHurt\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">31</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11060},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_BA32:\n\tTXA\n\nloc_BANK3_BA33:\n\tPHA\n\tLDX byte_RAM_12\n\tLDA ObjectType, X\n\tCMP #Enemy_BeezoDiving\n\tBCS loc_BANK3_BA48\n\n\tJSR EnemyFindWhichSidePlayerIsOn\n\n\tINY\n\tTYA\n\tCMP EnemyMovementDirection, X\n\tBEQ loc_BANK3_BA48\n\n\tJSR EnemyBehavior_TurnAround\n\nloc_BANK3_BA48:\n\tPLA\n\tTAX\n\tLDA #$C0\n\tSTA PlayerYVelocity\n\nloc_BANK3_BA4E:\n\tLDA #$20\n\tSTA PlayerStateTimer\n\tLDY byte_RAM_12\n\tBMI loc_BANK3_BA5A\n\n\tLSR A\n\tSTA EnemyArray_438, Y\n\nloc_BANK3_BA5A:\n\tJMP KillPlayer\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">32</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">33</span>:\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BeezoDiving\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">48</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyFindWhichSidePlayerIsOn\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">CMP</span> EnemyMovementDirection, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">48</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyBehavior_TurnAround\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">48</span>:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">4</span>E:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">5</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">5</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JMP</span> KillPlayer\n","line":11102},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":11141},{"comment":"Damage enemy","content":"sub_BANK3_BA5D:\n\tLDA EnemyArray_453 - 1, X\n\tORA EnemyArray_45C - 1, X\n\tBNE locret_BANK3_BA94\n\n\tLDA EnemyArray_46E - 1, X\n\tAND #Enemy_Ostro\n\tBEQ EnemyTakeDamage\n\n\tJSR PlayBossHurtSound\n\nEnemyTakeDamage:\n\tDEC EnemyHP - 1, X ; Subtract hit point\n\tBMI EnemyKnockout\n\n\tLDA #$21 ; Flash\n\tSTA EnemyArray_45C - 1, X\n\tLSR A\n\nloc_BANK3_BA7A:\n\tSTA EnemyArray_438 - 1, X\n\n","htmlComment":"<p>Damage enemy</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">5</span>D:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">94</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> #Enemy_Ostro\n\t<span class=\"token opcode property\">BEQ</span> EnemyTakeDamage\n\n\t<span class=\"token opcode property\">JSR</span> PlayBossHurtSound\n\nEnemyTakeDamage:\n\t<span class=\"token opcode property\">DEC</span> EnemyHP - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span> <span class=\"token comment\">; Subtract hit point</span>\n\t<span class=\"token opcode property\">BMI</span> EnemyKnockout\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$21</span> <span class=\"token comment\">; Flash</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">7</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\n","line":11143},{"comment":"End of function sub_BANK3_BA5D","content":"PlayBossHurtSound:\n\tLDA #DPCM_BossHurt\n\tSTA DPCMQueue\n\tRTS\n\n","htmlComment":"<p>End of function sub_BANK3_BA5D</p>\n","htmlContent":"PlayBossHurtSound:\n\t<span class=\"token opcode property\">LDA</span> #DPCM_BossHurt\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11166},{"comment":"---------------------------------------------------------------------------","content":"EnemyKnockout:\n\tLDA EnemyCollision - 1, X\n\tORA #CollisionFlags_Damage\n\tSTA EnemyCollision - 1, X\n\tLDA #$E0\n\tSTA ObjectYVelocity - 1, X\n\tLDA ObjectXVelocity, Y\n\tSTA ObjectXVelocity - 1, X\n\tLDA #$00\n\nlocret_BANK3_BA94:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"EnemyKnockout:\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> #CollisionFlags_Damage\n\t<span class=\"token opcode property\">STA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BA<span class=\"token decimalnumber string\">94</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":11173},{"comment":"\nDetermines the collision flags for two objects\n\nInput:\nRAM_12 = main object\nX = collision object (usually player?)\nOutput:\nbyte_RAM_F = collision flags\n","content":"DetermineCollisionFlags:\n\tLDA #$00\n\tSTA byte_RAM_F\n\tLDY byte_RAM_12 ; stash Y\n\tLDA byte_RAM_427\n\tCMP #$F6\n\tBCS DetermineCollisionFlags_Y\n\n\tLDA ObjectXLo, Y\n\tLDY #CollisionFlags_Left\n\tCMP ObjectXLo - 1, X\n\tBMI DetermineCollisionFlags_SetFlagsX\n\n\tLDY #CollisionFlags_Right\n\nDetermineCollisionFlags_SetFlagsX:\n\tSTY byte_RAM_F\n\tTYA\n\tAND EnemyMovementDirection - 1, X\n\tBEQ DetermineCollisionFlags_ExitX\n\n\tLDY byte_RAM_12 ; restore Y\n\tLDA unk_RAM_4A4, Y\n\tBNE DetermineCollisionFlags_ExitX\n","htmlComment":"<p>Determines the collision flags for two objects</p>\n<p>Input:\nRAM_12 = main object\nX = collision object (usually player?)\nOutput:\nbyte_RAM_F = collision flags</p>\n","htmlContent":"DetermineCollisionFlags:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span> <span class=\"token comment\">; stash Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">427</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F6</span>\n\t<span class=\"token opcode property\">BCS</span> DetermineCollisionFlags_Y\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> #CollisionFlags_Left\n\t<span class=\"token opcode property\">CMP</span> ObjectXLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> DetermineCollisionFlags_SetFlagsX\n\n\t<span class=\"token opcode property\">LDY</span> #CollisionFlags_Right\n\nDetermineCollisionFlags_SetFlagsX:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> EnemyMovementDirection - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> DetermineCollisionFlags_ExitX\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span> <span class=\"token comment\">; restore Y</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> DetermineCollisionFlags_ExitX\n","line":11196},{"comment":"@TODO: Looks like a way to make objects move together horizontally","content":"\tLDA ObjectXVelocity, Y\n\tSTA ObjectXAcceleration - 1, X\n\nDetermineCollisionFlags_ExitX:\n\tRTS\n\n\nDetermineCollisionFlags_Y:\n\tLDA ObjectYLo, Y\n\tCPX #$01\n\tBCS loc_BANK3_BAD1\n\n\tPHA\n\tLDY PlayerDucking\n\tPLA\n\tSEC\n\tSBC byte_BANK3_BB2F, Y\n\nloc_BANK3_BAD1:\n\tCMP ObjectYLo - 1, X\n\tBMI loc_BANK3_BB02\n\n\tLDA ObjectYVelocity - 1, X\n\tBMI DetermineCollisionFlags_ExitY\n\n\tLDY byte_RAM_12\n\tLDA unk_RAM_4A4, Y\n\tBNE loc_BANK3_BAE6\n\n\tLDA ObjectXVelocity, Y\n\tSTA ObjectXAcceleration - 1, X\n\nloc_BANK3_BAE6:\n\tLDY #$00\n\tINC byte_RAM_427\n\tINC byte_RAM_427\n\tBPL loc_BANK3_BAF1\n\n\tDEY\n\nloc_BANK3_BAF1:\n\tLDA byte_RAM_427\n\tCLC\n\tADC ObjectYLo - 1, X\n\tSTA ObjectYLo - 1, X\n\tTYA\n\tADC ObjectYHi - 1, X\n\tSTA ObjectYHi - 1, X\n\tLDY #CollisionFlags_Down\n\tBNE loc_BANK3_BB13\n\nloc_BANK3_BB02:\n\tLDA ObjectYVelocity - 1, X\n\tBEQ loc_BANK3_BB11\n\n\tBPL DetermineCollisionFlags_ExitY\n\n\tLDY byte_RAM_12\n\tLDA ObjectType, Y\n\tCMP #Enemy_Coin\n\tBEQ DetermineCollisionFlags_ExitY\n\nloc_BANK3_BB11:\n\tLDY #CollisionFlags_Up\n\nloc_BANK3_BB13:\n\tSTY byte_RAM_F\n\tLDY byte_RAM_12\n\tLDA unk_RAM_4A4, Y\n\tBNE loc_BANK3_BB22\n","htmlComment":"<p>@TODO: Looks like a way to make objects move together horizontally</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nDetermineCollisionFlags_ExitX:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDetermineCollisionFlags_Y:\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BAD<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDY</span> PlayerDucking\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">2</span>F, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BAD<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">CMP</span> ObjectYLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">02</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> DetermineCollisionFlags_ExitY\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BAE<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BAE<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">427</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">427</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BAF<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BAF<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">427</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectYLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectYHi - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">13</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">02</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">11</span>\n\n\t<span class=\"token opcode property\">BPL</span> DetermineCollisionFlags_ExitY\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Coin\n\t<span class=\"token opcode property\">BEQ</span> DetermineCollisionFlags_ExitY\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">11</span>:\n\t<span class=\"token opcode property\">LDY</span> #CollisionFlags_Up\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">13</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> unk_RAM_<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">22</span>\n","line":11222},{"comment":"@TODO: Looks like a way to make objects move together vertically","content":"\tLDA ObjectYVelocity, Y\n\tSTA ObjectYAcceleration - 1, X\n\nloc_BANK3_BB22:\n\tLDA #$00\n\tSTA ObjectYVelocity - 1, X\n\tLDA ObjectYSubpixel, Y\n\tSTA ObjectYSubpixel - 1, X\n\tINC ObjectAnimationTimer - 1, X\n\nDetermineCollisionFlags_ExitY:\n\tRTS\n\n\nbyte_BANK3_BB2F:\n\t.db $0B\n\t.db $10\n\n","htmlComment":"<p>@TODO: Looks like a way to make objects move together vertically</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYAcceleration - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">22</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYSubpixel, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYSubpixel - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectAnimationTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nDetermineCollisionFlags_ExitY:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">2</span>F:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\n","line":11294},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BB31:\n\tLDY #$00\n\tLDA EnemyCollision - 1, X\n\tORA byte_RAM_F\n\tAND #$0C\n\tCMP #$0C\n\tBEQ loc_BANK3_BB48\n\n\tLDA EnemyCollision - 1, X\n\tORA byte_RAM_F\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tCMP #CollisionFlags_Right | CollisionFlags_Left\n\tBNE locret_BANK3_BB49\n\n\tINY\n\nloc_BANK3_BB48:\n\tINY\n\nlocret_BANK3_BB49:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">31</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">48</span>\n\n\t<span class=\"token opcode property\">LDA</span> EnemyCollision - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">CMP</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">49</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">48</span>:\n\t<span class=\"token opcode property\">INY</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">49</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":11313},{"comment":"End of function sub_BANK3_BB31","content":"","htmlComment":"<p>End of function sub_BANK3_BB31</p>\n","htmlContent":"","line":11337},{"comment":"---------------------------------------------------------------------------","content":"_unused_BANK3_BB4A:\n\t.db $FF ; May not be used, but wasn't marked as data\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\t.db $FF\n\nbyte_BANK3_BB50:\n\t.db $C2\n\t.db $D4\n\t.db $C3\n\t.db $C4\n\t.db $07\n\t.db $80\n\t.db $81\n\t.db $94\n\t.db $95\n\t.db $17\n\n","htmlComment":"<hr>\n","htmlContent":"_unused_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">4</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span> <span class=\"token comment\">; May not be used, but wasn't marked as data</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">50</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$07</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$94</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$95</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$17</span>\n\n","line":11339},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BB5A:\n\tJSR sub_BANK3_BB87\n\n\tLDA byte_RAM_0\n\n\tLDY #$09\nloc_BANK3_BB61:\n\tCMP byte_BANK3_BB50, Y\n\tBEQ locret_BANK3_BB6A\n\tDEY\n\tBPL loc_BANK3_BB61\n\n\tCLC\n\nlocret_BANK3_BB6A:\n\tRTS\n\n\nItemCarryYOffsets:\n\t.db $F9\n\t.db $FF\n\t.db $00\n\t.db $08\n\t.db $0C\n\t.db $18\n\t.db $1A\n\t.db $01\n\t.db $06\n\t.db $0A\n\t.db $0C\n\t.db $18\n\t.db $1A\n\t.db $1C\n\t.db $FF\n\t.db $FF\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">5</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">87</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$09</span>\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">61</span>:\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">50</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">6</span><span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">61</span>\n\n\t<span class=\"token opcode property\">CLC</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">6</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nItemCarryYOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F9</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\n\n","line":11360},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BB87:\n\tTXA\n\tPHA\n\n\tLDA #$00\n\tSTA byte_RAM_0\n\tSTA byte_RAM_1\n\tLDA byte_BANKF_F011, Y\n\tBPL loc_BANK3_BB96\n\n\tDEC byte_RAM_0\n\nloc_BANK3_BB96:\n\tCLC\n\tADC ObjectXLo - 1, X\n\tAND #$F0\n\tSTA byte_RAM_5\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA ObjectXHi - 1, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_BBB5\n\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\nloc_BANK3_BBB5:\n\tLDA byte_BANKF_F055, Y\n\tBPL loc_BANK3_BBBC\n\n\tDEC byte_RAM_1\n\nloc_BANK3_BBBC:\n\tCLC\n\tADC ObjectYLo - 1, X\n\tAND #$F0\n\tSTA byte_RAM_6\n\tSTA byte_RAM_E6\n\tLDA ObjectYHi - 1, X\n\tADC byte_RAM_1\n\tSTA byte_RAM_1\n\tSTA byte_RAM_4\n\tJSR sub_BANK3_BC2E\n\n\tBCC loc_BANK3_BBD6\n\n\tLDA #$00\n\tBEQ loc_BANK3_BBDD\n\nloc_BANK3_BBD6:\n\tJSR SetTileOffsetAndAreaPageAddr\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\nloc_BANK3_BBDD:\n\tSTA byte_RAM_0\n\tPLA\n\tTAX\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">87</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANKF_F<span class=\"token decimalnumber string\">011</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">96</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BB<span class=\"token decimalnumber string\">96</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BBB<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BBB<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_BANKF_F<span class=\"token decimalnumber string\">055</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BBBC\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BBBC:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectYLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">2</span>E\n\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BBD<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BBDD\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BBD<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BBDD:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11411},{"comment":"\nCheck whether a tile should use the given collision handler type\n\nInput\nA = tile ID\nY = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)\nOutput\nC = whether or not collision type Y is relevant\n","content":"CheckTileUsesCollisionType_Bank3:\n\tPHA ; stash tile ID for later\n","htmlComment":"<p>Check whether a tile should use the given collision handler type</p>\n<p>Input\nA = tile ID\nY = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)\nOutput\nC = whether or not collision type Y is relevant</p>\n","htmlContent":"CheckTileUsesCollisionType_Bank<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">PHA</span> <span class=\"token comment\">; stash tile ID for later</span>\n","line":11491},{"comment":"determine which tile table to use (0-3)","content":"\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n","htmlComment":"<p>determine which tile table to use (0-3)</p>\n","htmlContent":"\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n","line":11495},{"comment":"add the offset for the type of collision we're checking","content":"\tADC TileGroupTable_Bank3, Y\n\tTAY\n","htmlComment":"<p>add the offset for the type of collision we're checking</p>\n","htmlContent":"\t<span class=\"token opcode property\">ADC</span> TileGroupTable_Bank<span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n","line":11501},{"comment":"check which side of the tile ID pivot we're on","content":"\tPLA\n\tCMP TileSolidnessTable, Y\n\tRTS\n\n","htmlComment":"<p>check which side of the tile ID pivot we're on</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">CMP</span> TileSolidnessTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11505},{"comment":"\nThese map the two high bits of a tile to offets in TileSolidnessTable\n","content":"TileGroupTable_Bank3:\n\t.db $00 ; solid to mushroom blocks\n\t.db $04 ; solid on top\n\t.db $08 ; solid on all sides\n\n\nDoorHandling_GoThroughDoor_Bank3:\n\tINC DoorAnimationTimer\n\tINC PlayerLock\n\tJSR SnapPlayerToTile_Bank3\n\n\tLDA #DPCM_DoorOpenBombBom\n\tSTA DPCMQueue\n\tRTS\n\n","htmlComment":"<p>These map the two high bits of a tile to offets in TileSolidnessTable</p>\n","htmlContent":"TileGroupTable_Bank<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; solid to mushroom blocks</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; solid on top</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span> <span class=\"token comment\">; solid on all sides</span>\n\n\nDoorHandling_GoThroughDoor_Bank<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">INC</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">INC</span> PlayerLock\n\t<span class=\"token opcode property\">JSR</span> SnapPlayerToTile_Bank<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_DoorOpenBombBom\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11513},{"comment":"\nChecks horizontal collision with the player and stops them if necessary\n","content":"PlayerHorizontalCollision:\n\tLDX #$00\n\tLDY PlayerMovementDirection\n\tLDA PlayerXVelocity\n\tEOR PlayerCollisionResultTable - 1, Y\n\tBPL loc_BANK3_BC10\n\n\tSTX PlayerXVelocity\n\nloc_BANK3_BC10:\n\tLDA PlayerXAcceleration\n\tEOR PlayerCollisionResultTable - 1, Y\n\tBPL loc_BANK3_BC1B\n\n\tSTX PlayerXAcceleration\n\nloc_BANK3_BC1B:\n\tSTX PlayerXSubpixel\n\nlocret_BANK3_BC1E:\n\tRTS\n\n","htmlComment":"<p>Checks horizontal collision with the player and stops them if necessary</p>\n","htmlContent":"PlayerHorizontalCollision:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDY</span> PlayerMovementDirection\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">EOR</span> PlayerCollisionResultTable - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">10</span>\n\n\t<span class=\"token opcode property\">STX</span> PlayerXVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">10</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerXAcceleration\n\t<span class=\"token opcode property\">EOR</span> PlayerCollisionResultTable - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">1</span>B\n\n\t<span class=\"token opcode property\">STX</span> PlayerXAcceleration\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">1</span>B:\n\t<span class=\"token opcode property\">STX</span> PlayerXSubpixel\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">1</span>E:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11532},{"comment":"\nSet the player state to lifting and Kick off the lifting animation\n","content":"SetPlayerStateLifting:\n\tLDA #PlayerState_Lifting\n\tSTA PlayerState\n\tLDA #$06\n\tSTA PlayerStateTimer\n\tLDA #$08\n\tSTA PlayerAnimationFrame\n\tINC HoldingItem\n\tRTS\n\n","htmlComment":"<p>Set the player state to lifting and Kick off the lifting animation</p>\n","htmlContent":"SetPlayerStateLifting:\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_Lifting\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">INC</span> HoldingItem\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11558},{"comment":"\n@TODO: Figure out what this does exactly\n","content":"sub_BANK3_BC2E:\n\tLDY byte_RAM_1\n\tLDA byte_RAM_E6\n\tJSR sub_BANK3_BD6B\n\n\tSTY byte_RAM_1\n\tSTA byte_RAM_E6\n\tLDY IsHorizontalLevel\n\tLDA byte_RAM_1, Y\n\tSTA byte_RAM_E8\n\tLDA byte_RAM_2\n\tCMP byte_BANK3_BC4D + 1, Y\n\tBCS locret_BANK3_BC4C\n\n\tLDA byte_RAM_1\n\tCMP byte_BANK3_BC4D, Y\n\nlocret_BANK3_BC4C:\n\tRTS\n\n\nbyte_BANK3_BC4D:\n\t.db $0A\n\t.db $01\n\t.db $0B\n\n","htmlComment":"<p>@TODO: Figure out what this does exactly</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">2</span>E:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">6</span>B\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">4</span>D + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">4</span>C\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">4</span>D, <span class=\"token register variable\">Y</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">4</span>C:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">4</span>D:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0B</span>\n\n","line":11572},{"comment":"\nReplaces a tile when something is thrown\n\nInput\nA = target tile\nX = enemy index of object being thrown\n","content":"ReplaceTile:\n\tPHA\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$08\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA ObjectXHi, X\n\tLDY IsHorizontalLevel\n\tBEQ ReplaceTile_StoreXHi\n\n\tADC #$00\n\nReplaceTile_StoreXHi:\n\tSTA byte_RAM_2\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA byte_RAM_E6\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA byte_RAM_1\n\tJSR sub_BANK3_BC2E\n\n\tPLA\n\tBCS locret_BANK3_BC1E\n\n\tSTX byte_RAM_3\n\tPHA\n\tJSR SetTileOffsetAndAreaPageAddr\n\n\tPLA\n\tLDY byte_RAM_E7\n\tSTA (byte_RAM_1), Y\n\tPHA\n\tLDX byte_RAM_300\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tTYA\n\tAND #$F0\n\tASL A\n\tROL PPUBuffer_301, X\n\tASL A\n\tROL PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 1, X\n\tTYA\n\tAND #$0F\n\tASL A\n\n\tADC PPUBuffer_301 + 1, X\n\tSTA PPUBuffer_301 + 1, X\n\tCLC\n\tADC #$20\n\tSTA PPUBuffer_301 + 6, X\n\tLDA IsHorizontalLevel\n\tASL A\n\tTAY\n\tLDA byte_RAM_1\n\tAND #$10\n\tBNE loc_BANK3_BCBA\n\n\tINY\n\nloc_BANK3_BCBA:\n\tLDA unk_BANK3_BD0B, Y\n\tCLC\n\tADC PPUBuffer_301, X\n\tSTA PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 5, X\n\tLDA #$02\n\tSTA PPUBuffer_301 + 2, X\n\tSTA PPUBuffer_301 + 7, X\n\tPLA\n\tPHA\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\tPLA\n\tASL A\n\tASL A\n\tTAY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 3, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 4, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 8, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 9, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 10, X\n\tTXA\n\tCLC\n\tADC #$A\n\tSTA byte_RAM_300\n\tLDX byte_RAM_3\n\tRTS\n\n","htmlComment":"<p>Replaces a tile when something is thrown</p>\n<p>Input\nA = target tile\nX = enemy index of object being thrown</p>\n","htmlContent":"ReplaceTile:\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> ReplaceTile_StoreXHi\n\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\nReplaceTile_StoreXHi:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">2</span>E\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BC<span class=\"token decimalnumber string\">1</span>E\n\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">ADC</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BCBA\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BCBA:\n\t<span class=\"token opcode property\">LDA</span> unk_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">0</span>B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">10</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> #$<span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11606},{"comment":"Another byte of PPU high addresses for horiz/vert levels","content":"unk_BANK3_BD0B:\n\t.db $20\n\t.db $28\n\t.db $20\n\t.db $24\n\n\nStashPlayerPosition:\n\tLDA InSubspaceOrJar\n\tBNE StashPlayerPosition_Exit\n\n\tLDA PlayerXHi\n\tSTA PlayerXHi_Backup\n\tLDA PlayerXLo\n\tSTA PlayerXLo_Backup\n\tLDA PlayerYHi\n\tSTA PlayerYHi_Backup\n\tLDA PlayerYLo\n\tSTA PlayerYLo_Backup\n\nStashPlayerPosition_Exit:\n\tRTS\n\n","htmlComment":"<p>Another byte of PPU high addresses for horiz/vert levels</p>\n","htmlContent":"unk_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">0</span>B:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$24</span>\n\n\nStashPlayerPosition:\n\t<span class=\"token opcode property\">LDA</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">BNE</span> StashPlayerPosition_Exit\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> PlayerXHi_Backup\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">STA</span> PlayerXLo_Backup\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">STA</span> PlayerYHi_Backup\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> PlayerYLo_Backup\n\nStashPlayerPosition_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11721},{"comment":"\nUpdates the area page and tile placement offset @TODO\n\nInput\nbyte_RAM_E8 = area page\nbyte_RAM_E5 = tile placement offset shift\nbyte_RAM_E6 = previous tile placement offset\nOutput\nRAM_1 = low byte of decoded level data RAM\nRAM_2 = low byte of decoded level data RAM\nbyte_RAM_E7 = target tile placement offset\n","content":"SetTileOffsetAndAreaPageAddr:\n\tLDX byte_RAM_E8\n\tJSR SetAreaPageAddr\n\n\tLDA byte_RAM_E6\n\tCLC\n\tADC byte_RAM_E5\n\tSTA byte_RAM_E7\n\tRTS\n\n\nDecodedLevelPageStartLo:\n\t.db <DecodedLevelData\n\t.db <(DecodedLevelData+$00F0)\n\t.db <(DecodedLevelData+$01E0)\n\t.db <(DecodedLevelData+$02D0)\n\t.db <(DecodedLevelData+$03C0)\n\t.db <(DecodedLevelData+$04B0)\n\t.db <(DecodedLevelData+$05A0)\n\t.db <(DecodedLevelData+$0690)\n\t.db <(DecodedLevelData+$0780)\n\t.db <(DecodedLevelData+$0870)\n\t.db <(SubAreaTileLayout)\n\nDecodedLevelPageStartHi:\n\t.db >DecodedLevelData\n\t.db >(DecodedLevelData+$00F0)\n\t.db >(DecodedLevelData+$01E0)\n\t.db >(DecodedLevelData+$02D0)\n\t.db >(DecodedLevelData+$03C0)\n\t.db >(DecodedLevelData+$04B0)\n\t.db >(DecodedLevelData+$05A0)\n\t.db >(DecodedLevelData+$0690)\n\t.db >(DecodedLevelData+$0780)\n\t.db >(DecodedLevelData+$0870)\n\t.db >(SubAreaTileLayout)\n\n\n","htmlComment":"<p>Updates the area page and tile placement offset @TODO</p>\n<p>Input\nbyte_RAM_E8 = area page\nbyte_RAM_E5 = tile placement offset shift\nbyte_RAM_E6 = previous tile placement offset\nOutput\nRAM_1 = low byte of decoded level data RAM\nRAM_2 = low byte of decoded level data RAM\nbyte_RAM_E7 = target tile placement offset</p>\n","htmlContent":"SetTileOffsetAndAreaPageAddr:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> SetAreaPageAddr\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDecodedLevelPageStartLo:\n\t<span class=\"token directive keyword\">.db</span> &#x3C;DecodedLevelData\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$00F0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$01E0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$02D0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$03C0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$04B0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$05A0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$0690</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$0780</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$0870</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(SubAreaTileLayout)\n\nDecodedLevelPageStartHi:\n\t<span class=\"token directive keyword\">.db</span> >DecodedLevelData\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$00F0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$01E0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$02D0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$03C0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$04B0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$05A0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$0690</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$0780</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$0870</span>)\n\t<span class=\"token directive keyword\">.db</span> >(SubAreaTileLayout)\n\n\n","line":11757},{"comment":"\nUpdates the area page that we're reading tiles from\n\nInput\nX = area page\nOutput\nbyte_RAM_1 = low byte of decoded level data RAM\nbyte_RAM_2 = low byte of decoded level data RAM\n","content":"SetAreaPageAddr:\n\tLDA DecodedLevelPageStartLo, X\n\tSTA byte_RAM_1\n\tLDA DecodedLevelPageStartHi, X\n\tSTA byte_RAM_2\n\tRTS\n\n\nPlayerCollisionResultTable:\n\t.db CollisionFlags_80\n\t.db CollisionFlags_00\n","htmlComment":"<p>Updates the area page that we're reading tiles from</p>\n<p>Input\nX = area page\nOutput\nbyte_RAM_1 = low byte of decoded level data RAM\nbyte_RAM_2 = low byte of decoded level data RAM</p>\n","htmlContent":"SetAreaPageAddr:\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPlayerCollisionResultTable:\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_<span class=\"token decimalnumber string\">80</span>\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_<span class=\"token decimalnumber string\">00</span>\n","line":11805},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":11818},{"comment":"\nNote: Door animation code copied from Bank 0\n\nSnaps the player to the closest tile (for entering doors and jars)\n","content":"SnapPlayerToTile_Bank3:\n\tLDA PlayerXLo\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA PlayerXLo\n\tBCC SnapPlayerToTile_Exit_Bank3\n\n\tLDA IsHorizontalLevel\n\tBEQ SnapPlayerToTile_Exit_Bank3\n\n\tINC PlayerXHi\n\nSnapPlayerToTile_Exit_Bank3:\n\tRTS\n\n\n","htmlComment":"<p>Note: Door animation code copied from Bank 0</p>\n<p>Snaps the player to the closest tile (for entering doors and jars)</p>\n","htmlContent":"SnapPlayerToTile_Bank<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">BCC</span> SnapPlayerToTile_Exit_Bank<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> SnapPlayerToTile_Exit_Bank<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">INC</span> PlayerXHi\n\nSnapPlayerToTile_Exit_Bank<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":11824},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BD6B:\n\tSTA byte_RAM_F\n\tTYA\n\tBMI locret_BANK3_BD81\n\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCLC\n\tADC byte_RAM_F\n\tBCS loc_BANK3_BD7D\n\n\tCMP #$F0\n\tBCC locret_BANK3_BD81\n\nloc_BANK3_BD7D:\n\tCLC\n\tADC #$10\n\tINY\n\nlocret_BANK3_BD81:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">6</span>B:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">81</span>\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_F\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">7</span>D\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BCC</span> locret_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">81</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">7</span>D:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">INY</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">81</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":11842},{"comment":"End of function sub_BANK3_BD6B","content":"\n","htmlComment":"<p>End of function sub_BANK3_BD6B</p>\n","htmlContent":"\n","line":11868},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BD82:\n\tLDA byte_RAM_5, Y\n\tSEC\n\tSBC byte_RAM_6, Y\n\tBPL loc_BANK3_BD91\n\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tDEX\n\nloc_BANK3_BD91:\n\tSEC\n\tSBC byte_RAM_9, X\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">82</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">91</span>\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">DEX</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">91</span>:\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":11870},{"comment":"End of function sub_BANK3_BD82","content":"\n","htmlComment":"<p>End of function sub_BANK3_BD82</p>\n","htmlContent":"\n","line":11888},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BD95:\n\tLDA byte_RAM_5, Y\n\tSEC\n\tSBC byte_RAM_6, Y\n\tSTA byte_RAM_6, Y\n\tLDA byte_RAM_1, Y\n\tSBC byte_RAM_2, Y\n\tBPL loc_BANK3_BDB9\n\n\tEOR #$FF\n\tPHA\n\tLDA byte_RAM_6, Y\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\tSTA byte_RAM_6, Y\n\tPLA\n\tADC #$00\n\tDEX\n\nloc_BANK3_BDB9:\n\tCMP #$00\n\tBEQ loc_BANK3_BDBF\n\n\tSEC\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">95</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDB<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">DEX</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BDB<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDBF\n\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":11890},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_BDBF:\n\tLDA byte_RAM_6, Y\n\tSBC byte_RAM_9, X\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_BDBF:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":11919},{"comment":"End of function sub_BANK3_BD95","content":"\n","htmlComment":"<p>End of function sub_BANK3_BD95</p>\n","htmlContent":"\n","line":11926},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK3_BDC5:\n\tTXA\n\tPHA\n\tLDY #$02\n\nloc_BANK3_BDC9:\n\tTYA\n\tTAX\n\tINX\n\tCPY #$00\n\tBNE loc_BANK3_BDDA\n\n\tLDA IsHorizontalLevel\n\tBNE loc_BANK3_BDDA\n\n\tJSR sub_BANK3_BD82\n\n\tJMP loc_BANK3_BDDD\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">3</span>_BDC<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BDC<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDDA\n\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDDA\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">82</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDDD\n\n","line":11928},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK3_BDDA:\n\tJSR sub_BANK3_BD95\n\nloc_BANK3_BDDD:\n\tBCS loc_BANK3_BDEC\n\n\tPHA\n\tTYA\n\tLSR A\n\tTAX\n\tPLA\n\tSTA byte_RAM_426, X\n\tDEY\n\tDEY\n\tBPL loc_BANK3_BDC9\n\n\tCLC\n\nloc_BANK3_BDEC:\n\tPLA\n\tTAX\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">3</span>_BDDA:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">3</span>_BD<span class=\"token decimalnumber string\">95</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BDDD:\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDEC\n\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">426</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">3</span>_BDC<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">CLC</span>\n\nloc_BANK<span class=\"token decimalnumber string\">3</span>_BDEC:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":11949},{"comment":"End of function sub_BANK3_BDC5","content":"","htmlComment":"<p>End of function sub_BANK3_BDC5</p>\n","htmlContent":"","line":11974},{"comment":"---------------------------------------------------------------------------","content":"HealthBarTiles:\n\t.db $BA ; 0\n\t.db $BA\n\t.db $BA\n\t.db $BA\n\t.db $B8 ; 1\n\t.db $BA\n\t.db $BA\n\t.db $BA\n\t.db $B8 ; 2\n\t.db $B8\n\t.db $BA\n\t.db $BA\n\t.db $B8 ; 3\n\t.db $B8\n\t.db $B8\n\t.db $BA\n\t.db $B8 ; 4\n\t.db $B8\n\t.db $B8\n\t.db $B8\n\nPOWQuakeOffsets:\n\t.db $00\n\t.db $03\n\t.db $00\n\t.db $FD\n\nSkyFlashColors:\n\t.db $26\n\t.db $2A\n\t.db $22\n\t.db $26\n\n","htmlComment":"<hr>\n","htmlContent":"HealthBarTiles:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span> <span class=\"token comment\">; 0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span> <span class=\"token comment\">; 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span> <span class=\"token comment\">; 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span> <span class=\"token comment\">; 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$BA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span> <span class=\"token comment\">; 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\nPOWQuakeOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FD</span>\n\nSkyFlashColors:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$26</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$2A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$26</span>\n\n","line":11976},{"comment":"=============== S U B R O U T I N E =======================================","content":"AreaSecondaryRoutine:\n\tLDA SkyFlashTimer\n\tBEQ AreaSecondaryRoutine_HealthBar\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"AreaSecondaryRoutine:\n\t<span class=\"token opcode property\">LDA</span> SkyFlashTimer\n\t<span class=\"token opcode property\">BEQ</span> AreaSecondaryRoutine_HealthBar\n","line":12011},{"comment":"sky flash timer (ie. explosions)","content":"\tDEC SkyFlashTimer\n\tLDX byte_RAM_300\n\tLDA #$3F\n\tSTA PPUBuffer_301, X\n\tLDA #$10\n\tSTA PPUBuffer_301 + 1, X\n\tLDA #$04\n\tSTA PPUBuffer_301 + 2, X\n\tLDA SkyColor\n\tLDY SkyFlashTimer\n\tBEQ AreaSecondaryRoutine_PlayerPalette\n\n\tTYA\n\tAND #$03\n\tTAY\n\tLDA SkyFlashColors, Y\n\nAreaSecondaryRoutine_PlayerPalette:\n\tSTA PPUBuffer_301 + 3, X\n\tLDA RestorePlayerPalette1\n\tSTA PPUBuffer_301 + 4, X\n\tLDA RestorePlayerPalette2\n\tSTA PPUBuffer_301 + 5, X\n\tLDA RestorePlayerPalette3\n\tSTA PPUBuffer_301 + 6, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 7, X\n\tTXA\n\tCLC\n\tADC #$07\n\tSTA byte_RAM_300\n\nAreaSecondaryRoutine_HealthBar:\n\tLDA #$30\n\tSTA byte_RAM_0\n\tJSR FindSpriteSlot\n\n\tLDA PlayerHealth\n\tBEQ AreaSecondaryRoutine_HealthBar_Draw\n\n\tAND #$F0\n\tLSR A\n\tLSR A\n\tADC #$04 ; max health\n\nAreaSecondaryRoutine_HealthBar_Draw:\n\tTAX\n\n\tLDA #$FE\n\tSTA byte_RAM_3\nAreaSecondaryRoutine_HealthBar_Loop:\n\tLDA HealthBarTiles, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$10\n\tSTA SpriteDMAArea + 3, Y\n\tLDA #$01\n\tSTA SpriteDMAArea + 2, Y\n\tLDA byte_RAM_0\n\tSTA SpriteDMAArea, Y\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_0\n\tINX\n\tINY\n\tINY\n\tINY\n\tINY\n\tINC byte_RAM_3\n\tLDA byte_RAM_3\n\tCMP PlayerMaxHealth\n\tBNE AreaSecondaryRoutine_HealthBar_Loop\n\nAreaSecondaryRoutine_POW:\n\tLDA POWQuakeTimer\n\tBEQ AreaSecondaryRoutine_Exit\n\n\tDEC POWQuakeTimer\n\tLSR A\n\tAND #$01\n\tTAY\n\tLDA PPUScrollYMirror\n\tBPL AreaSecondaryRoutine_POW_OffsetScreen\n\n\tINY\n\tINY\n\nAreaSecondaryRoutine_POW_OffsetScreen:\n\tLDA POWQuakeOffsets, Y\n\tSTA BackgroundYOffset\n\tJMP KillOnscreenEnemies\n\nAreaSecondaryRoutine_Exit:\n\tRTS\n\n\nIFDEF RESET_CHR_LATCH\nSetBossTileset:\n\tSTA BossTileset\n\tINC ResetCHRLatch\n\tRTS\nENDIF\n\n\nIFDEF CONTROLLER_2_DEBUG","htmlComment":"<p>sky flash timer (ie. explosions)</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEC</span> SkyFlashTimer\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> SkyColor\n\t<span class=\"token opcode property\">LDY</span> SkyFlashTimer\n\t<span class=\"token opcode property\">BEQ</span> AreaSecondaryRoutine_PlayerPalette\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> SkyFlashColors, <span class=\"token register variable\">Y</span>\n\nAreaSecondaryRoutine_PlayerPalette:\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> RestorePlayerPalette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> RestorePlayerPalette<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> RestorePlayerPalette<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\nAreaSecondaryRoutine_HealthBar:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">JSR</span> FindSpriteSlot\n\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">BEQ</span> AreaSecondaryRoutine_HealthBar_Draw\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span> <span class=\"token comment\">; max health</span>\n\nAreaSecondaryRoutine_HealthBar_Draw:\n\t<span class=\"token opcode property\">TAX</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FE</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\nAreaSecondaryRoutine_HealthBar_Loop:\n\t<span class=\"token opcode property\">LDA</span> HealthBarTiles, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">CMP</span> PlayerMaxHealth\n\t<span class=\"token opcode property\">BNE</span> AreaSecondaryRoutine_HealthBar_Loop\n\nAreaSecondaryRoutine_POW:\n\t<span class=\"token opcode property\">LDA</span> POWQuakeTimer\n\t<span class=\"token opcode property\">BEQ</span> AreaSecondaryRoutine_Exit\n\n\t<span class=\"token opcode property\">DEC</span> POWQuakeTimer\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">BPL</span> AreaSecondaryRoutine_POW_OffsetScreen\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\nAreaSecondaryRoutine_POW_OffsetScreen:\n\t<span class=\"token opcode property\">LDA</span> POWQuakeOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> BackgroundYOffset\n\t<span class=\"token opcode property\">JMP</span> KillOnscreenEnemies\n\nAreaSecondaryRoutine_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nIFDEF RESET_CHR_LATCH\nSetBossTileset:\n\t<span class=\"token opcode property\">STA</span> BossTileset\n\t<span class=\"token opcode property\">INC</span> ResetCHRLatch\n\t<span class=\"token opcode property\">RTS</span>\nENDIF\n\n\nIFDEF CONTROLLER_<span class=\"token decimalnumber string\">2</span>_DEBUG","line":12017},{"comment":"\nCopies all character stats to RAM for hot-swapping the current character\n","content":"CopyCarryYOffsets:\n\tLDX #(AreaMainRoutine - CarryYOffsets - 1)\nCopyCarryYOffsets_Loop:\n\tLDA CarryYOffsets, X\n\tSTA CarryYOffsetsRAM, X\n\tDEX\n\tBPL CopyCarryYOffsets_Loop\n\n\tRTS\n\nAreaDebugRoutine:\n\tLDA CreateObjectType\n\tBEQ AreaDebugRoutine_Exit\n\n\tJSR DebugCreateObject\n\nAreaDebugRoutine_Exit:\n\tRTS\n","htmlComment":"<p>Copies all character stats to RAM for hot-swapping the current character</p>\n","htmlContent":"CopyCarryYOffsets:\n\t<span class=\"token opcode property\">LDX</span> #(AreaMainRoutine - CarryYOffsets - <span class=\"token decimalnumber string\">1</span>)\nCopyCarryYOffsets_Loop:\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsets, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> CarryYOffsetsRAM, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> CopyCarryYOffsets_Loop\n\n\t<span class=\"token opcode property\">RTS</span>\n\nAreaDebugRoutine:\n\t<span class=\"token opcode property\">LDA</span> CreateObjectType\n\t<span class=\"token opcode property\">BEQ</span> AreaDebugRoutine_Exit\n\n\t<span class=\"token opcode property\">JSR</span> DebugCreateObject\n\nAreaDebugRoutine_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n","line":12124},{"comment":"\nInput\nCreateObjectType = object type\n","content":"DebugCreateObject:\n\tJSR CreateEnemy\n\n\tBMI AreaDebugRoutine_Exit\n\n\tLDX byte_RAM_0\n\tLDA CreateObjectType\n\tSTA ObjectType, X\n\tLDA ScreenBoundaryLeftLo\n\tADC #$80\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tADC #$00\n\tSTA ObjectYHi, X\n\n\tJSR InitializeEnemy\n\n\tLDA CreateObjectAttributes\n\tBEQ DebugCreateObject_ClearObjectType\n\nDebugCreateObject_ObjectCarried:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectTimer\n\n\tLDA #$01\n\tSTA HoldingItem\n\tSTA ObjectBeingCarriedTimer, X\n\tSTX ObjectBeingCarriedIndex\n\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\nDebugCreateObject_ObjectTimer:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectBottomScreen\n\n\tLDA #$FF\n\tSTA EnemyTimer, X\n\nDebugCreateObject_ObjectBottomScreen:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_Bit4\n\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$E0\n\tSTA ObjectYLo, X\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA ObjectYHi, X\n\nDebugCreateObject_Bit4:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_Bit3\n\nDebugCreateObject_Bit3:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_Bit2\n\nDebugCreateObject_Bit2:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectThrown\n\nDebugCreateObject_ObjectThrown:\n\tROL CreateObjectAttributes\n\tBCC DebugCreateObject_ObjectNoVelocityReset\n\n\tLDA #$01\n\tSTA EnemyArray_42F, X\n\nDebugCreateObject_ObjectNoVelocityReset:\n\tROL CreateObjectAttributes\n\tBCS DebugCreateObject_ClearObjectType\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tSTA ObjectYVelocity, X\n\nDebugCreateObject_ClearObjectType:\n\tLDA #$00\n\tSTA CreateObjectType\n\nDebugCreateObject_Exit:\n\tRTS\n\nENDIF\n","htmlComment":"<p>Input\nCreateObjectType = object type</p>\n","htmlContent":"DebugCreateObject:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy\n\n\t<span class=\"token opcode property\">BMI</span> AreaDebugRoutine_Exit\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> CreateObjectType\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">JSR</span> InitializeEnemy\n\n\t<span class=\"token opcode property\">LDA</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BEQ</span> DebugCreateObject_ClearObjectType\n\nDebugCreateObject_ObjectCarried:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_ObjectTimer\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> HoldingItem\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STX</span> ObjectBeingCarriedIndex\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_CherryGet\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\nDebugCreateObject_ObjectTimer:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_ObjectBottomScreen\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nDebugCreateObject_ObjectBottomScreen:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_Bit<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\nDebugCreateObject_Bit<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_Bit<span class=\"token decimalnumber string\">3</span>\n\nDebugCreateObject_Bit<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_Bit<span class=\"token decimalnumber string\">2</span>\n\nDebugCreateObject_Bit<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_ObjectThrown\n\nDebugCreateObject_ObjectThrown:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCC</span> DebugCreateObject_ObjectNoVelocityReset\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\nDebugCreateObject_ObjectNoVelocityReset:\n\t<span class=\"token opcode property\">ROL</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">BCS</span> DebugCreateObject_ClearObjectType\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nDebugCreateObject_ClearObjectType:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> CreateObjectType\n\nDebugCreateObject_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\nENDIF\n","line":12147}]}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}