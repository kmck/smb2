{"componentChunkName":"component---src-templates-asm-source-jsx","path":"/src/prg-0-1.asm","webpackCompilationHash":"597ab6d0eddc3471edff","result":{"data":{"asmSource":{"path":"/src/prg-0-1.asm","name":"prg-0-1","raw":";\n; Bank 0 & Bank 1\n; ===============\n;\n; What's inside:\n;\n;   - Title screen\n;   - Player controls\n;   - Player state handling\n;   - Enemy handling\n;\n\n;\n; Initializes a vertical area\n;\nInitializeAreaVertical:\n\tLDA byte_RAM_502\n\tBNE loc_BANK0_805D\n\n\tLDA #HMirror\n\tJSR ChangeNametableMirroring\n\n\tLDA CurrentLevelEntryPage\n\tBNE loc_BANK0_8013\n\nloc_BANK0_800F:\n\tLDA #$09\n\tBNE loc_BANK0_8016\n\nloc_BANK0_8013:\n\tSEC\n\tSBC #$01\n\nloc_BANK0_8016:\n\tORA #$C0\n\tSTA byte_RAM_CF\n\tSEC\n\tSBC #$40\n\tSTA byte_RAM_CE\n\tLDA CurrentLevelEntryPage\n\nloc_BANK0_8022:\n\tCLC\n\tADC #$01\n\tCMP #$0A\n\tBNE loc_BANK0_802B\n\n\tLDA #$00\n\nloc_BANK0_802B:\n\tORA #$10\n\tSTA byte_RAM_D0\n\tLDA CurrentLevelEntryPage\n\tLDY #$00\n\tJSR ResetPPUScrollHi\n\n\tLDA #$20\n\tSTA byte_RAM_D3\n\tLDA #$60\n\tSTA byte_RAM_D4\n\tINC byte_RAM_502\n\tLDA #$E0\n\tSTA byte_RAM_E2\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tSTA byte_RAM_53A\n\tLSR A\n\tSTA byte_RAM_D2\n\tLDY CurrentLevelEntryPage\n\tJSR sub_BANK0_95AF\n\n\tSTA ScreenYLo\n\tSTY ScreenYHi\n\tJSR sub_BANK0_946D\n\nloc_BANK0_805D:\n\tLDA #$00\n\tSTA byte_RAM_6\n\tLDA #$0FF\n\tSTA byte_RAM_505\n\nloc_BANK0_8066:\n\tLDA #$A0\n\tSTA byte_RAM_507\n\tJSR sub_BANK0_823D\n\n\tLDA byte_RAM_53A\n\tBNE locret_BANK0_8082\n\n\tINC BreakStartLevelLoop\n\tLDA #$E8\n\tSTA byte_RAM_E1\n\tLDA #$C8\n\tSTA byte_RAM_E2\n\tLDA #$00\n\tSTA byte_RAM_502\n\nlocret_BANK0_8082:\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8083:\n\tLDA NeedVerticalScroll\n\tAND #$04\n\tBNE loc_BANK0_809D\n\n\tLDA NeedVerticalScroll\n\tAND #$07\n\tBNE loc_BANK0_8092\n\n\tJMP loc_BANK0_819C\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8092:\n\tLDA NeedVerticalScroll\n\tORA #$04\n\tSTA NeedVerticalScroll\n\tLDA #$12\n\tSTA CameraScrollTiles\n\nloc_BANK0_809D:\n\tLDA NeedVerticalScroll\n\tLSR A\n\tLDA PPUScrollYMirror\n\tBCC loc_BANK0_8103\n\n\tBNE loc_BANK0_80B1\n\n\tLDA byte_RAM_CF\n\tAND #$0F\n\tCMP #$09\n\tBNE loc_BANK0_80B1\n\n\tJMP loc_BANK0_819C\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_80B1:\n\tLDA #$01\n\tJSR SetObjectLocks\n\n\tLDA PPUScrollYMirror\n\tSEC\n\tSBC #$04\n\tSTA PPUScrollYMirror\n\tLDA ScreenYLo\n\tSEC\n\tSBC #$04\n\tSTA ScreenYLo\n\tBCS loc_BANK0_80C8\n\n\tDEC ScreenYHi\n\nloc_BANK0_80C8:\n\tLDA PPUScrollYMirror\n\tCMP #$0FC\n\tBNE loc_BANK0_80DB\n\n\tLDA #$EC\n\tSTA PPUScrollYMirror\n\tLDA PPUScrollYHiMirror\n\tEOR #$02\n\tSTA PPUScrollYHiMirror\n\tLSR A\n\tSTA PPUScrollXHiMirror\n\nloc_BANK0_80DB:\n\tLDA PPUScrollYMirror\n\tAND #$07\n\tBEQ loc_BANK0_80E2\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_80E2:\n\tLDX #$00\n\tJSR loc_BANK0_8287\n\n\tINX\n\tJSR loc_BANK0_8287\n\n\tLDA PPUScrollYMirror\n\tAND #$0F\n\tBNE loc_BANK0_80FB\n\n\tLDX #$00\n\tJSR sub_BANK0_8297\n\n\tLDX #$01\n\tJSR sub_BANK0_8297\n\nloc_BANK0_80FB:\n\tLDX #$01\n\tJSR sub_BANK0_82E2\n\n\tJMP loc_BANK0_8170\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8103:\n\tBNE loc_BANK0_8121\n\n\tLDA CurrentLevelPages\n\tSTA byte_RAM_F\n\tCMP #$09\n\tBNE loc_BANK0_8114\n\n\tLDA #$00\n\tSTA byte_RAM_F\n\tBEQ loc_BANK0_8116\n\nloc_BANK0_8114:\n\tINC byte_RAM_F\n\nloc_BANK0_8116:\n\tLDA byte_RAM_D0\n\tAND #$0F\n\tCMP byte_RAM_F\n\tBNE loc_BANK0_8121\n\n\tJMP loc_BANK0_819C\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8121:\n\tLDA #$01\n\tJSR SetObjectLocks\n\n\tLDA PPUScrollYMirror\n\tCLC\n\tADC #$04\n\tSTA PPUScrollYMirror\n\tLDA ScreenYLo\n\tCLC\n\tADC #$04\n\tSTA ScreenYLo\n\tBCC loc_BANK0_8138\n\n\tINC ScreenYHi\n\nloc_BANK0_8138:\n\tLDA PPUScrollYMirror\n\tAND #$07\n\tBEQ loc_BANK0_813F\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_813F:\n\tLDA PPUScrollYMirror\n\tCMP #$F0\n\tBNE loc_BANK0_8152\n\n\tLDA #$00\n\tSTA PPUScrollYMirror\n\tLDA PPUScrollYHiMirror\n\tEOR #$02\n\tSTA PPUScrollYHiMirror\n\tLSR A\n\tSTA PPUScrollXHiMirror\n\nloc_BANK0_8152:\n\tLDX #$02\n\tJSR sub_BANK0_828F\n\n\tDEX\n\tJSR sub_BANK0_828F\n\n\tLDA byte_RAM_D4\n\tAND #$20\n\tBNE loc_BANK0_816B\n\n\tLDX #$02\n\tJSR sub_BANK0_82BE\n\n\tLDX #$01\n\tJSR sub_BANK0_82BE\n\nloc_BANK0_816B:\n\tLDX #$02\n\tJSR sub_BANK0_82E2\n\nloc_BANK0_8170:\n\tLDA CameraScrollTiles\n\tCMP #$12\n\tBNE loc_BANK0_818F\n\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCC loc_BANK0_8186\n\n\tLDX #$01\n\tLDA #$00\n\tBEQ loc_BANK0_818A\n\nloc_BANK0_8186:\n\tLDX #$02\n\tLDA #$10\n\nloc_BANK0_818A:\n\tSTA byte_RAM_1\n\tJSR sub_BANK0_8314\n\nloc_BANK0_818F:\n\tJSR sub_BANK0_833E\n\n\tDEC CameraScrollTiles\n\tBNE locret_BANK0_81A0\n\n\tLDA #$00\n\tJSR SetObjectLocks\n\nloc_BANK0_819C:\n\tLDA #$00\n\tSTA NeedVerticalScroll\n\nlocret_BANK0_81A0:\n\tRTS\n\n; End of function sub_BANK0_8083\n\n; ---------------------------------------------------------------------------\n\t.db $01\n\n\n;\n; Stashes screen scrolling information so that it can be restored after leaving\n; the pause screen\n;\nStashScreenScrollPosition:\n\tLDA PPUScrollYMirror\n\tSTA PPUScrollYMirror_Backup\n\tLDA PPUScrollXMirror\n\tSTA PPUScrollXMirror_Backup\n\tLDA PPUScrollYHiMirror\n\tSTA PPUScrollYHiMirror_Backup\n\tLDA PPUScrollXHiMirror\n\tSTA PPUScrollXHiMirror_Backup\n\tLDA ScreenYHi\n\tSTA ScreenYHi_Backup\n\tLDA ScreenYLo\n\tSTA ScreenYLo_Backup\n\tLDA ScreenBoundaryLeftHi\n\tSTA ScreenBoundaryLeftHi_Backup\n\tLDA byte_RAM_E1\n\tSTA byte_RAM_517\n\tLDA #$00\n\tSTA PPUScrollYMirror\n\tSTA PPUScrollXMirror\n\tSTA PPUScrollYHiMirror\n\tSTA PPUScrollXHiMirror\n\tRTS\n\n\nRestoreScreenScrollPosition:\n\tLDA PPUScrollYMirror_Backup\n\tSTA PPUScrollYMirror\n\tLDA PPUScrollXMirror_Backup\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tLDA PPUScrollYHiMirror_Backup\n\tSTA PPUScrollYHiMirror\n\tLDA PPUScrollXHiMirror_Backup\n\tSTA PPUScrollXHiMirror\n\tLDA ScreenBoundaryLeftHi_Backup\n\tSTA ScreenBoundaryLeftHi\n\tLDA ScreenYHi_Backup\n\tSTA ScreenYHi\n\tLDA ScreenYLo_Backup\n\tSTA ScreenYLo\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_81FE:\n\tLDA byte_RAM_CF\n\tAND #$10\n\tBEQ loc_BANK0_820B\n\n\tLDA byte_RAM_E1\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_E1\n\nloc_BANK0_820B:\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tLDA byte_RAM_CF\n\tSTA byte_RAM_CE\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDX #$00\n\tJSR sub_BANK0_8314\n\n\tLDA byte_RAM_D3\n\tSTA byte_RAM_D2\n\tLDA byte_RAM_E1\n\tSTA byte_RAM_E2\n\tLDX #$01\n\tJSR sub_BANK0_846A\n\n\tLDA #$F0\n\tSTA byte_RAM_506\n\tSTA byte_RAM_507\n\tLDA byte_RAM_D0\n\tSTA byte_RAM_505\n\tINC byte_RAM_D5\n\tLDA #$01\n\tSTA byte_RAM_6\n\tRTS\n\n; End of function sub_BANK0_81FE\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_823D:\n\tLDX #$00\n\tSTX byte_RAM_537\n\tJSR sub_BANK0_82E2\n\n\tJSR sub_BANK0_833E\n\n\tLDX #$00\n\tJSR sub_BANK0_828F\n\n\tLDA byte_RAM_506\n\tCMP byte_RAM_D1\n\tBNE loc_BANK0_8277\n\n\tLDA byte_RAM_507\n\tCLC\n\tADC #$20\n\tCMP byte_RAM_D2\n\tBNE loc_BANK0_8277\n\nloc_BANK0_825E:\n\tLDA byte_RAM_6\n\tTAX\n\tBEQ loc_BANK0_8268\n\n\tLDA byte_RAM_517\n\tSTA byte_RAM_E1\n\nloc_BANK0_8268:\n\tINC byte_RAM_537\n\tLDA #$00\n\tSTA byte_RAM_53A, X\n\tSTA byte_RAM_53D\n\tSTA byte_RAM_53E\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8277:\n\tLDA byte_RAM_D2\n\tAND #$20\n\tBNE locret_BANK0_828E\n\n\tLDA byte_RAM_CE\n\tCMP byte_RAM_505\n\tBEQ loc_BANK0_825E\n\n\tJMP sub_BANK0_82BE\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8287:\n\tLDA byte_RAM_D3, X\n\tSEC\n\tSBC #$20\n\tSTA byte_RAM_D3, X\n\nlocret_BANK0_828E:\n\tRTS\n\n; End of function sub_BANK0_823D\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_828F:\n\tLDA byte_RAM_D2, X\n\tCLC\n\tADC #$20\n\tSTA byte_RAM_D2, X\n\tRTS\n\n; End of function sub_BANK0_828F\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8297:\n\tLDA byte_RAM_CF, X\n\tSEC\n\tSBC #$10\n\tSTA byte_RAM_CF, X\n\tAND #$F0\n\tCMP #$F0\n\tBNE locret_BANK0_82BD\n\n\tLDA byte_RAM_CF, X\n\tAND #$0F\n\tCLC\n\tADC #$E0\n\tSTA byte_RAM_CF, X\n\tDEC byte_RAM_CF, X\n\tLDA byte_RAM_CF, X\n\tCMP #$0DF\n\tBNE loc_BANK0_82B9\n\nloc_BANK0_82B5:\n\tLDA #$E9\n\tSTA byte_RAM_CF, X\n\nloc_BANK0_82B9:\n\tLDA #$A0\n\tSTA byte_RAM_D3, X\n\nlocret_BANK0_82BD:\n\tRTS\n\n; End of function sub_BANK0_8297\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_82BE:\n\tLDA byte_RAM_CE, X\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_CE, X\n\tAND #$F0\n\tCMP #$F0\n\tBNE locret_BANK0_82E1\n\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tSTA byte_RAM_CE, X\n\tINC byte_RAM_CE, X\n\tLDA byte_RAM_CE, X\n\tCMP #$0A\n\tBNE loc_BANK0_82DD\n\n\tLDA #$00\n\tSTA byte_RAM_CE, X\n\nloc_BANK0_82DD:\n\tLDA #$00\n\tSTA byte_RAM_D2, X\n\nlocret_BANK0_82E1:\n\tRTS\n\n; End of function sub_BANK0_82BE\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_82E2:\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tTAY\n\tLDA DecodedLevelPageStartLo_Bank1, Y\n\tSTA byte_RAM_E9\n\tLDA DecodedLevelPageStartHi_Bank1, Y\n\tSTA byte_RAM_EA\n\tLDA byte_RAM_CE, X\n\tAND #$F0\n\tSTA byte_RAM_D7\n\tLDA byte_RAM_CE, X\n\tLSR A\n\tBCC loc_BANK0_8300\n\n\tLDA #$20\n\tBNE loc_BANK0_8302\n\nloc_BANK0_8300:\n\tLDA #$28\n\nloc_BANK0_8302:\n\tSTA byte_RAM_D1\n\tLDA byte_RAM_CE, X\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tADC byte_RAM_D1\n\tSTA byte_RAM_D1\n\nloc_BANK0_830F:\n\tLDA byte_RAM_D2, X\n\tSTA byte_RAM_D2\n\nlocret_BANK0_8313:\n\tRTS\n\n; End of function sub_BANK0_82E2\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8314:\n\tLDA byte_RAM_CE, X\n\tAND #$10\n\tBEQ locret_BANK0_8313\n\n\tLDA byte_RAM_CE, X\n\tSTA byte_RAM_3\n\tSEC\n\tSBC byte_RAM_1\n\tSTA byte_RAM_CE, X\n\tJSR sub_BANK0_82E2\n\nloc_BANK0_8326:\n\tLDA #$0F\n\tSTA byte_RAM_E3\n\tLDA #$00\n\tSTA byte_RAM_D6\n\nloc_BANK0_832E:\n\tJSR sub_BANK0_84AC\n\n\tLDA byte_RAM_E3\n\tBPL loc_BANK0_832E\n\n\tLDA byte_RAM_3\n\tSTA byte_RAM_CE, X\n\tDEC byte_RAM_E4\n\tJMP sub_BANK0_82E2\n\n; End of function sub_BANK0_8314\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_833E:\n\tLDX byte_RAM_300\n\tLDA byte_RAM_D1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_D2\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$20\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$00\n\tSTA byte_RAM_D6\n\tLDA #$0F\n\tSTA byte_RAM_E3\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_836C\n\n\tLDY byte_RAM_D7\n\tCPY #$E0\n\tBNE loc_BANK0_836C\n\n\tLDA #$00\n\tSTA byte_RAM_E4\n\tINC byte_RAM_539\n\nloc_BANK0_836C:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tSTA byte_RAM_51B\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tASL A\n\tASL A\n\tTAY\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_8390\n\n\tINY\n\tINY\n\nloc_BANK0_8390:\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301, X\n\tINC byte_RAM_D6\n\tINX\n\tINY\n\tLDA byte_RAM_D6\n\tLSR A\n\tBCS loc_BANK0_8390\n\n\tINC byte_RAM_D7\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_83A7\n\n\tJSR sub_BANK0_8488\n\nloc_BANK0_83A7:\n\tLDA byte_RAM_D6\n\tCMP #$20\n\tBCC loc_BANK0_836C\n\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tSTX byte_RAM_300\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_840B\n\n\tLDA byte_RAM_E4\n\tBEQ loc_BANK0_83C2\n\n\tDEC byte_RAM_E4\n\tJMP loc_BANK0_83DE\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_83C2:\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCS loc_BANK0_83D4\n\n\tLDX #$01\n\tJSR sub_BANK0_8412\n\n\tLDX #$01\n\tJSR sub_BANK0_846A\n\n\tJMP loc_BANK0_83DE\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_83D4:\n\tLDX #$00\n\tJSR sub_BANK0_8412\n\n\tLDX #$00\n\tJSR sub_BANK0_8478\n\nloc_BANK0_83DE:\n\tLDX #$00\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCC loc_BANK0_83FA\n\n\tINX\n\tLDA byte_RAM_CF, X\n\tAND #$F0\n\tCMP #$E0\n\tBEQ loc_BANK0_83F4\n\n\tLDA byte_RAM_CF, X\n\tAND #$10\n\tBNE loc_BANK0_840B\n\nloc_BANK0_83F4:\n\tJSR sub_BANK0_8478\n\n\tJMP loc_BANK0_840B\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_83FA:\n\tLDA byte_RAM_CF, X\n\tAND #$F0\n\tCMP #$E0\n\tBEQ loc_BANK0_8408\n\n\tLDA byte_RAM_CF, X\n\tAND #$10\n\tBEQ loc_BANK0_840B\n\nloc_BANK0_8408:\n\tJSR sub_BANK0_846A\n\nloc_BANK0_840B:\n\tLDA byte_RAM_D5\n\tEOR #$01\n\tSTA byte_RAM_D5\n\tRTS\n\n; End of function sub_BANK0_833E\n\n; =============== S U B R O U T I N E =======================================\n\n; something to do with background tile palettes in vertical levels?\nsub_BANK0_8412:\n\tLDY byte_RAM_300\n\tLDA byte_RAM_D1\n\tORA #$03\n\tSTA PPUBuffer_301, Y\n\tINY\n\tLDA byte_RAM_E1, X\n\tSTA PPUBuffer_301, Y\n\tINY\n\tLDA #$08\n\tSTA PPUBuffer_301, Y\n\tINY\n\tLDX #$07\n\nloc_BANK0_842B:\n\tLDA byte_RAM_539\n\tBEQ loc_BANK0_843B\n\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, X\n\tJMP loc_BANK0_8452\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_843B:\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCC loc_BANK0_8452\n\nloc_BANK0_8440:\n\tLDA EnemyArray_D9, X\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_1\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tORA byte_RAM_1\n\nloc_BANK0_8450:\n\tSTA EnemyArray_D9, X\n\nloc_BANK0_8452:\n\tLDA EnemyArray_D9, X\n\tSTA PPUBuffer_301, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_842B\n\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tLSR A\n\tSTA byte_RAM_539\n\tSTA PPUBuffer_301, Y\n\tSTY byte_RAM_300\n\tRTS\n\n; End of function sub_BANK0_8412\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_846A:\n\tLDA byte_RAM_E1, X\n\tCLC\n\tADC #$08\n\tSTA byte_RAM_E1, X\n\tBCC locret_BANK0_8477\n\n\tLDA #$C0\n\tSTA byte_RAM_E1, X\n\nlocret_BANK0_8477:\n\tRTS\n\n; End of function sub_BANK0_846A\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8478:\n\tLDA byte_RAM_E1, X\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_E1, X\n\tCMP #$C0\n\tBCS locret_BANK0_8487\n\n\tLDA #$F8\n\tSTA byte_RAM_E1, X\n\nlocret_BANK0_8487:\n\tRTS\n\n; End of function sub_BANK0_8478\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8488:\n\tLDA byte_RAM_E3\n\tLSR A\n\tTAY\n\tLDA EnemyArray_D9, Y\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, Y\n\tLDA byte_RAM_51B\n\tAND #$C0\n\tORA EnemyArray_D9, Y\n\tSTA EnemyArray_D9, Y\n\tDEC byte_RAM_E3\n\tRTS\n\n; End of function sub_BANK0_8488\n\n; ---------------------------------------------------------------------------\n\n_code_04A2:\n\tLDX #$07\n\tLDA #$00\n\nloc_BANK0_84A6:\n\tSTA EnemyArray_D9, X\n\tDEX\n\tBNE loc_BANK0_84A6\n\n\tRTS\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_84AC:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tSTA byte_RAM_51B\n\tINC byte_RAM_D7\n\tJMP sub_BANK0_8488\n\n; End of function sub_BANK0_84AC\n\n; ---------------------------------------------------------------------------\n\n; Unused space in the original ($84B8 - $84FF)\nunusedSpace $8500, $FF\n\n\n;\n; Initializes a horizontal area\n;\nInitializeAreaHorizontal:\n\tLDA byte_RAM_502\n\tBNE loc_BANK0_855C\n\n\tLDA #VMirror\n\tJSR ChangeNametableMirroring\n\n\tJSR sub_BANK0_946D\n\n\tLDA #$00\n\tSTA PPUScrollYMirror\n\tLDA CurrentLevelEntryPage\n\tBNE loc_BANK0_851A\n\n\tLDA #$09\n\tBNE loc_BANK0_851D\n\nloc_BANK0_851A:\n\tSEC\n\tSBC #$01\n\nloc_BANK0_851D:\n\tORA #$D0\n\tSTA byte_RAM_CF\n\tSEC\n\tSBC #$20\n\tSTA byte_RAM_CE\n\tLDA CurrentLevelEntryPage\n\tCLC\n\tADC #$01\n\tCMP #$0A\n\tBNE loc_BANK0_8532\n\n\tLDA #$00\n\nloc_BANK0_8532:\n\tORA #$10\n\tSTA byte_RAM_D0\n\tLDA CurrentLevelEntryPage\n\tLDY #$01\n\tJSR ResetPPUScrollHi\n\n\tINC byte_RAM_502\n\tLDA CurrentLevelEntryPage\n\tSTA ScreenBoundaryLeftHi\n\tLDA #$01\n\tSTA byte_RAM_53A\n\tLSR A\n\tSTA byte_RAM_6\n\tLDA #$0FF\n\tSTA byte_RAM_505\n\tLDA #$0F\n\tSTA byte_RAM_507\n\tJSR sub_BANK0_856A\n\nloc_BANK0_855C:\n\tJSR sub_BANK0_87AA\n\n\tLDA byte_RAM_53A\n\tBNE locret_BANK0_8569\n\n\tSTA byte_RAM_502\n\tINC BreakStartLevelLoop\n\nlocret_BANK0_8569:\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_856A:\n\tLDA CurrentLevelEntryPage\n\tBNE loc_BANK0_8576\n\n\tLDA byte_RAM_BA\n\tBMI loc_BANK0_85E7\n\n\tLDA CurrentLevelEntryPage\n\nloc_BANK0_8576:\n\tCMP CurrentLevelPages\n\tBNE loc_BANK0_857F\n\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_85E7\n\nloc_BANK0_857F:\n\tLDX #$02\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_858B\n\n\tLDA #$0FF\n\tSTA byte_RAM_B\n\tBNE loc_BANK0_858F\n\nloc_BANK0_858B:\n\tLDA #$00\n\tSTA byte_RAM_B\n\nloc_BANK0_858F:\n\tLDA byte_RAM_BA\n\tAND #$F0\n\tCLC\n\tADC byte_RAM_CE, X\n\tPHP\n\tADC byte_RAM_B\n\tPLP\n\tSTA byte_RAM_C\n\tLDA byte_RAM_B\n\tBNE loc_BANK0_85B1\n\n\tBCC loc_BANK0_85C2\n\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tCMP #$09\n\tBNE loc_BANK0_85C2\n\n\tLDA byte_RAM_C\n\tAND #$F0\n\tJMP loc_BANK0_85C4\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_85B1:\n\tBCS loc_BANK0_85C2\n\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tBNE loc_BANK0_85C2\n\n\tLDA byte_RAM_C\n\tAND #$F0\n\tADC #$09\n\tJMP loc_BANK0_85C4\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_85C2:\n\tLDA byte_RAM_C\n\nloc_BANK0_85C4:\n\tSTA byte_RAM_CE, X\n\tDEX\n\tBPL loc_BANK0_858F\n\n\tLDA byte_RAM_BA\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tAND #$F0\n\tSTA CurrentLevelPageX\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_85E7\n\n\tDEC ScreenBoundaryLeftHi\n\tLDA PPUScrollXHiMirror\n\tEOR #$01\n\tSTA PPUScrollXHiMirror\n\tLDA #$01\n\tSTA byte_RAM_507\n\nloc_BANK0_85E7:\n\tLDA #$00\n\tSTA byte_RAM_BA\n\tRTS\n\n; End of function sub_BANK0_856A\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_85EC:\n\tLDA #$00\n\tSTA byte_RAM_51C\n\tLDA byte_RAM_538\n\tBEQ loc_BANK0_862C\n\n\tLDA byte_RAM_538\n\tLSR A\n\tBCS loc_BANK0_8618\n\n\tLDX #$02\n\tSTX byte_RAM_9\n\tLDA #$10\n\tSTA byte_RAM_1\n\tDEX\n\tLDA byte_RAM_538\n\tSTA NeedVerticalScroll\n\tJSR sub_BANK0_8901\n\n\tLDA byte_RAM_3\n\tSTA byte_RAM_D0\n\tLDA #$00\n\tSTA byte_RAM_538\n\tBEQ loc_BANK0_862C\n\nloc_BANK0_8618:\n\tLDX #$01\n\tSTX byte_RAM_9\n\tDEX\n\tSTX byte_RAM_1\n\tLDA byte_RAM_538\n\tSTA NeedVerticalScroll\n\tJSR sub_BANK0_8901\n\n\tLDA #$00\n\tSTA byte_RAM_538\n\nloc_BANK0_862C:\n\tLDA byte_RAM_BA\n\tBNE loc_BANK0_8631\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8631:\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_863C\n\n\tLDA #$01\n\tSTA NeedVerticalScroll\n\tJMP loc_BANK0_869A\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_863C:\n\tLDA #$02\n\tSTA NeedVerticalScroll\n\tLDX byte_RAM_BA\n\nloc_BANK0_8642:\n\tLDA PPUScrollXMirror\n\tBNE loc_BANK0_8651\n\n\tLDA ScreenBoundaryLeftHi\n\tCMP CurrentLevelPages\n\tBNE loc_BANK0_8651\n\n\tJMP loc_BANK0_86E9\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8651:\n\tLDA PPUScrollXMirror\n\tCLC\n\tADC #$01\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tBCC loc_BANK0_8669\n\n\tINC ScreenBoundaryLeftHi\n\tLDA PPUScrollXHiMirror\n\tEOR #$01\n\tSTA PPUScrollXHiMirror\n\tASL A\n\tSTA PPUScrollYHiMirror\n\nloc_BANK0_8669:\n\tLDA ScreenBoundaryLeftHi\n\tCMP CurrentLevelPages\n\tBEQ loc_BANK0_8685\n\n\tLDA PPUScrollXMirror\n\tAND #$F0\n\tCMP CurrentLevelPageX\n\tBEQ loc_BANK0_8682\n\n\tSTA CurrentLevelPageX\n\tLDA #$01\n\tSTA byte_RAM_51C\n\nloc_BANK0_8682:\n\tDEX\n\tBNE loc_BANK0_8642\n\nloc_BANK0_8685:\n\tLDA byte_RAM_51C\n\tBEQ loc_BANK0_86E9\n\n\tLDX #$02\n\nloc_BANK0_868C:\n\tJSR loc_BANK0_87FC\n\n\tDEX\n\tBNE loc_BANK0_868C\n\n\tLDX #$02\n\tJSR sub_BANK0_8812\n\n\tJMP loc_BANK0_86E6\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_869A:\n\tLDX byte_RAM_BA\n\nloc_BANK0_869C:\n\tLDA PPUScrollXMirror\n\tBNE loc_BANK0_86A8\n\n\tLDA ScreenBoundaryLeftHi\n\tBNE loc_BANK0_86A8\n\n\tJMP loc_BANK0_86E9\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_86A8:\n\tLDA PPUScrollXMirror\n\tSEC\n\tSBC #$01\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tBCS loc_BANK0_86C0\n\n\tDEC ScreenBoundaryLeftHi\n\tLDA PPUScrollXHiMirror\n\tEOR #$01\n\tSTA PPUScrollXHiMirror\n\tASL A\n\tSTA PPUScrollYHiMirror\n\nloc_BANK0_86C0:\n\tLDA PPUScrollXMirror\n\tAND #$F0\n\tCMP CurrentLevelPageX\n\tBEQ loc_BANK0_86D1\n\n\tSTA CurrentLevelPageX\n\tLDA #$01\n\tSTA byte_RAM_51C\n\nloc_BANK0_86D1:\n\tINX\n\tBNE loc_BANK0_869C\n\n\tLDA byte_RAM_51C\n\tBEQ loc_BANK0_86E9\n\n\tLDX #$02\n\nloc_BANK0_86DB:\n\tJSR loc_BANK0_87E6\n\n\tDEX\n\tBNE loc_BANK0_86DB\n\n\tLDX #$01\n\tJSR sub_BANK0_8812\n\nloc_BANK0_86E6:\n\tJSR sub_BANK0_8872\n\nloc_BANK0_86E9:\n\tLDA #$00\n\tSTA NeedVerticalScroll\n\tRTS\n\n; End of function sub_BANK0_85EC\n\n\n;\n; Resets the PPU high scrolling values and sets the high byte of the PPU scroll offset.\n;\n; ##### Input\n; - `A`: 0 = use nametable A, 1 = use nametable B\n; - `Y`: 0 = vertical, 1 = horizontal\n;\n; ##### Output\n; - `PPUScrollYHiMirror`\n; - `PPUScrollXHiMirror`\n; - `byte_RAM_506`: PPU scroll offset high byte\n;\nResetPPUScrollHi:\n\tLSR A\n\tBCS ResetPPUScrollHi_NametableB\n\nResetPPUScrollHi_NametableA:\n\tLDA #$01\n\tSTA PPUScrollXHiMirror\n\tASL A\n\tSTA PPUScrollYHiMirror\n\tLDA #$20\n\tBNE ResetPPUScrollHi_Exit\n\nResetPPUScrollHi_NametableB:\n\tLDA #$00\n\tSTA PPUScrollXHiMirror\n\tSTA PPUScrollYHiMirror\n\tLDA PPUScrollHiOffsets, Y\n\nResetPPUScrollHi_Exit:\n\tSTA byte_RAM_506\n\tRTS\n\n\n;\n; High byte of the PPU scroll offset for nametable B.\n;\n; When mirroring vertically, nametable A is `$2000` and nametable B is `$2800`.\n; When mirroring horizontally, nametable A is `$2000` and nametable B is `$2400`.\n;\nPPUScrollHiOffsets:\n\t.db $28 ; vertical\n\t.db $24 ; horizontal\n\n\n; The sub-area \"page\" is the index in the DecodedLevelPageStart table.\n; This is why there are 10 blank pages in the jar enemy data.\nSubAreaPage:\n\t.db $0A\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_870C:\n\tLDA PPUScrollXMirror\n\tSTA PPUScrollXMirror_Backup\n\tLDA PPUScrollXHiMirror\n\tSTA PPUScrollXHiMirror_Backup\n\tLDA ScreenBoundaryLeftHi\n\tSTA ScreenBoundaryLeftHi_Backup\n\tINC byte_RAM_53D\n\tLDA SubAreaPage\n\tSTA CurrentLevelEntryPage\n\tJSR ResetPPUScrollHi\n\n\tLDA #$00\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tLDA SubAreaPage\n\tSTA ScreenBoundaryLeftHi\n\tJSR sub_BANK0_946D\n\n\tLDA SubAreaPage\n\tSTA byte_RAM_CE\n\tLDA #$E0\n\tSTA byte_RAM_506\n\tLDA SubAreaPage\n\tCLC\n\tADC #$F0\n\tSTA byte_RAM_505\n\tRTS\n\n; End of function sub_BANK0_870C\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_874C:\n\tLDA PPUScrollXMirror_Backup\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tLDA PPUScrollXHiMirror_Backup\n\tSTA PPUScrollXHiMirror\n\tLDA ScreenBoundaryLeftHi_Backup\n\tSTA ScreenBoundaryLeftHi\n\tLDA byte_RAM_53D\n\tBNE locret_BANK0_8784\n\n\tINC byte_RAM_53E\n\tINC byte_RAM_53D\n\tINC byte_RAM_D5\n\tJSR sub_BANK0_9428\n\n\tLDA byte_RAM_CF\n\tSTA byte_RAM_CE\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDA #$F0\n\tSTA byte_RAM_506\n\tSTA byte_RAM_507\n\tLDA byte_RAM_D0\n\tSTA byte_RAM_505\n\nlocret_BANK0_8784:\n\tRTS\n\n; End of function sub_BANK0_874C\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8785:\n\tLDA byte_RAM_CF\n\tSTA byte_RAM_CE\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDA #$F0\n\tSTA byte_RAM_506\n\tSTA byte_RAM_507\n\tLDA byte_RAM_D0\n\tCLC\n\tADC #$10\n\tADC #$00\n\tCMP #$0A\n\tBNE loc_BANK0_87A2\n\n\tLDA #$00\n\nloc_BANK0_87A2:\n\tSTA byte_RAM_505\n\tLDA #$01\n\tSTA byte_RAM_6\n\tRTS\n\n; End of function sub_BANK0_8785\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_87AA:\n\tLDX #$00\n\tSTX byte_RAM_537\n\tSTX byte_RAM_51C\n\tSTX NeedVerticalScroll\n\tJSR sub_BANK0_8812\n\n\tJSR sub_BANK0_8872\n\n\tLDA byte_RAM_506\n\tCMP byte_RAM_D1\n\tBNE loc_BANK0_87DA\n\n\tLDA byte_RAM_507\n\tCLC\n\tADC #$01\n\tCMP byte_RAM_D2\n\tBNE loc_BANK0_87DA\n\nloc_BANK0_87CB:\n\tLDA #$00\n\tSTA byte_RAM_53A\n\tSTA byte_RAM_53D\n\tSTA byte_RAM_53E\n\tINC byte_RAM_537\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_87DA:\n\tLDA byte_RAM_CE\n\tCMP byte_RAM_505\n\tBEQ loc_BANK0_87CB\n\n\tLDX #$00\n\tJMP loc_BANK0_87FC\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_87E6:\n\tLDA byte_RAM_CE, X\n\tSEC\n\tSBC #$10\n\tSTA byte_RAM_CE, X\n\tBCS locret_BANK0_87FB\n\n\tDEC byte_RAM_CE, X\n\tLDA byte_RAM_CE, X\n\tCMP #$0EF\n\tBNE locret_BANK0_87FB\n\n\tLDA #$F9\n\tSTA byte_RAM_CE, X\n\nlocret_BANK0_87FB:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_87FC:\n\tLDA byte_RAM_CE, X\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_CE, X\n\tBCC locret_BANK0_8811\n\n\tINC byte_RAM_CE, X\n\tLDA byte_RAM_CE, X\n\tCMP #$0A\n\tBNE locret_BANK0_8811\n\n\tLDA #$00\n\tSTA byte_RAM_CE, X\n\nlocret_BANK0_8811:\n\tRTS\n\n; End of function sub_BANK0_87AA\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8812:\n\tSTY byte_RAM_F\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tTAY\n\tLDA DecodedLevelPageStartLo_Bank1, Y\n\tSTA byte_RAM_E9\n\tLDA DecodedLevelPageStartHi_Bank1, Y\n\tSTA byte_RAM_EA\n\tLDA byte_RAM_CE, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_D7\n\tASL A\n\tSTA byte_RAM_D2\n\tLDY #$20\n\tLDA byte_RAM_CE, X\n\tLSR A\n\tBCS loc_BANK0_8837\n\n\tLDY #$24\n\nloc_BANK0_8837:\n\tSTY byte_RAM_D1\n\tLDY byte_RAM_F\n\tRTS\n\n; End of function sub_BANK0_8812\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_883C:\n\tSTX byte_RAM_8\n\tLDX byte_RAM_9\n\tLDY #$02\n\tLDA byte_RAM_CE, X\n\tSTA byte_RAM_3\n\tSEC\n\tSBC byte_RAM_1\n\tSTA byte_RAM_CE, X\n\tJSR sub_BANK0_8812\n\n\tLDA #$07\n\tSTA byte_RAM_E3\n\tLDA #$00\n\tSTA byte_RAM_D6\n\nloc_BANK0_8856:\n\tJSR sub_BANK0_8925\n\n\tLDA byte_RAM_E3\n\tBPL loc_BANK0_8856\n\n\tLDA byte_RAM_D2\n\tAND #$1C\n\tLSR A\n\tLSR A\n\tORA #$C0\n\tSTA byte_RAM_3BD\n\tLDA byte_RAM_D1\n\tORA #$03\n\tSTA byte_RAM_3BC\n\tLDX byte_RAM_8\n\tRTS\n\n; End of function sub_BANK0_883C\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8872:\n\tLDA #$0F\n\tSTA byte_RAM_E3\n\tLDA #$00\n\tSTA byte_RAM_D6\n\tSTA byte_RAM_D5\n\tTAX\n\nloc_BANK0_887D:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tSTA byte_RAM_51B\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\nloc_BANK0_8894:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tASL A\n\tASL A\n\tTAY\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_88A0\n\n\tINY\n\nloc_BANK0_88A0:\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_380, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_39E, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_381, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_39F, X\n\tINC byte_RAM_D6\n\tINX\n\tINX\n\tLDA byte_RAM_D7\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_D7\n\tLDA byte_RAM_D6\n\tCMP #$0F\n\tBCC loc_BANK0_887D\n\n\tLDA #$00\n\tSTA byte_RAM_3BC\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCS loc_BANK0_88F2\n\n\tLDA byte_RAM_D2\n\tAND #$02\n\tBEQ loc_BANK0_88FD\n\n\tLDA NeedVerticalScroll\n\tBNE loc_BANK0_88F8\n\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDX #$00\n\tSTX byte_RAM_9\n\tINX\n\tJSR sub_BANK0_8901\n\n\tLDA byte_RAM_3\n\tSTA byte_RAM_CE\n\tJSR sub_BANK0_8812\n\n\tJMP loc_BANK0_88FD\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_88F2:\n\tLDA byte_RAM_D2\n\tAND #$02\n\tBNE loc_BANK0_88FD\n\nloc_BANK0_88F8:\n\tLDA NeedVerticalScroll\n\tSTA byte_RAM_538\n\nloc_BANK0_88FD:\n\tINC byte_RAM_51C\n\tRTS\n\n; End of function sub_BANK0_8872\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8901:\n\tJSR sub_BANK0_883C\n\n\tLDX #$07\n\tSTX byte_RAM_E\n\tLDY #$00\n\nloc_BANK0_890A:\n\tLDX byte_RAM_E\n\tLDA EnemyArray_D9, X\n\tSTA unk_RAM_3BE, Y\n\tINY\n\tDEX\n\tDEX\n\tDEX\n\tDEX\n\tLDA EnemyArray_D9, X\n\tSTA unk_RAM_3BE, Y\n\tINY\n\tDEC byte_RAM_E\n\tLDA byte_RAM_E\n\tCMP #03\n\tBNE loc_BANK0_890A\n\n\tRTS\n\n; End of function sub_BANK0_8901\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8925:\n\tSTY byte_RAM_F\n\tLDA #01\n\tSTA byte_RAM_4\n\tLDY byte_RAM_D7\n\tLDX byte_RAM_E3\n\nloc_BANK0_892F:\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, X\n\tLDA (byte_RAM_E9), Y\n\tAND #$C0\n\tORA EnemyArray_D9, X\n\tSTA EnemyArray_D9, X\n\tINY\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, X\n\tLDA (byte_RAM_E9), Y\n\tAND #$C0\n\tORA EnemyArray_D9, X\n\tSTA EnemyArray_D9, X\n\tLDA byte_RAM_D7\n\tCLC\n\tADC #$10\n\tTAY\n\tSTA byte_RAM_D7\n\tDEC byte_RAM_4\n\tBPL loc_BANK0_892F\n\n\tDEC byte_RAM_E3\n\tLDY byte_RAM_F\n\tRTS\n\n; End of function sub_BANK0_8925\n\n\nSetObjectLocks:\n\tLDX #$07\n\nSetObjectLocks_Loop:\n\tSTA ObjectLock - 1, X\n\tDEX\n\tBPL SetObjectLocks_Loop\n\n\tRTS\n\n\n\n; Unused space in the original ($8966 - $89FF)\nunusedSpace $8A00, $FF\n\n\nGrowShrinkSFXIndexes:\n\t.db SoundEffect2_Shrinking\n\t.db SoundEffect2_Growing\n\n\nHandlePlayerState:\nIFDEF CONTROLLER_2_DEBUG\n\tJSR CheckPlayer2Joypad\nENDIF\n\n\tLDA PlayerState ; Handles player states?\n\tCMP #PlayerState_Lifting\n\tBCS loc_BANK0_8A26 ; If the player is changing size, just handle that\n\n\tLDA #$00 ; Check if the player needs to change size\n\tLDY #$10\n\tCPY PlayerHealth\n\tROL A\n\tEOR PlayerCurrentSize\n\tBEQ loc_BANK0_8A26\n\n\tLDY PlayerCurrentSize\n\tLDA GrowShrinkSFXIndexes, Y\n\tSTA SoundEffectQueue2\n\tLDA #$1E\n\tSTA PlayerStateTimer\n\tLDA #PlayerState_ChangingSize\n\tSTA PlayerState\n\nloc_BANK0_8A26:\n\tLDA #ObjAttrib_Palette0\n\tSTA PlayerAttributes\n\tLDA PlayerState\n\tJSR JumpToTableAfterJump ; Player state handling?\n\n\t.dw HandlePlayerState_Normal ; Normal\n\t.dw HandlePlayerState_Climbing ; Climbing\n\t.dw HandlePlayerState_Lifting ; Lifting\n\t.dw HandlePlayerState_ClimbingAreaTransition ; Climbing area transition\n\t.dw HandlePlayerState_GoingDownJar ; Going down jar\n\t.dw HandlePlayerState_ExitingJar ; Exiting jar\n\t.dw HandlePlayerState_HawkmouthEating ; Hawkmouth eating\n\t.dw HandlePlayerState_Dying ; Dying\n\t.dw HandlePlayerState_ChangingSize ; Changing size\n\n\nHandlePlayerState_Normal:\n\tJSR PlayerGravity\n\n\t; player animation frame, crouch jump charging\n\tJSR sub_BANK0_8C1A\n\n\t; maybe only y-collision?\n\tJSR PlayerTileCollision\n\n\t; screen boundary x-collision\n\tJSR PlayerAreaBoundaryCollision\n\n\tJSR ApplyPlayerPhysicsY\n\n\n;\n; Applies player physics on the x-axis\n;\nApplyPlayerPhysicsX:\n\tLDX #$00\n\tJSR ApplyPlayerPhysics\n\n\tLDA IsHorizontalLevel\n\tBNE ApplyPlayerPhysicsX_Exit\n\n\tSTA PlayerXHi\n\nApplyPlayerPhysicsX_Exit:\n\tRTS\n\n\n;\n; What goes up must come down\n;\nHandlePlayerState_Dying:\n\tLDA PlayerStateTimer\n\tBNE locret_BANK0_8A86\n\n\tLDA PlayerScreenYHi\n\tCMP #02\n\tBEQ LoseALife\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA PlayerYVelocity\n\tBMI loc_BANK0_8A72\n\n\tCMP #$39\n\tBCS locret_BANK0_8A86\n\nloc_BANK0_8A72:\n\tINC PlayerYVelocity\n\tINC PlayerYVelocity\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nLoseALife:\n\tLDA #02\n\tSTA PlayerAnimationFrame\n\tLDY #$01 ; Set game mode to title card\n\tDEC ExtraLives\n\tBNE SetGameModeAfterDeath\n\n\tINY ; If no lives, increase game mode\n; from 1 (title card) to 2 (game over)\n\nSetGameModeAfterDeath:\n\tSTY GameMode\n\nlocret_BANK0_8A86:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nHandlePlayerState_Lifting:\n\tLDA PlayerStateTimer\n\tBNE locret_BANK0_8AC1\n\n\tLDX ObjectBeingCarriedIndex\n\tLDY ObjectBeingCarriedTimer, X\n\tCPY #$02\n\tBCC loc_BANK0_8ABB\n\n\tCPY #$07\n\tBNE loc_BANK0_8A9D\n\n\tLDA #DPCM_ItemPull\n\tSTA DPCMQueue\n\nloc_BANK0_8A9D:\n\tDEC ObjectBeingCarriedTimer, X\n\tLDA PlayerLiftFrames, Y\n\tSTA PlayerAnimationFrame\n\tLDA EnemyState, X\n\tCMP #$06\n\tBEQ loc_BANK0_8AB0\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBNE loc_BANK0_8AB5\n\nloc_BANK0_8AB0:\n\tLDA PlayerLiftTimer - 2, Y\n\tBPL loc_BANK0_8AB8\n\nloc_BANK0_8AB5:\n\tLDA PickupSpeedAnimation - 2, Y\n\nloc_BANK0_8AB8:\n\tSTA PlayerStateTimer\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8ABB:\n\tSTA PlayerState\n\tINC PlayerInAir\n\nloc_BANK0_8ABF:\n\tINC PlayerDucking\n\nlocret_BANK0_8AC1:\n\tRTS\n\n\nPlayerLiftTimer:\n\t.db $00\n\t.db $01\n\t.db $01\n\t.db $01\n\nPlayerLiftFrames:\n\t.db $01\n\t.db $02\n\t.db $04\n\t.db $04\n\t.db $04\n\t.db $04\n\t.db $08\n\t.db $08\n\nbyte_BANK0_8ACE:\n\t.db $00\n\t.db $10\n\t.db $F0\n; ---------------------------------------------------------------------------\n\nHandlePlayerState_Climbing:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Down | ControllerInput_Up\n\tLSR A\n\tLSR A\n\tTAY\n\tCPY #$02\n\tBNE loc_BANK0_8ADF\n\n\tJSR PlayerClimbAnimation\n\nloc_BANK0_8ADF:\n\tLDA ClimbSpeed, Y\n\tSTA PlayerYVelocity\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tTAY\n\tLDA byte_BANK0_8ACE, Y\n\tSTA PlayerXVelocity\n\tLDA PlayerXLo\n\tCLC\n\tADC #$04\n\tAND #$0F\n\tCMP #$08\n\tBCS loc_BANK0_8B14\n\n\tLDY byte_BANKF_F00B\n\tLDA PlayerYVelocity\n\tBMI loc_BANK0_8B01\n\n\tINY\n\nloc_BANK0_8B01:\n\tLDX #$00\n\tJSR PlayerTileCollision_CheckClimbable\n\n\tBCS loc_BANK0_8B0E\n\nloc_BANK0_8B08:\n\tLDA PlayerYVelocity\n\tBPL loc_BANK0_8B14\n\n\tSTX PlayerYVelocity\n\nloc_BANK0_8B0E:\n\tJSR ApplyPlayerPhysicsX\n\n\tJMP ApplyPlayerPhysicsY\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8B14:\n\tLDA #$00\n\tSTA PlayerState\n\tRTS\n\n\n;\n; Does climbing animation and sound\n;\nPlayerClimbAnimation:\n\tLDA byte_RAM_10\n\tAND #$07\n\tBNE PlayerClimbAnimation_Exit\n\n\tLDA PlayerDirection\n\tEOR #$01\n\tSTA PlayerDirection\n\tLDA #SoundEffect2_Climbing\n\tSTA SoundEffectQueue2\n\nPlayerClimbAnimation_Exit:\n\tRTS\n\n\nClimbableTiles:\n\t.db BackgroundTile_Vine\n\t.db BackgroundTile_VineStandable\n\t.db BackgroundTile_VineBottom\n\t.db BackgroundTile_ClimbableSky\n\t.db BackgroundTile_Chain\n\t.db BackgroundTile_Ladder\n\t.db BackgroundTile_LadderShadow\n\t.db BackgroundTile_LadderStandable\n\t.db BackgroundTile_LadderStandableShadow\n\t.db BackgroundTile_ChainStandable\n\n\n;\n; Checks whether the player is on a climbable tile\n;\n; Input\n;   byte_RAM_0 = tile ID\n; Output\n;   C = set if the player is on a climbable tile\n;\nPlayerTileCollision_CheckClimbable:\n\tJSR sub_BANK0_924F\n\n\tLDA byte_RAM_0\n\tLDY #$09\n\nPlayerTileCollision_CheckClimbable_Loop:\n\tCMP ClimbableTiles, Y\n\tBEQ PlayerTileCollision_CheckClimbable_Exit\n\n\tDEY\n\tBPL PlayerTileCollision_CheckClimbable_Loop\n\n\tCLC\n\nPlayerTileCollision_CheckClimbable_Exit:\n\tRTS\n\n\nHandlePlayerState_GoingDownJar:\n\tLDA #ObjAttrib_BehindBackground\n\tSTA PlayerAttributes\n\tINC PlayerYLo\n\tLDA PlayerYLo\n\tAND #$0F\n\tBNE HandlePlayerState_GoingDownJar_Exit\n\n\tSTA PlayerState\n\tJSR DoAreaReset\n\n\tPLA\n\tPLA\n\tJSR StashPlayerPosition_Bank0\n\n\tLDA #TransitionType_Jar\n\tSTA TransitionType\n\tLDA InJarType\n\tBNE HandlePlayerState_GoingDownJar_NonWarp\n\n\tLDA #GameMode_Warp\n\tSTA GameMode\n\tRTS\n\nHandlePlayerState_GoingDownJar_NonWarp:\n\tCMP #$01\n\tBEQ HandlePlayerState_GoingDownJar_Regular\n\n\tSTA DoAreaTransition\n\tRTS\n\nHandlePlayerState_GoingDownJar_Regular:\n\tSTA InSubspaceOrJar\n\nHandlePlayerState_GoingDownJar_Exit:\n\tRTS\n\n\nHandlePlayerState_ExitingJar:\n\tLDA #ObjAttrib_BehindBackground\n\tSTA PlayerAttributes\n\tDEC PlayerYLo\n\tLDA PlayerYLo\n\tAND #$0F\n\tBNE locret_BANK0_8B86\n\n\tSTA PlayerState\n\nlocret_BANK0_8B86:\n\tRTS\n\n; ---------------------------------------------------------------------------\nbyte_BANK0_8B87:\n\t.db $00\n\t.db $FF\n\nbyte_BANK0_8B89:\n\t.db $EE\n\t.db $DE\n\nbyte_BANK0_8B8B:\n\t.db $09\n\t.db $A1\n; ---------------------------------------------------------------------------\n\nHandlePlayerState_ClimbingAreaTransition:\n\tLDA PlayerYVelocity\n\tASL A\n\tROL A\n\tAND #$01\n\tTAY\n\tLDA PlayerScreenYHi\n\tCMP byte_BANK0_8B87, Y\n\tBNE loc_BANK0_8BB0\n\n\tLDA PlayerScreenYLo\n\tCMP byte_BANK0_8B89, Y\n\tBNE loc_BANK0_8BB0\n\n\tJSR DoAreaReset\n\n\tINC DoAreaTransition\n\tLDA #TransitionType_Vine\n\tSTA TransitionType\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8BB0:\n\tLDA PlayerScreenYHi\n\tBNE loc_BANK0_8BBD\n\n\tLDA PlayerScreenYLo\n\tCMP byte_BANK0_8B8B, Y\n\tBEQ loc_BANK0_8BC6\n\nloc_BANK0_8BBD:\n\tTYA\n\tBEQ loc_BANK0_8BC3\n\n\tJSR PlayerClimbAnimation\n\nloc_BANK0_8BC3:\n\tJMP ApplyPlayerPhysicsY\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8BC6:\n\tLDA #PlayerState_Climbing\n\tSTA PlayerState\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nHandlePlayerState_HawkmouthEating:\n\tLDA PlayerStateTimer\n\tBEQ loc_BANK0_8BE9\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA_abs PlayerCollision\n\n\tBEQ locret_BANK0_8BEB\n\n\tLDA #ObjAttrib_BehindBackground\n\tSTA PlayerAttributes\n\tLDA #$04\n\tSTA PlayerXVelocity\n\tLDA #$01\n\tSTA PlayerDirection\n\nloc_BANK0_8BE3:\n\tJSR ApplyPlayerPhysicsX\n\n\tJMP PlayerWalkJumpAnim\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8BE9:\n\tSTA PlayerState\n\nlocret_BANK0_8BEB:\n\tRTS\n\n\n; Alternate between large and small graphics on these frames when changing size\nChangingSizeKeyframes:\n\t.db $05\n\t.db $0A\n\t.db $0F\n\t.db $14\n\t.db $19\n\n\nHandlePlayerState_ChangingSize:\n\tLDA PlayerStateTimer\n\tBEQ loc_BANK0_8C0D\n\n\tINC DamageInvulnTime\n\n\tLDY #$04\nHandlePlayerState_ChangingSize_Loop:\n\tCMP ChangingSizeKeyframes, Y\n\tBNE HandlePlayerState_ChangingSize_Next\n\n\tLDA PlayerCurrentSize\n\tEOR #$01\n\tSTA PlayerCurrentSize\n\tJMP LoadCharacterCHRBanks\n\nHandlePlayerState_ChangingSize_Next:\n\tDEY\n\tBPL HandlePlayerState_ChangingSize_Loop\n\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8C0D:\n\tLDY PlayerAnimationFrame\n\tCPY #$0A\n\tBNE loc_BANK0_8C15\n\n\tLDA #PlayerState_Climbing\n\nloc_BANK0_8C15:\n\tSTA PlayerState\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nPlayerControlAcceleration:\n\t.db $FE\n\t.db $02\n\n; =============== S U B R O U T I N E =======================================\n\n; player crouch subroutine\nsub_BANK0_8C1A:\n\tJSR PlayerWalkJumpAnim\n\n\tLDA PlayerInAir\n\tBNE ResetPartialCrouchJumpTimer\n\n\tLDA PlayerDucking\n\tBEQ loc_BANK0_8C2B\n\n\tLDA PlayerStateTimer\n\tBNE loc_BANK0_8C92\n\n\tDEC PlayerDucking\n\nloc_BANK0_8C2B:\n\tLDA Player1JoypadPress\n\tBPL loc_BANK0_8C3D ; branch if not pressing A Button\n\n\tINC PlayerInAir\n\tLDA #SpriteAnimation_Jumping\n\tSTA PlayerAnimationFrame\n\tJSR PlayerStartJump\n\n\tLDA #SoundEffect2_Jump\n\tSTA SoundEffectQueue2\n\nloc_BANK0_8C3D:\n\tLDA PlayerRidingCarpet\n\tBNE loc_BANK0_8C92\n\n\tLDA QuicksandDepth\n\tBNE ResetPartialCrouchJumpTimer\n\n\tLDA Player1JoypadHeld ; skip if down button is not pressed\n\tAND #ControllerInput_Down\n\tBEQ ResetPartialCrouchJumpTimer\n\n\tINC PlayerDucking ; set ducking state?\n\tLDA #SpriteAnimation_Ducking ; set ducking animation\n\tSTA PlayerAnimationFrame\n\tLDA PlayerInAir ; skip ahead if player is in air\n\tBNE ResetPartialCrouchJumpTimer\n\n\tLDA CrouchJumpTimer ; check if crouch jump is charged\n\tCMP #$3C\n\tBCS loc_BANK0_8C92\n\n\tINC CrouchJumpTimer ; increment crouch jump charge\n\tBNE loc_BANK0_8C92\n\nResetPartialCrouchJumpTimer: ; reset crouch jump timer if it isn't full\n\tLDA CrouchJumpTimer\n\tCMP #$3C ; max crouch jump timer\n\tBCS loc_BANK0_8C6F\n\n\tLDA #$00 ; reset crouch jump timer to zero\n\tSTA CrouchJumpTimer\n\nloc_BANK0_8C6F:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tBEQ loc_BANK0_8C92\n\n\tAND #$01\n\tSTA PlayerDirection\n\tTAY\n\tLDA GroundSlipperiness\n\tLSR A\n\tLSR A\n\tAND byte_RAM_10\n\tBNE ResetCrouchJumpTimer\n\n\tLDA PlayerXVelocity\n\tCLC\n\tADC PlayerControlAcceleration, Y\n\tSTA PlayerXVelocity\n\nResetCrouchJumpTimer:\n\tLDA #$00\n\tSTA CrouchJumpTimer\n\tBEQ loc_BANK0_8C95 ; unconditional branch?\n\nloc_BANK0_8C92:\n\tJSR sub_BANK0_8D2C\n\nloc_BANK0_8C95:\n\tJSR sub_BANK0_8DC0\n\n\tRTS\n\n; End of function sub_BANK0_8C1A\n\n\n;\n; Starts a jump\n;\n; The jump height is based on a lookup table using the following bitfield:\n;\n; %xxxxxRCI\n;   R = whether the player is running\n;   C = whether the crouch timer is charged\n;   I = whether the player is holding an item\n;\nPlayerStartJump:\n\tLDA QuicksandDepth\n\tCMP #$02\n\tBCC PlayerStartJump_LoadXVelocity\n\n\t; Quicksand\n\tLDA JumpHeightQuicksand\n\tSTA PlayerYVelocity\n\tBNE PlayerStartJump_Exit\n\nPlayerStartJump_LoadXVelocity:\n\t; The x-velocity may affect the jump\n\tLDA PlayerXVelocity\n\tBPL PlayerStartJump_CheckXSpeed\n\n\t; Absolute value of x-velocity\n\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nPlayerStartJump_CheckXSpeed:\n\t; Set carry flag if the x-speed is fast enough\n\tCMP #$08\n\t; Clear y subpixel\n\tLDA #$00\n\tSTA PlayerYSubpixel\n\t; Set bit for x-speed using carry flag\n\tROL A\n\n\t; Check crouch jump timer\n\tLDY CrouchJumpTimer\n\tCPY #$3C\n\tBCC PlayerStartJump_SetYVelocity\n\n\t; Clear Player1JoypadHeld for a crouch jump\n\tLDA #$00\n\tSTA Player1JoypadHeld\n\nPlayerStartJump_SetYVelocity:\n\t; Set bit for charged jump using carry flag\n\tROL A\n\t; Set bit for whether player is holding an item\n\tASL A\n\tORA HoldingItem\n\tTAY\n\tLDA JumpHeightStanding, Y\n\tSTA PlayerYVelocity\n\n\tLDA JumpFloatLength\n\tSTA JumpFloatTimer\n\nPlayerStartJump_Exit:\n\tLDA #$00\n\tSTA CrouchJumpTimer\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\n;\n; Apply gravity to the player's y-velocity\n;\n; This also handles floating\n;\nPlayerGravity:\n\tLDA QuicksandDepth\n\tCMP #$02\n\tBCC loc_BANK0_8CE5\n\n\tLDA GravityQuicksand\n\tBNE loc_BANK0_8D13\n\nloc_BANK0_8CE5:\n\tLDA GravityWithoutJumpButton\n\tLDY Player1JoypadHeld ; holding jump button to fight physics\n\tBPL PlayerGravity_Falling\n\n\tLDA GravityWithJumpButton\n\tLDY PlayerYVelocity\n\tCPY #$0FC\n\tBMI PlayerGravity_Falling\n\n\tLDY JumpFloatTimer\n\tBEQ PlayerGravity_Falling\n\n\tDEC JumpFloatTimer\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$03\n\tTAY\n\tLDA FloatingYVelocity, Y\n\tSTA PlayerYVelocity\n\tRTS\n\nPlayerGravity_Falling:\n\tLDY PlayerYVelocity\n\tBMI loc_BANK0_8D13\n\n\tCPY #$39\n\tBCS loc_BANK0_8D18\n\nloc_BANK0_8D13:\n\tCLC\n\tADC PlayerYVelocity\n\tSTA PlayerYVelocity\n\nloc_BANK0_8D18:\n\tLDA JumpFloatTimer\n\tCMP JumpFloatLength\n\tBEQ PlayerGravity_Exit\n\n\tLDA #$00\n\tSTA JumpFloatTimer\n\nPlayerGravity_Exit:\n\tRTS\n\n\nFloatingYVelocity:\n\t.db $FC\n\t.db $00\n\t.db $04\n\t.db $00\n\nPlayerXDeceleration:\n\t.db $FD\n\t.db $03\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8D2C:\n\tLDA PlayerInAir\n\tBNE locret_BANK0_8D61\n\n\tLDA byte_RAM_10\n\tAND GroundSlipperiness\n\tBNE loc_BANK0_8D4D\n\n\tLDA PlayerXVelocity\n\tAND #$80\n\tASL A\n\tROL A\n\tTAY\n\tLDA PlayerXVelocity\n\tADC PlayerXDeceleration, Y\n\tTAX\n\tEOR PlayerControlAcceleration, Y\n\tBMI loc_BANK0_8D4B\n\n\tLDX #$00\n\nloc_BANK0_8D4B:\n\tSTX PlayerXVelocity\n\nloc_BANK0_8D4D:\n\tLDA PlayerDucking\n\tBNE locret_BANK0_8D61\n\n\tLDA PlayerAnimationFrame\n\tCMP #SpriteAnimation_Throwing\n\tBEQ locret_BANK0_8D61\n\n\tLDA #SpriteAnimation_Standing\n\tSTA PlayerAnimationFrame\n\tLDA #$00\n\tSTA PlayerWalkFrameCounter\n\nloc_BANK0_8D5F:\n\tSTA PlayerWalkFrame\n\nlocret_BANK0_8D61:\n\tRTS\n\n; End of function sub_BANK0_8D2C\n\n; ---------------------------------------------------------------------------\n\nPlayerWalkFrameDurations:\n\t.db $0C\n\t.db $0A\n\t.db $08\n\t.db $05\n\t.db $03\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $02\n\nPlayerWalkFrames:\n\t.db SpriteAnimation_Standing ; $00\n\t.db SpriteAnimation_Walking ; $01\n\t.db SpriteAnimation_Throwing ; ; $02\n\n; =============== S U B R O U T I N E =======================================\n\n; jump animation subroutine\nPlayerWalkJumpAnim:\n\tLDA PlayerDucking ; exit if we're ducking, since the player will be ducking\n\tBNE ExitPlayerWalkJumpAnim\n\n\t; if we're not in the air, skip ahead\n\tLDA PlayerInAir\n\tBEQ PlayerWalkAnim\n\n\tLDA CurrentCharacter ; does this character get to flutter jump?\n\tCMP #Character_Luigi\n\tBNE ExitPlayerWalkJumpAnim\n\n\tLDA PlayerWalkFrameCounter\n\tBNE UpdatePlayerAnimationFrame ; maintain current frame\n\n\tLDA #$02 ; fast animation\n\tBNE NextPlayerWalkFrame\n\nPlayerWalkAnim:\n\tLDA PlayerWalkFrameCounter\n\tBNE UpdatePlayerAnimationFrame ; maintain current frame\n\n\tLDA #$05\n\tLDY GroundSlipperiness\n\tBNE NextPlayerWalkFrame\n\n\tLDA PlayerXVelocity\n\tBPL PlayerWalkFrameDuration\n\n\t; use absolute value of PlayerXVelocity\n\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nPlayerWalkFrameDuration:\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA PlayerWalkFrameDurations, Y\n\nNextPlayerWalkFrame:\n\tSTA PlayerWalkFrameCounter ; hold frame for duration specified in accumulator\n\tDEC PlayerWalkFrame\n\tBPL UpdatePlayerAnimationFrame\n\n\tLDA #$01 ; next walk frame\n\tSTA PlayerWalkFrame\n\nUpdatePlayerAnimationFrame:\n\tLDY PlayerWalkFrame\n\tLDA PlayerWalkFrames, Y\n\tSTA PlayerAnimationFrame\n\nExitPlayerWalkJumpAnim:\n\tRTS\n\n\nThrowXVelocity:\n\t.db $00 ; standing, left (blocks)\n\t.db $00 ; standing, right (blocks)\n\t.db $D0 ; moving, left (blocks)\n\t.db $30 ; moving, right (blocks)\n\t.db $D0 ; standing, left (projectiles)\n\t.db $30 ; standing, right (projectiles)\n\t.db $D0 ; moving, left (projectiles)\n\t.db $30 ; moving, right (projectiles)\n\nThrowYVelocity:\n\t.db $18 ; standing (blocks)\n\t.db $00 ; moving (blocks)\n\t.db $18 ; standing (projectiles)\n\t.db $F8 ; moving (projectiles)\n\n; used for objects that can be thrown next to the player\nSoftThrowOffset:\n\t.db $F0\n\t.db $10\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_8DC0:\n\tLDY #$02\n\tLDA QuicksandDepth\n\tCMP #$02\n\tBCS loc_BANK0_8DE0\n\n\tDEY\n\tLDA HoldingItem\n\tBEQ loc_BANK0_8DDF\n\n\tLDX ObjectBeingCarriedIndex\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCC loc_BANK0_8DE0\n\n\tCMP #Enemy_MushroomBlock\n\tBCC loc_BANK0_8DDF\n\n\tCMP #Enemy_FallingLogs\n\tBCC loc_BANK0_8DE0\n\nloc_BANK0_8DDF:\n\tDEY\n\nloc_BANK0_8DE0:\n\tLDA RunSpeedRight, Y\n\tBIT Player1JoypadHeld\n\tBVC loc_BANK0_8DEC\n\n\tLSR A\n\tCLC\n\tADC RunSpeedRight, Y\n\nloc_BANK0_8DEC:\n\tCMP PlayerXVelocity\n\tBPL loc_BANK0_8DF2\n\n\tSTA PlayerXVelocity\n\nloc_BANK0_8DF2:\n\tLDA RunSpeedLeft, Y\n\tBIT Player1JoypadHeld\n\tBVC loc_BANK0_8DFF\n\n\tSEC\n\tROR A\n\tCLC\n\tADC RunSpeedLeft, Y\n\nloc_BANK0_8DFF:\n\tCMP PlayerXVelocity\n\tBMI loc_BANK0_8E05\n\n\tSTA PlayerXVelocity\n\nloc_BANK0_8E05:\n\tBIT Player1JoypadPress\n\tBVC locret_BANK0_8E41\n\n\tLDA HoldingItem\n\tBEQ locret_BANK0_8E41\n\n\tLDY #$00\n\tLDX ObjectBeingCarriedIndex\n\tLDA EnemyState, X\n\tCMP #EnemyState_Sand\n\tBEQ locret_BANK0_8E41\n\n\tLDA ObjectType, X\n\tCMP #Enemy_MushroomBlock\n\tBCC loc_BANK0_8E22\n\n\tCMP #Enemy_POWBlock\n\tBCC loc_BANK0_8E28\n\nloc_BANK0_8E22:\n\tCMP #Enemy_Bomb\n\tBCC loc_BANK0_8E42\n\n\tLDY #$02\n\nloc_BANK0_8E28:\n\tSTY byte_RAM_7\n\tLDA PlayerDirection\n\tASL A\n\tORA PlayerDucking\n\tTAX\n\tLDY byte_BANKF_F006, X\n\tLDX #$00\n\tJSR sub_BANK0_924F\n\n\tLDA byte_RAM_0\n\tLDY byte_RAM_7\n\tJSR CheckTileUsesCollisionType\n\n\tBCC loc_BANK0_8E42\n\t; else carried item can't be thrown\n\nlocret_BANK0_8E41:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_8E42:\n\tLDA #SpriteAnimation_Throwing\n\tSTA PlayerAnimationFrame\n\tLDA #$02\n\tSTA PlayerWalkFrame\n\tLDA #$0A\n\tSTA PlayerWalkFrameCounter\n\tDEC HoldingItem\n\tLDA #SoundEffect1_ThrowItem\n\tSTA SoundEffectQueue1\n\tLDA #$00\n\tSTA PlayerDucking\n\tSTA Player1JoypadPress\n\tSTA byte_RAM_1\n\tLDX ObjectBeingCarriedIndex\n\tLDA #Enemy_Coin\n\tCMP ObjectType, X\n\tROL byte_RAM_1\n\tLDA PlayerXVelocity\n\tBPL loc_BANK0_8E6F\n\n\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nloc_BANK0_8E6F:\n\tCMP #$08\n\tROL byte_RAM_1\n\tBNE loc_BANK0_8E89\n\n\tLDY PlayerDirection\n\tLDA SoftThrowOffset, Y\n\tCLC\n\tADC ObjectXLo, X\n\tSTA ObjectXLo, X\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK0_8E89\n\n\tDEY\n\tTYA\n\tADC ObjectXHi, X\n\nloc_BANK0_8E87:\n\tSTA ObjectXHi, X\n\nloc_BANK0_8E89:\n\tLDY byte_RAM_1\n\tLDA ThrowYVelocity, Y\n\tSTA ObjectYVelocity, X\n\tLDA byte_RAM_1\n\tASL A\n\tORA PlayerDirection\n\tTAY\n\tLDA ThrowXVelocity, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$01\n\tSTA EnemyArray_42F, X\n\tLSR A\n\tSTA ObjectBeingCarriedTimer, X\n\tRTS\n\n\n;\n; Applies player physics on the y-axis\n;\nApplyPlayerPhysicsY:\n\tLDX #$0A\n\n;\n; Applies player physics, although could theoretically be used for objects too\n;\n; Input\n;   X = direction ($00 for horizontal, $0A for vertical)\n;\nApplyPlayerPhysics:\n\t; Add acceleration to velocity\n\tLDA PlayerXVelocity, X\n\tCLC\n\tADC PlayerXAcceleration, X\n\tPHP\n\tBPL loc_BANK0_8EB4\n\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\nloc_BANK0_8EB4:\n\tPHA\n\t; Upper nybble of velocity is for lo position\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\n\t; Lower nybble of velocity is for subpixel position\n\tPLA\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCLC\n\n\tADC PlayerXSubpixel, X\n\tSTA PlayerXSubpixel, X\n\n\tTYA\n\tADC #$00\n\tPLP\n\tBPL loc_BANK0_8ED1\n\n\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nloc_BANK0_8ED1:\n\tLDY #$00\n\tCMP #$00\n\tBPL loc_BANK0_8ED8\n\n\tDEY\n\nloc_BANK0_8ED8:\n\tCLC\n\tADC PlayerXLo, X\n\tSTA PlayerXLo, X\n\tTYA\n\tADC PlayerXHi, X\n\tSTA PlayerXHi, X\n\tLDA #$00\n\tSTA PlayerXAcceleration, X\n\tRTS\n\n\n;\n; Jumpthrough collision results\n;\n; This table determines per direction whether a tile is solid (for jumpthrough\n; blocks) or interactive (for spikes/ice/conveyors)\n;\n;   $01 = true\n;   $02 = false\n;\nJumpthroughTileCollisionTable:\nInteractiveTileCollisionTable:\n\t.db $02 ; jumpthrough bottom (y-velocity < 0)\n\t.db $02\n\t.db $01 ; jumpthrough top (y-velocity > 0)\n\t.db $01\n\t.db $02 ; jumpthrough right (x-velocity < 0)\n\t.db $02\n\t.db $02 ; jumpthrough left (x-velocity > 0)\n\t.db $02\n\nIFDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckPlayerTileCollisionAttributesTable:\n\t.db %00001000 ; jumpthrough bottom (y-velocity < 0)\n\t.db %00001000\n\t.db %00000100 ; jumpthrough top (y-velocity > 0)\n\t.db %00000100\n\t.db %00000010 ; jumpthrough right (x-velocity < 0)\n\t.db %00000010\n\t.db %00000001 ; jumpthrough left (x-velocity > 0)\n\t.db %00000001\nENDIF\n\n;\n; Collision flags that should be set if a given collision check passes\n;\nEnableCollisionFlagTable:\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Right\n\t.db CollisionFlags_Right\n\nConveyorSpeedTable:\n\t.db $F0\n\t.db $10\n\n\n;\n; Player Tile Collision\n; =====================\n;\n; Handles player collision with background tiles\n;\nPlayerTileCollision:\n\t; Reset a bunch of collision flags\n\tLDA #$00\n\tSTA PlayerCollision\n\tSTA GroundSlipperiness\n\tSTA byte_RAM_7\n\tSTA byte_RAM_A ; conveyor\n\tSTA byte_RAM_E ; spikes\n\tSTA byte_RAM_C ; ice\n\n\tJSR PlayerTileCollision_CheckCherryAndClimbable\n\n\t; Determine bounding box lookup index\n\tLDA PlayerDucking\n\tASL A\n\tORA HoldingItem\n\tTAX\n\n\t; Look up the bounding box for collision detection\n\tLDA byte_BANKF_F000, X\n\tSTA byte_RAM_8\n\n\t; Determine whether the player is going up\n\tLDA PlayerYVelocity\n\tCLC\n\tADC PlayerYAcceleration\n\tBPL PlayerTileCollision_Downward\n\nPlayerTileCollision_Upward:\n\tJSR CheckPlayerTileCollision_Twice ; use top two tiles\n\tJSR CheckPlayerTileCollision_IncrementTwice ; skip bottom two tiles\n\n\tLDA PlayerCollision\n\tBNE PlayerTileCollision_CheckDamageTile\n\tBEQ PlayerTileCollision_Horizontal\n\nPlayerTileCollision_Downward:\n\tJSR CheckPlayerTileCollision_IncrementTwice ; skip top two tiles\n\tJSR CheckPlayerTileCollision_Twice ; use bottom two tiles\n\n\tLDA PlayerCollision\n\tBNE PlayerTileCollision_CheckInteractiveTiles\n\n\tLDA #$00\n\tLDX #$01\n\n\t; Do the quicksand check in worlds 2 and 6\n\tLDY CurrentWorldTileset\n\tCPY #$01\n\tBEQ PlayerTileCollision_Downward_CheckQuicksand\n\n\tCPY #$05\nIFNDEF ALWAYS_ALLOW_QUICKSAND\n\tBNE PlayerTileCollision_Downward_AfterCheckQuicksand\nELSE\n\tNOP\n\tNOP\nENDIF\n\nPlayerTileCollision_Downward_CheckQuicksand:\n\tJSR PlayerTileCollision_CheckQuicksand\n\nPlayerTileCollision_Downward_AfterCheckQuicksand:\n\tSTA QuicksandDepth\n\tSTX PlayerInAir\n\tJMP PlayerTileCollision_Horizontal\n\nPlayerTileCollision_CheckInteractiveTiles:\n\t; Reset quicksand depth\n\tLDA #$00\n\tSTA QuicksandDepth\n\n\tLDA PlayerYLo\n\tAND #$0C\n\tBNE PlayerTileCollision_Horizontal\n\n\tSTA PlayerInAir\n\tLDA PlayerYLo\n\tAND #$F0\n\tSTA PlayerYLo\n\nPlayerTileCollision_CheckConveyorTile:\n\tLSR byte_RAM_A\n\tBCC PlayerTileCollision_CheckSlipperyTile\n\n\tLDX byte_RAM_A\n\tLDA ConveyorSpeedTable, X\n\tSTA PlayerXAcceleration\n\nPlayerTileCollision_CheckSlipperyTile:\n\tLSR byte_RAM_C\n\tBCC PlayerTileCollision_CheckJar\n\n\tLDA #$0F\n\tSTA GroundSlipperiness\n\nPlayerTileCollision_CheckJar:\n\tJSR TileBehavior_CheckJar\n\nPlayerTileCollision_CheckDamageTile:\n\tLDA #$00\n\tSTA PlayerYVelocity\n\tSTA PlayerYAcceleration\n\tLDA StarInvincibilityTimer\n\tBNE PlayerTileCollision_Horizontal\n\n\tLSR byte_RAM_E\n\tBCC PlayerTileCollision_Horizontal\n\n\tLDA PlayerScreenX\n\tSTA SpriteTempScreenX\n\tROR byte_RAM_12\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\tJSR PlayerTileCollision_HurtPlayer\nELSE\n\tLDA byte_RAM_E\n\tCMP #$02\n\tBCC PlayerTileCollision_DamageTile\n\tBNE PlayerTileCollision_HealthTile\n\n\t; instant kill\n\tLDY #$0F\n\tSTY PlayerHealth\n\nPlayerTileCollision_DamageTile:\n\tJSR PlayerTileCollision_HurtPlayer\n\tJMP PlayerTileCollision_Horizontal\n\nPlayerTileCollision_HealthTile:\n\tJSR RestorePlayerToFullHealth\nENDIF\n\nPlayerTileCollision_Horizontal:\n\tLDY #$02\n\tLDA PlayerXVelocity\n\tCLC\n\tADC PlayerXAcceleration\n\tBMI loc_BANK0_8FA3\n\n\tDEY\n\tJSR CheckPlayerTileCollision_IncrementTwice\n\nloc_BANK0_8FA3:\n\tSTY PlayerMovementDirection\n\tJSR CheckPlayerTileCollision_Twice\n\n\tLDA PlayerCollision\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ PlayerTileCollision_Exit\n\n\tJMP PlayerHorizontalCollision_Bank0\n\nPlayerTileCollision_Exit:\n\tRTS\n\n\n;\n; Check collision attributes for the next two tiles\n;\n; Input\n;   byte_RAM_7: collision direction\n;   byte_RAM_8: bounding box offset\n;\n; Output\n;   byte_RAM_7 += 2\n;   byte_RAM_8 += 2\n;\nCheckPlayerTileCollision_Twice:\n\tJSR CheckPlayerTileCollision\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckPlayerTileCollision:\n\tLDX #$00\n\tLDY byte_RAM_8\n\tJSR sub_BANK0_924F\n\n\tLDX byte_RAM_7\n\tLDY JumpthroughTileCollisionTable, X\n\tLDA byte_RAM_0\n\n\tJSR CheckTileUsesCollisionType\n\n\tBCC CheckPlayerTileCollision_Exit\n\nCheckPlayerTileCollision_CheckSpikes:\n\tCMP #BackgroundTile_Spikes\n\tBNE CheckPlayerTileCollision_CheckIce\n\n\tLDA InteractiveTileCollisionTable, X\n\tSTA byte_RAM_E\n\tBNE CheckPlayerTileCollision_UpdatePlayerCollision\n\nCheckPlayerTileCollision_CheckIce:\n\tCMP #BackgroundTile_JumpThroughIce\n\tBNE CheckPlayerTileCollision_CheckConveyor\n\n\tLDA InteractiveTileCollisionTable, X\n\tSTA byte_RAM_C\n\tBNE CheckPlayerTileCollision_UpdatePlayerCollision\n\nCheckPlayerTileCollision_CheckConveyor:\n\tSEC\n\tSBC #BackgroundTile_ConveyorLeft\n\tCMP #$02\n\tBCS CheckPlayerTileCollision_UpdatePlayerCollision\n\n\tASL A\n\tORA InteractiveTileCollisionTable, X\n\tSTA byte_RAM_A\n\nCheckPlayerTileCollision_UpdatePlayerCollision:\n\tLDA EnableCollisionFlagTable, X\n\tORA PlayerCollision\n\tSTA PlayerCollision\n\nCheckPlayerTileCollision_Exit:\n\tJMP CheckPlayerTileCollision_Increment\n\nELSE\n; custom behavior using tile attribute table\nCheckPlayerTileCollision:\n\tLDX #$00\n\tLDY byte_RAM_8\n\tJSR sub_BANK0_924F\n\n\tLDX byte_RAM_7\n\tLDY byte_RAM_0\n\n\t; check tile attributes\n\tLDA TileCollisionAttributesTable, Y\n\tAND CheckPlayerTileCollisionAttributesTable, X\n\n\tBEQ CheckPlayerTileCollision_CheckSpikes\n\n\tLDA EnableCollisionFlagTable, X\n\tORA PlayerCollision\n\tSTA PlayerCollision\n\nCheckPlayerTileCollision_CheckSpikes:\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00000011\n\tBEQ CheckPlayerTileCollision_CheckIce\n\n\tASL A\n\tORA #%00000001\n\tSTA byte_RAM_E\n\nCheckPlayerTileCollision_CheckIce:\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00001100\n\tBEQ CheckPlayerTileCollision_CheckConveyor\n\tCMP #%00000100\n\tBNE CheckPlayerTileCollision_CheckConveyor\n\n\tLDA #$01\n\tSTA byte_RAM_C\n\tBNE CheckPlayerTileCollision_Exit\n\nCheckPlayerTileCollision_CheckConveyor:\n\tCMP #%00001100\n\tBNE CheckPlayerTileCollision_Exit\n\n\tTYA\n\tAND #%00000001\n\tASL A\n\tORA #%00000001\n\tSTA byte_RAM_A\n\nCheckPlayerTileCollision_Exit:\n\tJMP CheckPlayerTileCollision_Increment\nENDIF\n\n\n;\n; Skip two tiles\n;\n; Output\n;   byte_RAM_7 += 2\n;   byte_RAM_8 += 2\n;\nCheckPlayerTileCollision_IncrementTwice:\n\tJSR CheckPlayerTileCollision_Increment\n\nCheckPlayerTileCollision_Increment:\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tRTS\n\n\nPlayerTileCollision_CheckCherryAndClimbable:\n\tLDY byte_BANKF_F00A\n\n\t; byte_RAM_10 seems to be a global counter\n\t; this code increments Y every other frame, but why?\n\tLDA byte_RAM_10\n\tLSR A\n\tBCS PlayerTileCollision_CheckCherryAndClimbable_AfterTick\n\tINY\n\nPlayerTileCollision_CheckCherryAndClimbable_AfterTick:\n\tLDX #$00\n\tJSR PlayerTileCollision_CheckClimbable\n\n\tBCS PlayerTileCollision_Climbable\n\n\tLDA byte_RAM_0\n\tCMP #BackgroundTile_Cherry\n\tBNE PlayerTileCollision_Climbable_Exit\n\n\tINC CherryCount\n\tLDA CherryCount\n\tSBC #$05\n\tBNE PlayerTileCollision_Cherry\n\n\tSTA CherryCount\n\tJSR CreateStarman\n\nPlayerTileCollision_Cherry:\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\tLDA #BackgroundTile_Sky\n\tJMP loc_BANK0_937C\n\nPlayerTileCollision_Climbable:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Down | ControllerInput_Up\n\tBEQ PlayerTileCollision_Climbable_Exit\n\n\tLDY HoldingItem\n\tBNE PlayerTileCollision_Climbable_Exit\n\n\tLDA PlayerXLo\n\tCLC\n\tADC #$04\n\tAND #$0F\n\tCMP #$08\n\tBCS PlayerTileCollision_Climbable_Exit\n\n\tLDA #PlayerState_Climbing\n\tSTA PlayerState\n\tSTY PlayerInAir\n\tSTY PlayerDucking\n\tLDA #SpriteAnimation_Climbing\n\tSTA PlayerAnimationFrame\n\n\t; Break JSR PlayerTileCollision_CheckCherryAndClimbable\n\tPLA\n\tPLA\n\t; Break JSR PlayerTileCollision\n\tPLA\n\tPLA\n\nPlayerTileCollision_Climbable_Exit:\n\tRTS\n\n\n;\n; Check whether a tile should use the given collision handler type\n;\n; Input\n;   A = tile ID\n;   Y = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)\n; Output\n;   C = whether or not collision type Y is relevant\n;\nCheckTileUsesCollisionType:\n\tPHA ; stash tile ID for later\n\n\t; determine which tile table to use (0-3)\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\n\t; add the offset for the type of collision we're checking\n\tADC TileGroupTable, Y\n\tTAY\n\n\t; check which side of the tile ID pivot we're on\n\tPLA\n\tCMP TileSolidnessTable, Y\n\tRTS\n\n\n;\n; These map the two high bits of a tile to offets in TileSolidnessTable\n;\nTileGroupTable:\n\t.db $00 ; solid to mushroom blocks\n\t.db $04 ; solid on top\n\t.db $08 ; solid on all sides\n\n\nPickUpToEnemyTypeTable:\n\t.db Enemy_MushroomBlock ; $00\n\t.db Enemy_MushroomBlock ; $01\n\t.db Enemy_MushroomBlock ; $02\n\t.db Enemy_POWBlock ; $03\n\t.db Enemy_Coin ; $04\n\t.db Enemy_VegetableLarge ; $05\n\t.db Enemy_VegetableSmall ; $06\n\t.db Enemy_Rocket ; $07\n\t.db Enemy_Shell ; $08\n\t.db Enemy_Bomb ; $09\n\t.db Enemy_SubspacePotion ; $0A\n\t.db Enemy_Mushroom1up ; $0B\n\t.db Enemy_POWBlock ; $0C\n\t.db Enemy_BobOmb ; $0D\n\t.db Enemy_MushroomBlock ; $0E ; this one seems to be overridden for digging in sand\n\n\n; find a slot for the item being lifted\nloc_BANK0_9074:\n\tLDX #$06\n\nloc_BANK0_9076:\n\tLDA EnemyState, X\n\tBEQ loc_BANK0_9080\n\n\tINX\n\tCPX #$09\n\tBCC loc_BANK0_9076\n\n\tRTS\n\n; create the sprite for the item being picked up\nloc_BANK0_9080:\n\tLDA byte_RAM_0\n\tSTA EnemyVariable, X\n\tLDA byte_RAM_3\n\tSTA ObjectXHi, X\n\tLDA byte_RAM_4\n\tSTA ObjectYHi, X\n\tLDA byte_RAM_5\n\tSTA ObjectXLo, X\n\tLDA byte_RAM_6\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA EnemyArray_42F, X\n\tSTA ObjectAnimationTimer, X\n\tSTA EnemyArray_B1, X\n\tJSR UnlinkEnemyFromRawData_Bank1\n\n\tLDA #EnemyState_Alive\n\tLDY byte_RAM_9\n\tCPY #$0E\n\tBNE loc_BANK0_90AE\n\n\tLDA #$20\n\tSTA EnemyTimer, X\n\tLDA #EnemyState_Sand\n\nloc_BANK0_90AE:\n\tSTA EnemyState, X\n\tLDA PickUpToEnemyTypeTable, Y ; What sprite is spawned for you when lifting a bg object\n\tSTA ObjectType, X\n\n\tLDY #$0FF ; regular bomb fuse\n\tCMP #Enemy_Bomb\n\tBEQ loc_BANK0_90C1\n\n\tCMP #Enemy_BobOmb\n\tBNE loc_BANK0_90C5\n\n\tLDY #$50 ; BobOmb fuse\n\nloc_BANK0_90C1:\n\tSTY EnemyTimer, X\n\tBNE loc_BANK0_90EA\n\nloc_BANK0_90C5:\n\tCMP #Enemy_Mushroom1up\n\tBNE loc_BANK0_90D5\n\n\tLDA Mushroom1upPulled\n\tBEQ loc_BANK0_90EA\n\n\tLDA #Enemy_VegetableSmall\n\tSTA ObjectType, X\n\n\tJMP loc_BANK0_90EA\n\nloc_BANK0_90D5:\n\tCMP #Enemy_VegetableLarge\n\tBNE loc_BANK0_90EA\n\n\tLDY BigVeggiesPulled\n\tINY\n\tCPY #$05\n\tBCC loc_BANK0_90E7\n\n\tLDA #Enemy_Stopwatch\n\tSTA ObjectType, X\n\tLDY #$00\n\nloc_BANK0_90E7:\n\tSTY BigVeggiesPulled\n\nloc_BANK0_90EA:\n\tJSR loc_BANK1_B9EB\n\n\tLDA #CollisionFlags_Down\n\tSTA EnemyCollision, X\n\tLDA #BackgroundTile_Sky\n\tJSR ReplaceTile_Bank0\n\n\tLDA #$07\n\tSTA ObjectBeingCarriedTimer, X\n\tSTX ObjectBeingCarriedIndex\n\tLDA #PlayerState_Lifting\n\tSTA PlayerState\n\tLDA #$06\n\tSTA PlayerStateTimer\n\tLDA #SpriteAnimation_Pulling\n\tSTA PlayerAnimationFrame\n\tINC HoldingItem\n\tRTS\n\n\nTileBehavior_CheckJar:\n\tLDY HoldingItem\n\tBNE loc_BANK0_917C\n\n\tLDA PlayerDucking\n\tBEQ TileBehavior_CheckPickUp\n\n\tLDA byte_RAM_0\n\tLDX InSubspaceOrJar\n\tCPX #$02\n\tBNE TileBehavior_CheckJar_NotSubspace\n\n\t; In SubSpace, a non-enterable jar can be entered\n\t; Now Y = $00\n\tCMP #BackgroundTile_JarTopNonEnterable\n\tBEQ TileBehavior_GoDownJar\n\n\tBNE loc_BANK0_917C\n\nTileBehavior_CheckJar_NotSubspace:\n\tINY\n\t; Now Y = $01\n\tCMP #BackgroundTile_JarTopGeneric\n\tBEQ TileBehavior_GoDownJar\n\n\tCMP #BackgroundTile_JarTopPointer\n\tBNE loc_BANK0_917C\n\n\tINY\n\t; Now Y = $02\n\nTileBehavior_GoDownJar:\n\tLDA PlayerXLo\n\tCLC\n\tADC #$04\n\tAND #$0F\n\tCMP #$08\n\tBCS loc_BANK0_917C\n\n\t; Stop horiziontal movement\n\tLDA #$00\n\tSTA PlayerXVelocity\n\n\t; We're going down the jar!\n\tLDA #PlayerState_GoingDownJar\n\tSTA PlayerState\n\n\t; What kind of jar are we going down?\n\t; $00 = warp, $01 = regular, $02 = pointer\n\tSTY InJarType\n\n;\n; Snaps the player to the closest tile (for entering doors and jars)\n;\nSnapPlayerToTile:\n\tLDA PlayerXLo\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA PlayerXLo\n\tBCC SnapPlayerToTile_Exit\n\n\tLDA IsHorizontalLevel\n\tBEQ SnapPlayerToTile_Exit\n\n\tINC PlayerXHi\n\nSnapPlayerToTile_Exit:\n\tRTS\n\n\nTileBehavior_CheckPickUp:\n\tBIT Player1JoypadPress\n\tBVC loc_BANK0_917C\n\n\t; B button pressed\n\n\tLDA PlayerXLo\n\tCLC\n\tADC #$06\n\tAND #$0F\n\tCMP #$0C\n\tBCS loc_BANK0_917C\n\n\tLDA byte_RAM_0\n\tCMP #BackgroundTile_DiggableSand\n\tBNE loc_BANK0_916E\n\n\tLDA #$0E\n\tBNE loc_BANK0_9177\n\n; blocks that can be picked up\nloc_BANK0_916E:\n\tCMP #BackgroundTile_Unused6D\n\tBCS loc_BANK0_917C\n\n\t; convert to an index in PickUpToEnemyTypeTable\n\tSEC\n\tSBC #BackgroundTile_MushroomBlock\n\tBCC loc_BANK0_917C\n\nloc_BANK0_9177:\n\tSTA byte_RAM_9\n\tJMP loc_BANK0_9074\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_917C:\n\tLDA PlayerDucking\n\tBNE locret_BANK0_91CE\n\n\tLDA byte_RAM_6\n\tSEC\n\tSBC #$10\n\tSTA byte_RAM_6\n\tSTA byte_RAM_E6\n\tLDA byte_RAM_4\n\tSBC #$00\n\tSTA byte_RAM_4\n\tSTA byte_RAM_1\n\tLDA byte_RAM_3\n\tSTA byte_RAM_2\n\tJSR sub_BANK0_92C1\n\n\tBCS locret_BANK0_91CE\n\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDX HoldingItem\n\tBEQ loc_BANK0_91AE\n\n\tLDX ObjectBeingCarriedIndex\n\tLDY ObjectType, X\n\tCPY #Enemy_Key\n\tBNE locret_BANK0_91CE\n\nloc_BANK0_91AE:\n\tLDX InSubspaceOrJar\n\tCPX #$02\n\tBEQ loc_BANK0_91BF\n\n\tLDY #$04\n\n; check to see if the tile matches one of the door tiles\nloc_BANK0_91B7:\n\tCMP DoorTiles, Y\n\tBEQ loc_BANK0_91EB\n\n\tDEY\n\tBPL loc_BANK0_91B7\n\nloc_BANK0_91BF:\n\tBIT Player1JoypadPress\n\tBVC locret_BANK0_91CE\n\n\tSTA byte_RAM_0\n\tCMP #BackgroundTile_GrassInactive\n\tBCS locret_BANK0_91CE\n\n\tSEC\n\tSBC #BackgroundTile_GrassCoin\n\tBCS loc_BANK0_91CF\n\nlocret_BANK0_91CE:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_91CF:\n\tLDX InSubspaceOrJar\n\tCPX #$02\n\tBNE loc_BANK0_91E3\n\n\tLDA SubspaceVisits\n\tCMP #$02\n\tBCS loc_BANK0_91E2 ; skip if we've already visited Subspace twice\n\n\tINC SubspaceCoins\n\tLDX #$00\n\nloc_BANK0_91E2:\n\tTXA\n\nloc_BANK0_91E3:\n\tCLC\n\tADC #$04\n\tSTA byte_RAM_9\n\tJMP loc_BANK0_9074\n\n; ---------------------------------------------------------------------------\n\n;\n; Checks to see if we're trying to go through the door\n;\n; Input\n;   Y = tile index in DoorTiles\nloc_BANK0_91EB:\n\tLDA Player1JoypadPress\n\tAND #ControllerInput_Up\n\tBEQ locret_BANK0_91CE\n\n\t; player is holding up and is trying to go through this door\n\tLDA PlayerXLo\n\tCLC\n\tADC #$05\n\tAND #$0F\n\tCMP #$0A\n\tBCS locret_BANK0_91CE\n\n\tCPY #$04 ; index of BackgroundTile_LightDoorEndLevel\n\tBNE loc_BANK0_9205\n\n\t; setting GameMode to $03 to go to Bonus Chance\n\tDEY\n\tSTY GameMode\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9205:\n\tLDA #TransitionType_Door\n\tSTA TransitionType\n\tTYA\n\tJSR JumpToTableAfterJump\n\nDoorHandlingPointers:\n\t.dw DoorHandling_UnlockedDoor ; unlocked door\n\t.dw DoorHandling_LockedDoor ; locked door\n\t.dw DoorHandling_Entrance ; dark door\n\t.dw DoorHandling_Entrance ; light door\n\n\nDoorHandling_UnlockedDoor:\n\tJSR DoorAnimation_Unlocked\n\nDoorHandling_GoThroughDoor:\n\tINC DoorAnimationTimer\n\tINC PlayerLock\n\tJSR SnapPlayerToTile\n\n\tLDA #DPCM_DoorOpenBombBom\n\tSTA DPCMQueue\n\nDoorHandling_Exit:\n\tRTS\n\n\nDoorHandling_LockedDoor:\n\tLDA HoldingItem\n\t; don't come to a locked door empty-handed\n\tBEQ DoorHandling_Exit\n\n\t; and make sure you have a key\n\tLDY ObjectBeingCarriedIndex\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBNE DoorHandling_Exit\n\n\t; the key has been used\n\tINC KeyUsed\n\tTYA\n\tTAX\n\n\tJSR TurnKeyIntoPuffOfSmoke\n\tJSR DoorAnimation_Locked\n\tJMP DoorHandling_GoThroughDoor\n\n\nDoorHandling_Entrance:\n\tINC DoAreaTransition\n\tJMP DoAreaReset\n\n\nDoorTiles:\n\t.db BackgroundTile_DoorBottom\n\t.db BackgroundTile_DoorBottomLock\n\t.db BackgroundTile_DarkDoor\n\t.db BackgroundTile_LightDoor\n\t.db BackgroundTile_LightDoorEndLevel\n\n\n;\n; Seems to determine what kind of tile the player has collided with?\n;\n; Input\n;   X = object index (0 = player)\n;   Y = bounding box offset?\n; Output\n;   byte_RAM_0 = tile ID\n;\nsub_BANK0_924F:\n\tTXA\n\tPHA\n\tLDA #$00\n\tSTA byte_RAM_0\n\tSTA byte_RAM_1\n\tLDA byte_BANKF_F011, Y\n\tBPL loc_BANK0_925E\n\n\tDEC byte_RAM_0\n\nloc_BANK0_925E:\n\tCLC\n\tADC PlayerXLo, X\n\tAND #$F0\n\tSTA byte_RAM_5\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA PlayerXHi, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\tLDA IsHorizontalLevel\n\nloc_BANK0_9277:\n\tBNE loc_BANK0_927D\n\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\nloc_BANK0_927D:\n\tLDA byte_BANKF_F055, Y\n\tBPL loc_BANK0_9284\n\n\tDEC byte_RAM_1\n\nloc_BANK0_9284:\n\tCLC\n\nloc_BANK0_9285:\n\tADC PlayerYLo, X\n\tAND #$F0\n\tSTA byte_RAM_6\n\tSTA byte_RAM_E6\n\tLDA PlayerYHi, X\n\tADC byte_RAM_1\n\tSTA byte_RAM_1\n\tSTA byte_RAM_4\n\tJSR sub_BANK0_92C1\n\n\tBCC loc_BANK0_929E\n\n\tLDA #$00\n\tBEQ loc_BANK0_92A5\n\nloc_BANK0_929E:\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\nloc_BANK0_92A5:\n\tSTA byte_RAM_0\n\tPLA\n\tTAX\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK0_92AA:\n\tSTA byte_RAM_F\n\tTYA\n\tBMI locret_BANK0_92C0\n\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCLC\n\tADC byte_RAM_F\n\tBCS loc_BANK0_92BC\n\n\tCMP #$F0\n\tBCC locret_BANK0_92C0\n\nloc_BANK0_92BC:\n\tCLC\n\tADC #$10\n\tINY\n\nlocret_BANK0_92C0:\n\tRTS\n\n; End of function sub_BANK0_92AA\n\n\n;\n; NOTE: This is a copy of the \"sub_BANK3_BC2E\" routine in Bank 3\n;\n;\nsub_BANK0_92C1:\n\tLDY byte_RAM_1\n\tLDA byte_RAM_E6\n\tJSR sub_BANK0_92AA\n\n\tSTY byte_RAM_1\n\tSTA byte_RAM_E6\n\tLDY IsHorizontalLevel\n\tLDA byte_RAM_1, Y\n\tSTA byte_RAM_E8\n\tLDA byte_RAM_2\n\tCMP byte_BANK0_92E0 + 1, Y\n\tBCS locret_BANK0_92DF\n\n\tLDA byte_RAM_1\n\tCMP byte_BANK0_92E0, Y\n\nlocret_BANK0_92DF:\n\tRTS\n\n\nbyte_BANK0_92E0:\n\t.db $0A\n\t.db $01\n\t.db $0B\n\n\n; Unused?\n; Copy of sub_BANKF_F494\n_code_12E3:\n\tLDX NeedVerticalScroll\n\tBNE locret_BANK0_9311\n\n\tLDA PlayerState\n\tCMP #PlayerState_Lifting\n\tBCS locret_BANK0_9311\n\n\tLDA PlayerScreenYLo\n\tLDY PlayerScreenYHi\n\tBMI loc_BANK0_92FF\n\n\tBNE loc_BANK0_9305\n\n\tCMP #$B4\n\tBCS loc_BANK0_9305\n\n\tCMP #$21\n\tBCS loc_BANK0_9307\n\nloc_BANK0_92FF:\n\tLDY PlayerInAir\n\tBNE loc_BANK0_9307\n\n\tBEQ loc_BANK0_9306\n\nloc_BANK0_9305:\n\tINX\n\nloc_BANK0_9306:\n\tINX\n\nloc_BANK0_9307:\n\tLDA VerticalScrollDirection\n\tSTX VerticalScrollDirection\n\tBNE locret_BANK0_9311\n\nloc_BANK0_930F:\n\tSTX NeedVerticalScroll\n\nlocret_BANK0_9311:\n\tRTS\n\n\nPlayerCollisionDirectionTable:\n\t.db CollisionFlags_Right\n\t.db CollisionFlags_Left\n\nPlayerCollisionResultTable_Bank0:\n\t.db CollisionFlags_80\n\t.db CollisionFlags_00\n\n\n;\n; Enforces the left/right boundaries of horizontal areas\n;\nPlayerAreaBoundaryCollision:\n\tLDA IsHorizontalLevel\n\tBEQ PlayerAreaBoundaryCollision_Exit\n\n\tLDA PlayerScreenX\n\tLDY PlayerMovementDirection\n\tCPY #$01\n\tBEQ PlayerAreaBoundaryCollision_CheckRight\n\nPlayerAreaBoundaryCollision_CheckLeft:\n\tCMP #$08\n\tBCC PlayerAreaBoundaryCollision_BoundaryHit\n\nPlayerAreaBoundaryCollision_Exit:\n\tRTS\n\nPlayerAreaBoundaryCollision_CheckRight:\n\tCMP #$E8\n\tBCC PlayerAreaBoundaryCollision_Exit\n\nPlayerAreaBoundaryCollision_BoundaryHit:\n\tLDA PlayerCollision\n\tORA PlayerCollisionDirectionTable - 1, Y\n\tSTA PlayerCollision\n\n;\n; NOTE: This is a copy of the \"PlayerHorizontalCollision\" routine in Bank 3\n;\nPlayerHorizontalCollision_Bank0:\n\tLDX #$00\n\tLDY PlayerMovementDirection\n\tLDA PlayerXVelocity\n\tEOR PlayerCollisionResultTable_Bank0 - 1, Y\n\tBPL loc_BANK0_9340\n\n\tSTX PlayerXVelocity\n\nloc_BANK0_9340:\n\tLDA PlayerXAcceleration\n\tEOR PlayerCollisionResultTable_Bank0 - 1, Y\n\tBPL loc_BANK0_934B\n\n\tSTX PlayerXAcceleration\n\nloc_BANK0_934B:\n\tSTX PlayerXSubpixel\n\nlocret_BANK0_934E:\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\n;\n; NOTE: This is a copy of the \"sub_BANK3_BC50\" routine in Bank 3\n;\n; Replaces tile when something is picked up\n;\n; Input\n;   A = Target tile\n;   X = Enemy index of object being picked up\n;\nReplaceTile_Bank0:\n\tPHA ; Something to update the PPU for some tile change\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$08\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA ObjectXHi, X\n\tLDY IsHorizontalLevel\n\tBEQ ReplaceTile_StoreXHi_Bank0\n\n\tADC #$00\n\nReplaceTile_StoreXHi_Bank0:\n\tSTA byte_RAM_2\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA byte_RAM_E6\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA byte_RAM_1\n\tJSR sub_BANK0_92C1\n\n\tPLA\n\tBCS locret_BANK0_934E\n\n;\n; Input\n;   A = Target tile\n;\nloc_BANK0_937C:\n\tSTX byte_RAM_3\n\tPHA\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tPLA\n\tLDY byte_RAM_E7\n\tSTA (byte_RAM_1), Y\n\tPHA\n\tLDX byte_RAM_300\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tTYA\n\tAND #$F0\n\tASL A\n\tROL PPUBuffer_301, X\n\tASL A\n\tROL PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 1, X\n\tTYA\n\tAND #$0F\n\tASL A\n\n\tADC PPUBuffer_301 + 1, X\n\tSTA PPUBuffer_301 + 1, X\n\tCLC\n\tADC #$20\n\tSTA PPUBuffer_301 + 6, X\n\tLDA IsHorizontalLevel\n\tASL A\n\tTAY\n\tLDA byte_RAM_1\n\tAND #$10\n\tBNE loc_BANK0_93B9\n\n\tINY\n\nloc_BANK0_93B9:\n\tLDA byte_BANK0_940A, Y\n\tCLC\n\tADC PPUBuffer_301, X\n\tSTA PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 5, X\n\tLDA #$02\n\tSTA PPUBuffer_301 + 2, X\n\tSTA PPUBuffer_301 + 7, X\n\tPLA\n\tPHA\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\tPLA\n\tASL A\n\tASL A\n\tTAY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 3, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 4, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 8, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 9, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 10, X\n\tTXA\n\tCLC\n\tADC #$0A\n\tSTA byte_RAM_300\n\tLDX byte_RAM_3\n\tRTS\n\n\n; Another byte of PPU high addresses for horiz/vert levels\nbyte_BANK0_940A:\n\t.db $20\n\t.db $28\n\t.db $20\n\t.db $24\n\n\n;\n; NOTE: This is a copy of the \"StashPlayerPosition\" routine in Bank 3\n;\nStashPlayerPosition_Bank0:\n\tLDA InSubspaceOrJar\n\tBNE StashPlayerPosition_Exit_Bank0\n\n\tLDA PlayerXHi\n\tSTA PlayerXHi_Backup\n\tLDA PlayerXLo\n\tSTA PlayerXLo_Backup\n\tLDA PlayerYHi\n\tSTA PlayerYHi_Backup\n\tLDA PlayerYLo\n\tSTA PlayerYLo_Backup\n\nStashPlayerPosition_Exit_Bank0:\n\tRTS\n\n\n; player placement after exiting subspace (maybe other times?)\nsub_BANK0_9428:\n\tLDA PlayerXHi_Backup\n\tSTA PlayerXHi\n\tLDA PlayerXLo_Backup\n\tSTA PlayerXLo\n\tLDA PlayerYHi_Backup\n\tSTA PlayerYHi\n\tLDA PlayerYLo_Backup\n\tSTA PlayerYLo\n\tLDA PlayerXLo\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA PlayerScreenX\n\tLDA PlayerYLo\n\tSEC\n\tSBC ScreenYLo\n\tSTA PlayerScreenYLo\n\tLDA PlayerYHi\n\tSBC ScreenYHi\n\tSTA PlayerScreenYHi\n\tLDA TransitionType\n\tSEC\n\tSBC #TransitionType_SubSpace\n\tBNE StashPlayerPosition_Exit_Bank0\n\n\t; resetting these to zero (A=$00, otherwise we would have branched)\n\tSTA PlayerState\n\tSTA PlayerLock\n\tSTA SubspaceTimer\n\tJSR DoorAnimation_Unlocked\n\n\tLDA #$0A\n\tSTA SubspaceDoorTimer\n\tRTS\n\n; End of function sub_BANK0_9428\n\n; =============== S U B R O U T I N E =======================================\n\n; area transition\nsub_BANK0_946D:\n\tLDA TransitionType\n\tCMP #TransitionType_Jar\n\tBNE loc_BANK0_947F\n\n\tLDA InJarType\n\tBNE loc_BANK0_947F\n\n\tJSR sub_BANK0_9428\n\n\tJMP loc_BANK0_94C2\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_947F:\n\tLDA CurrentLevelEntryPage\n\tLDY #$00\n\tLDX IsHorizontalLevel\n\tBNE loc_BANK0_948E\n\n\tSTY PlayerXHi\n\tSTA PlayerYHi\n\tBEQ loc_BANK0_9492\n\nloc_BANK0_948E:\n\tSTA PlayerXHi\n\tSTY PlayerYHi\n\nloc_BANK0_9492:\n\tJSR AreaTransitionPlacement\n\n\tLDY PlayerYHi\n\tLDA PlayerYLo\n\tJSR sub_BANK0_95AF\n\n\tSTY PlayerYHi\n\tSTA PlayerYLo\n\tLDA PlayerXLo\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA PlayerScreenX\n\tLDA PlayerYLo\n\tSEC\n\nloc_BANK0_94AC:\n\tSBC ScreenYLo\n\tSTA PlayerScreenYLo\n\tLDA PlayerYHi\n\tSBC ScreenYHi\n\tSTA PlayerScreenYHi\n\tLDA TransitionType\n\tCMP #TransitionType_SubSpace\n\tBNE loc_BANK0_94C2\n\n\tJSR DoorAnimation_Unlocked\n\nloc_BANK0_94C2:\n\tLDA PlayerXLo\n\tSEC\n\tSBC #$78\n\tSTA byte_RAM_BA\n\tRTS\n\n; End of function sub_BANK0_946D\n\n\n;\n; Do the player placement after an area transition\n;\nAreaTransitionPlacement:\n\tLDA TransitionType\n\tJSR JumpToTableAfterJump\n\n\t.dw AreaTransitionPlacement_Reset\n\t.dw AreaTransitionPlacement_Door\n\t.dw AreaTransitionPlacement_Jar\n\t.dw AreaTransitionPlacement_Climbing\n\t.dw AreaTransitionPlacement_Subspace\n\t.dw AreaTransitionPlacement_Rocket\n\n\nAreaTransitionPlacement_Reset:\n\tLDA #$01\n\tSTA PlayerDirection\n\tJSR AreaTransitionPlacement_Middle\n\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tLDA #$D0\n\tSTA PlayerYLo\n\tSTA byte_RAM_E6\n\tLDA CurrentLevelEntryPage\n\tSTA byte_RAM_E8\n\tLDA #$0C\n\tSTA byte_RAM_3\n\nloc_BANK0_94F8:\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tCMP #$40\n\tBEQ AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tJSR AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tSTA byte_RAM_E6\n\tDEC byte_RAM_3\n\tBNE loc_BANK0_94F8\n\n\n;\n; Moves the player up by one tile\n;\nAreaTransitionPlacement_MovePlayerUp1Tile:\n\tLDA PlayerYLo\n\tSEC\n\tSBC #$10\n\tSTA PlayerYLo\n\tRTS\n\n\n;\n; Looks for a door and positions the player at it\n;\n; The implementation of this requires the destination door to be at the\n; OPPOSITE side of the screen from the origin door horizontally, but it can be\n; at any position vertically.\n;\n; If no suitable door is found, the player is positioned to fall from the\n; top-middle of the screen instead\n;\nAreaTransitionPlacement_Door:\n\tLDA PlayerXLo\n\t; Switch the x-position to the opposite side of the screen\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tEOR #$F0\n\tSTA PlayerXLo\n\n\t; Convert to a tile offset\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\n\t; Start at the bottom of the page\n\tLDA #$E0\n\tSTA PlayerYLo\n\tSTA byte_RAM_E6\n\tLDA CurrentLevelEntryPage\n\tSTA byte_RAM_E8\n\tLDA #$0D\n\tSTA byte_RAM_3\n\nAreaTransitionPlacement_Door_Loop:\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\t; Read the target tile\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDY #$05\n\nAreaTransitionPlacement_Door_InnerLoop:\n\t; See if it matches any door tile\n\tCMP DoorTiles - 1, Y\n\tBEQ AreaTransitionPlacement_Door_Exit\n\tDEY\n\tBNE AreaTransitionPlacement_Door_InnerLoop\n\n\t; Nothing matched on this row, so check the next row or give up\n\tDEC byte_RAM_3\nIFNDEF ROBUST_TRANSITION_SEARCH\n\tBEQ AreaTransitionPlacement_Door_Fallback\nENDIF\nIFDEF ROBUST_TRANSITION_SEARCH\n\tBEQ AreaTransitionPlacement_DoorCustom\nENDIF\n\n\tJSR AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tSTA byte_RAM_E6\n\tJMP AreaTransitionPlacement_Door_Loop\n\nAreaTransitionPlacement_Door_Fallback:\n\t; Place in the middle of the screen if no door is found\n\tJSR AreaTransitionPlacement_Middle\n\nAreaTransitionPlacement_Door_Exit:\n\tJSR AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tLDA #$00\n\tSTA PlayerLock\n\tRTS\n\n\nIFDEF ROBUST_TRANSITION_SEARCH\n;\n; Looks for a door and positions the player at it\n;\n; In contrast to the normal door placement routine, this will search all\n; x-positions rather than just one opposite the door\n;\nAreaTransitionPlacement_DoorCustom:\n\t; Start on the correct page\n\tLDX CurrentLevelEntryPage\n\tJSR SetAreaPageAddr_Bank1\n\n\t; Start at the bottom right and work backwards\n\tLDA #$0EF\n\tSTA byte_RAM_E7\n\nAreaTransitionPlacement_DoorCustom_Loop:\n\t; Read the target tile\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDY #$05\n\nAreaTransitionPlacement_DoorCustom_InnerLoop:\n\t; See if it matches any door tile\n\tCMP DoorTiles - 1, Y\n\tBEQ AreaTransitionPlacement_DoorCustom_Exit\n\tDEY\n\tBNE AreaTransitionPlacement_DoorCustom_InnerLoop\n\n\t; No matches on this tile, check the next one or give up\n\tDEC byte_RAM_E7\n\tBEQ AreaTransitionPlacement_DoorCustom_Fallback\n\n\tJMP AreaTransitionPlacement_DoorCustom_Loop\n\nAreaTransitionPlacement_DoorCustom_Fallback:\n\tLDA #$20\n\tSTA PlayerYLo\n\tJSR AreaTransitionPlacement_Middle\n\tJMP AreaTransitionPlacement_Door_Exit\n\nAreaTransitionPlacement_DoorCustom_Exit:\n\tLDA byte_RAM_E7\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA PlayerXLo\n\tLDA byte_RAM_E7\n\tAND #$F0\n\tSTA PlayerYLo\n\tJMP AreaTransitionPlacement_Door_Exit\nENDIF\n\n\n;\n; Place the player at the top of the screen in the middle horizontally\n;\nAreaTransitionPlacement_Jar:\n\tLDA #$00\n\tSTA PlayerYLo\n\n;\n; Place the player in the air in the middle of the screen horizontally\n;\nAreaTransitionPlacement_Middle:\n\tLDA #$01\n\tSTA PlayerInAir\n\tLDA #$78\n\tSTA PlayerXLo\n\tRTS\n\n;\n; Looks for a climbable tile (vine/chain/ladder) and positions the player at it\n;\n; The implementation of this requires the destination to be at the OPPOSITE\n; side of the screen from the origin horizontally, otherwise the player will\n; be climbing on nothing.\n;\nAreaTransitionPlacement_Climbing:\n\tLDA PlayerXLo\n\t; Switch the x-position to the opposite side of the screen\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tEOR #$F0\n\tSTA PlayerXLo\n\n\t; Switch the y-position to the opposite side of the screen\n\tLDA PlayerScreenYLo\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tEOR #$10\n\tSTA PlayerYLo\n\tCMP #$F0\n\tBEQ AreaTransitionPlacement_Climbing_Exit\n\n\tDEC PlayerYHi\n\nAreaTransitionPlacement_Climbing_Exit:\nIFDEF ROBUST_TRANSITION_SEARCH\n\tJSR AreaTransitionPlacement_ClimbingCustom\n\n\tBCS AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame\n\n\t; Try the opposite side of the screen\n\tLDA PlayerYLo\n\tEOR #$10\n\tSTA PlayerYLo\n\n\tLDA PlayerYHi\n\tEOR #$FF\n\tSTA PlayerYHi\n\n\tJSR AreaTransitionPlacement_ClimbingCustom\n\tBCC AreaTransitionPlacement_Climbing_UnreversePositionY\n\n\t; Found something on the opposite side, so flip Y velocity\n\tLDY #$01\n\tLDA PlayerYVelocity\n\tBMI AreaTransitionPlacement_Climbing_SetYVelocity\n\n\tINY\nAreaTransitionPlacement_Climbing_SetYVelocity:\n\tLDA ClimbSpeed, Y\n\tSTA PlayerYVelocity\n\n\tBNE AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame\n\nAreaTransitionPlacement_Climbing_UnreversePositionY:\n\t; Unflip Y position\n\tLDA PlayerYLo\n\tEOR #$10\n\tSTA PlayerYLo\n\n\tLDA PlayerYHi\n\tEOR #$FF\n\tSTA PlayerYHi\n\nAreaTransitionPlacement_Climbing_SetPlayerAnimationFrame:\nENDIF\n\n\tLDA #SpriteAnimation_Climbing\n\tSTA PlayerAnimationFrame\n\tRTS\n\n\nIFDEF ROBUST_TRANSITION_SEARCH\n;\n; Ouput\n;   C = set if a climbable tile was found\n;\nAreaTransitionPlacement_ClimbingCustom:\n\t; Target x-position\n\tLDA PlayerXLo\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\n\t; Target y-position\n\tLDA PlayerYLo\n\tEOR #$10\n\tCLC\n\tADC #$10\n\tCMP #$F0\n\tBNE AreaTransitionPlacement_ClimbingCustom_AfterNudge\n\tSEC\n\tSBC #$10\nAreaTransitionPlacement_ClimbingCustom_AfterNudge:\n\tSTA byte_RAM_E6\n\n\t; Read the target tile\n\tLDA CurrentLevelEntryPage\n\tSTA byte_RAM_E8\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\n\t; Check if the target tile is climbable\n\tLDY #$09\nAreaTransitionPlacement_ClimbingCustom_CheckLoop:\n\tCMP ClimbableTiles, Y\n\tBNE AreaTransitionPlacement_ClimbingCustom_LoopNext\n\n\tRTS\n\nAreaTransitionPlacement_ClimbingCustom_LoopNext:\n\tDEY\n\tBPL AreaTransitionPlacement_ClimbingCustom_CheckLoop\n\n\t; Target tile is not climbable; start at the right and work backwards\n\tLDA byte_RAM_E7\n\tAND #$F0\n\tSTA byte_RAM_E6\n\n\tLDA #$0F\n\tSTA byte_RAM_3\n\tCLC\n\tADC byte_RAM_E6\n\tSTA byte_RAM_E7\n\nAreaTransitionPlacement_ClimbingCustom_Loop:\n\t; Read the target tile\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDY #$09\n\nAreaTransitionPlacement_ClimbingCustom_InnerLoop:\n\tCMP ClimbableTiles, Y\n\tBEQ AreaTransitionPlacement_ClimbingCustom_SetXPosition\n\tDEY\n\tBPL AreaTransitionPlacement_ClimbingCustom_InnerLoop\n\n\t; No matches on this tile, check the next one or give up\n\tDEC byte_RAM_E7\n\tDEC byte_RAM_3\n\tBMI AreaTransitionPlacement_ClimbingCustom_NotFound\n\n\tJMP AreaTransitionPlacement_ClimbingCustom_Loop\n\nAreaTransitionPlacement_ClimbingCustom_SetXPosition:\n\tLDA byte_RAM_3\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA PlayerXLo\n\n\tSEC\n\tRTS\n\nAreaTransitionPlacement_ClimbingCustom_NotFound:\n\tCLC\n\tRTS\nENDIF\n\n\nAreaTransitionPlacement_Subspace:\n\tLDA PlayerScreenX\n\tSEC\n\tSBC byte_RAM_BA\n\tEOR #$0FF\n\tCLC\n\tADC #$F1\n\tSTA PlayerXLo\n\tLDA PlayerScreenYLo\n\tSTA PlayerYLo\n\tDEC PlayerLock\n\tLDA #$60\n\tSTA SubspaceTimer\n\tRTS\n\n\nAreaTransitionPlacement_Rocket:\n\tJSR AreaTransitionPlacement_Middle\n\tLDA #$60\n\tSTA PlayerYLo\n\tRTS\n\n\n;\n; @TODO\n;\n; Input\n;   Y = PlayerYHi\n;   A = PlayerYLo\n; Output\n;   Y = PlayerYHi\n;   A = PlayerYLo\n;\nsub_BANK0_95AF:\n\tCPY #$00\n\tBMI locret_BANK0_95C2\n\n\tPHA\n\tTYA\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_F\n\tPLA\n\tSEC\n\tSBC byte_RAM_F\n\tBCS locret_BANK0_95C2\n\n\tDEY\n\nlocret_BANK0_95C2:\n\tRTS\n\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nIFNDEF ROBUST_TRANSITION_SEARCH\n\n; Unused space in the original ($95C3 - $95FF)\nunusedSpace $9600, $FF\nENDIF\nENDIF\n\n\nTitleScreenPPUDataPointers:\n\t.dw PPUBuffer_301\n\t.dw TitleLayout\n\n\n; =============== S U B R O U T I N E =======================================\n\nWaitForNMI_TitleScreen_TurnOnPPU:\n\tLDA #PPUMask_ShowLeft8Pixels_BG | PPUMask_ShowLeft8Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites\n\tSTA PPUMaskMirror\n\n; End of function WaitForNMI_TitleScreen_TurnOnPPU\n\n; =============== S U B R O U T I N E =======================================\n\nWaitForNMI_TitleScreen:\n\tLDA ScreenUpdateIndex\n\tASL A\n\tTAX\n\tLDA TitleScreenPPUDataPointers, X\n\tSTA RAM_PPUDataBufferPointer\n\tLDA TitleScreenPPUDataPointers + 1, X\n\tSTA RAM_PPUDataBufferPointer + 1\n\tLDA #$00\n\tSTA NMIWaitFlag\n\nWaitForNMI_TitleScreenLoop:\n\tLDA NMIWaitFlag\n\tBPL WaitForNMI_TitleScreenLoop\n\n\tRTS\n\n; End of function WaitForNMI_TitleScreen\n\n\nTitleLayout:\n\t; red lines, vertical, left\n\t.db $20, $00, $DE, $FD\n\t.db $20, $01, $DE, $FD\n\t.db $20, $02, $DE, $FD\n\t.db $20, $03, $DE, $FD\n\t; red lines, vertical, right\n\t.db $20, $1C, $DE, $FD\n\t.db $20, $1D, $DE, $FD\n\t.db $20, $1E, $DE, $FD\n\t.db $20, $1F, $DE, $FD\n\t; red lines, horizontal, top\n\t.db $20, $03, $5D, $FD\n\t.db $20, $23, $5D, $FD\n\t.db $20, $43, $5D, $FD\n\t.db $20, $63, $5D, $FD\n\t; red lines, vertical, bottom\n\t.db $23, $63, $5D, $FD\n\t.db $23, $83, $5D, $FD\n\t.db $23, $A3, $5D, $FD\n\n\t; ornate frame, top\n\t.db $20, $68, $10, $48, $4A, $4C, $4E, $50, $51, $52, $53, $54, $55, $56, $57, $58, $5A, $5C, $5E\n\t.db $20, $84, $08, $FD, $22, $23, $24, $49, $4B, $4D, $4F\n\t.db $20, $94, $08, $59, $5B, $5D, $5F, $2E, $2F, $30, $FD\n\t.db $20, $A4, $03, $25, $26, $27\n\t.db $20, $B9, $03, $31, $32, $33\n\t.db $20, $C4, $03, $28, $29, $2A\n\t.db $20, $D9, $03, $34, $35, $36\n\t.db $20, $E3, $03, $2B, $2C, $2D\n\t.db $20, $FA, $03, $37, $38, $39\n\t.db $21, $03, $02, $3A, $3B\n\t.db $21, $1B, $02, $40, $41\n\t; ornate frame, lines down, top\n\t.db $21, $23, $C6, $3C\n\t.db $21, $3C, $C6, $42\n\t; ornate frame, middle\n\t.db $21, $E3, $01, $3D\n\t.db $21, $FC, $01, $60\n\t.db $22, $02, $02, $3E, $3F\n\t.db $22, $1C, $02, $61, $62\n\t.db $22, $22, $02, $43, $44\n\t.db $22, $3C, $02, $63, $64\n\t.db $22, $43, $01, $45\n\t.db $22, $5C, $01, $65\n\t; ornate frame, lines down, bottom\n\t.db $22, $63, $C6, $3C\n\t.db $22, $7C, $C4, $42\n\t; ornate frame, bottom, characters\n\t.db $22, $C4, $02, $A6, $A8\n\t.db $22, $E4, $02, $A7, $A9\n\t.db $22, $FA, $04, $80, $82, $88, $8A\n\t.db $23, $04, $02, $90, $92\n\t.db $23, $14, $02, $9E, $A0\n\t.db $23, $1A, $04, $81, $83, $89, $8B\n\t.db $23, $23, $03, $46, $91, $93\n\t.db $23, $2A, $02, $A2, $A4\n\t.db $23, $2E, $0B, $67, $6C, $6E, $70, $72, $69, $9F, $A1, $75, $98, $9A\n\t.db $23, $3A, $04, $84, $86, $8C, $8E\n\t.db $23, $43, $1B, $47, $94, $96, $74, $74, $74, $74, $A3, $A5, $74, $66, $68\n\t.db $6D, $6F, $71, $73, $6A, $6B, $74, $74, $99, $9B, $74, $85, $87, $8D, $8F\n\t.db $23, $64, $05, $95, $97, $FD, $AA ,$AB\n\t.db $23, $77, $04, $9C, $9D, $AA, $AB\n\t.db $23, $89, $02, $AA, $AB\n\n\t; SUPER\n\t;                  SSSSSSSS  UUUUUUUU  PPPPPPPP  EEEEEEEE  RRRRRRRR\n\t.db $20, $CB, $0A, $00, $01, $08, $08, $FC, $01, $FC, $08, $FC, $01\n\t.db $20, $EB, $0A, $02, $03, $08, $08, $0A, $05, $0B, $0C, $0A, $0D\n\t.db $21, $0B, $0A, $04, $05, $04, $05, $0E, $07, $FC, $08, $0E, $08\n\t.db $21, $2B, $05, $06, $07, $06, $07, $09\n\t.db $21, $31, $04, $76, $09, $09, $09\n\n\t; TM\n\t;                  TTT  MMM\n\t.db $21, $38, $02, $F9, $FA\n\n\t; MARIO\n\t;                  MMMMMMMMMMMMM  AAAAAAAA  RRRRRRRR  III  OOOOOOOO\n\t.db $21, $46, $0A, $00, $0F, $01, $00, $01, $FC, $01, $08, $00, $01\n\t.db $21, $66, $0A, $10, $10, $08, $10, $08, $10, $08, $08, $10, $08\n\t.db $21, $86, $0A, $08, $08, $08, $08, $08, $13, $0D, $08, $08, $08\n\t.db $21, $A6, $0A, $08, $08, $08, $FC, $08, $0E, $08, $08, $08, $08\n\t.db $21, $C6, $0A, $08, $08, $08, $10, $08, $08, $08, $08, $04, $05\n\t.db $21, $E6, $0A, $09, $09, $09, $09, $09, $09, $09, $09, $06, $07\n\n\t; BROS\n\t;                  BBBBBBBB  RRRRRRRR  OOOOOOOO  SSSSSSSS\n\t.db $21, $51, $08, $FC, $01, $FC, $01, $00, $01, $00, $01 ; BROS\n\t.db $21, $71, $08, $10, $08, $10, $08, $10, $08, $10, $08\n\t.db $21, $91, $08, $13, $0D, $13, $0D, $08, $08, $77, $03\n\t.db $21, $B1, $08, $0E, $08, $0E, $08, $08, $08, $12, $08\n\t.db $21, $D1, $09, $13, $05, $08, $08, $04, $05, $04, $05, $08\n\t.db $21, $F1, $09, $11, $07, $09, $09, $06, $07, $06, $07, $09\n\n\t; 2\n\t;             22222222222222222222222\n\t.db $22, $0E, $04, $14, $15, $16, $17\n\t.db $22, $2E, $04, $18, $19, $1A, $1B\n\t.db $22, $4E, $04, $1C, $1D, $1E, $1F\n\t.db $22, $6E, $04, $FC, $FC, $FC, $20\n\t.db $22, $8E, $04, $76, $76, $76, $21\n\n\t; (C) 1988\n\t;                  (C)  111  999  888  888\n\t.db $22, $E9, $05, $F8, $D1, $D9, $D8, $D8  ; (C) 1988\n\n\t; NINTENDO\n\t;                  NNN  III  NNN  TTT  EEE  NNN  DDD  OOO\n\t.db $22, $EF, $08, $E7, $E2, $E7, $ED, $DE, $E7, $DD, $E8\n\n\t.db $23, $CA, $04, $80, $A0, $A0, $20\n\t.db $23, $D1, $0E, $80, $A8, $AA, $AA, $A2, $22, $00, $00, $88, $AA, $AA, $AA, $AA, $22\n\t.db $23, $E3, $02, $88, $22\n\t.db $23, $EA, $04, $F0, $F8, $F2, $F0\n\t.db $00\n\nIFDEF PAD_TITLE_SCREEN_PPU_DATA\n\t.pad TitleLayout + $300, $00\nENDIF\n\nTitleBackgroundPalettes:\n\t.db $22, $37, $16, $07 ; Most of screen, outline, etc.\n\t.db $22, $30, $31, $0F ; Unused\n\t.db $22, $30, $0F, $0F ; Logo\n\t.db $22, $30, $0F, $0F ; Copyright, Story\n\nTitleSpritePalettes:\n\t.db $22, $30, $28, $0F ; Unused DDP character palettes\n\t.db $22, $30, $25, $0F ; There are no sprites on the title screen,\n\t.db $22, $30, $12, $0F ; so these are totally unused\n\t.db $22, $30, $23, $0F\n\nTitleStoryText_STORY:\n\t.db $EC, $ED, $E8, $EB, $F2 ; STORY\n\nTitleStoryTextPointersHi:\n\t.db >TitleStoryText_Line01\n\t.db >TitleStoryText_Line02\n\t.db >TitleStoryText_Line03\n\t.db >TitleStoryText_Line04\n\t.db >TitleStoryText_Line05\n\t.db >TitleStoryText_Line06\n\t.db >TitleStoryText_Line07\n\t.db >TitleStoryText_Line08\n\t.db >TitleStoryText_Line08 ; For some reason line 8 is referenced twice here, but not used\n\t.db >TitleStoryText_Line09\n\t.db >TitleStoryText_Line10\n\t.db >TitleStoryText_Line11\n\t.db >TitleStoryText_Line12\n\t.db >TitleStoryText_Line13\n\t.db >TitleStoryText_Line14\n\t.db >TitleStoryText_Line15\n\t.db >TitleStoryText_Line16\n\nTitleStoryTextPointersLo:\n\t.db <TitleStoryText_Line01\n\t.db <TitleStoryText_Line02\n\t.db <TitleStoryText_Line03\n\t.db <TitleStoryText_Line04\n\t.db <TitleStoryText_Line05\n\t.db <TitleStoryText_Line06\n\t.db <TitleStoryText_Line07\n\t.db <TitleStoryText_Line08\n\t.db <TitleStoryText_Line08\n\t.db <TitleStoryText_Line09\n\t.db <TitleStoryText_Line10\n\t.db <TitleStoryText_Line11\n\t.db <TitleStoryText_Line12\n\t.db <TitleStoryText_Line13\n\t.db <TitleStoryText_Line14\n\t.db <TitleStoryText_Line15\n\t.db <TitleStoryText_Line16\n\nTitleStoryText_Line01:\n\t.db $F0, $E1, $DE, $E7, $FB, $FB, $E6, $DA, $EB, $E2, $E8, $FB, $E8, $E9, $DE, $E7\n\t.db $DE, $DD, $FB, $DA ; WHEN MARIO OPENED A\n\nTitleStoryText_Line02:\n\t.db $DD, $E8, $E8, $EB, $FB, $DA, $DF, $ED, $DE, $EB, $FB, $FB, $DC, $E5, $E2, $E6\n\t.db $DB, $E2, $E7, $E0 ; DOOR AFTER CLIMBING\n\nTitleStoryText_Line03:\n\t.db $DA, $FB, $E5, $E8, $E7, $E0, $FB, $EC, $ED, $DA, $E2, $EB, $FB, $E2, $E7, $FB\n\t.db $FB, $E1, $E2, $EC ; A LONG STAIR IN HIS\n\nTitleStoryText_Line04:\n\t.db $DD, $EB, $DE, $DA, $E6, $F7, $FB, $DA, $E7, $E8, $ED, $E1, $DE, $EB, $FB, $F0\n\t.db $E8, $EB, $E5, $DD ; DREAM, ANOTHER WORLD\n\nTitleStoryText_Line05:\n\t.db $EC, $E9, $EB, $DE, $DA, $DD, $FB, $FB, $FB, $DB, $DE, $DF, $E8, $EB, $DE, $FB\n\t.db $FB, $E1, $E2, $E6 ; SPREAD BEFORE HIM\n\nTitleStoryText_Line06:\n\t.db $DA, $E7, $DD, $FB, $E1, $DE, $FB, $E1, $DE, $DA, $EB, $DD, $FB, $DA, $FB, $EF\n\t.db $E8, $E2, $DC, $DE ; AND HE HEARD A VOICE\n\nTitleStoryText_Line07:\n\t.db $DC, $DA, $E5, $E5, $FB, $DF, $E8, $EB, $FB, $E1, $DE, $E5, $E9, $FB, $ED, $E8\n\t.db $FB, $FB, $DB, $DE ; CALL FOR HELP TO BE\n\nTitleStoryText_Line08:\n\t.db $FB, $DF, $EB, $DE, $DE, $DD, $FB, $FB, $DF, $EB, $E8, $E6, $FB, $DA, $FB, $EC\n\t.db $E9, $DE, $E5, $E5 ; FREED FROM A SPELL\n\nTitleStoryText_Line09:\n\t.db $DA, $DF, $ED, $DE, $EB, $FB, $FB, $DA, $F0, $DA, $E4, $DE, $E7, $E2, $E7, $E0\n\t.db $F7, $FB, $FB, $FB ; AFTER AWAKENING,\n\nTitleStoryText_Line10:\n\t.db $E6, $DA, $EB, $E2, $E8, $FB, $FB, $F0, $DE, $E7, $ED, $FB, $ED, $E8, $FB, $FB\n\t.db $DA, $FB, $FB, $FB ; MARIO WENT TO A\n\nTitleStoryText_Line11:\n\t.db $DC, $DA, $EF, $DE, $FB, $FB, $E7, $DE, $DA, $EB, $DB, $F2, $FB, $DA, $E7, $DD\n\t.db $FB, $FB, $ED, $E8 ; CAVE NEARBY AND TO\n\nTitleStoryText_Line12:\n\t.db $E1, $E2, $EC, $FB, $FB, $EC, $EE, $EB, $E9, $EB, $E2, $EC, $DE, $FB, $E1, $DE\n\t.db $FB, $EC, $DA, $F0 ; HIS SURPRISE HE SAW\n\nTitleStoryText_Line13:\n\t.db $DE, $F1, $DA, $DC, $ED, $E5, $F2, $FB, $FB, $F0, $E1, $DA, $ED, $FB, $E1, $DE\n\t.db $FB, $EC, $DA, $F0 ; EXACTLY WHAT HE SAW\n\nTitleStoryText_Line14:\n\t.db $E2, $E7, $FB, $E1, $E2, $EC, $FB, $DD, $EB, $DE, $DA, $E6, $CF, $CF, $CF, $CF\n\t.db $FB, $FB, $FB, $FB ; IN HIS DREAM....\n\nTitleStoryText_Line15:\n\t.db $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB\n\t.db $FB, $FB, $FB, $FB ; (blank)\n\nTitleStoryText_Line16:\n\t.db $FB, $FB, $E9, $EE, $EC, $E1, $FB, $EC, $ED, $DA, $EB, $ED, $FB, $DB, $EE, $ED\n\t.db $ED, $E8, $E7, $FB ; PUSH START BUTTON\n\nTitleAttributeData1:\n\t.db $23, $CB, $42, $FF\n\t.db $23, $D1, $01, $CC\n\t.db $23, $D2, $44, $FF\n\t.db $23, $D6, $01, $33\n\t.db $23, $D9, $01, $CC\n\t.db $23, $DA, $44, $FF\n\nTitleAttributeData2:\n\t.db $23, $DE, $01, $33\n\t.db $23, $E1, $01, $CC\n\t.db $23, $E2, $44, $FF\n\t.db $23, $E6, $01, $33\n\t.db $23, $EA, $44, $FF\n\t.db $23, $E9, $01, $CC\n\t.db $23, $EE, $01, $33\n\n\n; =============== S U B R O U T I N E =======================================\n\nTitleScreen:\n\tLDY #$07 ; Does initialization of RAM.\n\tSTY byte_RAM_1 ; This clears $200 to $7FF.\n\tLDY #$00\n\tSTY byte_RAM_0\n\tTYA\n\nInitMemoryLoop:\n\tSTA (byte_RAM_0), Y ; I'm not sure if a different method of initializing memory\n; would work better in this case.\n\tDEY\n\tBNE InitMemoryLoop\n\n\tDEC byte_RAM_1\n\tLDX byte_RAM_1\n\tCPX #$02\n\tBCS InitMemoryLoop ; Stop initialization after we hit $200.\n\nloc_BANK0_9A53:\n\tLDA #$00\n\tTAY\n\nInitMemoryLoop2:\n\t; Clear $0000-$00FF.\n\t; Notably, this leaves the stack area $0100-$01FF uninitialized.\n\t; This is not super important, but you might want to do it yourself to\n\t; track stack corruption or whatever.\n\tSTA byte_RAM_0, Y\n\tINY\n\tBNE InitMemoryLoop2\n\n\tJSR LoadTitleScreenCHRBanks\n\n\tJSR ClearNametablesAndSprites\n\n\tLDA PPUSTATUS\n\tLDA #$3F\n\tLDY #$00\n\tSTA PPUADDR\n\tSTY PPUADDR\n\nloc_BANK0_9A6F:\n\tLDA TitleBackgroundPalettes, Y\n\tSTA PPUDATA\n\tINY\n\tCPY #$20\n\tBCC loc_BANK0_9A6F\n\n\tLDA #$01\n\tSTA RAM_PPUDataBufferPointer\n\tLDA #$03\n\tSTA RAM_PPUDataBufferPointer + 1\n\tLDA #Stack100_Menu\n\tSTA StackArea\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x8 | PPUCtrl_NMIEnabled\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA #$01 ; @TODO\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA #Music1_Title\n\tSTA MusicQueue1\n\tJSR WaitForNMI_TitleScreen_TurnOnPPU\n\n\tLDA #$03\n\tSTA byte_RAM_10\n\tLDA #$25\n\tSTA byte_RAM_2\n\tLDA #$20\n\tSTA PlayerXHi\n\tLDA #$C7\n\tSTA ObjectXHi\n\tLDA #$52\n\tSTA ObjectXHi + 1\n\nloc_BANK0_9AB4:\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA ObjectXHi + 2\n\tBNE loc_BANK0_9AF3\n\nloc_BANK0_9ABB:\n\tINC byte_RAM_10\n\tLDA byte_RAM_10\n\tAND #$0F\n\tBEQ loc_BANK0_9AC6\n\n\tJMP loc_BANK0_9B4D\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9AC6:\n\tDEC byte_RAM_2\n\tLDA byte_RAM_2\n\tCMP #$06\n\tBNE loc_BANK0_9B4D\n\n\tINC ObjectXHi + 2\n\tLDA PlayerXHi\n\tSTA PPUBuffer_301\n\tLDA ObjectXHi\n\tSTA PPUBuffer_301 + 1\n\tLDA ObjectXHi + 1\n\tSTA PPUBuffer_301 + 2\n\tLDA #$E6\n\tSTA ObjectXHi\n\tLDA #$54\n\tSTA ObjectXHi + 1\n\tLDA #$0FB\n\tSTA PPUBuffer_301 + 3\n\tLDA #$00\n\tSTA PPUBuffer_301 + 4\n\tBEQ loc_BANK0_9B4D\n\nloc_BANK0_9AF3:\n\tLDA PlayerXHi\n\tSTA PPUBuffer_301\n\tLDA ObjectXHi\n\tSTA PPUBuffer_301 + 1\n\tLDA ObjectXHi + 1\n\tSTA PPUBuffer_301 + 2\n\tLDA #$0FB\n\tSTA PPUBuffer_301 + 3\n\tLDA #$00\n\tSTA PPUBuffer_301 + 4\n\tLDA ObjectXHi\n\tCLC\n\tADC #$20\n\tSTA ObjectXHi\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA PlayerXHi\n\tCMP #$23\n\nloc_BANK0_9B1B:\n\tBCC loc_BANK0_9B4D\n\n\tLDA #$20\n\tSTA byte_RAM_10\n\tLDX #$17\n\tLDY #$00\n\nloc_BANK0_9B25:\n\tLDA TitleAttributeData1, Y\n\tSTA PPUBuffer_301 + 4, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_9B25\n\n\tLDA #$00\n\tSTA PPUBuffer_301 + 4, Y\n\tJSR WaitForNMI_TitleScreen\n\n\tLDX #$1B\n\tLDY #$00\n\nloc_BANK0_9B3B:\n\tLDA TitleAttributeData2, Y\n\tSTA PPUBuffer_301, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_9B3B\n\n\tLDA #$00\n\tSTA PPUBuffer_301, Y\n\tJMP loc_BANK0_9B59\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9B4D:\n\tLDA Player1JoypadPress\n\tAND #ControllerInput_Start\n\tBEQ loc_BANK0_9B56\n\n\tJMP loc_BANK0_9C1F\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9B56:\n\tJMP loc_BANK0_9AB4\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9B59:\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA ObjectXHi + 4\n\tBEQ loc_BANK0_9B63\n\n\tJMP loc_BANK0_9C19\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9B63:\n\tLDA ObjectXHi + 3\n\tCMP #$09\n\tBEQ loc_BANK0_9B93\n\n\tLDA ObjectXHi + 3\n\tBNE loc_BANK0_9BA3\n\n\tDEC byte_RAM_10\n\tBMI TitleScreen_WriteSTORYText\n\n\tJMP loc_BANK0_9C19\n\n; ---------------------------------------------------------------------------\n\nTitleScreen_WriteSTORYText:\n\tLDA #$20\n\tSTA PPUBuffer_301\n\tLDA #$0AE\n\tSTA PPUBuffer_301 + 1\n\tLDA #$05 ; Length of STORY text (5 bytes)\n\tSTA PPUBuffer_301 + 2\n\tLDY #$04 ; Bytes to copy minus one (5-1=4)\n\nTitleScreen_WriteSTORYTextLoop:\n\tLDA TitleStoryText_STORY, Y ; Copy STORY text to PPU write buffer\n\tSTA PPUBuffer_301 + 3, Y\n\tDEY\n\tBPL TitleScreen_WriteSTORYTextLoop\n\n\tLDA #$00 ; Terminate STORY text in buffer\n\tSTA PPUBuffer_301 + 8\n\nloc_BANK0_9B93:\n\tINC ObjectXHi + 3\n\tLDA #$21\n\tSTA PlayerXHi\n\tLDA #$06\n\tSTA ObjectXHi\n\tLDA #$40\n\tSTA ObjectXHi + 5\n\tBNE loc_BANK0_9C19\n\nloc_BANK0_9BA3:\n\tDEC ObjectXHi + 5\n\tBPL loc_BANK0_9C19\n\nloc_BANK0_9BA7:\n\tLDA #$40\n\tSTA ObjectXHi + 5\n\tLDA PlayerXHi\n\tSTA PPUBuffer_301\n\nloc_BANK0_9BB0:\n\tLDA ObjectXHi\n\nloc_BANK0_9BB2:\n\tSTA PPUBuffer_301 + 1\n\tLDA #$14\n\tSTA PPUBuffer_301 + 2\n\tLDX ObjectXHi + 3\n\tDEX\n\tLDA TitleStoryTextPointersHi, X\n\tSTA byte_RAM_4\n\tLDA TitleStoryTextPointersLo, X\n\tSTA byte_RAM_3\n\tLDY #$00\n\tLDX #$13\n\nloc_BANK0_9BCB:\n\tLDA (byte_RAM_3), Y\n\tSTA PPUBuffer_301 + 3, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_9BCB\n\n\tLDA #$00\n\tSTA PPUBuffer_301 + 3, Y\n\tINC ObjectXHi + 3\n\tLDA ObjectXHi\n\tCLC\n\tADC #$40\n\tSTA ObjectXHi\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA PlayerXHi\n\tLDA ObjectXHi + 3\n\tCMP #$09\n\tBCC loc_BANK0_9C19\n\n\tBNE loc_BANK0_9C0B\n\n\tLDA #$09\n\tSTA byte_RAM_2\n\tLDA #$03\n\tSTA byte_RAM_10\n\tLDA #$20\n\tSTA PlayerXHi\n\tLDA #$C7\n\tSTA ObjectXHi\n\tLDA #$52\n\tSTA ObjectXHi + 1\n\tLDA #$00\n\tSTA ObjectXHi + 2\n\tJMP loc_BANK0_9ABB\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9C0B:\n\tCMP #$12\n\tBCC loc_BANK0_9C19\n\n\tINC ObjectXHi + 4\n\tLDA #$25\n\tSTA byte_RAM_2\n\tLDA #$03\n\tSTA byte_RAM_10\n\nloc_BANK0_9C19:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Start\n\tBEQ loc_BANK0_9C35\n\nloc_BANK0_9C1F:\n\tLDA #Music2_StopMusic\n\tSTA MusicQueue2\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA #$00\n\tTAY\n\nloc_BANK0_9C2A:\n\tSTA byte_RAM_0, Y\n\tINY\n\tCPY #$F0\n\tBCC loc_BANK0_9C2A\n\n\tJMP HideAllSprites\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9C35:\n\tLDA ObjectXHi + 4\n\tBEQ loc_BANK0_9C4B\n\n\tINC byte_RAM_10\n\tLDA byte_RAM_10\n\tAND #$0F\n\tBNE loc_BANK0_9C4B\n\n\tDEC byte_RAM_2\n\tLDA byte_RAM_2\n\tCMP #$06\n\tBNE loc_BANK0_9C4B\n\n\tBEQ loc_BANK0_9C4E\n\nloc_BANK0_9C4B:\n\tJMP loc_BANK0_9B59\n\n; ---------------------------------------------------------------------------\n\nloc_BANK0_9C4E:\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x8 | PPUCtrl_NMIDisabled\n\tSTA PPUCtrlMirror\n\nloc_BANK0_9C52:\n\tSTA PPUCTRL\n\tJMP loc_BANK0_9A53\n\n; End of function TitleScreen\n\n\n\n; Unused space in the original ($9C58 - $A1FF)\nunusedSpace $A200, $FF\n\n\nEndingPPUDataPointers:\n\t.dw PPUBuffer_301\n\t.dw EndingCorkJarRoom\n\t.dw EndingCelebrationCeilingTextAndPodium\n\t.dw EndingCelebrationFloorAndSubconParade\n\t.dw EndingCelebrationPaletteFade1\n\t.dw EndingCelebrationPaletteFade2\n\t.dw EndingCelebrationPaletteFade3\n\t.dw EndingCelebrationSubconStandStill\n\t.dw EndingCelebrationUnusedText_THE_END\n\t.dw EndingCelebrationText_MARIO\n\t.dw EndingCelebrationText_PRINCESS\n\t.dw EndingCelebrationText_TOAD\n\t.dw EndingCelebrationText_LUIGI\n\n\nWaitForNMI_Ending_TurnOffPPU:\n\tLDA #$00\n\tBEQ WaitForNMI_Ending_SetPPUMaskMirror\n\nWaitForNMI_Ending_TurnOnPPU:\n\tLDA #PPUMask_ShowLeft8Pixels_BG | PPUMask_ShowLeft8Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites\n\nWaitForNMI_Ending_SetPPUMaskMirror:\n\tSTA PPUMaskMirror\n\nWaitForNMI_Ending:\n\tLDA ScreenUpdateIndex\n\tASL A\n\tTAX\n\tLDA EndingPPUDataPointers, X\n\tSTA RAM_PPUDataBufferPointer\n\tLDA EndingPPUDataPointers + 1, X\n\tSTA RAM_PPUDataBufferPointer + 1\n\n\tLDA #$00\n\tSTA NMIWaitFlag\nWaitForNMI_EndingLoop:\n\tLDA NMIWaitFlag\n\tBPL WaitForNMI_EndingLoop\n\n\tRTS\n\n\nEndingCorkJarRoom:\n\t.db $20, $00, $9E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73\n\t.db $20, $01, $9E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72\n\t.db $22, $02, $8E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73\n\t.db $22, $03, $8E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72\n\t.db $23, $44, $18, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $23, $64, $18, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $23, $84, $18, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $23, $A4, $18, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $22, $1C, $8E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73\n\t.db $22, $1D, $8E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72\n\t.db $20, $1E, $9E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73\n\t.db $20, $1F, $9E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72\n\t.db $22, $C6, $C4, $FC\n\t.db $22, $C7, $C4, $FC\n\t.db $22, $C8, $84, $AD, $AC, $AC, $AC\n\t.db $22, $E9, $83, $AD, $AC, $AC\n\t.db $23, $0A, $82, $AD, $AC\n\t.db $23, $2B, $01, $AD\n\t.db $22, $90, $84, $88, $89, $89, $8C\n\t.db $22, $91, $84, $8A, $8B, $8B, $8D\n\t.db $23, $0E, $06, $74, $76, $74, $76, $74, $76\n\t.db $23, $2E, $06, $75, $77, $75, $77, $75, $77\n\t.db $23, $C0, $20, $22, $00, $00, $00, $00, $00, $00, $88, $22, $00, $00, $00, $00, $00, $00, $88, $22, $00\n\t.db $00, $00, $00, $00, $00, $88, $22, $00, $00, $00, $00, $00, $00, $88\n\t.db $23, $E0, $20, $AA, $00, $00, $00, $00, $00, $00, $AA, $AA, $00, $00, $00, $11, $00, $00, $AA, $AA\n\t.db $A0, $A0, $A4, $A5, $A0, $A0, $AA, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A\n\t.db $00\n\nEndingCelebrationUnusedText_THANK_YOU:\n\t.db $21, $0C, $09, $ED, $E1, $DA, $E7, $E4, $FB, $F2, $E8, $EE\n\t.db $00\n\nCorkRoomSpriteStartX:\n\t.db $30 ; player\n\t.db $80 ; subcon 8\n\t.db $80 ; subcon 7\n\t.db $80 ; subcon 6\n\t.db $80 ; subcon 5\n\t.db $80 ; subcon 4\n\t.db $80 ; subcon 3\n\t.db $80 ; subcon 2\n\t.db $80 ; subcon 1\n\t.db $80 ; cork\n\nCorkRoomSpriteStartY:\n\t.db $B0 ; player\n\t.db $A0 ; subcon 8\n\t.db $A0 ; subcon 7\n\t.db $A0 ; subcon 6\n\t.db $A0 ; subcon 5\n\t.db $A0 ; subcon 4\n\t.db $A0 ; subcon 3\n\t.db $A0 ; subcon 2\n\t.db $A0 ; subcon 1\n\t.db $95 ; cork\n\nCorkRoomSpriteTargetX:\n\t.db $10 ; player\n\t.db $F4 ; subcon 8\n\t.db $0C ; subcon 7\n\t.db $E8 ; subcon 6\n\t.db $18 ; subcon 5\n\t.db $EC ; subcon 4\n\t.db $14 ; subcon 3\n\t.db $F8 ; subcon 2\n\t.db $08 ; subcon 1\n\t.db $00 ; cork\n\nCorkRoomSpriteTargetY:\n\t.db $00 ; player\n\t.db $C4 ; subcon 8\n\t.db $C4 ; subcon 7\n\t.db $B8 ; subcon 6\n\t.db $B8 ; subcon 5\n\t.db $A8 ; subcon 4\n\t.db $A8 ; subcon 3\n\t.db $A0 ; subcon 2\n\t.db $A0 ; subcon 1\n\t.db $00 ; cork\n\nCorkRoomSpriteDelay:\n\t.db $00 ; player\n\t.db $F0 ; subcon 8\n\t.db $E0 ; subcon 7\n\t.db $C0 ; subcon 6\n\t.db $A0 ; subcon 5\n\t.db $80 ; subcon 4\n\t.db $60 ; subcon 3\n\t.db $40 ; subcon 2\n\t.db $20 ; subcon 1\n\t.db $00 ; cork\n\nCorkRoomSpriteAttributes:\n\t.db $00 ; player\n\t.db $21 ; subcon 8\n\t.db $61 ; subcon 7\n\t.db $21 ; subcon 6\n\t.db $61 ; subcon 5\n\t.db $21 ; subcon 4\n\t.db $61 ; subcon 3\n\t.db $21 ; subcon 2\n\t.db $61 ; subcon 1\n\t.db $22 ; cork\n\n\nFreeSubconsScene:\n\tJSR WaitForNMI_Ending_TurnOffPPU\n\tJSR ClearNametablesAndSprites\n\n\tLDA #Stack100_Menu\n\tSTA StackArea\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x16 | PPUCtrl_NMIEnabled\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tJSR WaitForNMI_Ending\n\n\tLDA #EndingUpdateBuffer_JarRoom\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_Ending\n\n\tLDA #$60\n\tSTA FreeSubconsTimer\n\tLDA #$01\n\tSTA PlayerDirection\n\tLSR A\n\tSTA PlayerState ; A=$00\n\tSTA FreeSubconsCorkCounter\n\tSTA CrouchJumpTimer\n\tSTA byte_RAM_E6\n\tSTA byte_RAM_E5\n\tSTA SpriteFlickerSlot\n\n\tLDX #$09\nFreeSubconsScene_SpriteLoop:\n\tLDA CorkRoomSpriteStartX, X\n\tSTA ObjectXLo - 1, X\n\tLDA CorkRoomSpriteStartY, X\n\tSTA ObjectYLo - 1, X\n\tLDA CorkRoomSpriteTargetX, X\n\tSTA ObjectXVelocity - 1, X\n\tLDA CorkRoomSpriteTargetY, X\n\tSTA ObjectYVelocity - 1, X\n\tLDA CorkRoomSpriteDelay, X\n\tSTA EnemyTimer - 1, X\n\tLDA CorkRoomSpriteAttributes, X\n\tSTA ObjectAttributes - 1, X\n\tDEX\n\tBPL FreeSubconsScene_SpriteLoop\n\nFreeSubconsScene_JumpingLoop:\n\tJSR WaitForNMI_Ending_TurnOnPPU\n\n\tINC byte_RAM_10\n\tJSR HideAllSprites\n\n\tJSR FreeSubconsScene_Player\n\n\tJSR FreeSubconsScene_Cork\n\n\tLDA FreeSubconsTimer\n\tBEQ FreeSubconsScene_Exit\n\n\tLDA byte_RAM_10\n\tAND #$07\n\tBNE FreeSubconsScene_JumpingLoop\n\n\tDEC FreeSubconsTimer\n\tLDA FreeSubconsTimer\n\tCMP #$25\n\tBNE FreeSubconsScene_JumpingLoop\n\n\tLDY #Music2_EndingAndCast\n\tSTY MusicQueue2\n\tBNE FreeSubconsScene_JumpingLoop\n\nFreeSubconsScene_Exit:\n\tJSR EndingSceneTransition\n\n\tLDA byte_RAM_E6\n\tBEQ FreeSubconsScene_JumpingLoop\n\n\tRTS\n\n\n;\n; Moves the player, driving the main action in the scene\n;\nFreeSubconsScene_Player:\n\tLDA PlayerWalkFrameCounter\n\tBEQ FreeSubconsScene_Player_AfterWalkFrameCounter\n\n\tDEC PlayerWalkFrameCounter\n\nFreeSubconsScene_Player_AfterWalkFrameCounter:\n\tLDA PlayerStateTimer\n\tBEQ FreeSubconsScene_Player_AfterStateTimer\n\n\tDEC PlayerStateTimer\n\nFreeSubconsScene_Player_AfterStateTimer:\n\tLDA PlayerXLo\n\tSTA PlayerScreenX\n\tLDA PlayerYLo\n\tSTA PlayerScreenYLo\n\tJSR RenderPlayer\n\n\tLDA PlayerState\n\tJSR JumpToTableAfterJump\n\n\n\t.dw FreeSubconsScene_Phase1\n\t.dw FreeSubconsScene_Phase2\n\t.dw FreeSubconsScene_Phase3\n\t.dw FreeSubconsScene_Phase4\n\t.dw FreeSubconsScene_Phase5\n\n\n; Walking in and first jump\nFreeSubconsScene_Phase1:\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsX\n\n\t; check x-position to trigger first jump\n\tLDA PlayerXLo\n\tCMP #$3E\n\tBCC FreeSubconsScene_PhaseExit\n\n\tINC PlayerState\n\tINC PlayerInAir\n\tLDA #SpriteAnimation_Jumping\n\tSTA PlayerAnimationFrame\n\nFreeSubconsScene_Jump:\n\tLDA #SoundEffect2_Jump\n\tSTA SoundEffectQueue2\n\tJMP PlayerStartJump\n\n\n; Physics and second jump\nFreeSubconsScene_Phase2:\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsX\n\n\tJSR ApplyCorkRoomGravity\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA PlayerYVelocity\n\tBMI FreeSubconsScene_PhaseExit\n\n\t; check y-position to trigger second jump\n\tLDA PlayerYLo\n\tCMP #$A0\n\tBCC FreeSubconsScene_Phase2_NoJump\n\n\t; set x-velocity to land second jump on the jar\n\tLDA #$0C\n\tSTA PlayerXVelocity\n\tJMP FreeSubconsScene_Jump\n\nFreeSubconsScene_Phase2_NoJump:\n\t; check the top of the jar\n\tCMP #$75\n\tBCC FreeSubconsScene_PhaseExit\n\n\t; check x-position for jar\n\tLDA PlayerXLo\n\tCMP #$70\n\tBCC FreeSubconsScene_PhaseExit\n\n\tINC PlayerState\n\tDEC PlayerInAir\n\nFreeSubconsScene_PhaseExit:\n\tRTS\n\n\n; Start pulling the cork\nFreeSubconsScene_Phase3:\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsX\n\n\t; check x-position for jar\n\tLDA PlayerXLo\n\tCMP #$80\n\tBCC FreeSubconsScene_PhaseExit\n\n\t; pull the cork\n\tINC PlayerState\n\tINC HoldingItem\n\tLDA #SpriteAnimation_Pulling\n\tSTA PlayerAnimationFrame\n\tLDA #$05\n\tSTA FreeSubconsCorkCounter\n\tLDA #$28\n\tSTA PlayerStateTimer\n\tRTS\n\n\nPullCorkFrameDurations:\n\t.db $14\n\t.db $0A\n\t.db $14\n\t.db $0A\n\nPullCorkOffsets:\n\t.db $1C\n\t.db $1B\n\t.db $1E\n\t.db $1D\n\t.db $1F\n\n\n; Pull the cork out\nFreeSubconsScene_Phase4:\n\t; use PlayerStateTimer to hold this frame\n\tLDA PlayerStateTimer\n\tBNE FreeSubconsScene_Phase4_Exit\n\n\t; next FreeSubconsCorkCounter to move cork\n\tDEC FreeSubconsCorkCounter\n\tBNE FreeSubconsScene_Phase4_NextCorkFrame\n\n\t; uncorked! start jumping\n\tINC PlayerState\n\tINC PlayerInAir\n\n\tLDA #SpriteAnimation_Jumping\n\tSTA PlayerAnimationFrame\n\n\tLDA #DPCM_ItemPull\n\tSTA DPCMQueue\n\n\tLDA #$A0\n\tSTA ObjectYVelocity + 8\n\tRTS\n\nFreeSubconsScene_Phase4_NextCorkFrame:\n\tLDY FreeSubconsCorkCounter\n\tLDA PullCorkFrameDurations - 1, Y\n\tSTA PlayerStateTimer\n\nFreeSubconsScene_Phase4_Exit:\n\tRTS\n\n\n; Free Subcons and jump repeatedly\nFreeSubconsScene_Phase5:\n\tJSR FreeSubconsScene_Subcons\n\n\tJSR ApplyCorkRoomGravity\n\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA PlayerYVelocity\n\tBMI FreeSubconsScene_Phase5_Exit\n\n\t; jump when we're on the jar\n\tLDA PlayerYLo\n\tCMP #$80\n\tBCC FreeSubconsScene_Phase5_Exit\n\n\tJMP PlayerStartJump\n\nFreeSubconsScene_Phase5_Exit:\n\tRTS\n\n\nCorkRoomCharacterGravity:\n\t.db $04 ; Mario\n\t.db $04 ; Princess\n\t.db $04 ; Toad\n\t.db $01 ; Luigi\n\n\nApplyCorkRoomGravity:\n\tLDY CurrentCharacter\n\tLDA CorkRoomCharacterGravity, Y\n\tCLC\n\tADC PlayerYVelocity\n\tSTA PlayerYVelocity\n\tRTS\n\n\n;\n; Spits out Subcons and makes them flap their little wings\n;\nFreeSubconsScene_Subcons:\n\tLDX #$07\n\nFreeSubconsScene_Subcons_Loop:\n\tSTX byte_RAM_12\n\tLDA EnemyTimer, X\n\tBEQ FreeSubconsScene_Subcons_Movement\n\n\tCMP #$01\n\tBNE FreeSubconsScene_Subcons_Next\n\n\tLDA #SoundEffect1_ThrowItem\n\tSTA SoundEffectQueue1\n\tBNE FreeSubconsScene_Subcons_Next\n\nFreeSubconsScene_Subcons_Movement:\n\tJSR ApplyObjectMovement_Bank1\n\n\tLDA ObjectYVelocity, X\n\tCMP #$08\n\tBMI FreeSubconsScene_Subcons_Render\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tLDA #$F9\n\tSTA ObjectYVelocity, X\n\tLDA CorkRoomSpriteAttributes + 1, X\n\tEOR #ObjAttrib_Palette0 | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\nFreeSubconsScene_Subcons_Render:\n\tLDA byte_RAM_10\n\tASL A\n\tAND #$02\n\tSTA byte_RAM_F\n\tJSR FreeSubconsScene_Render\n\n\tINC EnemyTimer, X\n\nFreeSubconsScene_Subcons_Next:\n\tDEC EnemyTimer, X\n\tDEX\n\tBPL FreeSubconsScene_Subcons_Loop\n\n\tRTS\n\n\n\nFreeSubconsScene_Cork:\n\tLDA #$04\n\tSTA byte_RAM_F\n\tLDX #$08\n\tSTX byte_RAM_12\n\tJSR FreeSubconsScene_Render\n\n\tLDY FreeSubconsCorkCounter\n\tBNE FreeSubconsScene_Cork_Pull\n\n\tLDA ObjectYLo + 8\n\tCMP #$F0\n\tBCS FreeSubconsScene_Cork_Exit\n\n\tJMP ApplyObjectPhysicsY_Bank1\n\nFreeSubconsScene_Cork_Pull:\n\tLDA PullCorkOffsets - 1, Y\n\tCLC\n\tADC PlayerYLo\n\tSTA ObjectYLo + 8\n\nFreeSubconsScene_Cork_Exit:\n\tRTS\n\n\nCorkRoomSpriteTiles:\n\t.db $E8 ; subcon left, wings up\n\t.db $EA ; subcon right, wings up\n\t.db $EC ; subcon left, wings down\n\t.db $EE ; subcon right, wings down\n\t.db $61 ; cork left\n\t.db $63 ; cork right\n\nCorkRoomSpriteOAMAddress:\n\t.db $30 ; subcon 8\n\t.db $38 ; subcon 7\n\t.db $40 ; subcon 6\n\t.db $48 ; subcon 5\n\t.db $50 ; subcon 4\n\t.db $58 ; subcon 3\n\t.db $60 ; subcon 2\n\t.db $68 ; subcon 1\n\t.db $00 ; cork\n\n\nFreeSubconsScene_Render:\n\tLDY CorkRoomSpriteOAMAddress, X\n\tLDA ObjectYLo, X\n\tSTA SpriteDMAArea, Y\n\tSTA SpriteDMAArea + 4, Y\n\tLDA ObjectXLo, X\n\tSTA SpriteDMAArea + 3, Y\n\tCLC\n\tADC #$08\n\tSTA SpriteDMAArea + 7, Y\n\tLDA ObjectAttributes, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tLDX byte_RAM_F\n\tAND #ObjAttrib_16x32\n\tBNE FreeSubconsScene_Render_Flipped\n\n\tLDA CorkRoomSpriteTiles, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA CorkRoomSpriteTiles + 1, X\n\tBNE FreeSubconsScene_Render_Exit\n\nFreeSubconsScene_Render_Flipped:\n\tLDA CorkRoomSpriteTiles + 1, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA CorkRoomSpriteTiles, X\n\nFreeSubconsScene_Render_Exit:\n\tSTA SpriteDMAArea + 5, Y\n\tLDX byte_RAM_12\n\tRTS\n\n\nEndingCelebrationCeilingTextAndPodium:\n\t.db $20, $00, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $20, $20, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $20, $40, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $20, $60, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $20, $88, $01, $5A\n\t.db $20, $89, $4E, $9A\n\t.db $20, $97, $01, $5C\n\t.db $20, $A8, $C3, $9B\n\t.db $20, $B7, $C3, $9B\n\t.db $21, $08, $01, $5B\n\t.db $21, $09, $4E, $9A\n\t.db $21, $17, $01, $5D\n\t.db $20, $AB, $0B, $DC, $E8, $E7, $ED, $EB, $E2, $DB, $EE, $ED, $E8, $EB\n\t.db $20, $E3, $04, $40, $42, $44, $46\n\t.db $20, $F9, $04, $40, $42, $44, $46\n\t.db $21, $23, $C9, $48\n\t.db $21, $24, $C9, $49\n\t.db $21, $25, $C9, $4A\n\t.db $21, $26, $C9, $4B\n\t.db $22, $43, $04, $4C, $4D, $4E, $4F\n\t.db $21, $03, $04, $41, $43, $45, $47\n\t.db $21, $19, $04, $41, $43, $45, $47\n\t.db $21, $39, $C9, $48\n\t.db $21, $3A, $C9, $49\n\t.db $21, $3B, $C9, $4A\n\t.db $21, $3C, $C9, $4B\n\t.db $22, $59, $04, $4C, $4D, $4E, $4F\n\t.db $21, $CA, $4C, $54\n\t.db $21, $EA, $4C, $55\n\t.db $22, $0B, $0A, $50, $52, $50, $52, $50, $52, $50, $52, $50, $52\n\t.db $22, $2B, $0A, $51, $53, $51, $53, $51, $53, $51, $53, $51, $53\n\t.db $22, $4C, $02, $3A, $3B\n\t.db $22, $6C, $C5, $3C\n\t.db $22, $6D, $C5, $3D\n\t.db $22, $52, $02, $3A, $3B\n\t.db $22, $72, $C5, $3C\n\t.db $22, $73, $C5, $3D\n\t.db $00\n\nEndingCelebrationFloorAndSubconParade:\n\t.db $23, $00, $20\n\t.db $00, $02, $08, $0A, $0C, $0E, $04, $06, $08, $0A, $04, $06, $0C, $0E, $04, $06\n\t.db $08, $0A, $00, $02, $0C, $0E, $0C, $0E, $00, $02, $04, $06, $04, $06, $08, $0A\n\n\t.db $23, $20, $20\n\t.db $01, $03, $09, $0B, $0D, $0F, $05, $07, $09, $0B, $05, $07, $0D, $0F, $05, $07\n\t.db $09, $0B, $01, $03, $0D, $0F, $0D, $0F, $01, $03, $05, $07, $05, $07, $09, $0B\n\n\t.db $27, $00, $20\n\t.db $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76\n\t.db $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76\n\n\t.db $27, $20, $20\n\t.db $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77\n\t.db $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77\n\n\t.db $23, $40, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $23, $60, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $23, $80, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $23, $A0, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $27, $40, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $27, $60, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $27, $80, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $27, $A0, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $23, $C0, $48, $AA\n\t.db $23, $C8, $08, $15, $05, $FF, $FF, $FF, $FF, $15, $45\n\n\t.db $23, $D0, $20\n\t.db $31, $00, $FF, $FF, $FF, $FF, $00, $44, $33, $00, $A6, $A5, $A5, $A6, $00, $44\n\t.db $F3, $F0, $59, $AA, $AA, $96, $F0, $74, $DD, $FF, $55, $AA, $AA, $95, $55, $55\n\n\t.db $23, $F0, $48, $A5\n\t.db $23, $F8, $48, $0A\n\t.db $27, $F0, $48, $A5\n\t.db $27, $F8, $48, $0A\n\t.db $00\n\nEndingCelebrationSubconStandStill:\n\t.db $23, $00, $20\n\t.db $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72\n\t.db $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72\n\t.db $23, $20, $20\n\t.db $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73\n\t.db $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73\n\t.db $00\n\nEndingCelebrationUnusedText_THE_END:\n\t.db $21, $AC, $07\n\t.db $ED, $E1, $DE, $FB, $DE, $E7, $DD\n\t.db $00\n\nEndingCelebrationPaletteFade1:\n\t.db $3F, $00, $20\n\t.db $01, $30, $21, $0F\n\t.db $01, $30, $16, $0F\n\t.db $01, $28, $18, $0F\n\t.db $01, $30, $30, $01\n\t.db $01, $27, $16, $0F\n\t.db $01, $37, $2A, $0F\n\t.db $01, $27, $30, $0F\n\t.db $01, $36, $25, $0F\n\t.db $00\n\nEndingCelebrationPaletteFade2:\n\t.db $3F, $00, $20\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $00\n\nEndingCelebrationPaletteFade3:\n\t.db $3F, $00, $20\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $00\n\nEndingScreenUpdateIndex:\n\t.db EndingUpdateBuffer_PaletteFade1\n\t.db EndingUpdateBuffer_PaletteFade2 ; 1 ; @TODO This seems wrong, somehow\n\t.db EndingUpdateBuffer_PaletteFade3 ; 2\n\nContributorSpriteZeroOAMData:\n\t.db $8C, $FC, $20, $94\n\nContributorCharacterOAMData:\n\t; Mario\n\t.db $4F, $61, $20, $50\n\t.db $4F, $63, $20, $58\n\t.db $5F, $65, $20, $50\n\t.db $5F, $67, $20, $58\n\t; Luigi\n\t.db $4F, $69, $21, $68\n\t.db $4F, $6B, $21, $70\n\t.db $5F, $6D, $21, $68\n\t.db $5F, $6F, $21, $70\n\t; Toad\n\t.db $4F, $83, $22, $88\n\t.db $4F, $83, $62, $90\n\t.db $5F, $87, $22, $88\n\t.db $5F, $87, $62, $90\n\t; Princess\n\t.db $4F, $8B, $23, $A0\n\t.db $4F, $8D, $23, $A8\n\t.db $5F, $8F, $23, $A0\n\t.db $5F, $91, $23, $A8\n\n\n;\n; Shows the part of the ending where the Subcons carry Wart to an uncertain\n; fate while the characters stand and wave\n;\nContributorScene:\n\tJSR WaitForNMI_Ending_TurnOffPPU\n\n\tLDA #VMirror\n\tJSR ChangeNametableMirroring\n\n\tJSR ClearNametablesAndSprites\n\n\tLDA #Stack100_Menu\n\tSTA StackArea\n\tJSR EnableNMI_Bank1\n\n\tJSR WaitForNMI_Ending\n\n\tLDA #EndingUpdateBuffer_CeilingTextAndPodium\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_Ending\n\n\tLDA #EndingUpdateBuffer_FloorAndSubconParade\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_Ending\n\n\tJSR Ending_GetContributor\n\n\tJSR WaitForNMI_Ending\n\n\tLDA #HMirror\n\tJSR ChangeNametableMirroring\n\n\tLDY #$03\nContributorScene_SpriteZeroLoop:\n\tLDA ContributorSpriteZeroOAMData, Y\n\tSTA SpriteDMAArea, Y\n\tDEY\n\tBPL ContributorScene_SpriteZeroLoop\n\n\tLDA #$00\n\tSTA byte_RAM_F3\n\tSTA byte_RAM_E6\n\n\tLDY #$3F\nContributorScene_CharacterLoop:\n\tLDA ContributorCharacterOAMData, Y\n\tSTA SpriteDMAArea + $10, Y\n\tDEY\n\tBPL ContributorScene_CharacterLoop\n\n\tLDA #$0FF\n\tSTA PlayerXHi\n\tLDA #$A0\n\tSTA PlayerXLo\n\tLDA #$08\n\tSTA PlayerXVelocity\n\tLDA #$01\n\tSTA IsHorizontalLevel\n\nloc_BANK1_AAD4:\n\tJSR WaitForNMI_Ending_TurnOnPPU\n\n\tINC byte_RAM_F3\n\tINC byte_RAM_10\n\tJSR ContributorTicker\n\n\tJSR loc_BANK1_ABCC\n\n\tLDA byte_RAM_E6\n\tCMP #$03\n\tBCS loc_BANK1_AB20\n\nloc_BANK1_AAE7:\n\tBIT PPUSTATUS\n\tBVS loc_BANK1_AAE7\n\nloc_BANK1_AAEC:\n\tBIT PPUSTATUS\n\tBVC loc_BANK1_AAEC\n\n\tLDX #$02\n\nloc_BANK1_AAF3:\n\tLDY #$00\n\nloc_BANK1_AAF5:\n\tLDA byte_RAM_0\n\tLDA byte_RAM_0\n\tDEY\n\tBNE loc_BANK1_AAF5\n\n\tDEX\n\tBNE loc_BANK1_AAF3\n\n\tLDA PPUSTATUS\n\tLDA byte_RAM_F2\n\tSTA PPUSCROLL\n\tLDA #$00\n\tSTA PPUSCROLL\n\tLDA byte_RAM_F3\n\tCMP #$0A\n\tBCC loc_BANK1_AB1D\n\n\tLDA #$00\n\tSTA byte_RAM_F3\n\tLDA byte_RAM_F2\n\tSEC\n\tSBC #$30\n\tSTA byte_RAM_F2\n\nloc_BANK1_AB1D:\n\tJMP loc_BANK1_AAD4\n\n; ---------------------------------------------------------------------------\n\nloc_BANK1_AB20:\n\tLDA #VMirror\n\tJSR ChangeNametableMirroring\n\n\tLDA #$01\n\tSTA byte_RAM_F2\n\tLSR A\n\tSTA byte_RAM_F3\n\tSTA byte_RAM_7\n\tLDA #EndingUpdateBuffer_SubconStandStill\n\tSTA ScreenUpdateIndex\n\nloc_BANK1_AB32:\n\tJSR WaitForNMI_Ending\n\n\tJSR EnableNMI_Bank1\n\n\tINC byte_RAM_F3\n\tJSR ContributorTicker\n\n\tJSR ContributorCharacterAnimation\n\nloc_BANK1_AB40:\n\tBIT PPUSTATUS\n\tBVS loc_BANK1_AB40\n\nloc_BANK1_AB45:\n\tBIT PPUSTATUS\n\tBVC loc_BANK1_AB45\n\n\tLDX #$02\n\nloc_BANK1_AB4C:\n\tLDY #$00\n\nloc_BANK1_AB4E:\n\tLDA byte_RAM_0\n\tLDA byte_RAM_0\n\tDEY\n\tBNE loc_BANK1_AB4E\n\n\tDEX\n\tBNE loc_BANK1_AB4C\n\n\tLDA #$B0\n\tORA byte_RAM_F2\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tLDA PPUSTATUS\n\tLDA #$00\n\tSTA PPUSCROLL\n\tLDA #$00\n\tSTA PPUSCROLL\n\tLDA byte_RAM_F3\n\tCMP #$14\n\tBCC loc_BANK1_AB80\n\n\tLDA #$00\n\tSTA byte_RAM_F3\n\tLDA byte_RAM_F2\n\tEOR #$01\n\tSTA byte_RAM_F2\n\tINC byte_RAM_7\n\nloc_BANK1_AB80:\n\tLDA byte_RAM_7\n\tCMP #$29\n\tBCC loc_BANK1_AB32\n\n\tJSR EndingSceneTransition\n\n\tLDA byte_RAM_E6\n\tCMP #$04\n\tBCC loc_BANK1_AB32\n\n\tRTS\n\n\n;\n; Advances to the next scene and does the palette transition\n;\nEndingSceneTransition:\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE EndingSceneTransition_Exit\n\n\tINC byte_RAM_E5\n\tLDY byte_RAM_E5\n\tCPY #$03\n\tBCS EndingSceneTransition_Next\n\n\tLDA EndingScreenUpdateIndex, Y\n\tSTA ScreenUpdateIndex\n\tRTS\n\nEndingSceneTransition_Next:\n\tINC byte_RAM_E6\n\nEndingSceneTransition_Exit:\n\tRTS\n\n\n; ---------------------------------------------------------------------------\n\nloc_BANK1_ABA7:\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE EndingSceneTransition_Exit\n\n\tDEC byte_RAM_E5\n\tLDY byte_RAM_E5\n\tLDA EndingScreenUpdateIndex, Y\n\tSTA ScreenUpdateIndex\n\tTYA\n\tBNE EndingSceneTransition_Exit\n\n\tINC byte_RAM_E6\n\tRTS\n\n\nEnableNMI_Bank1:\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x16 | PPUCtrl_NMIEnabled\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tRTS\n\n\nDisableNMI_Bank1:\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x16 | PPUCtrl_NMIDisabled\n\tSTA PPUCTRL\n\tSTA PPUCtrlMirror\n\tRTS\n\n\n\nloc_BANK1_ABCC:\n\tJSR ContributorCharacterAnimation\n\n\tLDA byte_RAM_E6\n\tJSR JumpToTableAfterJump\n\n\t.dw loc_BANK1_ABA7\n\t.dw loc_BANK1_AC0A\n\t.dw loc_BANK1_AC87\n\n\nbyte_BANK1_ABDA:\n\t.db $C0\n\t.db $C8\n\t.db $B8\n\t.db $B8\n\t.db $C8\n\t.db $C0\n\nbyte_BANK1_ABE0:\n\t.db $C0\n\t.db $08\n\t.db $E0\n\t.db $F0\n\t.db $D0\n\t.db $E8\n\nEndingWartTiles:\n\t.db $11\n\t.db $13\n\t.db $19\n\t.db $1B\n\t.db $21\n\t.db $23\n\t.db $15\n\t.db $17\n\t.db $1D\n\t.db $1F\n\t.db $25\n\t.db $27\n\nbyte_BANK1_ABF2:\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $18\n\t.db $20\n\t.db $28\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $18\n\t.db $20\n\t.db $28\n\nbyte_BANK1_ABFE:\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $10\n\t.db $10\n\t.db $10\n\t.db $10\n\t.db $10\n\t.db $10\n\n\n; ---------------------------------------------------------------------------\n\nloc_BANK1_AC0A:\n\tJSR ApplyPlayerPhysicsX\n\n\tLDA PlayerXHi\n\tCMP #$01\n\tBNE loc_BANK1_AC37\n\n\tLDA PlayerXLo\n\tCMP #$20\n\tBCC loc_BANK1_AC37\n\n\tINC_abs byte_RAM_E6\n\n\tLDA #$A0\n\tSTA byte_RAM_10\n\tLDX #$05\n\nloc_BANK1_AC22:\n\tLDA #$20\n\tSTA ObjectXLo, X\n\tLDA #$A8\n\nloc_BANK1_AC28:\n\tSTA ObjectYLo, X\n\tLDA byte_BANK1_ABDA, X\n\tSTA ObjectXVelocity, X\n\tLDA byte_BANK1_ABE0, X\n\tSTA ObjectYVelocity, X\n\tDEX\n\tBPL loc_BANK1_AC22\n\nloc_BANK1_AC37:\n\tLDY #$A0\n\tLDA byte_RAM_10\n\tAND #$38\n\tBNE loc_BANK1_AC40\n\n\tDEY\n\nloc_BANK1_AC40:\n\tAND #$08\n\tBNE loc_BANK1_AC45\n\n\tDEY\n\nloc_BANK1_AC45:\n\tSTY PlayerYLo\n\tLDX #$0B\n\tLDY #$70\n\nloc_BANK1_AC4B:\n\tLDA PlayerYLo\n\tCLC\n\tADC byte_BANK1_ABFE, X\n\tSTA SpriteDMAArea, Y\n\tLDA EndingWartTiles, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$01\n\tSTA SpriteDMAArea + 2, Y\n\tLDA PlayerXLo\n\tCLC\n\tADC byte_BANK1_ABF2, X\n\tSTA SpriteDMAArea + 3, Y\n\tLDA PlayerXHi\n\nloc_BANK1_AC6A:\n\tADC #$00\n\tBEQ loc_BANK1_AC73\n\n\tLDA #$F0\n\tSTA SpriteDMAArea, Y\n\nloc_BANK1_AC73:\n\tINY\n\tINY\n\tINY\n\tINY\n\tDEX\n\tBPL loc_BANK1_AC4B\n\n\tRTS\n\n\nZonkTiles:\n\t.db $39\n\t.db $35\n\t.db $37\n\t.db $35\n\t.db $37\n\t.db $39\n\nbyte_BANK1_AC81:\n\t.db $00\n\t.db $06\n\t.db $03\n\t.db $09\n\t.db $0F\n\t.db $0C\n\n\nloc_BANK1_AC87:\n\tLDA byte_RAM_10\n\tBNE loc_BANK1_ACA4\n\nloc_BANK1_AC8B:\n\tSTA ObjectXSubpixel + 6\n\tSTA ObjectYSubpixel + 6\n\tSTA ObjectXLo + 6\n\tSTA byte_RAM_10\n\tLDA #$6F\n\tSTA ObjectYLo + 6\n\tLDA #$E6\n\tSTA ObjectXVelocity + 6\n\tLDA #$0DA\n\tSTA ObjectYVelocity + 6\n\n\tINC_abs byte_RAM_E6\n\n\nloc_BANK1_ACA4:\n\tLDX #$05\n\nloc_BANK1_ACA6:\n\tSTX byte_RAM_12\n\tJSR ApplyObjectPhysicsX_Bank1\n\n\tJSR ApplyObjectPhysicsY_Bank1\n\n\tLDY #$F0\n\tLDA byte_RAM_10\n\tBEQ loc_BANK1_ACC1\n\n\tAND #$0F\n\tCMP byte_BANK1_AC81, X\n\tBNE loc_BANK1_ACC3\n\n\tLDA #$20\n\tSTA ObjectXLo, X\n\tLDY #$A8\n\nloc_BANK1_ACC1:\n\tSTY ObjectYLo, X\n\nloc_BANK1_ACC3:\n\tTXA\n\tASL A\n\tASL A\n\tTAY\n\tLDA ObjectXLo, X\n\tCMP #$80\n\tBCS loc_BANK1_ACD1\n\n\tLDA #$F0\n\tBNE loc_BANK1_ACD6\n\nloc_BANK1_ACD1:\n\tSTA SpriteDMAArea + $73, Y\n\tLDA ObjectYLo, X\n\nloc_BANK1_ACD6:\n\tSTA SpriteDMAArea + $70, Y\n\tLDA ZonkTiles, X\n\tSTA SpriteDMAArea + $71, Y\n\tLDA #$00\n\tSTA SpriteDMAArea + $72, Y\n\tDEX\n\tBPL loc_BANK1_ACA6\n\n\tRTS\n\n\nContributorAnimationTiles:\nContributorAnimationTiles_Mario:\n\t.db $61\n\t.db $61\n\t.db $63\n\t.db $93\n\t.db $65\n\t.db $65\n\t.db $67\n\t.db $67\nContributorAnimationTiles_Luigi:\n\t.db $69\n\t.db $69\n\t.db $95\n\t.db $6B\n\t.db $6D\n\t.db $6D\n\t.db $97\n\t.db $6F\nContributorAnimationTiles_Toad:\n\t.db $83\n\t.db $85\n\t.db $83\n\t.db $85\n\t.db $87\n\t.db $89\n\t.db $87\n\t.db $89\nContributorAnimationTiles_Princess:\n\t.db $8B\n\t.db $8B\n\t.db $99\n\t.db $8D\n\t.db $8F\n\t.db $8F\n\t.db $91\n\t.db $91\n\nContributorAnimationTilesOffset:\n\t.db (ContributorAnimationTiles_Mario - ContributorAnimationTiles + 6)\n\t.db (ContributorAnimationTiles_Luigi - ContributorAnimationTiles + 6)\n\t.db (ContributorAnimationTiles_Toad - ContributorAnimationTiles + 6)\n\t.db (ContributorAnimationTiles_Princess - ContributorAnimationTiles + 6)\n\n\nContributorCharacterAnimation:\n\tINC PlayerWalkFrame\n\tLDA #$03\n\tSTA byte_RAM_0\n\tLDA PlayerWalkFrame\n\tSTA byte_RAM_1\n\tLDY #$3C\n\nContributorCharacterAnimation_OuterLoop:\n\tLDX byte_RAM_0\n\tLDA ContributorAnimationTilesOffset, X\n\tTAX\n\tINC byte_RAM_1\n\tLDA byte_RAM_1\n\tAND #$10\n\tBEQ ContributorCharacterAnimation_Render\n\n\tINX\n\nContributorCharacterAnimation_Render:\n\tLDA #$03\n\tSTA byte_RAM_2\nContributorCharacterAnimation_InnerLoop:\n\tLDA ContributorAnimationTiles, X\n\tSTA SpriteDMAArea + $11, Y\n\tDEX\n\tDEX\n\tDEY\n\tDEY\n\tDEY\n\tDEY\n\tDEC byte_RAM_2\n\tBPL ContributorCharacterAnimation_InnerLoop\n\n\tDEC byte_RAM_0\n\tBPL ContributorCharacterAnimation_OuterLoop\n\n\tRTS\n\n\n;\n; Calculates the list of top contributors\n;\nEnding_GetContributor:\n\tLDA #$00\n\tSTA MaxLevelsCompleted\n\n\tLDY #$03\nEnding_GetContributor_Loop:\n\tLDA CharacterLevelsCompleted, Y\n\tCMP MaxLevelsCompleted\n\tBCC Ending_GetContributor_Next\n\n\tLDA CharacterLevelsCompleted, Y\n\tSTA MaxLevelsCompleted\n\nEnding_GetContributor_Next:\n\tDEY\n\tBPL Ending_GetContributor_Loop\n\n\tLDX #$00\n\tLDY #$03\nEnding_GetContributor_Loop2:\n\tLDA CharacterLevelsCompleted, Y\n\tCMP MaxLevelsCompleted\n\tBNE Ending_GetContributor_Next2\n\n\tTYA\n\tSTA Contributors, X\n\tINX\n\nEnding_GetContributor_Next2:\n\tDEY\n\tBPL Ending_GetContributor_Loop2\n\n\tDEX\n\tSTX NumContributors\n\tLDX #$00\n\tLDA #$21\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$2A\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$0C\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$00\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$0FB\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$03\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\n\tLDA #$0FB\n\tSTA PPUBuffer_301, X\n\tINX\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$02\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$0FB\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$01\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tLDA #$3C\n\tSTA ContributorTimer\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nContributorTicker:\n\tDEC ContributorTimer\n\tBPL ContributorTicker_Exit\n\n\tLDA #$3C\n\tSTA ContributorTimer\n\tLDY ContributorIndex\n\tLDA Contributors, Y\n\tCLC\n\tADC #$09\n\n\tSTA_abs ScreenUpdateIndex\n\n\tDEC ContributorIndex\n\tBPL ContributorTicker_Exit\n\n\tLDA NumContributors\n\tSTA ContributorIndex\n\nContributorTicker_Exit:\n\tRTS\n\n\nEndingCelebrationText_MARIO:\n\t.db $20, $ED, $08, $E6, $DA, $EB, $E2, $E8, $FB, $FB, $FB\n\t.db $00\n\nEndingCelebrationText_PRINCESS:\n\t.db $20, $ED, $08, $E9, $EB, $E2, $E7, $DC, $DE, $EC, $EC\n\t.db $00\n\nEndingCelebrationText_TOAD:\n\t.db $20, $ED, $08, $ED, $E8, $DA, $DD, $FB, $FB, $FB, $FB\n\t.db $00\n\nEndingCelebrationText_LUIGI:\n\t.db $20, $ED, $08, $E5, $EE, $E2, $E0, $E2, $FB, $FB, $FB\n\t.db $00\n\n\n; =============== S U B R O U T I N E =======================================\n\nsub_BANK1_AE43:\n\tLDY #$D0\n\nloc_BANK1_AE45:\n\tCMP #$0A\n\tBCC loc_BANK1_AE4F\n\n\tSBC #$0A\n\nloc_BANK1_AE4B:\n\tINY\n\tJMP loc_BANK1_AE45\n\n; ---------------------------------------------------------------------------\n\nloc_BANK1_AE4F:\n\tORA #$D0\n\tCPY #$D0\n\tBNE loc_BANK1_AE57\n\n\tLDY #$0FB\n\nloc_BANK1_AE57:\n\tSTA byte_RAM_1\n\tRTS\n\n; End of function sub_BANK1_AE43\n\n; ---------------------------------------------------------------------------\n\n; Unused space in the original ($AE5A - $B8FF)\nunusedSpace $B900, $FF\n\nMysteryCharacterData3900:\n\t.db $FB ; @TODO ??? Not sure what this is\n\t.db $FF\n\t.db $00\n\t.db $08\n\t.db $0C\n\t.db $18\n\t.db $1A\n\n\n;\n; NOTE: A copy of this subroutine also exists in Bank 2\n;\n; Applies object physics for the y-axis\n;\n; Input\n;   X = enemy index\n;\nApplyObjectPhysicsY_Bank1:\n\tTXA\n\tCLC\n\tADC #$0A\n\tTAX\n\n;\n; NOTE: A copy of this subroutine also exists in Bank 2\n;\n; Applies object physics for the x-axis\n;\n; Input\n;   X = enemy index, physics direction\n;       ($00-$09 for horizontal, $0A-$13 for vertical)\n;\n; Output\n;   X = RAM_12\n;\nApplyObjectPhysicsX_Bank1:\n\t; Add acceleration to velocity\n\tLDA ObjectXVelocity, X\n\tCLC\n\tADC ObjectXAcceleration, X\n\n\tPHA\n\t; Lower nybble of velocity is for subpixel position\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_1\n\n\t; Upper nybble of velocity is for lo position\n\tPLA\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\n\tCMP #$08\n\tBCC ApplyObjectPhysics_StoreVelocityLo_Bank1\n\n\t; Left/up: Carry negative bits through upper nybble\n\tORA #$F0\n\nApplyObjectPhysics_StoreVelocityLo_Bank1:\n\tSTA byte_RAM_0\n\n\tLDY #$00\n\tASL A\n\tBCC ApplyObjectPhysics_StoreDirection_Bank1\n\n\t; Left/up\n\tDEY\n\nApplyObjectPhysics_StoreDirection_Bank1:\n\tSTY byte_RAM_2\n\n\t; Add lower nybble of velocity for subpixel position\n\tLDA ObjectXSubpixel, X\n\tCLC\n\tADC byte_RAM_1\n\tSTA ObjectXSubpixel, X\n\n\t; Add upper nybble of velocity for lo position\n\tLDA ObjectXLo, X\n\tADC byte_RAM_0\n\tSTA ObjectXLo, X\n\nApplyObjectPhysics_PositionHi_Bank1:\n\tLSR byte_RAM_1\n\tLDA ObjectXHi, X\n\tADC byte_RAM_2\n\tSTA ObjectXHi, X\n\nApplyObjectPhysics_Exit_Bank1:\n\tLDX byte_RAM_12\n\tRTS\n\n\n\n;\n; Applies object physics\n;\n; Input\n;   X = enemy index\n;\nApplyObjectMovement_Bank1:\n\tLDA ObjectShakeTimer, X\n\tBNE ApplyObjectMovement_Vertical_Bank1\n\n\tJSR ApplyObjectPhysicsX_Bank1\n\nApplyObjectMovement_Vertical_Bank1:\n\tJSR ApplyObjectPhysicsY_Bank1\n\n\tLDA ObjectYVelocity, X\n\tBMI ApplyObjectMovement_Gravity_Bank1\n\n\t; Check terminal velocity\n\tCMP #$3E\n\tBCS ApplyObjectMovement_Exit_Bank1\n\nApplyObjectMovement_Gravity_Bank1:\n\tINC ObjectYVelocity, X\n\tINC ObjectYVelocity, X\n\nApplyObjectMovement_Exit_Bank1:\n\tRTS\n\n\nDoorAnimation_Locked:\n\tLDA #$01\n\tBNE DoorAnimation\n\nDoorAnimation_Unlocked:\n\tLDA #$00\n\nDoorAnimation:\n\tPHA\n\tLDY #$08\n\nDoorAnimation_Loop:\n\t; skip if inactive\n\tLDA EnemyState, Y\n\tBEQ DoorAnimation_LoopNext\n\n\t; skip enemies that aren't the door\n\tLDA ObjectType, Y\n\tCMP #Enemy_SubspaceDoor\n\tBNE DoorAnimation_LoopNext\n\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, Y\n\tLDA #$20\n\tSTA EnemyTimer, Y\n\nDoorAnimation_LoopNext:\n\tDEY\n\tBPL DoorAnimation_Loop\n\n\tJSR CreateEnemy_TryAllSlots_Bank1\n\n\tBMI DoorAnimation_Exit\n\n\tLDA #$00\n\tSTA DoorAnimationTimer\n\tSTA SubspaceDoorTimer\n\tLDX byte_RAM_0\n\tPLA\n\tSTA EnemyArray_477, X\n\tLDA #Enemy_SubspaceDoor\n\tSTA ObjectType, X\n\tLDA PlayerXLo\n\tADC #$08\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA PlayerYLo\n\tSTA ObjectYLo, X\n\tLDA PlayerYHi\n\tSTA ObjectYHi, X\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDX byte_RAM_12\n\tRTS\n\nDoorAnimation_Exit:\n\tPLA\n\tRTS\n\n\nCreateStarman:\n\tJSR CreateEnemy_Bank1\n\n\tBMI CreateStarman_Exit\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Starman\n\tSTA ObjectType, X\n\tLDA ScreenBoundaryLeftLo\n\tADC #$D0\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tADC #$E0\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tADC #$00\n\tSTA ObjectYHi, X\n\tJSR loc_BANK1_BA17\n\n\tLDX byte_RAM_12\n\nCreateStarman_Exit:\n\tRTS\n\n\n; =============== S U B R O U T I N E =======================================\n\nEnemyInit_Basic_Bank1:\n\tLDA #$00\n\tSTA EnemyTimer, X\n\tLDA #$00\n\tSTA EnemyVariable, X\n\nloc_BANK1_B9EB:\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tSTA EnemyArray_42F, X\n\tSTA ObjectBeingCarriedTimer, X\n\tSTA ObjectAnimationTimer, X\n\tSTA ObjectShakeTimer, X\n\tSTA EnemyCollision, X\n\tSTA EnemyArray_438, X\n\tSTA EnemyArray_453, X\n\tSTA ObjectXAcceleration, X\n\tSTA ObjectYAcceleration, X\n\tSTA EnemyArray_45C, X\n\tSTA EnemyArray_477, X\n\tSTA EnemyArray_480, X\n\tSTA EnemyHP, X\n\tSTA ObjectYVelocity, X\n\tSTA ObjectXVelocity, X\n\n; look up object attributes\nloc_BANK1_BA17:\n\tLDY ObjectType, X\n\tLDA ObjectAttributeTable, Y\n\tAND #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_46E_Data, Y\n\tSTA EnemyArray_46E, X\n\tLDA EnemyArray_489_Data, Y\n\tSTA EnemyArray_489, X\n\tLDA EnemyArray_492_Data, Y\n\tSTA EnemyArray_492, X\n\tRTS\n\n; End of function EnemyInit_Basic_Bank1\n\n\n;\n; Turns the key into a puff of smoke\n;\n; Input\n;   X = enemy slot\n; Output\n;   X = value of byte_RAM_12\n;\nTurnKeyIntoPuffOfSmoke:\n\tLDA ObjectAttributes, X\n\tAND #%11111100\n\tORA #ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, X\n\tSTA ObjectAnimationTimer, X\n\tLDA #$1F\n\tSTA EnemyTimer, X\n\tLDX byte_RAM_12\n\tRTS\n\n\n;\n; NOTE: This is a copy of the \"UnlinkEnemyFromRawData\" routine in Bank 2, but\n; it is used here for spawning the door animation and Starman objects.\n;\n; Spawned enemies are linked to an offset in the raw enemy data, which prevents\n; from being respawned until they are killed or moved offscreen.\n;\n; This subroutine ensures that the enemy in a particular slot is not linked to\n; the raw enemy data\n;\n; Input\n;   X = enemy slot\n;\nUnlinkEnemyFromRawData_Bank1:\n\tLDA #$0FF\n\tSTA EnemyRawDataOffset, X\n\tRTS\n\n\n;\n; Updates the area page and tile placement offset\n;\n; Input\n;   byte_RAM_E8 = area page\n;   byte_RAM_E5 = tile placement offset shift\n;   byte_RAM_E6 = previous tile placement offset\n; Output\n;   RAM_1 = low byte of decoded level data RAM\n;   RAM_2 = low byte of decoded level data RAM\n;   byte_RAM_E7 = target tile placement offset\n;\nSetTileOffsetAndAreaPageAddr_Bank1:\n\tLDX byte_RAM_E8\n\tJSR SetAreaPageAddr_Bank1\n\n\tLDA byte_RAM_E6\n\tCLC\n\tADC byte_RAM_E5\n\tSTA byte_RAM_E7\n\tRTS\n\n\nDecodedLevelPageStartLo_Bank1:\n\t.db <DecodedLevelData\n\t.db <(DecodedLevelData+$00F0)\n\t.db <(DecodedLevelData+$01E0)\n\t.db <(DecodedLevelData+$02D0)\n\t.db <(DecodedLevelData+$03C0)\n\t.db <(DecodedLevelData+$04B0)\n\t.db <(DecodedLevelData+$05A0)\n\t.db <(DecodedLevelData+$0690)\n\t.db <(DecodedLevelData+$0780)\n\t.db <(DecodedLevelData+$0870)\n\t.db <(SubAreaTileLayout)\n\nDecodedLevelPageStartHi_Bank1:\n\t.db >DecodedLevelData\n\t.db >(DecodedLevelData+$00F0)\n\t.db >(DecodedLevelData+$01E0)\n\t.db >(DecodedLevelData+$02D0)\n\t.db >(DecodedLevelData+$03C0)\n\t.db >(DecodedLevelData+$04B0)\n\t.db >(DecodedLevelData+$05A0)\n\t.db >(DecodedLevelData+$0690)\n\t.db >(DecodedLevelData+$0780)\n\t.db >(DecodedLevelData+$0870)\n\t.db >(SubAreaTileLayout)\n\n\n;\n; Updates the area page that we're reading tiles from\n;\n; Input\n;   X = area page\n; Output\n;   byte_RAM_1 = low byte of decoded level data RAM\n;   byte_RAM_2 = low byte of decoded level data RAM\n;\nSetAreaPageAddr_Bank1:\n\tLDA DecodedLevelPageStartLo_Bank1, X\n\tSTA byte_RAM_1\n\tLDA DecodedLevelPageStartHi_Bank1, X\n\tSTA byte_RAM_2\n\tRTS\n\n\n;\n; Checks whether the player is on a quicksand tile\n;\n; Input\n;   byte_RAM_0 = tile ID\n; Output\n;   A = Whether the player is sinking in quicksand\n;   X = PlayerInAir flag\n;\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nPlayerTileCollision_CheckQuicksand:\n\tLDA #$01\n\tLDY byte_RAM_0\n\tCPY #BackgroundTile_QuicksandSlow\n\tBEQ PlayerTileCollision_QuicksandSlow\n\n\tCPY #BackgroundTile_QuicksandFast\n\tBEQ PlayerTileCollision_QuicksandFast\n\nELSE\nPlayerTileCollision_CheckQuicksand:\n\tLDY byte_RAM_0\n\tLDA InteractiveTileCollisionTable, Y\n\tAND #%00001100\n\tCMP #%00001000\n\n\tBNE PlayerTileCollision_NotQuicksand\n\n\tTYA\n\tAND %00000001\n\tBNE PlayerTileCollision_QuicksandFast\n\n\tLDA #$01\n\tBNE PlayerTileCollision_QuicksandSlow\nENDIF\n\nPlayerTileCollision_NotQuicksand:\n\tLDA #$00\n\tRTS\n\nPlayerTileCollision_QuicksandFast:\n\tLDA #$08\n\nPlayerTileCollision_QuicksandSlow:\n\tSTA PlayerYVelocity\n\tLDA QuicksandDepth\n\tBNE loc_BANK1_BA9B\n\n\tLDA PlayerYLo\n\tAND #$10\n\tSTA byte_RAM_4EB\n\nloc_BANK1_BA9B:\n\t; check if player is too far under\n\tLDA PlayerYLo\n\tAND #$0F\n\tTAY\n\tLDA byte_RAM_4EB\n\tEOR PlayerYLo\n\tAND #$10\n\tBEQ loc_BANK1_BAB6\n\n\t; kill if >= this check\n\tCPY #$0C\n\tBCC loc_BANK1_BAB4\n\n\tLDA #$00\n\tSTA PlayerStateTimer\n\tJSR KillPlayer\n\nloc_BANK1_BAB4:\n\tLDY #$04\n\nloc_BANK1_BAB6:\n\tCPY #$04\n\tBCS loc_BANK1_BABC\n\n\tLDY #$01\n\nloc_BANK1_BABC:\n\tTYA\n\tDEX\n\tRTS\n\n\nPlayerTileCollision_HurtPlayer:\n\tLDA DamageInvulnTime\n\tBNE locret_BANK1_BAEC\n\n\tLDA PlayerHealth\n\tSEC\n\tSBC #$10\n\tBCC loc_BANK1_BAED\n\n\tSTA PlayerHealth\n\tLDA #$7F\n\tSTA DamageInvulnTime\n\tLDA PlayerScreenX\n\tSEC\n\tSBC SpriteTempScreenX\n\tASL A\n\tASL A\n\tSTA PlayerXVelocity\n\tLDA #$C0\n\tLDY PlayerYVelocity\n\tBPL loc_BANK1_BAE5\n\n\tLDA #$00\n\nloc_BANK1_BAE5:\n\tSTA PlayerYVelocity\n\tLDA #DPCM_PlayerHurt\n\tSTA DPCMQueue\n\nlocret_BANK1_BAEC:\n\tRTS\n\n; ---------------------------------------------------------------------------\n\nloc_BANK1_BAED:\n\tLDA #$C0\n\tSTA PlayerYVelocity\n\tLDA #$20\n\tSTA PlayerStateTimer\n\tLDY byte_RAM_12\n\tBMI loc_BANK1_BAFD\n\n\tLSR A\n\tSTA EnemyArray_438, Y\n\nloc_BANK1_BAFD:\n\tJMP KillPlayer\n\n\n; ---------------------------------------------------------------------------\n\n_code_3B00:\n\tLDY EnemyRawDataOffset, X\n\tBMI loc_BANK1_BB0B\n\n\tLDA (RawEnemyData), Y\n\tAND #$7F\n\tSTA (RawEnemyData), Y\n\nloc_BANK1_BB0B:\n\tLDA #$00\n\tSTA EnemyState, X\n\tRTS\n\n\n;\n; NOTE: This is a copy of the \"CreateEnemy\" routine in Bank 2, but it is used\n; here for spawning the door animation and Starman objects.\n;\n; Creates a generic red Shyguy enemy and\n; does some basic initialization for it.\n;\n; CreateEnemy_TryAllSlots checks all 9 object slots\n; CreateEnemy only checks the first 6 object slots\n;\n; Output\n;   N = enabled if no empty slot was found\n;   Y = $FF if there no empty slot was found\n;   byte_RAM_0 = slot used\n;\nCreateEnemy_TryAllSlots_Bank1:\n\tLDY #$08\n\tBNE CreateEnemy_Bank1_FindSlot\n\nCreateEnemy_Bank1:\n\tLDY #$05\n\nCreateEnemy_Bank1_FindSlot:\n\tLDA EnemyState, Y\n\tBEQ CreateEnemy_Bank1_FoundSlot\n\n\tDEY\n\tBPL CreateEnemy_Bank1_FindSlot\n\n\tRTS\n\nCreateEnemy_Bank1_FoundSlot:\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, Y\n\tLSR A\n\tSTA EnemyArray_SpawnsDoor, Y\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, Y\n\tLDA ObjectXLo, X\n\tADC #$05\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, Y\n\tLDA ObjectYLo, X\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tSTA ObjectYHi, Y\n\tSTY byte_RAM_0\n\tTYA\n\tTAX\n\n\tJSR EnemyInit_Basic_Bank1\n\tJSR UnlinkEnemyFromRawData_Bank1\n\n\tLDX byte_RAM_12\n\tRTS\n\n\nIFDEF CONTROLLER_2_DEBUG\nChangeCharacterOffsets:\n\t.db $00 ; unused\n\t.db $03 ; Mario to right\n\t.db $01 ; Mario to left\n\t.db $00 ; Princess to right\n\t.db $02 ; Princess to left\n\t.db $01 ; Toad to right\n\t.db $03 ; Toad to left\n\t.db $02 ; Luigi to right\n\t.db $00 ; Luigi to left\n\nCheckPlayer2Joypad:\n\tLDA ChangeCharacterTimer\n\tBEQ CheckPlayer2Joypad_Go\n\n\tDEC ChangeCharacterTimer\n\nCheckPlayer2Joypad_No:\n\tRTS\n\nCheckPlayer2Joypad_Go:\n\tLDA PlayerState\n\tCMP #PlayerState_Dying\n\tBEQ CheckPlayer2Joypad_No\n\nCheckPlayer2Joypad_CheckSelect:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Select\n\tBEQ CheckPlayer2Joypad_CheckUp\n\n\tLDA CurrentLevel_Init\n\tSTA CurrentLevel\n\tLDA CurrentLevelArea_Init\n\tSTA CurrentLevelArea\n\tLDA CurrentLevelEntryPage_Init\n\tSTA CurrentLevelEntryPage\n\tLDA TransitionType_Init\n\tSTA TransitionType\n\n\tLDA PlayerXLo_Init\n\tSTA PlayerXLo\n\tLDA PlayerYLo_Init\n\tSTA PlayerYLo\n\tLDA PlayerScreenX_Init\n\tSTA PlayerScreenX\n\tLDA PlayerScreenYLo_Init\n\tSTA PlayerScreenYLo\n\tLDA PlayerYVelocity_Init\n\tSTA PlayerYVelocity\n\tLDA PlayerState_Init\n\tSTA PlayerState\n\n\tLDA #$00\n\tSTA PlayerXVelocity\n\n\tJSR DoAreaReset\n\n\tJMP StartLevel\n\nCheckPlayer2Joypad_CheckUp:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Up\n\tBEQ CheckPlayer2Joypad_CheckDown\n\n\tLDY PlayerMaxHealth\n\tLDA PlayerHealth\n\tCMP PlayerHealthValueByHeartCount, Y\n\tBPL CheckPlayer2Joypad_CheckDown\n\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\n\tLDY PlayerMaxHealth\n\tLDA PlayerHealth\n\tCLC\n\tADC #$10\n\tSTA PlayerHealth\n\nCheckPlayer2Joypad_CheckDown:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Down\n\tBEQ CheckPlayer2Joypad_CheckStart\n\n\tLDA PlayerHealth\n\tAND #$F0\n\tBEQ CheckPlayer2Joypad_CheckStart\n\n\tLDA #DPCM_PlayerHurt\n\tSTA DPCMQueue\n\n\tLDA PlayerHealth\n\tSEC\n\tSBC #$10\n\tSTA PlayerHealth\n\nCheckPlayer2Joypad_CheckStart:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Start\n\tBEQ CheckPlayer2Joypad_CheckButtonA\n\n\tLDX #$FF\n\tLDA StopwatchTimer\n\tBEQ CheckPlayer2Joypad_SetStopwatchTimer\n\n\tINX\n\nCheckPlayer2Joypad_SetStopwatchTimer:\n\tSTX StopwatchTimer\n\nCheckPlayer2Joypad_CheckButtonA:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_A\n\tBEQ CheckPlayer2Joypad_CheckLeftRight\n\n\tLDA Player2JoypadHeld\n\tAND #ControllerInput_B\n\tBEQ CheckPlayer2Joypad_NoButtonB\n\n\tJSR DebugRandomObject\n\tBNE CheckPlayer2Joypad_CheckLeftRight\n\nCheckPlayer2Joypad_NoButtonB:\n\tJSR RandomCarryObject\n\nCheckPlayer2Joypad_CheckLeftRight:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tBEQ CheckPlayer2Joypad_Exit\n\tCMP #ControllerInput_Right | ControllerInput_Left\n\tBEQ CheckPlayer2Joypad_Exit\n\n\tCLC\n\tADC CurrentCharacter\n\tADC CurrentCharacter\n\n\tTAY\n\tLDA ChangeCharacterOffsets, Y\n\n\tLDX #$18\n\tSTX ChangeCharacterTimer\n\tLDX #$08\n\tSTX ChangeCharacterPoofTimer\n\n\tBNE CheckSetCurrentCharacter\n\nCheckPlayer2Joypad_Exit:\n\tRTS\n\n;\n; Changes the current character\n;\n; Input\n;   A = target character\n;\nCheckSetCurrentCharacter:\n\tCMP CurrentCharacter\n\tBNE SetCurrentCharacter\n\n\tRTS\n\nSetCurrentCharacter:\n\tSTA CurrentCharacter\n\n\tLDA GravityWithJumpButton\n\tPHA\n\n\tLDX CurrentCharacter\n\tLDY StatOffsetsRAM, X\n\tLDX #$00\nSetCurrentCharacter_StatsLoop:\n\tLDA StatOffsetsRAM + CharacterStats-StatOffsets, Y\n\tSTA CharacterStatsRAM, X\n\tINY\n\tINX\n\tCPX #$17\n\tBCC SetCurrentCharacter_StatsLoop\n\n\tLDA CurrentCharacter\n\tASL A\n\tASL A\n\tTAY\n\tLDX #$00\nSetCurrentCharacter_PaletteLoop:\n\tLDA StatOffsetsRAM + CharacterPalette-StatOffsets, Y\n\tSTA RestorePlayerPalette0, X\n\tINY\n\tINX\n\tCPX #$04\n\tBCC SetCurrentCharacter_PaletteLoop\n\n\t; load carry offsets\n\tLDY CurrentCharacter\n\tLDA CarryYOffsetsRAM + CarryYOffsetBigLo-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM\n\tLDA CarryYOffsetsRAM + CarryYOffsetSmallLo-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM + $07\n\tLDA CarryYOffsetsRAM + CarryYOffsetBigHi-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM + $0E\n\tLDA CarryYOffsetsRAM + CarryYOffsetSmallHi-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM + $15\n\n\t; interrupt floating if this character can't do it\n\tLDA JumpFloatLength\n\tBEQ SetCurrentCharacter_SetJumpFloatTimer\n\n\t; if already floating, keep going\n\tCMP JumpFloatTimer\n\tBCC SetCurrentCharacter_CheckGravityChange\n\nSetCurrentCharacter_SetJumpFloatTimer:\n\tSTA JumpFloatTimer\n\nSetCurrentCharacter_CheckGravityChange:\n\t; check whether gravity is increasing\n\tPLA\n\tSEC\n\tSBC GravityWithJumpButton\n\tBEQ SetCurrentCharacter_Update\n\n\t; stash velocity delta in X\n\tTAX\n\n\t; check whether y-velocity is negative\n\tLDA PlayerYVelocity\n\tBPL SetCurrentCharacter_Update\n\n\tCPX #$00\n\tBPL SetCurrentCharacter_ClampYVelocity\n\n\t; scale y-velocity based on difference in gravity\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\n\tDEX\nSetCurrentCharacter_ScaleVelocityYUp_Loop:\n\tASL\n\tINX\n\tBEQ SetCurrentCharacter_ScaleVelocityYUp_Loop\n\n\tEOR #$FF\n\tSTA PlayerYVelocity\n\n\tJMP SetCurrentCharacter_Update\n\nSetCurrentCharacter_ClampYVelocity:\n\tLDA PlayerYVelocity\n\tCMP JumpHeightRunning\n\n\tBPL SetCurrentCharacter_Update\n\n\tLDA JumpHeightStandingCarrying\n\tSTA PlayerYVelocity\n\nSetCurrentCharacter_Update:\n\tINC SkyFlashTimer\n\n\t; update chr for character\n\tJSR LoadCharacterCHRBanks\n\n\tLDA #DPCM_PlayerDeath\n\tSTA DPCMQueue\n\nSetCurrentCharacter_Exit:\n\tRTS\n\n\nRandomCarryObjectTypes:\n\t.db #Enemy_VegetableSmall\n\t.db #Enemy_VegetableLarge\n\t.db #Enemy_Shell\n\t.db #Enemy_Bomb\n\t.db #Enemy_ShyguyRed\n\t.db #Enemy_Tweeter\n\t.db #Enemy_SnifitRed\n\t.db #Enemy_Egg\n\n; bit 7: put in player's hands\n; bit 6: set enemy timer\n; bit 5: start at bottom of screen\n; bit 4:\n; bit 3:\n; bit 2:\n; bit 1: set thrown flag\n; bit 0: disable velocity reset\nRandomCarryObjectAttributes:\n\t.db %10000000\n\t.db %10000000\n\t.db %10000000\n\t.db %11000000\n\t.db %10000001\n\t.db %10000001\n\t.db %10000001\n\t.db %10000001\n\n\nRandomCarryObject:\n\tLDA PlayerState\n\tBNE RandomCarryObject_Exit\n\tLDA HoldingItem\n\tBNE RandomCarryObject_Exit\n\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$07\n\tTAX\n\tLDA RandomCarryObjectAttributes, X\n\tSTA CreateObjectAttributes\n\tLDA RandomCarryObjectTypes, X\n\tSTA CreateObjectType\n\nRandomCarryObject_Exit:\n\tRTS\n\n\nDebugRandomObjectTypes:\n\t.db #Enemy_Bomb\n\t.db #Enemy_Bomb\n\t.db #Enemy_POWBlock\n\t.db #Enemy_POWBlock\n\t.db #Enemy_POWBlock\n\t.db #Enemy_Starman\n\t.db #Enemy_Starman\n\t.db #Enemy_Starman\n\nDebugRandomObjectAttributes:\n\t.db %01000010\n\t.db %01000010\n\t.db %00000010\n\t.db %00000010\n\t.db %00000010\n\t.db %00100010\n\t.db %00100010\n\t.db %00100010\n\n\nDebugRandomObject:\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$07\n\tTAX\n\tLDA DebugRandomObjectAttributes, X\n\tSTA CreateObjectAttributes\n\tLDA DebugRandomObjectTypes, X\n\tSTA CreateObjectType\n\tRTS\nENDIF\n","sections":[{"comment":"\nBank 0 & Bank 1\n===============\n\nWhat's inside:\n\n- Title screen\n- Player controls\n- Player state handling\n- Enemy handling\n","content":"","htmlComment":"<h1>Bank 0 &#x26; Bank 1</h1>\n<p>What's inside:</p>\n<ul>\n<li>Title screen</li>\n<li>Player controls</li>\n<li>Player state handling</li>\n<li>Enemy handling</li>\n</ul>\n","htmlContent":"","line":12},{"comment":"\nInitializes a vertical area\n","content":"InitializeAreaVertical:\n\tLDA byte_RAM_502\n\tBNE loc_BANK0_805D\n\n\tLDA #HMirror\n\tJSR ChangeNametableMirroring\n\n\tLDA CurrentLevelEntryPage\n\tBNE loc_BANK0_8013\n\nloc_BANK0_800F:\n\tLDA #$09\n\tBNE loc_BANK0_8016\n\nloc_BANK0_8013:\n\tSEC\n\tSBC #$01\n\nloc_BANK0_8016:\n\tORA #$C0\n\tSTA byte_RAM_CF\n\tSEC\n\tSBC #$40\n\tSTA byte_RAM_CE\n\tLDA CurrentLevelEntryPage\n\nloc_BANK0_8022:\n\tCLC\n\tADC #$01\n\tCMP #$0A\n\tBNE loc_BANK0_802B\n\n\tLDA #$00\n\nloc_BANK0_802B:\n\tORA #$10\n\tSTA byte_RAM_D0\n\tLDA CurrentLevelEntryPage\n\tLDY #$00\n\tJSR ResetPPUScrollHi\n\n\tLDA #$20\n\tSTA byte_RAM_D3\n\tLDA #$60\n\tSTA byte_RAM_D4\n\tINC byte_RAM_502\n\tLDA #$E0\n\tSTA byte_RAM_E2\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tSTA byte_RAM_53A\n\tLSR A\n\tSTA byte_RAM_D2\n\tLDY CurrentLevelEntryPage\n\tJSR sub_BANK0_95AF\n\n\tSTA ScreenYLo\n\tSTY ScreenYHi\n\tJSR sub_BANK0_946D\n\nloc_BANK0_805D:\n\tLDA #$00\n\tSTA byte_RAM_6\n\tLDA #$0FF\n\tSTA byte_RAM_505\n\nloc_BANK0_8066:\n\tLDA #$A0\n\tSTA byte_RAM_507\n\tJSR sub_BANK0_823D\n\n\tLDA byte_RAM_53A\n\tBNE locret_BANK0_8082\n\n\tINC BreakStartLevelLoop\n\tLDA #$E8\n\tSTA byte_RAM_E1\n\tLDA #$C8\n\tSTA byte_RAM_E2\n\tLDA #$00\n\tSTA byte_RAM_502\n\nlocret_BANK0_8082:\n\tRTS\n\n\n","htmlComment":"<p>Initializes a vertical area</p>\n","htmlContent":"InitializeAreaVertical:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">502</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">805</span>D\n\n\t<span class=\"token opcode property\">LDA</span> #HMirror\n\t<span class=\"token opcode property\">JSR</span> ChangeNametableMirroring\n\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8013</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">800</span>F:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8016</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8013</span>:\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8016</span>:\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8022</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">802</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">802</span>B:\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> ResetPPUScrollHi\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">502</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span><span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDY</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">95</span>AF\n\n\t<span class=\"token opcode property\">STA</span> ScreenYLo\n\t<span class=\"token opcode property\">STY</span> ScreenYHi\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">946</span>D\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">805</span>D:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8066</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">823</span>D\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span><span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8082</span>\n\n\t<span class=\"token opcode property\">INC</span> BreakStartLevelLoop\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E8</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C8</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">502</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8082</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":16},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8083:\n\tLDA NeedVerticalScroll\n\tAND #$04\n\tBNE loc_BANK0_809D\n\n\tLDA NeedVerticalScroll\n\tAND #$07\n\tBNE loc_BANK0_8092\n\n\tJMP loc_BANK0_819C\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8083</span>:\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">809</span>D\n\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8092</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">819</span>C\n\n","line":103},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8092:\n\tLDA NeedVerticalScroll\n\tORA #$04\n\tSTA NeedVerticalScroll\n\tLDA #$12\n\tSTA CameraScrollTiles\n\nloc_BANK0_809D:\n\tLDA NeedVerticalScroll\n\tLSR A\n\tLDA PPUScrollYMirror\n\tBCC loc_BANK0_8103\n\n\tBNE loc_BANK0_80B1\n\n\tLDA byte_RAM_CF\n\tAND #$0F\n\tCMP #$09\n\tBNE loc_BANK0_80B1\n\n\tJMP loc_BANK0_819C\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8092</span>:\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$12</span>\n\t<span class=\"token opcode property\">STA</span> CameraScrollTiles\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">809</span>D:\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8103</span>\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>B<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>B<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">819</span>C\n\n","line":116},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_80B1:\n\tLDA #$01\n\tJSR SetObjectLocks\n\n\tLDA PPUScrollYMirror\n\tSEC\n\tSBC #$04\n\tSTA PPUScrollYMirror\n\tLDA ScreenYLo\n\tSEC\n\tSBC #$04\n\tSTA ScreenYLo\n\tBCS loc_BANK0_80C8\n\n\tDEC ScreenYHi\n\nloc_BANK0_80C8:\n\tLDA PPUScrollYMirror\n\tCMP #$0FC\n\tBNE loc_BANK0_80DB\n\n\tLDA #$EC\n\tSTA PPUScrollYMirror\n\tLDA PPUScrollYHiMirror\n\tEOR #$02\n\tSTA PPUScrollYHiMirror\n\tLSR A\n\tSTA PPUScrollXHiMirror\n\nloc_BANK0_80DB:\n\tLDA PPUScrollYMirror\n\tAND #$07\n\tBEQ loc_BANK0_80E2\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>B<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> SetObjectLocks\n\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> ScreenYLo\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>C<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">DEC</span> ScreenYHi\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>C<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0FC</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>DB\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$EC</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>DB:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>E<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":140},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_80E2:\n\tLDX #$00\n\tJSR loc_BANK0_8287\n\n\tINX\n\tJSR loc_BANK0_8287\n\n\tLDA PPUScrollYMirror\n\tAND #$0F\n\tBNE loc_BANK0_80FB\n\n\tLDX #$00\n\tJSR sub_BANK0_8297\n\n\tLDX #$01\n\tJSR sub_BANK0_8297\n\nloc_BANK0_80FB:\n\tLDX #$01\n\tJSR sub_BANK0_82E2\n\n\tJMP loc_BANK0_8170\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>E<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8287</span>\n\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8287</span>\n\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>FB\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8297</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8297</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">80</span>FB:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8170</span>\n\n","line":178},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8103:\n\tBNE loc_BANK0_8121\n\n\tLDA CurrentLevelPages\n\tSTA byte_RAM_F\n\tCMP #$09\n\tBNE loc_BANK0_8114\n\n\tLDA #$00\n\tSTA byte_RAM_F\n\tBEQ loc_BANK0_8116\n\nloc_BANK0_8114:\n\tINC byte_RAM_F\n\nloc_BANK0_8116:\n\tLDA byte_RAM_D0\n\tAND #$0F\n\tCMP byte_RAM_F\n\tBNE loc_BANK0_8121\n\n\tJMP loc_BANK0_819C\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8103</span>:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8121</span>\n\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelPages\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8114</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8116</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8114</span>:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_F\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8116</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_F\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8121</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">819</span>C\n\n","line":203},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8121:\n\tLDA #$01\n\tJSR SetObjectLocks\n\n\tLDA PPUScrollYMirror\n\tCLC\n\tADC #$04\n\tSTA PPUScrollYMirror\n\tLDA ScreenYLo\n\tCLC\n\tADC #$04\n\tSTA ScreenYLo\n\tBCC loc_BANK0_8138\n\n\tINC ScreenYHi\n\nloc_BANK0_8138:\n\tLDA PPUScrollYMirror\n\tAND #$07\n\tBEQ loc_BANK0_813F\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8121</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> SetObjectLocks\n\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> ScreenYLo\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8138</span>\n\n\t<span class=\"token opcode property\">INC</span> ScreenYHi\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8138</span>:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">813</span>F\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":228},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_813F:\n\tLDA PPUScrollYMirror\n\tCMP #$F0\n\tBNE loc_BANK0_8152\n\n\tLDA #$00\n\tSTA PPUScrollYMirror\n\tLDA PPUScrollYHiMirror\n\tEOR #$02\n\tSTA PPUScrollYHiMirror\n\tLSR A\n\tSTA PPUScrollXHiMirror\n\nloc_BANK0_8152:\n\tLDX #$02\n\tJSR sub_BANK0_828F\n\n\tDEX\n\tJSR sub_BANK0_828F\n\n\tLDA byte_RAM_D4\n\tAND #$20\n\tBNE loc_BANK0_816B\n\n\tLDX #$02\n\tJSR sub_BANK0_82BE\n\n\tLDX #$01\n\tJSR sub_BANK0_82BE\n\nloc_BANK0_816B:\n\tLDX #$02\n\tJSR sub_BANK0_82E2\n\nloc_BANK0_8170:\n\tLDA CameraScrollTiles\n\tCMP #$12\n\tBNE loc_BANK0_818F\n\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCC loc_BANK0_8186\n\n\tLDX #$01\n\tLDA #$00\n\tBEQ loc_BANK0_818A\n\nloc_BANK0_8186:\n\tLDX #$02\n\tLDA #$10\n\nloc_BANK0_818A:\n\tSTA byte_RAM_1\n\tJSR sub_BANK0_8314\n\nloc_BANK0_818F:\n\tJSR sub_BANK0_833E\n\n\tDEC CameraScrollTiles\n\tBNE locret_BANK0_81A0\n\n\tLDA #$00\n\tJSR SetObjectLocks\n\nloc_BANK0_819C:\n\tLDA #$00\n\tSTA NeedVerticalScroll\n\nlocret_BANK0_81A0:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">813</span>F:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8152</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8152</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">828</span>F\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">828</span>F\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">816</span>B\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>BE\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>BE\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">816</span>B:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8170</span>:\n\t<span class=\"token opcode property\">LDA</span> CameraScrollTiles\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$12</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">818</span>F\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8186</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">818</span><span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8186</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">818</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8314</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">818</span>F:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">833</span>E\n\n\t<span class=\"token opcode property\">DEC</span> CameraScrollTiles\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">81</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> SetObjectLocks\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">819</span>C:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">81</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":253},{"comment":"End of function sub_BANK0_8083","content":"","htmlComment":"<p>End of function sub_BANK0_8083</p>\n","htmlContent":"","line":328},{"comment":"---------------------------------------------------------------------------","content":"\t.db $01\n\n","htmlComment":"<hr>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\n","line":330},{"comment":"\nStashes screen scrolling information so that it can be restored after leaving\nthe pause screen\n","content":"StashScreenScrollPosition:\n\tLDA PPUScrollYMirror\n\tSTA PPUScrollYMirror_Backup\n\tLDA PPUScrollXMirror\n\tSTA PPUScrollXMirror_Backup\n\tLDA PPUScrollYHiMirror\n\tSTA PPUScrollYHiMirror_Backup\n\tLDA PPUScrollXHiMirror\n\tSTA PPUScrollXHiMirror_Backup\n\tLDA ScreenYHi\n\tSTA ScreenYHi_Backup\n\tLDA ScreenYLo\n\tSTA ScreenYLo_Backup\n\tLDA ScreenBoundaryLeftHi\n\tSTA ScreenBoundaryLeftHi_Backup\n\tLDA byte_RAM_E1\n\tSTA byte_RAM_517\n\tLDA #$00\n\tSTA PPUScrollYMirror\n\tSTA PPUScrollXMirror\n\tSTA PPUScrollYHiMirror\n\tSTA PPUScrollXHiMirror\n\tRTS\n\n\nRestoreScreenScrollPosition:\n\tLDA PPUScrollYMirror_Backup\n\tSTA PPUScrollYMirror\n\tLDA PPUScrollXMirror_Backup\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tLDA PPUScrollYHiMirror_Backup\n\tSTA PPUScrollYHiMirror\n\tLDA PPUScrollXHiMirror_Backup\n\tSTA PPUScrollXHiMirror\n\tLDA ScreenBoundaryLeftHi_Backup\n\tSTA ScreenBoundaryLeftHi\n\tLDA ScreenYHi_Backup\n\tSTA ScreenYHi\n\tLDA ScreenYLo_Backup\n\tSTA ScreenYLo\n\tRTS\n\n\n","htmlComment":"<p>Stashes screen scrolling information so that it can be restored after leaving\nthe pause screen</p>\n","htmlContent":"StashScreenScrollPosition:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror_Backup\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror_Backup\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror_Backup\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror_Backup\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">STA</span> ScreenYHi_Backup\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">STA</span> ScreenYLo_Backup\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftHi_Backup\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">517</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">RTS</span>\n\n\nRestoreScreenScrollPosition:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYMirror_Backup\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror_Backup\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">LDA</span> PPUScrollYHiMirror_Backup\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror_Backup\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi_Backup\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi_Backup\n\t<span class=\"token opcode property\">STA</span> ScreenYHi\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo_Backup\n\t<span class=\"token opcode property\">STA</span> ScreenYLo\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":337},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_81FE:\n\tLDA byte_RAM_CF\n\tAND #$10\n\tBEQ loc_BANK0_820B\n\n\tLDA byte_RAM_E1\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_E1\n\nloc_BANK0_820B:\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tLDA byte_RAM_CF\n\tSTA byte_RAM_CE\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDX #$00\n\tJSR sub_BANK0_8314\n\n\tLDA byte_RAM_D3\n\tSTA byte_RAM_D2\n\tLDA byte_RAM_E1\n\tSTA byte_RAM_E2\n\tLDX #$01\n\tJSR sub_BANK0_846A\n\n\tLDA #$F0\n\tSTA byte_RAM_506\n\tSTA byte_RAM_507\n\tLDA byte_RAM_D0\n\tSTA byte_RAM_505\n\tINC byte_RAM_D5\n\tLDA #$01\n\tSTA byte_RAM_6\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">81</span>FE:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">820</span>B\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">820</span>B:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8314</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">846</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":382},{"comment":"End of function sub_BANK0_81FE","content":"\n","htmlComment":"<p>End of function sub_BANK0_81FE</p>\n","htmlContent":"\n","line":421},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_823D:\n\tLDX #$00\n\tSTX byte_RAM_537\n\tJSR sub_BANK0_82E2\n\n\tJSR sub_BANK0_833E\n\n\tLDX #$00\n\tJSR sub_BANK0_828F\n\n\tLDA byte_RAM_506\n\tCMP byte_RAM_D1\n\tBNE loc_BANK0_8277\n\n\tLDA byte_RAM_507\n\tCLC\n\tADC #$20\n\tCMP byte_RAM_D2\n\tBNE loc_BANK0_8277\n\nloc_BANK0_825E:\n\tLDA byte_RAM_6\n\tTAX\n\tBEQ loc_BANK0_8268\n\n\tLDA byte_RAM_517\n\tSTA byte_RAM_E1\n\nloc_BANK0_8268:\n\tINC byte_RAM_537\n\tLDA #$00\n\tSTA byte_RAM_53A, X\n\tSTA byte_RAM_53D\n\tSTA byte_RAM_53E\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">823</span>D:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">537</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">833</span>E\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">828</span>F\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8277</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8277</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">825</span>E:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8268</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">517</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8268</span>:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">537</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span><span class=\"token register variable\">A</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>D\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>E\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":423},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8277:\n\tLDA byte_RAM_D2\n\tAND #$20\n\tBNE locret_BANK0_828E\n\n\tLDA byte_RAM_CE\n\tCMP byte_RAM_505\n\tBEQ loc_BANK0_825E\n\n\tJMP sub_BANK0_82BE\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8277</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">828</span>E\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">825</span>E\n\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>BE\n\n","line":461},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8287:\n\tLDA byte_RAM_D3, X\n\tSEC\n\tSBC #$20\n\tSTA byte_RAM_D3, X\n\nlocret_BANK0_828E:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8287</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">828</span>E:\n\t<span class=\"token opcode property\">RTS</span>\n","line":474},{"comment":"End of function sub_BANK0_823D","content":"\n","htmlComment":"<p>End of function sub_BANK0_823D</p>\n","htmlContent":"\n","line":485},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_828F:\n\tLDA byte_RAM_D2, X\n\tCLC\n\tADC #$20\n\tSTA byte_RAM_D2, X\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">828</span>F:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":487},{"comment":"End of function sub_BANK0_828F","content":"\n","htmlComment":"<p>End of function sub_BANK0_828F</p>\n","htmlContent":"\n","line":496},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8297:\n\tLDA byte_RAM_CF, X\n\tSEC\n\tSBC #$10\n\tSTA byte_RAM_CF, X\n\tAND #$F0\n\tCMP #$F0\n\tBNE locret_BANK0_82BD\n\n\tLDA byte_RAM_CF, X\n\tAND #$0F\n\tCLC\n\tADC #$E0\n\tSTA byte_RAM_CF, X\n\tDEC byte_RAM_CF, X\n\tLDA byte_RAM_CF, X\n\tCMP #$0DF\n\tBNE loc_BANK0_82B9\n\nloc_BANK0_82B5:\n\tLDA #$E9\n\tSTA byte_RAM_CF, X\n\nloc_BANK0_82B9:\n\tLDA #$A0\n\tSTA byte_RAM_D3, X\n\nlocret_BANK0_82BD:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8297</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>BD\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0DF</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>B<span class=\"token decimalnumber string\">9</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>B<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E9</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>B<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>BD:\n\t<span class=\"token opcode property\">RTS</span>\n","line":498},{"comment":"End of function sub_BANK0_8297","content":"\n","htmlComment":"<p>End of function sub_BANK0_8297</p>\n","htmlContent":"\n","line":530},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_82BE:\n\tLDA byte_RAM_CE, X\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_CE, X\n\tAND #$F0\n\tCMP #$F0\n\tBNE locret_BANK0_82E1\n\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tSTA byte_RAM_CE, X\n\tINC byte_RAM_CE, X\n\tLDA byte_RAM_CE, X\n\tCMP #$0A\n\tBNE loc_BANK0_82DD\n\n\tLDA #$00\n\tSTA byte_RAM_CE, X\n\nloc_BANK0_82DD:\n\tLDA #$00\n\tSTA byte_RAM_D2, X\n\nlocret_BANK0_82E1:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>BE:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>DD\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>DD:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":532},{"comment":"End of function sub_BANK0_82BE","content":"\n","htmlComment":"<p>End of function sub_BANK0_82BE</p>\n","htmlContent":"\n","line":561},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_82E2:\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tTAY\n\tLDA DecodedLevelPageStartLo_Bank1, Y\n\tSTA byte_RAM_E9\n\tLDA DecodedLevelPageStartHi_Bank1, Y\n\tSTA byte_RAM_EA\n\tLDA byte_RAM_CE, X\n\tAND #$F0\n\tSTA byte_RAM_D7\n\tLDA byte_RAM_CE, X\n\tLSR A\n\tBCC loc_BANK0_8300\n\n\tLDA #$20\n\tBNE loc_BANK0_8302\n\nloc_BANK0_8300:\n\tLDA #$28\n\nloc_BANK0_8302:\n\tSTA byte_RAM_D1\n\tLDA byte_RAM_CE, X\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tADC byte_RAM_D1\n\tSTA byte_RAM_D1\n\nloc_BANK0_830F:\n\tLDA byte_RAM_D2, X\n\tSTA byte_RAM_D2\n\nlocret_BANK0_8313:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartLo_Bank<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartHi_Bank<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EA\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8300</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8302</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8300</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$28</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8302</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">830</span>F:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8313</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":563},{"comment":"End of function sub_BANK0_82E2","content":"\n","htmlComment":"<p>End of function sub_BANK0_82E2</p>\n","htmlContent":"\n","line":603},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8314:\n\tLDA byte_RAM_CE, X\n\tAND #$10\n\tBEQ locret_BANK0_8313\n\n\tLDA byte_RAM_CE, X\n\tSTA byte_RAM_3\n\tSEC\n\tSBC byte_RAM_1\n\tSTA byte_RAM_CE, X\n\tJSR sub_BANK0_82E2\n\nloc_BANK0_8326:\n\tLDA #$0F\n\tSTA byte_RAM_E3\n\tLDA #$00\n\tSTA byte_RAM_D6\n\nloc_BANK0_832E:\n\tJSR sub_BANK0_84AC\n\n\tLDA byte_RAM_E3\n\tBPL loc_BANK0_832E\n\n\tLDA byte_RAM_3\n\tSTA byte_RAM_CE, X\n\tDEC byte_RAM_E4\n\tJMP sub_BANK0_82E2\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8314</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8313</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8326</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">832</span>E:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">84</span>AC\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">832</span>E\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">82</span>E<span class=\"token decimalnumber string\">2</span>\n","line":605},{"comment":"End of function sub_BANK0_8314","content":"\n","htmlComment":"<p>End of function sub_BANK0_8314</p>\n","htmlContent":"\n","line":636},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_833E:\n\tLDX byte_RAM_300\n\tLDA byte_RAM_D1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_D2\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$20\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$00\n\tSTA byte_RAM_D6\n\tLDA #$0F\n\tSTA byte_RAM_E3\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_836C\n\n\tLDY byte_RAM_D7\n\tCPY #$E0\n\tBNE loc_BANK0_836C\n\n\tLDA #$00\n\tSTA byte_RAM_E4\n\tINC byte_RAM_539\n\nloc_BANK0_836C:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tSTA byte_RAM_51B\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tASL A\n\tASL A\n\tTAY\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_8390\n\n\tINY\n\tINY\n\nloc_BANK0_8390:\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301, X\n\tINC byte_RAM_D6\n\tINX\n\tINY\n\tLDA byte_RAM_D6\n\tLSR A\n\tBCS loc_BANK0_8390\n\n\tINC byte_RAM_D7\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_83A7\n\n\tJSR sub_BANK0_8488\n\nloc_BANK0_83A7:\n\tLDA byte_RAM_D6\n\tCMP #$20\n\tBCC loc_BANK0_836C\n\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tSTX byte_RAM_300\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_840B\n\n\tLDA byte_RAM_E4\n\tBEQ loc_BANK0_83C2\n\n\tDEC byte_RAM_E4\n\tJMP loc_BANK0_83DE\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">833</span>E:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">836</span>C\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">836</span>C\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">539</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">836</span>C:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>B\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8390</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8390</span>:\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8390</span>\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8488</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">836</span>C\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">840</span>B\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>DE\n\n","line":638},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_83C2:\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCS loc_BANK0_83D4\n\n\tLDX #$01\n\tJSR sub_BANK0_8412\n\n\tLDX #$01\n\tJSR sub_BANK0_846A\n\n\tJMP loc_BANK0_83DE\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>C<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>D<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8412</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">846</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>DE\n\n","line":723},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_83D4:\n\tLDX #$00\n\tJSR sub_BANK0_8412\n\n\tLDX #$00\n\tJSR sub_BANK0_8478\n\nloc_BANK0_83DE:\n\tLDX #$00\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCC loc_BANK0_83FA\n\n\tINX\n\tLDA byte_RAM_CF, X\n\tAND #$F0\n\tCMP #$E0\n\tBEQ loc_BANK0_83F4\n\n\tLDA byte_RAM_CF, X\n\tAND #$10\n\tBNE loc_BANK0_840B\n\nloc_BANK0_83F4:\n\tJSR sub_BANK0_8478\n\n\tJMP loc_BANK0_840B\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>D<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8412</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8478</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>DE:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>FA\n\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>F<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">840</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>F<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8478</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">840</span>B\n\n","line":738},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_83FA:\n\tLDA byte_RAM_CF, X\n\tAND #$F0\n\tCMP #$E0\n\tBEQ loc_BANK0_8408\n\n\tLDA byte_RAM_CF, X\n\tAND #$10\n\tBEQ loc_BANK0_840B\n\nloc_BANK0_8408:\n\tJSR sub_BANK0_846A\n\nloc_BANK0_840B:\n\tLDA byte_RAM_D5\n\tEOR #$01\n\tSTA byte_RAM_D5\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">83</span>FA:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8408</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">840</span>B\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8408</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">846</span><span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">840</span>B:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":768},{"comment":"End of function sub_BANK0_833E","content":"","htmlComment":"<p>End of function sub_BANK0_833E</p>\n","htmlContent":"","line":789},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":791},{"comment":"something to do with background tile palettes in vertical levels?","content":"sub_BANK0_8412:\n\tLDY byte_RAM_300\n\tLDA byte_RAM_D1\n\tORA #$03\n\tSTA PPUBuffer_301, Y\n\tINY\n\tLDA byte_RAM_E1, X\n\tSTA PPUBuffer_301, Y\n\tINY\n\tLDA #$08\n\tSTA PPUBuffer_301, Y\n\tINY\n\tLDX #$07\n\nloc_BANK0_842B:\n\tLDA byte_RAM_539\n\tBEQ loc_BANK0_843B\n\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, X\n\tJMP loc_BANK0_8452\n\n","htmlComment":"<p>something to do with background tile palettes in vertical levels?</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8412</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$07</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">842</span>B:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">539</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">843</span>B\n\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8452</span>\n\n","line":793},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_843B:\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCC loc_BANK0_8452\n\nloc_BANK0_8440:\n\tLDA EnemyArray_D9, X\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_1\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tORA byte_RAM_1\n\nloc_BANK0_8450:\n\tSTA EnemyArray_D9, X\n\nloc_BANK0_8452:\n\tLDA EnemyArray_D9, X\n\tSTA PPUBuffer_301, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_842B\n\n\tLDA #$01\n\tSTA byte_RAM_E4\n\tLSR A\n\tSTA byte_RAM_539\n\tSTA PPUBuffer_301, Y\n\tSTY byte_RAM_300\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">843</span>B:\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8452</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8440</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8450</span>:\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8452</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">842</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">539</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":820},{"comment":"End of function sub_BANK0_8412","content":"\n","htmlComment":"<p>End of function sub_BANK0_8412</p>\n","htmlContent":"\n","line":859},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_846A:\n\tLDA byte_RAM_E1, X\n\tCLC\n\tADC #$08\n\tSTA byte_RAM_E1, X\n\tBCC locret_BANK0_8477\n\n\tLDA #$C0\n\tSTA byte_RAM_E1, X\n\nlocret_BANK0_8477:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">846</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCC</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8477</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8477</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":861},{"comment":"End of function sub_BANK0_846A","content":"\n","htmlComment":"<p>End of function sub_BANK0_846A</p>\n","htmlContent":"\n","line":876},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8478:\n\tLDA byte_RAM_E1, X\n\tSEC\n\tSBC #$08\n\tSTA byte_RAM_E1, X\n\tCMP #$C0\n\tBCS locret_BANK0_8487\n\n\tLDA #$F8\n\tSTA byte_RAM_E1, X\n\nlocret_BANK0_8487:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8478</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8487</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F8</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8487</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":878},{"comment":"End of function sub_BANK0_8478","content":"\n","htmlComment":"<p>End of function sub_BANK0_8478</p>\n","htmlContent":"\n","line":894},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8488:\n\tLDA byte_RAM_E3\n\tLSR A\n\tTAY\n\tLDA EnemyArray_D9, Y\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, Y\n\tLDA byte_RAM_51B\n\tAND #$C0\n\tORA EnemyArray_D9, Y\n\tSTA EnemyArray_D9, Y\n\tDEC byte_RAM_E3\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8488</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>B\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":896},{"comment":"End of function sub_BANK0_8488","content":"\n","htmlComment":"<p>End of function sub_BANK0_8488</p>\n","htmlContent":"\n","line":913},{"comment":"---------------------------------------------------------------------------","content":"_code_04A2:\n\tLDX #$07\n\tLDA #$00\n\nloc_BANK0_84A6:\n\tSTA EnemyArray_D9, X\n\tDEX\n\tBNE loc_BANK0_84A6\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"_code_<span class=\"token decimalnumber string\">04</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">84</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">84</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":915},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_84AC:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tSTA byte_RAM_51B\n\tINC byte_RAM_D7\n\tJMP sub_BANK0_8488\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">84</span>AC:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>B\n\t<span class=\"token opcode property\">INC</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">JMP</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8488</span>\n","line":928},{"comment":"End of function sub_BANK0_84AC","content":"","htmlComment":"<p>End of function sub_BANK0_84AC</p>\n","htmlContent":"","line":937},{"comment":"---------------------------------------------------------------------------","content":"","htmlComment":"<hr>\n","htmlContent":"","line":939},{"comment":"Unused space in the original ($84B8 - $84FF)","content":"unusedSpace $8500, $FF\n\n","htmlComment":"<p>Unused space in the original ($84B8 - $84FF)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$8500</span>, <span class=\"token hexnumber string\">$FF</span>\n\n","line":941},{"comment":"\nInitializes a horizontal area\n","content":"InitializeAreaHorizontal:\n\tLDA byte_RAM_502\n\tBNE loc_BANK0_855C\n\n\tLDA #VMirror\n\tJSR ChangeNametableMirroring\n\n\tJSR sub_BANK0_946D\n\n\tLDA #$00\n\tSTA PPUScrollYMirror\n\tLDA CurrentLevelEntryPage\n\tBNE loc_BANK0_851A\n\n\tLDA #$09\n\tBNE loc_BANK0_851D\n\nloc_BANK0_851A:\n\tSEC\n\tSBC #$01\n\nloc_BANK0_851D:\n\tORA #$D0\n\tSTA byte_RAM_CF\n\tSEC\n\tSBC #$20\n\tSTA byte_RAM_CE\n\tLDA CurrentLevelEntryPage\n\tCLC\n\tADC #$01\n\tCMP #$0A\n\tBNE loc_BANK0_8532\n\n\tLDA #$00\n\nloc_BANK0_8532:\n\tORA #$10\n\tSTA byte_RAM_D0\n\tLDA CurrentLevelEntryPage\n\tLDY #$01\n\tJSR ResetPPUScrollHi\n\n\tINC byte_RAM_502\n\tLDA CurrentLevelEntryPage\n\tSTA ScreenBoundaryLeftHi\n\tLDA #$01\n\tSTA byte_RAM_53A\n\tLSR A\n\tSTA byte_RAM_6\n\tLDA #$0FF\n\tSTA byte_RAM_505\n\tLDA #$0F\n\tSTA byte_RAM_507\n\tJSR sub_BANK0_856A\n\nloc_BANK0_855C:\n\tJSR sub_BANK0_87AA\n\n\tLDA byte_RAM_53A\n\tBNE locret_BANK0_8569\n\n\tSTA byte_RAM_502\n\tINC BreakStartLevelLoop\n\nlocret_BANK0_8569:\n\tRTS\n\n\n","htmlComment":"<p>Initializes a horizontal area</p>\n","htmlContent":"InitializeAreaHorizontal:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">502</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">855</span>C\n\n\t<span class=\"token opcode property\">LDA</span> #VMirror\n\t<span class=\"token opcode property\">JSR</span> ChangeNametableMirroring\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">946</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYMirror\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">851</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">851</span>D\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">851</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">851</span>D:\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8532</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8532</span>:\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> ResetPPUScrollHi\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">502</span>\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span><span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">856</span><span class=\"token register variable\">A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">855</span>C:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>AA\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span><span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8569</span>\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">502</span>\n\t<span class=\"token opcode property\">INC</span> BreakStartLevelLoop\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8569</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":947},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_856A:\n\tLDA CurrentLevelEntryPage\n\tBNE loc_BANK0_8576\n\n\tLDA byte_RAM_BA\n\tBMI loc_BANK0_85E7\n\n\tLDA CurrentLevelEntryPage\n\nloc_BANK0_8576:\n\tCMP CurrentLevelPages\n\tBNE loc_BANK0_857F\n\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_85E7\n\nloc_BANK0_857F:\n\tLDX #$02\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_858B\n\n\tLDA #$0FF\n\tSTA byte_RAM_B\n\tBNE loc_BANK0_858F\n\nloc_BANK0_858B:\n\tLDA #$00\n\tSTA byte_RAM_B\n\nloc_BANK0_858F:\n\tLDA byte_RAM_BA\n\tAND #$F0\n\tCLC\n\tADC byte_RAM_CE, X\n\tPHP\n\tADC byte_RAM_B\n\tPLP\n\tSTA byte_RAM_C\n\tLDA byte_RAM_B\n\tBNE loc_BANK0_85B1\n\n\tBCC loc_BANK0_85C2\n\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tCMP #$09\n\tBNE loc_BANK0_85C2\n\n\tLDA byte_RAM_C\n\tAND #$F0\n\tJMP loc_BANK0_85C4\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">856</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8576</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>E<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8576</span>:\n\t<span class=\"token opcode property\">CMP</span> CurrentLevelPages\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">857</span>F\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>E<span class=\"token decimalnumber string\">7</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">857</span>F:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">858</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">858</span>F\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">858</span>B:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_B\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">858</span>F:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_B\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_B\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>B<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">4</span>\n\n","line":1016},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_85B1:\n\tBCS loc_BANK0_85C2\n\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tBNE loc_BANK0_85C2\n\n\tLDA byte_RAM_C\n\tAND #$F0\n\tADC #$09\n\tJMP loc_BANK0_85C4\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>B<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">4</span>\n\n","line":1070},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_85C2:\n\tLDA byte_RAM_C\n\nloc_BANK0_85C4:\n\tSTA byte_RAM_CE, X\n\tDEX\n\tBPL loc_BANK0_858F\n\n\tLDA byte_RAM_BA\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tAND #$F0\n\tSTA CurrentLevelPageX\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_85E7\n\n\tDEC ScreenBoundaryLeftHi\n\tLDA PPUScrollXHiMirror\n\tEOR #$01\n\tSTA PPUScrollXHiMirror\n\tLDA #$01\n\tSTA byte_RAM_507\n\nloc_BANK0_85E7:\n\tLDA #$00\n\tSTA byte_RAM_BA\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_C\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>C<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">858</span>F\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> CurrentLevelPageX\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>E<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">DEC</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>E<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">RTS</span>\n","line":1084},{"comment":"End of function sub_BANK0_856A","content":"\n","htmlComment":"<p>End of function sub_BANK0_856A</p>\n","htmlContent":"\n","line":1114},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_85EC:\n\tLDA #$00\n\tSTA byte_RAM_51C\n\tLDA byte_RAM_538\n\tBEQ loc_BANK0_862C\n\n\tLDA byte_RAM_538\n\tLSR A\n\tBCS loc_BANK0_8618\n\n\tLDX #$02\n\tSTX byte_RAM_9\n\tLDA #$10\n\tSTA byte_RAM_1\n\tDEX\n\tLDA byte_RAM_538\n\tSTA NeedVerticalScroll\n\tJSR sub_BANK0_8901\n\n\tLDA byte_RAM_3\n\tSTA byte_RAM_D0\n\tLDA #$00\n\tSTA byte_RAM_538\n\tBEQ loc_BANK0_862C\n\nloc_BANK0_8618:\n\tLDX #$01\n\tSTX byte_RAM_9\n\tDEX\n\tSTX byte_RAM_1\n\tLDA byte_RAM_538\n\tSTA NeedVerticalScroll\n\tJSR sub_BANK0_8901\n\n\tLDA #$00\n\tSTA byte_RAM_538\n\nloc_BANK0_862C:\n\tLDA byte_RAM_BA\n\tBNE loc_BANK0_8631\n\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">85</span>EC:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">862</span>C\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8618</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8901</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">862</span>C\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8618</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8901</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">862</span>C:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8631</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1116},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8631:\n\tLDA byte_RAM_BA\n\tBPL loc_BANK0_863C\n\n\tLDA #$01\n\tSTA NeedVerticalScroll\n\tJMP loc_BANK0_869A\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8631</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">863</span>C\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">869</span><span class=\"token register variable\">A</span>\n\n","line":1161},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_863C:\n\tLDA #$02\n\tSTA NeedVerticalScroll\n\tLDX byte_RAM_BA\n\nloc_BANK0_8642:\n\tLDA PPUScrollXMirror\n\tBNE loc_BANK0_8651\n\n\tLDA ScreenBoundaryLeftHi\n\tCMP CurrentLevelPages\n\tBNE loc_BANK0_8651\n\n\tJMP loc_BANK0_86E9\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">863</span>C:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_BA\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8642</span>:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8651</span>\n\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">CMP</span> CurrentLevelPages\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8651</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">9</span>\n\n","line":1171},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8651:\n\tLDA PPUScrollXMirror\n\tCLC\n\tADC #$01\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tBCC loc_BANK0_8669\n\n\tINC ScreenBoundaryLeftHi\n\tLDA PPUScrollXHiMirror\n\tEOR #$01\n\tSTA PPUScrollXHiMirror\n\tASL A\n\tSTA PPUScrollYHiMirror\n\nloc_BANK0_8669:\n\tLDA ScreenBoundaryLeftHi\n\tCMP CurrentLevelPages\n\tBEQ loc_BANK0_8685\n\n\tLDA PPUScrollXMirror\n\tAND #$F0\n\tCMP CurrentLevelPageX\n\tBEQ loc_BANK0_8682\n\n\tSTA CurrentLevelPageX\n\tLDA #$01\n\tSTA byte_RAM_51C\n\nloc_BANK0_8682:\n\tDEX\n\tBNE loc_BANK0_8642\n\nloc_BANK0_8685:\n\tLDA byte_RAM_51C\n\tBEQ loc_BANK0_86E9\n\n\tLDX #$02\n\nloc_BANK0_868C:\n\tJSR loc_BANK0_87FC\n\n\tDEX\n\tBNE loc_BANK0_868C\n\n\tLDX #$02\n\tJSR sub_BANK0_8812\n\n\tJMP loc_BANK0_86E6\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8651</span>:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8669</span>\n\n\t<span class=\"token opcode property\">INC</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8669</span>:\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">CMP</span> CurrentLevelPages\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8685</span>\n\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> CurrentLevelPageX\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8682</span>\n\n\t<span class=\"token opcode property\">STA</span> CurrentLevelPageX\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8682</span>:\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8642</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8685</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">868</span>C:\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>FC\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">868</span>C\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8812</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">6</span>\n\n","line":1188},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_869A:\n\tLDX byte_RAM_BA\n\nloc_BANK0_869C:\n\tLDA PPUScrollXMirror\n\tBNE loc_BANK0_86A8\n\n\tLDA ScreenBoundaryLeftHi\n\tBNE loc_BANK0_86A8\n\n\tJMP loc_BANK0_86E9\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">869</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_BA\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">869</span>C:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">9</span>\n\n","line":1240},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_86A8:\n\tLDA PPUScrollXMirror\n\tSEC\n\tSBC #$01\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tBCS loc_BANK0_86C0\n\n\tDEC ScreenBoundaryLeftHi\n\tLDA PPUScrollXHiMirror\n\tEOR #$01\n\tSTA PPUScrollXHiMirror\n\tASL A\n\tSTA PPUScrollYHiMirror\n\nloc_BANK0_86C0:\n\tLDA PPUScrollXMirror\n\tAND #$F0\n\tCMP CurrentLevelPageX\n\tBEQ loc_BANK0_86D1\n\n\tSTA CurrentLevelPageX\n\tLDA #$01\n\tSTA byte_RAM_51C\n\nloc_BANK0_86D1:\n\tINX\n\tBNE loc_BANK0_869C\n\n\tLDA byte_RAM_51C\n\tBEQ loc_BANK0_86E9\n\n\tLDX #$02\n\nloc_BANK0_86DB:\n\tJSR loc_BANK0_87E6\n\n\tDEX\n\tBNE loc_BANK0_86DB\n\n\tLDX #$01\n\tJSR sub_BANK0_8812\n\nloc_BANK0_86E6:\n\tJSR sub_BANK0_8872\n\nloc_BANK0_86E9:\n\tLDA #$00\n\tSTA NeedVerticalScroll\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>C<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">DEC</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>C<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">CMP</span> CurrentLevelPageX\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>D<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">STA</span> CurrentLevelPageX\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>D<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">869</span>C\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>DB:\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>E<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>DB\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8812</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8872</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">86</span>E<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1254},{"comment":"End of function sub_BANK0_85EC","content":"","htmlComment":"<p>End of function sub_BANK0_85EC</p>\n","htmlContent":"","line":1307},{"comment":"\nResets the PPU high scrolling values and sets the high byte of the PPU scroll offset.\n\n##### Input\n- `A`: 0 = use nametable A, 1 = use nametable B\n- `Y`: 0 = vertical, 1 = horizontal\n\n##### Output\n- `PPUScrollYHiMirror`\n- `PPUScrollXHiMirror`\n- `byte_RAM_506`: PPU scroll offset high byte\n","content":"ResetPPUScrollHi:\n\tLSR A\n\tBCS ResetPPUScrollHi_NametableB\n\nResetPPUScrollHi_NametableA:\n\tLDA #$01\n\tSTA PPUScrollXHiMirror\n\tASL A\n\tSTA PPUScrollYHiMirror\n\tLDA #$20\n\tBNE ResetPPUScrollHi_Exit\n\nResetPPUScrollHi_NametableB:\n\tLDA #$00\n\tSTA PPUScrollXHiMirror\n\tSTA PPUScrollYHiMirror\n\tLDA PPUScrollHiOffsets, Y\n\nResetPPUScrollHi_Exit:\n\tSTA byte_RAM_506\n\tRTS\n\n","htmlComment":"<p>Resets the PPU high scrolling values and sets the high byte of the PPU scroll offset.</p>\n<h5>Input</h5>\n<ul>\n<li><code>A</code>: 0 = use nametable A, 1 = use nametable B</li>\n<li><code>Y</code>: 0 = vertical, 1 = horizontal</li>\n</ul>\n<h5>Output</h5>\n<ul>\n<li><code>PPUScrollYHiMirror</code></li>\n<li><code>PPUScrollXHiMirror</code></li>\n<li><code>byte_RAM_506</code>: PPU scroll offset high byte</li>\n</ul>\n","htmlContent":"ResetPPUScrollHi:\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> ResetPPUScrollHi_NametableB\n\nResetPPUScrollHi_NametableA:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BNE</span> ResetPPUScrollHi_Exit\n\nResetPPUScrollHi_NametableB:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollYHiMirror\n\t<span class=\"token opcode property\">LDA</span> PPUScrollHiOffsets, <span class=\"token register variable\">Y</span>\n\nResetPPUScrollHi_Exit:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1321},{"comment":"\nHigh byte of the PPU scroll offset for nametable B.\n\nWhen mirroring vertically, nametable A is `$2000` and nametable B is `$2800`.\nWhen mirroring horizontally, nametable A is `$2000` and nametable B is `$2400`.\n","content":"PPUScrollHiOffsets:\n\t.db $28 ; vertical\n\t.db $24 ; horizontal\n\n","htmlComment":"<p>High byte of the PPU scroll offset for nametable B.</p>\n<p>When mirroring vertically, nametable A is <code>$2000</code> and nametable B is <code>$2800</code>.\nWhen mirroring horizontally, nametable A is <code>$2000</code> and nametable B is <code>$2400</code>.</p>\n","htmlContent":"PPUScrollHiOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span> <span class=\"token comment\">; vertical</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$24</span> <span class=\"token comment\">; horizontal</span>\n\n","line":1350},{"comment":"The sub-area \"page\" is the index in the DecodedLevelPageStart table.\nThis is why there are 10 blank pages in the jar enemy data.","content":"SubAreaPage:\n\t.db $0A\n\n","htmlComment":"<p>The sub-area \"page\" is the index in the DecodedLevelPageStart table.\nThis is why there are 10 blank pages in the jar enemy data.</p>\n","htmlContent":"SubAreaPage:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\n","line":1357},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_870C:\n\tLDA PPUScrollXMirror\n\tSTA PPUScrollXMirror_Backup\n\tLDA PPUScrollXHiMirror\n\tSTA PPUScrollXHiMirror_Backup\n\tLDA ScreenBoundaryLeftHi\n\tSTA ScreenBoundaryLeftHi_Backup\n\tINC byte_RAM_53D\n\tLDA SubAreaPage\n\tSTA CurrentLevelEntryPage\n\tJSR ResetPPUScrollHi\n\n\tLDA #$00\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tLDA SubAreaPage\n\tSTA ScreenBoundaryLeftHi\n\tJSR sub_BANK0_946D\n\n\tLDA SubAreaPage\n\tSTA byte_RAM_CE\n\tLDA #$E0\n\tSTA byte_RAM_506\n\tLDA SubAreaPage\n\tCLC\n\tADC #$F0\n\tSTA byte_RAM_505\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">870</span>C:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror_Backup\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror_Backup\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftHi_Backup\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>D\n\t<span class=\"token opcode property\">LDA</span> SubAreaPage\n\t<span class=\"token opcode property\">STA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">JSR</span> ResetPPUScrollHi\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">LDA</span> SubAreaPage\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">946</span>D\n\n\t<span class=\"token opcode property\">LDA</span> SubAreaPage\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">LDA</span> SubAreaPage\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":1361},{"comment":"End of function sub_BANK0_870C","content":"\n","htmlComment":"<p>End of function sub_BANK0_870C</p>\n","htmlContent":"\n","line":1392},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_874C:\n\tLDA PPUScrollXMirror_Backup\n\tSTA PPUScrollXMirror\n\tSTA ScreenBoundaryLeftLo\n\tLDA PPUScrollXHiMirror_Backup\n\tSTA PPUScrollXHiMirror\n\tLDA ScreenBoundaryLeftHi_Backup\n\tSTA ScreenBoundaryLeftHi\n\tLDA byte_RAM_53D\n\tBNE locret_BANK0_8784\n\n\tINC byte_RAM_53E\n\tINC byte_RAM_53D\n\tINC byte_RAM_D5\n\tJSR sub_BANK0_9428\n\n\tLDA byte_RAM_CF\n\tSTA byte_RAM_CE\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDA #$F0\n\tSTA byte_RAM_506\n\tSTA byte_RAM_507\n\tLDA byte_RAM_D0\n\tSTA byte_RAM_505\n\nlocret_BANK0_8784:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">874</span>C:\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXMirror_Backup\n\t<span class=\"token opcode property\">STA</span> PPUScrollXMirror\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">LDA</span> PPUScrollXHiMirror_Backup\n\t<span class=\"token opcode property\">STA</span> PPUScrollXHiMirror\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi_Backup\n\t<span class=\"token opcode property\">STA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>D\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8784</span>\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>E\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>D\n\t<span class=\"token opcode property\">INC</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9428</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8784</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":1394},{"comment":"End of function sub_BANK0_874C","content":"\n","htmlComment":"<p>End of function sub_BANK0_874C</p>\n","htmlContent":"\n","line":1425},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8785:\n\tLDA byte_RAM_CF\n\tSTA byte_RAM_CE\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDA #$F0\n\tSTA byte_RAM_506\n\tSTA byte_RAM_507\n\tLDA byte_RAM_D0\n\tCLC\n\tADC #$10\n\tADC #$00\n\tCMP #$0A\n\tBNE loc_BANK0_87A2\n\n\tLDA #$00\n\nloc_BANK0_87A2:\n\tSTA byte_RAM_505\n\tLDA #$01\n\tSTA byte_RAM_6\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8785</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CF\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":1427},{"comment":"End of function sub_BANK0_8785","content":"\n","htmlComment":"<p>End of function sub_BANK0_8785</p>\n","htmlContent":"\n","line":1452},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_87AA:\n\tLDX #$00\n\tSTX byte_RAM_537\n\tSTX byte_RAM_51C\n\tSTX NeedVerticalScroll\n\tJSR sub_BANK0_8812\n\n\tJSR sub_BANK0_8872\n\n\tLDA byte_RAM_506\n\tCMP byte_RAM_D1\n\tBNE loc_BANK0_87DA\n\n\tLDA byte_RAM_507\n\tCLC\n\tADC #$01\n\tCMP byte_RAM_D2\n\tBNE loc_BANK0_87DA\n\nloc_BANK0_87CB:\n\tLDA #$00\n\tSTA byte_RAM_53A\n\tSTA byte_RAM_53D\n\tSTA byte_RAM_53E\n\tINC byte_RAM_537\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>AA:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">537</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\t<span class=\"token opcode property\">STX</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8812</span>\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8872</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">506</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>DA\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">507</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>DA\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>CB:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span><span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>D\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">53</span>E\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">537</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1454},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_87DA:\n\tLDA byte_RAM_CE\n\tCMP byte_RAM_505\n\tBEQ loc_BANK0_87CB\n\n\tLDX #$00\n\tJMP loc_BANK0_87FC\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>DA:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">CMP</span> byte_RAM_<span class=\"token decimalnumber string\">505</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>CB\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>FC\n\n","line":1483},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_87E6:\n\tLDA byte_RAM_CE, X\n\tSEC\n\tSBC #$10\n\tSTA byte_RAM_CE, X\n\tBCS locret_BANK0_87FB\n\n\tDEC byte_RAM_CE, X\n\tLDA byte_RAM_CE, X\n\tCMP #$0EF\n\tBNE locret_BANK0_87FB\n\n\tLDA #$F9\n\tSTA byte_RAM_CE, X\n\nlocret_BANK0_87FB:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>E<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>FB\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0EF</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>FB\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F9</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>FB:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1493},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_87FC:\n\tLDA byte_RAM_CE, X\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_CE, X\n\tBCC locret_BANK0_8811\n\n\tINC byte_RAM_CE, X\n\tLDA byte_RAM_CE, X\n\tCMP #$0A\n\tBNE locret_BANK0_8811\n\n\tLDA #$00\n\tSTA byte_RAM_CE, X\n\nlocret_BANK0_8811:\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">87</span>FC:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BCC</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8811</span>\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8811</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8811</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":1513},{"comment":"End of function sub_BANK0_87AA","content":"\n","htmlComment":"<p>End of function sub_BANK0_87AA</p>\n","htmlContent":"\n","line":1533},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8812:\n\tSTY byte_RAM_F\n\tLDA byte_RAM_CE, X\n\tAND #$0F\n\tTAY\n\tLDA DecodedLevelPageStartLo_Bank1, Y\n\tSTA byte_RAM_E9\n\tLDA DecodedLevelPageStartHi_Bank1, Y\n\tSTA byte_RAM_EA\n\tLDA byte_RAM_CE, X\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_D7\n\tASL A\n\tSTA byte_RAM_D2\n\tLDY #$20\n\tLDA byte_RAM_CE, X\n\tLSR A\n\tBCS loc_BANK0_8837\n\n\tLDY #$24\n\nloc_BANK0_8837:\n\tSTY byte_RAM_D1\n\tLDY byte_RAM_F\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8812</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartLo_Bank<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartHi_Bank<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_EA\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8837</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$24</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8837</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_F\n\t<span class=\"token opcode property\">RTS</span>\n","line":1535},{"comment":"End of function sub_BANK0_8812","content":"\n","htmlComment":"<p>End of function sub_BANK0_8812</p>\n","htmlContent":"\n","line":1566},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_883C:\n\tSTX byte_RAM_8\n\tLDX byte_RAM_9\n\tLDY #$02\n\tLDA byte_RAM_CE, X\n\tSTA byte_RAM_3\n\tSEC\n\tSBC byte_RAM_1\n\tSTA byte_RAM_CE, X\n\tJSR sub_BANK0_8812\n\n\tLDA #$07\n\tSTA byte_RAM_E3\n\tLDA #$00\n\tSTA byte_RAM_D6\n\nloc_BANK0_8856:\n\tJSR sub_BANK0_8925\n\n\tLDA byte_RAM_E3\n\tBPL loc_BANK0_8856\n\n\tLDA byte_RAM_D2\n\tAND #$1C\n\tLSR A\n\tLSR A\n\tORA #$C0\n\tSTA byte_RAM_3BD\n\tLDA byte_RAM_D1\n\tORA #$03\n\tSTA byte_RAM_3BC\n\tLDX byte_RAM_8\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">883</span>C:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8812</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8856</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8925</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8856</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$1C</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>BD\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>BC\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":1568},{"comment":"End of function sub_BANK0_883C","content":"\n","htmlComment":"<p>End of function sub_BANK0_883C</p>\n","htmlContent":"\n","line":1604},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8872:\n\tLDA #$0F\n\tSTA byte_RAM_E3\n\tLDA #$00\n\tSTA byte_RAM_D6\n\tSTA byte_RAM_D5\n\tTAX\n\nloc_BANK0_887D:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tSTA byte_RAM_51B\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\nloc_BANK0_8894:\n\tLDY byte_RAM_D7\n\tLDA (byte_RAM_E9), Y\n\tASL A\n\tASL A\n\tTAY\n\tLDA byte_RAM_D5\n\tBEQ loc_BANK0_88A0\n\n\tINY\n\nloc_BANK0_88A0:\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_380, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_39E, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_381, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA unk_RAM_39F, X\n\tINC byte_RAM_D6\n\tINX\n\tINX\n\tLDA byte_RAM_D7\n\tCLC\n\tADC #$10\n\tSTA byte_RAM_D7\n\tLDA byte_RAM_D6\n\tCMP #$0F\n\tBCC loc_BANK0_887D\n\n\tLDA #$00\n\tSTA byte_RAM_3BC\n\tLDA NeedVerticalScroll\n\tLSR A\n\tBCS loc_BANK0_88F2\n\n\tLDA byte_RAM_D2\n\tAND #$02\n\tBEQ loc_BANK0_88FD\n\n\tLDA NeedVerticalScroll\n\tBNE loc_BANK0_88F8\n\n\tLDA #$10\n\tSTA byte_RAM_1\n\tLDX #$00\n\tSTX byte_RAM_9\n\tINX\n\tJSR sub_BANK0_8901\n\n\tLDA byte_RAM_3\n\tSTA byte_RAM_CE\n\tJSR sub_BANK0_8812\n\n\tJMP loc_BANK0_88FD\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8872</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">TAX</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">887</span>D:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>B\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8894</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">380</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">39</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">381</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">39</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">887</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>BC\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>FD\n\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8901</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_CE\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8812</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>FD\n\n","line":1606},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_88F2:\n\tLDA byte_RAM_D2\n\tAND #$02\n\tBNE loc_BANK0_88FD\n\nloc_BANK0_88F8:\n\tLDA NeedVerticalScroll\n\tSTA byte_RAM_538\n\nloc_BANK0_88FD:\n\tINC byte_RAM_51C\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>FD\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>F<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">LDA</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">538</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">88</span>FD:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">51</span>C\n\t<span class=\"token opcode property\">RTS</span>\n","line":1690},{"comment":"End of function sub_BANK0_8872","content":"\n","htmlComment":"<p>End of function sub_BANK0_8872</p>\n","htmlContent":"\n","line":1705},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8901:\n\tJSR sub_BANK0_883C\n\n\tLDX #$07\n\tSTX byte_RAM_E\n\tLDY #$00\n\nloc_BANK0_890A:\n\tLDX byte_RAM_E\n\tLDA EnemyArray_D9, X\n\tSTA unk_RAM_3BE, Y\n\tINY\n\tDEX\n\tDEX\n\tDEX\n\tDEX\n\tLDA EnemyArray_D9, X\n\tSTA unk_RAM_3BE, Y\n\tINY\n\tDEC byte_RAM_E\n\tLDA byte_RAM_E\n\tCMP #03\n\tBNE loc_BANK0_890A\n\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8901</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">883</span>C\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_E\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">890</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_E\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">3</span>BE, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> unk_RAM_<span class=\"token decimalnumber string\">3</span>BE, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_E\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token decimalnumber string\">#03</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">890</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n","line":1707},{"comment":"End of function sub_BANK0_8901","content":"\n","htmlComment":"<p>End of function sub_BANK0_8901</p>\n","htmlContent":"\n","line":1735},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8925:\n\tSTY byte_RAM_F\n\tLDA #01\n\tSTA byte_RAM_4\n\tLDY byte_RAM_D7\n\tLDX byte_RAM_E3\n\nloc_BANK0_892F:\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, X\n\tLDA (byte_RAM_E9), Y\n\tAND #$C0\n\tORA EnemyArray_D9, X\n\tSTA EnemyArray_D9, X\n\tINY\n\tLDA EnemyArray_D9, X\n\tLSR A\n\tLSR A\n\tSTA EnemyArray_D9, X\n\tLDA (byte_RAM_E9), Y\n\tAND #$C0\n\tORA EnemyArray_D9, X\n\tSTA EnemyArray_D9, X\n\tLDA byte_RAM_D7\n\tCLC\n\tADC #$10\n\tTAY\n\tSTA byte_RAM_D7\n\tDEC byte_RAM_4\n\tBPL loc_BANK0_892F\n\n\tDEC byte_RAM_E3\n\tLDY byte_RAM_F\n\tRTS\n\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8925</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">892</span>F:\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_E<span class=\"token decimalnumber string\">9</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ORA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_D<span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_D<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">892</span>F\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_F\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":1737},{"comment":"End of function sub_BANK0_8925","content":"SetObjectLocks:\n\tLDX #$07\n\nSetObjectLocks_Loop:\n\tSTA ObjectLock - 1, X\n\tDEX\n\tBPL SetObjectLocks_Loop\n\n\tRTS\n\n\n","htmlComment":"<p>End of function sub_BANK0_8925</p>\n","htmlContent":"SetObjectLocks:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$07</span>\n\nSetObjectLocks_Loop:\n\t<span class=\"token opcode property\">STA</span> ObjectLock - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> SetObjectLocks_Loop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":1776},{"comment":"Unused space in the original ($8966 - $89FF)","content":"unusedSpace $8A00, $FF\n\n\nGrowShrinkSFXIndexes:\n\t.db SoundEffect2_Shrinking\n\t.db SoundEffect2_Growing\n\n\nHandlePlayerState:\nIFDEF CONTROLLER_2_DEBUG\n\tJSR CheckPlayer2Joypad\nENDIF\n\n\tLDA PlayerState ; Handles player states?\n\tCMP #PlayerState_Lifting\n\tBCS loc_BANK0_8A26 ; If the player is changing size, just handle that\n\n\tLDA #$00 ; Check if the player needs to change size\n\tLDY #$10\n\tCPY PlayerHealth\n\tROL A\n\tEOR PlayerCurrentSize\n\tBEQ loc_BANK0_8A26\n\n\tLDY PlayerCurrentSize\n\tLDA GrowShrinkSFXIndexes, Y\n\tSTA SoundEffectQueue2\n\tLDA #$1E\n\tSTA PlayerStateTimer\n\tLDA #PlayerState_ChangingSize\n\tSTA PlayerState\n\nloc_BANK0_8A26:\n\tLDA #ObjAttrib_Palette0\n\tSTA PlayerAttributes\n\tLDA PlayerState\n\tJSR JumpToTableAfterJump ; Player state handling?\n\n\t.dw HandlePlayerState_Normal ; Normal\n\t.dw HandlePlayerState_Climbing ; Climbing\n\t.dw HandlePlayerState_Lifting ; Lifting\n\t.dw HandlePlayerState_ClimbingAreaTransition ; Climbing area transition\n\t.dw HandlePlayerState_GoingDownJar ; Going down jar\n\t.dw HandlePlayerState_ExitingJar ; Exiting jar\n\t.dw HandlePlayerState_HawkmouthEating ; Hawkmouth eating\n\t.dw HandlePlayerState_Dying ; Dying\n\t.dw HandlePlayerState_ChangingSize ; Changing size\n\n\nHandlePlayerState_Normal:\n\tJSR PlayerGravity\n","htmlComment":"<p>Unused space in the original ($8966 - $89FF)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$8A00</span>, <span class=\"token hexnumber string\">$FF</span>\n\n\nGrowShrinkSFXIndexes:\n\t<span class=\"token directive keyword\">.db</span> SoundEffect<span class=\"token decimalnumber string\">2</span>_Shrinking\n\t<span class=\"token directive keyword\">.db</span> SoundEffect<span class=\"token decimalnumber string\">2</span>_Growing\n\n\nHandlePlayerState:\nIFDEF CONTROLLER_<span class=\"token decimalnumber string\">2</span>_DEBUG\n\t<span class=\"token opcode property\">JSR</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> PlayerState <span class=\"token comment\">; Handles player states?</span>\n\t<span class=\"token opcode property\">CMP</span> #PlayerState_Lifting\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">26</span> <span class=\"token comment\">; If the player is changing size, just handle that</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span> <span class=\"token comment\">; Check if the player needs to change size</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">CPY</span> PlayerHealth\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">EOR</span> PlayerCurrentSize\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">26</span>\n\n\t<span class=\"token opcode property\">LDY</span> PlayerCurrentSize\n\t<span class=\"token opcode property\">LDA</span> GrowShrinkSFXIndexes, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1E</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_ChangingSize\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">26</span>:\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAttributes\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump <span class=\"token comment\">; Player state handling?</span>\n\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_Normal <span class=\"token comment\">; Normal</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_Climbing <span class=\"token comment\">; Climbing</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_Lifting <span class=\"token comment\">; Lifting</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_ClimbingAreaTransition <span class=\"token comment\">; Climbing area transition</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_GoingDownJar <span class=\"token comment\">; Going down jar</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_ExitingJar <span class=\"token comment\">; Exiting jar</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_HawkmouthEating <span class=\"token comment\">; Hawkmouth eating</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_Dying <span class=\"token comment\">; Dying</span>\n\t<span class=\"token directive keyword\">.dw</span> HandlePlayerState_ChangingSize <span class=\"token comment\">; Changing size</span>\n\n\nHandlePlayerState_Normal:\n\t<span class=\"token opcode property\">JSR</span> PlayerGravity\n","line":1791},{"comment":"player animation frame, crouch jump charging","content":"\tJSR sub_BANK0_8C1A\n","htmlComment":"<p>player animation frame, crouch jump charging</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">1</span><span class=\"token register variable\">A</span>\n","line":1844},{"comment":"maybe only y-collision?","content":"\tJSR PlayerTileCollision\n","htmlComment":"<p>maybe only y-collision?</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision\n","line":1847},{"comment":"screen boundary x-collision","content":"\tJSR PlayerAreaBoundaryCollision\n\n\tJSR ApplyPlayerPhysicsY\n\n","htmlComment":"<p>screen boundary x-collision</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> PlayerAreaBoundaryCollision\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsY\n\n","line":1850},{"comment":"\nApplies player physics on the x-axis\n","content":"ApplyPlayerPhysicsX:\n\tLDX #$00\n\tJSR ApplyPlayerPhysics\n\n\tLDA IsHorizontalLevel\n\tBNE ApplyPlayerPhysicsX_Exit\n\n\tSTA PlayerXHi\n\nApplyPlayerPhysicsX_Exit:\n\tRTS\n\n","htmlComment":"<p>Applies player physics on the x-axis</p>\n","htmlContent":"ApplyPlayerPhysicsX:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysics\n\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> ApplyPlayerPhysicsX_Exit\n\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\nApplyPlayerPhysicsX_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1858},{"comment":"\nWhat goes up must come down\n","content":"HandlePlayerState_Dying:\n\tLDA PlayerStateTimer\n\tBNE locret_BANK0_8A86\n\n\tLDA PlayerScreenYHi\n\tCMP #02\n\tBEQ LoseALife\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA PlayerYVelocity\n\tBMI loc_BANK0_8A72\n\n\tCMP #$39\n\tBCS locret_BANK0_8A86\n\nloc_BANK0_8A72:\n\tINC PlayerYVelocity\n\tINC PlayerYVelocity\n\tRTS\n\n","htmlComment":"<p>What goes up must come down</p>\n","htmlContent":"HandlePlayerState_Dying:\n\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">86</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYHi\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token decimalnumber string\">#02</span>\n\t<span class=\"token opcode property\">BEQ</span> LoseALife\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">72</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$39</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">86</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">72</span>:\n\t<span class=\"token opcode property\">INC</span> PlayerYVelocity\n\t<span class=\"token opcode property\">INC</span> PlayerYVelocity\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1874},{"comment":"---------------------------------------------------------------------------","content":"LoseALife:\n\tLDA #02\n\tSTA PlayerAnimationFrame\n\tLDY #$01 ; Set game mode to title card\n\tDEC ExtraLives\n\tBNE SetGameModeAfterDeath\n\n\tINY ; If no lives, increase game mode\n","htmlComment":"<hr>\n","htmlContent":"LoseALife:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token decimalnumber string\">#02</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span> <span class=\"token comment\">; Set game mode to title card</span>\n\t<span class=\"token opcode property\">DEC</span> ExtraLives\n\t<span class=\"token opcode property\">BNE</span> SetGameModeAfterDeath\n\n\t<span class=\"token opcode property\">INY</span> <span class=\"token comment\">; If no lives, increase game mode</span>\n","line":1896},{"comment":"from 1 (title card) to 2 (game over)","content":"SetGameModeAfterDeath:\n\tSTY GameMode\n\nlocret_BANK0_8A86:\n\tRTS\n\n","htmlComment":"<p>from 1 (title card) to 2 (game over)</p>\n","htmlContent":"SetGameModeAfterDeath:\n\t<span class=\"token opcode property\">STY</span> GameMode\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">86</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1906},{"comment":"---------------------------------------------------------------------------","content":"HandlePlayerState_Lifting:\n\tLDA PlayerStateTimer\n\tBNE locret_BANK0_8AC1\n\n\tLDX ObjectBeingCarriedIndex\n\tLDY ObjectBeingCarriedTimer, X\n\tCPY #$02\n\tBCC loc_BANK0_8ABB\n\n\tCPY #$07\n\tBNE loc_BANK0_8A9D\n\n\tLDA #DPCM_ItemPull\n\tSTA DPCMQueue\n\nloc_BANK0_8A9D:\n\tDEC ObjectBeingCarriedTimer, X\n\tLDA PlayerLiftFrames, Y\n\tSTA PlayerAnimationFrame\n\tLDA EnemyState, X\n\tCMP #$06\n\tBEQ loc_BANK0_8AB0\n\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBNE loc_BANK0_8AB5\n\nloc_BANK0_8AB0:\n\tLDA PlayerLiftTimer - 2, Y\n\tBPL loc_BANK0_8AB8\n\nloc_BANK0_8AB5:\n\tLDA PickupSpeedAnimation - 2, Y\n\nloc_BANK0_8AB8:\n\tSTA PlayerStateTimer\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"HandlePlayerState_Lifting:\n\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AC<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ABB\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">9</span>D\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_ItemPull\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">9</span>D:\n\t<span class=\"token opcode property\">DEC</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerLiftFrames, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AB<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AB<span class=\"token decimalnumber string\">5</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AB<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerLiftTimer - <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AB<span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AB<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> PickupSpeedAnimation - <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AB<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":1914},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8ABB:\n\tSTA PlayerState\n\tINC PlayerInAir\n\nloc_BANK0_8ABF:\n\tINC PlayerDucking\n\nlocret_BANK0_8AC1:\n\tRTS\n\n\nPlayerLiftTimer:\n\t.db $00\n\t.db $01\n\t.db $01\n\t.db $01\n\nPlayerLiftFrames:\n\t.db $01\n\t.db $02\n\t.db $04\n\t.db $04\n\t.db $04\n\t.db $04\n\t.db $08\n\t.db $08\n\nbyte_BANK0_8ACE:\n\t.db $00\n\t.db $10\n\t.db $F0\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ABB:\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">INC</span> PlayerInAir\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ABF:\n\t<span class=\"token opcode property\">INC</span> PlayerDucking\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>AC<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPlayerLiftTimer:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\nPlayerLiftFrames:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ACE:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n","line":1954},{"comment":"---------------------------------------------------------------------------","content":"HandlePlayerState_Climbing:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Down | ControllerInput_Up\n\tLSR A\n\tLSR A\n\tTAY\n\tCPY #$02\n\tBNE loc_BANK0_8ADF\n\n\tJSR PlayerClimbAnimation\n\nloc_BANK0_8ADF:\n\tLDA ClimbSpeed, Y\n\tSTA PlayerYVelocity\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tTAY\n\tLDA byte_BANK0_8ACE, Y\n\tSTA PlayerXVelocity\n\tLDA PlayerXLo\n\tCLC\n\tADC #$04\n\tAND #$0F\n\tCMP #$08\n\tBCS loc_BANK0_8B14\n\n\tLDY byte_BANKF_F00B\n\tLDA PlayerYVelocity\n\tBMI loc_BANK0_8B01\n\n\tINY\n\nloc_BANK0_8B01:\n\tLDX #$00\n\tJSR PlayerTileCollision_CheckClimbable\n\n\tBCS loc_BANK0_8B0E\n\nloc_BANK0_8B08:\n\tLDA PlayerYVelocity\n\tBPL loc_BANK0_8B14\n\n\tSTX PlayerYVelocity\n\nloc_BANK0_8B0E:\n\tJSR ApplyPlayerPhysicsX\n\n\tJMP ApplyPlayerPhysicsY\n\n","htmlComment":"<hr>\n","htmlContent":"HandlePlayerState_Climbing:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Down | ControllerInput_Up\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ADF\n\n\t<span class=\"token opcode property\">JSR</span> PlayerClimbAnimation\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ADF:\n\t<span class=\"token opcode property\">LDA</span> ClimbSpeed, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Right | ControllerInput_Left\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ACE, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">14</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_BANKF_F<span class=\"token decimalnumber string\">00</span>B\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">01</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">01</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision_CheckClimbable\n\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">0</span>E\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">08</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">14</span>\n\n\t<span class=\"token opcode property\">STX</span> PlayerYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">0</span>E:\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsX\n\n\t<span class=\"token opcode property\">JMP</span> ApplyPlayerPhysicsY\n\n","line":1987},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8B14:\n\tLDA #$00\n\tSTA PlayerState\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">14</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2038},{"comment":"\nDoes climbing animation and sound\n","content":"PlayerClimbAnimation:\n\tLDA byte_RAM_10\n\tAND #$07\n\tBNE PlayerClimbAnimation_Exit\n\n\tLDA PlayerDirection\n\tEOR #$01\n\tSTA PlayerDirection\n\tLDA #SoundEffect2_Climbing\n\tSTA SoundEffectQueue2\n\nPlayerClimbAnimation_Exit:\n\tRTS\n\n\nClimbableTiles:\n\t.db BackgroundTile_Vine\n\t.db BackgroundTile_VineStandable\n\t.db BackgroundTile_VineBottom\n\t.db BackgroundTile_ClimbableSky\n\t.db BackgroundTile_Chain\n\t.db BackgroundTile_Ladder\n\t.db BackgroundTile_LadderShadow\n\t.db BackgroundTile_LadderStandable\n\t.db BackgroundTile_LadderStandableShadow\n\t.db BackgroundTile_ChainStandable\n\n","htmlComment":"<p>Does climbing animation and sound</p>\n","htmlContent":"PlayerClimbAnimation:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BNE</span> PlayerClimbAnimation_Exit\n\n\t<span class=\"token opcode property\">LDA</span> PlayerDirection\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDirection\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">2</span>_Climbing\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">2</span>\n\nPlayerClimbAnimation_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nClimbableTiles:\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_Vine\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_VineStandable\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_VineBottom\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_ClimbableSky\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_Chain\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_Ladder\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_LadderShadow\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_LadderStandable\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_LadderStandableShadow\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_ChainStandable\n\n","line":2048},{"comment":"\nChecks whether the player is on a climbable tile\n\nInput\nbyte_RAM_0 = tile ID\nOutput\nC = set if the player is on a climbable tile\n","content":"PlayerTileCollision_CheckClimbable:\n\tJSR sub_BANK0_924F\n\n\tLDA byte_RAM_0\n\tLDY #$09\n\nPlayerTileCollision_CheckClimbable_Loop:\n\tCMP ClimbableTiles, Y\n\tBEQ PlayerTileCollision_CheckClimbable_Exit\n\n\tDEY\n\tBPL PlayerTileCollision_CheckClimbable_Loop\n\n\tCLC\n\nPlayerTileCollision_CheckClimbable_Exit:\n\tRTS\n\n\nHandlePlayerState_GoingDownJar:\n\tLDA #ObjAttrib_BehindBackground\n\tSTA PlayerAttributes\n\tINC PlayerYLo\n\tLDA PlayerYLo\n\tAND #$0F\n\tBNE HandlePlayerState_GoingDownJar_Exit\n\n\tSTA PlayerState\n\tJSR DoAreaReset\n\n\tPLA\n\tPLA\n\tJSR StashPlayerPosition_Bank0\n\n\tLDA #TransitionType_Jar\n\tSTA TransitionType\n\tLDA InJarType\n\tBNE HandlePlayerState_GoingDownJar_NonWarp\n\n\tLDA #GameMode_Warp\n\tSTA GameMode\n\tRTS\n\nHandlePlayerState_GoingDownJar_NonWarp:\n\tCMP #$01\n\tBEQ HandlePlayerState_GoingDownJar_Regular\n\n\tSTA DoAreaTransition\n\tRTS\n\nHandlePlayerState_GoingDownJar_Regular:\n\tSTA InSubspaceOrJar\n\nHandlePlayerState_GoingDownJar_Exit:\n\tRTS\n\n\nHandlePlayerState_ExitingJar:\n\tLDA #ObjAttrib_BehindBackground\n\tSTA PlayerAttributes\n\tDEC PlayerYLo\n\tLDA PlayerYLo\n\tAND #$0F\n\tBNE locret_BANK0_8B86\n\n\tSTA PlayerState\n\nlocret_BANK0_8B86:\n\tRTS\n","htmlComment":"<p>Checks whether the player is on a climbable tile</p>\n<p>Input\nbyte_RAM_0 = tile ID\nOutput\nC = set if the player is on a climbable tile</p>\n","htmlContent":"PlayerTileCollision_CheckClimbable:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">924</span>F\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$09</span>\n\nPlayerTileCollision_CheckClimbable_Loop:\n\t<span class=\"token opcode property\">CMP</span> ClimbableTiles, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_CheckClimbable_Exit\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> PlayerTileCollision_CheckClimbable_Loop\n\n\t<span class=\"token opcode property\">CLC</span>\n\nPlayerTileCollision_CheckClimbable_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nHandlePlayerState_GoingDownJar:\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">STA</span> PlayerAttributes\n\t<span class=\"token opcode property\">INC</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> HandlePlayerState_GoingDownJar_Exit\n\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">JSR</span> StashPlayerPosition_Bank<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_Jar\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">LDA</span> InJarType\n\t<span class=\"token opcode property\">BNE</span> HandlePlayerState_GoingDownJar_NonWarp\n\n\t<span class=\"token opcode property\">LDA</span> #GameMode_Warp\n\t<span class=\"token opcode property\">STA</span> GameMode\n\t<span class=\"token opcode property\">RTS</span>\n\nHandlePlayerState_GoingDownJar_NonWarp:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BEQ</span> HandlePlayerState_GoingDownJar_Regular\n\n\t<span class=\"token opcode property\">STA</span> DoAreaTransition\n\t<span class=\"token opcode property\">RTS</span>\n\nHandlePlayerState_GoingDownJar_Regular:\n\t<span class=\"token opcode property\">STA</span> InSubspaceOrJar\n\nHandlePlayerState_GoingDownJar_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nHandlePlayerState_ExitingJar:\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">STA</span> PlayerAttributes\n\t<span class=\"token opcode property\">DEC</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">86</span>\n\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">86</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":2084},{"comment":"---------------------------------------------------------------------------","content":"byte_BANK0_8B87:\n\t.db $00\n\t.db $FF\n\nbyte_BANK0_8B89:\n\t.db $EE\n\t.db $DE\n\nbyte_BANK0_8B8B:\n\t.db $09\n\t.db $A1\n","htmlComment":"<hr>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">87</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">89</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DE</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">8</span>B:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A1</span>\n","line":2155},{"comment":"---------------------------------------------------------------------------","content":"HandlePlayerState_ClimbingAreaTransition:\n\tLDA PlayerYVelocity\n\tASL A\n\tROL A\n\tAND #$01\n\tTAY\n\tLDA PlayerScreenYHi\n\tCMP byte_BANK0_8B87, Y\n\tBNE loc_BANK0_8BB0\n\n\tLDA PlayerScreenYLo\n\tCMP byte_BANK0_8B89, Y\n\tBNE loc_BANK0_8BB0\n\n\tJSR DoAreaReset\n\n\tINC DoAreaTransition\n\tLDA #TransitionType_Vine\n\tSTA TransitionType\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"HandlePlayerState_ClimbingAreaTransition:\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYHi\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">87</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BB<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">89</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BB<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">INC</span> DoAreaTransition\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_Vine\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2167},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8BB0:\n\tLDA PlayerScreenYHi\n\tBNE loc_BANK0_8BBD\n\n\tLDA PlayerScreenYLo\n\tCMP byte_BANK0_8B8B, Y\n\tBEQ loc_BANK0_8BC6\n\nloc_BANK0_8BBD:\n\tTYA\n\tBEQ loc_BANK0_8BC3\n\n\tJSR PlayerClimbAnimation\n\nloc_BANK0_8BC3:\n\tJMP ApplyPlayerPhysicsY\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BB<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYHi\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BBD\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>B<span class=\"token decimalnumber string\">8</span>B, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BC<span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BBD:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BC<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">JSR</span> PlayerClimbAnimation\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BC<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JMP</span> ApplyPlayerPhysicsY\n\n","line":2190},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8BC6:\n\tLDA #PlayerState_Climbing\n\tSTA PlayerState\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BC<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_Climbing\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2209},{"comment":"---------------------------------------------------------------------------","content":"HandlePlayerState_HawkmouthEating:\n\tLDA PlayerStateTimer\n\tBEQ loc_BANK0_8BE9\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA_abs PlayerCollision\n\n\tBEQ locret_BANK0_8BEB\n\n\tLDA #ObjAttrib_BehindBackground\n\tSTA PlayerAttributes\n\tLDA #$04\n\tSTA PlayerXVelocity\n\tLDA #$01\n\tSTA PlayerDirection\n\nloc_BANK0_8BE3:\n\tJSR ApplyPlayerPhysicsX\n\n\tJMP PlayerWalkJumpAnim\n\n","htmlComment":"<hr>\n","htmlContent":"HandlePlayerState_HawkmouthEating:\n\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BE<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsY\n\n\tLDA_abs PlayerCollision\n\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BEB\n\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_BehindBackground\n\t<span class=\"token opcode property\">STA</span> PlayerAttributes\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDirection\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BE<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsX\n\n\t<span class=\"token opcode property\">JMP</span> PlayerWalkJumpAnim\n\n","line":2216},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8BE9:\n\tSTA PlayerState\n\nlocret_BANK0_8BEB:\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BE<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>BEB:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2240},{"comment":"Alternate between large and small graphics on these frames when changing size","content":"ChangingSizeKeyframes:\n\t.db $05\n\t.db $0A\n\t.db $0F\n\t.db $14\n\t.db $19\n\n\nHandlePlayerState_ChangingSize:\n\tLDA PlayerStateTimer\n\tBEQ loc_BANK0_8C0D\n\n\tINC DamageInvulnTime\n\n\tLDY #$04\nHandlePlayerState_ChangingSize_Loop:\n\tCMP ChangingSizeKeyframes, Y\n\tBNE HandlePlayerState_ChangingSize_Next\n\n\tLDA PlayerCurrentSize\n\tEOR #$01\n\tSTA PlayerCurrentSize\n\tJMP LoadCharacterCHRBanks\n\nHandlePlayerState_ChangingSize_Next:\n\tDEY\n\tBPL HandlePlayerState_ChangingSize_Loop\n\n\tRTS\n\n","htmlComment":"<p>Alternate between large and small graphics on these frames when changing size</p>\n","htmlContent":"ChangingSizeKeyframes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>\n\n\nHandlePlayerState_ChangingSize:\n\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">0</span>D\n\n\t<span class=\"token opcode property\">INC</span> DamageInvulnTime\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span>\nHandlePlayerState_ChangingSize_Loop:\n\t<span class=\"token opcode property\">CMP</span> ChangingSizeKeyframes, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> HandlePlayerState_ChangingSize_Next\n\n\t<span class=\"token opcode property\">LDA</span> PlayerCurrentSize\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerCurrentSize\n\t<span class=\"token opcode property\">JMP</span> LoadCharacterCHRBanks\n\nHandlePlayerState_ChangingSize_Next:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> HandlePlayerState_ChangingSize_Loop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2249},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8C0D:\n\tLDY PlayerAnimationFrame\n\tCPY #$0A\n\tBNE loc_BANK0_8C15\n\n\tLDA #PlayerState_Climbing\n\nloc_BANK0_8C15:\n\tSTA PlayerState\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">0</span>D:\n\t<span class=\"token opcode property\">LDY</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">15</span>\n\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_Climbing\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">15</span>:\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2280},{"comment":"---------------------------------------------------------------------------","content":"PlayerControlAcceleration:\n\t.db $FE\n\t.db $02\n","htmlComment":"<hr>\n","htmlContent":"PlayerControlAcceleration:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n","line":2293},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":2299},{"comment":"player crouch subroutine","content":"sub_BANK0_8C1A:\n\tJSR PlayerWalkJumpAnim\n\n\tLDA PlayerInAir\n\tBNE ResetPartialCrouchJumpTimer\n\n\tLDA PlayerDucking\n\tBEQ loc_BANK0_8C2B\n\n\tLDA PlayerStateTimer\n\tBNE loc_BANK0_8C92\n\n\tDEC PlayerDucking\n\nloc_BANK0_8C2B:\n\tLDA Player1JoypadPress\n\tBPL loc_BANK0_8C3D ; branch if not pressing A Button\n\n\tINC PlayerInAir\n\tLDA #SpriteAnimation_Jumping\n\tSTA PlayerAnimationFrame\n\tJSR PlayerStartJump\n\n\tLDA #SoundEffect2_Jump\n\tSTA SoundEffectQueue2\n\nloc_BANK0_8C3D:\n\tLDA PlayerRidingCarpet\n\tBNE loc_BANK0_8C92\n\n\tLDA QuicksandDepth\n\tBNE ResetPartialCrouchJumpTimer\n\n\tLDA Player1JoypadHeld ; skip if down button is not pressed\n\tAND #ControllerInput_Down\n\tBEQ ResetPartialCrouchJumpTimer\n\n\tINC PlayerDucking ; set ducking state?\n\tLDA #SpriteAnimation_Ducking ; set ducking animation\n\tSTA PlayerAnimationFrame\n\tLDA PlayerInAir ; skip ahead if player is in air\n\tBNE ResetPartialCrouchJumpTimer\n\n\tLDA CrouchJumpTimer ; check if crouch jump is charged\n\tCMP #$3C\n\tBCS loc_BANK0_8C92\n\n\tINC CrouchJumpTimer ; increment crouch jump charge\n\tBNE loc_BANK0_8C92\n\nResetPartialCrouchJumpTimer: ; reset crouch jump timer if it isn't full\n\tLDA CrouchJumpTimer\n\tCMP #$3C ; max crouch jump timer\n\tBCS loc_BANK0_8C6F\n\n\tLDA #$00 ; reset crouch jump timer to zero\n\tSTA CrouchJumpTimer\n\nloc_BANK0_8C6F:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tBEQ loc_BANK0_8C92\n\n\tAND #$01\n\tSTA PlayerDirection\n\tTAY\n\tLDA GroundSlipperiness\n\tLSR A\n\tLSR A\n\tAND byte_RAM_10\n\tBNE ResetCrouchJumpTimer\n\n\tLDA PlayerXVelocity\n\tCLC\n\tADC PlayerControlAcceleration, Y\n\tSTA PlayerXVelocity\n\nResetCrouchJumpTimer:\n\tLDA #$00\n\tSTA CrouchJumpTimer\n\tBEQ loc_BANK0_8C95 ; unconditional branch?\n\nloc_BANK0_8C92:\n\tJSR sub_BANK0_8D2C\n\nloc_BANK0_8C95:\n\tJSR sub_BANK0_8DC0\n\n\tRTS\n\n","htmlComment":"<p>player crouch subroutine</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">1</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JSR</span> PlayerWalkJumpAnim\n\n\t<span class=\"token opcode property\">LDA</span> PlayerInAir\n\t<span class=\"token opcode property\">BNE</span> ResetPartialCrouchJumpTimer\n\n\t<span class=\"token opcode property\">LDA</span> PlayerDucking\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">2</span>B\n\n\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">92</span>\n\n\t<span class=\"token opcode property\">DEC</span> PlayerDucking\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">2</span>B:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">3</span>D <span class=\"token comment\">; branch if not pressing A Button</span>\n\n\t<span class=\"token opcode property\">INC</span> PlayerInAir\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Jumping\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">JSR</span> PlayerStartJump\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">2</span>_Jump\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">3</span>D:\n\t<span class=\"token opcode property\">LDA</span> PlayerRidingCarpet\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">92</span>\n\n\t<span class=\"token opcode property\">LDA</span> QuicksandDepth\n\t<span class=\"token opcode property\">BNE</span> ResetPartialCrouchJumpTimer\n\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld <span class=\"token comment\">; skip if down button is not pressed</span>\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Down\n\t<span class=\"token opcode property\">BEQ</span> ResetPartialCrouchJumpTimer\n\n\t<span class=\"token opcode property\">INC</span> PlayerDucking <span class=\"token comment\">; set ducking state?</span>\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Ducking <span class=\"token comment\">; set ducking animation</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDA</span> PlayerInAir <span class=\"token comment\">; skip ahead if player is in air</span>\n\t<span class=\"token opcode property\">BNE</span> ResetPartialCrouchJumpTimer\n\n\t<span class=\"token opcode property\">LDA</span> CrouchJumpTimer <span class=\"token comment\">; check if crouch jump is charged</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$3C</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">92</span>\n\n\t<span class=\"token opcode property\">INC</span> CrouchJumpTimer <span class=\"token comment\">; increment crouch jump charge</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">92</span>\n\nResetPartialCrouchJumpTimer: <span class=\"token comment\">; reset crouch jump timer if it isn't full</span>\n\t<span class=\"token opcode property\">LDA</span> CrouchJumpTimer\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$3C</span> <span class=\"token comment\">; max crouch jump timer</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">6</span>F\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span> <span class=\"token comment\">; reset crouch jump timer to zero</span>\n\t<span class=\"token opcode property\">STA</span> CrouchJumpTimer\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">6</span>F:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Right | ControllerInput_Left\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">92</span>\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDirection\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> GroundSlipperiness\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BNE</span> ResetCrouchJumpTimer\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerControlAcceleration, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\nResetCrouchJumpTimer:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> CrouchJumpTimer\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">95</span> <span class=\"token comment\">; unconditional branch?</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">92</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">2</span>C\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>C<span class=\"token decimalnumber string\">95</span>:\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DC<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2301},{"comment":"End of function sub_BANK0_8C1A","content":"","htmlComment":"<p>End of function sub_BANK0_8C1A</p>\n","htmlContent":"","line":2392},{"comment":"\nStarts a jump\n\nThe jump height is based on a lookup table using the following bitfield:\n\n%xxxxxRCI\nR = whether the player is running\nC = whether the crouch timer is charged\nI = whether the player is holding an item\n","content":"PlayerStartJump:\n\tLDA QuicksandDepth\n\tCMP #$02\n\tBCC PlayerStartJump_LoadXVelocity\n","htmlComment":"<p>Starts a jump</p>\n<p>The jump height is based on a lookup table using the following bitfield:</p>\n<p>%xxxxxRCI\nR = whether the player is running\nC = whether the crouch timer is charged\nI = whether the player is holding an item</p>\n","htmlContent":"PlayerStartJump:\n\t<span class=\"token opcode property\">LDA</span> QuicksandDepth\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> PlayerStartJump_LoadXVelocity\n","line":2404},{"comment":"Quicksand","content":"\tLDA JumpHeightQuicksand\n\tSTA PlayerYVelocity\n\tBNE PlayerStartJump_Exit\n\nPlayerStartJump_LoadXVelocity:","htmlComment":"<p>Quicksand</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> JumpHeightQuicksand\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BNE</span> PlayerStartJump_Exit\n\nPlayerStartJump_LoadXVelocity:","line":2410},{"comment":"The x-velocity may affect the jump","content":"\tLDA PlayerXVelocity\n\tBPL PlayerStartJump_CheckXSpeed\n","htmlComment":"<p>The x-velocity may affect the jump</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">BPL</span> PlayerStartJump_CheckXSpeed\n","line":2416},{"comment":"Absolute value of x-velocity","content":"\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nPlayerStartJump_CheckXSpeed:","htmlComment":"<p>Absolute value of x-velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\nPlayerStartJump_CheckXSpeed:","line":2420},{"comment":"Set carry flag if the x-speed is fast enough","content":"\tCMP #$08","htmlComment":"<p>Set carry flag if the x-speed is fast enough</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>","line":2426},{"comment":"Clear y subpixel","content":"\tLDA #$00\n\tSTA PlayerYSubpixel","htmlComment":"<p>Clear y subpixel</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYSubpixel","line":2428},{"comment":"Set bit for x-speed using carry flag","content":"\tROL A\n","htmlComment":"<p>Set bit for x-speed using carry flag</p>\n","htmlContent":"\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n","line":2431},{"comment":"Check crouch jump timer","content":"\tLDY CrouchJumpTimer\n\tCPY #$3C\n\tBCC PlayerStartJump_SetYVelocity\n","htmlComment":"<p>Check crouch jump timer</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> CrouchJumpTimer\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$3C</span>\n\t<span class=\"token opcode property\">BCC</span> PlayerStartJump_SetYVelocity\n","line":2434},{"comment":"Clear Player1JoypadHeld for a crouch jump","content":"\tLDA #$00\n\tSTA Player1JoypadHeld\n\nPlayerStartJump_SetYVelocity:","htmlComment":"<p>Clear Player1JoypadHeld for a crouch jump</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\nPlayerStartJump_SetYVelocity:","line":2439},{"comment":"Set bit for charged jump using carry flag","content":"\tROL A","htmlComment":"<p>Set bit for charged jump using carry flag</p>\n","htmlContent":"\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>","line":2444},{"comment":"Set bit for whether player is holding an item","content":"\tASL A\n\tORA HoldingItem\n\tTAY\n\tLDA JumpHeightStanding, Y\n\tSTA PlayerYVelocity\n\n\tLDA JumpFloatLength\n\tSTA JumpFloatTimer\n\nPlayerStartJump_Exit:\n\tLDA #$00\n\tSTA CrouchJumpTimer\n\tRTS\n\n","htmlComment":"<p>Set bit for whether player is holding an item</p>\n","htmlContent":"\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> HoldingItem\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> JumpHeightStanding, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\n\t<span class=\"token opcode property\">LDA</span> JumpFloatLength\n\t<span class=\"token opcode property\">STA</span> JumpFloatTimer\n\nPlayerStartJump_Exit:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> CrouchJumpTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2446},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":2462},{"comment":"\nApply gravity to the player's y-velocity\n\nThis also handles floating\n","content":"PlayerGravity:\n\tLDA QuicksandDepth\n\tCMP #$02\n\tBCC loc_BANK0_8CE5\n\n\tLDA GravityQuicksand\n\tBNE loc_BANK0_8D13\n\nloc_BANK0_8CE5:\n\tLDA GravityWithoutJumpButton\n\tLDY Player1JoypadHeld ; holding jump button to fight physics\n\tBPL PlayerGravity_Falling\n\n\tLDA GravityWithJumpButton\n\tLDY PlayerYVelocity\n\tCPY #$0FC\n\tBMI PlayerGravity_Falling\n\n\tLDY JumpFloatTimer\n\tBEQ PlayerGravity_Falling\n\n\tDEC JumpFloatTimer\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$03\n\tTAY\n\tLDA FloatingYVelocity, Y\n\tSTA PlayerYVelocity\n\tRTS\n\nPlayerGravity_Falling:\n\tLDY PlayerYVelocity\n\tBMI loc_BANK0_8D13\n\n\tCPY #$39\n\tBCS loc_BANK0_8D18\n\nloc_BANK0_8D13:\n\tCLC\n\tADC PlayerYVelocity\n\tSTA PlayerYVelocity\n\nloc_BANK0_8D18:\n\tLDA JumpFloatTimer\n\tCMP JumpFloatLength\n\tBEQ PlayerGravity_Exit\n\n\tLDA #$00\n\tSTA JumpFloatTimer\n\nPlayerGravity_Exit:\n\tRTS\n\n\nFloatingYVelocity:\n\t.db $FC\n\t.db $00\n\t.db $04\n\t.db $00\n\nPlayerXDeceleration:\n\t.db $FD\n\t.db $03\n\n\n","htmlComment":"<p>Apply gravity to the player's y-velocity</p>\n<p>This also handles floating</p>\n","htmlContent":"PlayerGravity:\n\t<span class=\"token opcode property\">LDA</span> QuicksandDepth\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>CE<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> GravityQuicksand\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">13</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>CE<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> GravityWithoutJumpButton\n\t<span class=\"token opcode property\">LDY</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld <span class=\"token comment\">; holding jump button to fight physics</span>\n\t<span class=\"token opcode property\">BPL</span> PlayerGravity_Falling\n\n\t<span class=\"token opcode property\">LDA</span> GravityWithJumpButton\n\t<span class=\"token opcode property\">LDY</span> PlayerYVelocity\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$0FC</span>\n\t<span class=\"token opcode property\">BMI</span> PlayerGravity_Falling\n\n\t<span class=\"token opcode property\">LDY</span> JumpFloatTimer\n\t<span class=\"token opcode property\">BEQ</span> PlayerGravity_Falling\n\n\t<span class=\"token opcode property\">DEC</span> JumpFloatTimer\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> FloatingYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">RTS</span>\n\nPlayerGravity_Falling:\n\t<span class=\"token opcode property\">LDY</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">13</span>\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$39</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">18</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">13</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerYVelocity\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">18</span>:\n\t<span class=\"token opcode property\">LDA</span> JumpFloatTimer\n\t<span class=\"token opcode property\">CMP</span> JumpFloatLength\n\t<span class=\"token opcode property\">BEQ</span> PlayerGravity_Exit\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> JumpFloatTimer\n\nPlayerGravity_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nFloatingYVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nPlayerXDeceleration:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\n\n","line":2468},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8D2C:\n\tLDA PlayerInAir\n\tBNE locret_BANK0_8D61\n\n\tLDA byte_RAM_10\n\tAND GroundSlipperiness\n\tBNE loc_BANK0_8D4D\n\n\tLDA PlayerXVelocity\n\tAND #$80\n\tASL A\n\tROL A\n\tTAY\n\tLDA PlayerXVelocity\n\tADC PlayerXDeceleration, Y\n\tTAX\n\tEOR PlayerControlAcceleration, Y\n\tBMI loc_BANK0_8D4B\n\n\tLDX #$00\n\nloc_BANK0_8D4B:\n\tSTX PlayerXVelocity\n\nloc_BANK0_8D4D:\n\tLDA PlayerDucking\n\tBNE locret_BANK0_8D61\n\n\tLDA PlayerAnimationFrame\n\tCMP #SpriteAnimation_Throwing\n\tBEQ locret_BANK0_8D61\n\n\tLDA #SpriteAnimation_Standing\n\tSTA PlayerAnimationFrame\n\tLDA #$00\n\tSTA PlayerWalkFrameCounter\n\nloc_BANK0_8D5F:\n\tSTA PlayerWalkFrame\n\nlocret_BANK0_8D61:\n\tRTS\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">2</span>C:\n\t<span class=\"token opcode property\">LDA</span> PlayerInAir\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">61</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> GroundSlipperiness\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">4</span>D\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">ADC</span> PlayerXDeceleration, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">EOR</span> PlayerControlAcceleration, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">4</span>B\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">4</span>B:\n\t<span class=\"token opcode property\">STX</span> PlayerXVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">4</span>D:\n\t<span class=\"token opcode property\">LDA</span> PlayerDucking\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">61</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">CMP</span> #SpriteAnimation_Throwing\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">61</span>\n\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Standing\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerWalkFrameCounter\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">5</span>F:\n\t<span class=\"token opcode property\">STA</span> PlayerWalkFrame\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>D<span class=\"token decimalnumber string\">61</span>:\n\t<span class=\"token opcode property\">RTS</span>\n","line":2536},{"comment":"End of function sub_BANK0_8D2C","content":"\n","htmlComment":"<p>End of function sub_BANK0_8D2C</p>\n","htmlContent":"\n","line":2581},{"comment":"---------------------------------------------------------------------------","content":"PlayerWalkFrameDurations:\n\t.db $0C\n\t.db $0A\n\t.db $08\n\t.db $05\n\t.db $03\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $02\n\t.db $02\n\nPlayerWalkFrames:\n\t.db SpriteAnimation_Standing ; $00\n\t.db SpriteAnimation_Walking ; $01\n\t.db SpriteAnimation_Throwing ; ; $02\n","htmlComment":"<hr>\n","htmlContent":"PlayerWalkFrameDurations:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$05</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\nPlayerWalkFrames:\n\t<span class=\"token directive keyword\">.db</span> SpriteAnimation_Standing <span class=\"token comment\">; $00</span>\n\t<span class=\"token directive keyword\">.db</span> SpriteAnimation_Walking <span class=\"token comment\">; $01</span>\n\t<span class=\"token directive keyword\">.db</span> SpriteAnimation_Throwing <span class=\"token comment\">; ; $02</span>\n","line":2583},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":2602},{"comment":"jump animation subroutine","content":"PlayerWalkJumpAnim:\n\tLDA PlayerDucking ; exit if we're ducking, since the player will be ducking\n\tBNE ExitPlayerWalkJumpAnim\n","htmlComment":"<p>jump animation subroutine</p>\n","htmlContent":"PlayerWalkJumpAnim:\n\t<span class=\"token opcode property\">LDA</span> PlayerDucking <span class=\"token comment\">; exit if we're ducking, since the player will be ducking</span>\n\t<span class=\"token opcode property\">BNE</span> ExitPlayerWalkJumpAnim\n","line":2604},{"comment":"if we're not in the air, skip ahead","content":"\tLDA PlayerInAir\n\tBEQ PlayerWalkAnim\n\n\tLDA CurrentCharacter ; does this character get to flutter jump?\n\tCMP #Character_Luigi\n\tBNE ExitPlayerWalkJumpAnim\n\n\tLDA PlayerWalkFrameCounter\n\tBNE UpdatePlayerAnimationFrame ; maintain current frame\n\n\tLDA #$02 ; fast animation\n\tBNE NextPlayerWalkFrame\n\nPlayerWalkAnim:\n\tLDA PlayerWalkFrameCounter\n\tBNE UpdatePlayerAnimationFrame ; maintain current frame\n\n\tLDA #$05\n\tLDY GroundSlipperiness\n\tBNE NextPlayerWalkFrame\n\n\tLDA PlayerXVelocity\n\tBPL PlayerWalkFrameDuration\n","htmlComment":"<p>if we're not in the air, skip ahead</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerInAir\n\t<span class=\"token opcode property\">BEQ</span> PlayerWalkAnim\n\n\t<span class=\"token opcode property\">LDA</span> CurrentCharacter <span class=\"token comment\">; does this character get to flutter jump?</span>\n\t<span class=\"token opcode property\">CMP</span> #Character_Luigi\n\t<span class=\"token opcode property\">BNE</span> ExitPlayerWalkJumpAnim\n\n\t<span class=\"token opcode property\">LDA</span> PlayerWalkFrameCounter\n\t<span class=\"token opcode property\">BNE</span> UpdatePlayerAnimationFrame <span class=\"token comment\">; maintain current frame</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span> <span class=\"token comment\">; fast animation</span>\n\t<span class=\"token opcode property\">BNE</span> NextPlayerWalkFrame\n\nPlayerWalkAnim:\n\t<span class=\"token opcode property\">LDA</span> PlayerWalkFrameCounter\n\t<span class=\"token opcode property\">BNE</span> UpdatePlayerAnimationFrame <span class=\"token comment\">; maintain current frame</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">LDY</span> GroundSlipperiness\n\t<span class=\"token opcode property\">BNE</span> NextPlayerWalkFrame\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">BPL</span> PlayerWalkFrameDuration\n","line":2609},{"comment":"use absolute value of PlayerXVelocity","content":"\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nPlayerWalkFrameDuration:\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n\tLDA PlayerWalkFrameDurations, Y\n\nNextPlayerWalkFrame:\n\tSTA PlayerWalkFrameCounter ; hold frame for duration specified in accumulator\n\tDEC PlayerWalkFrame\n\tBPL UpdatePlayerAnimationFrame\n\n\tLDA #$01 ; next walk frame\n\tSTA PlayerWalkFrame\n\nUpdatePlayerAnimationFrame:\n\tLDY PlayerWalkFrame\n\tLDA PlayerWalkFrames, Y\n\tSTA PlayerAnimationFrame\n\nExitPlayerWalkJumpAnim:\n\tRTS\n\n\nThrowXVelocity:\n\t.db $00 ; standing, left (blocks)\n\t.db $00 ; standing, right (blocks)\n\t.db $D0 ; moving, left (blocks)\n\t.db $30 ; moving, right (blocks)\n\t.db $D0 ; standing, left (projectiles)\n\t.db $30 ; standing, right (projectiles)\n\t.db $D0 ; moving, left (projectiles)\n\t.db $30 ; moving, right (projectiles)\n\nThrowYVelocity:\n\t.db $18 ; standing (blocks)\n\t.db $00 ; moving (blocks)\n\t.db $18 ; standing (projectiles)\n\t.db $F8 ; moving (projectiles)\n","htmlComment":"<p>use absolute value of PlayerXVelocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\nPlayerWalkFrameDuration:\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerWalkFrameDurations, <span class=\"token register variable\">Y</span>\n\nNextPlayerWalkFrame:\n\t<span class=\"token opcode property\">STA</span> PlayerWalkFrameCounter <span class=\"token comment\">; hold frame for duration specified in accumulator</span>\n\t<span class=\"token opcode property\">DEC</span> PlayerWalkFrame\n\t<span class=\"token opcode property\">BPL</span> UpdatePlayerAnimationFrame\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span> <span class=\"token comment\">; next walk frame</span>\n\t<span class=\"token opcode property\">STA</span> PlayerWalkFrame\n\nUpdatePlayerAnimationFrame:\n\t<span class=\"token opcode property\">LDY</span> PlayerWalkFrame\n\t<span class=\"token opcode property\">LDA</span> PlayerWalkFrames, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\nExitPlayerWalkJumpAnim:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nThrowXVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; standing, left (blocks)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; standing, right (blocks)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span> <span class=\"token comment\">; moving, left (blocks)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span> <span class=\"token comment\">; moving, right (blocks)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span> <span class=\"token comment\">; standing, left (projectiles)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span> <span class=\"token comment\">; standing, right (projectiles)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span> <span class=\"token comment\">; moving, left (projectiles)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span> <span class=\"token comment\">; moving, right (projectiles)</span>\n\nThrowYVelocity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span> <span class=\"token comment\">; standing (blocks)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; moving (blocks)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span> <span class=\"token comment\">; standing (projectiles)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span> <span class=\"token comment\">; moving (projectiles)</span>\n","line":2634},{"comment":"used for objects that can be thrown next to the player","content":"SoftThrowOffset:\n\t.db $F0\n\t.db $10\n\n\n","htmlComment":"<p>used for objects that can be thrown next to the player</p>\n","htmlContent":"SoftThrowOffset:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\n\n","line":2679},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_8DC0:\n\tLDY #$02\n\tLDA QuicksandDepth\n\tCMP #$02\n\tBCS loc_BANK0_8DE0\n\n\tDEY\n\tLDA HoldingItem\n\tBEQ loc_BANK0_8DDF\n\n\tLDX ObjectBeingCarriedIndex\n\tLDA ObjectType, X\n\tCMP #Enemy_VegetableSmall\n\tBCC loc_BANK0_8DE0\n\n\tCMP #Enemy_MushroomBlock\n\tBCC loc_BANK0_8DDF\n\n\tCMP #Enemy_FallingLogs\n\tBCC loc_BANK0_8DE0\n\nloc_BANK0_8DDF:\n\tDEY\n\nloc_BANK0_8DE0:\n\tLDA RunSpeedRight, Y\n\tBIT Player1JoypadHeld\n\tBVC loc_BANK0_8DEC\n\n\tLSR A\n\tCLC\n\tADC RunSpeedRight, Y\n\nloc_BANK0_8DEC:\n\tCMP PlayerXVelocity\n\tBPL loc_BANK0_8DF2\n\n\tSTA PlayerXVelocity\n\nloc_BANK0_8DF2:\n\tLDA RunSpeedLeft, Y\n\tBIT Player1JoypadHeld\n\tBVC loc_BANK0_8DFF\n\n\tSEC\n\tROR A\n\tCLC\n\tADC RunSpeedLeft, Y\n\nloc_BANK0_8DFF:\n\tCMP PlayerXVelocity\n\tBMI loc_BANK0_8E05\n\n\tSTA PlayerXVelocity\n\nloc_BANK0_8E05:\n\tBIT Player1JoypadPress\n\tBVC locret_BANK0_8E41\n\n\tLDA HoldingItem\n\tBEQ locret_BANK0_8E41\n\n\tLDY #$00\n\tLDX ObjectBeingCarriedIndex\n\tLDA EnemyState, X\n\tCMP #EnemyState_Sand\n\tBEQ locret_BANK0_8E41\n\n\tLDA ObjectType, X\n\tCMP #Enemy_MushroomBlock\n\tBCC loc_BANK0_8E22\n\n\tCMP #Enemy_POWBlock\n\tBCC loc_BANK0_8E28\n\nloc_BANK0_8E22:\n\tCMP #Enemy_Bomb\n\tBCC loc_BANK0_8E42\n\n\tLDY #$02\n\nloc_BANK0_8E28:\n\tSTY byte_RAM_7\n\tLDA PlayerDirection\n\tASL A\n\tORA PlayerDucking\n\tTAX\n\tLDY byte_BANKF_F006, X\n\tLDX #$00\n\tJSR sub_BANK0_924F\n\n\tLDA byte_RAM_0\n\tLDY byte_RAM_7\n\tJSR CheckTileUsesCollisionType\n\n\tBCC loc_BANK0_8E42\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DC<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> QuicksandDepth\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DE<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DDF\n\n\t<span class=\"token opcode property\">LDX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DE<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_MushroomBlock\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DDF\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_FallingLogs\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DE<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DDF:\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DE<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> RunSpeedRight, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BIT</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">BVC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DEC\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> RunSpeedRight, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DEC:\n\t<span class=\"token opcode property\">CMP</span> PlayerXVelocity\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DF<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DF<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> RunSpeedLeft, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BIT</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">BVC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DFF\n\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">ROR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> RunSpeedLeft, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>DFF:\n\t<span class=\"token opcode property\">CMP</span> PlayerXVelocity\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">05</span>\n\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">05</span>:\n\t<span class=\"token opcode property\">BIT</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">BVC</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">41</span>\n\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">41</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #EnemyState_Sand\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">41</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_MushroomBlock\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">22</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_POWBlock\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">28</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">22</span>:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bomb\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">42</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">28</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerDirection\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> PlayerDucking\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDY</span> byte_BANKF_F<span class=\"token decimalnumber string\">006</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">924</span>F\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">JSR</span> CheckTileUsesCollisionType\n\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">42</span>\n","line":2685},{"comment":"else carried item can't be thrown","content":"locret_BANK0_8E41:\n\tRTS\n\n","htmlComment":"<p>else carried item can't be thrown</p>\n","htmlContent":"locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">41</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2783},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_8E42:\n\tLDA #SpriteAnimation_Throwing\n\tSTA PlayerAnimationFrame\n\tLDA #$02\n\tSTA PlayerWalkFrame\n\tLDA #$0A\n\tSTA PlayerWalkFrameCounter\n\tDEC HoldingItem\n\tLDA #SoundEffect1_ThrowItem\n\tSTA SoundEffectQueue1\n\tLDA #$00\n\tSTA PlayerDucking\n\tSTA Player1JoypadPress\n\tSTA byte_RAM_1\n\tLDX ObjectBeingCarriedIndex\n\tLDA #Enemy_Coin\n\tCMP ObjectType, X\n\tROL byte_RAM_1\n\tLDA PlayerXVelocity\n\tBPL loc_BANK0_8E6F\n\n\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nloc_BANK0_8E6F:\n\tCMP #$08\n\tROL byte_RAM_1\n\tBNE loc_BANK0_8E89\n\n\tLDY PlayerDirection\n\tLDA SoftThrowOffset, Y\n\tCLC\n\tADC ObjectXLo, X\n\tSTA ObjectXLo, X\n\tLDA IsHorizontalLevel\n\tBEQ loc_BANK0_8E89\n\n\tDEY\n\tTYA\n\tADC ObjectXHi, X\n\nloc_BANK0_8E87:\n\tSTA ObjectXHi, X\n\nloc_BANK0_8E89:\n\tLDY byte_RAM_1\n\tLDA ThrowYVelocity, Y\n\tSTA ObjectYVelocity, X\n\tLDA byte_RAM_1\n\tASL A\n\tORA PlayerDirection\n\tTAY\n\tLDA ThrowXVelocity, Y\n\tSTA ObjectXVelocity, X\n\tLDA #$01\n\tSTA EnemyArray_42F, X\n\tLSR A\n\tSTA ObjectBeingCarriedTimer, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">42</span>:\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Throwing\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> PlayerWalkFrame\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerWalkFrameCounter\n\t<span class=\"token opcode property\">DEC</span> HoldingItem\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_ThrowItem\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDucking\n\t<span class=\"token opcode property\">STA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Coin\n\t<span class=\"token opcode property\">CMP</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ROL</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">6</span>F\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">6</span>F:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">ROL</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">89</span>\n\n\t<span class=\"token opcode property\">LDY</span> PlayerDirection\n\t<span class=\"token opcode property\">LDA</span> SoftThrowOffset, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">89</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">87</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>E<span class=\"token decimalnumber string\">89</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ThrowYVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> PlayerDirection\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ThrowXVelocity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2788},{"comment":"\nApplies player physics on the y-axis\n","content":"ApplyPlayerPhysicsY:\n\tLDX #$0A\n","htmlComment":"<p>Applies player physics on the y-axis</p>\n","htmlContent":"ApplyPlayerPhysicsY:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$0A</span>\n","line":2854},{"comment":"\nApplies player physics, although could theoretically be used for objects too\n\nInput\nX = direction ($00 for horizontal, $0A for vertical)\n","content":"ApplyPlayerPhysics:","htmlComment":"<p>Applies player physics, although could theoretically be used for objects too</p>\n<p>Input\nX = direction ($00 for horizontal, $0A for vertical)</p>\n","htmlContent":"ApplyPlayerPhysics:","line":2863},{"comment":"Add acceleration to velocity","content":"\tLDA PlayerXVelocity, X\n\tCLC\n\tADC PlayerXAcceleration, X\n\tPHP\n\tBPL loc_BANK0_8EB4\n\n\tEOR #$FF\n\tCLC\n\tADC #$01\n\nloc_BANK0_8EB4:\n\tPHA","htmlComment":"<p>Add acceleration to velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerXAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>EB<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>EB<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">PHA</span>","line":2865},{"comment":"Upper nybble of velocity is for lo position","content":"\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tTAY\n","htmlComment":"<p>Upper nybble of velocity is for lo position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n","line":2878},{"comment":"Lower nybble of velocity is for subpixel position","content":"\tPLA\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCLC\n\n\tADC PlayerXSubpixel, X\n\tSTA PlayerXSubpixel, X\n\n\tTYA\n\tADC #$00\n\tPLP\n\tBPL loc_BANK0_8ED1\n\n\tEOR #$0FF\n\tCLC\n\tADC #$01\n\nloc_BANK0_8ED1:\n\tLDY #$00\n\tCMP #$00\n\tBPL loc_BANK0_8ED8\n\n\tDEY\n\nloc_BANK0_8ED8:\n\tCLC\n\tADC PlayerXLo, X\n\tSTA PlayerXLo, X\n\tTYA\n\tADC PlayerXHi, X\n\tSTA PlayerXHi, X\n\tLDA #$00\n\tSTA PlayerXAcceleration, X\n\tRTS\n\n","htmlComment":"<p>Lower nybble of velocity is for subpixel position</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CLC</span>\n\n\t<span class=\"token opcode property\">ADC</span> PlayerXSubpixel, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXSubpixel, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ED<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ED<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ED<span class=\"token decimalnumber string\">8</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>ED<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":2885},{"comment":"\nJumpthrough collision results\n\nThis table determines per direction whether a tile is solid (for jumpthrough\nblocks) or interactive (for spikes/ice/conveyors)\n\n$01 = true\n$02 = false\n","content":"JumpthroughTileCollisionTable:\nInteractiveTileCollisionTable:\n\t.db $02 ; jumpthrough bottom (y-velocity < 0)\n\t.db $02\n\t.db $01 ; jumpthrough top (y-velocity > 0)\n\t.db $01\n\t.db $02 ; jumpthrough right (x-velocity < 0)\n\t.db $02\n\t.db $02 ; jumpthrough left (x-velocity > 0)\n\t.db $02\n\nIFDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckPlayerTileCollisionAttributesTable:\n\t.db %00001000 ; jumpthrough bottom (y-velocity < 0)\n\t.db %00001000\n\t.db %00000100 ; jumpthrough top (y-velocity > 0)\n\t.db %00000100\n\t.db %00000010 ; jumpthrough right (x-velocity < 0)\n\t.db %00000010\n\t.db %00000001 ; jumpthrough left (x-velocity > 0)\n\t.db %00000001\nENDIF\n","htmlComment":"<p>Jumpthrough collision results</p>\n<p>This table determines per direction whether a tile is solid (for jumpthrough\nblocks) or interactive (for spikes/ice/conveyors)</p>\n<p>$01 = true\n$02 = false</p>\n","htmlContent":"JumpthroughTileCollisionTable:\nInteractiveTileCollisionTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; jumpthrough bottom (y-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; jumpthrough top (y-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; jumpthrough right (x-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; jumpthrough left (x-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span>\n\nIFDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckPlayerTileCollisionAttributesTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00001000</span> <span class=\"token comment\">; jumpthrough bottom (y-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00001000</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000100</span> <span class=\"token comment\">; jumpthrough top (y-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000100</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000010</span> <span class=\"token comment\">; jumpthrough right (x-velocity &#x3C; 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000001</span> <span class=\"token comment\">; jumpthrough left (x-velocity > 0)</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000001</span>\nENDIF\n","line":2932},{"comment":"\nCollision flags that should be set if a given collision check passes\n","content":"EnableCollisionFlagTable:\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Up\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Down\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Left\n\t.db CollisionFlags_Right\n\t.db CollisionFlags_Right\n\nConveyorSpeedTable:\n\t.db $F0\n\t.db $10\n\n","htmlComment":"<p>Collision flags that should be set if a given collision check passes</p>\n","htmlContent":"EnableCollisionFlagTable:\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Up\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Up\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Down\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Down\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Left\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Left\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Right\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Right\n\nConveyorSpeedTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\n","line":2958},{"comment":"\nPlayer Tile Collision\n=====================\n\nHandles player collision with background tiles\n","content":"PlayerTileCollision:","htmlComment":"<h1>Player Tile Collision</h1>\n<p>Handles player collision with background tiles</p>\n","htmlContent":"PlayerTileCollision:","line":2979},{"comment":"Reset a bunch of collision flags","content":"\tLDA #$00\n\tSTA PlayerCollision\n\tSTA GroundSlipperiness\n\tSTA byte_RAM_7\n\tSTA byte_RAM_A ; conveyor\n\tSTA byte_RAM_E ; spikes\n\tSTA byte_RAM_C ; ice\n\n\tJSR PlayerTileCollision_CheckCherryAndClimbable\n","htmlComment":"<p>Reset a bunch of collision flags</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerCollision\n\t<span class=\"token opcode property\">STA</span> GroundSlipperiness\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_A <span class=\"token comment\">; conveyor</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E <span class=\"token comment\">; spikes</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C <span class=\"token comment\">; ice</span>\n\n\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision_CheckCherryAndClimbable\n","line":2981},{"comment":"Determine bounding box lookup index","content":"\tLDA PlayerDucking\n\tASL A\n\tORA HoldingItem\n\tTAX\n","htmlComment":"<p>Determine bounding box lookup index</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerDucking\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> HoldingItem\n\t<span class=\"token opcode property\">TAX</span>\n","line":2992},{"comment":"Look up the bounding box for collision detection","content":"\tLDA byte_BANKF_F000, X\n\tSTA byte_RAM_8\n","htmlComment":"<p>Look up the bounding box for collision detection</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> byte_BANKF_F<span class=\"token decimalnumber string\">000</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n","line":2998},{"comment":"Determine whether the player is going up","content":"\tLDA PlayerYVelocity\n\tCLC\n\tADC PlayerYAcceleration\n\tBPL PlayerTileCollision_Downward\n\nPlayerTileCollision_Upward:\n\tJSR CheckPlayerTileCollision_Twice ; use top two tiles\n\tJSR CheckPlayerTileCollision_IncrementTwice ; skip bottom two tiles\n\n\tLDA PlayerCollision\n\tBNE PlayerTileCollision_CheckDamageTile\n\tBEQ PlayerTileCollision_Horizontal\n\nPlayerTileCollision_Downward:\n\tJSR CheckPlayerTileCollision_IncrementTwice ; skip top two tiles\n\tJSR CheckPlayerTileCollision_Twice ; use bottom two tiles\n\n\tLDA PlayerCollision\n\tBNE PlayerTileCollision_CheckInteractiveTiles\n\n\tLDA #$00\n\tLDX #$01\n","htmlComment":"<p>Determine whether the player is going up</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerYAcceleration\n\t<span class=\"token opcode property\">BPL</span> PlayerTileCollision_Downward\n\nPlayerTileCollision_Upward:\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_Twice <span class=\"token comment\">; use top two tiles</span>\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_IncrementTwice <span class=\"token comment\">; skip bottom two tiles</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerCollision\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_CheckDamageTile\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_Horizontal\n\nPlayerTileCollision_Downward:\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_IncrementTwice <span class=\"token comment\">; skip top two tiles</span>\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_Twice <span class=\"token comment\">; use bottom two tiles</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerCollision\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_CheckInteractiveTiles\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$01</span>\n","line":3002},{"comment":"Do the quicksand check in worlds 2 and 6","content":"\tLDY CurrentWorldTileset\n\tCPY #$01\n\tBEQ PlayerTileCollision_Downward_CheckQuicksand\n\n\tCPY #$05\nIFNDEF ALWAYS_ALLOW_QUICKSAND\n\tBNE PlayerTileCollision_Downward_AfterCheckQuicksand\nELSE\n\tNOP\n\tNOP\nENDIF\n\nPlayerTileCollision_Downward_CheckQuicksand:\n\tJSR PlayerTileCollision_CheckQuicksand\n\nPlayerTileCollision_Downward_AfterCheckQuicksand:\n\tSTA QuicksandDepth\n\tSTX PlayerInAir\n\tJMP PlayerTileCollision_Horizontal\n\nPlayerTileCollision_CheckInteractiveTiles:","htmlComment":"<p>Do the quicksand check in worlds 2 and 6</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> CurrentWorldTileset\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_Downward_CheckQuicksand\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$05</span>\nIFNDEF ALWAYS_ALLOW_QUICKSAND\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_Downward_AfterCheckQuicksand\nELSE\n\t<span class=\"token opcode property\">NOP</span>\n\t<span class=\"token opcode property\">NOP</span>\nENDIF\n\nPlayerTileCollision_Downward_CheckQuicksand:\n\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision_CheckQuicksand\n\nPlayerTileCollision_Downward_AfterCheckQuicksand:\n\t<span class=\"token opcode property\">STA</span> QuicksandDepth\n\t<span class=\"token opcode property\">STX</span> PlayerInAir\n\t<span class=\"token opcode property\">JMP</span> PlayerTileCollision_Horizontal\n\nPlayerTileCollision_CheckInteractiveTiles:","line":3026},{"comment":"Reset quicksand depth","content":"\tLDA #$00\n\tSTA QuicksandDepth\n\n\tLDA PlayerYLo\n\tAND #$0C\n\tBNE PlayerTileCollision_Horizontal\n\n\tSTA PlayerInAir\n\tLDA PlayerYLo\n\tAND #$F0\n\tSTA PlayerYLo\n\nPlayerTileCollision_CheckConveyorTile:\n\tLSR byte_RAM_A\n\tBCC PlayerTileCollision_CheckSlipperyTile\n\n\tLDX byte_RAM_A\n\tLDA ConveyorSpeedTable, X\n\tSTA PlayerXAcceleration\n\nPlayerTileCollision_CheckSlipperyTile:\n\tLSR byte_RAM_C\n\tBCC PlayerTileCollision_CheckJar\n\n\tLDA #$0F\n\tSTA GroundSlipperiness\n\nPlayerTileCollision_CheckJar:\n\tJSR TileBehavior_CheckJar\n\nPlayerTileCollision_CheckDamageTile:\n\tLDA #$00\n\tSTA PlayerYVelocity\n\tSTA PlayerYAcceleration\n\tLDA StarInvincibilityTimer\n\tBNE PlayerTileCollision_Horizontal\n\n\tLSR byte_RAM_E\n\tBCC PlayerTileCollision_Horizontal\n\n\tLDA PlayerScreenX\n\tSTA SpriteTempScreenX\n\tROR byte_RAM_12\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\tJSR PlayerTileCollision_HurtPlayer\nELSE\n\tLDA byte_RAM_E\n\tCMP #$02\n\tBCC PlayerTileCollision_DamageTile\n\tBNE PlayerTileCollision_HealthTile\n","htmlComment":"<p>Reset quicksand depth</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> QuicksandDepth\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_Horizontal\n\n\t<span class=\"token opcode property\">STA</span> PlayerInAir\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\nPlayerTileCollision_CheckConveyorTile:\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_A\n\t<span class=\"token opcode property\">BCC</span> PlayerTileCollision_CheckSlipperyTile\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_A\n\t<span class=\"token opcode property\">LDA</span> ConveyorSpeedTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXAcceleration\n\nPlayerTileCollision_CheckSlipperyTile:\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_C\n\t<span class=\"token opcode property\">BCC</span> PlayerTileCollision_CheckJar\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> GroundSlipperiness\n\nPlayerTileCollision_CheckJar:\n\t<span class=\"token opcode property\">JSR</span> TileBehavior_CheckJar\n\nPlayerTileCollision_CheckDamageTile:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">STA</span> PlayerYAcceleration\n\t<span class=\"token opcode property\">LDA</span> StarInvincibilityTimer\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_Horizontal\n\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_E\n\t<span class=\"token opcode property\">BCC</span> PlayerTileCollision_Horizontal\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenX\n\t<span class=\"token opcode property\">STA</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ROR</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\n\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision_HurtPlayer\nELSE\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCC</span> PlayerTileCollision_DamageTile\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_HealthTile\n","line":3048},{"comment":"instant kill","content":"\tLDY #$0F\n\tSTY PlayerHealth\n\nPlayerTileCollision_DamageTile:\n\tJSR PlayerTileCollision_HurtPlayer\n\tJMP PlayerTileCollision_Horizontal\n\nPlayerTileCollision_HealthTile:\n\tJSR RestorePlayerToFullHealth\nENDIF\n\nPlayerTileCollision_Horizontal:\n\tLDY #$02\n\tLDA PlayerXVelocity\n\tCLC\n\tADC PlayerXAcceleration\n\tBMI loc_BANK0_8FA3\n\n\tDEY\n\tJSR CheckPlayerTileCollision_IncrementTwice\n\nloc_BANK0_8FA3:\n\tSTY PlayerMovementDirection\n\tJSR CheckPlayerTileCollision_Twice\n\n\tLDA PlayerCollision\n\tAND #CollisionFlags_Right | CollisionFlags_Left\n\tBEQ PlayerTileCollision_Exit\n\n\tJMP PlayerHorizontalCollision_Bank0\n\nPlayerTileCollision_Exit:\n\tRTS\n\n","htmlComment":"<p>instant kill</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STY</span> PlayerHealth\n\nPlayerTileCollision_DamageTile:\n\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision_HurtPlayer\n\t<span class=\"token opcode property\">JMP</span> PlayerTileCollision_Horizontal\n\nPlayerTileCollision_HealthTile:\n\t<span class=\"token opcode property\">JSR</span> RestorePlayerToFullHealth\nENDIF\n\nPlayerTileCollision_Horizontal:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerXAcceleration\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>FA<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_IncrementTwice\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">8</span>FA<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">STY</span> PlayerMovementDirection\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_Twice\n\n\t<span class=\"token opcode property\">LDA</span> PlayerCollision\n\t<span class=\"token opcode property\">AND</span> #CollisionFlags_Right | CollisionFlags_Left\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_Exit\n\n\t<span class=\"token opcode property\">JMP</span> PlayerHorizontalCollision_Bank<span class=\"token decimalnumber string\">0</span>\n\nPlayerTileCollision_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3101},{"comment":"\nCheck collision attributes for the next two tiles\n\nInput\nbyte_RAM_7: collision direction\nbyte_RAM_8: bounding box offset\n\nOutput\nbyte_RAM_7 += 2\nbyte_RAM_8 += 2\n","content":"CheckPlayerTileCollision_Twice:\n\tJSR CheckPlayerTileCollision\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckPlayerTileCollision:\n\tLDX #$00\n\tLDY byte_RAM_8\n\tJSR sub_BANK0_924F\n\n\tLDX byte_RAM_7\n\tLDY JumpthroughTileCollisionTable, X\n\tLDA byte_RAM_0\n\n\tJSR CheckTileUsesCollisionType\n\n\tBCC CheckPlayerTileCollision_Exit\n\nCheckPlayerTileCollision_CheckSpikes:\n\tCMP #BackgroundTile_Spikes\n\tBNE CheckPlayerTileCollision_CheckIce\n\n\tLDA InteractiveTileCollisionTable, X\n\tSTA byte_RAM_E\n\tBNE CheckPlayerTileCollision_UpdatePlayerCollision\n\nCheckPlayerTileCollision_CheckIce:\n\tCMP #BackgroundTile_JumpThroughIce\n\tBNE CheckPlayerTileCollision_CheckConveyor\n\n\tLDA InteractiveTileCollisionTable, X\n\tSTA byte_RAM_C\n\tBNE CheckPlayerTileCollision_UpdatePlayerCollision\n\nCheckPlayerTileCollision_CheckConveyor:\n\tSEC\n\tSBC #BackgroundTile_ConveyorLeft\n\tCMP #$02\n\tBCS CheckPlayerTileCollision_UpdatePlayerCollision\n\n\tASL A\n\tORA InteractiveTileCollisionTable, X\n\tSTA byte_RAM_A\n\nCheckPlayerTileCollision_UpdatePlayerCollision:\n\tLDA EnableCollisionFlagTable, X\n\tORA PlayerCollision\n\tSTA PlayerCollision\n\nCheckPlayerTileCollision_Exit:\n\tJMP CheckPlayerTileCollision_Increment\n\nELSE","htmlComment":"<p>Check collision attributes for the next two tiles</p>\n<p>Input\nbyte_RAM_7: collision direction\nbyte_RAM_8: bounding box offset</p>\n<p>Output\nbyte_RAM_7 += 2\nbyte_RAM_8 += 2</p>\n","htmlContent":"CheckPlayerTileCollision_Twice:\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nCheckPlayerTileCollision:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">924</span>F\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDY</span> JumpthroughTileCollisionTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">JSR</span> CheckTileUsesCollisionType\n\n\t<span class=\"token opcode property\">BCC</span> CheckPlayerTileCollision_Exit\n\nCheckPlayerTileCollision_CheckSpikes:\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_Spikes\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_CheckIce\n\n\t<span class=\"token opcode property\">LDA</span> InteractiveTileCollisionTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_UpdatePlayerCollision\n\nCheckPlayerTileCollision_CheckIce:\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_JumpThroughIce\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_CheckConveyor\n\n\t<span class=\"token opcode property\">LDA</span> InteractiveTileCollisionTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_UpdatePlayerCollision\n\nCheckPlayerTileCollision_CheckConveyor:\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #BackgroundTile_ConveyorLeft\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> CheckPlayerTileCollision_UpdatePlayerCollision\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> InteractiveTileCollisionTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_A\n\nCheckPlayerTileCollision_UpdatePlayerCollision:\n\t<span class=\"token opcode property\">LDA</span> EnableCollisionFlagTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> PlayerCollision\n\t<span class=\"token opcode property\">STA</span> PlayerCollision\n\nCheckPlayerTileCollision_Exit:\n\t<span class=\"token opcode property\">JMP</span> CheckPlayerTileCollision_Increment\n\nELSE","line":3147},{"comment":"custom behavior using tile attribute table","content":"CheckPlayerTileCollision:\n\tLDX #$00\n\tLDY byte_RAM_8\n\tJSR sub_BANK0_924F\n\n\tLDX byte_RAM_7\n\tLDY byte_RAM_0\n","htmlComment":"<p>custom behavior using tile attribute table</p>\n","htmlContent":"CheckPlayerTileCollision:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">924</span>F\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n","line":3200},{"comment":"check tile attributes","content":"\tLDA TileCollisionAttributesTable, Y\n\tAND CheckPlayerTileCollisionAttributesTable, X\n\n\tBEQ CheckPlayerTileCollision_CheckSpikes\n\n\tLDA EnableCollisionFlagTable, X\n\tORA PlayerCollision\n\tSTA PlayerCollision\n\nCheckPlayerTileCollision_CheckSpikes:\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00000011\n\tBEQ CheckPlayerTileCollision_CheckIce\n\n\tASL A\n\tORA #%00000001\n\tSTA byte_RAM_E\n\nCheckPlayerTileCollision_CheckIce:\n\tLDA TileInteractionAttributesTable, Y\n\tAND #%00001100\n\tBEQ CheckPlayerTileCollision_CheckConveyor\n\tCMP #%00000100\n\tBNE CheckPlayerTileCollision_CheckConveyor\n\n\tLDA #$01\n\tSTA byte_RAM_C\n\tBNE CheckPlayerTileCollision_Exit\n\nCheckPlayerTileCollision_CheckConveyor:\n\tCMP #%00001100\n\tBNE CheckPlayerTileCollision_Exit\n\n\tTYA\n\tAND #%00000001\n\tASL A\n\tORA #%00000001\n\tSTA byte_RAM_A\n\nCheckPlayerTileCollision_Exit:\n\tJMP CheckPlayerTileCollision_Increment\nENDIF\n\n","htmlComment":"<p>check tile attributes</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> TileCollisionAttributesTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> CheckPlayerTileCollisionAttributesTable, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayerTileCollision_CheckSpikes\n\n\t<span class=\"token opcode property\">LDA</span> EnableCollisionFlagTable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ORA</span> PlayerCollision\n\t<span class=\"token opcode property\">STA</span> PlayerCollision\n\nCheckPlayerTileCollision_CheckSpikes:\n\t<span class=\"token opcode property\">LDA</span> TileInteractionAttributesTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00000011</span>\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayerTileCollision_CheckIce\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token binarynumber string\">#%00000001</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E\n\nCheckPlayerTileCollision_CheckIce:\n\t<span class=\"token opcode property\">LDA</span> TileInteractionAttributesTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00001100</span>\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayerTileCollision_CheckConveyor\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token binarynumber string\">#%00000100</span>\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_CheckConveyor\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_C\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_Exit\n\nCheckPlayerTileCollision_CheckConveyor:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token binarynumber string\">#%00001100</span>\n\t<span class=\"token opcode property\">BNE</span> CheckPlayerTileCollision_Exit\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00000001</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token binarynumber string\">#%00000001</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_A\n\nCheckPlayerTileCollision_Exit:\n\t<span class=\"token opcode property\">JMP</span> CheckPlayerTileCollision_Increment\nENDIF\n\n","line":3209},{"comment":"\nSkip two tiles\n\nOutput\nbyte_RAM_7 += 2\nbyte_RAM_8 += 2\n","content":"CheckPlayerTileCollision_IncrementTwice:\n\tJSR CheckPlayerTileCollision_Increment\n\nCheckPlayerTileCollision_Increment:\n\tINC byte_RAM_7\n\tINC byte_RAM_8\n\tRTS\n\n\nPlayerTileCollision_CheckCherryAndClimbable:\n\tLDY byte_BANKF_F00A\n","htmlComment":"<p>Skip two tiles</p>\n<p>Output\nbyte_RAM_7 += 2\nbyte_RAM_8 += 2</p>\n","htmlContent":"CheckPlayerTileCollision_IncrementTwice:\n\t<span class=\"token opcode property\">JSR</span> CheckPlayerTileCollision_Increment\n\nCheckPlayerTileCollision_Increment:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPlayerTileCollision_CheckCherryAndClimbable:\n\t<span class=\"token opcode property\">LDY</span> byte_BANKF_F<span class=\"token decimalnumber string\">00</span><span class=\"token register variable\">A</span>\n","line":3260},{"comment":"byte_RAM_10 seems to be a global counter\nthis code increments Y every other frame, but why?","content":"\tLDA byte_RAM_10\n\tLSR A\n\tBCS PlayerTileCollision_CheckCherryAndClimbable_AfterTick\n\tINY\n\nPlayerTileCollision_CheckCherryAndClimbable_AfterTick:\n\tLDX #$00\n\tJSR PlayerTileCollision_CheckClimbable\n\n\tBCS PlayerTileCollision_Climbable\n\n\tLDA byte_RAM_0\n\tCMP #BackgroundTile_Cherry\n\tBNE PlayerTileCollision_Climbable_Exit\n\n\tINC CherryCount\n\tLDA CherryCount\n\tSBC #$05\n\tBNE PlayerTileCollision_Cherry\n\n\tSTA CherryCount\n\tJSR CreateStarman\n\nPlayerTileCollision_Cherry:\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\tLDA #BackgroundTile_Sky\n\tJMP loc_BANK0_937C\n\nPlayerTileCollision_Climbable:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Down | ControllerInput_Up\n\tBEQ PlayerTileCollision_Climbable_Exit\n\n\tLDY HoldingItem\n\tBNE PlayerTileCollision_Climbable_Exit\n\n\tLDA PlayerXLo\n\tCLC\n\tADC #$04\n\tAND #$0F\n\tCMP #$08\n\tBCS PlayerTileCollision_Climbable_Exit\n\n\tLDA #PlayerState_Climbing\n\tSTA PlayerState\n\tSTY PlayerInAir\n\tSTY PlayerDucking\n\tLDA #SpriteAnimation_Climbing\n\tSTA PlayerAnimationFrame\n","htmlComment":"<p>byte_RAM_10 seems to be a global counter\nthis code increments Y every other frame, but why?</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCS</span> PlayerTileCollision_CheckCherryAndClimbable_AfterTick\n\t<span class=\"token opcode property\">INY</span>\n\nPlayerTileCollision_CheckCherryAndClimbable_AfterTick:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">JSR</span> PlayerTileCollision_CheckClimbable\n\n\t<span class=\"token opcode property\">BCS</span> PlayerTileCollision_Climbable\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_Cherry\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_Climbable_Exit\n\n\t<span class=\"token opcode property\">INC</span> CherryCount\n\t<span class=\"token opcode property\">LDA</span> CherryCount\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_Cherry\n\n\t<span class=\"token opcode property\">STA</span> CherryCount\n\t<span class=\"token opcode property\">JSR</span> CreateStarman\n\nPlayerTileCollision_Cherry:\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_CherryGet\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> #BackgroundTile_Sky\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">937</span>C\n\nPlayerTileCollision_Climbable:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Down | ControllerInput_Up\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_Climbable_Exit\n\n\t<span class=\"token opcode property\">LDY</span> HoldingItem\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_Climbable_Exit\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCS</span> PlayerTileCollision_Climbable_Exit\n\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_Climbing\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">STY</span> PlayerInAir\n\t<span class=\"token opcode property\">STY</span> PlayerDucking\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Climbing\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n","line":3274},{"comment":"Break JSR PlayerTileCollision_CheckCherryAndClimbable","content":"\tPLA\n\tPLA","htmlComment":"<p>Break JSR PlayerTileCollision_CheckCherryAndClimbable</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>","line":3326},{"comment":"Break JSR PlayerTileCollision","content":"\tPLA\n\tPLA\n\nPlayerTileCollision_Climbable_Exit:\n\tRTS\n\n","htmlComment":"<p>Break JSR PlayerTileCollision</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PLA</span>\n\nPlayerTileCollision_Climbable_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3329},{"comment":"\nCheck whether a tile should use the given collision handler type\n\nInput\nA = tile ID\nY = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)\nOutput\nC = whether or not collision type Y is relevant\n","content":"CheckTileUsesCollisionType:\n\tPHA ; stash tile ID for later\n","htmlComment":"<p>Check whether a tile should use the given collision handler type</p>\n<p>Input\nA = tile ID\nY = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)\nOutput\nC = whether or not collision type Y is relevant</p>\n","htmlContent":"CheckTileUsesCollisionType:\n\t<span class=\"token opcode property\">PHA</span> <span class=\"token comment\">; stash tile ID for later</span>\n","line":3345},{"comment":"determine which tile table to use (0-3)","content":"\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n","htmlComment":"<p>determine which tile table to use (0-3)</p>\n","htmlContent":"\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n","line":3349},{"comment":"add the offset for the type of collision we're checking","content":"\tADC TileGroupTable, Y\n\tTAY\n","htmlComment":"<p>add the offset for the type of collision we're checking</p>\n","htmlContent":"\t<span class=\"token opcode property\">ADC</span> TileGroupTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">TAY</span>\n","line":3355},{"comment":"check which side of the tile ID pivot we're on","content":"\tPLA\n\tCMP TileSolidnessTable, Y\n\tRTS\n\n","htmlComment":"<p>check which side of the tile ID pivot we're on</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">CMP</span> TileSolidnessTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3359},{"comment":"\nThese map the two high bits of a tile to offets in TileSolidnessTable\n","content":"TileGroupTable:\n\t.db $00 ; solid to mushroom blocks\n\t.db $04 ; solid on top\n\t.db $08 ; solid on all sides\n\n\nPickUpToEnemyTypeTable:\n\t.db Enemy_MushroomBlock ; $00\n\t.db Enemy_MushroomBlock ; $01\n\t.db Enemy_MushroomBlock ; $02\n\t.db Enemy_POWBlock ; $03\n\t.db Enemy_Coin ; $04\n\t.db Enemy_VegetableLarge ; $05\n\t.db Enemy_VegetableSmall ; $06\n\t.db Enemy_Rocket ; $07\n\t.db Enemy_Shell ; $08\n\t.db Enemy_Bomb ; $09\n\t.db Enemy_SubspacePotion ; $0A\n\t.db Enemy_Mushroom1up ; $0B\n\t.db Enemy_POWBlock ; $0C\n\t.db Enemy_BobOmb ; $0D\n\t.db Enemy_MushroomBlock ; $0E ; this one seems to be overridden for digging in sand\n\n","htmlComment":"<p>These map the two high bits of a tile to offets in TileSolidnessTable</p>\n","htmlContent":"TileGroupTable:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; solid to mushroom blocks</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; solid on top</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span> <span class=\"token comment\">; solid on all sides</span>\n\n\nPickUpToEnemyTypeTable:\n\t<span class=\"token directive keyword\">.db</span> Enemy_MushroomBlock <span class=\"token comment\">; $00</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_MushroomBlock <span class=\"token comment\">; $01</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_MushroomBlock <span class=\"token comment\">; $02</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_POWBlock <span class=\"token comment\">; $03</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_Coin <span class=\"token comment\">; $04</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_VegetableLarge <span class=\"token comment\">; $05</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_VegetableSmall <span class=\"token comment\">; $06</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_Rocket <span class=\"token comment\">; $07</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_Shell <span class=\"token comment\">; $08</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_Bomb <span class=\"token comment\">; $09</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_SubspacePotion <span class=\"token comment\">; $0A</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_Mushroom<span class=\"token decimalnumber string\">1</span>up <span class=\"token comment\">; $0B</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_POWBlock <span class=\"token comment\">; $0C</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_BobOmb <span class=\"token comment\">; $0D</span>\n\t<span class=\"token directive keyword\">.db</span> Enemy_MushroomBlock <span class=\"token comment\">; $0E ; this one seems to be overridden for digging in sand</span>\n\n","line":3367},{"comment":"find a slot for the item being lifted","content":"loc_BANK0_9074:\n\tLDX #$06\n\nloc_BANK0_9076:\n\tLDA EnemyState, X\n\tBEQ loc_BANK0_9080\n\n\tINX\n\tCPX #$09\n\tBCC loc_BANK0_9076\n\n\tRTS\n","htmlComment":"<p>find a slot for the item being lifted</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9074</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$06</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9076</span>:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9080</span>\n\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9076</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n","line":3392},{"comment":"create the sprite for the item being picked up","content":"loc_BANK0_9080:\n\tLDA byte_RAM_0\n\tSTA EnemyVariable, X\n\tLDA byte_RAM_3\n\tSTA ObjectXHi, X\n\tLDA byte_RAM_4\n\tSTA ObjectYHi, X\n\tLDA byte_RAM_5\n\tSTA ObjectXLo, X\n\tLDA byte_RAM_6\n\tSTA ObjectYLo, X\n\tLDA #$00\n\tSTA EnemyArray_42F, X\n\tSTA ObjectAnimationTimer, X\n\tSTA EnemyArray_B1, X\n\tJSR UnlinkEnemyFromRawData_Bank1\n\n\tLDA #EnemyState_Alive\n\tLDY byte_RAM_9\n\tCPY #$0E\n\tBNE loc_BANK0_90AE\n\n\tLDA #$20\n\tSTA EnemyTimer, X\n\tLDA #EnemyState_Sand\n\nloc_BANK0_90AE:\n\tSTA EnemyState, X\n\tLDA PickUpToEnemyTypeTable, Y ; What sprite is spawned for you when lifting a bg object\n\tSTA ObjectType, X\n\n\tLDY #$0FF ; regular bomb fuse\n\tCMP #Enemy_Bomb\n\tBEQ loc_BANK0_90C1\n\n\tCMP #Enemy_BobOmb\n\tBNE loc_BANK0_90C5\n\n\tLDY #$50 ; BobOmb fuse\n\nloc_BANK0_90C1:\n\tSTY EnemyTimer, X\n\tBNE loc_BANK0_90EA\n\nloc_BANK0_90C5:\n\tCMP #Enemy_Mushroom1up\n\tBNE loc_BANK0_90D5\n\n\tLDA Mushroom1upPulled\n\tBEQ loc_BANK0_90EA\n\n\tLDA #Enemy_VegetableSmall\n\tSTA ObjectType, X\n\n\tJMP loc_BANK0_90EA\n\nloc_BANK0_90D5:\n\tCMP #Enemy_VegetableLarge\n\tBNE loc_BANK0_90EA\n\n\tLDY BigVeggiesPulled\n\tINY\n\tCPY #$05\n\tBCC loc_BANK0_90E7\n\n\tLDA #Enemy_Stopwatch\n\tSTA ObjectType, X\n\tLDY #$00\n\nloc_BANK0_90E7:\n\tSTY BigVeggiesPulled\n\nloc_BANK0_90EA:\n\tJSR loc_BANK1_B9EB\n\n\tLDA #CollisionFlags_Down\n\tSTA EnemyCollision, X\n\tLDA #BackgroundTile_Sky\n\tJSR ReplaceTile_Bank0\n\n\tLDA #$07\n\tSTA ObjectBeingCarriedTimer, X\n\tSTX ObjectBeingCarriedIndex\n\tLDA #PlayerState_Lifting\n\tSTA PlayerState\n\tLDA #$06\n\tSTA PlayerStateTimer\n\tLDA #SpriteAnimation_Pulling\n\tSTA PlayerAnimationFrame\n\tINC HoldingItem\n\tRTS\n\n\nTileBehavior_CheckJar:\n\tLDY HoldingItem\n\tBNE loc_BANK0_917C\n\n\tLDA PlayerDucking\n\tBEQ TileBehavior_CheckPickUp\n\n\tLDA byte_RAM_0\n\tLDX InSubspaceOrJar\n\tCPX #$02\n\tBNE TileBehavior_CheckJar_NotSubspace\n","htmlComment":"<p>create the sprite for the item being picked up</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9080</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> UnlinkEnemyFromRawData_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$0E</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>AE\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Sand\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>AE:\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PickUpToEnemyTypeTable, <span class=\"token register variable\">Y</span> <span class=\"token comment\">; What sprite is spawned for you when lifting a bg object</span>\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$0FF</span> <span class=\"token comment\">; regular bomb fuse</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Bomb\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">CMP</span> #Enemy_BobOmb\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>C<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$50</span> <span class=\"token comment\">; BobOmb fuse</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>C<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">STY</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>EA\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>C<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Mushroom<span class=\"token decimalnumber string\">1</span>up\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>D<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> Mushroom<span class=\"token decimalnumber string\">1</span>upPulled\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>EA\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_VegetableSmall\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>EA\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>D<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">CMP</span> #Enemy_VegetableLarge\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>EA\n\n\t<span class=\"token opcode property\">LDY</span> BigVeggiesPulled\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>E<span class=\"token decimalnumber string\">7</span>\n\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Stopwatch\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>E<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">STY</span> BigVeggiesPulled\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">90</span>EA:\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_B<span class=\"token decimalnumber string\">9</span>EB\n\n\t<span class=\"token opcode property\">LDA</span> #CollisionFlags_Down\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #BackgroundTile_Sky\n\t<span class=\"token opcode property\">JSR</span> ReplaceTile_Bank<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> #PlayerState_Lifting\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Pulling\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">INC</span> HoldingItem\n\t<span class=\"token opcode property\">RTS</span>\n\n\nTileBehavior_CheckJar:\n\t<span class=\"token opcode property\">LDY</span> HoldingItem\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n\n\t<span class=\"token opcode property\">LDA</span> PlayerDucking\n\t<span class=\"token opcode property\">BEQ</span> TileBehavior_CheckPickUp\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDX</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> TileBehavior_CheckJar_NotSubspace\n","line":3406},{"comment":"In SubSpace, a non-enterable jar can be entered\nNow Y = $00","content":"\tCMP #BackgroundTile_JarTopNonEnterable\n\tBEQ TileBehavior_GoDownJar\n\n\tBNE loc_BANK0_917C\n\nTileBehavior_CheckJar_NotSubspace:\n\tINY","htmlComment":"<p>In SubSpace, a non-enterable jar can be entered\nNow Y = $00</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_JarTopNonEnterable\n\t<span class=\"token opcode property\">BEQ</span> TileBehavior_GoDownJar\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n\nTileBehavior_CheckJar_NotSubspace:\n\t<span class=\"token opcode property\">INY</span>","line":3513},{"comment":"Now Y = $01","content":"\tCMP #BackgroundTile_JarTopGeneric\n\tBEQ TileBehavior_GoDownJar\n\n\tCMP #BackgroundTile_JarTopPointer\n\tBNE loc_BANK0_917C\n\n\tINY\n","htmlComment":"<p>Now Y = $01</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_JarTopGeneric\n\t<span class=\"token opcode property\">BEQ</span> TileBehavior_GoDownJar\n\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_JarTopPointer\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n\n\t<span class=\"token opcode property\">INY</span>\n","line":3521},{"comment":"Now Y = $02","content":"TileBehavior_GoDownJar:\n\tLDA PlayerXLo\n\tCLC\n\tADC #$04\n\tAND #$0F\n\tCMP #$08\n\tBCS loc_BANK0_917C\n","htmlComment":"<p>Now Y = $02</p>\n","htmlContent":"TileBehavior_GoDownJar:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n","line":3529},{"comment":"Stop horiziontal movement","content":"\tLDA #$00\n\tSTA PlayerXVelocity\n","htmlComment":"<p>Stop horiziontal movement</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n","line":3539},{"comment":"We're going down the jar!","content":"\tLDA #PlayerState_GoingDownJar\n\tSTA PlayerState\n","htmlComment":"<p>We're going down the jar!</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> #PlayerState_GoingDownJar\n\t<span class=\"token opcode property\">STA</span> PlayerState\n","line":3543},{"comment":"What kind of jar are we going down?\n$00 = warp, $01 = regular, $02 = pointer","content":"\tSTY InJarType\n","htmlComment":"<p>What kind of jar are we going down?\n$00 = warp, $01 = regular, $02 = pointer</p>\n","htmlContent":"\t<span class=\"token opcode property\">STY</span> InJarType\n","line":3548},{"comment":"\nSnaps the player to the closest tile (for entering doors and jars)\n","content":"SnapPlayerToTile:\n\tLDA PlayerXLo\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA PlayerXLo\n\tBCC SnapPlayerToTile_Exit\n\n\tLDA IsHorizontalLevel\n\tBEQ SnapPlayerToTile_Exit\n\n\tINC PlayerXHi\n\nSnapPlayerToTile_Exit:\n\tRTS\n\n\nTileBehavior_CheckPickUp:\n\tBIT Player1JoypadPress\n\tBVC loc_BANK0_917C\n\n","htmlComment":"<p>Snaps the player to the closest tile (for entering doors and jars)</p>\n","htmlContent":"SnapPlayerToTile:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">BCC</span> SnapPlayerToTile_Exit\n\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> SnapPlayerToTile_Exit\n\n\t<span class=\"token opcode property\">INC</span> PlayerXHi\n\nSnapPlayerToTile_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nTileBehavior_CheckPickUp:\n\t<span class=\"token opcode property\">BIT</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">BVC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n\n","line":3553},{"comment":"B button pressed","content":"\tLDA PlayerXLo\n\tCLC\n\tADC #$06\n\tAND #$0F\n\tCMP #$0C\n\tBCS loc_BANK0_917C\n\n\tLDA byte_RAM_0\n\tCMP #BackgroundTile_DiggableSand\n\tBNE loc_BANK0_916E\n\n\tLDA #$0E\n\tBNE loc_BANK0_9177\n","htmlComment":"<p>B button pressed</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_DiggableSand\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">916</span>E\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0E</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9177</span>\n","line":3575},{"comment":"blocks that can be picked up","content":"loc_BANK0_916E:\n\tCMP #BackgroundTile_Unused6D\n\tBCS loc_BANK0_917C\n","htmlComment":"<p>blocks that can be picked up</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">916</span>E:\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_Unused<span class=\"token decimalnumber string\">6</span>D\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n","line":3591},{"comment":"convert to an index in PickUpToEnemyTypeTable","content":"\tSEC\n\tSBC #BackgroundTile_MushroomBlock\n\tBCC loc_BANK0_917C\n\nloc_BANK0_9177:\n\tSTA byte_RAM_9\n\tJMP loc_BANK0_9074\n\n","htmlComment":"<p>convert to an index in PickUpToEnemyTypeTable</p>\n","htmlContent":"\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #BackgroundTile_MushroomBlock\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9177</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9074</span>\n\n","line":3596},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_917C:\n\tLDA PlayerDucking\n\tBNE locret_BANK0_91CE\n\n\tLDA byte_RAM_6\n\tSEC\n\tSBC #$10\n\tSTA byte_RAM_6\n\tSTA byte_RAM_E6\n\tLDA byte_RAM_4\n\tSBC #$00\n\tSTA byte_RAM_4\n\tSTA byte_RAM_1\n\tLDA byte_RAM_3\n\tSTA byte_RAM_2\n\tJSR sub_BANK0_92C1\n\n\tBCS locret_BANK0_91CE\n\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDX HoldingItem\n\tBEQ loc_BANK0_91AE\n\n\tLDX ObjectBeingCarriedIndex\n\tLDY ObjectType, X\n\tCPY #Enemy_Key\n\tBNE locret_BANK0_91CE\n\nloc_BANK0_91AE:\n\tLDX InSubspaceOrJar\n\tCPX #$02\n\tBEQ loc_BANK0_91BF\n\n\tLDY #$04\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">917</span>C:\n\t<span class=\"token opcode property\">LDA</span> PlayerDucking\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> HoldingItem\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>AE\n\n\t<span class=\"token opcode property\">LDX</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CPY</span> #Enemy_Key\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>AE:\n\t<span class=\"token opcode property\">LDX</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>BF\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span>\n","line":3605},{"comment":"check to see if the tile matches one of the door tiles","content":"loc_BANK0_91B7:\n\tCMP DoorTiles, Y\n\tBEQ loc_BANK0_91EB\n\n\tDEY\n\tBPL loc_BANK0_91B7\n\nloc_BANK0_91BF:\n\tBIT Player1JoypadPress\n\tBVC locret_BANK0_91CE\n\n\tSTA byte_RAM_0\n\tCMP #BackgroundTile_GrassInactive\n\tBCS locret_BANK0_91CE\n\n\tSEC\n\tSBC #BackgroundTile_GrassCoin\n\tBCS loc_BANK0_91CF\n\nlocret_BANK0_91CE:\n\tRTS\n\n","htmlComment":"<p>check to see if the tile matches one of the door tiles</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>B<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">CMP</span> DoorTiles, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>EB\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>B<span class=\"token decimalnumber string\">7</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>BF:\n\t<span class=\"token opcode property\">BIT</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">BVC</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CMP</span> #BackgroundTile_GrassInactive\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #BackgroundTile_GrassCoin\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CF\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3645},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_91CF:\n\tLDX InSubspaceOrJar\n\tCPX #$02\n\tBNE loc_BANK0_91E3\n\n\tLDA SubspaceVisits\n\tCMP #$02\n\tBCS loc_BANK0_91E2 ; skip if we've already visited Subspace twice\n\n\tINC SubspaceCoins\n\tLDX #$00\n\nloc_BANK0_91E2:\n\tTXA\n\nloc_BANK0_91E3:\n\tCLC\n\tADC #$04\n\tSTA byte_RAM_9\n\tJMP loc_BANK0_9074\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CF:\n\t<span class=\"token opcode property\">LDX</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>E<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> SubspaceVisits\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>E<span class=\"token decimalnumber string\">2</span> <span class=\"token comment\">; skip if we've already visited Subspace twice</span>\n\n\t<span class=\"token opcode property\">INC</span> SubspaceCoins\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>E<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>E<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">9</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9074</span>\n","line":3668},{"comment":"---------------------------------------------------------------------------","content":"","htmlComment":"<hr>\n","htmlContent":"","line":3691},{"comment":"\nChecks to see if we're trying to go through the door\n\nInput\nY = tile index in DoorTiles","content":"loc_BANK0_91EB:\n\tLDA Player1JoypadPress\n\tAND #ControllerInput_Up\n\tBEQ locret_BANK0_91CE\n","htmlComment":"<p>Checks to see if we're trying to go through the door</p>\n<p>Input\nY = tile index in DoorTiles</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>EB:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Up\n\t<span class=\"token opcode property\">BEQ</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n","line":3697},{"comment":"player is holding up and is trying to go through this door","content":"\tLDA PlayerXLo\n\tCLC\n\tADC #$05\n\tAND #$0F\n\tCMP #$0A\n\tBCS locret_BANK0_91CE\n\n\tCPY #$04 ; index of BackgroundTile_LightDoorEndLevel\n\tBNE loc_BANK0_9205\n","htmlComment":"<p>player is holding up and is trying to go through this door</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">91</span>CE\n\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$04</span> <span class=\"token comment\">; index of BackgroundTile_LightDoorEndLevel</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9205</span>\n","line":3703},{"comment":"setting GameMode to $03 to go to Bonus Chance","content":"\tDEY\n\tSTY GameMode\n\tRTS\n\n","htmlComment":"<p>setting GameMode to $03 to go to Bonus Chance</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">STY</span> GameMode\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3714},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9205:\n\tLDA #TransitionType_Door\n\tSTA TransitionType\n\tTYA\n\tJSR JumpToTableAfterJump\n\nDoorHandlingPointers:\n\t.dw DoorHandling_UnlockedDoor ; unlocked door\n\t.dw DoorHandling_LockedDoor ; locked door\n\t.dw DoorHandling_Entrance ; dark door\n\t.dw DoorHandling_Entrance ; light door\n\n\nDoorHandling_UnlockedDoor:\n\tJSR DoorAnimation_Unlocked\n\nDoorHandling_GoThroughDoor:\n\tINC DoorAnimationTimer\n\tINC PlayerLock\n\tJSR SnapPlayerToTile\n\n\tLDA #DPCM_DoorOpenBombBom\n\tSTA DPCMQueue\n\nDoorHandling_Exit:\n\tRTS\n\n\nDoorHandling_LockedDoor:\n\tLDA HoldingItem","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9205</span>:\n\t<span class=\"token opcode property\">LDA</span> #TransitionType_Door\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\nDoorHandlingPointers:\n\t<span class=\"token directive keyword\">.dw</span> DoorHandling_UnlockedDoor <span class=\"token comment\">; unlocked door</span>\n\t<span class=\"token directive keyword\">.dw</span> DoorHandling_LockedDoor <span class=\"token comment\">; locked door</span>\n\t<span class=\"token directive keyword\">.dw</span> DoorHandling_Entrance <span class=\"token comment\">; dark door</span>\n\t<span class=\"token directive keyword\">.dw</span> DoorHandling_Entrance <span class=\"token comment\">; light door</span>\n\n\nDoorHandling_UnlockedDoor:\n\t<span class=\"token opcode property\">JSR</span> DoorAnimation_Unlocked\n\nDoorHandling_GoThroughDoor:\n\t<span class=\"token opcode property\">INC</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">INC</span> PlayerLock\n\t<span class=\"token opcode property\">JSR</span> SnapPlayerToTile\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_DoorOpenBombBom\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nDoorHandling_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDoorHandling_LockedDoor:\n\t<span class=\"token opcode property\">LDA</span> HoldingItem","line":3719},{"comment":"don't come to a locked door empty-handed","content":"\tBEQ DoorHandling_Exit\n","htmlComment":"<p>don't come to a locked door empty-handed</p>\n","htmlContent":"\t<span class=\"token opcode property\">BEQ</span> DoorHandling_Exit\n","line":3751},{"comment":"and make sure you have a key","content":"\tLDY ObjectBeingCarriedIndex\n\tLDA ObjectType, Y\n\tCMP #Enemy_Key\n\tBNE DoorHandling_Exit\n","htmlComment":"<p>and make sure you have a key</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> ObjectBeingCarriedIndex\n\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_Key\n\t<span class=\"token opcode property\">BNE</span> DoorHandling_Exit\n","line":3754},{"comment":"the key has been used","content":"\tINC KeyUsed\n\tTYA\n\tTAX\n\n\tJSR TurnKeyIntoPuffOfSmoke\n\tJSR DoorAnimation_Locked\n\tJMP DoorHandling_GoThroughDoor\n\n\nDoorHandling_Entrance:\n\tINC DoAreaTransition\n\tJMP DoAreaReset\n\n\nDoorTiles:\n\t.db BackgroundTile_DoorBottom\n\t.db BackgroundTile_DoorBottomLock\n\t.db BackgroundTile_DarkDoor\n\t.db BackgroundTile_LightDoor\n\t.db BackgroundTile_LightDoorEndLevel\n\n","htmlComment":"<p>the key has been used</p>\n","htmlContent":"\t<span class=\"token opcode property\">INC</span> KeyUsed\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\n\t<span class=\"token opcode property\">JSR</span> TurnKeyIntoPuffOfSmoke\n\t<span class=\"token opcode property\">JSR</span> DoorAnimation_Locked\n\t<span class=\"token opcode property\">JMP</span> DoorHandling_GoThroughDoor\n\n\nDoorHandling_Entrance:\n\t<span class=\"token opcode property\">INC</span> DoAreaTransition\n\t<span class=\"token opcode property\">JMP</span> DoAreaReset\n\n\nDoorTiles:\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_DoorBottom\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_DoorBottomLock\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_DarkDoor\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_LightDoor\n\t<span class=\"token directive keyword\">.db</span> BackgroundTile_LightDoorEndLevel\n\n","line":3760},{"comment":"\nSeems to determine what kind of tile the player has collided with?\n\nInput\nX = object index (0 = player)\nY = bounding box offset?\nOutput\nbyte_RAM_0 = tile ID\n","content":"sub_BANK0_924F:\n\tTXA\n\tPHA\n\tLDA #$00\n\tSTA byte_RAM_0\n\tSTA byte_RAM_1\n\tLDA byte_BANKF_F011, Y\n\tBPL loc_BANK0_925E\n\n\tDEC byte_RAM_0\n\nloc_BANK0_925E:\n\tCLC\n\tADC PlayerXLo, X\n\tAND #$F0\n\tSTA byte_RAM_5\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA PlayerXHi, X\n\tADC byte_RAM_0\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\tLDA IsHorizontalLevel\n\nloc_BANK0_9277:\n\tBNE loc_BANK0_927D\n\n\tSTA byte_RAM_2\n\tSTA byte_RAM_3\n\nloc_BANK0_927D:\n\tLDA byte_BANKF_F055, Y\n\tBPL loc_BANK0_9284\n\n\tDEC byte_RAM_1\n\nloc_BANK0_9284:\n\tCLC\n\nloc_BANK0_9285:\n\tADC PlayerYLo, X\n\tAND #$F0\n\tSTA byte_RAM_6\n\tSTA byte_RAM_E6\n\tLDA PlayerYHi, X\n\tADC byte_RAM_1\n\tSTA byte_RAM_1\n\tSTA byte_RAM_4\n\tJSR sub_BANK0_92C1\n\n\tBCC loc_BANK0_929E\n\n\tLDA #$00\n\tBEQ loc_BANK0_92A5\n\nloc_BANK0_929E:\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\nloc_BANK0_92A5:\n\tSTA byte_RAM_0\n\tPLA\n\tTAX\n\tRTS\n\n\n","htmlComment":"<p>Seems to determine what kind of tile the player has collided with?</p>\n<p>Input\nX = object index (0 = player)\nY = bounding box offset?\nOutput\nbyte_RAM_0 = tile ID</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">924</span>F:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANKF_F<span class=\"token decimalnumber string\">011</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">925</span>E\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">925</span>E:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9277</span>:\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">927</span>D\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">927</span>D:\n\t<span class=\"token opcode property\">LDA</span> byte_BANKF_F<span class=\"token decimalnumber string\">055</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9284</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9284</span>:\n\t<span class=\"token opcode property\">CLC</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9285</span>:\n\t<span class=\"token opcode property\">ADC</span> PlayerYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">929</span>E\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">929</span>E:\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":3791},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK0_92AA:\n\tSTA byte_RAM_F\n\tTYA\n\tBMI locret_BANK0_92C0\n\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tCLC\n\tADC byte_RAM_F\n\tBCS loc_BANK0_92BC\n\n\tCMP #$F0\n\tBCC locret_BANK0_92C0\n\nloc_BANK0_92BC:\n\tCLC\n\tADC #$10\n\tINY\n\nlocret_BANK0_92C0:\n\tRTS\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>AA:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_F\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>BC\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BCC</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>BC:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">INY</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":3865},{"comment":"End of function sub_BANK0_92AA","content":"","htmlComment":"<p>End of function sub_BANK0_92AA</p>\n","htmlContent":"","line":3891},{"comment":"\nNOTE: This is a copy of the \"sub_BANK3_BC2E\" routine in Bank 3\n\n","content":"sub_BANK0_92C1:\n\tLDY byte_RAM_1\n\tLDA byte_RAM_E6\n\tJSR sub_BANK0_92AA\n\n\tSTY byte_RAM_1\n\tSTA byte_RAM_E6\n\tLDY IsHorizontalLevel\n\tLDA byte_RAM_1, Y\n\tSTA byte_RAM_E8\n\tLDA byte_RAM_2\n\tCMP byte_BANK0_92E0 + 1, Y\n\tBCS locret_BANK0_92DF\n\n\tLDA byte_RAM_1\n\tCMP byte_BANK0_92E0, Y\n\nlocret_BANK0_92DF:\n\tRTS\n\n\nbyte_BANK0_92E0:\n\t.db $0A\n\t.db $01\n\t.db $0B\n\n","htmlComment":"<p>NOTE: This is a copy of the \"sub_BANK3_BC2E\" routine in Bank 3</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>AA\n\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>E<span class=\"token decimalnumber string\">0</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>DF\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>E<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">Y</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>DF:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>E<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0B</span>\n\n","line":3897},{"comment":"Unused?\nCopy of sub_BANKF_F494","content":"_code_12E3:\n\tLDX NeedVerticalScroll\n\tBNE locret_BANK0_9311\n\n\tLDA PlayerState\n\tCMP #PlayerState_Lifting\n\tBCS locret_BANK0_9311\n\n\tLDA PlayerScreenYLo\n\tLDY PlayerScreenYHi\n\tBMI loc_BANK0_92FF\n\n\tBNE loc_BANK0_9305\n\n\tCMP #$B4\n\tBCS loc_BANK0_9305\n\n\tCMP #$21\n\tBCS loc_BANK0_9307\n\nloc_BANK0_92FF:\n\tLDY PlayerInAir\n\tBNE loc_BANK0_9307\n\n\tBEQ loc_BANK0_9306\n\nloc_BANK0_9305:\n\tINX\n\nloc_BANK0_9306:\n\tINX\n\nloc_BANK0_9307:\n\tLDA VerticalScrollDirection\n\tSTX VerticalScrollDirection\n\tBNE locret_BANK0_9311\n\nloc_BANK0_930F:\n\tSTX NeedVerticalScroll\n\nlocret_BANK0_9311:\n\tRTS\n\n\nPlayerCollisionDirectionTable:\n\t.db CollisionFlags_Right\n\t.db CollisionFlags_Left\n\nPlayerCollisionResultTable_Bank0:\n\t.db CollisionFlags_80\n\t.db CollisionFlags_00\n\n","htmlComment":"<p>Unused?\nCopy of sub_BANKF_F494</p>\n","htmlContent":"_code_<span class=\"token decimalnumber string\">12</span>E<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDX</span> NeedVerticalScroll\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9311</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">CMP</span> #PlayerState_Lifting\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9311</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">LDY</span> PlayerScreenYHi\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>FF\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9305</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$B4</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9305</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$21</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9307</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>FF:\n\t<span class=\"token opcode property\">LDY</span> PlayerInAir\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9307</span>\n\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9306</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9305</span>:\n\t<span class=\"token opcode property\">INX</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9306</span>:\n\t<span class=\"token opcode property\">INX</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9307</span>:\n\t<span class=\"token opcode property\">LDA</span> VerticalScrollDirection\n\t<span class=\"token opcode property\">STX</span> VerticalScrollDirection\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9311</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">930</span>F:\n\t<span class=\"token opcode property\">STX</span> NeedVerticalScroll\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9311</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPlayerCollisionDirectionTable:\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Right\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_Left\n\nPlayerCollisionResultTable_Bank<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_<span class=\"token decimalnumber string\">80</span>\n\t<span class=\"token directive keyword\">.db</span> CollisionFlags_<span class=\"token decimalnumber string\">00</span>\n\n","line":3926},{"comment":"\nEnforces the left/right boundaries of horizontal areas\n","content":"PlayerAreaBoundaryCollision:\n\tLDA IsHorizontalLevel\n\tBEQ PlayerAreaBoundaryCollision_Exit\n\n\tLDA PlayerScreenX\n\tLDY PlayerMovementDirection\n\tCPY #$01\n\tBEQ PlayerAreaBoundaryCollision_CheckRight\n\nPlayerAreaBoundaryCollision_CheckLeft:\n\tCMP #$08\n\tBCC PlayerAreaBoundaryCollision_BoundaryHit\n\nPlayerAreaBoundaryCollision_Exit:\n\tRTS\n\nPlayerAreaBoundaryCollision_CheckRight:\n\tCMP #$E8\n\tBCC PlayerAreaBoundaryCollision_Exit\n\nPlayerAreaBoundaryCollision_BoundaryHit:\n\tLDA PlayerCollision\n\tORA PlayerCollisionDirectionTable - 1, Y\n\tSTA PlayerCollision\n","htmlComment":"<p>Enforces the left/right boundaries of horizontal areas</p>\n","htmlContent":"PlayerAreaBoundaryCollision:\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> PlayerAreaBoundaryCollision_Exit\n\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenX\n\t<span class=\"token opcode property\">LDY</span> PlayerMovementDirection\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BEQ</span> PlayerAreaBoundaryCollision_CheckRight\n\nPlayerAreaBoundaryCollision_CheckLeft:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCC</span> PlayerAreaBoundaryCollision_BoundaryHit\n\nPlayerAreaBoundaryCollision_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\nPlayerAreaBoundaryCollision_CheckRight:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$E8</span>\n\t<span class=\"token opcode property\">BCC</span> PlayerAreaBoundaryCollision_Exit\n\nPlayerAreaBoundaryCollision_BoundaryHit:\n\t<span class=\"token opcode property\">LDA</span> PlayerCollision\n\t<span class=\"token opcode property\">ORA</span> PlayerCollisionDirectionTable - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerCollision\n","line":3982},{"comment":"\nNOTE: This is a copy of the \"PlayerHorizontalCollision\" routine in Bank 3\n","content":"PlayerHorizontalCollision_Bank0:\n\tLDX #$00\n\tLDY PlayerMovementDirection\n\tLDA PlayerXVelocity\n\tEOR PlayerCollisionResultTable_Bank0 - 1, Y\n\tBPL loc_BANK0_9340\n\n\tSTX PlayerXVelocity\n\nloc_BANK0_9340:\n\tLDA PlayerXAcceleration\n\tEOR PlayerCollisionResultTable_Bank0 - 1, Y\n\tBPL loc_BANK0_934B\n\n\tSTX PlayerXAcceleration\n\nloc_BANK0_934B:\n\tSTX PlayerXSubpixel\n\nlocret_BANK0_934E:\n\tRTS\n\n","htmlComment":"<p>NOTE: This is a copy of the \"PlayerHorizontalCollision\" routine in Bank 3</p>\n","htmlContent":"PlayerHorizontalCollision_Bank<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDY</span> PlayerMovementDirection\n\t<span class=\"token opcode property\">LDA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">EOR</span> PlayerCollisionResultTable_Bank<span class=\"token decimalnumber string\">0</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9340</span>\n\n\t<span class=\"token opcode property\">STX</span> PlayerXVelocity\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9340</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerXAcceleration\n\t<span class=\"token opcode property\">EOR</span> PlayerCollisionResultTable_Bank<span class=\"token decimalnumber string\">0</span> - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">934</span>B\n\n\t<span class=\"token opcode property\">STX</span> PlayerXAcceleration\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">934</span>B:\n\t<span class=\"token opcode property\">STX</span> PlayerXSubpixel\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">934</span>E:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4010},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":4034},{"comment":"\nNOTE: This is a copy of the \"sub_BANK3_BC50\" routine in Bank 3\n\nReplaces tile when something is picked up\n\nInput\nA = Target tile\nX = Enemy index of object being picked up\n","content":"ReplaceTile_Bank0:\n\tPHA ; Something to update the PPU for some tile change\n\tLDA ObjectXLo, X\n\tCLC\n\tADC #$08\n\tPHP\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tPLP\n\tLDA ObjectXHi, X\n\tLDY IsHorizontalLevel\n\tBEQ ReplaceTile_StoreXHi_Bank0\n\n\tADC #$00\n\nReplaceTile_StoreXHi_Bank0:\n\tSTA byte_RAM_2\n\tLDA ObjectYLo, X\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tSTA byte_RAM_E6\n\tLDA ObjectYHi, X\n\tADC #$00\n\tSTA byte_RAM_1\n\tJSR sub_BANK0_92C1\n\n\tPLA\n\tBCS locret_BANK0_934E\n","htmlComment":"<p>NOTE: This is a copy of the \"sub_BANK3_BC50\" routine in Bank 3</p>\n<p>Replaces tile when something is picked up</p>\n<p>Input\nA = Target tile\nX = Enemy index of object being picked up</p>\n","htmlContent":"ReplaceTile_Bank<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">PHA</span> <span class=\"token comment\">; Something to update the PPU for some tile change</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">PHP</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">PLP</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BEQ</span> ReplaceTile_StoreXHi_Bank<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\nReplaceTile_StoreXHi_Bank<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">92</span>C<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">934</span>E\n","line":4044},{"comment":"\nInput\nA = Target tile\n","content":"loc_BANK0_937C:\n\tSTX byte_RAM_3\n\tPHA\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tPLA\n\tLDY byte_RAM_E7\n\tSTA (byte_RAM_1), Y\n\tPHA\n\tLDX byte_RAM_300\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tTYA\n\tAND #$F0\n\tASL A\n\tROL PPUBuffer_301, X\n\tASL A\n\tROL PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 1, X\n\tTYA\n\tAND #$0F\n\tASL A\n\n\tADC PPUBuffer_301 + 1, X\n\tSTA PPUBuffer_301 + 1, X\n\tCLC\n\tADC #$20\n\tSTA PPUBuffer_301 + 6, X\n\tLDA IsHorizontalLevel\n\tASL A\n\tTAY\n\tLDA byte_RAM_1\n\tAND #$10\n\tBNE loc_BANK0_93B9\n\n\tINY\n\nloc_BANK0_93B9:\n\tLDA byte_BANK0_940A, Y\n\tCLC\n\tADC PPUBuffer_301, X\n\tSTA PPUBuffer_301, X\n\tSTA PPUBuffer_301 + 5, X\n\tLDA #$02\n\tSTA PPUBuffer_301 + 2, X\n\tSTA PPUBuffer_301 + 7, X\n\tPLA\n\tPHA\n\tAND #$C0\n\tASL A\n\tROL A\n\tROL A\n\tTAY\n\tLDA TileQuadPointersLo, Y\n\tSTA byte_RAM_0\n\tLDA TileQuadPointersHi, Y\n\tSTA byte_RAM_1\n\tPLA\n\tASL A\n\tASL A\n\tTAY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 3, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 4, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 8, X\n\tINY\n\tLDA (byte_RAM_0), Y\n\tSTA PPUBuffer_301 + 9, X\n\tLDA #$00\n\tSTA PPUBuffer_301 + 10, X\n\tTXA\n\tCLC\n\tADC #$0A\n\tSTA byte_RAM_300\n\tLDX byte_RAM_3\n\tRTS\n\n","htmlComment":"<p>Input\nA = Target tile</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">937</span>C:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">ADC</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">93</span>B<span class=\"token decimalnumber string\">9</span>\n\n\t<span class=\"token opcode property\">INY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">93</span>B<span class=\"token decimalnumber string\">9</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">940</span><span class=\"token register variable\">A</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ROL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> TileQuadPointersHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">8</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">9</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">10</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">300</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4081},{"comment":"Another byte of PPU high addresses for horiz/vert levels","content":"byte_BANK0_940A:\n\t.db $20\n\t.db $28\n\t.db $20\n\t.db $24\n\n","htmlComment":"<p>Another byte of PPU high addresses for horiz/vert levels</p>\n","htmlContent":"byte_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">940</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$24</span>\n\n","line":4164},{"comment":"\nNOTE: This is a copy of the \"StashPlayerPosition\" routine in Bank 3\n","content":"StashPlayerPosition_Bank0:\n\tLDA InSubspaceOrJar\n\tBNE StashPlayerPosition_Exit_Bank0\n\n\tLDA PlayerXHi\n\tSTA PlayerXHi_Backup\n\tLDA PlayerXLo\n\tSTA PlayerXLo_Backup\n\tLDA PlayerYHi\n\tSTA PlayerYHi_Backup\n\tLDA PlayerYLo\n\tSTA PlayerYLo_Backup\n\nStashPlayerPosition_Exit_Bank0:\n\tRTS\n\n","htmlComment":"<p>NOTE: This is a copy of the \"StashPlayerPosition\" routine in Bank 3</p>\n","htmlContent":"StashPlayerPosition_Bank<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> InSubspaceOrJar\n\t<span class=\"token opcode property\">BNE</span> StashPlayerPosition_Exit_Bank<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> PlayerXHi_Backup\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">STA</span> PlayerXLo_Backup\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">STA</span> PlayerYHi_Backup\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> PlayerYLo_Backup\n\nStashPlayerPosition_Exit_Bank<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4174},{"comment":"player placement after exiting subspace (maybe other times?)","content":"sub_BANK0_9428:\n\tLDA PlayerXHi_Backup\n\tSTA PlayerXHi\n\tLDA PlayerXLo_Backup\n\tSTA PlayerXLo\n\tLDA PlayerYHi_Backup\n\tSTA PlayerYHi\n\tLDA PlayerYLo_Backup\n\tSTA PlayerYLo\n\tLDA PlayerXLo\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA PlayerScreenX\n\tLDA PlayerYLo\n\tSEC\n\tSBC ScreenYLo\n\tSTA PlayerScreenYLo\n\tLDA PlayerYHi\n\tSBC ScreenYHi\n\tSTA PlayerScreenYHi\n\tLDA TransitionType\n\tSEC\n\tSBC #TransitionType_SubSpace\n\tBNE StashPlayerPosition_Exit_Bank0\n","htmlComment":"<p>player placement after exiting subspace (maybe other times?)</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9428</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi_Backup\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo_Backup\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi_Backup\n\t<span class=\"token opcode property\">STA</span> PlayerYHi\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo_Backup\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenX\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenYLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">SBC</span> ScreenYHi\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYHi\n\t<span class=\"token opcode property\">LDA</span> TransitionType\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> #TransitionType_SubSpace\n\t<span class=\"token opcode property\">BNE</span> StashPlayerPosition_Exit_Bank<span class=\"token decimalnumber string\">0</span>\n","line":4192},{"comment":"resetting these to zero (A=$00, otherwise we would have branched)","content":"\tSTA PlayerState\n\tSTA PlayerLock\n\tSTA SubspaceTimer\n\tJSR DoorAnimation_Unlocked\n\n\tLDA #$0A\n\tSTA SubspaceDoorTimer\n\tRTS\n","htmlComment":"<p>resetting these to zero (A=$00, otherwise we would have branched)</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> PlayerState\n\t<span class=\"token opcode property\">STA</span> PlayerLock\n\t<span class=\"token opcode property\">STA</span> SubspaceTimer\n\t<span class=\"token opcode property\">JSR</span> DoorAnimation_Unlocked\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">STA</span> SubspaceDoorTimer\n\t<span class=\"token opcode property\">RTS</span>\n","line":4218},{"comment":"End of function sub_BANK0_9428","content":"","htmlComment":"<p>End of function sub_BANK0_9428</p>\n","htmlContent":"","line":4228},{"comment":"=============== S U B R O U T I N E =======================================","content":"","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"","line":4230},{"comment":"area transition","content":"sub_BANK0_946D:\n\tLDA TransitionType\n\tCMP #TransitionType_Jar\n\tBNE loc_BANK0_947F\n\n\tLDA InJarType\n\tBNE loc_BANK0_947F\n\n\tJSR sub_BANK0_9428\n\n\tJMP loc_BANK0_94C2\n\n","htmlComment":"<p>area transition</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">946</span>D:\n\t<span class=\"token opcode property\">LDA</span> TransitionType\n\t<span class=\"token opcode property\">CMP</span> #TransitionType_Jar\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">947</span>F\n\n\t<span class=\"token opcode property\">LDA</span> InJarType\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">947</span>F\n\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9428</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">94</span>C<span class=\"token decimalnumber string\">2</span>\n\n","line":4232},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_947F:\n\tLDA CurrentLevelEntryPage\n\tLDY #$00\n\tLDX IsHorizontalLevel\n\tBNE loc_BANK0_948E\n\n\tSTY PlayerXHi\n\tSTA PlayerYHi\n\tBEQ loc_BANK0_9492\n\nloc_BANK0_948E:\n\tSTA PlayerXHi\n\tSTY PlayerYHi\n\nloc_BANK0_9492:\n\tJSR AreaTransitionPlacement\n\n\tLDY PlayerYHi\n\tLDA PlayerYLo\n\tJSR sub_BANK0_95AF\n\n\tSTY PlayerYHi\n\tSTA PlayerYLo\n\tLDA PlayerXLo\n\tSEC\n\tSBC ScreenBoundaryLeftLo\n\tSTA PlayerScreenX\n\tLDA PlayerYLo\n\tSEC\n\nloc_BANK0_94AC:\n\tSBC ScreenYLo\n\tSTA PlayerScreenYLo\n\tLDA PlayerYHi\n\tSBC ScreenYHi\n\tSTA PlayerScreenYHi\n\tLDA TransitionType\n\tCMP #TransitionType_SubSpace\n\tBNE loc_BANK0_94C2\n\n\tJSR DoorAnimation_Unlocked\n\nloc_BANK0_94C2:\n\tLDA PlayerXLo\n\tSEC\n\tSBC #$78\n\tSTA byte_RAM_BA\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">947</span>F:\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDX</span> IsHorizontalLevel\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">948</span>E\n\n\t<span class=\"token opcode property\">STY</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> PlayerYHi\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9492</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">948</span>E:\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">STY</span> PlayerYHi\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9492</span>:\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement\n\n\t<span class=\"token opcode property\">LDY</span> PlayerYHi\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">95</span>AF\n\n\t<span class=\"token opcode property\">STY</span> PlayerYHi\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenX\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">SEC</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">94</span>AC:\n\t<span class=\"token opcode property\">SBC</span> ScreenYLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">SBC</span> ScreenYHi\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYHi\n\t<span class=\"token opcode property\">LDA</span> TransitionType\n\t<span class=\"token opcode property\">CMP</span> #TransitionType_SubSpace\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">94</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JSR</span> DoorAnimation_Unlocked\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">94</span>C<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$78</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_BA\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4245},{"comment":"End of function sub_BANK0_946D","content":"","htmlComment":"<p>End of function sub_BANK0_946D</p>\n","htmlContent":"","line":4296},{"comment":"\nDo the player placement after an area transition\n","content":"AreaTransitionPlacement:\n\tLDA TransitionType\n\tJSR JumpToTableAfterJump\n\n\t.dw AreaTransitionPlacement_Reset\n\t.dw AreaTransitionPlacement_Door\n\t.dw AreaTransitionPlacement_Jar\n\t.dw AreaTransitionPlacement_Climbing\n\t.dw AreaTransitionPlacement_Subspace\n\t.dw AreaTransitionPlacement_Rocket\n\n\nAreaTransitionPlacement_Reset:\n\tLDA #$01\n\tSTA PlayerDirection\n\tJSR AreaTransitionPlacement_Middle\n\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n\tLDA #$D0\n\tSTA PlayerYLo\n\tSTA byte_RAM_E6\n\tLDA CurrentLevelEntryPage\n\tSTA byte_RAM_E8\n\tLDA #$0C\n\tSTA byte_RAM_3\n\nloc_BANK0_94F8:\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tCMP #$40\n\tBEQ AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tJSR AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tSTA byte_RAM_E6\n\tDEC byte_RAM_3\n\tBNE loc_BANK0_94F8\n\n","htmlComment":"<p>Do the player placement after an area transition</p>\n","htmlContent":"AreaTransitionPlacement:\n\t<span class=\"token opcode property\">LDA</span> TransitionType\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\t<span class=\"token directive keyword\">.dw</span> AreaTransitionPlacement_Reset\n\t<span class=\"token directive keyword\">.dw</span> AreaTransitionPlacement_Door\n\t<span class=\"token directive keyword\">.dw</span> AreaTransitionPlacement_Jar\n\t<span class=\"token directive keyword\">.dw</span> AreaTransitionPlacement_Climbing\n\t<span class=\"token directive keyword\">.dw</span> AreaTransitionPlacement_Subspace\n\t<span class=\"token directive keyword\">.dw</span> AreaTransitionPlacement_Rocket\n\n\nAreaTransitionPlacement_Reset:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDirection\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_Middle\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">94</span>F<span class=\"token decimalnumber string\">8</span>:\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_MovePlayerUp<span class=\"token decimalnumber string\">1</span>Tile\n\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_MovePlayerUp<span class=\"token decimalnumber string\">1</span>Tile\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">94</span>F<span class=\"token decimalnumber string\">8</span>\n\n","line":4301},{"comment":"\nMoves the player up by one tile\n","content":"AreaTransitionPlacement_MovePlayerUp1Tile:\n\tLDA PlayerYLo\n\tSEC\n\tSBC #$10\n\tSTA PlayerYLo\n\tRTS\n\n","htmlComment":"<p>Moves the player up by one tile</p>\n","htmlContent":"AreaTransitionPlacement_MovePlayerUp<span class=\"token decimalnumber string\">1</span>Tile:\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4349},{"comment":"\nLooks for a door and positions the player at it\n\nThe implementation of this requires the destination door to be at the\nOPPOSITE side of the screen from the origin door horizontally, but it can be\nat any position vertically.\n\nIf no suitable door is found, the player is positioned to fall from the\ntop-middle of the screen instead\n","content":"AreaTransitionPlacement_Door:\n\tLDA PlayerXLo","htmlComment":"<p>Looks for a door and positions the player at it</p>\n<p>The implementation of this requires the destination door to be at the\nOPPOSITE side of the screen from the origin door horizontally, but it can be\nat any position vertically.</p>\n<p>If no suitable door is found, the player is positioned to fall from the\ntop-middle of the screen instead</p>\n","htmlContent":"AreaTransitionPlacement_Door:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo","line":4367},{"comment":"Switch the x-position to the opposite side of the screen","content":"\tCLC\n\tADC #$08\n\tAND #$F0\n\tEOR #$F0\n\tSTA PlayerXLo\n","htmlComment":"<p>Switch the x-position to the opposite side of the screen</p>\n","htmlContent":"\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n","line":4370},{"comment":"Convert to a tile offset","content":"\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n","htmlComment":"<p>Convert to a tile offset</p>\n","htmlContent":"\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n","line":4377},{"comment":"Start at the bottom of the page","content":"\tLDA #$E0\n\tSTA PlayerYLo\n\tSTA byte_RAM_E6\n\tLDA CurrentLevelEntryPage\n\tSTA byte_RAM_E8\n\tLDA #$0D\n\tSTA byte_RAM_3\n\nAreaTransitionPlacement_Door_Loop:\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n","htmlComment":"<p>Start at the bottom of the page</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0D</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\nAreaTransitionPlacement_Door_Loop:\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n","line":4384},{"comment":"Read the target tile","content":"\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDY #$05\n\nAreaTransitionPlacement_Door_InnerLoop:","htmlComment":"<p>Read the target tile</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\n\nAreaTransitionPlacement_Door_InnerLoop:","line":4396},{"comment":"See if it matches any door tile","content":"\tCMP DoorTiles - 1, Y\n\tBEQ AreaTransitionPlacement_Door_Exit\n\tDEY\n\tBNE AreaTransitionPlacement_Door_InnerLoop\n","htmlComment":"<p>See if it matches any door tile</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> DoorTiles - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_Door_Exit\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> AreaTransitionPlacement_Door_InnerLoop\n","line":4402},{"comment":"Nothing matched on this row, so check the next row or give up","content":"\tDEC byte_RAM_3\nIFNDEF ROBUST_TRANSITION_SEARCH\n\tBEQ AreaTransitionPlacement_Door_Fallback\nENDIF\nIFDEF ROBUST_TRANSITION_SEARCH\n\tBEQ AreaTransitionPlacement_DoorCustom\nENDIF\n\n\tJSR AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tSTA byte_RAM_E6\n\tJMP AreaTransitionPlacement_Door_Loop\n\nAreaTransitionPlacement_Door_Fallback:","htmlComment":"<p>Nothing matched on this row, so check the next row or give up</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\nIFNDEF ROBUST_TRANSITION_SEARCH\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_Door_Fallback\nENDIF\nIFDEF ROBUST_TRANSITION_SEARCH\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_DoorCustom\nENDIF\n\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_MovePlayerUp<span class=\"token decimalnumber string\">1</span>Tile\n\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">JMP</span> AreaTransitionPlacement_Door_Loop\n\nAreaTransitionPlacement_Door_Fallback:","line":4408},{"comment":"Place in the middle of the screen if no door is found","content":"\tJSR AreaTransitionPlacement_Middle\n\nAreaTransitionPlacement_Door_Exit:\n\tJSR AreaTransitionPlacement_MovePlayerUp1Tile\n\n\tLDA #$00\n\tSTA PlayerLock\n\tRTS\n\n\nIFDEF ROBUST_TRANSITION_SEARCH","htmlComment":"<p>Place in the middle of the screen if no door is found</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_Middle\n\nAreaTransitionPlacement_Door_Exit:\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_MovePlayerUp<span class=\"token decimalnumber string\">1</span>Tile\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerLock\n\t<span class=\"token opcode property\">RTS</span>\n\n\nIFDEF ROBUST_TRANSITION_SEARCH","line":4423},{"comment":"\nLooks for a door and positions the player at it\n\nIn contrast to the normal door placement routine, this will search all\nx-positions rather than just one opposite the door\n","content":"AreaTransitionPlacement_DoorCustom:","htmlComment":"<p>Looks for a door and positions the player at it</p>\n<p>In contrast to the normal door placement routine, this will search all\nx-positions rather than just one opposite the door</p>\n","htmlContent":"AreaTransitionPlacement_DoorCustom:","line":4440},{"comment":"Start on the correct page","content":"\tLDX CurrentLevelEntryPage\n\tJSR SetAreaPageAddr_Bank1\n","htmlComment":"<p>Start on the correct page</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDX</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">JSR</span> SetAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n","line":4442},{"comment":"Start at the bottom right and work backwards","content":"\tLDA #$0EF\n\tSTA byte_RAM_E7\n\nAreaTransitionPlacement_DoorCustom_Loop:","htmlComment":"<p>Start at the bottom right and work backwards</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0EF</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\nAreaTransitionPlacement_DoorCustom_Loop:","line":4446},{"comment":"Read the target tile","content":"\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDY #$05\n\nAreaTransitionPlacement_DoorCustom_InnerLoop:","htmlComment":"<p>Read the target tile</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\n\nAreaTransitionPlacement_DoorCustom_InnerLoop:","line":4451},{"comment":"See if it matches any door tile","content":"\tCMP DoorTiles - 1, Y\n\tBEQ AreaTransitionPlacement_DoorCustom_Exit\n\tDEY\n\tBNE AreaTransitionPlacement_DoorCustom_InnerLoop\n","htmlComment":"<p>See if it matches any door tile</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> DoorTiles - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_DoorCustom_Exit\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> AreaTransitionPlacement_DoorCustom_InnerLoop\n","line":4457},{"comment":"No matches on this tile, check the next one or give up","content":"\tDEC byte_RAM_E7\n\tBEQ AreaTransitionPlacement_DoorCustom_Fallback\n\n\tJMP AreaTransitionPlacement_DoorCustom_Loop\n\nAreaTransitionPlacement_DoorCustom_Fallback:\n\tLDA #$20\n\tSTA PlayerYLo\n\tJSR AreaTransitionPlacement_Middle\n\tJMP AreaTransitionPlacement_Door_Exit\n\nAreaTransitionPlacement_DoorCustom_Exit:\n\tLDA byte_RAM_E7\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA PlayerXLo\n\tLDA byte_RAM_E7\n\tAND #$F0\n\tSTA PlayerYLo\n\tJMP AreaTransitionPlacement_Door_Exit\nENDIF\n\n","htmlComment":"<p>No matches on this tile, check the next one or give up</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_DoorCustom_Fallback\n\n\t<span class=\"token opcode property\">JMP</span> AreaTransitionPlacement_DoorCustom_Loop\n\nAreaTransitionPlacement_DoorCustom_Fallback:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_Middle\n\t<span class=\"token opcode property\">JMP</span> AreaTransitionPlacement_Door_Exit\n\nAreaTransitionPlacement_DoorCustom_Exit:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">JMP</span> AreaTransitionPlacement_Door_Exit\nENDIF\n\n","line":4463},{"comment":"\nPlace the player at the top of the screen in the middle horizontally\n","content":"AreaTransitionPlacement_Jar:\n\tLDA #$00\n\tSTA PlayerYLo\n","htmlComment":"<p>Place the player at the top of the screen in the middle horizontally</p>\n","htmlContent":"AreaTransitionPlacement_Jar:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n","line":4491},{"comment":"\nPlace the player in the air in the middle of the screen horizontally\n","content":"AreaTransitionPlacement_Middle:\n\tLDA #$01\n\tSTA PlayerInAir\n\tLDA #$78\n\tSTA PlayerXLo\n\tRTS\n","htmlComment":"<p>Place the player in the air in the middle of the screen horizontally</p>\n","htmlContent":"AreaTransitionPlacement_Middle:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerInAir\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$78</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">RTS</span>\n","line":4498},{"comment":"\nLooks for a climbable tile (vine/chain/ladder) and positions the player at it\n\nThe implementation of this requires the destination to be at the OPPOSITE\nside of the screen from the origin horizontally, otherwise the player will\nbe climbing on nothing.\n","content":"AreaTransitionPlacement_Climbing:\n\tLDA PlayerXLo","htmlComment":"<p>Looks for a climbable tile (vine/chain/ladder) and positions the player at it</p>\n<p>The implementation of this requires the destination to be at the OPPOSITE\nside of the screen from the origin horizontally, otherwise the player will\nbe climbing on nothing.</p>\n","htmlContent":"AreaTransitionPlacement_Climbing:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo","line":4512},{"comment":"Switch the x-position to the opposite side of the screen","content":"\tCLC\n\tADC #$08\n\tAND #$F0\n\tEOR #$F0\n\tSTA PlayerXLo\n","htmlComment":"<p>Switch the x-position to the opposite side of the screen</p>\n","htmlContent":"\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n","line":4515},{"comment":"Switch the y-position to the opposite side of the screen","content":"\tLDA PlayerScreenYLo\n\tCLC\n\tADC #$08\n\tAND #$F0\n\tEOR #$10\n\tSTA PlayerYLo\n\tCMP #$F0\n\tBEQ AreaTransitionPlacement_Climbing_Exit\n\n\tDEC PlayerYHi\n\nAreaTransitionPlacement_Climbing_Exit:\nIFDEF ROBUST_TRANSITION_SEARCH\n\tJSR AreaTransitionPlacement_ClimbingCustom\n\n\tBCS AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame\n","htmlComment":"<p>Switch the y-position to the opposite side of the screen</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_Climbing_Exit\n\n\t<span class=\"token opcode property\">DEC</span> PlayerYHi\n\nAreaTransitionPlacement_Climbing_Exit:\nIFDEF ROBUST_TRANSITION_SEARCH\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_ClimbingCustom\n\n\t<span class=\"token opcode property\">BCS</span> AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame\n","line":4522},{"comment":"Try the opposite side of the screen","content":"\tLDA PlayerYLo\n\tEOR #$10\n\tSTA PlayerYLo\n\n\tLDA PlayerYHi\n\tEOR #$FF\n\tSTA PlayerYHi\n\n\tJSR AreaTransitionPlacement_ClimbingCustom\n\tBCC AreaTransitionPlacement_Climbing_UnreversePositionY\n","htmlComment":"<p>Try the opposite side of the screen</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYHi\n\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_ClimbingCustom\n\t<span class=\"token opcode property\">BCC</span> AreaTransitionPlacement_Climbing_UnreversePositionY\n","line":4540},{"comment":"Found something on the opposite side, so flip Y velocity","content":"\tLDY #$01\n\tLDA PlayerYVelocity\n\tBMI AreaTransitionPlacement_Climbing_SetYVelocity\n\n\tINY\nAreaTransitionPlacement_Climbing_SetYVelocity:\n\tLDA ClimbSpeed, Y\n\tSTA PlayerYVelocity\n\n\tBNE AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame\n\nAreaTransitionPlacement_Climbing_UnreversePositionY:","htmlComment":"<p>Found something on the opposite side, so flip Y velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> AreaTransitionPlacement_Climbing_SetYVelocity\n\n\t<span class=\"token opcode property\">INY</span>\nAreaTransitionPlacement_Climbing_SetYVelocity:\n\t<span class=\"token opcode property\">LDA</span> ClimbSpeed, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\n\t<span class=\"token opcode property\">BNE</span> AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame\n\nAreaTransitionPlacement_Climbing_UnreversePositionY:","line":4552},{"comment":"Unflip Y position","content":"\tLDA PlayerYLo\n\tEOR #$10\n\tSTA PlayerYLo\n\n\tLDA PlayerYHi\n\tEOR #$FF\n\tSTA PlayerYHi\n\nAreaTransitionPlacement_Climbing_SetPlayerAnimationFrame:\nENDIF\n\n\tLDA #SpriteAnimation_Climbing\n\tSTA PlayerAnimationFrame\n\tRTS\n\n\nIFDEF ROBUST_TRANSITION_SEARCH","htmlComment":"<p>Unflip Y position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYHi\n\nAreaTransitionPlacement_Climbing_SetPlayerAnimationFrame:\nENDIF\n\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Climbing\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">RTS</span>\n\n\nIFDEF ROBUST_TRANSITION_SEARCH","line":4565},{"comment":"\nOuput\nC = set if a climbable tile was found\n","content":"AreaTransitionPlacement_ClimbingCustom:","htmlComment":"<p>Ouput\nC = set if a climbable tile was found</p>\n","htmlContent":"AreaTransitionPlacement_ClimbingCustom:","line":4586},{"comment":"Target x-position","content":"\tLDA PlayerXLo\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\tSTA byte_RAM_E5\n","htmlComment":"<p>Target x-position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n","line":4588},{"comment":"Target y-position","content":"\tLDA PlayerYLo\n\tEOR #$10\n\tCLC\n\tADC #$10\n\tCMP #$F0\n\tBNE AreaTransitionPlacement_ClimbingCustom_AfterNudge\n\tSEC\n\tSBC #$10\nAreaTransitionPlacement_ClimbingCustom_AfterNudge:\n\tSTA byte_RAM_E6\n","htmlComment":"<p>Target y-position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BNE</span> AreaTransitionPlacement_ClimbingCustom_AfterNudge\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\nAreaTransitionPlacement_ClimbingCustom_AfterNudge:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n","line":4596},{"comment":"Read the target tile","content":"\tLDA CurrentLevelEntryPage\n\tSTA byte_RAM_E8\n\tJSR SetTileOffsetAndAreaPageAddr_Bank1\n\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n","htmlComment":"<p>Read the target tile</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n","line":4608},{"comment":"Check if the target tile is climbable","content":"\tLDY #$09\nAreaTransitionPlacement_ClimbingCustom_CheckLoop:\n\tCMP ClimbableTiles, Y\n\tBNE AreaTransitionPlacement_ClimbingCustom_LoopNext\n\n\tRTS\n\nAreaTransitionPlacement_ClimbingCustom_LoopNext:\n\tDEY\n\tBPL AreaTransitionPlacement_ClimbingCustom_CheckLoop\n","htmlComment":"<p>Check if the target tile is climbable</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$09</span>\nAreaTransitionPlacement_ClimbingCustom_CheckLoop:\n\t<span class=\"token opcode property\">CMP</span> ClimbableTiles, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BNE</span> AreaTransitionPlacement_ClimbingCustom_LoopNext\n\n\t<span class=\"token opcode property\">RTS</span>\n\nAreaTransitionPlacement_ClimbingCustom_LoopNext:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> AreaTransitionPlacement_ClimbingCustom_CheckLoop\n","line":4615},{"comment":"Target tile is not climbable; start at the right and work backwards","content":"\tLDA byte_RAM_E7\n\tAND #$F0\n\tSTA byte_RAM_E6\n\n\tLDA #$0F\n\tSTA byte_RAM_3\n\tCLC\n\tADC byte_RAM_E6\n\tSTA byte_RAM_E7\n\nAreaTransitionPlacement_ClimbingCustom_Loop:","htmlComment":"<p>Target tile is not climbable; start at the right and work backwards</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\nAreaTransitionPlacement_ClimbingCustom_Loop:","line":4627},{"comment":"Read the target tile","content":"\tLDY byte_RAM_E7\n\tLDA (byte_RAM_1), Y\n\tLDY #$09\n\nAreaTransitionPlacement_ClimbingCustom_InnerLoop:\n\tCMP ClimbableTiles, Y\n\tBEQ AreaTransitionPlacement_ClimbingCustom_SetXPosition\n\tDEY\n\tBPL AreaTransitionPlacement_ClimbingCustom_InnerLoop\n","htmlComment":"<p>Read the target tile</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">1</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$09</span>\n\nAreaTransitionPlacement_ClimbingCustom_InnerLoop:\n\t<span class=\"token opcode property\">CMP</span> ClimbableTiles, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> AreaTransitionPlacement_ClimbingCustom_SetXPosition\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> AreaTransitionPlacement_ClimbingCustom_InnerLoop\n","line":4639},{"comment":"No matches on this tile, check the next one or give up","content":"\tDEC byte_RAM_E7\n\tDEC byte_RAM_3\n\tBMI AreaTransitionPlacement_ClimbingCustom_NotFound\n\n\tJMP AreaTransitionPlacement_ClimbingCustom_Loop\n\nAreaTransitionPlacement_ClimbingCustom_SetXPosition:\n\tLDA byte_RAM_3\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA PlayerXLo\n\n\tSEC\n\tRTS\n\nAreaTransitionPlacement_ClimbingCustom_NotFound:\n\tCLC\n\tRTS\nENDIF\n\n\nAreaTransitionPlacement_Subspace:\n\tLDA PlayerScreenX\n\tSEC\n\tSBC byte_RAM_BA\n\tEOR #$0FF\n\tCLC\n\tADC #$F1\n\tSTA PlayerXLo\n\tLDA PlayerScreenYLo\n\tSTA PlayerYLo\n\tDEC PlayerLock\n\tLDA #$60\n\tSTA SubspaceTimer\n\tRTS\n\n\nAreaTransitionPlacement_Rocket:\n\tJSR AreaTransitionPlacement_Middle\n\tLDA #$60\n\tSTA PlayerYLo\n\tRTS\n\n","htmlComment":"<p>No matches on this tile, check the next one or give up</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">BMI</span> AreaTransitionPlacement_ClimbingCustom_NotFound\n\n\t<span class=\"token opcode property\">JMP</span> AreaTransitionPlacement_ClimbingCustom_Loop\n\nAreaTransitionPlacement_ClimbingCustom_SetXPosition:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nAreaTransitionPlacement_ClimbingCustom_NotFound:\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">RTS</span>\nENDIF\n\n\nAreaTransitionPlacement_Subspace:\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenX\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_BA\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$F1</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">DEC</span> PlayerLock\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> SubspaceTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n\nAreaTransitionPlacement_Rocket:\n\t<span class=\"token opcode property\">JSR</span> AreaTransitionPlacement_Middle\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":4650},{"comment":"\n@TODO\n\nInput\nY = PlayerYHi\nA = PlayerYLo\nOutput\nY = PlayerYHi\nA = PlayerYLo\n","content":"sub_BANK0_95AF:\n\tCPY #$00\n\tBMI locret_BANK0_95C2\n\n\tPHA\n\tTYA\n\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_F\n\tPLA\n\tSEC\n\tSBC byte_RAM_F\n\tBCS locret_BANK0_95C2\n\n\tDEY\n\nlocret_BANK0_95C2:\n\tRTS\n\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nIFNDEF ROBUST_TRANSITION_SEARCH\n","htmlComment":"<p>@TODO</p>\n<p>Input\nY = PlayerYHi\nA = PlayerYLo\nOutput\nY = PlayerYHi\nA = PlayerYLo</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">95</span>AF:\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BMI</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">95</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> byte_RAM_F\n\t<span class=\"token opcode property\">BCS</span> locret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">95</span>C<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\nlocret_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">95</span>C<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nIFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nIFNDEF ROBUST_TRANSITION_SEARCH\n","line":4706},{"comment":"Unused space in the original ($95C3 - $95FF)","content":"unusedSpace $9600, $FF\nENDIF\nENDIF\n\n\nTitleScreenPPUDataPointers:\n\t.dw PPUBuffer_301\n\t.dw TitleLayout\n\n\n","htmlComment":"<p>Unused space in the original ($95C3 - $95FF)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$9600</span>, <span class=\"token hexnumber string\">$FF</span>\nENDIF\nENDIF\n\n\nTitleScreenPPUDataPointers:\n\t<span class=\"token directive keyword\">.dw</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>\n\t<span class=\"token directive keyword\">.dw</span> TitleLayout\n\n\n","line":4732},{"comment":"=============== S U B R O U T I N E =======================================","content":"WaitForNMI_TitleScreen_TurnOnPPU:\n\tLDA #PPUMask_ShowLeft8Pixels_BG | PPUMask_ShowLeft8Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites\n\tSTA PPUMaskMirror\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"WaitForNMI_TitleScreen_TurnOnPPU:\n\t<span class=\"token opcode property\">LDA</span> #PPUMask_ShowLeft<span class=\"token decimalnumber string\">8</span>Pixels_BG | PPUMask_ShowLeft<span class=\"token decimalnumber string\">8</span>Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites\n\t<span class=\"token opcode property\">STA</span> PPUMaskMirror\n","line":4743},{"comment":"End of function WaitForNMI_TitleScreen_TurnOnPPU","content":"\n","htmlComment":"<p>End of function WaitForNMI_TitleScreen_TurnOnPPU</p>\n","htmlContent":"\n","line":4749},{"comment":"=============== S U B R O U T I N E =======================================","content":"WaitForNMI_TitleScreen:\n\tLDA ScreenUpdateIndex\n\tASL A\n\tTAX\n\tLDA TitleScreenPPUDataPointers, X\n\tSTA RAM_PPUDataBufferPointer\n\tLDA TitleScreenPPUDataPointers + 1, X\n\tSTA RAM_PPUDataBufferPointer + 1\n\tLDA #$00\n\tSTA NMIWaitFlag\n\nWaitForNMI_TitleScreenLoop:\n\tLDA NMIWaitFlag\n\tBPL WaitForNMI_TitleScreenLoop\n\n\tRTS\n\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"WaitForNMI_TitleScreen:\n\t<span class=\"token opcode property\">LDA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> TitleScreenPPUDataPointers, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> RAM_PPUDataBufferPointer\n\t<span class=\"token opcode property\">LDA</span> TitleScreenPPUDataPointers + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> RAM_PPUDataBufferPointer + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> NMIWaitFlag\n\nWaitForNMI_TitleScreenLoop:\n\t<span class=\"token opcode property\">LDA</span> NMIWaitFlag\n\t<span class=\"token opcode property\">BPL</span> WaitForNMI_TitleScreenLoop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":4751},{"comment":"End of function WaitForNMI_TitleScreen","content":"TitleLayout:","htmlComment":"<p>End of function WaitForNMI_TitleScreen</p>\n","htmlContent":"TitleLayout:","line":4770},{"comment":"red lines, vertical, left","content":"\t.db $20, $00, $DE, $FD\n\t.db $20, $01, $DE, $FD\n\t.db $20, $02, $DE, $FD\n\t.db $20, $03, $DE, $FD","htmlComment":"<p>red lines, vertical, left</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>","line":4774},{"comment":"red lines, vertical, right","content":"\t.db $20, $1C, $DE, $FD\n\t.db $20, $1D, $DE, $FD\n\t.db $20, $1E, $DE, $FD\n\t.db $20, $1F, $DE, $FD","htmlComment":"<p>red lines, vertical, right</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$1C</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$1D</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$1E</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$1F</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FD</span>","line":4779},{"comment":"red lines, horizontal, top","content":"\t.db $20, $03, $5D, $FD\n\t.db $20, $23, $5D, $FD\n\t.db $20, $43, $5D, $FD\n\t.db $20, $63, $5D, $FD","htmlComment":"<p>red lines, horizontal, top</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$63</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>","line":4784},{"comment":"red lines, vertical, bottom","content":"\t.db $23, $63, $5D, $FD\n\t.db $23, $83, $5D, $FD\n\t.db $23, $A3, $5D, $FD\n","htmlComment":"<p>red lines, vertical, bottom</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$63</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$83</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A3</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$FD</span>\n","line":4789},{"comment":"ornate frame, top","content":"\t.db $20, $68, $10, $48, $4A, $4C, $4E, $50, $51, $52, $53, $54, $55, $56, $57, $58, $5A, $5C, $5E\n\t.db $20, $84, $08, $FD, $22, $23, $24, $49, $4B, $4D, $4F\n\t.db $20, $94, $08, $59, $5B, $5D, $5F, $2E, $2F, $30, $FD\n\t.db $20, $A4, $03, $25, $26, $27\n\t.db $20, $B9, $03, $31, $32, $33\n\t.db $20, $C4, $03, $28, $29, $2A\n\t.db $20, $D9, $03, $34, $35, $36\n\t.db $20, $E3, $03, $2B, $2C, $2D\n\t.db $20, $FA, $03, $37, $38, $39\n\t.db $21, $03, $02, $3A, $3B\n\t.db $21, $1B, $02, $40, $41","htmlComment":"<p>ornate frame, top</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$68</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$48</span>, <span class=\"token hexnumber string\">$4A</span>, <span class=\"token hexnumber string\">$4C</span>, <span class=\"token hexnumber string\">$4E</span>, <span class=\"token hexnumber string\">$50</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$52</span>, <span class=\"token hexnumber string\">$53</span>, <span class=\"token hexnumber string\">$54</span>, <span class=\"token hexnumber string\">$55</span>, <span class=\"token hexnumber string\">$56</span>, <span class=\"token hexnumber string\">$57</span>, <span class=\"token hexnumber string\">$58</span>, <span class=\"token hexnumber string\">$5A</span>, <span class=\"token hexnumber string\">$5C</span>, <span class=\"token hexnumber string\">$5E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$84</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$FD</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$24</span>, <span class=\"token hexnumber string\">$49</span>, <span class=\"token hexnumber string\">$4B</span>, <span class=\"token hexnumber string\">$4D</span>, <span class=\"token hexnumber string\">$4F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$94</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$59</span>, <span class=\"token hexnumber string\">$5B</span>, <span class=\"token hexnumber string\">$5D</span>, <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$2E</span>, <span class=\"token hexnumber string\">$2F</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$FD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$A4</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$25</span>, <span class=\"token hexnumber string\">$26</span>, <span class=\"token hexnumber string\">$27</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$B9</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$31</span>, <span class=\"token hexnumber string\">$32</span>, <span class=\"token hexnumber string\">$33</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$C4</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$28</span>, <span class=\"token hexnumber string\">$29</span>, <span class=\"token hexnumber string\">$2A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$D9</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$34</span>, <span class=\"token hexnumber string\">$35</span>, <span class=\"token hexnumber string\">$36</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$E3</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$2B</span>, <span class=\"token hexnumber string\">$2C</span>, <span class=\"token hexnumber string\">$2D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$FA</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$37</span>, <span class=\"token hexnumber string\">$38</span>, <span class=\"token hexnumber string\">$39</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$3A</span>, <span class=\"token hexnumber string\">$3B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$1B</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$40</span>, <span class=\"token hexnumber string\">$41</span>","line":4794},{"comment":"ornate frame, lines down, top","content":"\t.db $21, $23, $C6, $3C\n\t.db $21, $3C, $C6, $42","htmlComment":"<p>ornate frame, lines down, top</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$C6</span>, <span class=\"token hexnumber string\">$3C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$3C</span>, <span class=\"token hexnumber string\">$C6</span>, <span class=\"token hexnumber string\">$42</span>","line":4806},{"comment":"ornate frame, middle","content":"\t.db $21, $E3, $01, $3D\n\t.db $21, $FC, $01, $60\n\t.db $22, $02, $02, $3E, $3F\n\t.db $22, $1C, $02, $61, $62\n\t.db $22, $22, $02, $43, $44\n\t.db $22, $3C, $02, $63, $64\n\t.db $22, $43, $01, $45\n\t.db $22, $5C, $01, $65","htmlComment":"<p>ornate frame, middle</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$E3</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$3D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$60</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$3E</span>, <span class=\"token hexnumber string\">$3F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$1C</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$61</span>, <span class=\"token hexnumber string\">$62</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$44</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$3C</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$63</span>, <span class=\"token hexnumber string\">$64</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$45</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$5C</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$65</span>","line":4809},{"comment":"ornate frame, lines down, bottom","content":"\t.db $22, $63, $C6, $3C\n\t.db $22, $7C, $C4, $42","htmlComment":"<p>ornate frame, lines down, bottom</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$63</span>, <span class=\"token hexnumber string\">$C6</span>, <span class=\"token hexnumber string\">$3C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$7C</span>, <span class=\"token hexnumber string\">$C4</span>, <span class=\"token hexnumber string\">$42</span>","line":4818},{"comment":"ornate frame, bottom, characters","content":"\t.db $22, $C4, $02, $A6, $A8\n\t.db $22, $E4, $02, $A7, $A9\n\t.db $22, $FA, $04, $80, $82, $88, $8A\n\t.db $23, $04, $02, $90, $92\n\t.db $23, $14, $02, $9E, $A0\n\t.db $23, $1A, $04, $81, $83, $89, $8B\n\t.db $23, $23, $03, $46, $91, $93\n\t.db $23, $2A, $02, $A2, $A4\n\t.db $23, $2E, $0B, $67, $6C, $6E, $70, $72, $69, $9F, $A1, $75, $98, $9A\n\t.db $23, $3A, $04, $84, $86, $8C, $8E\n\t.db $23, $43, $1B, $47, $94, $96, $74, $74, $74, $74, $A3, $A5, $74, $66, $68\n\t.db $6D, $6F, $71, $73, $6A, $6B, $74, $74, $99, $9B, $74, $85, $87, $8D, $8F\n\t.db $23, $64, $05, $95, $97, $FD, $AA ,$AB\n\t.db $23, $77, $04, $9C, $9D, $AA, $AB\n\t.db $23, $89, $02, $AA, $AB\n","htmlComment":"<p>ornate frame, bottom, characters</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$C4</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$A6</span>, <span class=\"token hexnumber string\">$A8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$E4</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$A7</span>, <span class=\"token hexnumber string\">$A9</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$FA</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$82</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$8A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$90</span>, <span class=\"token hexnumber string\">$92</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$14</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$9E</span>, <span class=\"token hexnumber string\">$A0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$1A</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$83</span>, <span class=\"token hexnumber string\">$89</span>, <span class=\"token hexnumber string\">$8B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$46</span>, <span class=\"token hexnumber string\">$91</span>, <span class=\"token hexnumber string\">$93</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$2A</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$A2</span>, <span class=\"token hexnumber string\">$A4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$2E</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$67</span>, <span class=\"token hexnumber string\">$6C</span>, <span class=\"token hexnumber string\">$6E</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$69</span>, <span class=\"token hexnumber string\">$9F</span>, <span class=\"token hexnumber string\">$A1</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$98</span>, <span class=\"token hexnumber string\">$9A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$3A</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$84</span>, <span class=\"token hexnumber string\">$86</span>, <span class=\"token hexnumber string\">$8C</span>, <span class=\"token hexnumber string\">$8E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$1B</span>, <span class=\"token hexnumber string\">$47</span>, <span class=\"token hexnumber string\">$94</span>, <span class=\"token hexnumber string\">$96</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$A3</span>, <span class=\"token hexnumber string\">$A5</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$66</span>, <span class=\"token hexnumber string\">$68</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6D</span>, <span class=\"token hexnumber string\">$6F</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$6A</span>, <span class=\"token hexnumber string\">$6B</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$99</span>, <span class=\"token hexnumber string\">$9B</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$85</span>, <span class=\"token hexnumber string\">$87</span>, <span class=\"token hexnumber string\">$8D</span>, <span class=\"token hexnumber string\">$8F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$64</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$95</span>, <span class=\"token hexnumber string\">$97</span>, <span class=\"token hexnumber string\">$FD</span>, <span class=\"token hexnumber string\">$AA</span> ,<span class=\"token hexnumber string\">$AB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$9C</span>, <span class=\"token hexnumber string\">$9D</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$89</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AB</span>\n","line":4821},{"comment":"SUPER\nSSSSSSSS  UUUUUUUU  PPPPPPPP  EEEEEEEE  RRRRRRRR","content":"\t.db $20, $CB, $0A, $00, $01, $08, $08, $FC, $01, $FC, $08, $FC, $01\n\t.db $20, $EB, $0A, $02, $03, $08, $08, $0A, $05, $0B, $0C, $0A, $0D\n\t.db $21, $0B, $0A, $04, $05, $04, $05, $0E, $07, $FC, $08, $0E, $08\n\t.db $21, $2B, $05, $06, $07, $06, $07, $09\n\t.db $21, $31, $04, $76, $09, $09, $09\n","htmlComment":"<p>SUPER\nSSSSSSSS  UUUUUUUU  PPPPPPPP  EEEEEEEE  RRRRRRRR</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$CB</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$0C</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$2B</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$09</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$31</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>\n","line":4839},{"comment":"TM\nTTT  MMM","content":"\t.db $21, $38, $02, $F9, $FA\n","htmlComment":"<p>TM\nTTT  MMM</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$38</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$F9</span>, <span class=\"token hexnumber string\">$FA</span>\n","line":4847},{"comment":"MARIO\nMMMMMMMMMMMMM  AAAAAAAA  RRRRRRRR  III  OOOOOOOO","content":"\t.db $21, $46, $0A, $00, $0F, $01, $00, $01, $FC, $01, $08, $00, $01\n\t.db $21, $66, $0A, $10, $10, $08, $10, $08, $10, $08, $08, $10, $08\n\t.db $21, $86, $0A, $08, $08, $08, $08, $08, $13, $0D, $08, $08, $08\n\t.db $21, $A6, $0A, $08, $08, $08, $FC, $08, $0E, $08, $08, $08, $08\n\t.db $21, $C6, $0A, $08, $08, $08, $10, $08, $08, $08, $08, $04, $05\n\t.db $21, $E6, $0A, $09, $09, $09, $09, $09, $09, $09, $09, $06, $07\n","htmlComment":"<p>MARIO\nMMMMMMMMMMMMM  AAAAAAAA  RRRRRRRR  III  OOOOOOOO</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$46</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$66</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$86</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$13</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$A6</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$C6</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$05</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$07</span>\n","line":4851},{"comment":"BROS\nBBBBBBBB  RRRRRRRR  OOOOOOOO  SSSSSSSS","content":"\t.db $21, $51, $08, $FC, $01, $FC, $01, $00, $01, $00, $01 ; BROS\n\t.db $21, $71, $08, $10, $08, $10, $08, $10, $08, $10, $08\n\t.db $21, $91, $08, $13, $0D, $13, $0D, $08, $08, $77, $03\n\t.db $21, $B1, $08, $0E, $08, $0E, $08, $08, $08, $12, $08\n\t.db $21, $D1, $09, $13, $05, $08, $08, $04, $05, $04, $05, $08\n\t.db $21, $F1, $09, $11, $07, $09, $09, $06, $07, $06, $07, $09\n","htmlComment":"<p>BROS\nBBBBBBBB  RRRRRRRR  OOOOOOOO  SSSSSSSS</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; BROS</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$91</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$13</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$13</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$03</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$B1</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$12</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$D1</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$13</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$F1</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$11</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$09</span>\n","line":4860},{"comment":"2\n22222222222222222222222","content":"\t.db $22, $0E, $04, $14, $15, $16, $17\n\t.db $22, $2E, $04, $18, $19, $1A, $1B\n\t.db $22, $4E, $04, $1C, $1D, $1E, $1F\n\t.db $22, $6E, $04, $FC, $FC, $FC, $20\n\t.db $22, $8E, $04, $76, $76, $76, $21\n","htmlComment":"<p>2\n22222222222222222222222</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$14</span>, <span class=\"token hexnumber string\">$15</span>, <span class=\"token hexnumber string\">$16</span>, <span class=\"token hexnumber string\">$17</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$2E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$18</span>, <span class=\"token hexnumber string\">$19</span>, <span class=\"token hexnumber string\">$1A</span>, <span class=\"token hexnumber string\">$1B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$4E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$1C</span>, <span class=\"token hexnumber string\">$1D</span>, <span class=\"token hexnumber string\">$1E</span>, <span class=\"token hexnumber string\">$1F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$6E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$8E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$21</span>\n","line":4869},{"comment":"(C) 1988\n(C)  111  999  888  888","content":"\t.db $22, $E9, $05, $F8, $D1, $D9, $D8, $D8  ; (C) 1988\n","htmlComment":"<p>(C) 1988\n(C)  111  999  888  888</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$F8</span>, <span class=\"token hexnumber string\">$D1</span>, <span class=\"token hexnumber string\">$D9</span>, <span class=\"token hexnumber string\">$D8</span>, <span class=\"token hexnumber string\">$D8</span>  <span class=\"token comment\">; (C) 1988</span>\n","line":4877},{"comment":"NINTENDO\nNNN  III  NNN  TTT  EEE  NNN  DDD  OOO","content":"\t.db $22, $EF, $08, $E7, $E2, $E7, $ED, $DE, $E7, $DD, $E8\n\n\t.db $23, $CA, $04, $80, $A0, $A0, $20\n\t.db $23, $D1, $0E, $80, $A8, $AA, $AA, $A2, $22, $00, $00, $88, $AA, $AA, $AA, $AA, $22\n\t.db $23, $E3, $02, $88, $22\n\t.db $23, $EA, $04, $F0, $F8, $F2, $F0\n\t.db $00\n\nIFDEF PAD_TITLE_SCREEN_PPU_DATA\n\t.pad TitleLayout + $300, $00\nENDIF\n\nTitleBackgroundPalettes:\n\t.db $22, $37, $16, $07 ; Most of screen, outline, etc.\n\t.db $22, $30, $31, $0F ; Unused\n\t.db $22, $30, $0F, $0F ; Logo\n\t.db $22, $30, $0F, $0F ; Copyright, Story\n\nTitleSpritePalettes:\n\t.db $22, $30, $28, $0F ; Unused DDP character palettes\n\t.db $22, $30, $25, $0F ; There are no sprites on the title screen,\n\t.db $22, $30, $12, $0F ; so these are totally unused\n\t.db $22, $30, $23, $0F\n\nTitleStoryText_STORY:\n\t.db $EC, $ED, $E8, $EB, $F2 ; STORY\n\nTitleStoryTextPointersHi:\n\t.db >TitleStoryText_Line01\n\t.db >TitleStoryText_Line02\n\t.db >TitleStoryText_Line03\n\t.db >TitleStoryText_Line04\n\t.db >TitleStoryText_Line05\n\t.db >TitleStoryText_Line06\n\t.db >TitleStoryText_Line07\n\t.db >TitleStoryText_Line08\n\t.db >TitleStoryText_Line08 ; For some reason line 8 is referenced twice here, but not used\n\t.db >TitleStoryText_Line09\n\t.db >TitleStoryText_Line10\n\t.db >TitleStoryText_Line11\n\t.db >TitleStoryText_Line12\n\t.db >TitleStoryText_Line13\n\t.db >TitleStoryText_Line14\n\t.db >TitleStoryText_Line15\n\t.db >TitleStoryText_Line16\n\nTitleStoryTextPointersLo:\n\t.db <TitleStoryText_Line01\n\t.db <TitleStoryText_Line02\n\t.db <TitleStoryText_Line03\n\t.db <TitleStoryText_Line04\n\t.db <TitleStoryText_Line05\n\t.db <TitleStoryText_Line06\n\t.db <TitleStoryText_Line07\n\t.db <TitleStoryText_Line08\n\t.db <TitleStoryText_Line08\n\t.db <TitleStoryText_Line09\n\t.db <TitleStoryText_Line10\n\t.db <TitleStoryText_Line11\n\t.db <TitleStoryText_Line12\n\t.db <TitleStoryText_Line13\n\t.db <TitleStoryText_Line14\n\t.db <TitleStoryText_Line15\n\t.db <TitleStoryText_Line16\n\nTitleStoryText_Line01:\n\t.db $F0, $E1, $DE, $E7, $FB, $FB, $E6, $DA, $EB, $E2, $E8, $FB, $E8, $E9, $DE, $E7\n\t.db $DE, $DD, $FB, $DA ; WHEN MARIO OPENED A\n\nTitleStoryText_Line02:\n\t.db $DD, $E8, $E8, $EB, $FB, $DA, $DF, $ED, $DE, $EB, $FB, $FB, $DC, $E5, $E2, $E6\n\t.db $DB, $E2, $E7, $E0 ; DOOR AFTER CLIMBING\n\nTitleStoryText_Line03:\n\t.db $DA, $FB, $E5, $E8, $E7, $E0, $FB, $EC, $ED, $DA, $E2, $EB, $FB, $E2, $E7, $FB\n\t.db $FB, $E1, $E2, $EC ; A LONG STAIR IN HIS\n\nTitleStoryText_Line04:\n\t.db $DD, $EB, $DE, $DA, $E6, $F7, $FB, $DA, $E7, $E8, $ED, $E1, $DE, $EB, $FB, $F0\n\t.db $E8, $EB, $E5, $DD ; DREAM, ANOTHER WORLD\n\nTitleStoryText_Line05:\n\t.db $EC, $E9, $EB, $DE, $DA, $DD, $FB, $FB, $FB, $DB, $DE, $DF, $E8, $EB, $DE, $FB\n\t.db $FB, $E1, $E2, $E6 ; SPREAD BEFORE HIM\n\nTitleStoryText_Line06:\n\t.db $DA, $E7, $DD, $FB, $E1, $DE, $FB, $E1, $DE, $DA, $EB, $DD, $FB, $DA, $FB, $EF\n\t.db $E8, $E2, $DC, $DE ; AND HE HEARD A VOICE\n\nTitleStoryText_Line07:\n\t.db $DC, $DA, $E5, $E5, $FB, $DF, $E8, $EB, $FB, $E1, $DE, $E5, $E9, $FB, $ED, $E8\n\t.db $FB, $FB, $DB, $DE ; CALL FOR HELP TO BE\n\nTitleStoryText_Line08:\n\t.db $FB, $DF, $EB, $DE, $DE, $DD, $FB, $FB, $DF, $EB, $E8, $E6, $FB, $DA, $FB, $EC\n\t.db $E9, $DE, $E5, $E5 ; FREED FROM A SPELL\n\nTitleStoryText_Line09:\n\t.db $DA, $DF, $ED, $DE, $EB, $FB, $FB, $DA, $F0, $DA, $E4, $DE, $E7, $E2, $E7, $E0\n\t.db $F7, $FB, $FB, $FB ; AFTER AWAKENING,\n\nTitleStoryText_Line10:\n\t.db $E6, $DA, $EB, $E2, $E8, $FB, $FB, $F0, $DE, $E7, $ED, $FB, $ED, $E8, $FB, $FB\n\t.db $DA, $FB, $FB, $FB ; MARIO WENT TO A\n\nTitleStoryText_Line11:\n\t.db $DC, $DA, $EF, $DE, $FB, $FB, $E7, $DE, $DA, $EB, $DB, $F2, $FB, $DA, $E7, $DD\n\t.db $FB, $FB, $ED, $E8 ; CAVE NEARBY AND TO\n\nTitleStoryText_Line12:\n\t.db $E1, $E2, $EC, $FB, $FB, $EC, $EE, $EB, $E9, $EB, $E2, $EC, $DE, $FB, $E1, $DE\n\t.db $FB, $EC, $DA, $F0 ; HIS SURPRISE HE SAW\n\nTitleStoryText_Line13:\n\t.db $DE, $F1, $DA, $DC, $ED, $E5, $F2, $FB, $FB, $F0, $E1, $DA, $ED, $FB, $E1, $DE\n\t.db $FB, $EC, $DA, $F0 ; EXACTLY WHAT HE SAW\n\nTitleStoryText_Line14:\n\t.db $E2, $E7, $FB, $E1, $E2, $EC, $FB, $DD, $EB, $DE, $DA, $E6, $CF, $CF, $CF, $CF\n\t.db $FB, $FB, $FB, $FB ; IN HIS DREAM....\n\nTitleStoryText_Line15:\n\t.db $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB, $FB\n\t.db $FB, $FB, $FB, $FB ; (blank)\n\nTitleStoryText_Line16:\n\t.db $FB, $FB, $E9, $EE, $EC, $E1, $FB, $EC, $ED, $DA, $EB, $ED, $FB, $DB, $EE, $ED\n\t.db $ED, $E8, $E7, $FB ; PUSH START BUTTON\n\nTitleAttributeData1:\n\t.db $23, $CB, $42, $FF\n\t.db $23, $D1, $01, $CC\n\t.db $23, $D2, $44, $FF\n\t.db $23, $D6, $01, $33\n\t.db $23, $D9, $01, $CC\n\t.db $23, $DA, $44, $FF\n\nTitleAttributeData2:\n\t.db $23, $DE, $01, $33\n\t.db $23, $E1, $01, $CC\n\t.db $23, $E2, $44, $FF\n\t.db $23, $E6, $01, $33\n\t.db $23, $EA, $44, $FF\n\t.db $23, $E9, $01, $CC\n\t.db $23, $EE, $01, $33\n\n\n","htmlComment":"<p>NINTENDO\nNNN  III  NNN  TTT  EEE  NNN  DDD  OOO</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$EF</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$E8</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$CA</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$D1</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$A8</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$A2</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$22</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$E3</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$22</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$EA</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$F8</span>, <span class=\"token hexnumber string\">$F2</span>, <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nIFDEF PAD_TITLE_SCREEN_PPU_DATA\n\t<span class=\"token directive keyword\">.pad</span> TitleLayout + <span class=\"token hexnumber string\">$300</span>, <span class=\"token hexnumber string\">$00</span>\nENDIF\n\nTitleBackgroundPalettes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$37</span>, <span class=\"token hexnumber string\">$16</span>, <span class=\"token hexnumber string\">$07</span> <span class=\"token comment\">; Most of screen, outline, etc.</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$31</span>, <span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; Unused</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; Logo</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; Copyright, Story</span>\n\nTitleSpritePalettes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$28</span>, <span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; Unused DDP character palettes</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$25</span>, <span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; There are no sprites on the title screen,</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$12</span>, <span class=\"token hexnumber string\">$0F</span> <span class=\"token comment\">; so these are totally unused</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$0F</span>\n\nTitleStoryText_STORY:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$F2</span> <span class=\"token comment\">; STORY</span>\n\nTitleStoryTextPointersHi:\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">01</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">02</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">03</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">04</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">05</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">06</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">07</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">08</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">08</span> <span class=\"token comment\">; For some reason line 8 is referenced twice here, but not used</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">09</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">11</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">13</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">14</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">15</span>\n\t<span class=\"token directive keyword\">.db</span> >TitleStoryText_Line<span class=\"token decimalnumber string\">16</span>\n\nTitleStoryTextPointersLo:\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">01</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">02</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">03</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">04</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">05</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">06</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">07</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">08</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">08</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">09</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">11</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">13</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">14</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">15</span>\n\t<span class=\"token directive keyword\">.db</span> &#x3C;TitleStoryText_Line<span class=\"token decimalnumber string\">16</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">01</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span> <span class=\"token comment\">; WHEN MARIO OPENED A</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">02</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$DF</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E0</span> <span class=\"token comment\">; DOOR AFTER CLIMBING</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">03</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E0</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$EC</span> <span class=\"token comment\">; A LONG STAIR IN HIS</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">04</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$F7</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$DD</span> <span class=\"token comment\">; DREAM, ANOTHER WORLD</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">05</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DF</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E6</span> <span class=\"token comment\">; SPREAD BEFORE HIM</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">06</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$DE</span> <span class=\"token comment\">; AND HE HEARD A VOICE</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">07</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DF</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DB</span>, <span class=\"token hexnumber string\">$DE</span> <span class=\"token comment\">; CALL FOR HELP TO BE</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">08</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DF</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DF</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$E5</span> <span class=\"token comment\">; FREED FROM A SPELL</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">09</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$DF</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E4</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F7</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; AFTER AWAKENING,</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">10</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; MARIO WENT TO A</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">11</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EF</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DB</span>, <span class=\"token hexnumber string\">$F2</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$DD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span> <span class=\"token comment\">; CAVE NEARBY AND TO</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">12</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$EE</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$F0</span> <span class=\"token comment\">; HIS SURPRISE HE SAW</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">13</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$F1</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$F2</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$F0</span> <span class=\"token comment\">; EXACTLY WHAT HE SAW</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">14</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$CF</span>, <span class=\"token hexnumber string\">$CF</span>, <span class=\"token hexnumber string\">$CF</span>, <span class=\"token hexnumber string\">$CF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; IN HIS DREAM....</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">15</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; (blank)</span>\n\nTitleStoryText_Line<span class=\"token decimalnumber string\">16</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$EE</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DB</span>, <span class=\"token hexnumber string\">$EE</span>, <span class=\"token hexnumber string\">$ED</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; PUSH START BUTTON</span>\n\nTitleAttributeData<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$CB</span>, <span class=\"token hexnumber string\">$42</span>, <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$D1</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$CC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$D2</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$D6</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$33</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$D9</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$CC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$FF</span>\n\nTitleAttributeData<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$33</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$CC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$33</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$EA</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$CC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$EE</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$33</span>\n\n\n","line":4881},{"comment":"=============== S U B R O U T I N E =======================================","content":"TitleScreen:\n\tLDY #$07 ; Does initialization of RAM.\n\tSTY byte_RAM_1 ; This clears $200 to $7FF.\n\tLDY #$00\n\tSTY byte_RAM_0\n\tTYA\n\nInitMemoryLoop:\n\tSTA (byte_RAM_0), Y ; I'm not sure if a different method of initializing memory","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"TitleScreen:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$07</span> <span class=\"token comment\">; Does initialization of RAM.</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">1</span> <span class=\"token comment\">; This clears $200 to $7FF.</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">TYA</span>\n\nInitMemoryLoop:\n\t<span class=\"token opcode property\">STA</span> (byte_RAM_<span class=\"token decimalnumber string\">0</span>), <span class=\"token register variable\">Y</span> <span class=\"token comment\">; I'm not sure if a different method of initializing memory</span>","line":5029},{"comment":"would work better in this case.","content":"\tDEY\n\tBNE InitMemoryLoop\n\n\tDEC byte_RAM_1\n\tLDX byte_RAM_1\n\tCPX #$02\n\tBCS InitMemoryLoop ; Stop initialization after we hit $200.\n\nloc_BANK0_9A53:\n\tLDA #$00\n\tTAY\n\nInitMemoryLoop2:","htmlComment":"<p>would work better in this case.</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> InitMemoryLoop\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">BCS</span> InitMemoryLoop <span class=\"token comment\">; Stop initialization after we hit $200.</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">53</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nInitMemoryLoop<span class=\"token decimalnumber string\">2</span>:","line":5040},{"comment":"Clear $0000-$00FF.\nNotably, this leaves the stack area $0100-$01FF uninitialized.\nThis is not super important, but you might want to do it yourself to\ntrack stack corruption or whatever.","content":"\tSTA byte_RAM_0, Y\n\tINY\n\tBNE InitMemoryLoop2\n\n\tJSR LoadTitleScreenCHRBanks\n\n\tJSR ClearNametablesAndSprites\n\n\tLDA PPUSTATUS\n\tLDA #$3F\n\tLDY #$00\n\tSTA PPUADDR\n\tSTY PPUADDR\n\nloc_BANK0_9A6F:\n\tLDA TitleBackgroundPalettes, Y\n\tSTA PPUDATA\n\tINY\n\tCPY #$20\n\tBCC loc_BANK0_9A6F\n\n\tLDA #$01\n\tSTA RAM_PPUDataBufferPointer\n\tLDA #$03\n\tSTA RAM_PPUDataBufferPointer + 1\n\tLDA #Stack100_Menu\n\tSTA StackArea\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x8 | PPUCtrl_NMIEnabled\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA #$01 ; @TODO\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA #Music1_Title\n\tSTA MusicQueue1\n\tJSR WaitForNMI_TitleScreen_TurnOnPPU\n\n\tLDA #$03\n\tSTA byte_RAM_10\n\tLDA #$25\n\tSTA byte_RAM_2\n\tLDA #$20\n\tSTA PlayerXHi\n\tLDA #$C7\n\tSTA ObjectXHi\n\tLDA #$52\n\tSTA ObjectXHi + 1\n\nloc_BANK0_9AB4:\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA ObjectXHi + 2\n\tBNE loc_BANK0_9AF3\n\nloc_BANK0_9ABB:\n\tINC byte_RAM_10\n\tLDA byte_RAM_10\n\tAND #$0F\n\tBEQ loc_BANK0_9AC6\n\n\tJMP loc_BANK0_9B4D\n\n","htmlComment":"<p>Clear $0000-$00FF.\nNotably, this leaves the stack area $0100-$01FF uninitialized.\nThis is not super important, but you might want to do it yourself to\ntrack stack corruption or whatever.</p>\n","htmlContent":"\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">BNE</span> InitMemoryLoop<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">JSR</span> LoadTitleScreenCHRBanks\n\n\t<span class=\"token opcode property\">JSR</span> ClearNametablesAndSprites\n\n\t<span class=\"token opcode property\">LDA</span> PPUSTATUS\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3F</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUADDR\n\t<span class=\"token opcode property\">STY</span> PPUADDR\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>F:\n\t<span class=\"token opcode property\">LDA</span> TitleBackgroundPalettes, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUDATA\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">6</span>F\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> RAM_PPUDataBufferPointer\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> RAM_PPUDataBufferPointer + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> #Stack<span class=\"token decimalnumber string\">100</span>_Menu\n\t<span class=\"token opcode property\">STA</span> StackArea\n\t<span class=\"token opcode property\">LDA</span> #PPUCtrl_Base<span class=\"token decimalnumber string\">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class=\"token decimalnumber string\">0000</span> | PPUCtrl_Background<span class=\"token decimalnumber string\">1000</span> | PPUCtrl_SpriteSize<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">8</span> | PPUCtrl_NMIEnabled\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">STA</span> PPUCTRL\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span> <span class=\"token comment\">; @TODO</span>\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen\n\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">1</span>_Title\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen_TurnOnPPU\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$25</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C7</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$52</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi + <span class=\"token decimalnumber string\">1</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>AB<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>AF<span class=\"token decimalnumber string\">3</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>ABB:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>AC<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">4</span>D\n\n","line":5057},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9AC6:\n\tDEC byte_RAM_2\n\tLDA byte_RAM_2\n\tCMP #$06\n\tBNE loc_BANK0_9B4D\n\n\tINC ObjectXHi + 2\n\tLDA PlayerXHi\n\tSTA PPUBuffer_301\n\tLDA ObjectXHi\n\tSTA PPUBuffer_301 + 1\n\tLDA ObjectXHi + 1\n\tSTA PPUBuffer_301 + 2\n\tLDA #$E6\n\tSTA ObjectXHi\n\tLDA #$54\n\tSTA ObjectXHi + 1\n\tLDA #$0FB\n\tSTA PPUBuffer_301 + 3\n\tLDA #$00\n\tSTA PPUBuffer_301 + 4\n\tBEQ loc_BANK0_9B4D\n\nloc_BANK0_9AF3:\n\tLDA PlayerXHi\n\tSTA PPUBuffer_301\n\tLDA ObjectXHi\n\tSTA PPUBuffer_301 + 1\n\tLDA ObjectXHi + 1\n\tSTA PPUBuffer_301 + 2\n\tLDA #$0FB\n\tSTA PPUBuffer_301 + 3\n\tLDA #$00\n\tSTA PPUBuffer_301 + 4\n\tLDA ObjectXHi\n\tCLC\n\tADC #$20\n\tSTA ObjectXHi\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA PlayerXHi\n\tCMP #$23\n\nloc_BANK0_9B1B:\n\tBCC loc_BANK0_9B4D\n\n\tLDA #$20\n\tSTA byte_RAM_10\n\tLDX #$17\n\tLDY #$00\n\nloc_BANK0_9B25:\n\tLDA TitleAttributeData1, Y\n\tSTA PPUBuffer_301 + 4, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_9B25\n\n\tLDA #$00\n\tSTA PPUBuffer_301 + 4, Y\n\tJSR WaitForNMI_TitleScreen\n\n\tLDX #$1B\n\tLDY #$00\n\nloc_BANK0_9B3B:\n\tLDA TitleAttributeData2, Y\n\tSTA PPUBuffer_301, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_9B3B\n\n\tLDA #$00\n\tSTA PPUBuffer_301, Y\n\tJMP loc_BANK0_9B59\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>AC<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">4</span>D\n\n\t<span class=\"token opcode property\">INC</span> ObjectXHi + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$54</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FB</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">4</span>D\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>AF<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FB</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$23</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">1</span>B:\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">4</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$17</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">25</span>:\n\t<span class=\"token opcode property\">LDA</span> TitleAttributeData<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">25</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$1B</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">3</span>B:\n\t<span class=\"token opcode property\">LDA</span> TitleAttributeData<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">3</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">59</span>\n\n","line":5123},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9B4D:\n\tLDA Player1JoypadPress\n\tAND #ControllerInput_Start\n\tBEQ loc_BANK0_9B56\n\n\tJMP loc_BANK0_9C1F\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">4</span>D:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Start\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">56</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">1</span>F\n\n","line":5201},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9B56:\n\tJMP loc_BANK0_9AB4\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">56</span>:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>AB<span class=\"token decimalnumber string\">4</span>\n\n","line":5210},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9B59:\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA ObjectXHi + 4\n\tBEQ loc_BANK0_9B63\n\n\tJMP loc_BANK0_9C19\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">59</span>:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">63</span>\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>\n\n","line":5215},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9B63:\n\tLDA ObjectXHi + 3\n\tCMP #$09\n\tBEQ loc_BANK0_9B93\n\n\tLDA ObjectXHi + 3\n\tBNE loc_BANK0_9BA3\n\n\tDEC byte_RAM_10\n\tBMI TitleScreen_WriteSTORYText\n\n\tJMP loc_BANK0_9C19\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">63</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">93</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BA<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BMI</span> TitleScreen_WriteSTORYText\n\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>\n\n","line":5225},{"comment":"---------------------------------------------------------------------------","content":"TitleScreen_WriteSTORYText:\n\tLDA #$20\n\tSTA PPUBuffer_301\n\tLDA #$0AE\n\tSTA PPUBuffer_301 + 1\n\tLDA #$05 ; Length of STORY text (5 bytes)\n\tSTA PPUBuffer_301 + 2\n\tLDY #$04 ; Bytes to copy minus one (5-1=4)\n\nTitleScreen_WriteSTORYTextLoop:\n\tLDA TitleStoryText_STORY, Y ; Copy STORY text to PPU write buffer\n\tSTA PPUBuffer_301 + 3, Y\n\tDEY\n\tBPL TitleScreen_WriteSTORYTextLoop\n\n\tLDA #$00 ; Terminate STORY text in buffer\n\tSTA PPUBuffer_301 + 8\n\nloc_BANK0_9B93:\n\tINC ObjectXHi + 3\n\tLDA #$21\n\tSTA PlayerXHi\n\tLDA #$06\n\tSTA ObjectXHi\n\tLDA #$40\n\tSTA ObjectXHi + 5\n\tBNE loc_BANK0_9C19\n\nloc_BANK0_9BA3:\n\tDEC ObjectXHi + 5\n\tBPL loc_BANK0_9C19\n\nloc_BANK0_9BA7:\n\tLDA #$40\n\tSTA ObjectXHi + 5\n\tLDA PlayerXHi\n\tSTA PPUBuffer_301\n\nloc_BANK0_9BB0:\n\tLDA ObjectXHi\n\nloc_BANK0_9BB2:\n\tSTA PPUBuffer_301 + 1\n\tLDA #$14\n\tSTA PPUBuffer_301 + 2\n\tLDX ObjectXHi + 3\n\tDEX\n\tLDA TitleStoryTextPointersHi, X\n\tSTA byte_RAM_4\n\tLDA TitleStoryTextPointersLo, X\n\tSTA byte_RAM_3\n\tLDY #$00\n\tLDX #$13\n\nloc_BANK0_9BCB:\n\tLDA (byte_RAM_3), Y\n\tSTA PPUBuffer_301 + 3, Y\n\tINY\n\tDEX\n\tBPL loc_BANK0_9BCB\n\n\tLDA #$00\n\tSTA PPUBuffer_301 + 3, Y\n\tINC ObjectXHi + 3\n\tLDA ObjectXHi\n\tCLC\n\tADC #$40\n\tSTA ObjectXHi\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA PlayerXHi\n\tLDA ObjectXHi + 3\n\tCMP #$09\n\tBCC loc_BANK0_9C19\n\n\tBNE loc_BANK0_9C0B\n\n\tLDA #$09\n\tSTA byte_RAM_2\n\tLDA #$03\n\tSTA byte_RAM_10\n\tLDA #$20\n\tSTA PlayerXHi\n\tLDA #$C7\n\tSTA ObjectXHi\n\tLDA #$52\n\tSTA ObjectXHi + 1\n\tLDA #$00\n\tSTA ObjectXHi + 2\n\tJMP loc_BANK0_9ABB\n\n","htmlComment":"<hr>\n","htmlContent":"TitleScreen_WriteSTORYText:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0AE</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$05</span> <span class=\"token comment\">; Length of STORY text (5 bytes)</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span> <span class=\"token comment\">; Bytes to copy minus one (5-1=4)</span>\n\nTitleScreen_WriteSTORYTextLoop:\n\t<span class=\"token opcode property\">LDA</span> TitleStoryText_STORY, <span class=\"token register variable\">Y</span> <span class=\"token comment\">; Copy STORY text to PPU write buffer</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> TitleScreen_WriteSTORYTextLoop\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span> <span class=\"token comment\">; Terminate STORY text in buffer</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">93</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectXHi + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$21</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi + <span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BA<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">DEC</span> ObjectXHi + <span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BA<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi + <span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BB<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BB<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$14</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDX</span> ObjectXHi + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">LDA</span> TitleStoryTextPointersHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> TitleStoryTextPointersLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$13</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BCB:\n\t<span class=\"token opcode property\">LDA</span> (byte_RAM_<span class=\"token decimalnumber string\">3</span>), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>BCB\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span> + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INC</span> ObjectXHi + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$40</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>\n\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">0</span>B\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$09</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C7</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$52</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi + <span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi + <span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>ABB\n\n","line":5240},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9C0B:\n\tCMP #$12\n\tBCC loc_BANK0_9C19\n\n\tINC ObjectXHi + 4\n\tLDA #$25\n\tSTA byte_RAM_2\n\tLDA #$03\n\tSTA byte_RAM_10\n\nloc_BANK0_9C19:\n\tLDA Player1JoypadHeld\n\tAND #ControllerInput_Start\n\tBEQ loc_BANK0_9C35\n\nloc_BANK0_9C1F:\n\tLDA #Music2_StopMusic\n\tSTA MusicQueue2\n\tJSR WaitForNMI_TitleScreen\n\n\tLDA #$00\n\tTAY\n\nloc_BANK0_9C2A:\n\tSTA byte_RAM_0, Y\n\tINY\n\tCPY #$F0\n\tBCC loc_BANK0_9C2A\n\n\tJMP HideAllSprites\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">0</span>B:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$12</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>\n\n\t<span class=\"token opcode property\">INC</span> ObjectXHi + <span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$25</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">19</span>:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">1</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Start\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">35</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">1</span>F:\n\t<span class=\"token opcode property\">LDA</span> #Music<span class=\"token decimalnumber string\">2</span>_StopMusic\n\t<span class=\"token opcode property\">STA</span> MusicQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_TitleScreen\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">TAY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">2</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">2</span><span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">JMP</span> HideAllSprites\n\n","line":5333},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9C35:\n\tLDA ObjectXHi + 4\n\tBEQ loc_BANK0_9C4B\n\n\tINC byte_RAM_10\n\tLDA byte_RAM_10\n\tAND #$0F\n\tBNE loc_BANK0_9C4B\n\n\tDEC byte_RAM_2\n\tLDA byte_RAM_2\n\tCMP #$06\n\tBNE loc_BANK0_9C4B\n\n\tBEQ loc_BANK0_9C4E\n\nloc_BANK0_9C4B:\n\tJMP loc_BANK0_9B59\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">35</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi + <span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">4</span>B\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">4</span>B\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$06</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">4</span>B\n\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">4</span>E\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">4</span>B:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>B<span class=\"token decimalnumber string\">59</span>\n\n","line":5366},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK0_9C4E:\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x8 | PPUCtrl_NMIDisabled\n\tSTA PPUCtrlMirror\n\nloc_BANK0_9C52:\n\tSTA PPUCTRL\n\tJMP loc_BANK0_9A53\n\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">4</span>E:\n\t<span class=\"token opcode property\">LDA</span> #PPUCtrl_Base<span class=\"token decimalnumber string\">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class=\"token decimalnumber string\">0000</span> | PPUCtrl_Background<span class=\"token decimalnumber string\">1000</span> | PPUCtrl_SpriteSize<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">8</span> | PPUCtrl_NMIDisabled\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\nloc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span>C<span class=\"token decimalnumber string\">52</span>:\n\t<span class=\"token opcode property\">STA</span> PPUCTRL\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">0</span>_<span class=\"token decimalnumber string\">9</span><span class=\"token register variable\">A</span><span class=\"token decimalnumber string\">53</span>\n\n\n","line":5387},{"comment":"End of function TitleScreen","content":"","htmlComment":"<p>End of function TitleScreen</p>\n","htmlContent":"","line":5397},{"comment":"Unused space in the original ($9C58 - $A1FF)","content":"unusedSpace $A200, $FF\n\n\nEndingPPUDataPointers:\n\t.dw PPUBuffer_301\n\t.dw EndingCorkJarRoom\n\t.dw EndingCelebrationCeilingTextAndPodium\n\t.dw EndingCelebrationFloorAndSubconParade\n\t.dw EndingCelebrationPaletteFade1\n\t.dw EndingCelebrationPaletteFade2\n\t.dw EndingCelebrationPaletteFade3\n\t.dw EndingCelebrationSubconStandStill\n\t.dw EndingCelebrationUnusedText_THE_END\n\t.dw EndingCelebrationText_MARIO\n\t.dw EndingCelebrationText_PRINCESS\n\t.dw EndingCelebrationText_TOAD\n\t.dw EndingCelebrationText_LUIGI\n\n\nWaitForNMI_Ending_TurnOffPPU:\n\tLDA #$00\n\tBEQ WaitForNMI_Ending_SetPPUMaskMirror\n\nWaitForNMI_Ending_TurnOnPPU:\n\tLDA #PPUMask_ShowLeft8Pixels_BG | PPUMask_ShowLeft8Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites\n\nWaitForNMI_Ending_SetPPUMaskMirror:\n\tSTA PPUMaskMirror\n\nWaitForNMI_Ending:\n\tLDA ScreenUpdateIndex\n\tASL A\n\tTAX\n\tLDA EndingPPUDataPointers, X\n\tSTA RAM_PPUDataBufferPointer\n\tLDA EndingPPUDataPointers + 1, X\n\tSTA RAM_PPUDataBufferPointer + 1\n\n\tLDA #$00\n\tSTA NMIWaitFlag\nWaitForNMI_EndingLoop:\n\tLDA NMIWaitFlag\n\tBPL WaitForNMI_EndingLoop\n\n\tRTS\n\n\nEndingCorkJarRoom:\n\t.db $20, $00, $9E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73\n\t.db $20, $01, $9E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72\n\t.db $22, $02, $8E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73\n\t.db $22, $03, $8E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72\n\t.db $23, $44, $18, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $23, $64, $18, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $23, $84, $18, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $23, $A4, $18, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $22, $1C, $8E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73\n\t.db $22, $1D, $8E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72\n\t.db $20, $1E, $9E, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73\n\t.db $20, $1F, $9E, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72\n\t.db $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73, $72, $73\n\t.db $72, $73, $72\n\t.db $22, $C6, $C4, $FC\n\t.db $22, $C7, $C4, $FC\n\t.db $22, $C8, $84, $AD, $AC, $AC, $AC\n\t.db $22, $E9, $83, $AD, $AC, $AC\n\t.db $23, $0A, $82, $AD, $AC\n\t.db $23, $2B, $01, $AD\n\t.db $22, $90, $84, $88, $89, $89, $8C\n\t.db $22, $91, $84, $8A, $8B, $8B, $8D\n\t.db $23, $0E, $06, $74, $76, $74, $76, $74, $76\n\t.db $23, $2E, $06, $75, $77, $75, $77, $75, $77\n\t.db $23, $C0, $20, $22, $00, $00, $00, $00, $00, $00, $88, $22, $00, $00, $00, $00, $00, $00, $88, $22, $00\n\t.db $00, $00, $00, $00, $00, $88, $22, $00, $00, $00, $00, $00, $00, $88\n\t.db $23, $E0, $20, $AA, $00, $00, $00, $00, $00, $00, $AA, $AA, $00, $00, $00, $11, $00, $00, $AA, $AA\n\t.db $A0, $A0, $A4, $A5, $A0, $A0, $AA, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A\n\t.db $00\n\nEndingCelebrationUnusedText_THANK_YOU:\n\t.db $21, $0C, $09, $ED, $E1, $DA, $E7, $E4, $FB, $F2, $E8, $EE\n\t.db $00\n\nCorkRoomSpriteStartX:\n\t.db $30 ; player\n\t.db $80 ; subcon 8\n\t.db $80 ; subcon 7\n\t.db $80 ; subcon 6\n\t.db $80 ; subcon 5\n\t.db $80 ; subcon 4\n\t.db $80 ; subcon 3\n\t.db $80 ; subcon 2\n\t.db $80 ; subcon 1\n\t.db $80 ; cork\n\nCorkRoomSpriteStartY:\n\t.db $B0 ; player\n\t.db $A0 ; subcon 8\n\t.db $A0 ; subcon 7\n\t.db $A0 ; subcon 6\n\t.db $A0 ; subcon 5\n\t.db $A0 ; subcon 4\n\t.db $A0 ; subcon 3\n\t.db $A0 ; subcon 2\n\t.db $A0 ; subcon 1\n\t.db $95 ; cork\n\nCorkRoomSpriteTargetX:\n\t.db $10 ; player\n\t.db $F4 ; subcon 8\n\t.db $0C ; subcon 7\n\t.db $E8 ; subcon 6\n\t.db $18 ; subcon 5\n\t.db $EC ; subcon 4\n\t.db $14 ; subcon 3\n\t.db $F8 ; subcon 2\n\t.db $08 ; subcon 1\n\t.db $00 ; cork\n\nCorkRoomSpriteTargetY:\n\t.db $00 ; player\n\t.db $C4 ; subcon 8\n\t.db $C4 ; subcon 7\n\t.db $B8 ; subcon 6\n\t.db $B8 ; subcon 5\n\t.db $A8 ; subcon 4\n\t.db $A8 ; subcon 3\n\t.db $A0 ; subcon 2\n\t.db $A0 ; subcon 1\n\t.db $00 ; cork\n\nCorkRoomSpriteDelay:\n\t.db $00 ; player\n\t.db $F0 ; subcon 8\n\t.db $E0 ; subcon 7\n\t.db $C0 ; subcon 6\n\t.db $A0 ; subcon 5\n\t.db $80 ; subcon 4\n\t.db $60 ; subcon 3\n\t.db $40 ; subcon 2\n\t.db $20 ; subcon 1\n\t.db $00 ; cork\n\nCorkRoomSpriteAttributes:\n\t.db $00 ; player\n\t.db $21 ; subcon 8\n\t.db $61 ; subcon 7\n\t.db $21 ; subcon 6\n\t.db $61 ; subcon 5\n\t.db $21 ; subcon 4\n\t.db $61 ; subcon 3\n\t.db $21 ; subcon 2\n\t.db $61 ; subcon 1\n\t.db $22 ; cork\n\n\nFreeSubconsScene:\n\tJSR WaitForNMI_Ending_TurnOffPPU\n\tJSR ClearNametablesAndSprites\n\n\tLDA #Stack100_Menu\n\tSTA StackArea\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x16 | PPUCtrl_NMIEnabled\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tJSR WaitForNMI_Ending\n\n\tLDA #EndingUpdateBuffer_JarRoom\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_Ending\n\n\tLDA #$60\n\tSTA FreeSubconsTimer\n\tLDA #$01\n\tSTA PlayerDirection\n\tLSR A\n\tSTA PlayerState ; A=$00\n\tSTA FreeSubconsCorkCounter\n\tSTA CrouchJumpTimer\n\tSTA byte_RAM_E6\n\tSTA byte_RAM_E5\n\tSTA SpriteFlickerSlot\n\n\tLDX #$09\nFreeSubconsScene_SpriteLoop:\n\tLDA CorkRoomSpriteStartX, X\n\tSTA ObjectXLo - 1, X\n\tLDA CorkRoomSpriteStartY, X\n\tSTA ObjectYLo - 1, X\n\tLDA CorkRoomSpriteTargetX, X\n\tSTA ObjectXVelocity - 1, X\n\tLDA CorkRoomSpriteTargetY, X\n\tSTA ObjectYVelocity - 1, X\n\tLDA CorkRoomSpriteDelay, X\n\tSTA EnemyTimer - 1, X\n\tLDA CorkRoomSpriteAttributes, X\n\tSTA ObjectAttributes - 1, X\n\tDEX\n\tBPL FreeSubconsScene_SpriteLoop\n\nFreeSubconsScene_JumpingLoop:\n\tJSR WaitForNMI_Ending_TurnOnPPU\n\n\tINC byte_RAM_10\n\tJSR HideAllSprites\n\n\tJSR FreeSubconsScene_Player\n\n\tJSR FreeSubconsScene_Cork\n\n\tLDA FreeSubconsTimer\n\tBEQ FreeSubconsScene_Exit\n\n\tLDA byte_RAM_10\n\tAND #$07\n\tBNE FreeSubconsScene_JumpingLoop\n\n\tDEC FreeSubconsTimer\n\tLDA FreeSubconsTimer\n\tCMP #$25\n\tBNE FreeSubconsScene_JumpingLoop\n\n\tLDY #Music2_EndingAndCast\n\tSTY MusicQueue2\n\tBNE FreeSubconsScene_JumpingLoop\n\nFreeSubconsScene_Exit:\n\tJSR EndingSceneTransition\n\n\tLDA byte_RAM_E6\n\tBEQ FreeSubconsScene_JumpingLoop\n\n\tRTS\n\n","htmlComment":"<p>Unused space in the original ($9C58 - $A1FF)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$A200</span>, <span class=\"token hexnumber string\">$FF</span>\n\n\nEndingPPUDataPointers:\n\t<span class=\"token directive keyword\">.dw</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>\n\t<span class=\"token directive keyword\">.dw</span> EndingCorkJarRoom\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationCeilingTextAndPodium\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationFloorAndSubconParade\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationPaletteFade<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationPaletteFade<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationPaletteFade<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationSubconStandStill\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationUnusedText_THE_END\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationText_MARIO\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationText_PRINCESS\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationText_TOAD\n\t<span class=\"token directive keyword\">.dw</span> EndingCelebrationText_LUIGI\n\n\nWaitForNMI_Ending_TurnOffPPU:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> WaitForNMI_Ending_SetPPUMaskMirror\n\nWaitForNMI_Ending_TurnOnPPU:\n\t<span class=\"token opcode property\">LDA</span> #PPUMask_ShowLeft<span class=\"token decimalnumber string\">8</span>Pixels_BG | PPUMask_ShowLeft<span class=\"token decimalnumber string\">8</span>Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites\n\nWaitForNMI_Ending_SetPPUMaskMirror:\n\t<span class=\"token opcode property\">STA</span> PPUMaskMirror\n\nWaitForNMI_Ending:\n\t<span class=\"token opcode property\">LDA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> EndingPPUDataPointers, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> RAM_PPUDataBufferPointer\n\t<span class=\"token opcode property\">LDA</span> EndingPPUDataPointers + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> RAM_PPUDataBufferPointer + <span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> NMIWaitFlag\nWaitForNMI_EndingLoop:\n\t<span class=\"token opcode property\">LDA</span> NMIWaitFlag\n\t<span class=\"token opcode property\">BPL</span> WaitForNMI_EndingLoop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEndingCorkJarRoom:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$9E</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$9E</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$8E</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$8E</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$18</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$64</span>, <span class=\"token hexnumber string\">$18</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$84</span>, <span class=\"token hexnumber string\">$18</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A4</span>, <span class=\"token hexnumber string\">$18</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$1C</span>, <span class=\"token hexnumber string\">$8E</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$1D</span>, <span class=\"token hexnumber string\">$8E</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$1E</span>, <span class=\"token hexnumber string\">$9E</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$1F</span>, <span class=\"token hexnumber string\">$9E</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$C6</span>, <span class=\"token hexnumber string\">$C4</span>, <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$C7</span>, <span class=\"token hexnumber string\">$C4</span>, <span class=\"token hexnumber string\">$FC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$C8</span>, <span class=\"token hexnumber string\">$84</span>, <span class=\"token hexnumber string\">$AD</span>, <span class=\"token hexnumber string\">$AC</span>, <span class=\"token hexnumber string\">$AC</span>, <span class=\"token hexnumber string\">$AC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$83</span>, <span class=\"token hexnumber string\">$AD</span>, <span class=\"token hexnumber string\">$AC</span>, <span class=\"token hexnumber string\">$AC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$82</span>, <span class=\"token hexnumber string\">$AD</span>, <span class=\"token hexnumber string\">$AC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$2B</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$AD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$90</span>, <span class=\"token hexnumber string\">$84</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$89</span>, <span class=\"token hexnumber string\">$89</span>, <span class=\"token hexnumber string\">$8C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$91</span>, <span class=\"token hexnumber string\">$84</span>, <span class=\"token hexnumber string\">$8A</span>, <span class=\"token hexnumber string\">$8B</span>, <span class=\"token hexnumber string\">$8B</span>, <span class=\"token hexnumber string\">$8D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$2E</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$C0</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$88</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$E0</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$11</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$A4</span>, <span class=\"token hexnumber string\">$A5</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationUnusedText_THANK_YOU:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$0C</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$E4</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$F2</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EE</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nCorkRoomSpriteStartX:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span> <span class=\"token comment\">; player</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; cork</span>\n\nCorkRoomSpriteStartY:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B0</span> <span class=\"token comment\">; player</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$95</span> <span class=\"token comment\">; cork</span>\n\nCorkRoomSpriteTargetX:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span> <span class=\"token comment\">; player</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F4</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F8</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; cork</span>\n\nCorkRoomSpriteTargetY:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; player</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C4</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C4</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A8</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A8</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; cork</span>\n\nCorkRoomSpriteDelay:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; player</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C0</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$A0</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$60</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$40</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; cork</span>\n\nCorkRoomSpriteAttributes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; player</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span> <span class=\"token comment\">; cork</span>\n\n\nFreeSubconsScene:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending_TurnOffPPU\n\t<span class=\"token opcode property\">JSR</span> ClearNametablesAndSprites\n\n\t<span class=\"token opcode property\">LDA</span> #Stack<span class=\"token decimalnumber string\">100</span>_Menu\n\t<span class=\"token opcode property\">STA</span> StackArea\n\t<span class=\"token opcode property\">LDA</span> #PPUCtrl_Base<span class=\"token decimalnumber string\">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class=\"token decimalnumber string\">0000</span> | PPUCtrl_Background<span class=\"token decimalnumber string\">1000</span> | PPUCtrl_SpriteSize<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span> | PPUCtrl_NMIEnabled\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">STA</span> PPUCTRL\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">LDA</span> #EndingUpdateBuffer_JarRoom\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$60</span>\n\t<span class=\"token opcode property\">STA</span> FreeSubconsTimer\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> PlayerDirection\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerState <span class=\"token comment\">; A=$00</span>\n\t<span class=\"token opcode property\">STA</span> FreeSubconsCorkCounter\n\t<span class=\"token opcode property\">STA</span> CrouchJumpTimer\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> SpriteFlickerSlot\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$09</span>\nFreeSubconsScene_SpriteLoop:\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteStartX, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteStartY, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteTargetX, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteTargetY, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteDelay, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> FreeSubconsScene_SpriteLoop\n\nFreeSubconsScene_JumpingLoop:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending_TurnOnPPU\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">JSR</span> HideAllSprites\n\n\t<span class=\"token opcode property\">JSR</span> FreeSubconsScene_Player\n\n\t<span class=\"token opcode property\">JSR</span> FreeSubconsScene_Cork\n\n\t<span class=\"token opcode property\">LDA</span> FreeSubconsTimer\n\t<span class=\"token opcode property\">BEQ</span> FreeSubconsScene_Exit\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_JumpingLoop\n\n\t<span class=\"token opcode property\">DEC</span> FreeSubconsTimer\n\t<span class=\"token opcode property\">LDA</span> FreeSubconsTimer\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$25</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_JumpingLoop\n\n\t<span class=\"token opcode property\">LDY</span> #Music<span class=\"token decimalnumber string\">2</span>_EndingAndCast\n\t<span class=\"token opcode property\">STY</span> MusicQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_JumpingLoop\n\nFreeSubconsScene_Exit:\n\t<span class=\"token opcode property\">JSR</span> EndingSceneTransition\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">BEQ</span> FreeSubconsScene_JumpingLoop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5401},{"comment":"\nMoves the player, driving the main action in the scene\n","content":"FreeSubconsScene_Player:\n\tLDA PlayerWalkFrameCounter\n\tBEQ FreeSubconsScene_Player_AfterWalkFrameCounter\n\n\tDEC PlayerWalkFrameCounter\n\nFreeSubconsScene_Player_AfterWalkFrameCounter:\n\tLDA PlayerStateTimer\n\tBEQ FreeSubconsScene_Player_AfterStateTimer\n\n\tDEC PlayerStateTimer\n\nFreeSubconsScene_Player_AfterStateTimer:\n\tLDA PlayerXLo\n\tSTA PlayerScreenX\n\tLDA PlayerYLo\n\tSTA PlayerScreenYLo\n\tJSR RenderPlayer\n\n\tLDA PlayerState\n\tJSR JumpToTableAfterJump\n\n\n\t.dw FreeSubconsScene_Phase1\n\t.dw FreeSubconsScene_Phase2\n\t.dw FreeSubconsScene_Phase3\n\t.dw FreeSubconsScene_Phase4\n\t.dw FreeSubconsScene_Phase5\n\n","htmlComment":"<p>Moves the player, driving the main action in the scene</p>\n","htmlContent":"FreeSubconsScene_Player:\n\t<span class=\"token opcode property\">LDA</span> PlayerWalkFrameCounter\n\t<span class=\"token opcode property\">BEQ</span> FreeSubconsScene_Player_AfterWalkFrameCounter\n\n\t<span class=\"token opcode property\">DEC</span> PlayerWalkFrameCounter\n\nFreeSubconsScene_Player_AfterWalkFrameCounter:\n\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BEQ</span> FreeSubconsScene_Player_AfterStateTimer\n\n\t<span class=\"token opcode property\">DEC</span> PlayerStateTimer\n\nFreeSubconsScene_Player_AfterStateTimer:\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenX\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">JSR</span> RenderPlayer\n\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\n\t<span class=\"token directive keyword\">.dw</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token directive keyword\">.dw</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token directive keyword\">.dw</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token directive keyword\">.dw</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">4</span>\n\t<span class=\"token directive keyword\">.dw</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">5</span>\n\n","line":5652},{"comment":"Walking in and first jump","content":"FreeSubconsScene_Phase1:\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsX\n","htmlComment":"<p>Walking in and first jump</p>\n","htmlContent":"FreeSubconsScene_Phase<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">JSR</span> PlayerWalkJumpAnim\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsX\n","line":5683},{"comment":"check x-position to trigger first jump","content":"\tLDA PlayerXLo\n\tCMP #$3E\n\tBCC FreeSubconsScene_PhaseExit\n\n\tINC PlayerState\n\tINC PlayerInAir\n\tLDA #SpriteAnimation_Jumping\n\tSTA PlayerAnimationFrame\n\nFreeSubconsScene_Jump:\n\tLDA #SoundEffect2_Jump\n\tSTA SoundEffectQueue2\n\tJMP PlayerStartJump\n\n","htmlComment":"<p>check x-position to trigger first jump</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$3E</span>\n\t<span class=\"token opcode property\">BCC</span> FreeSubconsScene_PhaseExit\n\n\t<span class=\"token opcode property\">INC</span> PlayerState\n\t<span class=\"token opcode property\">INC</span> PlayerInAir\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Jumping\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\nFreeSubconsScene_Jump:\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">2</span>_Jump\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">JMP</span> PlayerStartJump\n\n","line":5689},{"comment":"Physics and second jump","content":"FreeSubconsScene_Phase2:\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsX\n\n\tJSR ApplyCorkRoomGravity\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA PlayerYVelocity\n\tBMI FreeSubconsScene_PhaseExit\n","htmlComment":"<p>Physics and second jump</p>\n","htmlContent":"FreeSubconsScene_Phase<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">JSR</span> PlayerWalkJumpAnim\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsX\n\n\t<span class=\"token opcode property\">JSR</span> ApplyCorkRoomGravity\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> FreeSubconsScene_PhaseExit\n","line":5705},{"comment":"check y-position to trigger second jump","content":"\tLDA PlayerYLo\n\tCMP #$A0\n\tBCC FreeSubconsScene_Phase2_NoJump\n","htmlComment":"<p>check y-position to trigger second jump</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">BCC</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">2</span>_NoJump\n","line":5718},{"comment":"set x-velocity to land second jump on the jar","content":"\tLDA #$0C\n\tSTA PlayerXVelocity\n\tJMP FreeSubconsScene_Jump\n\nFreeSubconsScene_Phase2_NoJump:","htmlComment":"<p>set x-velocity to land second jump on the jar</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">JMP</span> FreeSubconsScene_Jump\n\nFreeSubconsScene_Phase<span class=\"token decimalnumber string\">2</span>_NoJump:","line":5723},{"comment":"check the top of the jar","content":"\tCMP #$75\n\tBCC FreeSubconsScene_PhaseExit\n","htmlComment":"<p>check the top of the jar</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$75</span>\n\t<span class=\"token opcode property\">BCC</span> FreeSubconsScene_PhaseExit\n","line":5729},{"comment":"check x-position for jar","content":"\tLDA PlayerXLo\n\tCMP #$70\n\tBCC FreeSubconsScene_PhaseExit\n\n\tINC PlayerState\n\tDEC PlayerInAir\n\nFreeSubconsScene_PhaseExit:\n\tRTS\n\n","htmlComment":"<p>check x-position for jar</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$70</span>\n\t<span class=\"token opcode property\">BCC</span> FreeSubconsScene_PhaseExit\n\n\t<span class=\"token opcode property\">INC</span> PlayerState\n\t<span class=\"token opcode property\">DEC</span> PlayerInAir\n\nFreeSubconsScene_PhaseExit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5733},{"comment":"Start pulling the cork","content":"FreeSubconsScene_Phase3:\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsX\n","htmlComment":"<p>Start pulling the cork</p>\n","htmlContent":"FreeSubconsScene_Phase<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">JSR</span> PlayerWalkJumpAnim\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsX\n","line":5745},{"comment":"check x-position for jar","content":"\tLDA PlayerXLo\n\tCMP #$80\n\tBCC FreeSubconsScene_PhaseExit\n","htmlComment":"<p>check x-position for jar</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BCC</span> FreeSubconsScene_PhaseExit\n","line":5751},{"comment":"pull the cork","content":"\tINC PlayerState\n\tINC HoldingItem\n\tLDA #SpriteAnimation_Pulling\n\tSTA PlayerAnimationFrame\n\tLDA #$05\n\tSTA FreeSubconsCorkCounter\n\tLDA #$28\n\tSTA PlayerStateTimer\n\tRTS\n\n\nPullCorkFrameDurations:\n\t.db $14\n\t.db $0A\n\t.db $14\n\t.db $0A\n\nPullCorkOffsets:\n\t.db $1C\n\t.db $1B\n\t.db $1E\n\t.db $1D\n\t.db $1F\n\n","htmlComment":"<p>pull the cork</p>\n","htmlContent":"\t<span class=\"token opcode property\">INC</span> PlayerState\n\t<span class=\"token opcode property\">INC</span> HoldingItem\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Pulling\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">STA</span> FreeSubconsCorkCounter\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$28</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPullCorkFrameDurations:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$14</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0A</span>\n\nPullCorkOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1E</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1F</span>\n\n","line":5756},{"comment":"Pull the cork out","content":"FreeSubconsScene_Phase4:","htmlComment":"<p>Pull the cork out</p>\n","htmlContent":"FreeSubconsScene_Phase<span class=\"token decimalnumber string\">4</span>:","line":5782},{"comment":"use PlayerStateTimer to hold this frame","content":"\tLDA PlayerStateTimer\n\tBNE FreeSubconsScene_Phase4_Exit\n","htmlComment":"<p>use PlayerStateTimer to hold this frame</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">4</span>_Exit\n","line":5784},{"comment":"next FreeSubconsCorkCounter to move cork","content":"\tDEC FreeSubconsCorkCounter\n\tBNE FreeSubconsScene_Phase4_NextCorkFrame\n","htmlComment":"<p>next FreeSubconsCorkCounter to move cork</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEC</span> FreeSubconsCorkCounter\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">4</span>_NextCorkFrame\n","line":5788},{"comment":"uncorked! start jumping","content":"\tINC PlayerState\n\tINC PlayerInAir\n\n\tLDA #SpriteAnimation_Jumping\n\tSTA PlayerAnimationFrame\n\n\tLDA #DPCM_ItemPull\n\tSTA DPCMQueue\n\n\tLDA #$A0\n\tSTA ObjectYVelocity + 8\n\tRTS\n\nFreeSubconsScene_Phase4_NextCorkFrame:\n\tLDY FreeSubconsCorkCounter\n\tLDA PullCorkFrameDurations - 1, Y\n\tSTA PlayerStateTimer\n\nFreeSubconsScene_Phase4_Exit:\n\tRTS\n\n","htmlComment":"<p>uncorked! start jumping</p>\n","htmlContent":"\t<span class=\"token opcode property\">INC</span> PlayerState\n\t<span class=\"token opcode property\">INC</span> PlayerInAir\n\n\t<span class=\"token opcode property\">LDA</span> #SpriteAnimation_Jumping\n\t<span class=\"token opcode property\">STA</span> PlayerAnimationFrame\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_ItemPull\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity + <span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nFreeSubconsScene_Phase<span class=\"token decimalnumber string\">4</span>_NextCorkFrame:\n\t<span class=\"token opcode property\">LDY</span> FreeSubconsCorkCounter\n\t<span class=\"token opcode property\">LDA</span> PullCorkFrameDurations - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\nFreeSubconsScene_Phase<span class=\"token decimalnumber string\">4</span>_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5792},{"comment":"Free Subcons and jump repeatedly","content":"FreeSubconsScene_Phase5:\n\tJSR FreeSubconsScene_Subcons\n\n\tJSR ApplyCorkRoomGravity\n\n\tJSR PlayerWalkJumpAnim\n\n\tJSR ApplyPlayerPhysicsY\n\n\tLDA PlayerYVelocity\n\tBMI FreeSubconsScene_Phase5_Exit\n","htmlComment":"<p>Free Subcons and jump repeatedly</p>\n","htmlContent":"FreeSubconsScene_Phase<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">JSR</span> FreeSubconsScene_Subcons\n\n\t<span class=\"token opcode property\">JSR</span> ApplyCorkRoomGravity\n\n\t<span class=\"token opcode property\">JSR</span> PlayerWalkJumpAnim\n\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsY\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BMI</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">5</span>_Exit\n","line":5815},{"comment":"jump when we're on the jar","content":"\tLDA PlayerYLo\n\tCMP #$80\n\tBCC FreeSubconsScene_Phase5_Exit\n\n\tJMP PlayerStartJump\n\nFreeSubconsScene_Phase5_Exit:\n\tRTS\n\n\nCorkRoomCharacterGravity:\n\t.db $04 ; Mario\n\t.db $04 ; Princess\n\t.db $04 ; Toad\n\t.db $01 ; Luigi\n\n\nApplyCorkRoomGravity:\n\tLDY CurrentCharacter\n\tLDA CorkRoomCharacterGravity, Y\n\tCLC\n\tADC PlayerYVelocity\n\tSTA PlayerYVelocity\n\tRTS\n\n","htmlComment":"<p>jump when we're on the jar</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BCC</span> FreeSubconsScene_Phase<span class=\"token decimalnumber string\">5</span>_Exit\n\n\t<span class=\"token opcode property\">JMP</span> PlayerStartJump\n\nFreeSubconsScene_Phase<span class=\"token decimalnumber string\">5</span>_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nCorkRoomCharacterGravity:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; Mario</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; Princess</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$04</span> <span class=\"token comment\">; Toad</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; Luigi</span>\n\n\nApplyCorkRoomGravity:\n\t<span class=\"token opcode property\">LDY</span> CurrentCharacter\n\t<span class=\"token opcode property\">LDA</span> CorkRoomCharacterGravity, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerYVelocity\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":5828},{"comment":"\nSpits out Subcons and makes them flap their little wings\n","content":"FreeSubconsScene_Subcons:\n\tLDX #$07\n\nFreeSubconsScene_Subcons_Loop:\n\tSTX byte_RAM_12\n\tLDA EnemyTimer, X\n\tBEQ FreeSubconsScene_Subcons_Movement\n\n\tCMP #$01\n\tBNE FreeSubconsScene_Subcons_Next\n\n\tLDA #SoundEffect1_ThrowItem\n\tSTA SoundEffectQueue1\n\tBNE FreeSubconsScene_Subcons_Next\n\nFreeSubconsScene_Subcons_Movement:\n\tJSR ApplyObjectMovement_Bank1\n\n\tLDA ObjectYVelocity, X\n\tCMP #$08\n\tBMI FreeSubconsScene_Subcons_Render\n\n\tLDA #$00\n\tSTA ObjectXVelocity, X\n\tLDA #$F9\n\tSTA ObjectYVelocity, X\n\tLDA CorkRoomSpriteAttributes + 1, X\n\tEOR #ObjAttrib_Palette0 | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\nFreeSubconsScene_Subcons_Render:\n\tLDA byte_RAM_10\n\tASL A\n\tAND #$02\n\tSTA byte_RAM_F\n\tJSR FreeSubconsScene_Render\n\n\tINC EnemyTimer, X\n\nFreeSubconsScene_Subcons_Next:\n\tDEC EnemyTimer, X\n\tDEX\n\tBPL FreeSubconsScene_Subcons_Loop\n\n\tRTS\n\n\n\nFreeSubconsScene_Cork:\n\tLDA #$04\n\tSTA byte_RAM_F\n\tLDX #$08\n\tSTX byte_RAM_12\n\tJSR FreeSubconsScene_Render\n\n\tLDY FreeSubconsCorkCounter\n\tBNE FreeSubconsScene_Cork_Pull\n\n\tLDA ObjectYLo + 8\n\tCMP #$F0\n\tBCS FreeSubconsScene_Cork_Exit\n\n\tJMP ApplyObjectPhysicsY_Bank1\n\nFreeSubconsScene_Cork_Pull:\n\tLDA PullCorkOffsets - 1, Y\n\tCLC\n\tADC PlayerYLo\n\tSTA ObjectYLo + 8\n\nFreeSubconsScene_Cork_Exit:\n\tRTS\n\n\nCorkRoomSpriteTiles:\n\t.db $E8 ; subcon left, wings up\n\t.db $EA ; subcon right, wings up\n\t.db $EC ; subcon left, wings down\n\t.db $EE ; subcon right, wings down\n\t.db $61 ; cork left\n\t.db $63 ; cork right\n\nCorkRoomSpriteOAMAddress:\n\t.db $30 ; subcon 8\n\t.db $38 ; subcon 7\n\t.db $40 ; subcon 6\n\t.db $48 ; subcon 5\n\t.db $50 ; subcon 4\n\t.db $58 ; subcon 3\n\t.db $60 ; subcon 2\n\t.db $68 ; subcon 1\n\t.db $00 ; cork\n\n\nFreeSubconsScene_Render:\n\tLDY CorkRoomSpriteOAMAddress, X\n\tLDA ObjectYLo, X\n\tSTA SpriteDMAArea, Y\n\tSTA SpriteDMAArea + 4, Y\n\tLDA ObjectXLo, X\n\tSTA SpriteDMAArea + 3, Y\n\tCLC\n\tADC #$08\n\tSTA SpriteDMAArea + 7, Y\n\tLDA ObjectAttributes, X\n\tSTA SpriteDMAArea + 2, Y\n\tSTA SpriteDMAArea + 6, Y\n\tLDX byte_RAM_F\n\tAND #ObjAttrib_16x32\n\tBNE FreeSubconsScene_Render_Flipped\n\n\tLDA CorkRoomSpriteTiles, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA CorkRoomSpriteTiles + 1, X\n\tBNE FreeSubconsScene_Render_Exit\n\nFreeSubconsScene_Render_Flipped:\n\tLDA CorkRoomSpriteTiles + 1, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA CorkRoomSpriteTiles, X\n\nFreeSubconsScene_Render_Exit:\n\tSTA SpriteDMAArea + 5, Y\n\tLDX byte_RAM_12\n\tRTS\n\n\nEndingCelebrationCeilingTextAndPodium:\n\t.db $20, $00, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $20, $20, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $20, $40, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $20, $60, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $20, $88, $01, $5A\n\t.db $20, $89, $4E, $9A\n\t.db $20, $97, $01, $5C\n\t.db $20, $A8, $C3, $9B\n\t.db $20, $B7, $C3, $9B\n\t.db $21, $08, $01, $5B\n\t.db $21, $09, $4E, $9A\n\t.db $21, $17, $01, $5D\n\t.db $20, $AB, $0B, $DC, $E8, $E7, $ED, $EB, $E2, $DB, $EE, $ED, $E8, $EB\n\t.db $20, $E3, $04, $40, $42, $44, $46\n\t.db $20, $F9, $04, $40, $42, $44, $46\n\t.db $21, $23, $C9, $48\n\t.db $21, $24, $C9, $49\n\t.db $21, $25, $C9, $4A\n\t.db $21, $26, $C9, $4B\n\t.db $22, $43, $04, $4C, $4D, $4E, $4F\n\t.db $21, $03, $04, $41, $43, $45, $47\n\t.db $21, $19, $04, $41, $43, $45, $47\n\t.db $21, $39, $C9, $48\n\t.db $21, $3A, $C9, $49\n\t.db $21, $3B, $C9, $4A\n\t.db $21, $3C, $C9, $4B\n\t.db $22, $59, $04, $4C, $4D, $4E, $4F\n\t.db $21, $CA, $4C, $54\n\t.db $21, $EA, $4C, $55\n\t.db $22, $0B, $0A, $50, $52, $50, $52, $50, $52, $50, $52, $50, $52\n\t.db $22, $2B, $0A, $51, $53, $51, $53, $51, $53, $51, $53, $51, $53\n\t.db $22, $4C, $02, $3A, $3B\n\t.db $22, $6C, $C5, $3C\n\t.db $22, $6D, $C5, $3D\n\t.db $22, $52, $02, $3A, $3B\n\t.db $22, $72, $C5, $3C\n\t.db $22, $73, $C5, $3D\n\t.db $00\n\nEndingCelebrationFloorAndSubconParade:\n\t.db $23, $00, $20\n\t.db $00, $02, $08, $0A, $0C, $0E, $04, $06, $08, $0A, $04, $06, $0C, $0E, $04, $06\n\t.db $08, $0A, $00, $02, $0C, $0E, $0C, $0E, $00, $02, $04, $06, $04, $06, $08, $0A\n\n\t.db $23, $20, $20\n\t.db $01, $03, $09, $0B, $0D, $0F, $05, $07, $09, $0B, $05, $07, $0D, $0F, $05, $07\n\t.db $09, $0B, $01, $03, $0D, $0F, $0D, $0F, $01, $03, $05, $07, $05, $07, $09, $0B\n\n\t.db $27, $00, $20\n\t.db $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76\n\t.db $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76, $74, $76\n\n\t.db $27, $20, $20\n\t.db $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77\n\t.db $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77, $75, $77\n\n\t.db $23, $40, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $23, $60, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $23, $80, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $23, $A0, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $27, $40, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $27, $60, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $27, $80, $20\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\t.db $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81\n\n\t.db $27, $A0, $20\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\t.db $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80, $81, $80\n\n\t.db $23, $C0, $48, $AA\n\t.db $23, $C8, $08, $15, $05, $FF, $FF, $FF, $FF, $15, $45\n\n\t.db $23, $D0, $20\n\t.db $31, $00, $FF, $FF, $FF, $FF, $00, $44, $33, $00, $A6, $A5, $A5, $A6, $00, $44\n\t.db $F3, $F0, $59, $AA, $AA, $96, $F0, $74, $DD, $FF, $55, $AA, $AA, $95, $55, $55\n\n\t.db $23, $F0, $48, $A5\n\t.db $23, $F8, $48, $0A\n\t.db $27, $F0, $48, $A5\n\t.db $27, $F8, $48, $0A\n\t.db $00\n\nEndingCelebrationSubconStandStill:\n\t.db $23, $00, $20\n\t.db $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72\n\t.db $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72, $70, $72\n\t.db $23, $20, $20\n\t.db $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73\n\t.db $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73, $71, $73\n\t.db $00\n\nEndingCelebrationUnusedText_THE_END:\n\t.db $21, $AC, $07\n\t.db $ED, $E1, $DE, $FB, $DE, $E7, $DD\n\t.db $00\n\nEndingCelebrationPaletteFade1:\n\t.db $3F, $00, $20\n\t.db $01, $30, $21, $0F\n\t.db $01, $30, $16, $0F\n\t.db $01, $28, $18, $0F\n\t.db $01, $30, $30, $01\n\t.db $01, $27, $16, $0F\n\t.db $01, $37, $2A, $0F\n\t.db $01, $27, $30, $0F\n\t.db $01, $36, $25, $0F\n\t.db $00\n\nEndingCelebrationPaletteFade2:\n\t.db $3F, $00, $20\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $0F, $10, $00, $0F\n\t.db $00\n\nEndingCelebrationPaletteFade3:\n\t.db $3F, $00, $20\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $0F, $00, $0F, $0F\n\t.db $00\n\nEndingScreenUpdateIndex:\n\t.db EndingUpdateBuffer_PaletteFade1\n\t.db EndingUpdateBuffer_PaletteFade2 ; 1 ; @TODO This seems wrong, somehow\n\t.db EndingUpdateBuffer_PaletteFade3 ; 2\n\nContributorSpriteZeroOAMData:\n\t.db $8C, $FC, $20, $94\n\nContributorCharacterOAMData:","htmlComment":"<p>Spits out Subcons and makes them flap their little wings</p>\n","htmlContent":"FreeSubconsScene_Subcons:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$07</span>\n\nFreeSubconsScene_Subcons_Loop:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BEQ</span> FreeSubconsScene_Subcons_Movement\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Subcons_Next\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_ThrowItem\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Subcons_Next\n\nFreeSubconsScene_Subcons_Movement:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectMovement_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BMI</span> FreeSubconsScene_Subcons_Render\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F9</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteAttributes + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">EOR</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">0</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\nFreeSubconsScene_Subcons_Render:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">JSR</span> FreeSubconsScene_Render\n\n\t<span class=\"token opcode property\">INC</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\nFreeSubconsScene_Subcons_Next:\n\t<span class=\"token opcode property\">DEC</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> FreeSubconsScene_Subcons_Loop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\n\nFreeSubconsScene_Cork:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">JSR</span> FreeSubconsScene_Render\n\n\t<span class=\"token opcode property\">LDY</span> FreeSubconsCorkCounter\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Cork_Pull\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo + <span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BCS</span> FreeSubconsScene_Cork_Exit\n\n\t<span class=\"token opcode property\">JMP</span> ApplyObjectPhysicsY_Bank<span class=\"token decimalnumber string\">1</span>\n\nFreeSubconsScene_Cork_Pull:\n\t<span class=\"token opcode property\">LDA</span> PullCorkOffsets - <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> ObjectYLo + <span class=\"token decimalnumber string\">8</span>\n\nFreeSubconsScene_Cork_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nCorkRoomSpriteTiles:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span> <span class=\"token comment\">; subcon left, wings up</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EA</span> <span class=\"token comment\">; subcon right, wings up</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EC</span> <span class=\"token comment\">; subcon left, wings down</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$EE</span> <span class=\"token comment\">; subcon right, wings down</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span> <span class=\"token comment\">; cork left</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$63</span> <span class=\"token comment\">; cork right</span>\n\nCorkRoomSpriteOAMAddress:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$30</span> <span class=\"token comment\">; subcon 8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$38</span> <span class=\"token comment\">; subcon 7</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$40</span> <span class=\"token comment\">; subcon 6</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$48</span> <span class=\"token comment\">; subcon 5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$50</span> <span class=\"token comment\">; subcon 4</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$58</span> <span class=\"token comment\">; subcon 3</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$60</span> <span class=\"token comment\">; subcon 2</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$68</span> <span class=\"token comment\">; subcon 1</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; cork</span>\n\n\nFreeSubconsScene_Render:\n\t<span class=\"token opcode property\">LDY</span> CorkRoomSpriteOAMAddress, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">4</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">7</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">6</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_F\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Render_Flipped\n\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteTiles, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteTiles + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> FreeSubconsScene_Render_Exit\n\nFreeSubconsScene_Render_Flipped:\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteTiles + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> CorkRoomSpriteTiles, <span class=\"token register variable\">X</span>\n\nFreeSubconsScene_Render_Exit:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">5</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEndingCelebrationCeilingTextAndPodium:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$40</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$60</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$88</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$5A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$89</span>, <span class=\"token hexnumber string\">$4E</span>, <span class=\"token hexnumber string\">$9A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$97</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$5C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$A8</span>, <span class=\"token hexnumber string\">$C3</span>, <span class=\"token hexnumber string\">$9B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$B7</span>, <span class=\"token hexnumber string\">$C3</span>, <span class=\"token hexnumber string\">$9B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$5B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$4E</span>, <span class=\"token hexnumber string\">$9A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$17</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$5D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$AB</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$DB</span>, <span class=\"token hexnumber string\">$EE</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$EB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$E3</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$40</span>, <span class=\"token hexnumber string\">$42</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$46</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$F9</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$40</span>, <span class=\"token hexnumber string\">$42</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$46</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$48</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$24</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$49</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$25</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$4A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$26</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$4B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$4C</span>, <span class=\"token hexnumber string\">$4D</span>, <span class=\"token hexnumber string\">$4E</span>, <span class=\"token hexnumber string\">$4F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$41</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$45</span>, <span class=\"token hexnumber string\">$47</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$19</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$41</span>, <span class=\"token hexnumber string\">$43</span>, <span class=\"token hexnumber string\">$45</span>, <span class=\"token hexnumber string\">$47</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$39</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$48</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$3A</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$49</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$3B</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$4A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$3C</span>, <span class=\"token hexnumber string\">$C9</span>, <span class=\"token hexnumber string\">$4B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$59</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$4C</span>, <span class=\"token hexnumber string\">$4D</span>, <span class=\"token hexnumber string\">$4E</span>, <span class=\"token hexnumber string\">$4F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$CA</span>, <span class=\"token hexnumber string\">$4C</span>, <span class=\"token hexnumber string\">$54</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$EA</span>, <span class=\"token hexnumber string\">$4C</span>, <span class=\"token hexnumber string\">$55</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$50</span>, <span class=\"token hexnumber string\">$52</span>, <span class=\"token hexnumber string\">$50</span>, <span class=\"token hexnumber string\">$52</span>, <span class=\"token hexnumber string\">$50</span>, <span class=\"token hexnumber string\">$52</span>, <span class=\"token hexnumber string\">$50</span>, <span class=\"token hexnumber string\">$52</span>, <span class=\"token hexnumber string\">$50</span>, <span class=\"token hexnumber string\">$52</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$2B</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$53</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$53</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$53</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$53</span>, <span class=\"token hexnumber string\">$51</span>, <span class=\"token hexnumber string\">$53</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$4C</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$3A</span>, <span class=\"token hexnumber string\">$3B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$6C</span>, <span class=\"token hexnumber string\">$C5</span>, <span class=\"token hexnumber string\">$3C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$6D</span>, <span class=\"token hexnumber string\">$C5</span>, <span class=\"token hexnumber string\">$3D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$52</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$3A</span>, <span class=\"token hexnumber string\">$3B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$C5</span>, <span class=\"token hexnumber string\">$3C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$C5</span>, <span class=\"token hexnumber string\">$3D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationFloorAndSubconParade:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$0C</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$0C</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0A</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$0C</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$0C</span>, <span class=\"token hexnumber string\">$0E</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$02</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$04</span>, <span class=\"token hexnumber string\">$06</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$0A</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$07</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$0B</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0D</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$03</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$07</span>, <span class=\"token hexnumber string\">$09</span>, <span class=\"token hexnumber string\">$0B</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$76</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>, <span class=\"token hexnumber string\">$75</span>, <span class=\"token hexnumber string\">$77</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$40</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$60</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$40</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$60</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$A0</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>, <span class=\"token hexnumber string\">$81</span>, <span class=\"token hexnumber string\">$80</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$C0</span>, <span class=\"token hexnumber string\">$48</span>, <span class=\"token hexnumber string\">$AA</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$C8</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$15</span>, <span class=\"token hexnumber string\">$05</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$15</span>, <span class=\"token hexnumber string\">$45</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$D0</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$31</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$44</span>, <span class=\"token hexnumber string\">$33</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$A6</span>, <span class=\"token hexnumber string\">$A5</span>, <span class=\"token hexnumber string\">$A5</span>, <span class=\"token hexnumber string\">$A6</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$44</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F3</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$59</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$96</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$74</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FF</span>, <span class=\"token hexnumber string\">$55</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$AA</span>, <span class=\"token hexnumber string\">$95</span>, <span class=\"token hexnumber string\">$55</span>, <span class=\"token hexnumber string\">$55</span>\n\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$48</span>, <span class=\"token hexnumber string\">$A5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$F8</span>, <span class=\"token hexnumber string\">$48</span>, <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$F0</span>, <span class=\"token hexnumber string\">$48</span>, <span class=\"token hexnumber string\">$A5</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$F8</span>, <span class=\"token hexnumber string\">$48</span>, <span class=\"token hexnumber string\">$0A</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationSubconStandStill:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>, <span class=\"token hexnumber string\">$70</span>, <span class=\"token hexnumber string\">$72</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>, <span class=\"token hexnumber string\">$71</span>, <span class=\"token hexnumber string\">$73</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationUnusedText_THE_END:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$AC</span>, <span class=\"token hexnumber string\">$07</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E1</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$DD</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationPaletteFade<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$16</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$28</span>, <span class=\"token hexnumber string\">$18</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$01</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$16</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$37</span>, <span class=\"token hexnumber string\">$2A</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$27</span>, <span class=\"token hexnumber string\">$30</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span>, <span class=\"token hexnumber string\">$36</span>, <span class=\"token hexnumber string\">$25</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationPaletteFade<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$10</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationPaletteFade<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$3F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$00</span>, <span class=\"token hexnumber string\">$0F</span>, <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingScreenUpdateIndex:\n\t<span class=\"token directive keyword\">.db</span> EndingUpdateBuffer_PaletteFade<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token directive keyword\">.db</span> EndingUpdateBuffer_PaletteFade<span class=\"token decimalnumber string\">2</span> <span class=\"token comment\">; 1 ; @TODO This seems wrong, somehow</span>\n\t<span class=\"token directive keyword\">.db</span> EndingUpdateBuffer_PaletteFade<span class=\"token decimalnumber string\">3</span> <span class=\"token comment\">; 2</span>\n\nContributorSpriteZeroOAMData:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8C</span>, <span class=\"token hexnumber string\">$FC</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$94</span>\n\nContributorCharacterOAMData:","line":5857},{"comment":"Mario","content":"\t.db $4F, $61, $20, $50\n\t.db $4F, $63, $20, $58\n\t.db $5F, $65, $20, $50\n\t.db $5F, $67, $20, $58","htmlComment":"<p>Mario</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$61</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$50</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$63</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$58</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$65</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$50</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$67</span>, <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$58</span>","line":6158},{"comment":"Luigi","content":"\t.db $4F, $69, $21, $68\n\t.db $4F, $6B, $21, $70\n\t.db $5F, $6D, $21, $68\n\t.db $5F, $6F, $21, $70","htmlComment":"<p>Luigi</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$69</span>, <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$68</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$6B</span>, <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$70</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$6D</span>, <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$68</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$6F</span>, <span class=\"token hexnumber string\">$21</span>, <span class=\"token hexnumber string\">$70</span>","line":6163},{"comment":"Toad","content":"\t.db $4F, $83, $22, $88\n\t.db $4F, $83, $62, $90\n\t.db $5F, $87, $22, $88\n\t.db $5F, $87, $62, $90","htmlComment":"<p>Toad</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$83</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$88</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$83</span>, <span class=\"token hexnumber string\">$62</span>, <span class=\"token hexnumber string\">$90</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$87</span>, <span class=\"token hexnumber string\">$22</span>, <span class=\"token hexnumber string\">$88</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$87</span>, <span class=\"token hexnumber string\">$62</span>, <span class=\"token hexnumber string\">$90</span>","line":6168},{"comment":"Princess","content":"\t.db $4F, $8B, $23, $A0\n\t.db $4F, $8D, $23, $A8\n\t.db $5F, $8F, $23, $A0\n\t.db $5F, $91, $23, $A8\n\n","htmlComment":"<p>Princess</p>\n","htmlContent":"\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$8B</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$4F</span>, <span class=\"token hexnumber string\">$8D</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$8F</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$5F</span>, <span class=\"token hexnumber string\">$91</span>, <span class=\"token hexnumber string\">$23</span>, <span class=\"token hexnumber string\">$A8</span>\n\n","line":6173},{"comment":"\nShows the part of the ending where the Subcons carry Wart to an uncertain\nfate while the characters stand and wave\n","content":"ContributorScene:\n\tJSR WaitForNMI_Ending_TurnOffPPU\n\n\tLDA #VMirror\n\tJSR ChangeNametableMirroring\n\n\tJSR ClearNametablesAndSprites\n\n\tLDA #Stack100_Menu\n\tSTA StackArea\n\tJSR EnableNMI_Bank1\n\n\tJSR WaitForNMI_Ending\n\n\tLDA #EndingUpdateBuffer_CeilingTextAndPodium\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_Ending\n\n\tLDA #EndingUpdateBuffer_FloorAndSubconParade\n\tSTA ScreenUpdateIndex\n\tJSR WaitForNMI_Ending\n\n\tJSR Ending_GetContributor\n\n\tJSR WaitForNMI_Ending\n\n\tLDA #HMirror\n\tJSR ChangeNametableMirroring\n\n\tLDY #$03\nContributorScene_SpriteZeroLoop:\n\tLDA ContributorSpriteZeroOAMData, Y\n\tSTA SpriteDMAArea, Y\n\tDEY\n\tBPL ContributorScene_SpriteZeroLoop\n\n\tLDA #$00\n\tSTA byte_RAM_F3\n\tSTA byte_RAM_E6\n\n\tLDY #$3F\nContributorScene_CharacterLoop:\n\tLDA ContributorCharacterOAMData, Y\n\tSTA SpriteDMAArea + $10, Y\n\tDEY\n\tBPL ContributorScene_CharacterLoop\n\n\tLDA #$0FF\n\tSTA PlayerXHi\n\tLDA #$A0\n\tSTA PlayerXLo\n\tLDA #$08\n\tSTA PlayerXVelocity\n\tLDA #$01\n\tSTA IsHorizontalLevel\n\nloc_BANK1_AAD4:\n\tJSR WaitForNMI_Ending_TurnOnPPU\n\n\tINC byte_RAM_F3\n\tINC byte_RAM_10\n\tJSR ContributorTicker\n\n\tJSR loc_BANK1_ABCC\n\n\tLDA byte_RAM_E6\n\tCMP #$03\n\tBCS loc_BANK1_AB20\n\nloc_BANK1_AAE7:\n\tBIT PPUSTATUS\n\tBVS loc_BANK1_AAE7\n\nloc_BANK1_AAEC:\n\tBIT PPUSTATUS\n\tBVC loc_BANK1_AAEC\n\n\tLDX #$02\n\nloc_BANK1_AAF3:\n\tLDY #$00\n\nloc_BANK1_AAF5:\n\tLDA byte_RAM_0\n\tLDA byte_RAM_0\n\tDEY\n\tBNE loc_BANK1_AAF5\n\n\tDEX\n\tBNE loc_BANK1_AAF3\n\n\tLDA PPUSTATUS\n\tLDA byte_RAM_F2\n\tSTA PPUSCROLL\n\tLDA #$00\n\tSTA PPUSCROLL\n\tLDA byte_RAM_F3\n\tCMP #$0A\n\tBCC loc_BANK1_AB1D\n\n\tLDA #$00\n\tSTA byte_RAM_F3\n\tLDA byte_RAM_F2\n\tSEC\n\tSBC #$30\n\tSTA byte_RAM_F2\n\nloc_BANK1_AB1D:\n\tJMP loc_BANK1_AAD4\n\n","htmlComment":"<p>Shows the part of the ending where the Subcons carry Wart to an uncertain\nfate while the characters stand and wave</p>\n","htmlContent":"ContributorScene:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending_TurnOffPPU\n\n\t<span class=\"token opcode property\">LDA</span> #VMirror\n\t<span class=\"token opcode property\">JSR</span> ChangeNametableMirroring\n\n\t<span class=\"token opcode property\">JSR</span> ClearNametablesAndSprites\n\n\t<span class=\"token opcode property\">LDA</span> #Stack<span class=\"token decimalnumber string\">100</span>_Menu\n\t<span class=\"token opcode property\">STA</span> StackArea\n\t<span class=\"token opcode property\">JSR</span> EnableNMI_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">LDA</span> #EndingUpdateBuffer_CeilingTextAndPodium\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">LDA</span> #EndingUpdateBuffer_FloorAndSubconParade\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">JSR</span> Ending_GetContributor\n\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">LDA</span> #HMirror\n\t<span class=\"token opcode property\">JSR</span> ChangeNametableMirroring\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\nContributorScene_SpriteZeroLoop:\n\t<span class=\"token opcode property\">LDA</span> ContributorSpriteZeroOAMData, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> ContributorScene_SpriteZeroLoop\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$3F</span>\nContributorScene_CharacterLoop:\n\t<span class=\"token opcode property\">LDA</span> ContributorCharacterOAMData, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$10</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> ContributorScene_CharacterLoop\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXHi\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> IsHorizontalLevel\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AAD<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending_TurnOnPPU\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">JSR</span> ContributorTicker\n\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ABCC\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">20</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AAE<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">BIT</span> PPUSTATUS\n\t<span class=\"token opcode property\">BVS</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AAE<span class=\"token decimalnumber string\">7</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AAEC:\n\t<span class=\"token opcode property\">BIT</span> PPUSTATUS\n\t<span class=\"token opcode property\">BVC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AAEC\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AAF<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AAF<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AAF<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AAF<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> PPUSTATUS\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> PPUSCROLL\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUSCROLL\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">1</span>D\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$30</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">1</span>D:\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AAD<span class=\"token decimalnumber string\">4</span>\n\n","line":6183},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK1_AB20:\n\tLDA #VMirror\n\tJSR ChangeNametableMirroring\n\n\tLDA #$01\n\tSTA byte_RAM_F2\n\tLSR A\n\tSTA byte_RAM_F3\n\tSTA byte_RAM_7\n\tLDA #EndingUpdateBuffer_SubconStandStill\n\tSTA ScreenUpdateIndex\n\nloc_BANK1_AB32:\n\tJSR WaitForNMI_Ending\n\n\tJSR EnableNMI_Bank1\n\n\tINC byte_RAM_F3\n\tJSR ContributorTicker\n\n\tJSR ContributorCharacterAnimation\n\nloc_BANK1_AB40:\n\tBIT PPUSTATUS\n\tBVS loc_BANK1_AB40\n\nloc_BANK1_AB45:\n\tBIT PPUSTATUS\n\tBVC loc_BANK1_AB45\n\n\tLDX #$02\n\nloc_BANK1_AB4C:\n\tLDY #$00\n\nloc_BANK1_AB4E:\n\tLDA byte_RAM_0\n\tLDA byte_RAM_0\n\tDEY\n\tBNE loc_BANK1_AB4E\n\n\tDEX\n\tBNE loc_BANK1_AB4C\n\n\tLDA #$B0\n\tORA byte_RAM_F2\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tLDA PPUSTATUS\n\tLDA #$00\n\tSTA PPUSCROLL\n\tLDA #$00\n\tSTA PPUSCROLL\n\tLDA byte_RAM_F3\n\tCMP #$14\n\tBCC loc_BANK1_AB80\n\n\tLDA #$00\n\tSTA byte_RAM_F3\n\tLDA byte_RAM_F2\n\tEOR #$01\n\tSTA byte_RAM_F2\n\tINC byte_RAM_7\n\nloc_BANK1_AB80:\n\tLDA byte_RAM_7\n\tCMP #$29\n\tBCC loc_BANK1_AB32\n\n\tJSR EndingSceneTransition\n\n\tLDA byte_RAM_E6\n\tCMP #$04\n\tBCC loc_BANK1_AB32\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">20</span>:\n\t<span class=\"token opcode property\">LDA</span> #VMirror\n\t<span class=\"token opcode property\">JSR</span> ChangeNametableMirroring\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">LDA</span> #EndingUpdateBuffer_SubconStandStill\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">32</span>:\n\t<span class=\"token opcode property\">JSR</span> WaitForNMI_Ending\n\n\t<span class=\"token opcode property\">JSR</span> EnableNMI_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">JSR</span> ContributorTicker\n\n\t<span class=\"token opcode property\">JSR</span> ContributorCharacterAnimation\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">40</span>:\n\t<span class=\"token opcode property\">BIT</span> PPUSTATUS\n\t<span class=\"token opcode property\">BVS</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">40</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">45</span>:\n\t<span class=\"token opcode property\">BIT</span> PPUSTATUS\n\t<span class=\"token opcode property\">BVC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">45</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$02</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">4</span>C:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">4</span>E:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">4</span>E\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">4</span>C\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$B0</span>\n\t<span class=\"token opcode property\">ORA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">STA</span> PPUCTRL\n\t<span class=\"token opcode property\">LDA</span> PPUSTATUS\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUSCROLL\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUSCROLL\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$14</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">80</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">3</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_F<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">80</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$29</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">32</span>\n\n\t<span class=\"token opcode property\">JSR</span> EndingSceneTransition\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AB<span class=\"token decimalnumber string\">32</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":6294},{"comment":"\nAdvances to the next scene and does the palette transition\n","content":"EndingSceneTransition:\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE EndingSceneTransition_Exit\n\n\tINC byte_RAM_E5\n\tLDY byte_RAM_E5\n\tCPY #$03\n\tBCS EndingSceneTransition_Next\n\n\tLDA EndingScreenUpdateIndex, Y\n\tSTA ScreenUpdateIndex\n\tRTS\n\nEndingSceneTransition_Next:\n\tINC byte_RAM_E6\n\nEndingSceneTransition_Exit:\n\tRTS\n\n\n","htmlComment":"<p>Advances to the next scene and does the palette transition</p>\n","htmlContent":"EndingSceneTransition:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> EndingSceneTransition_Exit\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BCS</span> EndingSceneTransition_Next\n\n\t<span class=\"token opcode property\">LDA</span> EndingScreenUpdateIndex, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">RTS</span>\n\nEndingSceneTransition_Next:\n\t<span class=\"token opcode property\">INC</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\nEndingSceneTransition_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":6376},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK1_ABA7:\n\tLDA byte_RAM_10\n\tAND #$03\n\tBNE EndingSceneTransition_Exit\n\n\tDEC byte_RAM_E5\n\tLDY byte_RAM_E5\n\tLDA EndingScreenUpdateIndex, Y\n\tSTA ScreenUpdateIndex\n\tTYA\n\tBNE EndingSceneTransition_Exit\n\n\tINC byte_RAM_E6\n\tRTS\n\n\nEnableNMI_Bank1:\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x16 | PPUCtrl_NMIEnabled\n\tSTA PPUCtrlMirror\n\tSTA PPUCTRL\n\tRTS\n\n\nDisableNMI_Bank1:\n\tLDA #PPUCtrl_Base2000 | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite0000 | PPUCtrl_Background1000 | PPUCtrl_SpriteSize8x16 | PPUCtrl_NMIDisabled\n\tSTA PPUCTRL\n\tSTA PPUCtrlMirror\n\tRTS\n\n\n\nloc_BANK1_ABCC:\n\tJSR ContributorCharacterAnimation\n\n\tLDA byte_RAM_E6\n\tJSR JumpToTableAfterJump\n\n\t.dw loc_BANK1_ABA7\n\t.dw loc_BANK1_AC0A\n\t.dw loc_BANK1_AC87\n\n\nbyte_BANK1_ABDA:\n\t.db $C0\n\t.db $C8\n\t.db $B8\n\t.db $B8\n\t.db $C8\n\t.db $C0\n\nbyte_BANK1_ABE0:\n\t.db $C0\n\t.db $08\n\t.db $E0\n\t.db $F0\n\t.db $D0\n\t.db $E8\n\nEndingWartTiles:\n\t.db $11\n\t.db $13\n\t.db $19\n\t.db $1B\n\t.db $21\n\t.db $23\n\t.db $15\n\t.db $17\n\t.db $1D\n\t.db $1F\n\t.db $25\n\t.db $27\n\nbyte_BANK1_ABF2:\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $18\n\t.db $20\n\t.db $28\n\t.db $00\n\t.db $08\n\t.db $10\n\t.db $18\n\t.db $20\n\t.db $28\n\nbyte_BANK1_ABFE:\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $00\n\t.db $10\n\t.db $10\n\t.db $10\n\t.db $10\n\t.db $10\n\t.db $10\n\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">1</span>_ABA<span class=\"token decimalnumber string\">7</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">BNE</span> EndingSceneTransition_Exit\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">LDA</span> EndingScreenUpdateIndex, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ScreenUpdateIndex\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">BNE</span> EndingSceneTransition_Exit\n\n\t<span class=\"token opcode property\">INC</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEnableNMI_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> #PPUCtrl_Base<span class=\"token decimalnumber string\">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class=\"token decimalnumber string\">0000</span> | PPUCtrl_Background<span class=\"token decimalnumber string\">1000</span> | PPUCtrl_SpriteSize<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span> | PPUCtrl_NMIEnabled\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">STA</span> PPUCTRL\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDisableNMI_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> #PPUCtrl_Base<span class=\"token decimalnumber string\">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class=\"token decimalnumber string\">0000</span> | PPUCtrl_Background<span class=\"token decimalnumber string\">1000</span> | PPUCtrl_SpriteSize<span class=\"token decimalnumber string\">8</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">16</span> | PPUCtrl_NMIDisabled\n\t<span class=\"token opcode property\">STA</span> PPUCTRL\n\t<span class=\"token opcode property\">STA</span> PPUCtrlMirror\n\t<span class=\"token opcode property\">RTS</span>\n\n\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ABCC:\n\t<span class=\"token opcode property\">JSR</span> ContributorCharacterAnimation\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">JSR</span> JumpToTableAfterJump\n\n\t<span class=\"token directive keyword\">.dw</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ABA<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token directive keyword\">.dw</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>\n\t<span class=\"token directive keyword\">.dw</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">87</span>\n\n\nbyte_BANK<span class=\"token decimalnumber string\">1</span>_ABDA:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$B8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C8</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C0</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">1</span>_ABE<span class=\"token decimalnumber string\">0</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$C0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$F0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$D0</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$E8</span>\n\nEndingWartTiles:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$11</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$13</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$19</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$21</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$23</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$15</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$17</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$25</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$27</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">1</span>_ABF<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$28</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">1</span>_ABFE:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$10</span>\n\n\n","line":6398},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK1_AC0A:\n\tJSR ApplyPlayerPhysicsX\n\n\tLDA PlayerXHi\n\tCMP #$01\n\tBNE loc_BANK1_AC37\n\n\tLDA PlayerXLo\n\tCMP #$20\n\tBCC loc_BANK1_AC37\n\n\tINC_abs byte_RAM_E6\n\n\tLDA #$A0\n\tSTA byte_RAM_10\n\tLDX #$05\n\nloc_BANK1_AC22:\n\tLDA #$20\n\tSTA ObjectXLo, X\n\tLDA #$A8\n\nloc_BANK1_AC28:\n\tSTA ObjectYLo, X\n\tLDA byte_BANK1_ABDA, X\n\tSTA ObjectXVelocity, X\n\tLDA byte_BANK1_ABE0, X\n\tSTA ObjectYVelocity, X\n\tDEX\n\tBPL loc_BANK1_AC22\n\nloc_BANK1_AC37:\n\tLDY #$A0\n\tLDA byte_RAM_10\n\tAND #$38\n\tBNE loc_BANK1_AC40\n\n\tDEY\n\nloc_BANK1_AC40:\n\tAND #$08\n\tBNE loc_BANK1_AC45\n\n\tDEY\n\nloc_BANK1_AC45:\n\tSTY PlayerYLo\n\tLDX #$0B\n\tLDY #$70\n\nloc_BANK1_AC4B:\n\tLDA PlayerYLo\n\tCLC\n\tADC byte_BANK1_ABFE, X\n\tSTA SpriteDMAArea, Y\n\tLDA EndingWartTiles, X\n\tSTA SpriteDMAArea + 1, Y\n\tLDA #$01\n\tSTA SpriteDMAArea + 2, Y\n\tLDA PlayerXLo\n\tCLC\n\tADC byte_BANK1_ABF2, X\n\tSTA SpriteDMAArea + 3, Y\n\tLDA PlayerXHi\n\nloc_BANK1_AC6A:\n\tADC #$00\n\tBEQ loc_BANK1_AC73\n\n\tLDA #$F0\n\tSTA SpriteDMAArea, Y\n\nloc_BANK1_AC73:\n\tINY\n\tINY\n\tINY\n\tINY\n\tDEX\n\tBPL loc_BANK1_AC4B\n\n\tRTS\n\n\nZonkTiles:\n\t.db $39\n\t.db $35\n\t.db $37\n\t.db $35\n\t.db $37\n\t.db $39\n\nbyte_BANK1_AC81:\n\t.db $00\n\t.db $06\n\t.db $03\n\t.db $09\n\t.db $0F\n\t.db $0C\n\n\nloc_BANK1_AC87:\n\tLDA byte_RAM_10\n\tBNE loc_BANK1_ACA4\n\nloc_BANK1_AC8B:\n\tSTA ObjectXSubpixel + 6\n\tSTA ObjectYSubpixel + 6\n\tSTA ObjectXLo + 6\n\tSTA byte_RAM_10\n\tLDA #$6F\n\tSTA ObjectYLo + 6\n\tLDA #$E6\n\tSTA ObjectXVelocity + 6\n\tLDA #$0DA\n\tSTA ObjectYVelocity + 6\n\n\tINC_abs byte_RAM_E6\n\n\nloc_BANK1_ACA4:\n\tLDX #$05\n\nloc_BANK1_ACA6:\n\tSTX byte_RAM_12\n\tJSR ApplyObjectPhysicsX_Bank1\n\n\tJSR ApplyObjectPhysicsY_Bank1\n\n\tLDY #$F0\n\tLDA byte_RAM_10\n\tBEQ loc_BANK1_ACC1\n\n\tAND #$0F\n\tCMP byte_BANK1_AC81, X\n\tBNE loc_BANK1_ACC3\n\n\tLDA #$20\n\tSTA ObjectXLo, X\n\tLDY #$A8\n\nloc_BANK1_ACC1:\n\tSTY ObjectYLo, X\n\nloc_BANK1_ACC3:\n\tTXA\n\tASL A\n\tASL A\n\tTAY\n\tLDA ObjectXLo, X\n\tCMP #$80\n\tBCS loc_BANK1_ACD1\n\n\tLDA #$F0\n\tBNE loc_BANK1_ACD6\n\nloc_BANK1_ACD1:\n\tSTA SpriteDMAArea + $73, Y\n\tLDA ObjectYLo, X\n\nloc_BANK1_ACD6:\n\tSTA SpriteDMAArea + $70, Y\n\tLDA ZonkTiles, X\n\tSTA SpriteDMAArea + $71, Y\n\tLDA #$00\n\tSTA SpriteDMAArea + $72, Y\n\tDEX\n\tBPL loc_BANK1_ACA6\n\n\tRTS\n\n\nContributorAnimationTiles:\nContributorAnimationTiles_Mario:\n\t.db $61\n\t.db $61\n\t.db $63\n\t.db $93\n\t.db $65\n\t.db $65\n\t.db $67\n\t.db $67\nContributorAnimationTiles_Luigi:\n\t.db $69\n\t.db $69\n\t.db $95\n\t.db $6B\n\t.db $6D\n\t.db $6D\n\t.db $97\n\t.db $6F\nContributorAnimationTiles_Toad:\n\t.db $83\n\t.db $85\n\t.db $83\n\t.db $85\n\t.db $87\n\t.db $89\n\t.db $87\n\t.db $89\nContributorAnimationTiles_Princess:\n\t.db $8B\n\t.db $8B\n\t.db $99\n\t.db $8D\n\t.db $8F\n\t.db $8F\n\t.db $91\n\t.db $91\n\nContributorAnimationTilesOffset:\n\t.db (ContributorAnimationTiles_Mario - ContributorAnimationTiles + 6)\n\t.db (ContributorAnimationTiles_Luigi - ContributorAnimationTiles + 6)\n\t.db (ContributorAnimationTiles_Toad - ContributorAnimationTiles + 6)\n\t.db (ContributorAnimationTiles_Princess - ContributorAnimationTiles + 6)\n\n\nContributorCharacterAnimation:\n\tINC PlayerWalkFrame\n\tLDA #$03\n\tSTA byte_RAM_0\n\tLDA PlayerWalkFrame\n\tSTA byte_RAM_1\n\tLDY #$3C\n\nContributorCharacterAnimation_OuterLoop:\n\tLDX byte_RAM_0\n\tLDA ContributorAnimationTilesOffset, X\n\tTAX\n\tINC byte_RAM_1\n\tLDA byte_RAM_1\n\tAND #$10\n\tBEQ ContributorCharacterAnimation_Render\n\n\tINX\n\nContributorCharacterAnimation_Render:\n\tLDA #$03\n\tSTA byte_RAM_2\nContributorCharacterAnimation_InnerLoop:\n\tLDA ContributorAnimationTiles, X\n\tSTA SpriteDMAArea + $11, Y\n\tDEX\n\tDEX\n\tDEY\n\tDEY\n\tDEY\n\tDEY\n\tDEC byte_RAM_2\n\tBPL ContributorCharacterAnimation_InnerLoop\n\n\tDEC byte_RAM_0\n\tBPL ContributorCharacterAnimation_OuterLoop\n\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">0</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyPlayerPhysicsX\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">37</span>\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">37</span>\n\n\tINC_abs byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$05</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">22</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$A8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">28</span>:\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">1</span>_ABDA, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> byte_BANK<span class=\"token decimalnumber string\">1</span>_ABE<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">22</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">37</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$A0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$38</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">40</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">40</span>:\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">45</span>\n\n\t<span class=\"token opcode property\">DEY</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">45</span>:\n\t<span class=\"token opcode property\">STY</span> PlayerYLo\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$0B</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$70</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">4</span>B:\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">1</span>_ABFE, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> EndingWartTiles, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_BANK<span class=\"token decimalnumber string\">1</span>_ABF<span class=\"token decimalnumber string\">2</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token decimalnumber string\">3</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">6</span><span class=\"token register variable\">A</span>:\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">73</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">73</span>:\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">4</span>B\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\nZonkTiles:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$39</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$35</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$37</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$35</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$37</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$39</span>\n\nbyte_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">81</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$06</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$09</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">87</span>:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ACA<span class=\"token decimalnumber string\">4</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">8</span>B:\n\t<span class=\"token opcode property\">STA</span> ObjectXSubpixel + <span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYSubpixel + <span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo + <span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$6F</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo + <span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$E6</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity + <span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0DA</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity + <span class=\"token decimalnumber string\">6</span>\n\n\tINC_abs byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ACA<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$05</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ACA<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">STX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ACC<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">CMP</span> byte_BANK<span class=\"token decimalnumber string\">1</span>_AC<span class=\"token decimalnumber string\">81</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ACC<span class=\"token decimalnumber string\">3</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$A8</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ACC<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">STY</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ACC<span class=\"token decimalnumber string\">3</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$80</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ACD<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ACD<span class=\"token decimalnumber string\">6</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ACD<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$73</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_ACD<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$70</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ZonkTiles, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$71</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$72</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_ACA<span class=\"token decimalnumber string\">6</span>\n\n\t<span class=\"token opcode property\">RTS</span>\n\n\nContributorAnimationTiles:\nContributorAnimationTiles_Mario:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$61</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$63</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$93</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$65</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$65</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$67</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$67</span>\nContributorAnimationTiles_Luigi:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$69</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$69</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$95</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$97</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$6F</span>\nContributorAnimationTiles_Toad:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$83</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$85</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$83</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$85</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$87</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$89</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$87</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$89</span>\nContributorAnimationTiles_Princess:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8B</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$99</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8D</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$8F</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$91</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$91</span>\n\nContributorAnimationTilesOffset:\n\t<span class=\"token directive keyword\">.db</span> (ContributorAnimationTiles_Mario - ContributorAnimationTiles + <span class=\"token decimalnumber string\">6</span>)\n\t<span class=\"token directive keyword\">.db</span> (ContributorAnimationTiles_Luigi - ContributorAnimationTiles + <span class=\"token decimalnumber string\">6</span>)\n\t<span class=\"token directive keyword\">.db</span> (ContributorAnimationTiles_Toad - ContributorAnimationTiles + <span class=\"token decimalnumber string\">6</span>)\n\t<span class=\"token directive keyword\">.db</span> (ContributorAnimationTiles_Princess - ContributorAnimationTiles + <span class=\"token decimalnumber string\">6</span>)\n\n\nContributorCharacterAnimation:\n\t<span class=\"token opcode property\">INC</span> PlayerWalkFrame\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerWalkFrame\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$3C</span>\n\nContributorCharacterAnimation_OuterLoop:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> ContributorAnimationTilesOffset, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">INC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> ContributorCharacterAnimation_Render\n\n\t<span class=\"token opcode property\">INX</span>\n\nContributorCharacterAnimation_Render:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\nContributorCharacterAnimation_InnerLoop:\n\t<span class=\"token opcode property\">LDA</span> ContributorAnimationTiles, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> SpriteDMAArea + <span class=\"token hexnumber string\">$11</span>, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">BPL</span> ContributorCharacterAnimation_InnerLoop\n\n\t<span class=\"token opcode property\">DEC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">BPL</span> ContributorCharacterAnimation_OuterLoop\n\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":6501},{"comment":"\nCalculates the list of top contributors\n","content":"Ending_GetContributor:\n\tLDA #$00\n\tSTA MaxLevelsCompleted\n\n\tLDY #$03\nEnding_GetContributor_Loop:\n\tLDA CharacterLevelsCompleted, Y\n\tCMP MaxLevelsCompleted\n\tBCC Ending_GetContributor_Next\n\n\tLDA CharacterLevelsCompleted, Y\n\tSTA MaxLevelsCompleted\n\nEnding_GetContributor_Next:\n\tDEY\n\tBPL Ending_GetContributor_Loop\n\n\tLDX #$00\n\tLDY #$03\nEnding_GetContributor_Loop2:\n\tLDA CharacterLevelsCompleted, Y\n\tCMP MaxLevelsCompleted\n\tBNE Ending_GetContributor_Next2\n\n\tTYA\n\tSTA Contributors, X\n\tINX\n\nEnding_GetContributor_Next2:\n\tDEY\n\tBPL Ending_GetContributor_Loop2\n\n\tDEX\n\tSTX NumContributors\n\tLDX #$00\n\tLDA #$21\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$2A\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$0C\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$00\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$0FB\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$03\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\n\tLDA #$0FB\n\tSTA PPUBuffer_301, X\n\tINX\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$02\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$0FB\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDY #$01\n\tLDA CharacterLevelsCompleted, Y\n\tJSR sub_BANK1_AE43\n\n\tTYA\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA byte_RAM_1\n\tSTA PPUBuffer_301, X\n\tINX\n\tLDA #$00\n\tSTA PPUBuffer_301, X\n\tLDA #$3C\n\tSTA ContributorTimer\n\tRTS\n\n\n","htmlComment":"<p>Calculates the list of top contributors</p>\n","htmlContent":"Ending_GetContributor:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> MaxLevelsCompleted\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\nEnding_GetContributor_Loop:\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> MaxLevelsCompleted\n\t<span class=\"token opcode property\">BCC</span> Ending_GetContributor_Next\n\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> MaxLevelsCompleted\n\nEnding_GetContributor_Next:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> Ending_GetContributor_Loop\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\nEnding_GetContributor_Loop<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> MaxLevelsCompleted\n\t<span class=\"token opcode property\">BNE</span> Ending_GetContributor_Next<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">STA</span> Contributors, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\nEnding_GetContributor_Next<span class=\"token decimalnumber string\">2</span>:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> Ending_GetContributor_Loop<span class=\"token decimalnumber string\">2</span>\n\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">STX</span> NumContributors\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$21</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$2A</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">43</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FB</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$03</span>\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">43</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FB</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$02</span>\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">43</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FB</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDA</span> CharacterLevelsCompleted, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">JSR</span> sub_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">43</span>\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PPUBuffer_<span class=\"token decimalnumber string\">301</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3C</span>\n\t<span class=\"token opcode property\">STA</span> ContributorTimer\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":6761},{"comment":"=============== S U B R O U T I N E =======================================","content":"ContributorTicker:\n\tDEC ContributorTimer\n\tBPL ContributorTicker_Exit\n\n\tLDA #$3C\n\tSTA ContributorTimer\n\tLDY ContributorIndex\n\tLDA Contributors, Y\n\tCLC\n\tADC #$09\n\n\tSTA_abs ScreenUpdateIndex\n\n\tDEC ContributorIndex\n\tBPL ContributorTicker_Exit\n\n\tLDA NumContributors\n\tSTA ContributorIndex\n\nContributorTicker_Exit:\n\tRTS\n\n\nEndingCelebrationText_MARIO:\n\t.db $20, $ED, $08, $E6, $DA, $EB, $E2, $E8, $FB, $FB, $FB\n\t.db $00\n\nEndingCelebrationText_PRINCESS:\n\t.db $20, $ED, $08, $E9, $EB, $E2, $E7, $DC, $DE, $EC, $EC\n\t.db $00\n\nEndingCelebrationText_TOAD:\n\t.db $20, $ED, $08, $ED, $E8, $DA, $DD, $FB, $FB, $FB, $FB\n\t.db $00\n\nEndingCelebrationText_LUIGI:\n\t.db $20, $ED, $08, $E5, $EE, $E2, $E0, $E2, $FB, $FB, $FB\n\t.db $00\n\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"ContributorTicker:\n\t<span class=\"token opcode property\">DEC</span> ContributorTimer\n\t<span class=\"token opcode property\">BPL</span> ContributorTicker_Exit\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$3C</span>\n\t<span class=\"token opcode property\">STA</span> ContributorTimer\n\t<span class=\"token opcode property\">LDY</span> ContributorIndex\n\t<span class=\"token opcode property\">LDA</span> Contributors, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$09</span>\n\n\tSTA_abs ScreenUpdateIndex\n\n\t<span class=\"token opcode property\">DEC</span> ContributorIndex\n\t<span class=\"token opcode property\">BPL</span> ContributorTicker_Exit\n\n\t<span class=\"token opcode property\">LDA</span> NumContributors\n\t<span class=\"token opcode property\">STA</span> ContributorIndex\n\nContributorTicker_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nEndingCelebrationText_MARIO:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$E6</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationText_PRINCESS:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$E9</span>, <span class=\"token hexnumber string\">$EB</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E7</span>, <span class=\"token hexnumber string\">$DC</span>, <span class=\"token hexnumber string\">$DE</span>, <span class=\"token hexnumber string\">$EC</span>, <span class=\"token hexnumber string\">$EC</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationText_TOAD:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$E8</span>, <span class=\"token hexnumber string\">$DA</span>, <span class=\"token hexnumber string\">$DD</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\nEndingCelebrationText_LUIGI:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$20</span>, <span class=\"token hexnumber string\">$ED</span>, <span class=\"token hexnumber string\">$08</span>, <span class=\"token hexnumber string\">$E5</span>, <span class=\"token hexnumber string\">$EE</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$E0</span>, <span class=\"token hexnumber string\">$E2</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>, <span class=\"token hexnumber string\">$FB</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\n\n","line":6865},{"comment":"=============== S U B R O U T I N E =======================================","content":"sub_BANK1_AE43:\n\tLDY #$D0\n\nloc_BANK1_AE45:\n\tCMP #$0A\n\tBCC loc_BANK1_AE4F\n\n\tSBC #$0A\n\nloc_BANK1_AE4B:\n\tINY\n\tJMP loc_BANK1_AE45\n\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"sub_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">43</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$D0</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">45</span>:\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">4</span>F\n\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$0A</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">4</span>B:\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">JMP</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">45</span>\n\n","line":6907},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK1_AE4F:\n\tORA #$D0\n\tCPY #$D0\n\tBNE loc_BANK1_AE57\n\n\tLDY #$0FB\n\nloc_BANK1_AE57:\n\tSTA byte_RAM_1\n\tRTS\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">4</span>F:\n\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">57</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$0FB</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_AE<span class=\"token decimalnumber string\">57</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">RTS</span>\n","line":6922},{"comment":"End of function sub_BANK1_AE43","content":"","htmlComment":"<p>End of function sub_BANK1_AE43</p>\n","htmlContent":"","line":6935},{"comment":"---------------------------------------------------------------------------","content":"","htmlComment":"<hr>\n","htmlContent":"","line":6937},{"comment":"Unused space in the original ($AE5A - $B8FF)","content":"unusedSpace $B900, $FF\n\nMysteryCharacterData3900:\n\t.db $FB ; @TODO ??? Not sure what this is\n\t.db $FF\n\t.db $00\n\t.db $08\n\t.db $0C\n\t.db $18\n\t.db $1A\n\n","htmlComment":"<p>Unused space in the original ($AE5A - $B8FF)</p>\n","htmlContent":"unusedSpace <span class=\"token hexnumber string\">$B900</span>, <span class=\"token hexnumber string\">$FF</span>\n\nMysteryCharacterData<span class=\"token decimalnumber string\">3900</span>:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FB</span> <span class=\"token comment\">; @TODO ??? Not sure what this is</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$FF</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$08</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$0C</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$18</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$1A</span>\n\n","line":6939},{"comment":"\nNOTE: A copy of this subroutine also exists in Bank 2\n\nApplies object physics for the y-axis\n\nInput\nX = enemy index\n","content":"ApplyObjectPhysicsY_Bank1:\n\tTXA\n\tCLC\n\tADC #$0A\n\tTAX\n","htmlComment":"<p>NOTE: A copy of this subroutine also exists in Bank 2</p>\n<p>Applies object physics for the y-axis</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"ApplyObjectPhysicsY_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">TXA</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$0A</span>\n\t<span class=\"token opcode property\">TAX</span>\n","line":6959},{"comment":"\nNOTE: A copy of this subroutine also exists in Bank 2\n\nApplies object physics for the x-axis\n\nInput\nX = enemy index, physics direction\n($00-$09 for horizontal, $0A-$13 for vertical)\n\nOutput\nX = RAM_12\n","content":"ApplyObjectPhysicsX_Bank1:","htmlComment":"<p>NOTE: A copy of this subroutine also exists in Bank 2</p>\n<p>Applies object physics for the x-axis</p>\n<p>Input\nX = enemy index, physics direction\n($00-$09 for horizontal, $0A-$13 for vertical)</p>\n<p>Output\nX = RAM_12</p>\n","htmlContent":"ApplyObjectPhysicsX_Bank<span class=\"token decimalnumber string\">1</span>:","line":6977},{"comment":"Add acceleration to velocity","content":"\tLDA ObjectXVelocity, X\n\tCLC\n\tADC ObjectXAcceleration, X\n\n\tPHA","htmlComment":"<p>Add acceleration to velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\n\t<span class=\"token opcode property\">PHA</span>","line":6979},{"comment":"Lower nybble of velocity is for subpixel position","content":"\tASL A\n\tASL A\n\tASL A\n\tASL A\n\tSTA byte_RAM_1\n","htmlComment":"<p>Lower nybble of velocity is for subpixel position</p>\n","htmlContent":"\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n","line":6985},{"comment":"Upper nybble of velocity is for lo position","content":"\tPLA\n\tLSR A\n\tLSR A\n\tLSR A\n\tLSR A\n\n\tCMP #$08\n\tBCC ApplyObjectPhysics_StoreVelocityLo_Bank1\n","htmlComment":"<p>Upper nybble of velocity is for lo position</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BCC</span> ApplyObjectPhysics_StoreVelocityLo_Bank<span class=\"token decimalnumber string\">1</span>\n","line":6992},{"comment":"Left/up: Carry negative bits through upper nybble","content":"\tORA #$F0\n\nApplyObjectPhysics_StoreVelocityLo_Bank1:\n\tSTA byte_RAM_0\n\n\tLDY #$00\n\tASL A\n\tBCC ApplyObjectPhysics_StoreDirection_Bank1\n","htmlComment":"<p>Left/up: Carry negative bits through upper nybble</p>\n","htmlContent":"\t<span class=\"token opcode property\">ORA</span> <span class=\"token hexnumber string\">#$F0</span>\n\nApplyObjectPhysics_StoreVelocityLo_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">BCC</span> ApplyObjectPhysics_StoreDirection_Bank<span class=\"token decimalnumber string\">1</span>\n","line":7002},{"comment":"Left/up","content":"\tDEY\n\nApplyObjectPhysics_StoreDirection_Bank1:\n\tSTY byte_RAM_2\n","htmlComment":"<p>Left/up</p>\n","htmlContent":"\t<span class=\"token opcode property\">DEY</span>\n\nApplyObjectPhysics_StoreDirection_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n","line":7012},{"comment":"Add lower nybble of velocity for subpixel position","content":"\tLDA ObjectXSubpixel, X\n\tCLC\n\tADC byte_RAM_1\n\tSTA ObjectXSubpixel, X\n","htmlComment":"<p>Add lower nybble of velocity for subpixel position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXSubpixel, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXSubpixel, <span class=\"token register variable\">X</span>\n","line":7018},{"comment":"Add upper nybble of velocity for lo position","content":"\tLDA ObjectXLo, X\n\tADC byte_RAM_0\n\tSTA ObjectXLo, X\n\nApplyObjectPhysics_PositionHi_Bank1:\n\tLSR byte_RAM_1\n\tLDA ObjectXHi, X\n\tADC byte_RAM_2\n\tSTA ObjectXHi, X\n\nApplyObjectPhysics_Exit_Bank1:\n\tLDX byte_RAM_12\n\tRTS\n\n\n","htmlComment":"<p>Add upper nybble of velocity for lo position</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\nApplyObjectPhysics_PositionHi_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LSR</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\nApplyObjectPhysics_Exit_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":7024},{"comment":"\nApplies object physics\n\nInput\nX = enemy index\n","content":"ApplyObjectMovement_Bank1:\n\tLDA ObjectShakeTimer, X\n\tBNE ApplyObjectMovement_Vertical_Bank1\n\n\tJSR ApplyObjectPhysicsX_Bank1\n\nApplyObjectMovement_Vertical_Bank1:\n\tJSR ApplyObjectPhysicsY_Bank1\n\n\tLDA ObjectYVelocity, X\n\tBMI ApplyObjectMovement_Gravity_Bank1\n","htmlComment":"<p>Applies object physics</p>\n<p>Input\nX = enemy index</p>\n","htmlContent":"ApplyObjectMovement_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BNE</span> ApplyObjectMovement_Vertical_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsX_Bank<span class=\"token decimalnumber string\">1</span>\n\nApplyObjectMovement_Vertical_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">JSR</span> ApplyObjectPhysicsY_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> ApplyObjectMovement_Gravity_Bank<span class=\"token decimalnumber string\">1</span>\n","line":7046},{"comment":"Check terminal velocity","content":"\tCMP #$3E\n\tBCS ApplyObjectMovement_Exit_Bank1\n\nApplyObjectMovement_Gravity_Bank1:\n\tINC ObjectYVelocity, X\n\tINC ObjectYVelocity, X\n\nApplyObjectMovement_Exit_Bank1:\n\tRTS\n\n\nDoorAnimation_Locked:\n\tLDA #$01\n\tBNE DoorAnimation\n\nDoorAnimation_Unlocked:\n\tLDA #$00\n\nDoorAnimation:\n\tPHA\n\tLDY #$08\n\nDoorAnimation_Loop:","htmlComment":"<p>Check terminal velocity</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> <span class=\"token hexnumber string\">#$3E</span>\n\t<span class=\"token opcode property\">BCS</span> ApplyObjectMovement_Exit_Bank<span class=\"token decimalnumber string\">1</span>\n\nApplyObjectMovement_Gravity_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INC</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\nApplyObjectMovement_Exit_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDoorAnimation_Locked:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> DoorAnimation\n\nDoorAnimation_Unlocked:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nDoorAnimation:\n\t<span class=\"token opcode property\">PHA</span>\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$08</span>\n\nDoorAnimation_Loop:","line":7059},{"comment":"skip if inactive","content":"\tLDA EnemyState, Y\n\tBEQ DoorAnimation_LoopNext\n","htmlComment":"<p>skip if inactive</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> DoorAnimation_LoopNext\n","line":7083},{"comment":"skip enemies that aren't the door","content":"\tLDA ObjectType, Y\n\tCMP #Enemy_SubspaceDoor\n\tBNE DoorAnimation_LoopNext\n\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, Y\n\tLDA #$20\n\tSTA EnemyTimer, Y\n\nDoorAnimation_LoopNext:\n\tDEY\n\tBPL DoorAnimation_Loop\n\n\tJSR CreateEnemy_TryAllSlots_Bank1\n\n\tBMI DoorAnimation_Exit\n\n\tLDA #$00\n\tSTA DoorAnimationTimer\n\tSTA SubspaceDoorTimer\n\tLDX byte_RAM_0\n\tPLA\n\tSTA EnemyArray_477, X\n\tLDA #Enemy_SubspaceDoor\n\tSTA ObjectType, X\n\tLDA PlayerXLo\n\tADC #$08\n\tAND #$F0\n\tSTA ObjectXLo, X\n\tLDA PlayerXHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA PlayerYLo\n\tSTA ObjectYLo, X\n\tLDA PlayerYHi\n\tSTA ObjectYHi, X\n\tLDA #ObjAttrib_Palette1 | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDX byte_RAM_12\n\tRTS\n\nDoorAnimation_Exit:\n\tPLA\n\tRTS\n\n\nCreateStarman:\n\tJSR CreateEnemy_Bank1\n\n\tBMI CreateStarman_Exit\n\n\tLDX byte_RAM_0\n\tLDA #Enemy_Starman\n\tSTA ObjectType, X\n\tLDA ScreenBoundaryLeftLo\n\tADC #$D0\n\tSTA ObjectXLo, X\n\tLDA ScreenBoundaryLeftHi\n\tADC #$00\n\tSTA ObjectXHi, X\n\tLDA ScreenYLo\n\tADC #$E0\n\tSTA ObjectYLo, X\n\tLDA ScreenYHi\n\tADC #$00\n\tSTA ObjectYHi, X\n\tJSR loc_BANK1_BA17\n\n\tLDX byte_RAM_12\n\nCreateStarman_Exit:\n\tRTS\n\n\n","htmlComment":"<p>skip enemies that aren't the door</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">CMP</span> #Enemy_SubspaceDoor\n\t<span class=\"token opcode property\">BNE</span> DoorAnimation_LoopNext\n\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_PuffOfSmoke\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">Y</span>\n\nDoorAnimation_LoopNext:\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> DoorAnimation_Loop\n\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_TryAllSlots_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">BMI</span> DoorAnimation_Exit\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> DoorAnimationTimer\n\t<span class=\"token opcode property\">STA</span> SubspaceDoorTimer\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_SubspaceDoor\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerXHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> PlayerYHi\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span> | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nDoorAnimation_Exit:\n\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nCreateStarman:\n\t<span class=\"token opcode property\">JSR</span> CreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">BMI</span> CreateStarman_Exit\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_Starman\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$D0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenBoundaryLeftHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYLo\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$E0</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ScreenYHi\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">JSR</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BA<span class=\"token decimalnumber string\">17</span>\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\nCreateStarman_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\n","line":7087},{"comment":"=============== S U B R O U T I N E =======================================","content":"EnemyInit_Basic_Bank1:\n\tLDA #$00\n\tSTA EnemyTimer, X\n\tLDA #$00\n\tSTA EnemyVariable, X\n\nloc_BANK1_B9EB:\n\tLDA #$00\n\tSTA EnemyArray_B1, X\n\tSTA EnemyArray_42F, X\n\tSTA ObjectBeingCarriedTimer, X\n\tSTA ObjectAnimationTimer, X\n\tSTA ObjectShakeTimer, X\n\tSTA EnemyCollision, X\n\tSTA EnemyArray_438, X\n\tSTA EnemyArray_453, X\n\tSTA ObjectXAcceleration, X\n\tSTA ObjectYAcceleration, X\n\tSTA EnemyArray_45C, X\n\tSTA EnemyArray_477, X\n\tSTA EnemyArray_480, X\n\tSTA EnemyHP, X\n\tSTA ObjectYVelocity, X\n\tSTA ObjectXVelocity, X\n","htmlComment":"<p>=============== S U B R O U T I N E =======================================</p>\n","htmlContent":"EnemyInit_Basic_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyVariable, <span class=\"token register variable\">X</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_B<span class=\"token decimalnumber string\">9</span>EB:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_B<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">42</span>F, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectBeingCarriedTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectShakeTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyCollision, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">453</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYAcceleration, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">45</span>C, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">477</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">480</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> EnemyHP, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYVelocity, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXVelocity, <span class=\"token register variable\">X</span>\n","line":7162},{"comment":"look up object attributes","content":"loc_BANK1_BA17:\n\tLDY ObjectType, X\n\tLDA ObjectAttributeTable, Y\n\tAND #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_16x32\n\tSTA ObjectAttributes, X\n\tLDA EnemyArray_46E_Data, Y\n\tSTA EnemyArray_46E, X\n\tLDA EnemyArray_489_Data, Y\n\tSTA EnemyArray_489, X\n\tLDA EnemyArray_492_Data, Y\n\tSTA EnemyArray_492, X\n\tRTS\n\n","htmlComment":"<p>look up object attributes</p>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">1</span>_BA<span class=\"token decimalnumber string\">17</span>:\n\t<span class=\"token opcode property\">LDY</span> ObjectType, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributeTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_<span class=\"token decimalnumber string\">16</span><span class=\"token register variable\">x</span><span class=\"token decimalnumber string\">32</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">46</span>E, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">489</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> EnemyArray_<span class=\"token decimalnumber string\">492</span>_Data, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">492</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7189},{"comment":"End of function EnemyInit_Basic_Bank1","content":"","htmlComment":"<p>End of function EnemyInit_Basic_Bank1</p>\n","htmlContent":"","line":7203},{"comment":"\nTurns the key into a puff of smoke\n\nInput\nX = enemy slot\nOutput\nX = value of byte_RAM_12\n","content":"TurnKeyIntoPuffOfSmoke:\n\tLDA ObjectAttributes, X\n\tAND #%11111100\n\tORA #ObjAttrib_Palette1\n\tSTA ObjectAttributes, X\n\tLDA #EnemyState_PuffOfSmoke\n\tSTA EnemyState, X\n\tSTA ObjectAnimationTimer, X\n\tLDA #$1F\n\tSTA EnemyTimer, X\n\tLDX byte_RAM_12\n\tRTS\n\n","htmlComment":"<p>Turns the key into a puff of smoke</p>\n<p>Input\nX = enemy slot\nOutput\nX = value of byte_RAM_12</p>\n","htmlContent":"TurnKeyIntoPuffOfSmoke:\n\t<span class=\"token opcode property\">LDA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%11111100</span>\n\t<span class=\"token opcode property\">ORA</span> #ObjAttrib_Palette<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_PuffOfSmoke\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectAnimationTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$1F</span>\n\t<span class=\"token opcode property\">STA</span> EnemyTimer, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7213},{"comment":"\nNOTE: This is a copy of the \"UnlinkEnemyFromRawData\" routine in Bank 2, but\nit is used here for spawning the door animation and Starman objects.\n\nSpawned enemies are linked to an offset in the raw enemy data, which prevents\nfrom being respawned until they are killed or moved offscreen.\n\nThis subroutine ensures that the enemy in a particular slot is not linked to\nthe raw enemy data\n\nInput\nX = enemy slot\n","content":"UnlinkEnemyFromRawData_Bank1:\n\tLDA #$0FF\n\tSTA EnemyRawDataOffset, X\n\tRTS\n\n","htmlComment":"<p>NOTE: This is a copy of the \"UnlinkEnemyFromRawData\" routine in Bank 2, but\nit is used here for spawning the door animation and Starman objects.</p>\n<p>Spawned enemies are linked to an offset in the raw enemy data, which prevents\nfrom being respawned until they are killed or moved offscreen.</p>\n<p>This subroutine ensures that the enemy in a particular slot is not linked to\nthe raw enemy data</p>\n<p>Input\nX = enemy slot</p>\n","htmlContent":"UnlinkEnemyFromRawData_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$0FF</span>\n\t<span class=\"token opcode property\">STA</span> EnemyRawDataOffset, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7240},{"comment":"\nUpdates the area page and tile placement offset\n\nInput\nbyte_RAM_E8 = area page\nbyte_RAM_E5 = tile placement offset shift\nbyte_RAM_E6 = previous tile placement offset\nOutput\nRAM_1 = low byte of decoded level data RAM\nRAM_2 = low byte of decoded level data RAM\nbyte_RAM_E7 = target tile placement offset\n","content":"SetTileOffsetAndAreaPageAddr_Bank1:\n\tLDX byte_RAM_E8\n\tJSR SetAreaPageAddr_Bank1\n\n\tLDA byte_RAM_E6\n\tCLC\n\tADC byte_RAM_E5\n\tSTA byte_RAM_E7\n\tRTS\n\n\nDecodedLevelPageStartLo_Bank1:\n\t.db <DecodedLevelData\n\t.db <(DecodedLevelData+$00F0)\n\t.db <(DecodedLevelData+$01E0)\n\t.db <(DecodedLevelData+$02D0)\n\t.db <(DecodedLevelData+$03C0)\n\t.db <(DecodedLevelData+$04B0)\n\t.db <(DecodedLevelData+$05A0)\n\t.db <(DecodedLevelData+$0690)\n\t.db <(DecodedLevelData+$0780)\n\t.db <(DecodedLevelData+$0870)\n\t.db <(SubAreaTileLayout)\n\nDecodedLevelPageStartHi_Bank1:\n\t.db >DecodedLevelData\n\t.db >(DecodedLevelData+$00F0)\n\t.db >(DecodedLevelData+$01E0)\n\t.db >(DecodedLevelData+$02D0)\n\t.db >(DecodedLevelData+$03C0)\n\t.db >(DecodedLevelData+$04B0)\n\t.db >(DecodedLevelData+$05A0)\n\t.db >(DecodedLevelData+$0690)\n\t.db >(DecodedLevelData+$0780)\n\t.db >(DecodedLevelData+$0870)\n\t.db >(SubAreaTileLayout)\n\n","htmlComment":"<p>Updates the area page and tile placement offset</p>\n<p>Input\nbyte_RAM_E8 = area page\nbyte_RAM_E5 = tile placement offset shift\nbyte_RAM_E6 = previous tile placement offset\nOutput\nRAM_1 = low byte of decoded level data RAM\nRAM_2 = low byte of decoded level data RAM\nbyte_RAM_E7 = target tile placement offset</p>\n","htmlContent":"SetTileOffsetAndAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_E<span class=\"token decimalnumber string\">8</span>\n\t<span class=\"token opcode property\">JSR</span> SetAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_E<span class=\"token decimalnumber string\">6</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> byte_RAM_E<span class=\"token decimalnumber string\">5</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_E<span class=\"token decimalnumber string\">7</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDecodedLevelPageStartLo_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token directive keyword\">.db</span> &#x3C;DecodedLevelData\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$00F0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$01E0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$02D0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$03C0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$04B0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$05A0</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$0690</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$0780</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(DecodedLevelData+<span class=\"token hexnumber string\">$0870</span>)\n\t<span class=\"token directive keyword\">.db</span> &#x3C;(SubAreaTileLayout)\n\nDecodedLevelPageStartHi_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token directive keyword\">.db</span> >DecodedLevelData\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$00F0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$01E0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$02D0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$03C0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$04B0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$05A0</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$0690</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$0780</span>)\n\t<span class=\"token directive keyword\">.db</span> >(DecodedLevelData+<span class=\"token hexnumber string\">$0870</span>)\n\t<span class=\"token directive keyword\">.db</span> >(SubAreaTileLayout)\n\n","line":7258},{"comment":"\nUpdates the area page that we're reading tiles from\n\nInput\nX = area page\nOutput\nbyte_RAM_1 = low byte of decoded level data RAM\nbyte_RAM_2 = low byte of decoded level data RAM\n","content":"SetAreaPageAddr_Bank1:\n\tLDA DecodedLevelPageStartLo_Bank1, X\n\tSTA byte_RAM_1\n\tLDA DecodedLevelPageStartHi_Bank1, X\n\tSTA byte_RAM_2\n\tRTS\n\n","htmlComment":"<p>Updates the area page that we're reading tiles from</p>\n<p>Input\nX = area page\nOutput\nbyte_RAM_1 = low byte of decoded level data RAM\nbyte_RAM_2 = low byte of decoded level data RAM</p>\n","htmlContent":"SetAreaPageAddr_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartLo_Bank<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">LDA</span> DecodedLevelPageStartHi_Bank<span class=\"token decimalnumber string\">1</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">2</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7305},{"comment":"\nChecks whether the player is on a quicksand tile\n\nInput\nbyte_RAM_0 = tile ID\nOutput\nA = Whether the player is sinking in quicksand\nX = PlayerInAir flag\n","content":"IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nPlayerTileCollision_CheckQuicksand:\n\tLDA #$01\n\tLDY byte_RAM_0\n\tCPY #BackgroundTile_QuicksandSlow\n\tBEQ PlayerTileCollision_QuicksandSlow\n\n\tCPY #BackgroundTile_QuicksandFast\n\tBEQ PlayerTileCollision_QuicksandFast\n\nELSE\nPlayerTileCollision_CheckQuicksand:\n\tLDY byte_RAM_0\n\tLDA InteractiveTileCollisionTable, Y\n\tAND #%00001100\n\tCMP #%00001000\n\n\tBNE PlayerTileCollision_NotQuicksand\n\n\tTYA\n\tAND %00000001\n\tBNE PlayerTileCollision_QuicksandFast\n\n\tLDA #$01\n\tBNE PlayerTileCollision_QuicksandSlow\nENDIF\n\nPlayerTileCollision_NotQuicksand:\n\tLDA #$00\n\tRTS\n\nPlayerTileCollision_QuicksandFast:\n\tLDA #$08\n\nPlayerTileCollision_QuicksandSlow:\n\tSTA PlayerYVelocity\n\tLDA QuicksandDepth\n\tBNE loc_BANK1_BA9B\n\n\tLDA PlayerYLo\n\tAND #$10\n\tSTA byte_RAM_4EB\n\nloc_BANK1_BA9B:","htmlComment":"<p>Checks whether the player is on a quicksand tile</p>\n<p>Input\nbyte_RAM_0 = tile ID\nOutput\nA = Whether the player is sinking in quicksand\nX = PlayerInAir flag</p>\n","htmlContent":"IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE\nPlayerTileCollision_CheckQuicksand:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">CPY</span> #BackgroundTile_QuicksandSlow\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_QuicksandSlow\n\n\t<span class=\"token opcode property\">CPY</span> #BackgroundTile_QuicksandFast\n\t<span class=\"token opcode property\">BEQ</span> PlayerTileCollision_QuicksandFast\n\nELSE\nPlayerTileCollision_CheckQuicksand:\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">LDA</span> InteractiveTileCollisionTable, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">#%00001100</span>\n\t<span class=\"token opcode property\">CMP</span> <span class=\"token binarynumber string\">#%00001000</span>\n\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_NotQuicksand\n\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token binarynumber string\">%00000001</span>\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_QuicksandFast\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$01</span>\n\t<span class=\"token opcode property\">BNE</span> PlayerTileCollision_QuicksandSlow\nENDIF\n\nPlayerTileCollision_NotQuicksand:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">RTS</span>\n\nPlayerTileCollision_QuicksandFast:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$08</span>\n\nPlayerTileCollision_QuicksandSlow:\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> QuicksandDepth\n\t<span class=\"token opcode property\">BNE</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BA<span class=\"token decimalnumber string\">9</span>B\n\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>EB\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BA<span class=\"token decimalnumber string\">9</span>B:","line":7322},{"comment":"check if player is too far under","content":"\tLDA PlayerYLo\n\tAND #$0F\n\tTAY\n\tLDA byte_RAM_4EB\n\tEOR PlayerYLo\n\tAND #$10\n\tBEQ loc_BANK1_BAB6\n","htmlComment":"<p>check if player is too far under</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$0F</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">4</span>EB\n\t<span class=\"token opcode property\">EOR</span> PlayerYLo\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BEQ</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BAB<span class=\"token decimalnumber string\">6</span>\n","line":7367},{"comment":"kill if >= this check","content":"\tCPY #$0C\n\tBCC loc_BANK1_BAB4\n\n\tLDA #$00\n\tSTA PlayerStateTimer\n\tJSR KillPlayer\n\nloc_BANK1_BAB4:\n\tLDY #$04\n\nloc_BANK1_BAB6:\n\tCPY #$04\n\tBCS loc_BANK1_BABC\n\n\tLDY #$01\n\nloc_BANK1_BABC:\n\tTYA\n\tDEX\n\tRTS\n\n\nPlayerTileCollision_HurtPlayer:\n\tLDA DamageInvulnTime\n\tBNE locret_BANK1_BAEC\n\n\tLDA PlayerHealth\n\tSEC\n\tSBC #$10\n\tBCC loc_BANK1_BAED\n\n\tSTA PlayerHealth\n\tLDA #$7F\n\tSTA DamageInvulnTime\n\tLDA PlayerScreenX\n\tSEC\n\tSBC SpriteTempScreenX\n\tASL A\n\tASL A\n\tSTA PlayerXVelocity\n\tLDA #$C0\n\tLDY PlayerYVelocity\n\tBPL loc_BANK1_BAE5\n\n\tLDA #$00\n\nloc_BANK1_BAE5:\n\tSTA PlayerYVelocity\n\tLDA #DPCM_PlayerHurt\n\tSTA DPCMQueue\n\nlocret_BANK1_BAEC:\n\tRTS\n\n","htmlComment":"<p>kill if >= this check</p>\n","htmlContent":"\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$0C</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BAB<span class=\"token decimalnumber string\">4</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">JSR</span> KillPlayer\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BAB<span class=\"token decimalnumber string\">4</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$04</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BAB<span class=\"token decimalnumber string\">6</span>:\n\t<span class=\"token opcode property\">CPY</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BCS</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BABC\n\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$01</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BABC:\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">DEX</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nPlayerTileCollision_HurtPlayer:\n\t<span class=\"token opcode property\">LDA</span> DamageInvulnTime\n\t<span class=\"token opcode property\">BNE</span> locret_BANK<span class=\"token decimalnumber string\">1</span>_BAEC\n\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">BCC</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BAED\n\n\t<span class=\"token opcode property\">STA</span> PlayerHealth\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">STA</span> DamageInvulnTime\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenX\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> SpriteTempScreenX\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">LDY</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BPL</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BAE<span class=\"token decimalnumber string\">5</span>\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BAE<span class=\"token decimalnumber string\">5</span>:\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> #DPCM_PlayerHurt\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nlocret_BANK<span class=\"token decimalnumber string\">1</span>_BAEC:\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7376},{"comment":"---------------------------------------------------------------------------","content":"loc_BANK1_BAED:\n\tLDA #$C0\n\tSTA PlayerYVelocity\n\tLDA #$20\n\tSTA PlayerStateTimer\n\tLDY byte_RAM_12\n\tBMI loc_BANK1_BAFD\n\n\tLSR A\n\tSTA EnemyArray_438, Y\n\nloc_BANK1_BAFD:\n\tJMP KillPlayer\n\n\n","htmlComment":"<hr>\n","htmlContent":"loc_BANK<span class=\"token decimalnumber string\">1</span>_BAED:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$C0</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$20</span>\n\t<span class=\"token opcode property\">STA</span> PlayerStateTimer\n\t<span class=\"token opcode property\">LDY</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BAFD\n\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_<span class=\"token decimalnumber string\">438</span>, <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BAFD:\n\t<span class=\"token opcode property\">JMP</span> KillPlayer\n\n\n","line":7431},{"comment":"---------------------------------------------------------------------------","content":"_code_3B00:\n\tLDY EnemyRawDataOffset, X\n\tBMI loc_BANK1_BB0B\n\n\tLDA (RawEnemyData), Y\n\tAND #$7F\n\tSTA (RawEnemyData), Y\n\nloc_BANK1_BB0B:\n\tLDA #$00\n\tSTA EnemyState, X\n\tRTS\n\n","htmlComment":"<hr>\n","htmlContent":"_code_<span class=\"token decimalnumber string\">3</span>B<span class=\"token decimalnumber string\">00</span>:\n\t<span class=\"token opcode property\">LDY</span> EnemyRawDataOffset, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">BMI</span> loc_BANK<span class=\"token decimalnumber string\">1</span>_BB<span class=\"token decimalnumber string\">0</span>B\n\n\t<span class=\"token opcode property\">LDA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$7F</span>\n\t<span class=\"token opcode property\">STA</span> (RawEnemyData), <span class=\"token register variable\">Y</span>\n\nloc_BANK<span class=\"token decimalnumber string\">1</span>_BB<span class=\"token decimalnumber string\">0</span>B:\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n","line":7448},{"comment":"\nNOTE: This is a copy of the \"CreateEnemy\" routine in Bank 2, but it is used\nhere for spawning the door animation and Starman objects.\n\nCreates a generic red Shyguy enemy and\ndoes some basic initialization for it.\n\nCreateEnemy_TryAllSlots checks all 9 object slots\nCreateEnemy only checks the first 6 object slots\n\nOutput\nN = enabled if no empty slot was found\nY = $FF if there no empty slot was found\nbyte_RAM_0 = slot used\n","content":"CreateEnemy_TryAllSlots_Bank1:\n\tLDY #$08\n\tBNE CreateEnemy_Bank1_FindSlot\n\nCreateEnemy_Bank1:\n\tLDY #$05\n\nCreateEnemy_Bank1_FindSlot:\n\tLDA EnemyState, Y\n\tBEQ CreateEnemy_Bank1_FoundSlot\n\n\tDEY\n\tBPL CreateEnemy_Bank1_FindSlot\n\n\tRTS\n\nCreateEnemy_Bank1_FoundSlot:\n\tLDA #EnemyState_Alive\n\tSTA EnemyState, Y\n\tLSR A\n\tSTA EnemyArray_SpawnsDoor, Y\n\tLDA #Enemy_ShyguyRed\n\tSTA ObjectType, Y\n\tLDA ObjectXLo, X\n\tADC #$05\n\tSTA ObjectXLo, Y\n\tLDA ObjectXHi, X\n\tADC #$00\n\tSTA ObjectXHi, Y\n\tLDA ObjectYLo, X\n\tSTA ObjectYLo, Y\n\tLDA ObjectYHi, X\n\tSTA ObjectYHi, Y\n\tSTY byte_RAM_0\n\tTYA\n\tTAX\n\n\tJSR EnemyInit_Basic_Bank1\n\tJSR UnlinkEnemyFromRawData_Bank1\n\n\tLDX byte_RAM_12\n\tRTS\n\n\nIFDEF CONTROLLER_2_DEBUG\nChangeCharacterOffsets:\n\t.db $00 ; unused\n\t.db $03 ; Mario to right\n\t.db $01 ; Mario to left\n\t.db $00 ; Princess to right\n\t.db $02 ; Princess to left\n\t.db $01 ; Toad to right\n\t.db $03 ; Toad to left\n\t.db $02 ; Luigi to right\n\t.db $00 ; Luigi to left\n\nCheckPlayer2Joypad:\n\tLDA ChangeCharacterTimer\n\tBEQ CheckPlayer2Joypad_Go\n\n\tDEC ChangeCharacterTimer\n\nCheckPlayer2Joypad_No:\n\tRTS\n\nCheckPlayer2Joypad_Go:\n\tLDA PlayerState\n\tCMP #PlayerState_Dying\n\tBEQ CheckPlayer2Joypad_No\n\nCheckPlayer2Joypad_CheckSelect:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Select\n\tBEQ CheckPlayer2Joypad_CheckUp\n\n\tLDA CurrentLevel_Init\n\tSTA CurrentLevel\n\tLDA CurrentLevelArea_Init\n\tSTA CurrentLevelArea\n\tLDA CurrentLevelEntryPage_Init\n\tSTA CurrentLevelEntryPage\n\tLDA TransitionType_Init\n\tSTA TransitionType\n\n\tLDA PlayerXLo_Init\n\tSTA PlayerXLo\n\tLDA PlayerYLo_Init\n\tSTA PlayerYLo\n\tLDA PlayerScreenX_Init\n\tSTA PlayerScreenX\n\tLDA PlayerScreenYLo_Init\n\tSTA PlayerScreenYLo\n\tLDA PlayerYVelocity_Init\n\tSTA PlayerYVelocity\n\tLDA PlayerState_Init\n\tSTA PlayerState\n\n\tLDA #$00\n\tSTA PlayerXVelocity\n\n\tJSR DoAreaReset\n\n\tJMP StartLevel\n\nCheckPlayer2Joypad_CheckUp:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Up\n\tBEQ CheckPlayer2Joypad_CheckDown\n\n\tLDY PlayerMaxHealth\n\tLDA PlayerHealth\n\tCMP PlayerHealthValueByHeartCount, Y\n\tBPL CheckPlayer2Joypad_CheckDown\n\n\tLDA #SoundEffect1_CherryGet\n\tSTA SoundEffectQueue1\n\n\tLDY PlayerMaxHealth\n\tLDA PlayerHealth\n\tCLC\n\tADC #$10\n\tSTA PlayerHealth\n\nCheckPlayer2Joypad_CheckDown:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Down\n\tBEQ CheckPlayer2Joypad_CheckStart\n\n\tLDA PlayerHealth\n\tAND #$F0\n\tBEQ CheckPlayer2Joypad_CheckStart\n\n\tLDA #DPCM_PlayerHurt\n\tSTA DPCMQueue\n\n\tLDA PlayerHealth\n\tSEC\n\tSBC #$10\n\tSTA PlayerHealth\n\nCheckPlayer2Joypad_CheckStart:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Start\n\tBEQ CheckPlayer2Joypad_CheckButtonA\n\n\tLDX #$FF\n\tLDA StopwatchTimer\n\tBEQ CheckPlayer2Joypad_SetStopwatchTimer\n\n\tINX\n\nCheckPlayer2Joypad_SetStopwatchTimer:\n\tSTX StopwatchTimer\n\nCheckPlayer2Joypad_CheckButtonA:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_A\n\tBEQ CheckPlayer2Joypad_CheckLeftRight\n\n\tLDA Player2JoypadHeld\n\tAND #ControllerInput_B\n\tBEQ CheckPlayer2Joypad_NoButtonB\n\n\tJSR DebugRandomObject\n\tBNE CheckPlayer2Joypad_CheckLeftRight\n\nCheckPlayer2Joypad_NoButtonB:\n\tJSR RandomCarryObject\n\nCheckPlayer2Joypad_CheckLeftRight:\n\tLDA Player2JoypadPress\n\tAND #ControllerInput_Right | ControllerInput_Left\n\tBEQ CheckPlayer2Joypad_Exit\n\tCMP #ControllerInput_Right | ControllerInput_Left\n\tBEQ CheckPlayer2Joypad_Exit\n\n\tCLC\n\tADC CurrentCharacter\n\tADC CurrentCharacter\n\n\tTAY\n\tLDA ChangeCharacterOffsets, Y\n\n\tLDX #$18\n\tSTX ChangeCharacterTimer\n\tLDX #$08\n\tSTX ChangeCharacterPoofTimer\n\n\tBNE CheckSetCurrentCharacter\n\nCheckPlayer2Joypad_Exit:\n\tRTS\n","htmlComment":"<p>NOTE: This is a copy of the \"CreateEnemy\" routine in Bank 2, but it is used\nhere for spawning the door animation and Starman objects.</p>\n<p>Creates a generic red Shyguy enemy and\ndoes some basic initialization for it.</p>\n<p>CreateEnemy_TryAllSlots checks all 9 object slots\nCreateEnemy only checks the first 6 object slots</p>\n<p>Output\nN = enabled if no empty slot was found\nY = $FF if there no empty slot was found\nbyte_RAM_0 = slot used</p>\n","htmlContent":"CreateEnemy_TryAllSlots_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">BNE</span> CreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>_FindSlot\n\nCreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>:\n\t<span class=\"token opcode property\">LDY</span> <span class=\"token hexnumber string\">#$05</span>\n\nCreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>_FindSlot:\n\t<span class=\"token opcode property\">LDA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BEQ</span> CreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>_FoundSlot\n\n\t<span class=\"token opcode property\">DEY</span>\n\t<span class=\"token opcode property\">BPL</span> CreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>_FindSlot\n\n\t<span class=\"token opcode property\">RTS</span>\n\nCreateEnemy_Bank<span class=\"token decimalnumber string\">1</span>_FoundSlot:\n\t<span class=\"token opcode property\">LDA</span> #EnemyState_Alive\n\t<span class=\"token opcode property\">STA</span> EnemyState, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">STA</span> EnemyArray_SpawnsDoor, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> #Enemy_ShyguyRed\n\t<span class=\"token opcode property\">STA</span> ObjectType, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$05</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectXHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> ObjectXHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYLo, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYLo, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">LDA</span> ObjectYHi, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> ObjectYHi, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STY</span> byte_RAM_<span class=\"token decimalnumber string\">0</span>\n\t<span class=\"token opcode property\">TYA</span>\n\t<span class=\"token opcode property\">TAX</span>\n\n\t<span class=\"token opcode property\">JSR</span> EnemyInit_Basic_Bank<span class=\"token decimalnumber string\">1</span>\n\t<span class=\"token opcode property\">JSR</span> UnlinkEnemyFromRawData_Bank<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDX</span> byte_RAM_<span class=\"token decimalnumber string\">12</span>\n\t<span class=\"token opcode property\">RTS</span>\n\n\nIFDEF CONTROLLER_<span class=\"token decimalnumber string\">2</span>_DEBUG\nChangeCharacterOffsets:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; unused</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; Mario to right</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; Mario to left</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; Princess to right</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; Princess to left</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$01</span> <span class=\"token comment\">; Toad to right</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$03</span> <span class=\"token comment\">; Toad to left</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$02</span> <span class=\"token comment\">; Luigi to right</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token hexnumber string\">$00</span> <span class=\"token comment\">; Luigi to left</span>\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad:\n\t<span class=\"token opcode property\">LDA</span> ChangeCharacterTimer\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_Go\n\n\t<span class=\"token opcode property\">DEC</span> ChangeCharacterTimer\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_No:\n\t<span class=\"token opcode property\">RTS</span>\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_Go:\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">CMP</span> #PlayerState_Dying\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_No\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckSelect:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Select\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckUp\n\n\t<span class=\"token opcode property\">LDA</span> CurrentLevel_Init\n\t<span class=\"token opcode property\">STA</span> CurrentLevel\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelArea_Init\n\t<span class=\"token opcode property\">STA</span> CurrentLevelArea\n\t<span class=\"token opcode property\">LDA</span> CurrentLevelEntryPage_Init\n\t<span class=\"token opcode property\">STA</span> CurrentLevelEntryPage\n\t<span class=\"token opcode property\">LDA</span> TransitionType_Init\n\t<span class=\"token opcode property\">STA</span> TransitionType\n\n\t<span class=\"token opcode property\">LDA</span> PlayerXLo_Init\n\t<span class=\"token opcode property\">STA</span> PlayerXLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYLo_Init\n\t<span class=\"token opcode property\">STA</span> PlayerYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenX_Init\n\t<span class=\"token opcode property\">STA</span> PlayerScreenX\n\t<span class=\"token opcode property\">LDA</span> PlayerScreenYLo_Init\n\t<span class=\"token opcode property\">STA</span> PlayerScreenYLo\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity_Init\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">LDA</span> PlayerState_Init\n\t<span class=\"token opcode property\">STA</span> PlayerState\n\n\t<span class=\"token opcode property\">LDA</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">STA</span> PlayerXVelocity\n\n\t<span class=\"token opcode property\">JSR</span> DoAreaReset\n\n\t<span class=\"token opcode property\">JMP</span> StartLevel\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckUp:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Up\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckDown\n\n\t<span class=\"token opcode property\">LDY</span> PlayerMaxHealth\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">CMP</span> PlayerHealthValueByHeartCount, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">BPL</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckDown\n\n\t<span class=\"token opcode property\">LDA</span> #SoundEffect<span class=\"token decimalnumber string\">1</span>_CherryGet\n\t<span class=\"token opcode property\">STA</span> SoundEffectQueue<span class=\"token decimalnumber string\">1</span>\n\n\t<span class=\"token opcode property\">LDY</span> PlayerMaxHealth\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerHealth\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckDown:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Down\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckStart\n\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$F0</span>\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckStart\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_PlayerHurt\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\n\t<span class=\"token opcode property\">LDA</span> PlayerHealth\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> <span class=\"token hexnumber string\">#$10</span>\n\t<span class=\"token opcode property\">STA</span> PlayerHealth\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckStart:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Start\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckButtonA\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">LDA</span> StopwatchTimer\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_SetStopwatchTimer\n\n\t<span class=\"token opcode property\">INX</span>\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_SetStopwatchTimer:\n\t<span class=\"token opcode property\">STX</span> StopwatchTimer\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckButtonA:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_A\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckLeftRight\n\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadHeld\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_B\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_NoButtonB\n\n\t<span class=\"token opcode property\">JSR</span> DebugRandomObject\n\t<span class=\"token opcode property\">BNE</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckLeftRight\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_NoButtonB:\n\t<span class=\"token opcode property\">JSR</span> RandomCarryObject\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_CheckLeftRight:\n\t<span class=\"token opcode property\">LDA</span> Player<span class=\"token decimalnumber string\">2</span>JoypadPress\n\t<span class=\"token opcode property\">AND</span> #ControllerInput_Right | ControllerInput_Left\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_Exit\n\t<span class=\"token opcode property\">CMP</span> #ControllerInput_Right | ControllerInput_Left\n\t<span class=\"token opcode property\">BEQ</span> CheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_Exit\n\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> CurrentCharacter\n\t<span class=\"token opcode property\">ADC</span> CurrentCharacter\n\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDA</span> ChangeCharacterOffsets, <span class=\"token register variable\">Y</span>\n\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$18</span>\n\t<span class=\"token opcode property\">STX</span> ChangeCharacterTimer\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$08</span>\n\t<span class=\"token opcode property\">STX</span> ChangeCharacterPoofTimer\n\n\t<span class=\"token opcode property\">BNE</span> CheckSetCurrentCharacter\n\nCheckPlayer<span class=\"token decimalnumber string\">2</span>Joypad_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n","line":7478},{"comment":"\nChanges the current character\n\nInput\nA = target character\n","content":"CheckSetCurrentCharacter:\n\tCMP CurrentCharacter\n\tBNE SetCurrentCharacter\n\n\tRTS\n\nSetCurrentCharacter:\n\tSTA CurrentCharacter\n\n\tLDA GravityWithJumpButton\n\tPHA\n\n\tLDX CurrentCharacter\n\tLDY StatOffsetsRAM, X\n\tLDX #$00\nSetCurrentCharacter_StatsLoop:\n\tLDA StatOffsetsRAM + CharacterStats-StatOffsets, Y\n\tSTA CharacterStatsRAM, X\n\tINY\n\tINX\n\tCPX #$17\n\tBCC SetCurrentCharacter_StatsLoop\n\n\tLDA CurrentCharacter\n\tASL A\n\tASL A\n\tTAY\n\tLDX #$00\nSetCurrentCharacter_PaletteLoop:\n\tLDA StatOffsetsRAM + CharacterPalette-StatOffsets, Y\n\tSTA RestorePlayerPalette0, X\n\tINY\n\tINX\n\tCPX #$04\n\tBCC SetCurrentCharacter_PaletteLoop\n","htmlComment":"<p>Changes the current character</p>\n<p>Input\nA = target character</p>\n","htmlContent":"CheckSetCurrentCharacter:\n\t<span class=\"token opcode property\">CMP</span> CurrentCharacter\n\t<span class=\"token opcode property\">BNE</span> SetCurrentCharacter\n\n\t<span class=\"token opcode property\">RTS</span>\n\nSetCurrentCharacter:\n\t<span class=\"token opcode property\">STA</span> CurrentCharacter\n\n\t<span class=\"token opcode property\">LDA</span> GravityWithJumpButton\n\t<span class=\"token opcode property\">PHA</span>\n\n\t<span class=\"token opcode property\">LDX</span> CurrentCharacter\n\t<span class=\"token opcode property\">LDY</span> StatOffsetsRAM, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\nSetCurrentCharacter_StatsLoop:\n\t<span class=\"token opcode property\">LDA</span> StatOffsetsRAM + CharacterStats-StatOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> CharacterStatsRAM, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$17</span>\n\t<span class=\"token opcode property\">BCC</span> SetCurrentCharacter_StatsLoop\n\n\t<span class=\"token opcode property\">LDA</span> CurrentCharacter\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">ASL</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">TAY</span>\n\t<span class=\"token opcode property\">LDX</span> <span class=\"token hexnumber string\">#$00</span>\nSetCurrentCharacter_PaletteLoop:\n\t<span class=\"token opcode property\">LDA</span> StatOffsetsRAM + CharacterPalette-StatOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> RestorePlayerPalette<span class=\"token decimalnumber string\">0</span>, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">INY</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$04</span>\n\t<span class=\"token opcode property\">BCC</span> SetCurrentCharacter_PaletteLoop\n","line":7677},{"comment":"load carry offsets","content":"\tLDY CurrentCharacter\n\tLDA CarryYOffsetsRAM + CarryYOffsetBigLo-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM\n\tLDA CarryYOffsetsRAM + CarryYOffsetSmallLo-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM + $07\n\tLDA CarryYOffsetsRAM + CarryYOffsetBigHi-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM + $0E\n\tLDA CarryYOffsetsRAM + CarryYOffsetSmallHi-CarryYOffsets, Y\n\tSTA ItemCarryYOffsetsRAM + $15\n","htmlComment":"<p>load carry offsets</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDY</span> CurrentCharacter\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetsRAM + CarryYOffsetBigLo-CarryYOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetsRAM + CarryYOffsetSmallLo-CarryYOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM + <span class=\"token hexnumber string\">$07</span>\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetsRAM + CarryYOffsetBigHi-CarryYOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM + <span class=\"token hexnumber string\">$0E</span>\n\t<span class=\"token opcode property\">LDA</span> CarryYOffsetsRAM + CarryYOffsetSmallHi-CarryYOffsets, <span class=\"token register variable\">Y</span>\n\t<span class=\"token opcode property\">STA</span> ItemCarryYOffsetsRAM + <span class=\"token hexnumber string\">$15</span>\n","line":7714},{"comment":"interrupt floating if this character can't do it","content":"\tLDA JumpFloatLength\n\tBEQ SetCurrentCharacter_SetJumpFloatTimer\n","htmlComment":"<p>interrupt floating if this character can't do it</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> JumpFloatLength\n\t<span class=\"token opcode property\">BEQ</span> SetCurrentCharacter_SetJumpFloatTimer\n","line":7725},{"comment":"if already floating, keep going","content":"\tCMP JumpFloatTimer\n\tBCC SetCurrentCharacter_CheckGravityChange\n\nSetCurrentCharacter_SetJumpFloatTimer:\n\tSTA JumpFloatTimer\n\nSetCurrentCharacter_CheckGravityChange:","htmlComment":"<p>if already floating, keep going</p>\n","htmlContent":"\t<span class=\"token opcode property\">CMP</span> JumpFloatTimer\n\t<span class=\"token opcode property\">BCC</span> SetCurrentCharacter_CheckGravityChange\n\nSetCurrentCharacter_SetJumpFloatTimer:\n\t<span class=\"token opcode property\">STA</span> JumpFloatTimer\n\nSetCurrentCharacter_CheckGravityChange:","line":7729},{"comment":"check whether gravity is increasing","content":"\tPLA\n\tSEC\n\tSBC GravityWithJumpButton\n\tBEQ SetCurrentCharacter_Update\n","htmlComment":"<p>check whether gravity is increasing</p>\n","htmlContent":"\t<span class=\"token opcode property\">PLA</span>\n\t<span class=\"token opcode property\">SEC</span>\n\t<span class=\"token opcode property\">SBC</span> GravityWithJumpButton\n\t<span class=\"token opcode property\">BEQ</span> SetCurrentCharacter_Update\n","line":7737},{"comment":"stash velocity delta in X","content":"\tTAX\n","htmlComment":"<p>stash velocity delta in X</p>\n","htmlContent":"\t<span class=\"token opcode property\">TAX</span>\n","line":7743},{"comment":"check whether y-velocity is negative","content":"\tLDA PlayerYVelocity\n\tBPL SetCurrentCharacter_Update\n\n\tCPX #$00\n\tBPL SetCurrentCharacter_ClampYVelocity\n","htmlComment":"<p>check whether y-velocity is negative</p>\n","htmlContent":"\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">BPL</span> SetCurrentCharacter_Update\n\n\t<span class=\"token opcode property\">CPX</span> <span class=\"token hexnumber string\">#$00</span>\n\t<span class=\"token opcode property\">BPL</span> SetCurrentCharacter_ClampYVelocity\n","line":7746},{"comment":"scale y-velocity based on difference in gravity","content":"\tEOR #$FF\n\tCLC\n\tADC #$01\n\n\tDEX\nSetCurrentCharacter_ScaleVelocityYUp_Loop:\n\tASL\n\tINX\n\tBEQ SetCurrentCharacter_ScaleVelocityYUp_Loop\n\n\tEOR #$FF\n\tSTA PlayerYVelocity\n\n\tJMP SetCurrentCharacter_Update\n\nSetCurrentCharacter_ClampYVelocity:\n\tLDA PlayerYVelocity\n\tCMP JumpHeightRunning\n\n\tBPL SetCurrentCharacter_Update\n\n\tLDA JumpHeightStandingCarrying\n\tSTA PlayerYVelocity\n\nSetCurrentCharacter_Update:\n\tINC SkyFlashTimer\n","htmlComment":"<p>scale y-velocity based on difference in gravity</p>\n","htmlContent":"\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">CLC</span>\n\t<span class=\"token opcode property\">ADC</span> <span class=\"token hexnumber string\">#$01</span>\n\n\t<span class=\"token opcode property\">DEX</span>\nSetCurrentCharacter_ScaleVelocityYUp_Loop:\n\t<span class=\"token opcode property\">ASL</span>\n\t<span class=\"token opcode property\">INX</span>\n\t<span class=\"token opcode property\">BEQ</span> SetCurrentCharacter_ScaleVelocityYUp_Loop\n\n\t<span class=\"token opcode property\">EOR</span> <span class=\"token hexnumber string\">#$FF</span>\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\n\t<span class=\"token opcode property\">JMP</span> SetCurrentCharacter_Update\n\nSetCurrentCharacter_ClampYVelocity:\n\t<span class=\"token opcode property\">LDA</span> PlayerYVelocity\n\t<span class=\"token opcode property\">CMP</span> JumpHeightRunning\n\n\t<span class=\"token opcode property\">BPL</span> SetCurrentCharacter_Update\n\n\t<span class=\"token opcode property\">LDA</span> JumpHeightStandingCarrying\n\t<span class=\"token opcode property\">STA</span> PlayerYVelocity\n\nSetCurrentCharacter_Update:\n\t<span class=\"token opcode property\">INC</span> SkyFlashTimer\n","line":7753},{"comment":"update chr for character","content":"\tJSR LoadCharacterCHRBanks\n\n\tLDA #DPCM_PlayerDeath\n\tSTA DPCMQueue\n\nSetCurrentCharacter_Exit:\n\tRTS\n\n\nRandomCarryObjectTypes:\n\t.db #Enemy_VegetableSmall\n\t.db #Enemy_VegetableLarge\n\t.db #Enemy_Shell\n\t.db #Enemy_Bomb\n\t.db #Enemy_ShyguyRed\n\t.db #Enemy_Tweeter\n\t.db #Enemy_SnifitRed\n\t.db #Enemy_Egg\n","htmlComment":"<p>update chr for character</p>\n","htmlContent":"\t<span class=\"token opcode property\">JSR</span> LoadCharacterCHRBanks\n\n\t<span class=\"token opcode property\">LDA</span> #DPCM_PlayerDeath\n\t<span class=\"token opcode property\">STA</span> DPCMQueue\n\nSetCurrentCharacter_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nRandomCarryObjectTypes:\n\t<span class=\"token directive keyword\">.db</span> #Enemy_VegetableSmall\n\t<span class=\"token directive keyword\">.db</span> #Enemy_VegetableLarge\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Shell\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Bomb\n\t<span class=\"token directive keyword\">.db</span> #Enemy_ShyguyRed\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Tweeter\n\t<span class=\"token directive keyword\">.db</span> #Enemy_SnifitRed\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Egg\n","line":7781},{"comment":"bit 7: put in player's hands\nbit 6: set enemy timer\nbit 5: start at bottom of screen\nbit 4:\nbit 3:\nbit 2:\nbit 1: set thrown flag\nbit 0: disable velocity reset","content":"RandomCarryObjectAttributes:\n\t.db %10000000\n\t.db %10000000\n\t.db %10000000\n\t.db %11000000\n\t.db %10000001\n\t.db %10000001\n\t.db %10000001\n\t.db %10000001\n\n\nRandomCarryObject:\n\tLDA PlayerState\n\tBNE RandomCarryObject_Exit\n\tLDA HoldingItem\n\tBNE RandomCarryObject_Exit\n\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$07\n\tTAX\n\tLDA RandomCarryObjectAttributes, X\n\tSTA CreateObjectAttributes\n\tLDA RandomCarryObjectTypes, X\n\tSTA CreateObjectType\n\nRandomCarryObject_Exit:\n\tRTS\n\n\nDebugRandomObjectTypes:\n\t.db #Enemy_Bomb\n\t.db #Enemy_Bomb\n\t.db #Enemy_POWBlock\n\t.db #Enemy_POWBlock\n\t.db #Enemy_POWBlock\n\t.db #Enemy_Starman\n\t.db #Enemy_Starman\n\t.db #Enemy_Starman\n\nDebugRandomObjectAttributes:\n\t.db %01000010\n\t.db %01000010\n\t.db %00000010\n\t.db %00000010\n\t.db %00000010\n\t.db %00100010\n\t.db %00100010\n\t.db %00100010\n\n\nDebugRandomObject:\n\tLDA byte_RAM_10\n\tLSR A\n\tLSR A\n\tLSR A\n\tAND #$07\n\tTAX\n\tLDA DebugRandomObjectAttributes, X\n\tSTA CreateObjectAttributes\n\tLDA DebugRandomObjectTypes, X\n\tSTA CreateObjectType\n\tRTS\nENDIF\n","htmlComment":"<p>bit 7: put in player's hands\nbit 6: set enemy timer\nbit 5: start at bottom of screen\nbit 4:\nbit 3:\nbit 2:\nbit 1: set thrown flag\nbit 0: disable velocity reset</p>\n","htmlContent":"RandomCarryObjectAttributes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000000</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000000</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000000</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%11000000</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000001</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000001</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000001</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%10000001</span>\n\n\nRandomCarryObject:\n\t<span class=\"token opcode property\">LDA</span> PlayerState\n\t<span class=\"token opcode property\">BNE</span> RandomCarryObject_Exit\n\t<span class=\"token opcode property\">LDA</span> HoldingItem\n\t<span class=\"token opcode property\">BNE</span> RandomCarryObject_Exit\n\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> RandomCarryObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">LDA</span> RandomCarryObjectTypes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> CreateObjectType\n\nRandomCarryObject_Exit:\n\t<span class=\"token opcode property\">RTS</span>\n\n\nDebugRandomObjectTypes:\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Bomb\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Bomb\n\t<span class=\"token directive keyword\">.db</span> #Enemy_POWBlock\n\t<span class=\"token directive keyword\">.db</span> #Enemy_POWBlock\n\t<span class=\"token directive keyword\">.db</span> #Enemy_POWBlock\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Starman\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Starman\n\t<span class=\"token directive keyword\">.db</span> #Enemy_Starman\n\nDebugRandomObjectAttributes:\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%01000010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%01000010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00000010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00100010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00100010</span>\n\t<span class=\"token directive keyword\">.db</span> <span class=\"token binarynumber string\">%00100010</span>\n\n\nDebugRandomObject:\n\t<span class=\"token opcode property\">LDA</span> byte_RAM_<span class=\"token decimalnumber string\">10</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">LSR</span> <span class=\"token register variable\">A</span>\n\t<span class=\"token opcode property\">AND</span> <span class=\"token hexnumber string\">#$07</span>\n\t<span class=\"token opcode property\">TAX</span>\n\t<span class=\"token opcode property\">LDA</span> DebugRandomObjectAttributes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> CreateObjectAttributes\n\t<span class=\"token opcode property\">LDA</span> DebugRandomObjectTypes, <span class=\"token register variable\">X</span>\n\t<span class=\"token opcode property\">STA</span> CreateObjectType\n\t<span class=\"token opcode property\">RTS</span>\nENDIF\n","line":7808}]}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}