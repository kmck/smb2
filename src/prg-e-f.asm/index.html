<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.15.28"/><title data-react-helmet="true">/src/prg-e-f.asm | Super Mario Bros 2. Discombobulated</title><meta data-react-helmet="true" name="description" content="The annotated disassembly of SMB2 (USA) for NES."/><meta data-react-helmet="true" property="og:title" content="/src/prg-e-f.asm"/><meta data-react-helmet="true" property="og:description" content="The annotated disassembly of SMB2 (USA) for NES."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Keith McKnight"/><meta data-react-helmet="true" name="twitter:title" content="/src/prg-e-f.asm"/><meta data-react-helmet="true" name="twitter:description" content="The annotated disassembly of SMB2 (USA) for NES."/><style data-styled="kVlzQS cARMVe  jZQtxI eRqCXL kvnzNL" data-styled-version="4.4.0">
/* sc-component-id: sc-global-3029663097 */
@import url('https://fonts.googleapis.com/css?family=Asap:400,600|Fira+Code:400&display=swap'); html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;} article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;} *[hidden]{display:none;} body{line-height:1;} ol,ul{list-style:none;} blockquote,q{quotes:none;} blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *,*::before,*::after{box-sizing:border-box;} html{font-size:16px;} body{font-family:'Asap',sans-serif;font-weight:400;font-size:0.9rem;line-height:1.2;background-color:#fcfcfc;color:#000000;} *::selection{background-color:#f53a1b;color:#fcfcfc;} a{color:#0923f8;} a:hover{color:#0f5ef4;} a:active{color:#f53a1b;} strong,b{font-weight:600;} em,i{font-style:italic;} pre,code{font-family:'Fira Code',monospace;font-weight:400;} h1,h2,h3,h4,h5,h5{font-family:'Asap',sans-serif;font-weight:600;margin-bottom:0.6rem;} h1:not(:first-child),h2:not(:first-child),h3:not(:first-child),h4:not(:first-child),h5:not(:first-child),h5:not(:first-child){margin-top:0.4rem;} ul,ol,pre,blockquote{margin-bottom:0.6rem;} ul:not(:first-child),ol:not(:first-child),pre:not(:first-child),blockquote:not(:first-child){margin-top:0.4rem;} li{margin-bottom:0.2rem;} p,figure,pre{margin-bottom:0.4rem;} h1{font-size:2rem;} h2{font-size:1.6rem;} h3{font-size:1.3rem;} h4{font-size:1rem;} h5{font-size:0.8rem;} h6{font-size:0.6rem;} ul{list-style:square;} ul li{margin-left:1.5em;} blockquote{border-left:2px solid #bcbcbc;padding-left:0.4rem;} hr{border:0;border-top:1px solid #bcbcbc;} aside code{margin-left:0.1rem;margin-right:0.1rem;padding-left:0.2rem;padding-right:0.2rem;border-radius:0.2rem;border:1px solid #bcbcbc;background-color:#fcfcfc;color:#0923f8;font-size:0.9em;} aside > pre > code:only-child{display:block;margin:inherit;padding:0.4rem;font-size:0.9em;} aside h1 code,aside h2 code,aside h3 code,aside h4 code,aside h5 code,aside h6 code{margin:0;padding:0;border-radius:0;border:0;background-color:inherit;color:inherit;font-weight:inherit;font-size:inherit;}
/* sc-component-id: GithubCorner-sc-112dcqw-0 */
body *:focus > .eRqCXL .octocat-arm,.eRqCXL:focus .octocat-arm,.eRqCXL:hover .octocat-arm{-webkit-animation:octocat-wave 560ms ease-in-out;animation:octocat-wave 560ms ease-in-out;} @-webkit-keyframes octocat-wave{0%,100%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}20%,60%{-webkit-transform:rotate(-25deg);-ms-transform:rotate(-25deg);transform:rotate(-25deg);}40%,80%{-webkit-transform:rotate(10deg);-ms-transform:rotate(10deg);transform:rotate(10deg);}} @keyframes octocat-wave{0%,100%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}20%,60%{-webkit-transform:rotate(-25deg);-ms-transform:rotate(-25deg);transform:rotate(-25deg);}40%,80%{-webkit-transform:rotate(10deg);-ms-transform:rotate(10deg);transform:rotate(10deg);}} @media (max-width:500px){.eRqCXL .octocat-arm{-webkit-animation:octocat-wave 560ms ease-in-out;animation:octocat-wave 560ms ease-in-out;}.eRqCXL:hover .octocat-arm{-webkit-animation:none;animation:none;}}
/* sc-component-id: Header-mdepkv-0 */
.jZQtxI{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-height:200px;background-color:#44bdfa;color:#fcfcfc;padding:2rem 4rem;} @media (max-width:800px){.jZQtxI{padding-left:2rem;padding-right:2rem;}} .jZQtxI h1{text-shadow:0 2px 0 #000000;} .jZQtxI h1 > a{color:inherit;-webkit-text-decoration:none;text-decoration:none;} .jZQtxI .GithubCorner-sc-112dcqw-0{position:absolute;top:0;right:0;}
/* sc-component-id: Footer-xbtfn2-0 */
.kvnzNL{background-color:#f65b98;color:#fcfcfc;padding:2rem 4rem 3rem;} @media (max-width:800px){.kvnzNL{padding-left:2rem;padding-right:2rem;}} .kvnzNL p{margin-bottom:0.5rem;text-align:center;} .kvnzNL ul{display:grid;grid-template-columns:repeat(2,max-content);grid-column-gap:1em;justify-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;list-style:none;} .kvnzNL ul li{margin:0;} .kvnzNL a{color:inherit;}
/* sc-component-id: Layout-sc-11e418k-0 */
.cARMVe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;} .cARMVe > main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}
/* sc-component-id: AsmSource-h73kpj-0 */
.kVlzQS > header{padding:1rem 4rem;background-color:#fbdfab;color:#e25c22;} .kVlzQS > header h3{font-family:'Fira Code',monospace;font-weight:400;} .kVlzQS > section{display:grid;grid-template-columns:[code-comment] minmax(min-content,50%) [code-content] minmax(50%,max-content);line-height:1.3;} .kVlzQS > section > aside,.kVlzQS > section > pre{position:relative;margin:0;padding:0;border:1px solid transparent;border-radius:0;box-sizing:border-box;} .kVlzQS > section > aside:nth-child(1),.kVlzQS > section > pre:nth-child(2){padding-top:1rem;} .kVlzQS > section > aside{grid-column:code-comment;padding-left:4rem;padding-right:1rem;background-color:#f8f8f8;color:#000000;word-break:break-word;} .kVlzQS > section > pre{grid-column:code-content;padding-left:1rem;padding-right:1rem;overflow:visible;white-space:pre-wrap;word-break:break-word;tab-size:4;} .kVlzQS > section > pre > a[name][href^="#"]{position:absolute;top:0;right:1rem;-webkit-text-decoration:none;text-decoration:none;color:#f65b98;-webkit-transition:opacity 0.1s linear;transition:opacity 0.1s linear;opacity:0;} .kVlzQS > section > pre > a[name][href^="#"]:focus,.kVlzQS > section > pre > a[name][href^="#"]:hover{opacity:1;} .kVlzQS > section > pre:hover > a[name][href^="#"]{opacity:1;} @media (max-width:800px){.kVlzQS > header{padding-left:2rem;padding-right:2rem;}.kVlzQS > section{display:block;}.kVlzQS > section > aside,.kVlzQS > section > pre{padding-top:1rem;padding-bottom:1rem;}.kVlzQS > section > aside{max-width:none;padding-left:2rem;padding-right:2rem;color:#7c7c7c;}.kVlzQS > section > aside:before{content:'';position:absolute;top:0;bottom:0;left:0;pointer-events:none;width:4px;background-color:#bcbcbc;}} .kVlzQS .token{color:#4f2f04;} .kVlzQS .keyword{color:#d61eca;} .kVlzQS .variable{color:#f7b72a;} .kVlzQS .opcode{color:#f53a1b;} .kVlzQS .string{color:#17a61a;} .kVlzQS .decimalnumber{color:#4430b9;} .kVlzQS .hexnumber{color:#0923f8;} .kVlzQS .binarynumber{color:#034057;} .kVlzQS .register{color:#f65b98;} .kVlzQS .directive{color:#fa9f4e;} .kVlzQS .comment{color:#7c7c7c;}</style><link rel="shortcut icon" href="/smb2/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/smb2/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/smb2/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/smb2/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/smb2/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/smb2/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/smb2/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/smb2/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/smb2/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/smb2/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><link as="script" rel="preload" href="/smb2/webpack-runtime-e27abee7082aa8f18f3b.js"/><link as="script" rel="preload" href="/smb2/app-73183e4eb413cfdc340b.js"/><link as="script" rel="preload" href="/smb2/commons-a9b9bc07b970d3a1ecc3.js"/><link as="script" rel="preload" href="/smb2/component---src-templates-asm-source-jsx-3bb2cbd0a842989d029d.js"/><link as="fetch" rel="preload" href="/smb2/page-data/src/prg-e-f.asm/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="Layout-sc-11e418k-0 cARMVe"><header class="Header-mdepkv-0 jZQtxI"><a href="https://github.com/XKeeper0/smb2"><svg class="GithubCorner-sc-112dcqw-0 eRqCXL" fill="#fcfcfc" height="80" viewBox="0 0 250 250" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M0 0l115 115h15l12 27 108 108V0z"></path><g class="octocat" fill="#f65b98"><path class="octocat-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="transform-origin:130px 106px"></path><path class="octocat-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></g></svg></a><h1><a href="/smb2/">Super Mario Bros 2. Discombobulated</a></h1><p>The annotated disassembly of SMB2 (USA) for NES.</p></header><main><article class="AsmSource-h73kpj-0 kVlzQS"><header><h3>/src/prg-e-f.asm</h3></header><section><aside><h1>Bank E &#x26; Bank F</h1>
<p>What's inside: Lots of game logic.</p>
<ul>
<li>DPCM data</li>
<li>Joypad input reading</li>
<li>PPU update routines</li>
<li>Game initialization routines</li>
<li>Title card display routines</li>
<li>Area initialization routines</li>
<li>Music cue routines</li>
<li>Character select (sprite data, palettes, logic)</li>
<li>Bonus chance (sprite data, palettes, logic)</li>
<li>Game Over / Continue screen</li>
<li>Pause screen</li>
<li>Health logic</li>
<li>Bottomless pit death logic</li>
<li>Bounding box data for collisions</li>
<li>and more!</li>
</ul>
&nbsp;</aside><pre><a name="l23" href="#l23" title="Link to line 23">#</a><code>&nbsp;</code></pre><aside><p>Include DPCM samples</p>
&nbsp;</aside><pre><a name="l25" href="#l25" title="Link to line 25">#</a><code><span class="token directive keyword">.include</span> <a class="token string" href="/smb2/src/music/dpcm-samples.asm">"src/music/dpcm-samples.asm"</a>
&nbsp;</code></pre><aside><p>PPU update buffers used to update the screen</p>
&nbsp;</aside><pre><a name="l28" href="#l28" title="Link to line 28">#</a><code>ScreenUpdateBufferPointers:
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">583</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">55</span>F
	<span class="token directive keyword">.dw</span> PPUBuffer_CharacterSelect
	<span class="token directive keyword">.dw</span> PPUBuffer_BANKE_DE<span class="token decimalnumber string">7</span><span class="token register variable">A</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_Text_Game_Over
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">67</span>B
	<span class="token directive keyword">.dw</span> PPUBuffer_Text_Retry
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">7168</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">67</span>B
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">693</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>AB
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>BD
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>CC
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>E<span class="token decimalnumber string">9</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>DA
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>DF
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">6</span>E<span class="token decimalnumber string">4</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">7194</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">71</span><span class="token register variable">A</span><span class="token decimalnumber string">8</span>
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">721</span>B
	<span class="token directive keyword">.dw</span> PPUBuffer_TitleCard
	<span class="token directive keyword">.dw</span> PPUBuffer_PauseExtraLife
	<span class="token directive keyword">.dw</span> BonusChanceLayoutRAM

PPUBuffer_CharacterSelect:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$49</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$E9</span>,<span class="token hexnumber string">$E5</span>,<span class="token hexnumber string">$DE</span>,<span class="token hexnumber string">$DA</span>,<span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$DE</span> <span class="token comment">; PLEASE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$DE</span>,<span class="token hexnumber string">$E5</span>,<span class="token hexnumber string">$DE</span>,<span class="token hexnumber string">$DC</span>,<span class="token hexnumber string">$ED</span> <span class="token comment">; SELECT</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$E9</span>,<span class="token hexnumber string">$E5</span>,<span class="token hexnumber string">$DA</span>,<span class="token hexnumber string">$F2</span>,<span class="token hexnumber string">$DE</span>,<span class="token hexnumber string">$EB</span> <span class="token comment">; PLAYER</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span> <span class="token comment">; Probably the checkerboard diamonds or w/e</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B8</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$BA</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$1E</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$B7</span>,<span class="token hexnumber string">$B9</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$1F</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$BA</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$42</span>,<span class="token hexnumber string">$5C</span>,<span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$5C</span>,<span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$47</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$03</span>,<span class="token decimalnumber string">4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$54</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$08</span>,<span class="token decimalnumber string">9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$63</span>,<span class="token hexnumber string">$0A</span>,$<span class="token register variable">A</span>,<span class="token hexnumber string">$0B</span>,$C,<span class="token hexnumber string">$0D</span>,$E,<span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$12</span>,<span class="token hexnumber string">$13</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$0A</span>,<span class="token hexnumber string">$14</span>,<span class="token hexnumber string">$15</span>,<span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$17</span>,<span class="token hexnumber string">$18</span>,<span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$1A</span>,<span class="token hexnumber string">$1B</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$1D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$82</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$1E</span>,<span class="token hexnumber string">$1F</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$28</span>,<span class="token hexnumber string">$29</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$2A</span>,<span class="token hexnumber string">$2B</span>,<span class="token hexnumber string">$2C</span>,<span class="token hexnumber string">$2D</span>,<span class="token hexnumber string">$2E</span>,<span class="token hexnumber string">$2F</span>,<span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$31</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$34</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$35</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$A2</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$38</span>,<span class="token hexnumber string">$39</span>,<span class="token hexnumber string">$3A</span>,<span class="token hexnumber string">$3B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$AB</span>,<span class="token hexnumber string">$0A</span>,<span class="token hexnumber string">$3C</span>,<span class="token hexnumber string">$3D</span>,<span class="token hexnumber string">$3E</span>,<span class="token hexnumber string">$3F</span>,<span class="token hexnumber string">$40</span>,<span class="token hexnumber string">$43</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$46</span>,<span class="token hexnumber string">$47</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$48</span>,<span class="token hexnumber string">$49</span>,<span class="token hexnumber string">$4A</span>,<span class="token hexnumber string">$4B</span>,<span class="token hexnumber string">$4C</span>,<span class="token hexnumber string">$4D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$C2</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$51</span>,<span class="token hexnumber string">$52</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$D9</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$53</span>,<span class="token hexnumber string">$54</span>,<span class="token hexnumber string">$55</span>,<span class="token hexnumber string">$56</span>,<span class="token hexnumber string">$57</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$E2</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$59</span>,<span class="token hexnumber string">$5A</span>,<span class="token hexnumber string">$5B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$E6</span>,<span class="token hexnumber string">$CD</span>,<span class="token hexnumber string">$5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$F9</span>,<span class="token hexnumber string">$CD</span>,<span class="token hexnumber string">$5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$5D</span>,<span class="token hexnumber string">$5E</span>,<span class="token hexnumber string">$5F</span>,<span class="token hexnumber string">$60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$83</span>,<span class="token hexnumber string">$61</span>,<span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$67</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$8B</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$68</span>,<span class="token hexnumber string">$6A</span>,<span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$6F</span>,<span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$75</span>,<span class="token hexnumber string">$78</span>,<span class="token hexnumber string">$7B</span>,<span class="token hexnumber string">$7E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$63</span>,<span class="token hexnumber string">$66</span>,<span class="token hexnumber string">$69</span>,<span class="token hexnumber string">$6B</span>,<span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$70</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$76</span>,<span class="token hexnumber string">$79</span>,<span class="token hexnumber string">$7C</span>,<span class="token hexnumber string">$7F</span>,<span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$82</span>,<span class="token hexnumber string">$83</span>,<span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$85</span>,<span class="token hexnumber string">$86</span>,<span class="token hexnumber string">$87</span>,<span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$89</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$85</span>,<span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$6E</span>,<span class="token hexnumber string">$71</span>,<span class="token hexnumber string">$74</span>,<span class="token hexnumber string">$77</span>,<span class="token hexnumber string">$7A</span>,<span class="token hexnumber string">$7D</span>,<span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$6E</span>,<span class="token hexnumber string">$6E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$9A</span>,<span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$97</span>,<span class="token hexnumber string">$9A</span>,<span class="token hexnumber string">$9D</span>,<span class="token hexnumber string">$BB</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A3</span>,<span class="token hexnumber string">$A6</span>,<span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$AB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$1B</span>,<span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$92</span>,<span class="token hexnumber string">$95</span>,<span class="token hexnumber string">$98</span>,<span class="token hexnumber string">$9B</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$A1</span>,<span class="token hexnumber string">$A4</span>,<span class="token hexnumber string">$A7</span>,<span class="token hexnumber string">$AA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AD</span>,<span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span>,<span class="token hexnumber string">$B2</span>,<span class="token hexnumber string">$B3</span>,<span class="token hexnumber string">$B4</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$8B</span>,<span class="token hexnumber string">$8D</span>,<span class="token hexnumber string">$90</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$96</span>,<span class="token hexnumber string">$99</span>,<span class="token hexnumber string">$9C</span>,<span class="token hexnumber string">$9F</span>,<span class="token hexnumber string">$BD</span>,<span class="token hexnumber string">$A2</span>,<span class="token hexnumber string">$A5</span>,<span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$1D</span>,<span class="token hexnumber string">$83</span>,<span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$91</span>,<span class="token hexnumber string">$94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$D1</span>,<span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$7D</span>,<span class="token hexnumber string">$D1</span>,<span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$63</span>,<span class="token hexnumber string">$C9</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$7C</span>,<span class="token hexnumber string">$C9</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$86</span>,<span class="token hexnumber string">$82</span>,<span class="token hexnumber string">$8A</span>,<span class="token hexnumber string">$8B</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$99</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$82</span>,<span class="token hexnumber string">$8A</span>,<span class="token hexnumber string">$8B</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
PPUBuffer_BANKE_DE<span class="token decimalnumber string">7</span><span class="token register variable">A</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$C0</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$3E</span>,<span class="token hexnumber string">$0E</span>,$E,<span class="token hexnumber string">$0E</span>,$E,<span class="token hexnumber string">$0E</span>,$E,<span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$32</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$CF</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$0A</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$E0</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$0E</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$32</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$EF</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$F7</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$0E</span>,$E,<span class="token hexnumber string">$0E</span>,$E,<span class="token hexnumber string">$0E</span>,$E,<span class="token hexnumber string">$0E</span>,$E
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$40</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$40</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$D6</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$81</span>,<span class="token hexnumber string">$D6</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$82</span>,<span class="token hexnumber string">$D6</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$9D</span>,<span class="token hexnumber string">$D6</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$D6</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$9F</span>,<span class="token hexnumber string">$D6</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$83</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$9C</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$D8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$A3</span>,<span class="token hexnumber string">$D4</span>,<span class="token hexnumber string">$D1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$D4</span>,<span class="token hexnumber string">$D7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$A4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$C4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$E4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$A4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$C4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$E4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$A4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$C4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$E4</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$D2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$3C</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$D6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$D3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$C8</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$BF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$11</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$BF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$EF</span>,<span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$E0</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
&nbsp;</code></pre><aside><p>nametable attribute data</p>
&nbsp;</aside><pre><a name="l174" href="#l174" title="Link to line 174">#</a><code>PPUBuffer_PauseExtraLife:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$EA</span>, <span class="token hexnumber string">$05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>
&nbsp;</code></pre><aside><p>nametable attribute data</p>
&nbsp;</aside><pre><a name="l179" href="#l179" title="Link to line 179">#</a><code>PPUBuffer_TitleCard:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1E</span>, <span class="token hexnumber string">$9E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1F</span>, <span class="token hexnumber string">$9E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$C7</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$CF</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D7</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$EF</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$F7</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

WorldStartingLevel:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span> <span class="token comment">; $01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span> <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; $05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span> <span class="token comment">; $06</span>

PlayerSelectMarioSprites<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$50</span>

PlayerSelectLuigiSprites<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$41</span>, <span class="token hexnumber string">$70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$41</span>, <span class="token hexnumber string">$70</span>

PlayerSelectToadSprites<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$42</span>, <span class="token hexnumber string">$90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$42</span>, <span class="token hexnumber string">$90</span>

PlayerSelectPrincessSprites<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$B0</span>

PlayerSelectMarioSprites<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$14</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$16</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$50</span>

PlayerSelectLuigiSprites<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$1A</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$1C</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$1E</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$70</span>

PlayerSelectToadSprites<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$24</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$26</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$90</span>

PlayerSelectPrincessSprites<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$28</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$2A</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$2C</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$2E</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$B0</span>

PlayerSelectSpriteIndexes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$10</span>

BonusChanceCherrySprite:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$60</span>

BonusChanceStarSprite:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$41</span>, <span class="token hexnumber string">$60</span>

BonusChanceVeggieSprite:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$41</span>, <span class="token hexnumber string">$60</span>

BonusChanceSnifitSprite:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$60</span>

PlayerSelectSpritePalettesDark:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$10</span> <span class="token comment">; PPU Data</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$01</span>

PlayerSelectPaletteOffsets:
	<span class="token directive keyword">.db</span> (PlayerSelectSpritePalettes_Mario - PlayerSelectSpritePalettes)
	<span class="token directive keyword">.db</span> (PlayerSelectSpritePalettes_Princess - PlayerSelectSpritePalettes)
	<span class="token directive keyword">.db</span> (PlayerSelectSpritePalettes_Toad - PlayerSelectSpritePalettes)
	<span class="token directive keyword">.db</span> (PlayerSelectSpritePalettes_Luigi - PlayerSelectSpritePalettes)

PlayerSelectSpritePalettes:
PlayerSelectSpritePalettes_Mario:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$16</span>, <span class="token hexnumber string">$01</span>
PlayerSelectSpritePalettes_Luigi:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$14</span>, <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$36</span>, <span class="token hexnumber string">$2A</span>, <span class="token hexnumber string">$01</span>
PlayerSelectSpritePalettes_Toad:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$01</span>
PlayerSelectSpritePalettes_Princess:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$1C</span>, <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$36</span>, <span class="token hexnumber string">$25</span>, <span class="token hexnumber string">$07</span>

TitleCardPalettes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span> <span class="token comment">; PPU data</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$1A</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$17</span>, <span class="token hexnumber string">$17</span>, <span class="token hexnumber string">$38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$28</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$37</span>, <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$25</span>, <span class="token hexnumber string">$36</span>, <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$36</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

BonusChanceSpritePalettes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $C</span>

&nbsp;</code></pre><aside><p>Load A with an index and call this to
jump to a pointer from the table directly
after the call.</p>
&nbsp;</aside><pre><a name="l324" href="#l324" title="Link to line 324">#</a><code>JumpToTableAfterJump:
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_A
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_A), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_A), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_D
	<span class="token opcode property">JMP</span> (byte_RAM_C)


BlackAndWhitePalette:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$0F</span>


SetBlackAndWhitePalette:
	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">STY</span> PPUADDR

SetBlackAndWhitePalette_Loop:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> BlackAndWhitePalette, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">BCC</span> SetBlackAndWhitePalette_Loop

	<span class="token opcode property">RTS</span>


SetScrollXYTo<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> PPUScrollYHiMirror
	<span class="token opcode property">STA</span> PPUScrollXHiMirror
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Clears the screen and resets the scroll position for the title card</p>
<p>This is used for the character select screen as well, but that has a few PPU
changes of its own.</p>
&nbsp;</aside><pre><a name="l379" href="#l379" title="Link to line 379">#</a><code>ResetScreenForTitleCard:
	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> SetScrollXYTo<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">55</span>F
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Enables NMI and draws the background of the pause screen</p>
&nbsp;</aside><pre><a name="l401" href="#l401" title="Link to line 401">#</a><code>EnableNMI_PauseTitleCard:
	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Menu
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_CharacterSelect
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_BANKE_DE<span class="token decimalnumber string">7</span><span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JMP</span> WaitForNMI

&nbsp;</code></pre><aside><p>Draws world info for the title card and pause screens</p>
<h5>Input</h5>
<ul>
<li><code>X</code>: CurrentWorld</li>
<li><code>Y</code>: CurrentLevel (not actually used)</li>
</ul>
&nbsp;</aside><pre><a name="l424" href="#l424" title="Link to line 424">#</a><code>DisplayLevelTitleCardText:&nbsp;</code></pre><aside><p>Level number (unused)
In Doki Doki Panic, this was displayed as a page number, keeping with
the storybook motif.</p>
&nbsp;</aside><pre><a name="l428" href="#l428" title="Link to line 428">#</a><code>	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> GetTwoDigitNumberTiles
&nbsp;</code></pre><aside><p>World number</p>
&nbsp;</aside><pre><a name="l433" href="#l433" title="Link to line 433">#</a><code>	<span class="token opcode property">INX</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">717</span>D
&nbsp;</code></pre><aside><p>Extra Life number</p>
&nbsp;</aside><pre><a name="l439" href="#l439" title="Link to line 439">#</a><code>	<span class="token opcode property">LDY</span> ExtraLives
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> GetTwoDigitNumberTiles
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">7191</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7192</span>
&nbsp;</code></pre><aside><p>Reset level dots</p>
&nbsp;</aside><pre><a name="l447" href="#l447" title="Link to line 447">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FB</span>
loc_BANKF_E<span class="token decimalnumber string">1</span>B<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">716</span>B, <span class="token register variable">Y</span> <span class="token comment">; writes to $7171</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">1</span>B<span class="token decimalnumber string">6</span>
&nbsp;</code></pre><aside><p>Level number</p>
&nbsp;</aside><pre><a name="l455" href="#l455" title="Link to line 455">#</a><code>	<span class="token opcode property">LDY</span> CurrentWorld
	<span class="token opcode property">LDA</span> CurrentLevel
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> WorldStartingLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentLevelRelative
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$D1</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">717</span>F

	<span class="token opcode property">LDA</span> WorldStartingLevel + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> WorldStartingLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
&nbsp;</code></pre><aside><p>Level dots</p>
&nbsp;</aside><pre><a name="l470" href="#l470" title="Link to line 470">#</a><code>	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
loc_BANKF_E<span class="token decimalnumber string">1</span>DC:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FD</span>
	<span class="token opcode property">CPX</span> CurrentLevelRelative
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">1</span>E<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F6</span>

loc_BANKF_E<span class="token decimalnumber string">1</span>E<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">716</span>B, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">BCC</span> loc_BANKF_E<span class="token decimalnumber string">1</span>DC
&nbsp;</code></pre><aside><p>Draw the card</p>
&nbsp;</aside><pre><a name="l488" href="#l488" title="Link to line 488">#</a><code>	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">7168</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>It's game time, pal</p>
&nbsp;</aside><pre><a name="l496" href="#l496" title="Link to line 496">#</a><code>SetStack<span class="token decimalnumber string">100</span>Gameplay:
	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Gameplay
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l503" href="#l503" title="Link to line 503">#</a><code>&nbsp;</code></pre><aside><p>Resets various level-related variables to $00</p>
&nbsp;</aside><pre><a name="l507" href="#l507" title="Link to line 507">#</a><code>InitializeSomeLevelStuff:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> CurrentLevelArea
	<span class="token opcode property">STA</span> CurrentLevelArea_Init
	<span class="token opcode property">STA</span> CurrentLevelEntryPage
	<span class="token opcode property">STA</span> CurrentLevelEntryPage_Init
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">STA</span> TransitionType_Init
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">STA</span> PlayerState_Init
	<span class="token opcode property">STA</span> InSubspaceOrJar
	<span class="token opcode property">STA</span> InJarType
	<span class="token opcode property">STA</span> StopwatchTimer
	<span class="token opcode property">STA</span> PlayerCurrentSize
	<span class="token opcode property">RTS</span>


PlayerSelectArrowTop:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CD</span>
PlayerSelectArrowBottom:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$ED</span>

&nbsp;</code></pre><aside><p>Displays the level title card and prepares the level to start by loading
the world tiles, PRG banks A/B, and copying character data</p>
&nbsp;</aside><pre><a name="l540" href="#l540" title="Link to line 540">#</a><code>DisplayLevelTitleCardAndMore:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> DisableNMI
&nbsp;</code></pre><aside><p>Set the scrolling mirror over to the right side...
This Isn't quiiite correct, and causes a bunch of
crud to show on the very left pixel -- residue
from the character select screen</p>
&nbsp;</aside><pre><a name="l549" href="#l549" title="Link to line 549">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">JSR</span> ChangeTitleCardCHR

	<span class="token opcode property">LDA</span> #PRGBank_A_B
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> CopyCharacterStatsAndStuff

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$23</span>
DisplayLevelTitleCardAndMore_TitleCardPaletteLoop:
	<span class="token opcode property">LDA</span> TitleCardPalettes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">55</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> DisplayLevelTitleCardAndMore_TitleCardPaletteLoop

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">55</span>F <span class="token comment">; Then tell it to dump that into the PPU</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_TitleCard
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> DrawTitleCardWorldImage

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">JSR</span> RestorePlayerToFullHealth
&nbsp;</code></pre><aside><p>Pause for the title card</p>
&nbsp;</aside><pre><a name="l584" href="#l584" title="Link to line 584">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$50</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
PreLevelTitleCard_PauseLoop:
	<span class="token opcode property">JSR</span> WaitForNMI
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BPL</span> PreLevelTitleCard_PauseLoop

PreStartLevel:
	<span class="token opcode property">JSR</span> SetStack<span class="token decimalnumber string">100</span>Gameplay

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> DisableNMI

	<span class="token opcode property">JSR</span> LoadWorldCHRBanks

	<span class="token opcode property">LDA</span> #PRGBank_A_B
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> CopyCharacterStatsAndStuff

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Runs the Character Select menu</p>
&nbsp;</aside><pre><a name="l613" href="#l613" title="Link to line 613">#</a><code>DoCharacterSelectMenu:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">JSR</span> DisableNMI

	<span class="token opcode property">JSR</span> LoadCharacterSelectCHRBanks

	<span class="token opcode property">LDA</span> #PRGBank_A_B
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> CopyCharacterStatsAndStuff

	<span class="token opcode property">JSR</span> ResetScreenForTitleCard

	<span class="token opcode property">LDA</span> CharacterSelectBankSwitch
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$A5</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">2</span>B<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> #PRGBank_A_B
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A5</span>
	<span class="token opcode property">STA</span> CharacterSelectBankSwitch

loc_BANKF_E<span class="token decimalnumber string">2</span>B<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">JSR</span> EnableNMI_PauseTitleCard

	<span class="token opcode property">JSR</span> DisableNMI

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">1</span>_CharacterSelect
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">STA</span> PreviousCharacter
	<span class="token opcode property">LDA</span> CurrentWorld
	<span class="token opcode property">STA</span> PreviousWorld
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$3F</span>

loc_BANKF_E<span class="token decimalnumber string">2</span>CA:
	<span class="token opcode property">LDA</span> PlayerSelectMarioSprites<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">2</span>CA

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDX</span> CurrentWorld
	<span class="token opcode property">LDY</span> CurrentLevel
	<span class="token opcode property">JSR</span> DisplayLevelTitleCardText

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">311</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l671" href="#l671" title="Link to line 671">#</a><code>loc_BANKF_E<span class="token decimalnumber string">2</span>E<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Right | ControllerInput_Left
	<span class="token opcode property">BNE</span> CharacterSelect_ChangeCharacter

	<span class="token opcode property">JMP</span> CharacterSelectMenuLoop

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l680" href="#l680" title="Link to line 680">#</a><code>CharacterSelect_ChangeCharacter:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Right
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">2</span>FE

	<span class="token opcode property">DEC</span> CurrentCharacter
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

loc_BANKF_E<span class="token decimalnumber string">2</span>FE:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Left
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">30</span>B

	<span class="token opcode property">INC</span> CurrentCharacter
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

loc_BANKF_E<span class="token decimalnumber string">30</span>B:
	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> CurrentCharacter

loc_BANKF_E<span class="token decimalnumber string">311</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C9</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$4F</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E9</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$4F</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDY</span> CurrentCharacter
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> PlayerSelectArrowTop, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$BE</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">11</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">13</span>
	<span class="token opcode property">LDA</span> PlayerSelectArrowBottom, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">14</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">15</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$BF</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">16</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">17</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">18</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$12</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANKF_E<span class="token decimalnumber string">37</span>D:
	<span class="token opcode property">LDA</span> PlayerSelectSpritePalettesDark, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">37</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> byte_RAM_A
	<span class="token opcode property">LDX</span> CurrentCharacter
	<span class="token opcode property">LDA</span> PlayerSelectPaletteOffsets, <span class="token register variable">X</span>
	<span class="token opcode property">TAX</span>

loc_BANKF_E<span class="token decimalnumber string">391</span>:
	<span class="token opcode property">LDA</span> PlayerSelectSpritePalettes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">DEC</span> byte_RAM_A
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">391</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>

CharacterSelectMenuLoop:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_A
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">3</span>AE

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">2</span>E<span class="token decimalnumber string">8</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l784" href="#l784" title="Link to line 784">#</a><code>loc_BANKF_E<span class="token decimalnumber string">3</span>AE:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> CurrentWorld
	<span class="token opcode property">LDY</span> CurrentLevel
	<span class="token opcode property">JSR</span> DisplayLevelTitleCardText

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDX</span> #$F
	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> PlayerSelectSpriteIndexes, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>

loc_BANKF_E<span class="token decimalnumber string">3</span>CC:
	<span class="token opcode property">LDA</span> PlayerSelectMarioSprites<span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">3</span>CC

loc_BANKF_E<span class="token decimalnumber string">3</span>D<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">3</span>D<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$3F</span>

loc_BANKF_E<span class="token decimalnumber string">3</span>DF:
	<span class="token opcode property">LDA</span> PlayerSelectMarioSprites<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">3</span>DF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>

loc_BANKF_E<span class="token decimalnumber string">3</span>EC:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">3</span>EC

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_StopMusic
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>This starts the game once RESET has done its thing.
We also come here after choosing "RETRY" from the game over menu.</p>
&nbsp;</aside><pre><a name="l841" href="#l841" title="Link to line 841">#</a><code>StartGame:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">JSR</span> DisableNMI

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> GameMilestoneCounter
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> TitleScreen <span class="token comment">; The whole title screen is a subroutine, lol</span>

	<span class="token opcode property">INC</span> GameMilestoneCounter
SetNumContinues:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span> <span class="token comment">; Number of continues on start</span>
	<span class="token opcode property">STA</span> Continues
&nbsp;</code></pre><aside><p>We return here after picking "CONTINUE" from the game over menu.</p>
&nbsp;</aside><pre><a name="l858" href="#l858" title="Link to line 858">#</a><code>ContinueGame:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span> <span class="token comment">; Number of lives to start</span>
	<span class="token opcode property">STA</span> ExtraLives

StartCharacterSelectMenu:
	<span class="token opcode property">LDX</span> CurrentWorld
	<span class="token opcode property">LDY</span> WorldStartingLevel, <span class="token register variable">X</span>
	<span class="token opcode property">STY</span> CurrentLevel
	<span class="token opcode property">STY</span> CurrentLevel_Init
	<span class="token opcode property">JSR</span> DoCharacterSelectMenu

	<span class="token opcode property">JSR</span> InitializeSomeLevelStuff

	<span class="token opcode property">JSR</span> DisplayLevelTitleCardAndMore

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> CurrentMusicIndex
	<span class="token opcode property">BNE</span> StartLevel <span class="token comment">; Branch always</span>

CharacterSelectMenu:
	<span class="token opcode property">JSR</span> DoCharacterSelectMenu

StartLevelAfterTitleCard:
	<span class="token opcode property">JSR</span> DisplayLevelTitleCardAndMore

StartLevel:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B0</span>
	<span class="token opcode property">ORA</span> PPUScrollXHiMirror
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> StartLevel_SetPPUCtrlMirror

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$FE</span>
	<span class="token opcode property">ORA</span> PPUScrollYHiMirror

StartLevel_SetPPUCtrlMirror:
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Transition
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">8</span>_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> CopyLevelDataToMemory

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">6</span>_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> LoadCurrentArea

	<span class="token opcode property">JSR</span> LoadCurrentPalette

IFDEF AREA_HEADER_TILESET
	<span class="token opcode property">JSR</span> LoadWorldCHRBanks
ENDIF

	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> SetStack<span class="token decimalnumber string">100</span>Gameplay

	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCtrlMirror

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> StartLevel_Vertical_Loop

StartLevel_Horizontal_Loop:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> InitializeAreaHorizontal

	<span class="token opcode property">JSR</span> EnsureCorrectMusic

	<span class="token opcode property">LDA</span> BreakStartLevelLoop
	<span class="token opcode property">BEQ</span> StartLevel_Horizontal_Loop

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> BreakStartLevelLoop
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

loc_BANKF_E<span class="token decimalnumber string">491</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">3</span>

	<span class="token opcode property">JMP</span> ShowPauseScreen

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l958" href="#l958" title="Link to line 958">#</a><code>loc_BANKF_E<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">4</span>AB

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">5</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l966" href="#l966" title="Link to line 966">#</a><code>&nbsp;</code></pre><aside><p>horizontal level</p>
&nbsp;</aside><pre><a name="l968" href="#l968" title="Link to line 968">#</a><code>loc_BANKF_E<span class="token decimalnumber string">4</span>AB:
	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">11</span>E

	<span class="token opcode property">LDY</span> GameMode
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">665</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l979" href="#l979" title="Link to line 979">#</a><code>loc_BANKF_E<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">LDA</span> DoAreaTransition
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">491</span>

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">1</span>AE

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> DoAreaTransition
	<span class="token opcode property">JMP</span> StartLevel

StartLevel_Vertical_Loop:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> InitializeAreaVertical

	<span class="token opcode property">JSR</span> EnsureCorrectMusic

	<span class="token opcode property">LDA</span> BreakStartLevelLoop
	<span class="token opcode property">BEQ</span> StartLevel_Vertical_Loop

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> BreakStartLevelLoop
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

loc_BANKF_E<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">4</span>F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BNE</span> ShowPauseScreen
&nbsp;</code></pre><aside><p>vertical level</p>
&nbsp;</aside><pre><a name="l1021" href="#l1021" title="Link to line 1021">#</a><code>loc_BANKF_E<span class="token decimalnumber string">4</span>F<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">17</span>E

	<span class="token opcode property">LDY</span> GameMode
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">502</span>

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">665</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1032" href="#l1032" title="Link to line 1032">#</a><code>loc_BANKF_E<span class="token decimalnumber string">502</span>:
	<span class="token opcode property">LDA</span> DoAreaTransition
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">5</span>

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">1</span>AE

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> DoAreaTransition
	<span class="token opcode property">JMP</span> StartLevel

&nbsp;</code></pre><aside><p>Pauses the game</p>
&nbsp;</aside><pre><a name="l1049" href="#l1049" title="Link to line 1049">#</a><code>ShowPauseScreen:
	<span class="token opcode property">JSR</span> PauseScreen_ExtraLife
&nbsp;</code></pre><aside><p>used when running sound queues</p>
&nbsp;</aside><pre><a name="l1053" href="#l1053" title="Link to line 1053">#</a><code>	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Pause
	<span class="token opcode property">STA</span> StackArea

PauseScreenLoop:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>

DoSuicideCheatCheck:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">LDA</span> PlayerState <span class="token comment">; Check if the player is already dying</span>
	<span class="token opcode property">CMP</span> #PlayerState_Dying
	<span class="token opcode property">BEQ</span> PauseScreenExitCheck <span class="token comment">; If so, skip the suicide code check</span>

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadHeld <span class="token comment">; Check for suicide code</span>
	<span class="token opcode property">CMP</span> #ControllerInput_Up | ControllerInput_B | ControllerInput_A <span class="token comment">; Up + A + B</span>
	<span class="token opcode property">BNE</span> PauseScreenExitCheck <span class="token comment">; Not being held! Nothing to see here</span>

	<span class="token opcode property">JSR</span> KillPlayer <span class="token comment">; KILL THYSELF</span>

PauseScreenExitCheck:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BNE</span> HidePauseScreen

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BPL</span> DoSuicideCheatCheck

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0D</span> <span class="token comment">; Will use either $0D or $0E from the update index pointers</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex <span class="token comment">; @TODO I assume this is what blinks "PAUSE"</span>
	<span class="token opcode property">JMP</span> PauseScreenLoop
&nbsp;</code></pre><aside><p>Unpauses the game</p>
&nbsp;</aside><pre><a name="l1092" href="#l1092" title="Link to line 1092">#</a><code>HidePauseScreen:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ResetCHRLatch
ENDIF

	<span class="token opcode property">JSR</span> LoadWorldCHRBanks

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">6</span>_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> LoadCurrentPalette

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> SetStack<span class="token decimalnumber string">100</span>Gameplay

	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> RestoreScreenScrollPosition

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> HidePauseScreen_Horizontal

HidePauseScreen_Vertical:
	<span class="token opcode property">LDA</span> #HMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">81</span>FE

HidePauseScreen_Vertical_Loop:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">823</span>D

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">BEQ</span> HidePauseScreen_Vertical_Loop

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">5</span>

HidePauseScreen_Horizontal:
	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8785</span>

HidePauseScreen_Horizontal_Loop:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>AA

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">BEQ</span> HidePauseScreen_Horizontal_Loop

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">491</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1158" href="#l1158" title="Link to line 1158">#</a><code>loc_BANKF_E<span class="token decimalnumber string">5</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>:
	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">6</span>_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> SubspaceCoins
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">5</span>D<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">8</span>_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> CopyJarDataToMemory

	<span class="token opcode property">JSR</span> CopyEnemyDataToMemory

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">6</span>_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> ClearSubAreaTileLayout

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">1</span>_Inside
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> CurrentMusicIndex
	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">5</span>E<span class="token decimalnumber string">1</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1190" href="#l1190" title="Link to line 1190">#</a><code>loc_BANKF_E<span class="token decimalnumber string">5</span>D<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">JSR</span> GenerateSubspaceArea

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">1</span>_Subspace
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> CurrentMusicIndex

loc_BANKF_E<span class="token decimalnumber string">5</span>E<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">870</span>C

	<span class="token opcode property">JSR</span> EnableNMI

loc_BANKF_E<span class="token decimalnumber string">5</span>EC:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>AA

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">5</span>EC

	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">606</span>

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">6</span>_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> LoadCurrentPalette

loc_BANKF_E<span class="token decimalnumber string">606</span>:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU
&nbsp;</code></pre><aside><p>subspace</p>
&nbsp;</aside><pre><a name="l1228" href="#l1228" title="Link to line 1228">#</a><code>loc_BANKF_E<span class="token decimalnumber string">609</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">0</span>F<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDY</span> GameMode
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">61</span><span class="token register variable">A</span>

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">665</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1241" href="#l1241" title="Link to line 1241">#</a><code>loc_BANKF_E<span class="token decimalnumber string">61</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">609</span>

	<span class="token opcode property">LDA</span> SubspaceCoins
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">627</span>

	<span class="token opcode property">INC</span> SubspaceVisits

loc_BANKF_E<span class="token decimalnumber string">627</span>:
	<span class="token opcode property">LDA</span> CurrentLevelAreaCopy
	<span class="token opcode property">STA</span> CurrentLevelArea
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">6</span>_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> LoadCurrentPalette

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">LDY</span> CompareMusicIndex
	<span class="token opcode property">STY</span> CurrentMusicIndex
	<span class="token opcode property">LDA</span> StarInvincibilityTimer
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">64</span>C

	<span class="token opcode property">LDA</span> LevelMusicIndexes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>

loc_BANKF_E<span class="token decimalnumber string">64</span>C:
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">874</span>C

loc_BANKF_E<span class="token decimalnumber string">654</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>AA

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">654</span>

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">491</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1290" href="#l1290" title="Link to line 1290">#</a><code>loc_BANKF_E<span class="token decimalnumber string">665</span>:
	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">LDY</span> GameMode
	<span class="token opcode property">LDA</span> #GameMode_InGame
	<span class="token opcode property">STA</span> GameMode
	<span class="token opcode property">STA</span> StarInvincibilityTimer
	<span class="token opcode property">STA</span> BigVeggiesPulled
	<span class="token opcode property">STA</span> CherryCount
	<span class="token opcode property">STA</span> StopwatchTimer
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">69</span>F

	<span class="token opcode property">STY</span> PlayerCurrentSize
	<span class="token opcode property">JSR</span> LevelInitialization

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> CurrentMusicIndex&nbsp;</code></pre><aside><p>this looks like an address</p>
&nbsp;</aside><pre><a name="l1310" href="#l1310" title="Link to line 1310">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$25</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7180</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$48</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7181</span>
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_TitleCard
	<span class="token opcode property">STA</span> CardScreenUpdateIndex
	<span class="token opcode property">JSR</span> PauseScreen_Card

AfterDeathJump:
IFNDEF CHARACTER_SELECT_AFTER_DEATH
	<span class="token opcode property">JMP</span> StartLevelAfterTitleCard
ENDIF
IFDEF CHARACTER_SELECT_AFTER_DEATH
	<span class="token opcode property">JMP</span> CharacterSelectMenu
ENDIF

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1327" href="#l1327" title="Link to line 1327">#</a><code>loc_BANKF_E<span class="token decimalnumber string">69</span>F:
	<span class="token opcode property">LDA</span> #PlayerHealth_<span class="token decimalnumber string">2</span>_HP
	<span class="token opcode property">STA</span> PlayerHealth
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerMaxHealth
	<span class="token opcode property">STA</span> KeyUsed
	<span class="token opcode property">STA</span> Mushroom<span class="token decimalnumber string">1</span>upPulled
	<span class="token opcode property">STA</span> Mushroom<span class="token decimalnumber string">1</span>Pulled
	<span class="token opcode property">STA</span> Mushroom<span class="token decimalnumber string">2</span>Pulled
	<span class="token opcode property">STA</span> SubspaceVisits
	<span class="token opcode property">STA</span> EnemiesKilledForHeart
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BEQ</span> DoGameOverStuff

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">75</span><span class="token register variable">A</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1345" href="#l1345" title="Link to line 1345">#</a><code>DoGameOverStuff:
	<span class="token opcode property">STY</span> PlayerCurrentSize
	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_GameOver
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> ChangeTitleCardCHR

	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">JSR</span> SetBlackAndWhitePalette

	<span class="token opcode property">JSR</span> SetScrollXYTo<span class="token decimalnumber string">0</span>

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_Text_Game_Over
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>

loc_BANKF_E<span class="token decimalnumber string">6</span>E<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">6</span>E<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$28</span>

loc_BANKF_E<span class="token decimalnumber string">6</span>EF:
	<span class="token opcode property">LDA</span> Text_Continue, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">67</span>B, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">6</span>EF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FB</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">68</span>F
	<span class="token opcode property">LDA</span> Continues
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">67</span>E
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">67</span>B
	<span class="token opcode property">DEC</span> Continues
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">717</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_Text_Retry

loc_BANKF_E<span class="token decimalnumber string">717</span>:
	<span class="token opcode property">STA</span> ScreenUpdateIndex

loc_BANKF_E<span class="token decimalnumber string">719</span>:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Select
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">747</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDY</span> Continues
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">733</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>

loc_BANKF_E<span class="token decimalnumber string">733</span>:
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FB</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">71</span>AB
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">71</span>AF
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F6</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">71</span>AB, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">71</span><span class="token register variable">a</span><span class="token decimalnumber string">8</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex

loc_BANKF_E<span class="token decimalnumber string">747</span>:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">719</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">BNE</span> GameOver_Retry

	<span class="token opcode property">STA</span> SlotMachineCoins
	<span class="token opcode property">JMP</span> ContinueGame

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1443" href="#l1443" title="Link to line 1443">#</a><code>GameOver_Retry:
	<span class="token opcode property">JMP</span> StartGame

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1448" href="#l1448" title="Link to line 1448">#</a><code>loc_BANKF_E<span class="token decimalnumber string">75</span><span class="token register variable">A</span>:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BEQ</span> EndOfLevel

	<span class="token opcode property">LDY</span> CurrentWorld
	<span class="token opcode property">STY</span> PreviousWorld
	<span class="token opcode property">LDA</span> WarpDestinations, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentWorld
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDX</span> CurrentCharacter
	<span class="token opcode property">LDA</span> WorldStartingLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentLevel
	<span class="token opcode property">STA</span> CurrentLevel_Init
	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">71</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> SetScrollXYTo<span class="token decimalnumber string">0</span>

	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">JSR</span> SetBlackAndWhitePalette

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> ChangeTitleCardCHR

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">7194</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_SlotWarpFanfare
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JSR</span> Delay<span class="token decimalnumber string">160</span>Frames

	<span class="token opcode property">JSR</span> InitializeSomeLevelStuff

	<span class="token opcode property">JMP</span> CharacterSelectMenu

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1489" href="#l1489" title="Link to line 1489">#</a><code>EndOfLevel:&nbsp;</code></pre><aside><p>Stop the music</p>
&nbsp;</aside><pre><a name="l1492" href="#l1492" title="Link to line 1492">#</a><code>	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_StopMusic <span class="token comment">; Stop music</span>
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p>Increase current characters "contribution" counter</p>
&nbsp;</aside><pre><a name="l1496" href="#l1496" title="Link to line 1496">#</a><code>	<span class="token opcode property">LDX</span> CurrentCharacter
	<span class="token opcode property">INC</span> CharacterLevelsCompleted, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Check if we've completed the final level</p>
&nbsp;</aside><pre><a name="l1500" href="#l1500" title="Link to line 1500">#</a><code>	<span class="token opcode property">LDA</span> CurrentLevel
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$13</span>
IFNDEF DISABLE_BONUS_CHANCE&nbsp;</code></pre><aside><p>If not, go to bonus chance and proceed to the next level</p>
&nbsp;</aside><pre><a name="l1504" href="#l1504" title="Link to line 1504">#</a><code>EndOfLevelJump:
	<span class="token opcode property">BNE</span> EndOfLevelSlotMachine
ENDIF
IFDEF DISABLE_BONUS_CHANCE
	<span class="token opcode property">STY</span> PlayerCurrentSize
EndOfLevelJump:
	<span class="token opcode property">BNE</span> GoToNextLevel
ENDIF&nbsp;</code></pre><aside><p>Otherwise, display the ending</p>
&nbsp;</aside><pre><a name="l1513" href="#l1513" title="Link to line 1513">#</a><code>	<span class="token opcode property">JMP</span> EndingSceneRoutine

EndOfLevelSlotMachine:
	<span class="token opcode property">STY</span> PlayerCurrentSize
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

IFDEF REV_A
	<span class="token opcode property">JSR</span> EnableNMI
	<span class="token opcode property">JSR</span> WaitForNMI
ENDIF

	<span class="token opcode property">JSR</span> LoadBonusChanceCHRBanks

IFNDEF BONUS_CHANCE_RAM_CLEANUP
	<span class="token opcode property">JSR</span> CopyUnusedCoinSpriteToSpriteArea
ENDIF

	<span class="token opcode property">LDA</span> #PRGBank_A_B
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> CopyBonusChanceLayoutToRAM

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_BonusChanceLayout
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Menu
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Gameplay
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">JSR</span> DisableNMI

	<span class="token opcode property">JSR</span> sub_BANKF_EA<span class="token decimalnumber string">33</span>

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_SlotWarpFanfare
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> SlotMachineCoins
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">7</span>F<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JMP</span> NoCoinsForSlotMachine

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1559" href="#l1559" title="Link to line 1559">#</a><code>loc_BANKF_E<span class="token decimalnumber string">7</span>F<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU

loc_BANKF_E<span class="token decimalnumber string">7</span>FD:
	<span class="token opcode property">LDA</span> SlotMachineCoins
	<span class="token opcode property">BNE</span> StartSlotMachine

GoToNextLevel:
	<span class="token opcode property">LDY</span> CurrentWorld
	<span class="token opcode property">LDA</span> WorldStartingLevel + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">CMP</span> CurrentLevel
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">81</span>E

	<span class="token opcode property">JSR</span> SetStack<span class="token decimalnumber string">100</span>Gameplay

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> CurrentMusicIndex
	<span class="token opcode property">INC</span> CurrentWorld
	<span class="token opcode property">JMP</span> StartCharacterSelectMenu

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1587" href="#l1587" title="Link to line 1587">#</a><code>loc_BANKF_E<span class="token decimalnumber string">81</span>E:
	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> CurrentLevel
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANKF_E<span class="token decimalnumber string">826</span>:
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CMP</span> WorldStartingLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">BCS</span> loc_BANKF_E<span class="token decimalnumber string">826</span>

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">STY</span> CurrentWorld <span class="token comment">; I am sure this is important somehow, but... why</span>
	<span class="token opcode property">LDY</span> CurrentWorld
	<span class="token opcode property">LDA</span> CurrentLevel
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> WorldStartingLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentLevelRelative
	<span class="token opcode property">LDA</span> CurrentLevel
	<span class="token opcode property">STA</span> CurrentLevel_Init
	<span class="token opcode property">LDA</span> CurrentLevelArea
	<span class="token opcode property">STA</span> CurrentLevelArea_Init
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">STA</span> CurrentLevelEntryPage_Init
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STY</span> PlayerState_Init
	<span class="token opcode property">STY</span> TransitionType
	<span class="token opcode property">STY</span> TransitionType_Init
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">STY</span> CurrentMusicIndex
	<span class="token opcode property">JSR</span> SetStack<span class="token decimalnumber string">100</span>Gameplay

	<span class="token opcode property">JMP</span> CharacterSelectMenu

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1623" href="#l1623" title="Link to line 1623">#</a><code>StartSlotMachine:
	<span class="token opcode property">DEC</span> SlotMachineCoins
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANKF_EA<span class="token decimalnumber string">68</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; Set all reel timers</span>
	<span class="token opcode property">STA</span> ObjectXLo
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span> <span class="token comment">; Set all reels to the first position</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">7</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">8</span>

DoSlotMachineSpinnyShit:
	<span class="token opcode property">JSR</span> WaitForNMI <span class="token comment">; $2C-$2E: Reel change timer</span>
&nbsp;</code></pre><aside><p>$2F-$31: Current reel icon</p>
&nbsp;</aside><pre><a name="l1642" href="#l1642" title="Link to line 1642">#</a><code>	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">2</span>_Climbing <span class="token comment">; Play "reel sound" sound effect</span>
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JSR</span> sub_BANKF_EAC<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> sub_BANKF_EADC

	<span class="token opcode property">JSR</span> sub_BANKF_EAF<span class="token decimalnumber string">6</span>

	<span class="token opcode property">JSR</span> sub_BANKF_E<span class="token decimalnumber string">916</span>

	<span class="token opcode property">LDA</span> byte_BANKF_E<span class="token decimalnumber string">9</span>DF, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> ObjectXLo <span class="token comment">; Reel 1 still active?</span>
	<span class="token opcode property">ORA</span> ObjectXLo + <span class="token decimalnumber string">1</span> <span class="token comment">; Reel 2 still active?</span>
	<span class="token opcode property">ORA</span> ObjectXLo + <span class="token decimalnumber string">2</span> <span class="token comment">; Reel 3 still active?</span>
	<span class="token opcode property">BNE</span> DoSlotMachineSpinnyShit <span class="token comment">; If any are still active, go back to waiting</span>

	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>df
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> ObjectXLo + <span class="token decimalnumber string">6</span> <span class="token comment">; Load reel 1</span>
	<span class="token opcode property">LDA</span> SlotMachineReelOrder<span class="token decimalnumber string">1</span>RAM, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> CheckReel<span class="token decimalnumber string">2</span>Symbol <span class="token comment">; Is this reel a cherry?</span>

	<span class="token opcode property">INY</span> <span class="token comment">; Yes; add one life</span>

CheckReel<span class="token decimalnumber string">2</span>Symbol:
	<span class="token opcode property">LDX</span> ObjectXLo + <span class="token decimalnumber string">7</span> <span class="token comment">; Load reel 2</span>
	<span class="token opcode property">CMP</span> SlotMachineReelOrder<span class="token decimalnumber string">2</span>RAM, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> AddSlotMachineExtraLives <span class="token comment">; Does this match the previous symbol?</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Yes; are they both cherries?</span>
	<span class="token opcode property">BNE</span> CheckReel<span class="token decimalnumber string">3</span>Symbol <span class="token comment">; If no, skip to third reel</span>

	<span class="token opcode property">INY</span> <span class="token comment">; They are both cherries, add another life or something</span>

CheckReel<span class="token decimalnumber string">3</span>Symbol:
	<span class="token opcode property">LDX</span> ObjectXLo + <span class="token decimalnumber string">8</span> <span class="token comment">; Load reel 3</span>
	<span class="token opcode property">CMP</span> SlotMachineReelOrder<span class="token decimalnumber string">3</span>RAM, <span class="token register variable">X</span> <span class="token comment">; Does reel 3 match the previous two?</span>
	<span class="token opcode property">BNE</span> AddSlotMachineExtraLives <span class="token comment">; No, fuck you</span>

	<span class="token opcode property">INY</span> <span class="token comment">; They all match! Yay! Add a life.</span>&nbsp;</code></pre><aside><p>Cherry count: 3 / Non-cherry: 1</p>
&nbsp;</aside><pre><a name="l1689" href="#l1689" title="Link to line 1689">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Were they all cherries?</span>
	<span class="token opcode property">BNE</span> AddSlotMachineExtraLives <span class="token comment">; Nope, all done</span>

	<span class="token opcode property">INY</span> <span class="token comment">; Yes, add 2 more extra lives</span>
	<span class="token opcode property">INY</span>

AddSlotMachineExtraLives:
	<span class="token opcode property">TYA</span> <span class="token comment">; Y contains extra lives to add</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ExtraLives <span class="token comment">; Add won extra lives to current lives</span>
	<span class="token opcode property">BCC</span> loc_BANKF_E<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">3</span> <span class="token comment">; Check if adding extra lives has wrapped the counter</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span> <span class="token comment">; If so, set extra lives to 255 (#$FF)</span>

loc_BANKF_E<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">STA</span> ExtraLives
	<span class="token opcode property">TYA</span> <span class="token comment">; Did we actually win any lives?</span>
	<span class="token opcode property">BEQ</span> SlotMachineLoseFanfare <span class="token comment">; No, play lose sound effect</span>

	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_CrystalGetFanfare <span class="token comment">; Play winner jingle</span>
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANKF_EA<span class="token decimalnumber string">68</span>

loc_BANKF_E<span class="token decimalnumber string">8</span>ED:
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANKF_E<span class="token decimalnumber string">916</span>

	<span class="token opcode property">LDA</span> byte_BANKF_E<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">8</span>ED

	<span class="token opcode property">BEQ</span> loc_BANKF_E<span class="token decimalnumber string">90</span>C

SlotMachineLoseFanfare:
	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_DeathJingle
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JSR</span> sub_BANKF_EA<span class="token decimalnumber string">68</span>

	<span class="token opcode property">JSR</span> Delay<span class="token decimalnumber string">160</span>Frames

loc_BANKF_E<span class="token decimalnumber string">90</span>C:
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>e<span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">JMP</span> loc_BANKF_E<span class="token decimalnumber string">7</span>FD

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1747" href="#l1747" title="Link to line 1747">#</a><code>sub_BANKF_E<span class="token decimalnumber string">916</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_E916</p>
&nbsp;</aside><pre><a name="l1759" href="#l1759" title="Link to line 1759">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1761" href="#l1761" title="Link to line 1761">#</a><code>NoCoinsForSlotMachine:
	<span class="token opcode property">JSR</span> Delay<span class="token decimalnumber string">80</span>Frames

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_DeathJingle
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>

IFDEF EXPAND_MUSIC
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>
ENDIF
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
loc_BANKF_E<span class="token decimalnumber string">92</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_BANKF_E<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
loc_BANKF_E<span class="token decimalnumber string">938</span>:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BNE</span> loc_BANKF_E<span class="token decimalnumber string">938</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BPL</span> loc_BANKF_E<span class="token decimalnumber string">92</span><span class="token register variable">A</span>

	<span class="token opcode property">JMP</span> GoToNextLevel


Delay<span class="token decimalnumber string">80</span>Frames:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$50</span>
	<span class="token opcode property">BNE</span> DelayFrames

Delay<span class="token decimalnumber string">160</span>Frames:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>

DelayFrames:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
DelayFrames_Loop:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOnPPU
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BNE</span> DelayFrames_Loop

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Do the ending!</p>
&nbsp;</aside><pre><a name="l1812" href="#l1812" title="Link to line 1812">#</a><code>EndingSceneRoutine:
	<span class="token opcode property">JSR</span> SetScrollXYTo<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span>&nbsp;</code></pre><aside><p>FDS leftover; $4080 is an old sound register
The prototype had two writes to this address!
It looks like they missed this one, though.</p>
&nbsp;</aside><pre><a name="l1819" href="#l1819" title="Link to line 1819">#</a><code>	<span class="token opcode property">STA</span> FDS_WAVETABLE_VOL
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> SoundEffectPlaying<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> FreeSubconsScene

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> DisableNMI

	<span class="token opcode property">JSR</span> LoadCelebrationSceneBackgroundCHR

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">INC</span> GameMilestoneCounter

	<span class="token opcode property">JSR</span> ContributorScene

	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> DisableNMI

SetupMarioSleepingScene:
	<span class="token opcode property">JSR</span> LoadMarioSleepingCHRBanks

	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> #PRGBank_C_D
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">INC</span> GameMilestoneCounter
	<span class="token opcode property">JMP</span> MarioSleepingScene

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1862" href="#l1862" title="Link to line 1862">#</a><code>DisableNMI:
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIDisabled
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function DisableNMI</p>
&nbsp;</aside><pre><a name="l1870" href="#l1870" title="Link to line 1870">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1872" href="#l1872" title="Link to line 1872">#</a><code>PPUBuffer_Text_Game_Over:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$CB</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$E0</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EF</span>, <span class="token hexnumber string">$DE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$00</span> <span class="token comment">; $C ; "GAME OVER"</span>
Text_Continue:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span> <span class="token comment">; (Placeholder for continue count)</span>&nbsp;</code></pre><aside><p>This is loaded manually and drawn so the count
can be patched in</p>
<ul>
<li>CONTINUE</li>
</ul>
&nbsp;</aside><pre><a name="l1880" href="#l1880" title="Link to line 1880">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$6A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$F6</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$EE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DE</span> <span class="token comment">; $C</span>
PPUBuffer_Text_Retry:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$F6</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$F2</span> <span class="token comment">; * RETRY</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$CB</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span> <span class="token comment">; Blank, erases "GAME OVER"</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$00</span> <span class="token comment">; $C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>
byte_BANKF_E<span class="token decimalnumber string">9</span>DF:
	<span class="token directive keyword">.db</span> ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>ab
	<span class="token directive keyword">.db</span> ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>df
byte_BANKF_E<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">693</span>
	<span class="token directive keyword">.db</span> ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>da
byte_BANKF_E<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">3</span>:
	<span class="token directive keyword">.db</span> ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>bd
	<span class="token directive keyword">.db</span> ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">6</span>da
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1899" href="#l1899" title="Link to line 1899">#</a><code>&nbsp;</code></pre><aside><p>Displays extra life info on the pause screen</p>
&nbsp;</aside><pre><a name="l1903" href="#l1903" title="Link to line 1903">#</a><code>PauseScreen_ExtraLife:
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_PauseExtraLife
	<span class="token opcode property">STA</span> CardScreenUpdateIndex
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$26</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7180</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C8</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7181</span>
&nbsp;</code></pre><aside><p>Loads the palette and graphics for the pause screen to display</p>
&nbsp;</aside><pre><a name="l1914" href="#l1914" title="Link to line 1914">#</a><code>PauseScreen_Card:
	<span class="token opcode property">JSR</span> WaitForNMI_TurnOffPPU

	<span class="token opcode property">JSR</span> ChangeTitleCardCHR

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> StashScreenScrollPosition
&nbsp;</code></pre><aside><p>Load title card palette</p>
&nbsp;</aside><pre><a name="l1925" href="#l1925" title="Link to line 1925">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$23</span>
PauseScreen_Card_Loop:
	<span class="token opcode property">LDA</span> TitleCardPalettes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">55</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> PauseScreen_Card_Loop

PauseScreen_Card_ScreenReset:
	<span class="token opcode property">JSR</span> ResetScreenForTitleCard

	<span class="token opcode property">JSR</span> EnableNMI_PauseTitleCard

	<span class="token opcode property">LDX</span> CurrentWorld
	<span class="token opcode property">LDY</span> CurrentLevel
	<span class="token opcode property">JSR</span> DisplayLevelTitleCardText

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">JSR</span> WaitForNMI

	<span class="token opcode property">LDA</span> CardScreenUpdateIndex
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI


EnableNMI:
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1958" href="#l1958" title="Link to line 1958">#</a><code>sub_BANKF_EA<span class="token decimalnumber string">33</span>:
	<span class="token opcode property">JSR</span> SetScrollXYTo<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">STY</span> PPUADDR

loc_BANKF_EA<span class="token decimalnumber string">43</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">59</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCC</span> loc_BANKF_EA<span class="token decimalnumber string">43</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PPUADDR

SetBonusChancePalette:
	<span class="token opcode property">LDA</span> BonusChanceSpritePalettes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCC</span> SetBonusChancePalette
&nbsp;</code></pre><aside><p>End of function sub_BANKF_EA33</p>
&nbsp;</aside><pre><a name="l1990" href="#l1990" title="Link to line 1990">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1992" href="#l1992" title="Link to line 1992">#</a><code>sub_BANKF_EA<span class="token decimalnumber string">68</span>:
	<span class="token opcode property">LDY</span> ExtraLives
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> GetTwoDigitNumberTiles

	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">599</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">59</span><span class="token register variable">A</span>
	<span class="token opcode property">LDA</span> SlotMachineCoins
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">588</span>
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">583</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Menu
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">JSR</span> EnableNMI

	<span class="token opcode property">JMP</span> WaitForNMI

&nbsp;</code></pre><aside><p>End of function sub_BANKF_EA68</p>
&nbsp;</aside><pre><a name="l2014" href="#l2014" title="Link to line 2014">#</a><code>&nbsp;</code></pre><aside><p>Converts a number to numerical tiles with space for 2 digits</p>
<h5>Input</h5>
<ul>
<li><code>A</code> = number to display</li>
</ul>
<h5>Output</h5>
<ul>
<li><code>A</code>: second digit of the number (ones)</li>
<li><code>Y</code>: first digit of the number (tens)</li>
</ul>
&nbsp;</aside><pre><a name="l2026" href="#l2026" title="Link to line 2026">#</a><code>GetTwoDigitNumberTiles:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$D0</span> <span class="token comment">; zero</span>

GetTwoDigitNumberTiles_TensLoop:&nbsp;</code></pre><aside><p>Count up the tens digit until A &#x3C; 10</p>
&nbsp;</aside><pre><a name="l2031" href="#l2031" title="Link to line 2031">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCC</span> GetTwoDigitNumberTiles_Ones

	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">JMP</span> GetTwoDigitNumberTiles_TensLoop

GetTwoDigitNumberTiles_Ones:
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">BNE</span> GetTwoDigitNumberTiles_Exit

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FB</span>

GetTwoDigitNumberTiles_Exit:
	<span class="token opcode property">RTS</span>


WaitForNMI_TurnOffPPU:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> _WaitForNMI_StuffPPUMask <span class="token comment">; Branch always</span>

WaitForNMI_TurnOnPPU:
	<span class="token opcode property">LDA</span> #PPUMask_ShowLeft<span class="token decimalnumber string">8</span>Pixels_BG | PPUMask_ShowLeft<span class="token decimalnumber string">8</span>Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites

_WaitForNMI_StuffPPUMask:
	<span class="token opcode property">STA</span> PPUMaskMirror

WaitForNMI:
	<span class="token opcode property">LDA</span> ScreenUpdateIndex
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> ScreenUpdateBufferPointers, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer
	<span class="token opcode property">LDA</span> ScreenUpdateBufferPointers + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> NMIWaitFlag <span class="token comment">; Start waiting for NMI to finish</span>

WaitForNMILoop:
	<span class="token opcode property">LDA</span> NMIWaitFlag <span class="token comment">; Has the NMI routine set the flag yet?</span>
	<span class="token opcode property">BPL</span> WaitForNMILoop <span class="token comment">; If no, wait some more</span>

	<span class="token opcode property">RTS</span> <span class="token comment">; If yes, go back to what we were doing</span>
&nbsp;</code></pre><aside><p>End of function WaitForNMI</p>
&nbsp;</aside><pre><a name="l2077" href="#l2077" title="Link to line 2077">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2079" href="#l2079" title="Link to line 2079">#</a><code>sub_BANKF_EAC<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BPL</span> locret_BANKF_EAD<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>

loc_BANKF_EAC<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANKF_EAD<span class="token decimalnumber string">2</span>

	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BCC</span> loc_BANKF_EAC<span class="token decimalnumber string">8</span>

locret_BANKF_EAD<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2098" href="#l2098" title="Link to line 2098">#</a><code>loc_BANKF_EAD<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_EAC2</p>
&nbsp;</aside><pre><a name="l2107" href="#l2107" title="Link to line 2107">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2109" href="#l2109" title="Link to line 2109">#</a><code>sub_BANKF_EADC:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>

loc_BANKF_EADE:
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_EAF<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEC</span> ObjectXLo + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANKF_EAF<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> ObjectXLo + <span class="token decimalnumber string">6</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANKF_EAF<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">6</span>, <span class="token register variable">X</span>

loc_BANKF_EAF<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANKF_EADE

	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_EADC</p>
&nbsp;</aside><pre><a name="l2135" href="#l2135" title="Link to line 2135">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2137" href="#l2137" title="Link to line 2137">#</a><code>sub_BANKF_EAF<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANKF_EAFA:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">ADC</span> ObjectXLo + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> SlotMachineReelOrder<span class="token decimalnumber string">1</span>RAM, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANKF_EB<span class="token decimalnumber string">0</span>D:
	<span class="token opcode property">LDA</span> BonusChanceCherrySprite, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BPL</span> loc_BANKF_EB<span class="token decimalnumber string">0</span>D

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BPL</span> loc_BANKF_EAFA

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$17</span>

loc_BANKF_EB<span class="token decimalnumber string">1</span>F:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANKF_EB<span class="token decimalnumber string">1</span>F

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANKF_EAF6</p>
&nbsp;</aside><pre><a name="l2185" href="#l2185" title="Link to line 2185">#</a><code>IFNDEF BONUS_CHANCE_RAM_CLEANUP&nbsp;</code></pre><aside><p>Copies the unused coin sprite from memory into the sprite DMA area at $200</p>
&nbsp;</aside><pre><a name="l2190" href="#l2190" title="Link to line 2190">#</a><code>CopyUnusedCoinSpriteToSpriteArea:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

CopyUnusedCoinSpriteToSpriteArea_Loop:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">653</span>, <span class="token register variable">Y</span> <span class="token comment">; Copy two sprites from memory to memory.</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$28</span>, <span class="token register variable">Y</span> <span class="token comment">; This is definitely efficient.</span>
	<span class="token opcode property">INY</span> <span class="token comment">; Two sprites for each half of the coin.</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$08</span> <span class="token comment">; Four bytes per sprite * 2 sprites = 8 bytes</span>
	<span class="token opcode property">BCC</span> CopyUnusedCoinSpriteToSpriteArea_Loop

	<span class="token opcode property">RTS</span>
ENDIF

loc_BANKF_EB<span class="token decimalnumber string">3</span>F:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> OAMADDR
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> OAM_DMA
	<span class="token opcode property">JSR</span> ChangeCHRBanks

	<span class="token opcode property">LDA</span> PPUMaskMirror
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">JSR</span> DoSoundProcessing

	<span class="token opcode property">LDA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">DEC</span> NMIWaitFlag
	<span class="token opcode property">JMP</span> loc_BANKF_EC<span class="token decimalnumber string">61</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2220" href="#l2220" title="Link to line 2220">#</a><code>loc_BANKF_EB<span class="token decimalnumber string">5</span>E:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">STA</span> OAMADDR
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> OAM_DMA
	<span class="token opcode property">JSR</span> ChangeCHRBanks

	<span class="token opcode property">JSR</span> UpdatePPUFromBufferWithOptions

	<span class="token opcode property">JSR</span> sub_BANKF_EC<span class="token decimalnumber string">68</span>

	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> PPUMaskMirror
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">JMP</span> loc_BANKF_EC<span class="token decimalnumber string">4</span>B

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2242" href="#l2242" title="Link to line 2242">#</a><code>loc_BANKF_EB<span class="token decimalnumber string">86</span>:
	<span class="token opcode property">LDA</span> PPUMaskMirror
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">JMP</span> loc_BANKF_EC<span class="token decimalnumber string">5</span>E

&nbsp;</code></pre><aside><p>public NMI</p>
&nbsp;</aside><pre><a name="l2250" href="#l2250" title="Link to line 2250">#</a><code>NMI:
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">BIT</span> StackArea
	<span class="token opcode property">BPL</span> loc_BANKF_EB<span class="token decimalnumber string">5</span>E <span class="token comment">; branch if bit 7 was 0</span>

	<span class="token opcode property">BVC</span> loc_BANKF_EB<span class="token decimalnumber string">3</span>F <span class="token comment">; branch if bit 6 was 0</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">STA</span> OAMADDR
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> OAM_DMA
	<span class="token opcode property">JSR</span> ChangeCHRBanks

	<span class="token opcode property">LDA</span> NMIWaitFlag
	<span class="token opcode property">BNE</span> loc_BANKF_EB<span class="token decimalnumber string">86</span>

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> loc_BANKF_EC<span class="token decimalnumber string">1</span>F

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">BEQ</span> loc_BANKF_EBE<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$1E</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteVertical | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCTRL

loc_BANKF_EBC<span class="token decimalnumber string">9</span>:
	LDA_abs byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUADDR
	LDA_abs byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> PPUADDR

loc_BANKF_EBD<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">380</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANKF_EBD<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$1E</span>
	INC_abs byte_RAM_D<span class="token decimalnumber string">2</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">BNE</span> loc_BANKF_EBC<span class="token decimalnumber string">9</span>

loc_BANKF_EBE<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>BC
	<span class="token opcode property">BEQ</span> loc_BANKF_EC<span class="token decimalnumber string">1</span>F

	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteVertical | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$04</span>

loc_BANKF_EBF<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>BC
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>BD
	<span class="token opcode property">STA</span> PPUADDR

loc_BANKF_EC<span class="token decimalnumber string">05</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">3</span>BE, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANKF_EC<span class="token decimalnumber string">05</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>BD
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>BD
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANKF_EBF<span class="token decimalnumber string">6</span>

	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">3</span>BC

loc_BANKF_EC<span class="token decimalnumber string">1</span>F:
	<span class="token opcode property">JSR</span> UpdatePPUFromBufferNMI

	<span class="token opcode property">JSR</span> sub_BANKF_EC<span class="token decimalnumber string">68</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B0</span>
	<span class="token opcode property">ORA</span> PPUScrollXHiMirror
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANKF_EC<span class="token decimalnumber string">31</span>

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$FE</span>
	<span class="token opcode property">ORA</span> PPUScrollYHiMirror

loc_BANKF_EC<span class="token decimalnumber string">31</span>:
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> BackgroundYOffset
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> PPUMaskMirror
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">10</span>

loc_BANKF_EC<span class="token decimalnumber string">4</span>B:
	<span class="token opcode property">LDA</span> ScreenUpdateIndex
	<span class="token opcode property">BNE</span> loc_BANKF_EC<span class="token decimalnumber string">55</span>

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>

loc_BANKF_EC<span class="token decimalnumber string">55</span>:
	<span class="token opcode property">LDA</span> #ScreenUpdateBuffer_RAM_<span class="token decimalnumber string">301</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> UpdateJoypads

	<span class="token opcode property">DEC</span> NMIWaitFlag

loc_BANKF_EC<span class="token decimalnumber string">5</span>E:
	<span class="token opcode property">JSR</span> DoSoundProcessing

IFDEF DEBUG
DebugHook:&nbsp;</code></pre><aside><p>Hook into debug routine if select is pressed</p>
&nbsp;</aside><pre><a name="l2384" href="#l2384" title="Link to line 2384">#</a><code>	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">CMP</span> #ControllerInput_Select
	<span class="token opcode property">BNE</span> loc_BANKF_EC<span class="token decimalnumber string">61</span>
	<span class="token opcode property">LDA</span> #>Debug_Init
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> #&#x3C;Debug_Init
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">RTI</span>
ENDIF

loc_BANKF_EC<span class="token decimalnumber string">61</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">RTI</span>
&nbsp;</code></pre><aside><p>End of function NMI</p>
&nbsp;</aside><pre><a name="l2405" href="#l2405" title="Link to line 2405">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2407" href="#l2407" title="Link to line 2407">#</a><code>sub_BANKF_EC<span class="token decimalnumber string">68</span>:
	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>End of function sub_BANKF_EC68</p>
&nbsp;</aside><pre><a name="l2419" href="#l2419" title="Link to line 2419">#</a><code>DoSoundProcessing:
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">4</span>_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBankWithoutSaving

	<span class="token opcode property">JSR</span> StartProcessingSoundQueue

	<span class="token opcode property">LDA</span> MMC<span class="token decimalnumber string">3</span>PRGBankTemp
	<span class="token opcode property">JMP</span> ChangeMappedPRGBank


ClearNametablesAndSprites:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUMaskMirror
	<span class="token opcode property">STA</span> PPUMASK
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">JSR</span> ClearNametableChunk

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$24</span>
	<span class="token opcode property">JSR</span> ClearNametableChunk

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$28</span>
	<span class="token opcode property">JSR</span> ClearNametableChunk


HideAllSprites:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>

HideAllSpritesLoop:
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> HideAllSpritesLoop

	<span class="token opcode property">RTS</span>


ClearNametableChunk:
	<span class="token opcode property">LDY</span> PPUSTATUS <span class="token comment">; Reset PPU address latch</span>
	<span class="token opcode property">LDY</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIDisabled
	<span class="token opcode property">STY</span> PPUCTRL <span class="token comment">; Turn off NMI</span>
	<span class="token opcode property">STY</span> PPUCtrlMirror
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>&nbsp;</code></pre><aside><p>A contains the high byte of the PPU address (generally $20, $24, $28)</p>
&nbsp;</aside><pre><a name="l2467" href="#l2467" title="Link to line 2467">#</a><code>	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">STY</span> PPUADDR <span class="token comment">; And Y has the low byte ($00)</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$03</span> <span class="token comment">; Do $300 bytes for this loop.</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FB</span>

ClearNametableChunk_Loop:
	<span class="token opcode property">STA</span> PPUDATA <span class="token comment">; Store the blank tile $300 times</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">BNE</span> ClearNametableChunk_Loop <span class="token comment">; (Loop falls through every $100 bytes)</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> ClearNametableChunk_Loop <span class="token comment">; Loop falls through after $300 bytes</span>

ClearNametableChunk_Loop<span class="token decimalnumber string">2</span>:&nbsp;</code></pre><aside><p>Do another loop of $C0 bytes to clear the
rest of the nametable chunk</p>
&nbsp;</aside><pre><a name="l2483" href="#l2483" title="Link to line 2483">#</a><code>	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">BNE</span> ClearNametableChunk_Loop<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Load A with $00 for clearing the attribute tables</span>

ClearNametableChunk_AttributeTableLoop:
	<span class="token opcode property">STA</span> PPUDATA <span class="token comment">; Clear attribute table...</span>
	<span class="token opcode property">INY</span> <span class="token comment">; Y was $C0 on entry, so write $40 bytes...</span>
	<span class="token opcode property">BNE</span> ClearNametableChunk_AttributeTableLoop

PPUBufferUpdatesComplete:
	<span class="token opcode property">RTS</span> <span class="token comment">; Woo fucking hoo</span>

&nbsp;</code></pre><aside><p>Used to update the PPU nametable / palette data during NMI.</p>
<p>This function can only handle $100 bytes of data
(actually less).</p>
<p>Unlike UpdatePPUFromBuffer, this one does not support
$80 or $40 as options, instead treating them as direct length.
It also does not increment the buffer pointer, only using Y
to read further data.</p>
<p>If Y overflows, it will resume copying again from the beginning,
and can get into an infinite loop if it doesn't encounter
a terminating $00. Welp!</p>
&nbsp;</aside><pre><a name="l2514" href="#l2514" title="Link to line 2514">#</a><code>UpdatePPUFromBufferNMI:
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

UpdatePPUFromBufferNMI_CheckForBuffer:
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> PPUBufferUpdatesComplete

	<span class="token opcode property">LDX</span> PPUSTATUS
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span>
	<span class="token opcode property">TAX</span>

UpdatePPUFromBufferNMI_CopyLoop:
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> UpdatePPUFromBufferNMI_CopyLoop

	<span class="token opcode property">INY</span>
	<span class="token opcode property">JMP</span> UpdatePPUFromBufferNMI_CheckForBuffer

&nbsp;</code></pre><aside><p>This reads from $F0/$F1 to determine where a "buffer" is.
Basically, a buffer is like this:</p>
<p>PPUADDR  LEN DATA ......
$20 $04  $03 $E9 $F0 $FB
$25 $5F  $4F $FB
$21 $82  $84 $00 $01 $02 $03
$00</p>
<p>PPUADDR is two bytes (hi,lo) for the address to send to PPUADDR.
LEN is the length, with the following two bitmasks:</p>
<ul>
<li>$80: Set the "draw vertically" option</li>
<li>$40: Use ONE tile instead of a string
DATA is either (LEN) bytes or one byte.</li>
</ul>
<p>After (LEN) bytes have been written, the buffer pointer
is incremented to (LEN+2) and the function restarts.
A byte of $00 terminates execution and returns.</p>
<p>There is a similar function, UpdatePPUFromBufferNMI,
that is called during NMI, but unlike this one,
that one does NOT use bitmasks, nor increment the pointer.</p>
&nbsp;</aside><pre><a name="l2567" href="#l2567" title="Link to line 2567">#</a><code>UpdatePPUFromBufferWithOptions:&nbsp;</code></pre><aside><p>First, check if we have anything to send to the PPU</p>
&nbsp;</aside><pre><a name="l2569" href="#l2569" title="Link to line 2569">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span>&nbsp;</code></pre><aside><p>If the first byte at the buffer address is #$00, we have nothing. We're done here!</p>
&nbsp;</aside><pre><a name="l2572" href="#l2572" title="Link to line 2572">#</a><code>	<span class="token opcode property">BEQ</span> PPUBufferUpdatesComplete
&nbsp;</code></pre><aside><p>Clear address latch</p>
&nbsp;</aside><pre><a name="l2575" href="#l2575" title="Link to line 2575">#</a><code>	<span class="token opcode property">LDX</span> PPUSTATUS&nbsp;</code></pre><aside><p>Set the PPU address to the
address from the PPU buffer</p>
&nbsp;</aside><pre><a name="l2578" href="#l2578" title="Link to line 2578">#</a><code>	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span> <span class="token comment">; Data segment length byte...</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">PHA</span>&nbsp;</code></pre><aside><p>Enable NMI + Vertical increment + whatever else was already set...</p>
&nbsp;</aside><pre><a name="l2587" href="#l2587" title="Link to line 2587">#</a><code>	<span class="token opcode property">LDA</span> PPUCtrlMirror
	<span class="token opcode property">ORA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteVertical | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">0000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">8</span> | PPUCtrl_NMIEnabled&nbsp;</code></pre><aside><p>...but only if $80 was set in the length byte. Otherwise, turn vertical incrementing back off.</p>
&nbsp;</aside><pre><a name="l2590" href="#l2590" title="Link to line 2590">#</a><code>	<span class="token opcode property">BCS</span> UpdatePPUFBWO_EnableVerticalIncrement

	<span class="token opcode property">AND</span> #PPUCtrl_Base<span class="token decimalnumber string">2</span>C<span class="token decimalnumber string">00</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">1000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled | <span class="token hexnumber string">$40</span>

UpdatePPUFBWO_EnableVerticalIncrement:
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">PLA</span>&nbsp;</code></pre><aside><p>Check if the second bit ($40) in the length has been set</p>
&nbsp;</aside><pre><a name="l2598" href="#l2598" title="Link to line 2598">#</a><code>	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>&nbsp;</code></pre><aside><p>If not, we are copying a string of data</p>
&nbsp;</aside><pre><a name="l2600" href="#l2600" title="Link to line 2600">#</a><code>	<span class="token opcode property">BCC</span> UpdatePPUFBWO_CopyStringOfTiles
&nbsp;</code></pre><aside><p>Length (A) is now (A &#x3C;&#x3C; 2).
OR in #$02 now if we are copying a single tile;
This will be rotated out into register C momentarily</p>
&nbsp;</aside><pre><a name="l2605" href="#l2605" title="Link to line 2605">#</a><code>	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">INY</span>

UpdatePPUFBWO_CopyStringOfTiles:&nbsp;</code></pre><aside><p>Restore the data length.
A = (Length &#x26; #$3F)</p>
&nbsp;</aside><pre><a name="l2611" href="#l2611" title="Link to line 2611">#</a><code>	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
&nbsp;</code></pre><aside><p>This moves the second bit (used above to signal
"one tile mode") into the Carry register</p>
&nbsp;</aside><pre><a name="l2615" href="#l2615" title="Link to line 2615">#</a><code>	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span> <span class="token comment">; Copy the length into register X</span>

UpdatePPUFBWO_CopyLoop:&nbsp;</code></pre><aside><p>If Carry is set (from above), we're only copying one tile.
Do not increment Y to advance copying index</p>
&nbsp;</aside><pre><a name="l2621" href="#l2621" title="Link to line 2621">#</a><code>	<span class="token opcode property">BCS</span> UpdatePPUFBWO_CopySingleTileSkip

	<span class="token opcode property">INY</span>

UpdatePPUFBWO_CopySingleTileSkip:
	<span class="token opcode property">LDA</span> (RAM_PPUDataBufferPointer), <span class="token register variable">Y</span> <span class="token comment">; Load data from buffer...</span>
	<span class="token opcode property">STA</span> PPUDATA <span class="token comment">; ...store it to the PPU.</span>
	<span class="token opcode property">DEX</span> <span class="token comment">; Decrease remaining length.</span>
	<span class="token opcode property">BNE</span> UpdatePPUFBWO_CopyLoop <span class="token comment">; Are we done? If no, copy more stuff</span>

	<span class="token opcode property">INY</span> <span class="token comment">; Y contains the amount of copied data now</span>
	<span class="token opcode property">TYA</span> <span class="token comment">; ...and now A does</span>
	<span class="token opcode property">CLC</span> <span class="token comment">; Clear carry bit (from earlier)</span>
	<span class="token opcode property">ADC</span> RAM_PPUDataBufferPointer <span class="token comment">; Add the length to the PPU data buffer</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer
	<span class="token opcode property">LDA</span> RAM_PPUDataBufferPointer + <span class="token decimalnumber string">1</span>&nbsp;</code></pre><aside><p>If the length overflowed (carry set),
add that to the hi byte of the pointer</p>
&nbsp;</aside><pre><a name="l2639" href="#l2639" title="Link to line 2639">#</a><code>	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer + <span class="token decimalnumber string">1</span>&nbsp;</code></pre><aside><p>Start the cycle over again.
(If the PPU buffer points to a 0, it will terminate after this jump)</p>
&nbsp;</aside><pre><a name="l2643" href="#l2643" title="Link to line 2643">#</a><code>	<span class="token opcode property">JMP</span> UpdatePPUFromBufferWithOptions


IFDEF DEBUG
	<span class="token directive keyword">.include</span> <a class="token string" href="/smb2/src/extras/debug-f.asm">"src/extras/debug-f.asm"</a>
ENDIF

IF INES_MAPPER == MAPPER_FME<span class="token decimalnumber string">7</span>
RESET_FME<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span> <span class="token comment">; PRG bank 0</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%11000000</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span> <span class="token comment">; PRG bank 1</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; ROM bank 0</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0A</span> <span class="token comment">; PRG bank 2</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; ROM bank 1</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0B</span> <span class="token comment">; PRG bank 3</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0E</span> <span class="token comment">; ROM bank E</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">JMP</span> RESET


ChangeCHRBanks_FME<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDY</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">STY</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">STY</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">LDY</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">STY</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">STY</span> <span class="token hexnumber string">$A000</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
ChangeCHRBanks_FME<span class="token decimalnumber string">7</span>_Loop:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> SpriteCHR<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> ChangeCHRBanks_FME<span class="token decimalnumber string">7</span>_Loop

	<span class="token opcode property">RTS</span>

ELSEIF INES_MAPPER == MAPPER_MMC<span class="token decimalnumber string">5</span>
RESET_MMC<span class="token decimalnumber string">5</span>:&nbsp;</code></pre><aside><p>Set PRG mode 3 and CHR mode 3</p>
&nbsp;</aside><pre><a name="l2711" href="#l2711" title="Link to line 2711">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5100</span> <span class="token comment">; PRG mode</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5101</span> <span class="token comment">; CHR mode</span>
&nbsp;</code></pre><aside><p>Enable PRG RAM writing</p>
&nbsp;</aside><pre><a name="l2716" href="#l2716" title="Link to line 2716">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5102</span> <span class="token comment">; PRG RAM Protect 1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5103</span> <span class="token comment">; PRG RAM Protect 2</span>
&nbsp;</code></pre><aside><p>Set nametable mapping</p>
&nbsp;</aside><pre><a name="l2722" href="#l2722" title="Link to line 2722">#</a><code>	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%01010000</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5105</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5113</span> <span class="token comment">; PRG RAM bank</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5130</span> <span class="token comment">; Upper CHR Bank bits</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5015</span>
&nbsp;</code></pre><aside><p>PRG bank 0</p>
&nbsp;</aside><pre><a name="l2733" href="#l2733" title="Link to line 2733">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span> <span class="token comment">; ROM bank 0</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5114</span>
&nbsp;</code></pre><aside><p>PRG bank 1</p>
&nbsp;</aside><pre><a name="l2737" href="#l2737" title="Link to line 2737">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$81</span> <span class="token comment">; ROM bank 1</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5115</span>
&nbsp;</code></pre><aside><p>PRG bank 2</p>
&nbsp;</aside><pre><a name="l2741" href="#l2741" title="Link to line 2741">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$8E</span> <span class="token comment">; ROM bank E</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5116</span>
&nbsp;</code></pre><aside><p>PRG bank 3</p>
&nbsp;</aside><pre><a name="l2745" href="#l2745" title="Link to line 2745">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$8F</span> <span class="token comment">; ROM bank F</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5117</span>

	<span class="token opcode property">JMP</span> RESET


ChangeCHRBanks_MMC<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> SpriteCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5120</span>

	<span class="token opcode property">LDA</span> SpriteCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5121</span>

	<span class="token opcode property">LDA</span> SpriteCHR<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5122</span>

	<span class="token opcode property">LDA</span> SpriteCHR<span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5123</span>

	<span class="token opcode property">LDA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5124</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5125</span>

	<span class="token opcode property">LDA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5126</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5127</span>

	<span class="token opcode property">LDA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5128</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5129</span>

	<span class="token opcode property">LDA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$512A</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$512B</span>

	<span class="token opcode property">RTS</span>
ENDIF
&nbsp;</code></pre><aside><p>Unused space in the original ($ED4D - $EFFF)</p>
&nbsp;</aside><pre><a name="l2788" href="#l2788" title="Link to line 2788">#</a><code>unusedSpace <span class="token hexnumber string">$F000</span>, <span class="token hexnumber string">$FF</span>

&nbsp;</code></pre><aside><p>these seem like they might be pointers, not actual values?</p>
&nbsp;</aside><pre><a name="l2792" href="#l2792" title="Link to line 2792">#</a><code>byte_BANKF_F<span class="token decimalnumber string">000</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; 0x0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; ??</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; ??</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; ??</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span> <span class="token comment">; most 16x16 items, clips in 1px</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span> <span class="token comment">; most 16x16 enemies, clips in 4px</span>
byte_BANKF_F<span class="token decimalnumber string">006</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$29</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2B</span>
byte_BANKF_F<span class="token decimalnumber string">00</span><span class="token register variable">A</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2C</span>
byte_BANKF_F<span class="token decimalnumber string">00</span>B:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; 16x32 enemies, clips in 4px (birdo, mouser)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$34</span> <span class="token comment">; bullet, clips in 8px</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span> <span class="token comment">; 16x48 enemies, clips in 4px (tryclde)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3C</span> <span class="token comment">; spark, clips in 0px</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span> <span class="token comment">; flying carpet</span>
&nbsp;</code></pre><aside><p>collision x bounding box</p>
&nbsp;</aside><pre><a name="l2815" href="#l2815" title="Link to line 2815">#</a><code>byte_BANKF_F<span class="token decimalnumber string">011</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$0E</span>,<span class="token hexnumber string">$0E</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$0E</span>,<span class="token hexnumber string">$0E</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$0E</span>,<span class="token hexnumber string">$0E</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$09</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$0E</span>,<span class="token hexnumber string">$0E</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$0C</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$18</span>,<span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$18</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$0C</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$05</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$0C</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$10</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$1E</span> <span class="token comment">; $40</span>
&nbsp;</code></pre><aside><p>collision y bounding box</p>
&nbsp;</aside><pre><a name="l2835" href="#l2835" title="Link to line 2835">#</a><code>byte_BANKF_F<span class="token decimalnumber string">055</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$1C</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$1C</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$1C</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$1C</span>,<span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$1C</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$09</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$09</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>,<span class="token hexnumber string">$14</span>,<span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$20</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$10</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$0A</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$18</span>,<span class="token hexnumber string">$18</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$0A</span>,<span class="token hexnumber string">$08</span>,<span class="token hexnumber string">$08</span> <span class="token comment">; $40</span>
&nbsp;</code></pre><aside><p>object collision bounding box</p>
&nbsp;</aside><pre><a name="l2855" href="#l2855" title="Link to line 2855">#</a><code>byte_BANKF_F<span class="token decimalnumber string">099</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$00</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$00</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$F3</span>,<span class="token hexnumber string">$04</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$F2</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$00</span> <span class="token comment">; $14, shy guy y?</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$00</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F6</span>,<span class="token hexnumber string">$0C</span>,<span class="token hexnumber string">$02</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span>,<span class="token hexnumber string">$0B</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$10</span> <span class="token comment">; $28, shy guy x?</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$20</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$1E</span>,<span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$08</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$18</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$1A</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$15</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$10</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1A</span>,<span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$10</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$2D</span>,<span class="token hexnumber string">$30</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$2E</span>,<span class="token hexnumber string">$3E</span>,<span class="token hexnumber string">$1E</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>,<span class="token hexnumber string">$13</span>,<span class="token hexnumber string">$48</span>,<span class="token hexnumber string">$26</span> <span class="token comment">; $4C</span>


NextSpriteFlickerSlot:
	<span class="token opcode property">DEC</span> SpriteFlickerSlot
	<span class="token opcode property">BPL</span> NextSpriteFlickerSlot_Exit

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteFlickerSlot

NextSpriteFlickerSlot_Exit:
	<span class="token opcode property">RTS</span>


LevelMusicIndexes:
	<span class="token directive keyword">.db</span> Music<span class="token decimalnumber string">1</span>_Overworld
	<span class="token directive keyword">.db</span> Music<span class="token decimalnumber string">1</span>_Inside <span class="token comment">; 1 ; Music1 indexes.</span>
	<span class="token directive keyword">.db</span> Music<span class="token decimalnumber string">1</span>_Boss <span class="token comment">; 2</span>
	<span class="token directive keyword">.db</span> Music<span class="token decimalnumber string">1</span>_Wart <span class="token comment">; 3</span>
	<span class="token directive keyword">.db</span> Music<span class="token decimalnumber string">1</span>_Subspace <span class="token comment">; 4</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2898" href="#l2898" title="Link to line 2898">#</a><code>sub_BANKF_F<span class="token decimalnumber string">0</span>F<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">JSR</span> NextSpriteFlickerSlot

	<span class="token opcode property">LDA</span> PlayerInRocket
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">11</span>B
&nbsp;</code></pre><aside><p>boss clear fanfare locks player movement</p>
&nbsp;</aside><pre><a name="l2906" href="#l2906" title="Link to line 2906">#</a><code>	<span class="token opcode property">LDA</span> MusicPlaying<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> #Music<span class="token decimalnumber string">2</span>_BossClearFanfare
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">115</span>

	<span class="token opcode property">LDA</span> PlayerLock
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">115</span>

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> HandlePlayerState

loc_BANKF_F<span class="token decimalnumber string">115</span>:
	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">228</span>

	<span class="token opcode property">JSR</span> RenderPlayer

loc_BANKF_F<span class="token decimalnumber string">11</span>B:
	<span class="token opcode property">JMP</span> loc_BANKF_F<span class="token decimalnumber string">146</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_F0F9</p>
&nbsp;</aside><pre><a name="l2927" href="#l2927" title="Link to line 2927">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2929" href="#l2929" title="Link to line 2929">#</a><code>sub_BANKF_F<span class="token decimalnumber string">11</span>E:
	<span class="token opcode property">JSR</span> NextSpriteFlickerSlot

	<span class="token opcode property">LDA</span> PlayerInRocket
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">146</span>

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank
&nbsp;</code></pre><aside><p>boss clear fanfare locks player movement</p>
&nbsp;</aside><pre><a name="l2940" href="#l2940" title="Link to line 2940">#</a><code>	<span class="token opcode property">LDA</span> MusicPlaying<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> #Music<span class="token decimalnumber string">2</span>_BossClearFanfare
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">13</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> PlayerLock
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">13</span><span class="token register variable">A</span>

	<span class="token opcode property">JSR</span> HandlePlayerState

loc_BANKF_F<span class="token decimalnumber string">13</span><span class="token register variable">A</span>:&nbsp;</code></pre><aside><p>horizonal scrolling?</p>
&nbsp;</aside><pre><a name="l2951" href="#l2951" title="Link to line 2951">#</a><code>	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">2</span>C<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p>horizonal scrolling?</p>
&nbsp;</aside><pre><a name="l2954" href="#l2954" title="Link to line 2954">#</a><code>	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>EC
&nbsp;</code></pre><aside><p>screen boundary triggers</p>
&nbsp;</aside><pre><a name="l2957" href="#l2957" title="Link to line 2957">#</a><code>	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">228</span>

	<span class="token opcode property">JSR</span> RenderPlayer

loc_BANKF_F<span class="token decimalnumber string">146</span>:
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> AreaMainRoutine

	<span class="token opcode property">JSR</span> AreaSecondaryRoutine

IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">JSR</span> AreaDebugRoutine
ENDIF

	<span class="token opcode property">JSR</span> AnimateCHRRoutine

	<span class="token opcode property">JSR</span> SetAreaStartPage

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$03</span>

loc_BANKF_F<span class="token decimalnumber string">159</span>:
	<span class="token opcode property">LDA</span> PlayerStateTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">15</span>F

	<span class="token opcode property">DEC</span> PlayerStateTimer, <span class="token register variable">X</span>

loc_BANKF_F<span class="token decimalnumber string">15</span>F:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANKF_F<span class="token decimalnumber string">159</span>

	<span class="token opcode property">LDY</span> StarInvincibilityTimer
	<span class="token opcode property">BEQ</span> locret_BANKF_F<span class="token decimalnumber string">17</span>D

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BNE</span> locret_BANKF_F<span class="token decimalnumber string">17</span>D

	<span class="token opcode property">DEC</span> StarInvincibilityTimer
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> locret_BANKF_F<span class="token decimalnumber string">17</span>D

	<span class="token opcode property">LDY</span> CurrentMusicIndex
	<span class="token opcode property">LDA</span> LevelMusicIndexes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>

locret_BANKF_F<span class="token decimalnumber string">17</span>D:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_F11E</p>
&nbsp;</aside><pre><a name="l3008" href="#l3008" title="Link to line 3008">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3010" href="#l3010" title="Link to line 3010">#</a><code>sub_BANKF_F<span class="token decimalnumber string">17</span>E:
	<span class="token opcode property">JSR</span> NextSpriteFlickerSlot

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">494</span>

	<span class="token opcode property">LDA</span> PlayerInRocket
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">1</span>AB
&nbsp;</code></pre><aside><p>boss clear fanfare locks player movement</p>
&nbsp;</aside><pre><a name="l3020" href="#l3020" title="Link to line 3020">#</a><code>	<span class="token opcode property">LDA</span> MusicPlaying<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> #Music<span class="token decimalnumber string">2</span>_BossClearFanfare
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">19</span>D

	<span class="token opcode property">LDA</span> PlayerLock
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">19</span>D

	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> HandlePlayerState

loc_BANKF_F<span class="token decimalnumber string">19</span>D:
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8083</span>

	<span class="token opcode property">JSR</span> sub_BANKF_F<span class="token decimalnumber string">228</span>

	<span class="token opcode property">JSR</span> RenderPlayer

loc_BANKF_F<span class="token decimalnumber string">1</span>AB:
	<span class="token opcode property">JMP</span> loc_BANKF_F<span class="token decimalnumber string">146</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_F17E</p>
&nbsp;</aside><pre><a name="l3046" href="#l3046" title="Link to line 3046">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3048" href="#l3048" title="Link to line 3048">#</a><code>sub_BANKF_F<span class="token decimalnumber string">1</span>AE:
	<span class="token opcode property">LDA</span> DoAreaTransition
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> locret_BANKF_F<span class="token decimalnumber string">1</span>E<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>

loc_BANKF_F<span class="token decimalnumber string">1</span>B<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> CurrentLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentLevel_Init, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANKF_F<span class="token decimalnumber string">1</span>B<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">STA</span> PlayerXLo_Init
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">STA</span> PlayerYLo_Init
	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">STA</span> PlayerScreenX_Init
	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">STA</span> PlayerScreenYLo_Init
	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">STA</span> PlayerYVelocity_Init
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">STA</span> PlayerState_Init

locret_BANKF_F<span class="token decimalnumber string">1</span>E<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_F1AE</p>
&nbsp;</aside><pre><a name="l3079" href="#l3079" title="Link to line 3079">#</a><code>&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3081" href="#l3081" title="Link to line 3081">#</a><code>&nbsp;</code></pre><aside><h1>Level Initialization</h1>
<p>Sets up in-level gameplay (eg. after level card)</p>
&nbsp;</aside><pre><a name="l3088" href="#l3088" title="Link to line 3088">#</a><code>LevelInitialization:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
&nbsp;</code></pre><aside><p>Loop through and set level, area, page, and transition from RAM</p>
&nbsp;</aside><pre><a name="l3092" href="#l3092" title="Link to line 3092">#</a><code>LevelInitialization_AreaSetupLoop:
	<span class="token opcode property">LDA</span> CurrentLevel_Init, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentLevel, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> LevelInitialization_AreaSetupLoop
&nbsp;</code></pre><aside><p>position the player</p>
&nbsp;</aside><pre><a name="l3099" href="#l3099" title="Link to line 3099">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo_Init
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> PlayerYLo_Init
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">LDA</span> PlayerScreenX_Init
	<span class="token opcode property">STA</span> PlayerScreenX
	<span class="token opcode property">LDA</span> PlayerScreenYLo_Init
	<span class="token opcode property">STA</span> PlayerScreenYLo
	<span class="token opcode property">LDA</span> PlayerYVelocity_Init
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> PlayerState_Init
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> InSubspaceOrJar
	<span class="token opcode property">STA</span> InJarType
	<span class="token opcode property">STA</span> PlayerInAir
	<span class="token opcode property">STA</span> DamageInvulnTime


RestorePlayerToFullHealth:
	<span class="token opcode property">LDY</span> PlayerMaxHealth <span class="token comment">; Get player's current max HP</span>
	<span class="token opcode property">LDA</span> PlayerHealthValueByHeartCount, <span class="token register variable">Y</span> <span class="token comment">; Get the health value for this amount of hearts</span>
	<span class="token opcode property">STA</span> PlayerHealth
	<span class="token opcode property">RTS</span>


PlayerHealthValueByHeartCount:
	<span class="token directive keyword">.db</span> PlayerHealth_<span class="token decimalnumber string">2</span>_HP
	<span class="token directive keyword">.db</span> PlayerHealth_<span class="token decimalnumber string">3</span>_HP
	<span class="token directive keyword">.db</span> PlayerHealth_<span class="token decimalnumber string">4</span>_HP
&nbsp;</code></pre><aside><p>Max hearts = (hearts - 2), value is 0,$01,2
This table determines what the player's HP is set to</p>
&nbsp;</aside><pre><a name="l3131" href="#l3131" title="Link to line 3131">#</a><code>ClimbSpeed:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
ClimbSpeedDown:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
ClimbSpeedUp:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>&nbsp;</code></pre><aside><p>Bug: The climb speed index is determined by checking the up/down flags in
Player1JoypadHeld. If both are enabled, the index it out of bounds and uses
the LDA ($A5) below, which zips the player up the vine!</p>
&nbsp;</aside><pre><a name="l3141" href="#l3141" title="Link to line 3141">#</a><code>IFDEF FIX_CLIMB_ZIP
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
ENDIF
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3146" href="#l3146" title="Link to line 3146">#</a><code>&nbsp;</code></pre><aside><p>Bottomless pit check</p>
&nbsp;</aside><pre><a name="l3148" href="#l3148" title="Link to line 3148">#</a><code>sub_BANKF_F<span class="token decimalnumber string">228</span>:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftLo
	<span class="token opcode property">STA</span> PlayerScreenX
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">SBC</span> ScreenYLo
	<span class="token opcode property">STA</span> PlayerScreenYLo
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">SBC</span> ScreenYHi
	<span class="token opcode property">STA</span> PlayerScreenYHi
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_Lifting
	<span class="token opcode property">BCS</span> locret_BANKF_F<span class="token decimalnumber string">297</span>

	<span class="token opcode property">LDA</span> PlayerScreenYHi
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">298</span>

	<span class="token opcode property">BMI</span> loc_BANKF_F<span class="token decimalnumber string">254</span>
&nbsp;</code></pre><aside><p>bottomless pit</p>
&nbsp;</aside><pre><a name="l3170" href="#l3170" title="Link to line 3170">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">JMP</span> KillPlayer

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3175" href="#l3175" title="Link to line 3175">#</a><code>loc_BANKF_F<span class="token decimalnumber string">254</span>:
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">BPL</span> locret_BANKF_F<span class="token decimalnumber string">297</span>

	<span class="token opcode property">LDA</span> InJarType
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">298</span>

	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCS</span> locret_BANKF_F<span class="token decimalnumber string">297</span>

	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STY</span> PlayerDucking
	<span class="token opcode property">STY</span> PlayerYVelocity
	<span class="token opcode property">STY</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> #PlayerState_ExitingJar
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> #SpriteAnimation_Ducking
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> InJarType
	<span class="token opcode property">STY</span> InJarType
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">286</span>

	<span class="token opcode property">STA</span> DoAreaTransition
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3208" href="#l3208" title="Link to line 3208">#</a><code>loc_BANKF_F<span class="token decimalnumber string">286</span>:
	<span class="token opcode property">STY</span> InSubspaceOrJar
	<span class="token opcode property">LDA</span> CurrentLevelAreaCopy
	<span class="token opcode property">STA</span> CurrentLevelArea
	<span class="token opcode property">LDA</span> #PRGBank_<span class="token decimalnumber string">8</span>_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">JSR</span> ChangeMappedPRGBank

	<span class="token opcode property">JMP</span> CopyEnemyDataToMemory

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3219" href="#l3219" title="Link to line 3219">#</a><code>locret_BANKF_F<span class="token decimalnumber string">297</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3224" href="#l3224" title="Link to line 3224">#</a><code>loc_BANKF_F<span class="token decimalnumber string">298</span>:
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_Climbing
	<span class="token opcode property">BNE</span> locret_BANKF_F<span class="token decimalnumber string">297</span>

	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> locret_BANKF_F<span class="token decimalnumber string">297</span>

	<span class="token opcode property">LDA</span> ClimbSpeedUp
	<span class="token opcode property">LDY</span> PlayerYHi
	<span class="token opcode property">BMI</span> loc_BANKF_F<span class="token decimalnumber string">2</span>BB

	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$B8</span>
	<span class="token opcode property">BCC</span> locret_BANKF_F<span class="token decimalnumber string">297</span>

	<span class="token opcode property">LSR</span> PlayerYLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">ROL</span> PlayerYLo
	<span class="token opcode property">LDA</span> ClimbSpeedDown

loc_BANKF_F<span class="token decimalnumber string">2</span>BB:
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> #PlayerState_ClimbingAreaTransition
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_F228</p>
&nbsp;</aside><pre><a name="l3254" href="#l3254" title="Link to line 3254">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3256" href="#l3256" title="Link to line 3256">#</a><code>sub_BANKF_F<span class="token decimalnumber string">2</span>C<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> ScrollXLock
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">2</span>D<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftLo

loc_BANKF_F<span class="token decimalnumber string">2</span>D<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">STA</span> byte_RAM_BA
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANKF_F2C2</p>
&nbsp;</aside><pre><a name="l3273" href="#l3273" title="Link to line 3273">#</a><code>&nbsp;</code></pre><aside><p>Tiles to use for eye sprite. If $00, this will use the character-specific table</p>
&nbsp;</aside><pre><a name="l3276" href="#l3276" title="Link to line 3276">#</a><code>CharacterFrameEyeTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Walk1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Carry1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Walk2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Carry2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; Duck</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; DuckCarry</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Jump</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; Death</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; Lift</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Throw</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; Climb</span>
&nbsp;</code></pre><aside><p>Specific to each character</p>
&nbsp;</aside><pre><a name="l3290" href="#l3290" title="Link to line 3290">#</a><code>CharacterEyeTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D5</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D9</span> <span class="token comment">; Luigi</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D7</span> <span class="token comment">; Princess</span>

CharacterTiles_Walk<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $00 - start of relative character tile offets, for some reason</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span> <span class="token comment">; $01</span>

CharacterTiles_Carry<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; $03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; $05</span>

CharacterTiles_Walk<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $07</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span> <span class="token comment">; $09</span>

CharacterTiles_Carry<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $0a</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; $0b</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span> <span class="token comment">; $0c</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$16</span> <span class="token comment">; $0d</span>

CharacterTiles_Duck:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; $0e</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; $0f</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2C</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2C</span> <span class="token comment">; $11</span>

CharacterTiles_DuckCarry:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; $12</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; $13</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2E</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2E</span> <span class="token comment">; $15</span>

CharacterTiles_Jump:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $16</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; $17</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; $19</span>

CharacterTiles_Death:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; $1a</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; $1b</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$32</span> <span class="token comment">; $1c</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$32</span> <span class="token comment">; $1d</span>

CharacterTiles_Lift:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span> <span class="token comment">; $1e</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span> <span class="token comment">; $1f</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span> <span class="token comment">; $21</span>

CharacterTiles_Throw:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $22</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $23</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2A</span> <span class="token comment">; $25</span>

CharacterTiles_Climb:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; $26</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1A</span> <span class="token comment">; $27</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1E</span> <span class="token comment">; $29</span>

CharacterTiles_PrincessJumpBody:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B4</span> <span class="token comment">; $2a</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B6</span> <span class="token comment">; $2b</span>

DamageInvulnBlinkFrames:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$04</span>

IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
ChangePlayerPoofTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$36</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$34</span>
ENDIF
&nbsp;</code></pre><aside><p>Renders the player sprite</p>
&nbsp;</aside><pre><a name="l3385" href="#l3385" title="Link to line 3385">#</a><code>RenderPlayer:
IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">LDA</span> ChangeCharacterPoofTimer
	<span class="token opcode property">BEQ</span> RenderPlayer_AfterChangeCharacterPoof

	<span class="token opcode property">DEC</span> ChangeCharacterPoofTimer
&nbsp;</code></pre><aside><p>tile</p>
&nbsp;</aside><pre><a name="l3393" href="#l3393" title="Link to line 3393">#</a><code>	<span class="token opcode property">LDY</span> ChangeCharacterPoofTimer
	<span class="token opcode property">LDA</span> ChangePlayerPoofTiles, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$01</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$05</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$09</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0D</span>
&nbsp;</code></pre><aside><p>attributes</p>
&nbsp;</aside><pre><a name="l3401" href="#l3401" title="Link to line 3401">#</a><code>	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$02</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0A</span>
	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$06</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0E</span>
&nbsp;</code></pre><aside><p>y-position</p>
&nbsp;</aside><pre><a name="l3409" href="#l3409" title="Link to line 3409">#</a><code>	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$00</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0C</span>
&nbsp;</code></pre><aside><p>x-position</p>
&nbsp;</aside><pre><a name="l3418" href="#l3418" title="Link to line 3418">#</a><code>	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$03</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0B</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$07</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0F</span>

RenderPlayer_AfterChangeCharacterPoof:
ENDIF

	LDY_abs PlayerState
	<span class="token opcode property">CPY</span> #PlayerState_ChangingSize
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">337</span>

	<span class="token opcode property">LDY</span> StarInvincibilityTimer
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">337</span>

	<span class="token opcode property">LDA</span> DamageInvulnTime <span class="token comment">; Determine if the player is invincible from damage,</span>&nbsp;</code></pre><aside><p>and if so, if they should be visible</p>
&nbsp;</aside><pre><a name="l3438" href="#l3438" title="Link to line 3438">#</a><code>	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">345</span>

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> DamageInvulnTime
	<span class="token opcode property">AND</span> DamageInvulnBlinkFrames, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">345</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3452" href="#l3452" title="Link to line 3452">#</a><code>loc_BANKF_F<span class="token decimalnumber string">337</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">BCS</span> loc_BANKF_F<span class="token decimalnumber string">33</span>F

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>

loc_BANKF_F<span class="token decimalnumber string">33</span>F:
	<span class="token opcode property">AND</span> #ObjAttrib_Palette
	<span class="token opcode property">ORA</span> PlayerAttributes
	<span class="token opcode property">STA</span> PlayerAttributes

loc_BANKF_F<span class="token decimalnumber string">345</span>:
	<span class="token opcode property">LDA</span> QuicksandDepth
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">350</span>

	<span class="token opcode property">LDA</span> #ObjAttrib_BehindBackground
	<span class="token opcode property">ORA</span> PlayerAttributes
	<span class="token opcode property">STA</span> PlayerAttributes

loc_BANKF_F<span class="token decimalnumber string">350</span>:
	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$23</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2B</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$27</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2F</span>
	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> PlayerScreenYHi
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> PlayerAnimationFrame
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">382</span>

	<span class="token opcode property">LDA</span> PlayerCurrentSize
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">382</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BCC</span> loc_BANKF_F<span class="token decimalnumber string">382</span>

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANKF_F<span class="token decimalnumber string">382</span>:
	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">CMP</span> #Character_Princess
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">394</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">394</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">392</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANKF_F<span class="token decimalnumber string">392</span>:
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANKF_F<span class="token decimalnumber string">394</span>:
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">3</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$20</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$24</span>

loc_BANKF_F<span class="token decimalnumber string">3</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">3</span>BB

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$28</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2C</span>

loc_BANKF_F<span class="token decimalnumber string">3</span>BB:
	<span class="token opcode property">LDA</span> CrouchJumpTimer
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">BCC</span> loc_BANKF_F<span class="token decimalnumber string">3</span>CA

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ORA</span> PlayerAttributes
	<span class="token opcode property">STA</span> PlayerAttributes

loc_BANKF_F<span class="token decimalnumber string">3</span>CA:
	<span class="token opcode property">LDA</span> PlayerDirection
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> PlayerAttributes
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%11111100</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> PlayerAnimationFrame
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">3</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">3</span>EE

loc_BANKF_F<span class="token decimalnumber string">3</span>E<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> PlayerAttributes
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$22</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2A</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">3</span>F<span class="token decimalnumber string">8</span>

loc_BANKF_F<span class="token decimalnumber string">3</span>EE:
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">ORA</span> PlayerAttributes
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$22</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2A</span>

loc_BANKF_F<span class="token decimalnumber string">3</span>F<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$26</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2E</span>
	<span class="token opcode property">LDA</span> CharacterFrameEyeTiles, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">408</span>

	<span class="token opcode property">LDX</span> CurrentCharacter
	<span class="token opcode property">LDA</span> CharacterEyeTiles, <span class="token register variable">X</span>

loc_BANKF_F<span class="token decimalnumber string">408</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> PlayerAnimationFrame
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BCS</span> loc_BANKF_F<span class="token decimalnumber string">413</span>

	<span class="token opcode property">ORA</span> HoldingItem

loc_BANKF_F<span class="token decimalnumber string">413</span>:
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> PlayerDirection
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">44</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$23</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$21</span>
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$25</span>
	<span class="token opcode property">LDA</span> PlayerCurrentSize
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">43</span>F

	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">CMP</span> #Character_Princess
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">43</span>F

	<span class="token opcode property">LDA</span> PlayerAnimationFrame
	<span class="token opcode property">CMP</span> #SpriteAnimation_Jumping
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">43</span>F

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$2A</span>

loc_BANKF_F<span class="token decimalnumber string">43</span>F:
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$29</span>
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">478</span>

loc_BANKF_F<span class="token decimalnumber string">44</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$27</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$21</span>
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$25</span>
	<span class="token opcode property">LDA</span> PlayerCurrentSize
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">46</span>F

	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">CMP</span> #Character_Princess
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">46</span>F

	<span class="token opcode property">LDA</span> PlayerAnimationFrame
	<span class="token opcode property">CMP</span> #SpriteAnimation_Jumping
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">46</span>F

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$2A</span>

loc_BANKF_F<span class="token decimalnumber string">46</span>F:
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$29</span>
	<span class="token opcode property">LDA</span> CharacterTiles_Walk<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>

loc_BANKF_F<span class="token decimalnumber string">478</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$2D</span>
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3660" href="#l3660" title="Link to line 3660">#</a><code>SetAreaStartPage:
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> SetAreaStartPage_HorizontalLevel

	<span class="token opcode property">LDY</span> PlayerYHi
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">JSR</span> GetVerticalAreaStartPage

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BPL</span> SetAreaStartPage_SetAndExit
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> SetAreaStartPage_SetAndExit

SetAreaStartPage_HorizontalLevel:
	<span class="token opcode property">LDA</span> PlayerXHi

SetAreaStartPage_SetAndExit:
	<span class="token opcode property">STA</span> CurrentLevelPage
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function SetAreaStartPage</p>
&nbsp;</aside><pre><a name="l3682" href="#l3682" title="Link to line 3682">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3684" href="#l3684" title="Link to line 3684">#</a><code>sub_BANKF_F<span class="token decimalnumber string">494</span>:
	<span class="token opcode property">LDX</span> NeedVerticalScroll
	<span class="token opcode property">BNE</span> locret_BANKF_F<span class="token decimalnumber string">4</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_Lifting
	<span class="token opcode property">BCS</span> locret_BANKF_F<span class="token decimalnumber string">4</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">LDY</span> PlayerScreenYHi
	<span class="token opcode property">BMI</span> loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">0</span>

	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">6</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$B4</span>
	<span class="token opcode property">BCS</span> loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">6</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">BCS</span> loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">8</span>

loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDY</span> PlayerInAir
	<span class="token opcode property">BNE</span> loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">8</span>

	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">7</span>

loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">INX</span>

loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">INX</span>

loc_BANKF_F<span class="token decimalnumber string">4</span>B<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> VerticalScrollDirection
	<span class="token opcode property">STX</span> VerticalScrollDirection
	<span class="token opcode property">BNE</span> locret_BANKF_F<span class="token decimalnumber string">4</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">STX</span> NeedVerticalScroll

locret_BANKF_F<span class="token decimalnumber string">4</span>C<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANKF_F494</p>
&nbsp;</aside><pre><a name="l3728" href="#l3728" title="Link to line 3728">#</a><code>&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3730" href="#l3730" title="Link to line 3730">#</a><code>&nbsp;</code></pre><aside><p>Determines start page for vertical area</p>
&nbsp;</aside><pre><a name="l3732" href="#l3732" title="Link to line 3732">#</a><code>GetVerticalAreaStartPage:
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BMI</span> locret_BANKF_F<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">9</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_F
	<span class="token opcode property">BCS</span> loc_BANKF_F<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">5</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCC</span> locret_BANKF_F<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">9</span>

loc_BANKF_F<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">INY</span>

locret_BANKF_F<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>End of function GetVerticalAreaStartPage</p>
&nbsp;</aside><pre><a name="l3757" href="#l3757" title="Link to line 3757">#</a><code>SpriteFlickerDMAOffset:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$60</span>
&nbsp;</code></pre><aside><p>Sprite display configuration</p>
&nbsp;</aside><pre><a name="l3779" href="#l3779" title="Link to line 3779">#</a><code>ObjectAttributeTable:
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $00 Enemy_Heart</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $01 Enemy_ShyguyRed</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $02 Enemy_Tweeter</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">3</span> <span class="token comment">; $03 Enemy_ShyguyPink</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> <span class="token comment">; $04 Enemy_Porcupo</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $05 Enemy_SnifitRed</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> <span class="token comment">; $06 Enemy_SnifitGray</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">3</span> <span class="token comment">; $07 Enemy_SnifitPink</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $08 Enemy_Ostro</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $09 Enemy_BobOmb</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $0A Enemy_AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $0B Enemy_AlbatossStartRight</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $0C Enemy_AlbatossStartLeft</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $0D Enemy_NinjiRunning</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $0E Enemy_NinjiJumping</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $0F Enemy_BeezoDiving</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> <span class="token comment">; $10 Enemy_BeezoStraight</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $11 Enemy_WartBubble</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_FrontFacing <span class="token comment">; $12 Enemy_Pidgit</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $13 Enemy_Trouter</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $14 Enemy_Hoopstar</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">0</span> <span class="token comment">; $15 Enemy_JarGeneratorShyguy</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">0</span> <span class="token comment">; $16 Enemy_JarGeneratorBobOmb</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $17 Enemy_Phanto</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_UpsideDown <span class="token comment">; $18 Enemy_CobratJar</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $19 Enemy_CobratSand</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_FrontFacing <span class="token comment">; $1A Enemy_Pokey</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_FrontFacing <span class="token comment">; $1B Enemy_Bullet</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $1C Enemy_Birdo</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">3</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $1D Enemy_Mouser</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $1E Enemy_Egg</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_FrontFacing <span class="token comment">; $1F Enemy_Tryclyde</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $20 Enemy_Fireball</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $21 Enemy_Clawgrip</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> <span class="token comment">; $22 Enemy_ClawgripRock</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $23 Enemy_PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">3</span> <span class="token comment">; $24 Enemy_PanserWalking</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> <span class="token comment">; $25 Enemy_PanserStationaryFiresUp</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $26 Enemy_Autobomb</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $27 Enemy_AutobombFire</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $28 Enemy_WhaleSpout</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $29 Enemy_Flurry</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $2A Enemy_Fryguy</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> <span class="token comment">; $2B Enemy_FryguySplit</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">3</span> | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $2C Enemy_Wart</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $2D Enemy_HawkmouthBoss</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $2E Enemy_Spark1</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $2F Enemy_Spark2</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $30 Enemy_Spark3</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $31 Enemy_Spark4</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored | ObjAttrib_UpsideDown <span class="token comment">; $32 Enemy_VegetableSmall</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored | ObjAttrib_UpsideDown <span class="token comment">; $33 Enemy_VegetableLarge</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_Mirrored | ObjAttrib_UpsideDown <span class="token comment">; $34 Enemy_VegetableWart</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored | ObjAttrib_UpsideDown <span class="token comment">; $35 Enemy_Shell</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored | ObjAttrib_UpsideDown <span class="token comment">; $36 Enemy_Coin</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_UpsideDown <span class="token comment">; $37 Enemy_Bomb</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_UpsideDown <span class="token comment">; $38 Enemy_Rocket</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $39 Enemy_MushroomBlock</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing | ObjAttrib_UpsideDown <span class="token comment">; $3A Enemy_POWBlock</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $3B Enemy_FallingLogs</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $3C Enemy_SubspaceDoor</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing <span class="token comment">; $3D Enemy_Key</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing | ObjAttrib_UpsideDown <span class="token comment">; $3E Enemy_SubspacePotion</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $3F Enemy_Mushroom</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing | ObjAttrib_UpsideDown <span class="token comment">; $40 Enemy_Mushroom1up</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $41 Enemy_FlyingCarpet</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $42 Enemy_HawkmouthRight</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> <span class="token comment">; $43 Enemy_HawkmouthLeft</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Mirrored <span class="token comment">; $44 Enemy_CrystalBall</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_Mirrored <span class="token comment">; $45 Enemy_Starman</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_Mirrored | ObjAttrib_UpsideDown <span class="token comment">; $46 Enemy_Stopwatch</span>
&nbsp;</code></pre><aside><p>Enemy Behavior 46E</p>
<p>bit 7 ($80) - uses mirrored sprite for animation
bit 6 ($40) - double speed
bit 5 ($20) - wider sprite? used for mouser
bit 4 ($10) - use tilemap 2
bit 3 ($08) - squawk on death (prevents despawning offscreen?)
bit 2 ($04) - disable collision with other enemies
bit 1 ($02) - unliftable
bit 0 ($01) - hurts when touched from above</p>
&nbsp;</aside><pre><a name="l3863" href="#l3863" title="Link to line 3863">#</a><code>EnemyArray_<span class="token decimalnumber string">46</span>E_Data:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $00 Enemy_Heart</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $01 Enemy_ShyguyRed</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $02 Enemy_Tweeter</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $03 Enemy_ShyguyPink</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000011</span> <span class="token comment">; $04 Enemy_Porcupo</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $05 Enemy_SnifitRed</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $06 Enemy_SnifitGray</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $07 Enemy_SnifitPink</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01010000</span> <span class="token comment">; $08 Enemy_Ostro</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000000</span> <span class="token comment">; $09 Enemy_BobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000010</span> <span class="token comment">; $0A Enemy_AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000010</span> <span class="token comment">; $0B Enemy_AlbatossStartRight</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000010</span> <span class="token comment">; $0C Enemy_AlbatossStartLeft</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000000</span> <span class="token comment">; $0D Enemy_NinjiRunning</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000000</span> <span class="token comment">; $0E Enemy_NinjiJumping</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000000</span> <span class="token comment">; $0F Enemy_BeezoDiving</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000000</span> <span class="token comment">; $10 Enemy_BeezoStraight</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00010011</span> <span class="token comment">; $11 Enemy_WartBubble</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11010000</span> <span class="token comment">; $12 Enemy_Pidgit</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000000</span> <span class="token comment">; $13 Enemy_Trouter</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $14 Enemy_Hoopstar</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000110</span> <span class="token comment">; $15 Enemy_JarGeneratorShyguy</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000110</span> <span class="token comment">; $16 Enemy_JarGeneratorBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000111</span> <span class="token comment">; $17 Enemy_Phanto</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00010000</span> <span class="token comment">; $18 Enemy_CobratJar</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01010000</span> <span class="token comment">; $19 Enemy_CobratSand</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10010000</span> <span class="token comment">; $1A Enemy_Pokey</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000111</span> <span class="token comment">; $1B Enemy_Bullet</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001010</span> <span class="token comment">; $1C Enemy_Birdo</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00111011</span> <span class="token comment">; $1D Enemy_Mouser</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000000</span> <span class="token comment">; $1E Enemy_Egg</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00011000</span> <span class="token comment">; $1F Enemy_Tryclyde</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000111</span> <span class="token comment">; $20 Enemy_Fireball</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00011011</span> <span class="token comment">; $21 Enemy_Clawgrip</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00010000</span> <span class="token comment">; $22 Enemy_ClawgripRock</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000111</span> <span class="token comment">; $23 Enemy_PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000111</span> <span class="token comment">; $24 Enemy_PanserWalking</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000111</span> <span class="token comment">; $25 Enemy_PanserStationaryFiresUp</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01010000</span> <span class="token comment">; $26 Enemy_Autobomb</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01010011</span> <span class="token comment">; $27 Enemy_AutobombFire</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10010110</span> <span class="token comment">; $28 Enemy_WhaleSpout</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01010000</span> <span class="token comment">; $29 Enemy_Flurry</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10011011</span> <span class="token comment">; $2A Enemy_Fryguy</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11010011</span> <span class="token comment">; $2B Enemy_FryguySplit</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00011011</span> <span class="token comment">; $2C Enemy_Wart</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001011</span> <span class="token comment">; $2D Enemy_HawkmouthBoss</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000011</span> <span class="token comment">; $2E Enemy_Spark1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000011</span> <span class="token comment">; $2F Enemy_Spark2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000011</span> <span class="token comment">; $30 Enemy_Spark3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000011</span> <span class="token comment">; $31 Enemy_Spark4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $32 Enemy_VegetableSmall</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $33 Enemy_VegetableLarge</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $34 Enemy_VegetableWart</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $35 Enemy_Shell</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $36 Enemy_Coin</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $37 Enemy_Bomb</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $38 Enemy_Rocket</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $39 Enemy_MushroomBlock</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3A Enemy_POWBlock</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000110</span> <span class="token comment">; $3B Enemy_FallingLogs</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $3C Enemy_SubspaceDoor</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3D Enemy_Key</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $3E Enemy_SubspacePotion</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $3F Enemy_Mushroom</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $40 Enemy_Mushroom1up</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00010110</span> <span class="token comment">; $41 Enemy_FlyingCarpet</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000110</span> <span class="token comment">; $42 Enemy_HawkmouthRight</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000110</span> <span class="token comment">; $43 Enemy_HawkmouthLeft</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001100</span> <span class="token comment">; $44 Enemy_CrystalBall</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $45 Enemy_Starman</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $46 Enemy_Stopwatch</span>
&nbsp;</code></pre><aside><p>Height and horizontal collision detection</p>
&nbsp;</aside><pre><a name="l3939" href="#l3939" title="Link to line 3939">#</a><code>EnemyArray_<span class="token decimalnumber string">492</span>_Data:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $00 Enemy_Heart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $01 Enemy_ShyguyRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $02 Enemy_Tweeter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $03 Enemy_ShyguyPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $04 Enemy_Porcupo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $05 Enemy_SnifitRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $06 Enemy_SnifitGray</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $07 Enemy_SnifitPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $08 Enemy_Ostro</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $09 Enemy_BobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $0A Enemy_AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $0B Enemy_AlbatossStartRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $0C Enemy_AlbatossStartLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $0D Enemy_NinjiRunning</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $0E Enemy_NinjiJumping</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $0F Enemy_BeezoDiving</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $10 Enemy_BeezoStraight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $11 Enemy_WartBubble</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $12 Enemy_Pidgit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $13 Enemy_Trouter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $14 Enemy_Hoopstar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span> <span class="token comment">; $15 Enemy_JarGeneratorShyguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span> <span class="token comment">; $16 Enemy_JarGeneratorBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $17 Enemy_Phanto</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $18 Enemy_CobratJar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $19 Enemy_CobratSand</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $1A Enemy_Pokey</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span> <span class="token comment">; $1B Enemy_Bullet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $1C Enemy_Birdo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $1D Enemy_Mouser</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $1E Enemy_Egg</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; $1F Enemy_Tryclyde</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span> <span class="token comment">; $20 Enemy_Fireball</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $21 Enemy_Clawgrip</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $22 Enemy_ClawgripRock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $23 Enemy_PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $24 Enemy_PanserWalking</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $25 Enemy_PanserStationaryFiresUp</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $26 Enemy_Autobomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $27 Enemy_AutobombFire</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $28 Enemy_WhaleSpout</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $29 Enemy_Flurry</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $2A Enemy_Fryguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $2B Enemy_FryguySplit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $2C Enemy_Wart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2D Enemy_HawkmouthBoss</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $2E Enemy_Spark1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $2F Enemy_Spark2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $30 Enemy_Spark3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $31 Enemy_Spark4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $32 Enemy_VegetableSmall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $33 Enemy_VegetableLarge</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $34 Enemy_VegetableWart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $35 Enemy_Shell</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $36 Enemy_Coin</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $37 Enemy_Bomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $38 Enemy_Rocket</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $39 Enemy_MushroomBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3A Enemy_POWBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3B Enemy_FallingLogs</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3C Enemy_SubspaceDoor</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3D Enemy_Key</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3E Enemy_SubspacePotion</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3F Enemy_Mushroom</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $40 Enemy_Mushroom1up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $41 Enemy_FlyingCarpet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $42 Enemy_HawkmouthRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $43 Enemy_HawkmouthLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $44 Enemy_CrystalBall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $45 Enemy_Starman</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; $46 Enemy_Stopwatch</span>
&nbsp;</code></pre><aside><p>Horizontal hitbox, collision detection, and carried height</p>
&nbsp;</aside><pre><a name="l4015" href="#l4015" title="Link to line 4015">#</a><code>EnemyArray_<span class="token decimalnumber string">489</span>_Data:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; $00Enemy_Heart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $01Enemy_ShyguyRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $02Enemy_Tweeter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $03Enemy_ShyguyPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $04Enemy_Porcupo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $05Enemy_SnifitRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $06Enemy_SnifitGray</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $07Enemy_SnifitPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $08Enemy_Ostro</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $09Enemy_BobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span> <span class="token comment">; $0AEnemy_AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span> <span class="token comment">; $0BEnemy_AlbatossStartRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span> <span class="token comment">; $0CEnemy_AlbatossStartLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $0DEnemy_NinjiRunning</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $0EEnemy_NinjiJumping</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $0FEnemy_BeezoDiving</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $10Enemy_BeezoStraight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $11Enemy_WartBubble</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $12Enemy_Pidgit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $13Enemy_Trouter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $14Enemy_Hoopstar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; $15Enemy_JarGeneratorShyguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; $16Enemy_JarGeneratorBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $17Enemy_Phanto</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $18Enemy_CobratJar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $19Enemy_CobratSand</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; $1AEnemy_Pokey</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; $1BEnemy_Bullet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $1CEnemy_Birdo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $1DEnemy_Mouser</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $1EEnemy_Egg</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $1FEnemy_Tryclyde</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $20Enemy_Fireball</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span> <span class="token comment">; $21Enemy_Clawgrip</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $22Enemy_ClawgripRock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $23Enemy_PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $24Enemy_PanserWalking</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $25Enemy_PanserStationaryFiresUp</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $26Enemy_Autobomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $27Enemy_AutobombFire</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; $28Enemy_WhaleSpout</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $29Enemy_Flurry</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span> <span class="token comment">; $2AEnemy_Fryguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $2BEnemy_FryguySplit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span> <span class="token comment">; $2CEnemy_Wart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span> <span class="token comment">; $2DEnemy_HawkmouthBoss</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $2EEnemy_Spark1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $2FEnemy_Spark2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $30Enemy_Spark3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $31Enemy_Spark4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $32Enemy_VegetableSmall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $33Enemy_VegetableLarge</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $34Enemy_VegetableWart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $35Enemy_Shell</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $36Enemy_Coin</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $37Enemy_Bomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $38Enemy_Rocket</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $39Enemy_MushroomBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $3AEnemy_POWBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; $3BEnemy_FallingLogs</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3CEnemy_SubspaceDoor</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $3DEnemy_Key</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $3EEnemy_SubspacePotion</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $3FEnemy_Mushroom</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $40Enemy_Mushroom1up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span> <span class="token comment">; $41Enemy_FlyingCarpet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span> <span class="token comment">; $42Enemy_HawkmouthRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span> <span class="token comment">; $43Enemy_HawkmouthLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $44Enemy_CrystalBall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $45Enemy_Starman</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $46Enemy_Stopwatch</span>
&nbsp;</code></pre><aside><p>More collision (post-throw)</p>
&nbsp;</aside><pre><a name="l4089" href="#l4089" title="Link to line 4089">#</a><code>byte_BANKF_F<span class="token decimalnumber string">607</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $00Enemy_Heart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $01Enemy_ShyguyRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $02Enemy_Tweeter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $03Enemy_ShyguyPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $04Enemy_Porcupo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $05Enemy_SnifitRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $06Enemy_SnifitGray</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $07Enemy_SnifitPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $08Enemy_Ostro</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $09Enemy_BobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $0AEnemy_AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $0BEnemy_AlbatossStartRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $0CEnemy_AlbatossStartLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $0DEnemy_NinjiRunning</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $0EEnemy_NinjiJumping</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $0FEnemy_BeezoDiving</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $10Enemy_BeezoStraight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $11Enemy_WartBubble</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $12Enemy_Pidgit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $13Enemy_Trouter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $14Enemy_Hoopstar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $15Enemy_JarGeneratorShyguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $16Enemy_JarGeneratorBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $17Enemy_Phanto</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $18Enemy_CobratJar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $19Enemy_CobratSand</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1AEnemy_Pokey</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1BEnemy_Bullet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1CEnemy_Birdo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1DEnemy_Mouser</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1EEnemy_Egg</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1FEnemy_Tryclyde</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $20Enemy_Fireball</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $21Enemy_Clawgrip</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $22Enemy_ClawgripRock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $23Enemy_PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $24Enemy_PanserWalking</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $25Enemy_PanserStationaryFiresUp</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $26Enemy_Autobomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $27Enemy_AutobombFire</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $28Enemy_WhaleSpout</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $29Enemy_Flurry</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2AEnemy_Fryguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2BEnemy_FryguySplit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2CEnemy_Wart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2DEnemy_HawkmouthBoss</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2EEnemy_Spark1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2FEnemy_Spark2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $30Enemy_Spark3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $31Enemy_Spark4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; $32Enemy_VegetableSmall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; $33Enemy_VegetableLarge</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; $34Enemy_VegetableWart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; $35Enemy_Shell</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $36Enemy_Coin</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; $37Enemy_Bomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $38Enemy_Rocket</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $39Enemy_MushroomBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; $3AEnemy_POWBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $3BEnemy_FallingLogs</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $3CEnemy_SubspaceDoor</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $3DEnemy_Key</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $3EEnemy_SubspacePotion</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $3FEnemy_Mushroom</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $40Enemy_Mushroom1up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $41Enemy_FlyingCarpet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $42Enemy_HawkmouthRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $43Enemy_HawkmouthLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $44Enemy_CrystalBall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $45Enemy_Starman</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; $46Enemy_Stopwatch</span>
&nbsp;</code></pre><aside><p>@TODO: use flag
IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE</p>
<p>This table determines the "solidness" of tiles.</p>
<p>Solidness is broken into four tiers:</p>
<ul>
<li>background (no collisions)</li>
<li>background to player/enemies, solid to mushroom blocks</li>
<li>jumpthrough block (collision on top only)</li>
<li>solid block (collision on all sides)</li>
</ul>
<p>Tiles are divided into groups of $40. For each category, the corresponding
the groups are divided into two groups: tiles that have a collision rule and
tiles that don't.</p>
&nbsp;</aside><pre><a name="l4177" href="#l4177" title="Link to line 4177">#</a><code>TileSolidnessTable:&nbsp;</code></pre><aside><p>solid to mushroom blocks unless &#x3C; these values</p>
&nbsp;</aside><pre><a name="l4179" href="#l4179" title="Link to line 4179">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$43</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>&nbsp;</code></pre><aside><p>solid on top unless &#x3C; these values</p>
&nbsp;</aside><pre><a name="l4184" href="#l4184" title="Link to line 4184">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$91</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CA</span>&nbsp;</code></pre><aside><p>solid on all sides unless &#x3C; these values</p>
&nbsp;</aside><pre><a name="l4189" href="#l4189" title="Link to line 4189">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$69</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$98</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D5</span>

IFDEF ENABLE_TILE_ATTRIBUTES_TABLE&nbsp;</code></pre><aside><p>ELSE</p>
<p>This table determines the collision properties of a tile</p>
<ul>
<li>bit 7: whether bottom is solid to "background interactive" enemies</li>
<li>bit 6: whether top is solid to "background interactive" enemies</li>
<li>bit 5: whether right side is solid to "background interactive" enemies</li>
<li>bit 4: whether left side is solid to "background interactive" enemies</li>
<li>bit 3: whether bottom is solid</li>
<li>bit 2: whether top is solid</li>
<li>bit 1: whether right side is solid</li>
<li>bit 0: whether left side is solid</li>
</ul>
&nbsp;</aside><pre><a name="l4208" href="#l4208" title="Link to line 4208">#</a><code>TileCollisionAttributesTable:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $01</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $03</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $05</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $06</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $07</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $09</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $0A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $0B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $0D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $0E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $0F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $11</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $12</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $13</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $15</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $16</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $17</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $19</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10001111</span> <span class="token comment">; $1A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $1B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $1D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $1F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $21</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $22</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $23</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $25</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $26</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $27</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $29</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $2A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $2B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $2D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $2E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $2F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $31</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $32</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $33</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $35</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $36</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $37</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $39</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $3A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $3B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $3D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $3E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $3F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $41</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $42</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $43</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $45</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $46</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $47</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $49</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $4A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $4B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $4D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $4E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $4F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $51</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $52</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $53</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $55</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $56</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $57</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $59</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $5A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $5B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $5D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $5E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $5F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $61</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $62</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $63</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $65</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $66</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $67</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $69</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $6A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $6B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $6D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $6E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $6F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $71</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $72</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $73</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $75</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $76</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $77</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $79</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $7A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $7B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $7D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $7E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $7F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $81</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $82</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $83</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $85</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $86</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $87</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $88</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $89</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $8A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $8B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $8C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $8D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $8E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $8F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $90</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $91</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $92</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $93</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $94</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $95</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $96</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $97</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $98</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $99</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $9A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $9B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $9C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $9D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $9E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $9F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $A9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $AA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $AB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $AC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $AD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $AE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $AF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $B9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $BA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $BB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $BC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $BD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $BE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $BF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11110000</span> <span class="token comment">; $C9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $CA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $CB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $CC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $CD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $CE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $CF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $D0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $D1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $D2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $D3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $D4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $D5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $D6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $D7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $D8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $D9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $DA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $DB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $DC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $DD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $DE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $DF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $E9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $EA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $EB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $EC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $ED</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $EE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $EF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $F9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $FA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $FB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $FC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $FD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $FE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001111</span> <span class="token comment">; $FF</span>

&nbsp;</code></pre><aside><p>Tile attributes</p>
<p>This table determines properties of each tile, including collision properties and special flags</p>
<p>%76543210
xxxxMMHH</p>
<ul>
<li>M: movement effect (0 = none, 1 = slippery, 2 = quicksand, 3 = conveyor)</li>
<li>H: health effect (0 = none, 1 = damage, 2 = kill, 3 = heal)</li>
</ul>
&nbsp;</aside><pre><a name="l4477" href="#l4477" title="Link to line 4477">#</a><code>TileInteractionAttributesTable:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $01</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $03</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $05</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $06</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $07</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $09</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $0A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $0B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $0D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $0E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $0F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $11</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $12</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $13</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $15</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; $16</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $17</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $19</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000001</span> <span class="token comment">; $1A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $1B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $1D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $1F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $21</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $22</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $23</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $25</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $26</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $27</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $29</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $2A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $2B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $2D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $2E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $2F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $31</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $32</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $33</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $35</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $36</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $37</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $39</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $3F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $41</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $42</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $43</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $45</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $46</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $47</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $49</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $4A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $4B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $4D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $4E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $4F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $51</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $52</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $53</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $55</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $56</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $57</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $59</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $5A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $5B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $5D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $5E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $5F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $61</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $62</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $63</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $65</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $66</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001100</span> <span class="token comment">; $67</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001100</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $69</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $6A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $6B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $6D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $6E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $6F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $71</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $72</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $73</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $75</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $76</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $77</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $79</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $7A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $7B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $7D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $7E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $7F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $81</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $82</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $83</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $85</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $86</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $87</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $88</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $89</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001000</span> <span class="token comment">; $8A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001000</span> <span class="token comment">; $8B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $8C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $8D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $8E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $8F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $90</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $91</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $92</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $93</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $94</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $95</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $96</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $97</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $98</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $99</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $9A</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $9B</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $9C</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $9D</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $9E</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $9F</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $A9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $AA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $AB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $AC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $AD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $AE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $AF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $B9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $BA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $BB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $BC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $BD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $BE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $BF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $C9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $CA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $CB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $CC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $CD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $CE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $CF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $D9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $DA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $DB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $DC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $DD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $DE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $DF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $E9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $EA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $EB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $EC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $ED</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $EE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $EF</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F0</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F1</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F2</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F3</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F4</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F5</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F6</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F7</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F8</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $F9</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $FA</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $FB</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $FC</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $FD</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $FE</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000000</span> <span class="token comment">; $FF</span>
ENDIF

WarpDestinations:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>

&nbsp;</code></pre><aside><p>Updates joypad press/held values</p>
&nbsp;</aside><pre><a name="l4749" href="#l4749" title="Link to line 4749">#</a><code>UpdateJoypads:
	<span class="token opcode property">JSR</span> ReadJoypads

UpdateJoypads_DoubleCheck:&nbsp;</code></pre><aside><p>Work around DPCM sample bug,
where some spurious inputs are read</p>
&nbsp;</aside><pre><a name="l4755" href="#l4755" title="Link to line 4755">#</a><code>IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">LDY</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">STY</span> UpdateJoypadsTemp
ENDIF
	<span class="token opcode property">LDY</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">JSR</span> ReadJoypads

	<span class="token opcode property">CPY</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BNE</span> UpdateJoypads_DoubleCheck

IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">LDY</span> UpdateJoypadsTemp
	<span class="token opcode property">CPY</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">BNE</span> UpdateJoypads_DoubleCheck
ENDIF

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>

UpdateJoypads_Loop:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress, <span class="token register variable">X</span> <span class="token comment">; Update the press/held values</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">EOR</span> Player<span class="token decimalnumber string">1</span>JoypadHeld, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> Player<span class="token decimalnumber string">1</span>JoypadPress, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> Player<span class="token decimalnumber string">1</span>JoypadPress, <span class="token register variable">X</span>
	<span class="token opcode property">STY</span> Player<span class="token decimalnumber string">1</span>JoypadHeld, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> UpdateJoypads_Loop

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Reads joypad pressed input</p>
&nbsp;</aside><pre><a name="l4789" href="#l4789" title="Link to line 4789">#</a><code>ReadJoypads:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STX</span> JOY<span class="token decimalnumber string">1</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">STX</span> JOY<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>
ReadJoypadLoop:
	<span class="token opcode property">LDA</span> JOY<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>&nbsp;</code></pre><aside><p>@TODO These seem to never be read, and even then are using a
second bit from JOY1/JOY2 ... Was this reading from
the expansion port???</p>
&nbsp;</aside><pre><a name="l4804" href="#l4804" title="Link to line 4804">#</a><code>	<span class="token opcode property">ROL</span> Player<span class="token decimalnumber string">1</span>JoypadUnk
	<span class="token opcode property">LDA</span> JOY<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> Player<span class="token decimalnumber string">2</span>JoypadUnk
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> ReadJoypadLoop

	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4817" href="#l4817" title="Link to line 4817">#</a><code>sub_BANKF_F<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> CurrentLevelPage
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> AreaPointersByPage, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CurrentLevel
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> AreaPointersByPage, <span class="token register variable">Y</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> CurrentLevelArea
	<span class="token opcode property">LDA</span> AreaPointersByPage, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> CurrentLevelEntryPage
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANKF_F6A1</p>
&nbsp;</aside><pre><a name="l4837" href="#l4837" title="Link to line 4837">#</a><code>&nbsp;</code></pre><aside><p>Checks that we're playing the correct music and switches if necessary, unless
we're playing the invincibility music.</p>
<h5>Input</h5>
<ul>
<li><code>CompareMusicIndex</code>: music we should be playing</li>
<li><code>CurrentMusicIndex</code>: music we're actually playing</li>
<li><code>StarInvincibilityTimer</code>: whether the player is invincible</li>
</ul>
<h5>Output</h5>
<ul>
<li><code>CurrentMusicIndex</code>: music we should be plathing</li>
<li><code>MusicQueue1</code>: song to play if we need to change the music</li>
</ul>
&nbsp;</aside><pre><a name="l4852" href="#l4852" title="Link to line 4852">#</a><code>EnsureCorrectMusic:
	<span class="token opcode property">LDA</span> CompareMusicIndex
	<span class="token opcode property">CMP</span> CurrentMusicIndex
	<span class="token opcode property">BEQ</span> EnsureCorrectMusic_Exit

	<span class="token opcode property">TAX</span>
	<span class="token opcode property">STX</span> CurrentMusicIndex
	<span class="token opcode property">LDA</span> StarInvincibilityTimer
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCS</span> EnsureCorrectMusic_Exit

	<span class="token opcode property">LDA</span> LevelMusicIndexes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>

EnsureCorrectMusic_Exit:
	<span class="token opcode property">RTS</span>


DoAreaReset:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> AreaInitialized
	<span class="token opcode property">STA</span> ObjectCarriedOver
	<span class="token opcode property">STA</span> SubspaceTimer
	<span class="token opcode property">STA</span> SubspaceDoorTimer
IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">STA</span> ChangeCharacterPoofTimer
ENDIF
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>

DoAreaReset_EnemyLoop:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> DoAreaReset_EnemyLoopEnd

	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> DoAreaReset_AfterCarryOver

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_MushroomBlock
	<span class="token opcode property">BEQ</span> DoAreaReset_AfterCarryOver

	<span class="token opcode property">STA</span> ObjectCarriedOver

DoAreaReset_AfterCarryOver:
	<span class="token opcode property">JSR</span> AreaResetEnemyDestroy

DoAreaReset_EnemyLoopEnd:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> DoAreaReset_EnemyLoop

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function DoAreaReset</p>
&nbsp;</aside><pre><a name="l4905" href="#l4905" title="Link to line 4905">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4907" href="#l4907" title="Link to line 4907">#</a><code>AreaResetEnemyDestroy:&nbsp;</code></pre><aside><p>load raw enemy data offset so we can allow the level object to respawn</p>
&nbsp;</aside><pre><a name="l4910" href="#l4910" title="Link to line 4910">#</a><code>	<span class="token opcode property">LDY</span> EnemyRawDataOffset, <span class="token register variable">X</span>&nbsp;</code></pre><aside><p>nothing to reset if offset is invalid</p>
&nbsp;</aside><pre><a name="l4912" href="#l4912" title="Link to line 4912">#</a><code>	<span class="token opcode property">BMI</span> AreaResetEnemyDestroy_AfterAllowRespawn
&nbsp;</code></pre><aside><p>disabling bit 7 allows the object to respawn</p>
&nbsp;</aside><pre><a name="l4915" href="#l4915" title="Link to line 4915">#</a><code>	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STA</span> (RawEnemyData), <span class="token register variable">Y</span>

AreaResetEnemyDestroy_AfterAllowRespawn:
	<span class="token opcode property">LDA</span> #EnemyState_Inactive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function AreaResetEnemyDestroy</p>
&nbsp;</aside><pre><a name="l4925" href="#l4925" title="Link to line 4925">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4927" href="#l4927" title="Link to line 4927">#</a><code>KillPlayer:
	<span class="token opcode property">LDA</span> #PlayerState_Dying <span class="token comment">; Mark player as dead</span>
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Clear some variables</span>
	<span class="token opcode property">STA</span> PlayerHealth
	<span class="token opcode property">STA</span> CrouchJumpTimer
	<span class="token opcode property">STA</span> StarInvincibilityTimer
	<span class="token opcode property">LDA</span> #SpriteAnimation_Dead <span class="token comment">; Set player animation to dead?</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">749</span>
&nbsp;</code></pre><aside><p>Probably something to throw away
a held item on death</p>
&nbsp;</aside><pre><a name="l4942" href="#l4942" title="Link to line 4942">#</a><code>	<span class="token opcode property">DEC</span> HoldingItem
	<span class="token opcode property">LDY</span> ObjectBeingCarriedIndex
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STX</span> byte_RAM_D
	<span class="token opcode property">LDX</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CPX</span> #EnemyState_Sinking
	<span class="token opcode property">BEQ</span> loc_BANKF_F<span class="token decimalnumber string">747</span>

	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>

loc_BANKF_F<span class="token decimalnumber string">747</span>:
	<span class="token opcode property">LDX</span> byte_RAM_D

loc_BANKF_F<span class="token decimalnumber string">749</span>:&nbsp;</code></pre><aside><p>Set music to death jingle</p>
&nbsp;</aside><pre><a name="l4961" href="#l4961" title="Link to line 4961">#</a><code>	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_DeathJingle
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>&nbsp;</code></pre><aside><p>BUG: Setting DPCM at the same time as music</p>
&nbsp;</aside><pre><a name="l4964" href="#l4964" title="Link to line 4964">#</a><code>	<span class="token opcode property">LDA</span> #DPCM_PlayerDeath
	<span class="token opcode property">STA</span> DPCMQueue
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Copies the raw level data to memory.</p>
&nbsp;</aside><pre><a name="l4972" href="#l4972" title="Link to line 4972">#</a><code>CopyLevelDataToMemory:&nbsp;</code></pre><aside><p>Determine the global area index from the current level and area.</p>
&nbsp;</aside><pre><a name="l4974" href="#l4974" title="Link to line 4974">#</a><code>	<span class="token opcode property">LDY</span> CurrentLevel
	<span class="token opcode property">LDA</span> LevelAreaStartIndexes, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> CurrentLevelArea
	<span class="token opcode property">TAY</span>
&nbsp;</code></pre><aside><p>Calculate the pointer for the start of the level data.</p>
&nbsp;</aside><pre><a name="l4981" href="#l4981" title="Link to line 4981">#</a><code>	<span class="token opcode property">LDA</span> LevelDataPointersLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> LevelDataPointersHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
&nbsp;</code></pre><aside><p>Blindly copy 255 bytes of data, which is presumed to contain the full area.</p>
&nbsp;</aside><pre><a name="l4987" href="#l4987" title="Link to line 4987">#</a><code>	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$FF</span>
&nbsp;</code></pre><aside><p>Set the destination address in RAM for copying level data.</p>
&nbsp;</aside><pre><a name="l4990" href="#l4990" title="Link to line 4990">#</a><code>	<span class="token opcode property">LDA</span> #>RawLevelData
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDY</span> #&#x3C;RawLevelData
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p><code>Y = $00</code></p>
&nbsp;</aside><pre><a name="l4996" href="#l4996" title="Link to line 4996">#</a><code>CopyLevelDataToMemory_Loop:
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">5</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> CopyLevelDataToMemory_Loop
&nbsp;</code></pre><aside><p>We end up copying the first byte twice!</p>
&nbsp;</aside><pre><a name="l5004" href="#l5004" title="Link to line 5004">#</a><code>	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>

&nbsp;</code></pre><aside><p>Copies the raw enemy data to memory.</p>
&nbsp;</aside><pre><a name="l5010" href="#l5010" title="Link to line 5010">#</a><code>CopyEnemyDataToMemory:&nbsp;</code></pre><aside><p>Determine the address of the level's enemy pointer tables.</p>
&nbsp;</aside><pre><a name="l5012" href="#l5012" title="Link to line 5012">#</a><code>	<span class="token opcode property">LDY</span> CurrentLevel
	<span class="token opcode property">LDA</span> EnemyPointersByLevel_HiHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> EnemyPointersByLevel_HiLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> EnemyPointersByLevel_LoHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> EnemyPointersByLevel_LoLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p>Determine whether we want the enemy data for the area or for the jar.</p>
&nbsp;</aside><pre><a name="l5023" href="#l5023" title="Link to line 5023">#</a><code>	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> CopyEnemyDataToMemory_Area

CopyEnemyDataToMemory_Jar:
	<span class="token opcode property">LDY</span> #AreaIndex_Jar
	<span class="token opcode property">JMP</span> CopyEnemyDataToMemory_SetAddress

CopyEnemyDataToMemory_Area:
	<span class="token opcode property">LDY</span> CurrentLevelArea

CopyEnemyDataToMemory_SetAddress:&nbsp;</code></pre><aside><p>Calculate the pointer for the start of the enemy data.</p>
&nbsp;</aside><pre><a name="l5036" href="#l5036" title="Link to line 5036">#</a><code>	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">2</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
&nbsp;</code></pre><aside><p>Blindly copy 255 bytes of data, which is presumed to contain the full area.</p>
&nbsp;</aside><pre><a name="l5042" href="#l5042" title="Link to line 5042">#</a><code>	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$FF</span>
&nbsp;</code></pre><aside><p>Set the destination address in RAM for copying level data.</p>
&nbsp;</aside><pre><a name="l5045" href="#l5045" title="Link to line 5045">#</a><code>	<span class="token opcode property">LDA</span> #>RawEnemyDataAddr
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> #&#x3C;RawEnemyDataAddr
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p><code>Y = $00</code></p>
&nbsp;</aside><pre><a name="l5051" href="#l5051" title="Link to line 5051">#</a><code>CopyEnemyDataToMemory_Loop:
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">2</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> CopyEnemyDataToMemory_Loop

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Copies the raw level data for a jar to memory.</p>
&nbsp;</aside><pre><a name="l5064" href="#l5064" title="Link to line 5064">#</a><code>CopyJarDataToMemory:&nbsp;</code></pre><aside><p>Determine the global area index from the current level and area.</p>
&nbsp;</aside><pre><a name="l5066" href="#l5066" title="Link to line 5066">#</a><code>	<span class="token opcode property">LDY</span> CurrentLevel
	<span class="token opcode property">LDA</span> LevelAreaStartIndexes, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> #AreaIndex_Jar
	<span class="token opcode property">TAY</span>
&nbsp;</code></pre><aside><p>Calculate the pointer for the start of the level data.</p>
&nbsp;</aside><pre><a name="l5073" href="#l5073" title="Link to line 5073">#</a><code>	<span class="token opcode property">LDA</span> LevelDataPointersLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> LevelDataPointersHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
&nbsp;</code></pre><aside><p>Set the destination address in RAM for copying level data.</p>
&nbsp;</aside><pre><a name="l5079" href="#l5079" title="Link to line 5079">#</a><code>	<span class="token opcode property">LDA</span> #>RawJarData
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDY</span> #&#x3C;RawJarData
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p><code>Y = $00</code></p>
&nbsp;</aside><pre><a name="l5085" href="#l5085" title="Link to line 5085">#</a><code>CopyJarDataToMemory_Loop:
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">5</span>), <span class="token register variable">Y</span>&nbsp;</code></pre><aside><p>Unlike <code>CopyLevelDataToMemory</code>, which always copies 255 bytes, this stops on any <code>$FF</code> read!</p>
<p>This isn't technically "correct", but in practice it's not the most devastating limitation.
Just don't expect to use a waterfall object that is exactly 16 tiles wide inside a jar.</p>
<p>Fun fact: The largest possible waterfall objects are only used in two areas of World 5!</p>
&nbsp;</aside><pre><a name="l5093" href="#l5093" title="Link to line 5093">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$FF</span> <span class="token comment">; This one actually terminates on any $FF read! Welp.</span>
	<span class="token opcode property">BEQ</span> CopyJarDataToMemory_Exit

	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">JMP</span> CopyJarDataToMemory_Loop

CopyJarDataToMemory_Exit:
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><h2>Tile Quads</h2>
<p>Map tiles are made of 4 pattern table tiles arranged in a 2x2 block.</p>
<p>These map tiles are broken up into four tables (<code>$00-$3F</code>, <code>$40-$7F</code>, <code>$80-$BF</code>, <code>$C0-$FF</code>) for
addressability (the tile index is multiplied by 4 to get the first byte). Each table
coincidentally corresponds to a background subpalette as well.</p>
&nbsp;</aside><pre><a name="l5114" href="#l5114" title="Link to line 5114">#</a><code>&nbsp;</code></pre><aside><h4>Tile quad pointers</h4>
&nbsp;</aside><pre><a name="l5118" href="#l5118" title="Link to line 5118">#</a><code>TileQuadPointersLo:
	<span class="token directive keyword">.db</span> &#x3C;TileQuads<span class="token decimalnumber string">1</span>
	<span class="token directive keyword">.db</span> &#x3C;TileQuads<span class="token decimalnumber string">2</span>
	<span class="token directive keyword">.db</span> &#x3C;TileQuads<span class="token decimalnumber string">3</span>
	<span class="token directive keyword">.db</span> &#x3C;TileQuads<span class="token decimalnumber string">4</span>

TileQuadPointersHi:
	<span class="token directive keyword">.db</span> >TileQuads<span class="token decimalnumber string">1</span>
	<span class="token directive keyword">.db</span> >TileQuads<span class="token decimalnumber string">2</span>
	<span class="token directive keyword">.db</span> >TileQuads<span class="token decimalnumber string">3</span>
	<span class="token directive keyword">.db</span> >TileQuads<span class="token decimalnumber string">4</span>
&nbsp;</code></pre><aside><h4>Tile quad pattern table values</h4>
<p>Each subtable corresponds to <code>$40</code> tiles so that a single byte offset can be used to address each
map tile within the table.</p>
&nbsp;</aside><pre><a name="l5136" href="#l5136" title="Link to line 5136">#</a><code>TileQuads<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B4</span>,<span class="token hexnumber string">$B6</span>,<span class="token hexnumber string">$B5</span>,<span class="token hexnumber string">$B7</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B9</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B2</span>,<span class="token hexnumber string">$B3</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BE</span>,<span class="token hexnumber string">$BE</span>,<span class="token hexnumber string">$BF</span>,<span class="token hexnumber string">$BF</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BF</span>,<span class="token hexnumber string">$BF</span>,<span class="token hexnumber string">$BF</span>,<span class="token hexnumber string">$BF</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4A</span>,<span class="token hexnumber string">$4A</span>,<span class="token hexnumber string">$4B</span>,<span class="token hexnumber string">$4B</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5E</span>,<span class="token hexnumber string">$5F</span>,<span class="token hexnumber string">$5E</span>,<span class="token hexnumber string">$5F</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$A9</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$46</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$46</span>,<span class="token hexnumber string">$FC</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$A9</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E9</span>,<span class="token hexnumber string">$E9</span>,<span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$A9</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$48</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$48</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$22</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$33</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$EB</span>,<span class="token hexnumber string">$A9</span>,<span class="token hexnumber string">$A9</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$74</span>,<span class="token hexnumber string">$76</span>,<span class="token hexnumber string">$75</span>,<span class="token hexnumber string">$77</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$98</span>,<span class="token hexnumber string">$9A</span>,<span class="token hexnumber string">$99</span>,<span class="token hexnumber string">$9B</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9C</span>,<span class="token hexnumber string">$9A</span>,<span class="token hexnumber string">$9D</span>,<span class="token hexnumber string">$9B</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9C</span>,<span class="token hexnumber string">$9E</span>,<span class="token hexnumber string">$9B</span>,<span class="token hexnumber string">$9F</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$5A</span>,<span class="token hexnumber string">$59</span>,<span class="token hexnumber string">$5B</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5E</span>,<span class="token hexnumber string">$5F</span>,<span class="token hexnumber string">$5E</span>,<span class="token hexnumber string">$5F</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8E</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$72</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A6</span>,<span class="token hexnumber string">$A6</span>,<span class="token hexnumber string">$A7</span>,<span class="token hexnumber string">$A7</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$92</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$74</span>,<span class="token hexnumber string">$76</span>,<span class="token hexnumber string">$75</span>,<span class="token hexnumber string">$77</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>,<span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$71</span>,<span class="token hexnumber string">$73</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$71</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$71</span>,<span class="token hexnumber string">$73</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$27</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$27</span> <span class="token comment">; $88</span>
IFDEF EXPAND_TABLES
	unusedSpace TileQuads<span class="token decimalnumber string">1</span> + <span class="token hexnumber string">$100</span>, <span class="token hexnumber string">$FC</span>
ENDIF

TileQuads<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B1</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A2</span>,<span class="token hexnumber string">$A1</span>,<span class="token hexnumber string">$A3</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$82</span>,<span class="token hexnumber string">$81</span>,<span class="token hexnumber string">$83</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span>,<span class="token hexnumber string">$86</span>,<span class="token hexnumber string">$F5</span>,<span class="token hexnumber string">$87</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$86</span>,<span class="token hexnumber string">$85</span>,<span class="token hexnumber string">$87</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AD</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AD</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AC</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$3B</span>,<span class="token hexnumber string">$3B</span>,<span class="token hexnumber string">$AC</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span>,<span class="token hexnumber string">$86</span>,<span class="token hexnumber string">$F5</span>,<span class="token hexnumber string">$87</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$49</span>,<span class="token hexnumber string">$49</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3C</span>,<span class="token hexnumber string">$3E</span>,<span class="token hexnumber string">$3D</span>,<span class="token hexnumber string">$3F</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$58</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$59</span>,<span class="token hexnumber string">$5A</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5A</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5C</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$5D</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5A</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$6E</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$6F</span> <span class="token comment">; $88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$23</span> <span class="token comment">; $8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6E</span>,<span class="token hexnumber string">$6F</span>,<span class="token hexnumber string">$70</span>,<span class="token hexnumber string">$71</span> <span class="token comment">; $90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$57</span>,<span class="token hexnumber string">$57</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$57</span>,<span class="token hexnumber string">$57</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $98</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D3</span>,<span class="token hexnumber string">$D3</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $9C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D2</span>,<span class="token hexnumber string">$D2</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7C</span>,<span class="token hexnumber string">$7E</span>,<span class="token hexnumber string">$7D</span>,<span class="token hexnumber string">$7F</span> <span class="token comment">; $A4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CA</span>,<span class="token hexnumber string">$CC</span>,<span class="token hexnumber string">$CB</span>,<span class="token hexnumber string">$CD</span> <span class="token comment">; $A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CA</span>,<span class="token hexnumber string">$CC</span>,<span class="token hexnumber string">$CB</span>,<span class="token hexnumber string">$CD</span> <span class="token comment">; $AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>,<span class="token hexnumber string">$C2</span>,<span class="token hexnumber string">$C1</span>,<span class="token hexnumber string">$C3</span> <span class="token comment">; $B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2C</span>,<span class="token hexnumber string">$2E</span>,<span class="token hexnumber string">$2D</span>,<span class="token hexnumber string">$2F</span> <span class="token comment">; $B4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8E</span> <span class="token comment">; $B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$8A</span>,<span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$8B</span> <span class="token comment">; $BC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$8B</span>,<span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$8B</span> <span class="token comment">; $C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$8B</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$8D</span> <span class="token comment">; $C4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$8A</span>,<span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$8D</span> <span class="token comment">; $C8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$8A</span>,<span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$8B</span> <span class="token comment">; $CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$8A</span>,<span class="token hexnumber string">$89</span>,<span class="token hexnumber string">$8B</span> <span class="token comment">; $D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6A</span>,<span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$6B</span>,<span class="token hexnumber string">$6D</span> <span class="token comment">; $D4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$6D</span> <span class="token comment">; $D8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$6E</span>,<span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$6F</span> <span class="token comment">; $DC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$54</span>,<span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$55</span> <span class="token comment">; $E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span> <span class="token comment">; $E4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span> <span class="token comment">; $E8</span>
IFDEF EXPAND_TABLES
	unusedSpace TileQuads<span class="token decimalnumber string">2</span> + <span class="token hexnumber string">$100</span>, <span class="token hexnumber string">$FC</span>
ENDIF

TileQuads<span class="token decimalnumber string">3</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$95</span>,<span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$95</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$96</span>,<span class="token hexnumber string">$97</span>,<span class="token hexnumber string">$96</span>,<span class="token hexnumber string">$97</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$48</span>,<span class="token hexnumber string">$49</span>,<span class="token hexnumber string">$48</span>,<span class="token hexnumber string">$49</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$33</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$33</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$34</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$31</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$D0</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D1</span>,<span class="token hexnumber string">$D1</span>,<span class="token hexnumber string">$D1</span>,<span class="token hexnumber string">$D1</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$66</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$67</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$68</span>,<span class="token hexnumber string">$6A</span>,<span class="token hexnumber string">$69</span>,<span class="token hexnumber string">$6B</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$6C</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$6C</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$92</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$AF</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$78</span>,<span class="token hexnumber string">$7A</span>,<span class="token hexnumber string">$79</span>,<span class="token hexnumber string">$7B</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A8</span>,<span class="token hexnumber string">$A8</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AE</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$95</span>,<span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$95</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$96</span>,<span class="token hexnumber string">$97</span>,<span class="token hexnumber string">$96</span>,<span class="token hexnumber string">$97</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$24</span>,<span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$25</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$92</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$51</span>,<span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$51</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$AF</span>,<span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$AF</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$51</span>,<span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$51</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8E</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$72</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$52</span>,<span class="token hexnumber string">$51</span>,<span class="token hexnumber string">$53</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$4F</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$4F</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$4E</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$93</span>,<span class="token hexnumber string">$92</span> <span class="token comment">; $88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8E</span> <span class="token comment">; $8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$44</span> <span class="token comment">; $90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$3A</span>,<span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $98</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$4E</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$38</span> <span class="token comment">; $9C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4A</span>,<span class="token hexnumber string">$4B</span>,<span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$4A</span>,<span class="token hexnumber string">$4B</span> <span class="token comment">; $A4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span>,<span class="token hexnumber string">$42</span>,<span class="token hexnumber string">$41</span>,<span class="token hexnumber string">$43</span> <span class="token comment">; $A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$41</span>,<span class="token hexnumber string">$43</span>,<span class="token hexnumber string">$41</span>,<span class="token hexnumber string">$43</span> <span class="token comment">; $AC</span>
IFDEF EXPAND_TABLES
	unusedSpace TileQuads<span class="token decimalnumber string">3</span> + <span class="token hexnumber string">$100</span>, <span class="token hexnumber string">$FC</span>
ENDIF
TileQuads<span class="token decimalnumber string">4</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span>,<span class="token hexnumber string">$42</span>,<span class="token hexnumber string">$41</span>,<span class="token hexnumber string">$43</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span>,<span class="token hexnumber string">$42</span>,<span class="token hexnumber string">$41</span>,<span class="token hexnumber string">$43</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$BB</span>,<span class="token hexnumber string">$BD</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$90</span>,<span class="token hexnumber string">$91</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span>,<span class="token hexnumber string">$FD</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span>,<span class="token hexnumber string">$63</span>,<span class="token hexnumber string">$61</span>,<span class="token hexnumber string">$63</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$63</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$63</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$67</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$67</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$60</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$61</span>,<span class="token hexnumber string">$63</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$33</span>,<span class="token hexnumber string">$35</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$63</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$35</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$66</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$67</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$38</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$39</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$68</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$61</span>,<span class="token hexnumber string">$63</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$69</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$67</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$46</span>,<span class="token hexnumber string">$62</span>,<span class="token hexnumber string">$61</span>,<span class="token hexnumber string">$63</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$64</span>,<span class="token hexnumber string">$47</span>,<span class="token hexnumber string">$65</span>,<span class="token hexnumber string">$67</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>,<span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$BB</span>,<span class="token hexnumber string">$BD</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>,<span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$71</span>,<span class="token hexnumber string">$73</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8F</span>,<span class="token hexnumber string">$8E</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$73</span>,<span class="token hexnumber string">$72</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$44</span>,<span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$44</span> <span class="token comment">; $60</span>
IFDEF EXPAND_TABLES
	unusedSpace TileQuads<span class="token decimalnumber string">4</span> + <span class="token hexnumber string">$100</span>, <span class="token hexnumber string">$FC</span>
ENDIF

EndOfLevelDoor: <span class="token comment">; PPU data</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$AD</span>,<span class="token hexnumber string">$FA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$04</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$10</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AD</span>,<span class="token hexnumber string">$FA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$06</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AC</span>,<span class="token hexnumber string">$AD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndOfLevelDoorRowOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$17</span>

DefaultCHRAnimationSpeed_Level:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; 1-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; 1-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span> <span class="token comment">; 3-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span> <span class="token comment">; 3-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span> <span class="token comment">; 4-2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span> <span class="token comment">; 4-2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span> <span class="token comment">; 4-3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span> <span class="token comment">; 5-2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; 5-3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span> <span class="token comment">; 6-3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span> <span class="token comment">; 6-3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; 7-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; 7-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; 7-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span> <span class="token comment">; 7-1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span> <span class="token comment">; 7-2</span>

DefaultCHRAnimationSpeed_Area:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; 1-1 upward climb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; 1-1 birdo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; 3-1 main part</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; 3-1 sky part</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; 4-2 sky ice</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; 4-2 whales</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; 4-3 tower tops</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; 5-2 upward climb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; 5-3 miniboss birdo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; 6-3 upward climb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; 6-3 sky pyramid</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; 7-1 beginning area</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; 7-1 albatoss area</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; 7-1 cloud maze</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; 7-1 upward climb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; 7-2 entrance</span>

BackgroundCHRAnimationSpeedByWorld:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; World 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; World 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; World 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; World 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span> <span class="token comment">; World 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; World 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span> <span class="token comment">; World 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span> <span class="token comment">; Default</span>

&nbsp;</code></pre><aside><p>Increments the frame of the CHR animation using the world/area speed</p>
&nbsp;</aside><pre><a name="l5381" href="#l5381" title="Link to line 5381">#</a><code>AnimateCHRRoutine:
	<span class="token opcode property">DEC</span> BackgroundCHR<span class="token decimalnumber string">2</span>Timer
	<span class="token opcode property">BPL</span> AnimateCHRRoutine_Exit

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$07</span> <span class="token comment">; default index for animation speed table</span>
&nbsp;</code></pre><aside><p>Certain level/area combinations use a fixed animation speed.
It seems to be used in areas that prominently feature cloud platforms.
This loop performs the lookup to see if that should happen.</p>
&nbsp;</aside><pre><a name="l5390" href="#l5390" title="Link to line 5390">#</a><code>	<span class="token opcode property">LDY</span> #(DefaultCHRAnimationSpeed_Area - DefaultCHRAnimationSpeed_Level - <span class="token decimalnumber string">1</span>)
AnimateCHRRoutine_DefaultSpeedLoop:
	<span class="token opcode property">LDA</span> CurrentLevel_Init
	<span class="token opcode property">CMP</span> DefaultCHRAnimationSpeed_Level, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> AnimateCHRRoutine_DefaultSpeedNext

	<span class="token opcode property">LDA</span> CurrentLevelArea_Init
	<span class="token opcode property">CMP</span> DefaultCHRAnimationSpeed_Area, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> AnimateCHRRoutine_SetSpeed

AnimateCHRRoutine_DefaultSpeedNext:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> AnimateCHRRoutine_DefaultSpeedLoop

	<span class="token opcode property">LDX</span> CurrentWorldTileset

AnimateCHRRoutine_SetSpeed:
	<span class="token opcode property">LDA</span> BackgroundCHRAnimationSpeedByWorld, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>Timer
	<span class="token opcode property">LDY</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>

AnimatedCHRCheck:
IFDEF FIX_CHR_CYCLE
	<span class="token opcode property">CPY</span> #CHRBank_Animated<span class="token decimalnumber string">8</span> + <span class="token decimalnumber string">1</span>
ELSE&nbsp;</code></pre><aside><p>Bug: This is in the original game
The last frame of the animation is effectively skipped because
we immediately reset to the first frame when we hit it.</p>
&nbsp;</aside><pre><a name="l5420" href="#l5420" title="Link to line 5420">#</a><code>	<span class="token opcode property">CPY</span> #CHRBank_Animated<span class="token decimalnumber string">8</span>
ENDIF

	<span class="token opcode property">BCC</span> AnimateCHRRoutine_SetCHR

	<span class="token opcode property">LDY</span> #CHRBank_Animated<span class="token decimalnumber string">1</span>

AnimateCHRRoutine_SetCHR:
	<span class="token opcode property">STY</span> BackgroundCHR<span class="token decimalnumber string">2</span>

AnimateCHRRoutine_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Looks for an unused sprite slot</p>
<h5>Input</h5>
<ul>
<li><code>X</code>: enemy slot</li>
</ul>
<h5>Output</h5>
<ul>
<li><code>X</code>: byte_RAM_12</li>
<li><code>Y</code>: sprite slot</li>
</ul>
&nbsp;</aside><pre><a name="l5444" href="#l5444" title="Link to line 5444">#</a><code>FindSpriteSlot:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>

FindSpriteSlot_Loop:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> FindSpriteSlot_CheckInactiveSlot

FindSpriteSlot_LoopNext:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> FindSpriteSlot_Loop

FindSpriteSlot_Default:&nbsp;</code></pre><aside><p>Check that both halves of the default sprite slot are unused</p>
&nbsp;</aside><pre><a name="l5457" href="#l5457" title="Link to line 5457">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">BNE</span> FindSpriteSlot_FallbackExit

	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">BEQ</span> FindSpriteSlot_Exit

FindSpriteSlot_FallbackExit:&nbsp;</code></pre><aside><p>If all else fails, here's $10</p>
&nbsp;</aside><pre><a name="l5468" href="#l5468" title="Link to line 5468">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$10</span>

FindSpriteSlot_Exit:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>The object slot is inactive, so check that something else hasn't claimed the
corresponding sprite slot.</p>
&nbsp;</aside><pre><a name="l5476" href="#l5476" title="Link to line 5476">#</a><code>FindSpriteSlot_CheckInactiveSlot:&nbsp;</code></pre><aside><p>Calculate the sprite slot using the flicker offset</p>
&nbsp;</aside><pre><a name="l5478" href="#l5478" title="Link to line 5478">#</a><code>	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> SpriteFlickerSlot
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> SpriteFlickerDMAOffset, <span class="token register variable">Y</span>
&nbsp;</code></pre><aside><p>Check that both halves of the object's sprite slot are unused</p>
&nbsp;</aside><pre><a name="l5485" href="#l5485" title="Link to line 5485">#</a><code>	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">BNE</span> FindSpriteSlot_LoopNext
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">BNE</span> FindSpriteSlot_LoopNext
	<span class="token opcode property">BEQ</span> FindSpriteSlot_Exit

&nbsp;</code></pre><aside><p>Unused space in the original ($FB36 - $FDFF)</p>
&nbsp;</aside><pre><a name="l5496" href="#l5496" title="Link to line 5496">#</a><code>unusedSpace <span class="token hexnumber string">$FE00</span>, <span class="token hexnumber string">$FF</span>

IFDEF RESET_CHR_LATCH
CHRBank_Boss:
	<span class="token directive keyword">.db</span> CHRBank_EnemiesGrass <span class="token comment">; Mouser</span>
	<span class="token directive keyword">.db</span> CHRBank_EnemiesDesert <span class="token comment">; Tryclyde</span>
	<span class="token directive keyword">.db</span> CHRBank_EnemiesIce <span class="token comment">; Fryguy</span>
	<span class="token directive keyword">.db</span> CHRBank_EnemiesGrass <span class="token comment">; Clawgrip</span>
	<span class="token directive keyword">.db</span> CHRBank_EnemiesSky <span class="token comment">; Wart</span>
ENDIF

CHRBank_WorldEnemies:
	<span class="token directive keyword">.db</span> CHRBank_EnemiesGrass
	<span class="token directive keyword">.db</span> CHRBank_EnemiesDesert
	<span class="token directive keyword">.db</span> CHRBank_EnemiesGrass
	<span class="token directive keyword">.db</span> CHRBank_EnemiesIce
	<span class="token directive keyword">.db</span> CHRBank_EnemiesGrass
	<span class="token directive keyword">.db</span> CHRBank_EnemiesDesert
	<span class="token directive keyword">.db</span> CHRBank_EnemiesSky

CHRBank_WorldBossBackground:
	<span class="token directive keyword">.db</span> CHRBank_BackgroundGrass
	<span class="token directive keyword">.db</span> CHRBank_BackgroundDesert
	<span class="token directive keyword">.db</span> CHRBank_BackgroundGrass
	<span class="token directive keyword">.db</span> CHRBank_BackgroundIce
	<span class="token directive keyword">.db</span> CHRBank_BackgroundGrassClawgrip
	<span class="token directive keyword">.db</span> CHRBank_BackgroundDesert
	<span class="token directive keyword">.db</span> CHRBank_BackgroundSky

CHRBank_CharacterSize:
	<span class="token directive keyword">.db</span> CHRBank_Mario
	<span class="token directive keyword">.db</span> CHRBank_MarioSmall
	<span class="token directive keyword">.db</span> CHRBank_Princess
	<span class="token directive keyword">.db</span> CHRBank_PrincessSmall
	<span class="token directive keyword">.db</span> CHRBank_Toad
	<span class="token directive keyword">.db</span> CHRBank_ToadSmall
	<span class="token directive keyword">.db</span> CHRBank_Luigi
	<span class="token directive keyword">.db</span> CHRBank_LuigiSmall


LoadWorldCHRBanks:
	<span class="token opcode property">LDY</span> #CHRBank_CommonEnemies<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STY</span> SpriteCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> SpriteCHR<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> CurrentWorldTileset
	<span class="token opcode property">LDA</span> CHRBank_WorldEnemies, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteCHR<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> CHRBank_WorldBossBackground, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_Animated<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDY</span> BossTileset
	<span class="token opcode property">BMI</span> LoadCharacterCHRBanks
	<span class="token opcode property">LDA</span> CHRBank_Boss, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteCHR<span class="token decimalnumber string">4</span>
ENDIF

LoadCharacterCHRBanks:
	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> PlayerCurrentSize
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> CHRBank_CharacterSize, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">RTS</span>

IFDEF RESET_CHR_LATCH
CheckResetCHRLatch:
	<span class="token opcode property">LDA</span> ResetCHRLatch
	<span class="token opcode property">BEQ</span> CheckResetCHRLatch_Exit

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ResetCHRLatch

	<span class="token opcode property">LDY</span> #CHRBank_CommonEnemies<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STY</span> SpriteCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> SpriteCHR<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDY</span> CurrentWorldTileset
	<span class="token opcode property">LDA</span> CHRBank_WorldEnemies, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteCHR<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> CHRBank_WorldBossBackground, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_Animated<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDY</span> BossTileset
	<span class="token opcode property">BMI</span> CheckResetCHRLatch_Exit
	<span class="token opcode property">LDA</span> CHRBank_Boss, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteCHR<span class="token decimalnumber string">4</span>

CheckResetCHRLatch_Exit:
	<span class="token opcode property">RTS</span>
ENDIF


LoadTitleScreenCHRBanks:
	<span class="token opcode property">LDA</span> #CHRBank_TitleScreenBG<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_TitleScreenBG<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>


LoadCelebrationSceneBackgroundCHR:
	<span class="token opcode property">LDA</span> #CHRBank_CelebrationBG<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_CelebrationBG<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>


LoadCharacterSelectCHRBanks:
	<span class="token opcode property">LDA</span> #CHRBank_CharacterSelectSprites
	<span class="token opcode property">STA</span> SpriteCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_CharacterSelectBG<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_CharacterSelectBG<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>


TitleCardCHRBanks:
	<span class="token directive keyword">.db</span> CHRBank_TitleCardGrass
	<span class="token directive keyword">.db</span> CHRBank_TitleCardDesert
	<span class="token directive keyword">.db</span> CHRBank_TitleCardGrass
	<span class="token directive keyword">.db</span> CHRBank_TitleCardIce
	<span class="token directive keyword">.db</span> CHRBank_TitleCardGrass
	<span class="token directive keyword">.db</span> CHRBank_TitleCardDesert
	<span class="token directive keyword">.db</span> CHRBank_TitleCardSky


ChangeTitleCardCHR:
	<span class="token opcode property">LDY</span> CurrentWorld
	<span class="token opcode property">LDA</span> TitleCardCHRBanks, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>


LoadBonusChanceCHRBanks:
	<span class="token opcode property">LDA</span> #CHRBank_ChanceBG<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_ChanceBG<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>


LoadMarioSleepingCHRBanks:
	<span class="token opcode property">LDY</span> #CHRBank_EndingSprites
	<span class="token opcode property">STY</span> SpriteCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> SpriteCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> #CHRBank_EndingBackground<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #CHRBank_EndingBackground<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> BackgroundCHR<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Unused space in the original ($FE97 - $FF4F)</p>
&nbsp;</aside><pre><a name="l5660" href="#l5660" title="Link to line 5660">#</a><code>unusedSpace <span class="token hexnumber string">$FF50</span>, <span class="token hexnumber string">$FF</span>

&nbsp;</code></pre><aside><p>public RESET
This code is called when the NES is reset</p>
&nbsp;</aside><pre><a name="l5665" href="#l5665" title="Link to line 5665">#</a><code>RESET:
	<span class="token opcode property">SEI</span>
	<span class="token opcode property">CLD</span>
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">0000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">8</span> | PPUCtrl_NMIDisabled
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$FF</span> <span class="token comment">; Reset stack pointer</span>
	<span class="token opcode property">TXS</span>

RESET_VBlankLoop:&nbsp;</code></pre><aside><p>Wait for first VBlank</p>
&nbsp;</aside><pre><a name="l5675" href="#l5675" title="Link to line 5675">#</a><code>	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">AND</span> #PPUStatus_VBlankHit
	<span class="token opcode property">BEQ</span> RESET_VBlankLoop

RESET_VBlank<span class="token decimalnumber string">2</span>Loop:&nbsp;</code></pre><aside><p>Wait for second VBlank</p>
&nbsp;</aside><pre><a name="l5681" href="#l5681" title="Link to line 5681">#</a><code>	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">BPL</span> RESET_VBlank<span class="token decimalnumber string">2</span>Loop

IFDEF DEBUG
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> Debug_InMenu
ENDIF

IF INES_MAPPER == MAPPER_FME<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>
ELSE
	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">STA</span> NametableMapping
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A001</span> <span class="token comment">; PRG-RAM protect</span>
ENDIF
	<span class="token opcode property">JMP</span> StartGame

&nbsp;</code></pre><aside><p>Switches the current CHR banks</p>
&nbsp;</aside><pre><a name="l5706" href="#l5706" title="Link to line 5706">#</a><code>IF INES_MAPPER == MAPPER_FME<span class="token decimalnumber string">7</span>
ChangeCHRBanks:
	<span class="token opcode property">JMP</span> ChangeCHRBanks_FME<span class="token decimalnumber string">7</span>
&nbsp;</code></pre><aside><p>Maintain location of the next subroutine</p>
&nbsp;</aside><pre><a name="l5711" href="#l5711" title="Link to line 5711">#</a><code>	unusedSpace <span class="token hexnumber string">$FF85</span>, <span class="token hexnumber string">$FF</span>

ELSEIF INES_MAPPER == MAPPER_MMC<span class="token decimalnumber string">5</span>
ChangeCHRBanks:
	<span class="token opcode property">JMP</span> ChangeCHRBanks_MMC<span class="token decimalnumber string">5</span>
&nbsp;</code></pre><aside><p>Maintain location of the next subroutine</p>
&nbsp;</aside><pre><a name="l5718" href="#l5718" title="Link to line 5718">#</a><code>	unusedSpace <span class="token hexnumber string">$FF85</span>, <span class="token hexnumber string">$FF</span>

ELSE <span class="token comment">; INES_MAPPER == MAPPER_MMC3</span>
ChangeCHRBanks:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>
ChangeCHRBanks_Loop:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">LDA</span> BackgroundCHR<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8001</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> ChangeCHRBanks_Loop

	<span class="token opcode property">RTS</span>
ENDIF

&nbsp;</code></pre><aside><p>Calling this one will save the changed bank
to RAM, so if something uses the below version
the original bank set with this can be restored.</p>
&nbsp;</aside><pre><a name="l5741" href="#l5741" title="Link to line 5741">#</a><code>ChangeMappedPRGBank:
	<span class="token opcode property">STA</span> MMC<span class="token decimalnumber string">3</span>PRGBankTemp <span class="token comment">; See below comment.</span>
&nbsp;</code></pre><aside><p>Any call to this subroutine switches the lower two banks together.</p>
<p>For example, loading Bank 0/1:</p>
<pre><code>LDA #$00
JSR ChangeMappedPRGBank
</code></pre>
<p>Loading Bank 2/3:</p>
<pre><code>LDA #$01
JSR ChangeMappedPRGBank
</code></pre>
<p>Etc.</p>
<p>This version changes the bank numbers without
saving the change to RAM, so the previous bank
can be recalled later (mostly for temporary switches,
like music handling and such)</p>
&nbsp;</aside><pre><a name="l5768" href="#l5768" title="Link to line 5768">#</a><code>ChangeMappedPRGBankWithoutSaving:
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>

IF INES_MAPPER == MAPPER_FME<span class="token decimalnumber string">7</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span> <span class="token comment">; Change first bank</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; Use the bank right after this one next</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span> <span class="token comment">; Change second bank</span>

	<span class="token opcode property">RTS</span>

ELSEIF INES_MAPPER == MAPPER_MMC<span class="token decimalnumber string">5</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5114</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$5115</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>Maintain location of the next subroutine</p>
&nbsp;</aside><pre><a name="l5794" href="#l5794" title="Link to line 5794">#</a><code>	unusedSpace <span class="token hexnumber string">$FFA0</span>, <span class="token hexnumber string">$FF</span>

ELSE <span class="token comment">; INES_MAPPER == MAPPER_MMC3</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$86</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8001</span> <span class="token comment">; Change first bank</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; Use the bank right after this one next</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$87</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8001</span> <span class="token comment">; Change second bank</span>
	<span class="token opcode property">RTS</span>

ENDIF

&nbsp;</code></pre><aside><p>Sets the nametable mirroring by writing <code>$A000</code>.</p>
<h5>Input</h5>
<ul>
<li><code>A</code>: <code>$00</code> =  vertical, <code>$01</code> = horizontal</li>
</ul>
&nbsp;</aside><pre><a name="l5819" href="#l5819" title="Link to line 5819">#</a><code>ChangeNametableMirroring:
IF INES_MAPPER == MAPPER_FME<span class="token decimalnumber string">7</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$8000</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> <span class="token hexnumber string">$A000</span>
ELSE
	<span class="token opcode property">STA</span> NametableMapping
ENDIF
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>Unused space in the original ($FFA4 - $FFEA)</p>
&nbsp;</aside><pre><a name="l5832" href="#l5832" title="Link to line 5832">#</a><code>unusedSpace <span class="token hexnumber string">$FFEB</span>, <span class="token hexnumber string">$FF</span>
&nbsp;</code></pre><aside><p>Technically you can delete the stuff from here to the vector table as well,
but because it looks slightly less like unused space it isn't being removed.</p>
&nbsp;</aside><pre><a name="l5836" href="#l5836" title="Link to line 5836">#</a><code>&nbsp;</code></pre><aside><p>Not used; leftover part of FamicomBox cart title?</p>
&nbsp;</aside><pre><a name="l5838" href="#l5838" title="Link to line 5838">#</a><code>UnusedTextZELDA:
	<span class="token directive keyword">.db</span> <span class="token string">'ZELDA'</span>
&nbsp;</code></pre><aside><p>Note that this is NOT CODE.
If the NES actually hits a BRK, the game will probably just explode.
If you wanted, you could write  some sort of crash handler though.</p>
&nbsp;</aside><pre><a name="l5844" href="#l5844" title="Link to line 5844">#</a><code>IRQ:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BE</span>
&nbsp;</code></pre><aside><p>Ensure our vectors are always here</p>
&nbsp;</aside><pre><a name="l5857" href="#l5857" title="Link to line 5857">#</a><code>	<span class="token directive keyword">.pad</span> <span class="token hexnumber string">$FFFA</span>, <span class="token hexnumber string">$FF</span>
&nbsp;</code></pre><aside><p>Vectors for the NES CPU. These should ALWAYS be at $FFFA!
Add a .pad or .base before here if you change code above.
NMI = VBlank
RESET = ...well, reset.
IRQ is not used, but you could if you wanted.</p>
&nbsp;</aside><pre><a name="l5864" href="#l5864" title="Link to line 5864">#</a><code>NESVectorTables:
	<span class="token directive keyword">.dw</span> NMI
IF INES_MAPPER == MAPPER_FME<span class="token decimalnumber string">7</span>
	<span class="token directive keyword">.dw</span> RESET_FME<span class="token decimalnumber string">7</span>
ELSEIF INES_MAPPER == MAPPER_MMC<span class="token decimalnumber string">5</span>
	<span class="token directive keyword">.dw</span> RESET_MMC<span class="token decimalnumber string">5</span>
ELSE <span class="token comment">; INES_MAPPER == MAPPER_MMC3</span>
	<span class="token directive keyword">.dw</span> RESET
ENDIF
	<span class="token directive keyword">.dw</span> IRQ
&nbsp;</code></pre></section></article></main><footer class="Footer-xbtfn2-0 kvnzNL"><p>All product names, logos, and brands are property of their respective owners.</p><p>Annotated disassembly site generator  <!-- -->2019<!-- --> <!-- -->Keith McKnight</p><ul><li><a href="https://github.com/XKeeper0/smb2">GitHub</a></li><li><a href="https://discord.gg/TsWMMeV">Discord</a></li></ul></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/src/prg-e-f.asm";window.webpackCompilationHash="597ab6d0eddc3471edff";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-73183e4eb413cfdc340b.js"],"component---src-templates-asm-source-jsx":["/component---src-templates-asm-source-jsx-3bb2cbd0a842989d029d.js"],"component---src-templates-asm-directory-jsx":["/component---src-templates-asm-directory-jsx-99cfe395a82c27d3aeb9.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-cc5d31acb9d9c591cc78.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-cab01fe6ec86f8921fbe.js"]};/*]]>*/</script><script src="/smb2/component---src-templates-asm-source-jsx-3bb2cbd0a842989d029d.js" async=""></script><script src="/smb2/commons-a9b9bc07b970d3a1ecc3.js" async=""></script><script src="/smb2/app-73183e4eb413cfdc340b.js" async=""></script><script src="/smb2/webpack-runtime-e27abee7082aa8f18f3b.js" async=""></script></body></html>