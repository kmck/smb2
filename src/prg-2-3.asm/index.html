<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.15.20"/><title data-react-helmet="true">/src/prg-2-3.asm | Super Mario Bros 2. Discombobulated</title><meta data-react-helmet="true" name="description" content="The annotated disassembly of SMB2 (USA) for NES."/><meta data-react-helmet="true" property="og:title" content="/src/prg-2-3.asm"/><meta data-react-helmet="true" property="og:description" content="The annotated disassembly of SMB2 (USA) for NES."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Keith McKnight"/><meta data-react-helmet="true" name="twitter:title" content="/src/prg-2-3.asm"/><meta data-react-helmet="true" name="twitter:description" content="The annotated disassembly of SMB2 (USA) for NES."/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><link as="script" rel="preload" href="/webpack-runtime-14b29e9f338a0ab3ef0b.js"/><link as="script" rel="preload" href="/app-e5123abf2b9d78ccb9b7.js"/><link as="script" rel="preload" href="/commons-96edcb9e9a406c302a22.js"/><link as="script" rel="preload" href="/component---src-templates-asm-source-jsx-2a3033eb4063531183b6.js"/><link as="fetch" rel="preload" href="/page-data/src/prg-2-3.asm/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="sc-bxivhb itivNt"><header class="sc-bwzfXH kFCqhj"><a href="https://github.com/XKeeper0/smb2"><svg class="sc-bdVaJa eSEdyA" fill="#fcfcfc" height="80" viewBox="0 0 250 250" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M0 0l115 115h15l12 27 108 108V0z"></path><g class="octocat" fill="#f65b98"><path class="octocat-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="transform-origin:130px 106px"></path><path class="octocat-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></g></svg></a><h1><a href="/">Super Mario Bros 2. Discombobulated</a></h1><p>The annotated disassembly of SMB2 (USA) for NES.</p></header><main><article class="sc-ifAKCX fpwdji"><header><h3>/src/prg-2-3.asm</h3></header><section><aside><h1>Bank 2 &#x26; Bank 3</h1>
<p>What's inside:</p>
<ul>
<li>Enemy initialization and logic</li>
</ul>
&nbsp;</aside><pre><a name="l9" href="#l9" title="Link to line 9">#</a><code>
CarryYOffsets:
CarryYOffsetBigLo:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F6</span> <span class="token comment">; Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F7</span> <span class="token comment">; Luigi</span>

CarryYOffsetBigHi:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Luigi</span>

CarryYOffsetSmallLo:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span> <span class="token comment">; Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Luigi</span>

CarryYOffsetSmallHi:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Luigi</span>


AreaMainRoutine:
	<span class="token opcode property">LDA</span> DoAreaTransition
	<span class="token opcode property">BEQ</span> AreaMainRoutine_NoTransition
	<span class="token opcode property">RTS</span>

AreaMainRoutine_NoTransition:
	<span class="token opcode property">LDA</span> AreaInitialized
	<span class="token opcode property">BEQ</span> AreaInitialization

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">816</span>C

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l48" href="#l48" title="Link to line 48">#</a><code>AreaInitialization:
	<span class="token opcode property">INC</span> AreaInitialized
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>BA
	<span class="token opcode property">STA</span> POWQuakeTimer
	<span class="token opcode property">STA</span> SkyFlashTimer
	<span class="token opcode property">STA</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">STA</span> HawkmouthClosing
	<span class="token opcode property">STA</span> SwarmType
	<span class="token opcode property">STA</span> HawkmouthOpenTimer
	<span class="token opcode property">STA</span> ScrollXLock
	<span class="token opcode property">STA</span> VerticalScrollDirection
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">STA</span> DamageInvulnTime
	<span class="token opcode property">STA</span> HoldingItem
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">STA</span> BackgroundYOffset
	<span class="token opcode property">STA</span> PokeyTempScreenX
	<span class="token opcode property">STA</span> CrouchJumpTimer
	<span class="token opcode property">STA</span> JumpFloatTimer
	<span class="token opcode property">STA</span> QuicksandDepth
	<span class="token opcode property">STA</span> BossBeaten

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STY</span> BossTileset
	<span class="token opcode property">INC</span> ResetCHRLatch
ENDIF

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$1B</span>
AreaInitialization_CarryYOffsetLoop:&nbsp;</code></pre><aside><p>Copy the global carrying Y offsets to memory
These are used for every character for different frames of the pickup animation</p>
&nbsp;</aside><pre><a name="l81" href="#l81" title="Link to line 81">#</a><code>	<span class="token opcode property">LDA</span> ItemCarryYOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> AreaInitialization_CarryYOffsetLoop

IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">JSR</span> CopyCarryYOffsets
ENDIF
&nbsp;</code></pre><aside><p>Copy the character-specific FINAL carrying heights into memory</p>
&nbsp;</aside><pre><a name="l91" href="#l91" title="Link to line 91">#</a><code>	<span class="token opcode property">LDY</span> CurrentCharacter
	<span class="token opcode property">LDA</span> CarryYOffsetBigLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM
	<span class="token opcode property">LDA</span> CarryYOffsetSmallLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM + <span class="token hexnumber string">$07</span>
	<span class="token opcode property">LDA</span> CarryYOffsetBigHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM + <span class="token hexnumber string">$0E</span>
	<span class="token opcode property">LDA</span> CarryYOffsetSmallHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM + <span class="token hexnumber string">$15</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B6</span>
	<span class="token opcode property">STA</span> PseudoRNGValues
	<span class="token opcode property">LDA</span> TransitionType
&nbsp;</code></pre><aside><p>Play the slide-whistle when you start the game and drop into 1-1</p>
&nbsp;</aside><pre><a name="l106" href="#l106" title="Link to line 106">#</a><code>	<span class="token opcode property">ORA</span> CurrentLevel
	<span class="token opcode property">BNE</span> AreaInitialization_CheckObjectCarriedOver

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">2</span>_IntroFallSlide
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>

AreaInitialization_CheckObjectCarriedOver:
	<span class="token opcode property">LDA</span> ObjectCarriedOver
	<span class="token opcode property">BEQ</span> AreaInitialization_SetEnemyData

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">CMP</span> #Enemy_Mushroom
	<span class="token opcode property">BEQ</span> AreaInitialization_SetEnemyData

	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> #EnemyState_Alive
	<span class="token opcode property">STY</span> EnemyState + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STY</span> unk_RAM_<span class="token decimalnumber string">441</span> + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">CMP</span> #Enemy_Rocket
	<span class="token opcode property">BNE</span> AreaInitialization_NonRocketCarryOver

AreaInitialization_Rocket:&nbsp;</code></pre><aside><p>A = $38 (Enemy_Rocket)
X = $05 (from above)</p>
&nbsp;</aside><pre><a name="l132" href="#l132" title="Link to line 132">#</a><code>	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerInRocket, <span class="token register variable">X</span> <span class="token comment">; Bug? This sets ObjectXAcceleration for enemy 0</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> AreaInitialization_SetEnemyData

AreaInitialization_NonRocketCarryOver:
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">STX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> HoldingItem
	<span class="token opcode property">JSR</span> CarryObject

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">CMP</span> #Enemy_Key
	<span class="token opcode property">BNE</span> AreaInitialization_SetEnemyData

AreaInitialization_KeyCarryOver:
	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> #EnemyState_Alive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_Phanto
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PhantoActivateTimer
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> UnlinkEnemyFromRawData

AreaInitialization_SetEnemyData:
	<span class="token opcode property">LDA</span> #&#x3C;RawEnemyDataAddr
	<span class="token opcode property">STA</span> RawEnemyData
	<span class="token opcode property">LDA</span> #>RawEnemyDataAddr
	<span class="token opcode property">STA</span> RawEnemyData + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> AreaInitialization_HorizontalArea

AreaInitialization_VerticalArea:&nbsp;</code></pre><aside><p>Loads area enemies based on the vertical screen scroll</p>
&nbsp;</aside><pre><a name="l194" href="#l194" title="Link to line 194">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8124</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0B</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8130</span>

	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8311</span>
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8311</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8130</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8138</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8124</span>

	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function AreaMainRoutine</p>
&nbsp;</aside><pre><a name="l221" href="#l221" title="Link to line 221">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l223" href="#l223" title="Link to line 223">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8138</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BCC</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8143</span>

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">6</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8143</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_8138</p>
&nbsp;</aside><pre><a name="l237" href="#l237" title="Link to line 237">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l239" href="#l239" title="Link to line 239">#</a><code>AreaInitialization_HorizontalArea:&nbsp;</code></pre><aside><p>Loads area enemies based on the horizontal screen scroll</p>
&nbsp;</aside><pre><a name="l242" href="#l242" title="Link to line 242">#</a><code>	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$17</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8158</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> #$B
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8164</span>

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">827</span>D
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">827</span>D

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8164</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8138</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8158</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l269" href="#l269" title="Link to line 269">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">816</span>C:
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8256</span>

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">JSR</span> CheckResetCHRLatch
ENDIF

	<span class="token opcode property">LDA</span> StopwatchTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8185</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">817</span>F

	<span class="token opcode property">LDY</span> #SoundEffect<span class="token decimalnumber string">1</span>_StopwatchTick
	<span class="token opcode property">STY</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">817</span>F:
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8185</span>

	<span class="token opcode property">DEC</span> StopwatchTimer

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8185</span>:
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> ScreenBoundaryRightLo
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ScreenBoundaryRightHi
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8198</span>:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> SpriteFlickerSlot
	<span class="token opcode property">TAY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> SpriteFlickerDMAOffset, <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>B<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> #Enemy_BeezoStraight
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Rocket
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>B<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>B<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_Dead
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>C<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>C<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> StopwatchTimer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>D<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>C<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>CA

	<span class="token opcode property">DEC</span> EnemyTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>CA:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>D<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEC</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>D<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>D<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>DA

	<span class="token opcode property">DEC</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>DA:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>E<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>E<span class="token decimalnumber string">7</span>

	<span class="token opcode property">DEC</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">81</span>E<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">JSR</span> DoPRNGBullshitProbably

	<span class="token opcode property">JSR</span> PutCarriedObjectInHands

	<span class="token opcode property">JSR</span> HandleEnemyState

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8198</span>

	<span class="token opcode property">LDA</span> SwarmType
	<span class="token opcode property">BEQ</span> HandleEnemyState_Inactive

InitializeSwarm:
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #((EnemyInitializationTable_End - EnemyInitializationTable) / <span class="token decimalnumber string">2</span>)

InitializeSwarmRelative:
	<span class="token opcode property">JSR</span> JumpToTableAfterJump


GeneratorInitializationTable:
	<span class="token directive keyword">.dw</span> Swarm_AlbatossCarryingBobOmb
	<span class="token directive keyword">.dw</span> Swarm_BeezoDiving
	<span class="token directive keyword">.dw</span> Swarm_Stop
	<span class="token directive keyword">.dw</span> Generator_VegetableThrower
GeneratorInitializationTable_End:


Swarm_Stop:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> SwarmType

HandleEnemyState_Inactive:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function Swarm_Stop</p>
&nbsp;</aside><pre><a name="l403" href="#l403" title="Link to line 403">#</a><code>&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l405" href="#l405" title="Link to line 405">#</a><code>
&nbsp;</code></pre><aside><p>I am very good at figuring out what things do. Yes.</p>
&nbsp;</aside><pre><a name="l407" href="#l407" title="Link to line 407">#</a><code>DoPRNGBullshitProbably:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8214</span>

	<span class="token opcode property">INY</span>
&nbsp;</code></pre><aside><p>End of function DoPRNGBullshitProbably</p>
&nbsp;</aside><pre><a name="l415" href="#l415" title="Link to line 415">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l417" href="#l417" title="Link to line 417">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8214</span>:
	<span class="token opcode property">LDA</span> PseudoRNGValues
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">ADC</span> PseudoRNGValues
	<span class="token opcode property">STA</span> PseudoRNGValues
	<span class="token opcode property">ASL</span> PseudoRNGValues + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BIT</span> PseudoRNGValues + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">822</span>E

	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8233</span>

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8230</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">822</span>E:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8233</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8230</span>:
	<span class="token opcode property">INC</span> PseudoRNGValues + <span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8233</span>:
	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">EOR</span> PseudoRNGValues
	<span class="token opcode property">STA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_8214</p>
&nbsp;</aside><pre><a name="l447" href="#l447" title="Link to line 447">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l449" href="#l449" title="Link to line 449">#</a><code>HandleEnemyState:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> JumpToTableAfterJump

	<span class="token directive keyword">.dw</span> HandleEnemyState_Inactive <span class="token comment">; 0 (not active)</span>
	<span class="token directive keyword">.dw</span> HandleEnemyState_Alive <span class="token comment">; Alive</span>
	<span class="token directive keyword">.dw</span> HandleEnemyState_Dead <span class="token comment">; Dead</span>
	<span class="token directive keyword">.dw</span> HandleEnemyState_BlockFizzle <span class="token comment">; Block fizzle</span>
	<span class="token directive keyword">.dw</span> HandleEnemyState_BombExploding <span class="token comment">; Bomb exploding</span>
	<span class="token directive keyword">.dw</span> HandleEnemyState_PuffOfSmoke <span class="token comment">; Puff of smoke</span>
	<span class="token directive keyword">.dw</span> HandleEnemyState_Sand <span class="token comment">; Sand after digging</span>
	<span class="token directive keyword">.dw</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>B<span class="token decimalnumber string">2</span> <span class="token comment">; Object carried/thrown?</span>


byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8252</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>


loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8256</span>:
	<span class="token opcode property">LDA</span> BossBeaten
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AB

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">JSR</span> JumpToTableAfterJump

	<span class="token directive keyword">.dw</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>ED <span class="token comment">; vertical</span>
	<span class="token directive keyword">.dw</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8264</span> <span class="token comment">; horizontal</span>


loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8264</span>:
	<span class="token opcode property">LDY</span> PlayerMovementDirection
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8252</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8252</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AB

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l496" href="#l496" title="Link to line 496">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">827</span>D:
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AB

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8288</span>:
	<span class="token opcode property">CPX</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8298</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8288</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l518" href="#l518" title="Link to line 518">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8298</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>:
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AC

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AB:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l540" href="#l540" title="Link to line 540">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AC:
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>

	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span><span class="token register variable">A</span><span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_BossBirdo
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>C<span class="token decimalnumber string">8</span>

	<span class="token opcode property">CMP</span> #((EnemyInitializationTable_End - EnemyInitializationTable) / <span class="token decimalnumber string">2</span>)
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>C<span class="token decimalnumber string">8</span>

	<span class="token opcode property">STA</span> SwarmType
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l564" href="#l564" title="Link to line 564">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>C<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$04</span>
loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>CA:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>D<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>CA

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l577" href="#l577" title="Link to line 577">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>D<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8377</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_827D</p>
&nbsp;</aside><pre><a name="l597" href="#l597" title="Link to line 597">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l599" href="#l599" title="Link to line 599">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>ED:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>FC

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>FC:
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8252</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8252</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">82</span>AB

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8311</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8315</span>:
	<span class="token opcode property">CPX</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8325</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8315</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l641" href="#l641" title="Link to line 641">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8325</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">832</span>E:
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8339</span>

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8338</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l663" href="#l663" title="Link to line 663">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8339</span>:
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">832</span>E

	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">832</span>E

	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_BossBirdo
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8357</span>

	<span class="token opcode property">CMP</span> #((EnemyInitializationTable_End - EnemyInitializationTable) / <span class="token decimalnumber string">2</span>)
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8357</span>

	<span class="token opcode property">STA</span> SwarmType
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l689" href="#l689" title="Link to line 689">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8357</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$04</span>
loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8359</span>:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8361</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8359</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l702" href="#l702" title="Link to line 702">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8361</span>:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8377</span>:
	<span class="token opcode property">STA</span> EnemyArray_SpawnsDoor, <span class="token register variable">X</span>
	<span class="token opcode property">STY</span> byte_RAM_C
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00111111</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$32</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8393</span>

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8393</span>

	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BCC</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8338</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8393</span>:&nbsp;</code></pre><aside><p>enable bit 7 of the raw enemy data to indicate that the enemy has spawned</p>
&nbsp;</aside><pre><a name="l737" href="#l737" title="Link to line 737">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_C
	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> <span class="token binarynumber string">#%10000000</span>
	<span class="token opcode property">STA</span> (RawEnemyData), <span class="token register variable">Y</span>

	<span class="token opcode property">CMP</span> <span class="token binarynumber string">#%10000000</span> | Enemy_BossBirdo
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%01111111</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">83</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00111111</span>
	<span class="token opcode property">STA</span> EnemyArray_SpawnsDoor, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">83</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>:
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>

InitializeEnemy:
	<span class="token opcode property">JSR</span> JumpToTableAfterJump
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l760" href="#l760" title="Link to line 760">#</a><code>EnemyInitializationTable:
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Heart</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; ShyguyRed</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Tweeter</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; ShyguyPink</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Porcupo</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; SnifitRed</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Stationary <span class="token comment">; SnifitGray</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; SnifitPink</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Ostro</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Bobomb <span class="token comment">; BobOmb</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.dw</span> EnemyInit_AlbatossStartRight <span class="token comment">; AlbatossStartRight</span>
	<span class="token directive keyword">.dw</span> EnemyInit_AlbatossStartLeft <span class="token comment">; AlbatossStartLeft</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; NinjiRunning</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Stationary <span class="token comment">; NinjiJumping</span>
	<span class="token directive keyword">.dw</span> EnemyInit_BeezoDiving <span class="token comment">; BeezoDiving</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; BeezoStraight</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; WartBubble</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Pidgit</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Trouter <span class="token comment">; Trouter</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Hoopstar</span>
	<span class="token directive keyword">.dw</span> EnemyInit_JarGenerators <span class="token comment">; JarGeneratorShyguy</span>
	<span class="token directive keyword">.dw</span> EnemyInit_JarGenerators <span class="token comment">; JarGeneratorBobOmb</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Phanto <span class="token comment">; Phanto</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Cobrats <span class="token comment">; CobratJar</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Cobrats <span class="token comment">; CobratSand</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Pokey <span class="token comment">; Pokey</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Bullet</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Birdo <span class="token comment">; Birdo</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Mouser <span class="token comment">; Mouser</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Egg</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Tryclyde <span class="token comment">; Tryclyde</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Fireball</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Clawgrip <span class="token comment">; Clawgrip</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; ClawgripRock</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Stationary <span class="token comment">; PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; PanserWalking</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Stationary <span class="token comment">; PanserStationaryFiresUp</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Autobomb</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; AutobombFire</span>
	<span class="token directive keyword">.dw</span> EnemyInit_WhaleSpout <span class="token comment">; WhaleSpout</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Flurry</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Fryguy <span class="token comment">; Fryguy</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Fryguy <span class="token comment">; FryguySplit</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Wart <span class="token comment">; Wart</span>
	<span class="token directive keyword">.dw</span> EnemyInit_HawkmouthBoss <span class="token comment">; HawkmouthBoss</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Sparks <span class="token comment">; Spark1</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Sparks <span class="token comment">; Spark2</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Sparks <span class="token comment">; Spark3</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Sparks <span class="token comment">; Spark4</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; VegetableSmall</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; VegetableLarge</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; VegetableWart</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Shell</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Coin</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Bomb</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; Rocket</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; MushroomBlock</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; POWBlock</span>
	<span class="token directive keyword">.dw</span> EnemyInit_FallingLogs <span class="token comment">; FallingLogs</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; SubspaceDoor</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Key <span class="token comment">; Key</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; SubspacePotion</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Stationary <span class="token comment">; Mushroom</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Stationary <span class="token comment">; Mushroom1up</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Basic <span class="token comment">; FlyingCarpet</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Hawkmouth <span class="token comment">; HawkmouthRight</span>
	<span class="token directive keyword">.dw</span> EnemyInit_Hawkmouth <span class="token comment">; HawkmouthLeft</span>
	<span class="token directive keyword">.dw</span> EnemyInit_CrystalBallStarmanStopwatch <span class="token comment">; CrystalBall</span>
	<span class="token directive keyword">.dw</span> EnemyInit_CrystalBallStarmanStopwatch <span class="token comment">; Starman</span>
	<span class="token directive keyword">.dw</span> EnemyInit_CrystalBallStarmanStopwatch <span class="token comment">; Stopwatch</span>
EnemyInitializationTable_End:

&nbsp;</code></pre><aside><p>Sets enemy attributes to the default for the object type</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l841" href="#l841" title="Link to line 841">#</a><code>SetEnemyAttributes:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAttributeTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">489</span>_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">492</span>_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">492</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Enemy initialization with a timer reset</p>
&nbsp;</aside><pre><a name="l858" href="#l858" title="Link to line 858">#</a><code>EnemyInit_Basic:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Enemy initialization without an explicit timer reset</p>
<p>Most things are set to $00</p>
&nbsp;</aside><pre><a name="l867" href="#l867" title="Link to line 867">#</a><code>EnemyInit_BasicWithoutTimer:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; You do realize you already LDA #$00, right???</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

EnemyInit_BasicAttributes:
	<span class="token opcode property">JSR</span> SetEnemyAttributes
&nbsp;</code></pre><aside><p>Initialize enemy movement in direction of player</p>
&nbsp;</aside><pre><a name="l891" href="#l891" title="Link to line 891">#</a><code>EnemyInit_BasicMovementTowardPlayer:
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn
&nbsp;</code></pre><aside><p>Initialize enemy movement
Y = 1 (move to the left)
Y = 0 (move to the right)</p>
&nbsp;</aside><pre><a name="l897" href="#l897" title="Link to line 897">#</a><code>EnemyInit_BasicMovement:
	<span class="token opcode property">INY</span> <span class="token comment">; uses using index 1 or 2 of EnemyInitialAccelerationTable</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyInitialAccelerationTable, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Double the speed of objects when bit 6 of 46E is set</p>
&nbsp;</aside><pre><a name="l904" href="#l904" title="Link to line 904">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%01000000</span>
	<span class="token opcode property">BEQ</span> EnemyInit_BasicMovementExit
	<span class="token opcode property">ASL</span> ObjectXVelocity, <span class="token register variable">X</span> <span class="token comment">; Change the speed of certain objects?</span>

EnemyInit_BasicMovementExit:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function EnemyInit_BasicWithoutTimer</p>
&nbsp;</aside><pre><a name="l913" href="#l913" title="Link to line 913">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l915" href="#l915" title="Link to line 915">#</a><code>BeezoXOffsetTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span> <span class="token comment">; If player moving right</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; If moving left</span>
BeezoDiveSpeedTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span>,<span class="token hexnumber string">$16</span>,<span class="token hexnumber string">$1A</span>,<span class="token hexnumber string">$1E</span>,<span class="token hexnumber string">$22</span>,<span class="token hexnumber string">$26</span>,<span class="token hexnumber string">$2A</span>,<span class="token hexnumber string">$2D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span>,<span class="token hexnumber string">$32</span>,<span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$37</span>,<span class="token hexnumber string">$39</span>,<span class="token hexnumber string">$3B</span>,<span class="token hexnumber string">$3D</span>,<span class="token hexnumber string">$3E</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l922" href="#l922" title="Link to line 922">#</a><code>EnemyInit_BeezoDiving:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDY</span> PlayerMovementDirection <span class="token comment">; $02 = left, $01 = right</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">ADC</span> BeezoXOffsetTable - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span> <span class="token comment">; Spawn in front of the player to dive at them</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l935" href="#l935" title="Link to line 935">#</a><code>EnemyBeezoDiveSetup:
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">84</span>D<span class="token decimalnumber string">5</span>
&nbsp;</code></pre><aside><p>If above the screen, just abort and use the least descend-y one</p>
&nbsp;</aside><pre><a name="l941" href="#l941" title="Link to line 941">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">84</span>DF

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">84</span>D<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> PlayerYLo <span class="token comment">; Check how far down on the screen the player is</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenYLo
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span> <span class="token comment">; And then take only the highest 4 bits</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span> <span class="token comment">; (divide by 16)</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">84</span>DF:
	<span class="token opcode property">LDA</span> BeezoDiveSpeedTable, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function EnemyBeezoDiveSetup</p>
&nbsp;</aside><pre><a name="l960" href="#l960" title="Link to line 960">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l962" href="#l962" title="Link to line 962">#</a><code>EnemyInit_Phanto:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> PhantoActivateTimer
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l973" href="#l973" title="Link to line 973">#</a><code>EnemyInit_Bobomb:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function EnemyInit_Bobomb</p>
&nbsp;</aside><pre><a name="l982" href="#l982" title="Link to line 982">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l984" href="#l984" title="Link to line 984">#</a><code>HandleEnemyState_Dead:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>CC

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8500</span>:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> MakeEnemyFlipUpsideDown

	<span class="token opcode property">LDA</span> EnemyArray_SpawnsDoor, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyDeathMaybe

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8509</span>:
	<span class="token opcode property">STA</span> BossBeaten
	<span class="token opcode property">JSR</span> DestroyOnscreenEnemies

	<span class="token opcode property">JSR</span> Swarm_Stop

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_BossClearFanfare
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">4</span>EF, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B0</span>
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_Clawgrip
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">852</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$70</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">852</span>D:
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%01000001</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> TurnIntoPuffOfSmoke

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1026" href="#l1026" title="Link to line 1026">#</a><code>EnemyDeathMaybe:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Bullet <span class="token comment">; "Stray bullet" enemy type</span>
	<span class="token opcode property">BEQ</span> MakeEnemyFlipUpsideDown

	<span class="token opcode property">INC</span> EnemiesKilledForHeart
	<span class="token opcode property">LDY</span> EnemiesKilledForHeart
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$08</span> <span class="token comment">; number of enemies to kill before a heart appears</span>
	<span class="token opcode property">BCC</span> MakeEnemyFlipUpsideDown

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; reset enemy kill counter for heart counter</span>
	<span class="token opcode property">STA</span> EnemiesKilledForHeart

	<span class="token opcode property">LDA</span> #EnemyState_Alive <span class="token comment">; convert dead enemy to living heart</span>
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000111</span> <span class="token comment">; what's this magic number for?</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_Heart
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$60</span> <span class="token comment">; subtract this amount from the y position where the enemy despawned</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>

&nbsp;</code></pre><aside><p>Spawned enemies are linked to an offset in the raw enemy data, which prevents
from being respawned until they are killed or moved offscreen.</p>
<p>This subroutine ensures that the enemy in a particular slot is not linked to
the raw enemy data
s
Input
X = enemy slot</p>
&nbsp;</aside><pre><a name="l1065" href="#l1065" title="Link to line 1065">#</a><code>UnlinkEnemyFromRawData:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


MakeEnemyFlipUpsideDown:
	<span class="token opcode property">ASL</span> ObjectAttributes, <span class="token register variable">X</span> <span class="token comment">; Shift left...</span>
	<span class="token opcode property">SEC</span> <span class="token comment">; Set carry...</span>
	<span class="token opcode property">ROR</span> ObjectAttributes, <span class="token register variable">X</span> <span class="token comment">; Shift right. Effectively sets $80 bit</span>

RenderSpriteAndApplyObjectMovement:
	<span class="token opcode property">JSR</span> RenderSprite

&nbsp;</code></pre><aside><p>Applies object physics</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l1086" href="#l1086" title="Link to line 1086">#</a><code>ApplyObjectMovement:&nbsp;</code></pre><aside><p>disable horiziontal physics while shaking</p>
&nbsp;</aside><pre><a name="l1088" href="#l1088" title="Link to line 1088">#</a><code>	<span class="token opcode property">LDA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> ApplyObjectMovement_Vertical

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

ApplyObjectMovement_Vertical:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> ApplyObjectMovement_Gravity
&nbsp;</code></pre><aside><p>Check terminal velocity</p>
&nbsp;</aside><pre><a name="l1100" href="#l1100" title="Link to line 1100">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$3E</span>
	<span class="token opcode property">BCS</span> ApplyObjectMovement_Exit

ApplyObjectMovement_Gravity:
	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>

ApplyObjectMovement_Exit:
	<span class="token opcode property">RTS</span>


HandleEnemyState_BlockFizzle:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AF

	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000001</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">CPY</span> #$C
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AC

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3E</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AC:
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1135" href="#l1135" title="Link to line 1135">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AF:
	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1140" href="#l1140" title="Link to line 1140">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>B<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> #EnemyState_Alive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1154" href="#l1154" title="Link to line 1154">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AF

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>E<span class="token decimalnumber string">1</span>

	<span class="token opcode property">JSR</span> IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>E<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9486</span>

	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>CC


ExplosionTileXOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>

ExplosionTileYOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>

EnemyInitialAccelerationTable:&nbsp;</code></pre><aside><p>these values are shared with ExplosionTileYOffsets!</p>
&nbsp;</aside><pre><a name="l1199" href="#l1199" title="Link to line 1199">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>


HandleEnemyState_BombExploding:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">ORA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AF

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">85</span>AF

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$1A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8610</span>

	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$11</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8610</span>

	<span class="token opcode property">TAY</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8670</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8610</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$40</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8618</span>:
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ExplosionTileYOffsets, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ExplosionTileXOffsets, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8618</span>

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>CC

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1260" href="#l1260" title="Link to line 1260">#</a><code>locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8649</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1265" href="#l1265" title="Link to line 1265">#</a><code>byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">864</span><span class="token register variable">A</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8653</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">865</span>C:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8665</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">866</span>E:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1314" href="#l1314" title="Link to line 1314">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8670</span>:
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">864</span><span class="token register variable">A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8653</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_D
	<span class="token opcode property">CMP</span> #$B
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8649</span>

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">865</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_E
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8665</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">CMP</span> #$<span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8649</span>

	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>BD

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> byte_RAM_E
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> byte_RAM_E
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> byte_RAM_E
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> byte_RAM_E
	<span class="token opcode property">LDA</span> byte_RAM_E

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FF</span>
loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>AD:
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>AD

	<span class="token opcode property">STY</span> byte_RAM_D
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>BD:
	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">ORA</span> byte_RAM_E
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">CMP</span> #$<span class="token register variable">A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>D<span class="token decimalnumber string">5</span>

	<span class="token opcode property">STY</span> byte_RAM_D
	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>D<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">866</span>E, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDY</span> byte_RAM_D

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">7</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$9D</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8701</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$93</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8701</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$72</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8701</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1414" href="#l1414" title="Link to line 1414">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8701</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">7</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_D
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">870</span>C:
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8712</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8712</span>:
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">6</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">5</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">874</span>B:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">7</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FA</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">8</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">10</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> #$<span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">876</span>F:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8778</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">876</span>F

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8795</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8778</span>:
	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_D
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8785</span>

	<span class="token opcode property">TYA</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8785</span>:
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_B
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicWithoutTimer

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>C<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8795</span>:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8797</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_8670</p>
&nbsp;</aside><pre><a name="l1515" href="#l1515" title="Link to line 1515">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1517" href="#l1517" title="Link to line 1517">#</a><code>byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8798</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$46</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$52</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1523" href="#l1523" title="Link to line 1523">#</a><code>HandleEnemyState_PuffOfSmoke:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_Mirrored
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>AC

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span><span class="token register variable">A</span><span class="token decimalnumber string">9</span>:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8842</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1537" href="#l1537" title="Link to line 1537">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>AC:
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8798</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> EnemyArray_SpawnsDoor, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8797</span>

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8797</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$22</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Clawgrip
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>CA
&nbsp;</code></pre><aside><p>Clawgrip special hack:
Move the "Draw the door" PPU command
up 8 tile rows ($100) to be on the platform</p>
&nbsp;</aside><pre><a name="l1561" href="#l1561" title="Link to line 1561">#</a><code>	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>CA:
	<span class="token opcode property">STY</span> PPUBuffer_<span class="token decimalnumber string">721</span>B
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">7222</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">7229</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">7232</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>D<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">4</span>EF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">LDX</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>E<span class="token decimalnumber string">7</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>E<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDX</span> EndOfLevelDoorRowOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> PPUBuffer_<span class="token decimalnumber string">721</span>B, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">721</span>B, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">87</span>D<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">LDY</span> unk_RAM_<span class="token decimalnumber string">4</span>EF, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$5F</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8804</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8804</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Clawgrip
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8827</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8827</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$B8</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$56</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C8</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$53</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$B9</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$CA</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$54</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C9</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1638" href="#l1638" title="Link to line 1638">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8842</span>:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_FryguySplit
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8855</span>

	<span class="token opcode property">DEC</span> FryguySplitFlames
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8855</span>

	<span class="token opcode property">INC</span> EnemyArray_SpawnsDoor, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8509</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1652" href="#l1652" title="Link to line 1652">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8855</span>:
	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1657" href="#l1657" title="Link to line 1657">#</a><code>HandleEnemyState_Sand:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$12</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8888</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B2</span>
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8885</span>

	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%10000000</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B4</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8885</span>:
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1690" href="#l1690" title="Link to line 1690">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8888</span>:
	<span class="token opcode property">CPX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8891</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> HoldingItem

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8891</span>:
	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1702" href="#l1702" title="Link to line 1702">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8894</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_EE
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Horizontal
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Pokey
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">CMP</span> #Enemy_Ostro
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">CMP</span> #Enemy_HawkmouthBoss
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">CMP</span> #Enemy_Clawgrip
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00100000</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>BB

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>B<span class="token decimalnumber string">9</span>:&nbsp;</code></pre><aside><p>something for double-wide sprites?</p>
&nbsp;</aside><pre><a name="l1730" href="#l1730" title="Link to line 1730">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
&nbsp;</code></pre><aside><p>seems to be logic for positioning sprites onscreen</p>
&nbsp;</aside><pre><a name="l1733" href="#l1733" title="Link to line 1733">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>BB:
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_E
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">CMP</span> ScreenBoundaryLeftLo
	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftHi
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DC

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">ORA</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">0</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_EE

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DC:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>BB

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DF:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_8894</p>
&nbsp;</aside><pre><a name="l1759" href="#l1759" title="Link to line 1759">#</a><code>&nbsp;</code></pre><aside><hr>
<p>threshold for x-wrapping sprites near the edge of the screen</p>
&nbsp;</aside><pre><a name="l1762" href="#l1762" title="Link to line 1762">#</a><code>byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">0</span>: <span class="token comment">; hi</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">4</span>: <span class="token comment">; lo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1774" href="#l1774" title="Link to line 1774">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8894</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$22</span>
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_Wart
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">9</span>

	<span class="token opcode property">CPY</span> #Enemy_Tryclyde
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">ADC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> ScreenYLo
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">SBC</span> ScreenYHi
	<span class="token opcode property">STA</span> byte_RAM_EF

	<span class="token opcode property">CPY</span> #Enemy_Phanto
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DF

	<span class="token opcode property">CPY</span> #Enemy_FlyingCarpet
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DF

	<span class="token opcode property">CPY</span> #Enemy_HawkmouthLeft
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DF

	<span class="token opcode property">CPY</span> #Enemy_HawkmouthBoss
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DF

	<span class="token opcode property">TXA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">EOR</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>DF

	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryRightLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryRightHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">899</span>C

	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BMI</span> EnemyDestroy_Exit

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">899</span>C:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> EnemyDestroy_Exit

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyDestroy_Exit
&nbsp;</code></pre><aside><p>End of function sub_BANK2_88E8</p>
&nbsp;</aside><pre><a name="l1895" href="#l1895" title="Link to line 1895">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1897" href="#l1897" title="Link to line 1897">#</a><code>EnemyDestroy:&nbsp;</code></pre><aside><p>load raw enemy data offset so we can allow the level object to respawn</p>
&nbsp;</aside><pre><a name="l1900" href="#l1900" title="Link to line 1900">#</a><code>	<span class="token opcode property">LDY</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>&nbsp;</code></pre><aside><p>nothing to reset if offset is invalid</p>
&nbsp;</aside><pre><a name="l1902" href="#l1902" title="Link to line 1902">#</a><code>	<span class="token opcode property">BMI</span> EnemyDestroy_AfterAllowRespawn
&nbsp;</code></pre><aside><p>disabling bit 7 allows the object to respawn</p>
&nbsp;</aside><pre><a name="l1905" href="#l1905" title="Link to line 1905">#</a><code>	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STA</span> (RawEnemyData), <span class="token register variable">Y</span>

EnemyDestroy_AfterAllowRespawn:
	<span class="token opcode property">LDA</span> #EnemyState_Inactive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>

EnemyDestroy_Exit:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function EnemyDestroy</p>
&nbsp;</aside><pre><a name="l1917" href="#l1917" title="Link to line 1917">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1919" href="#l1919" title="Link to line 1919">#</a><code>HandleEnemyState_Alive:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>C<span class="token decimalnumber string">9</span>

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>C<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">88</span>E<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_ChangingSize
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">07</span>

	<span class="token opcode property">LDA</span> StopwatchTimer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span><span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>E<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>

IFDEF REV_A
	<span class="token opcode property">CMP</span> #Enemy_FryguySplit
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span><span class="token register variable">A</span>
ENDIF

	<span class="token opcode property">CMP</span> #Enemy_Heart
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span><span class="token register variable">A</span>

	<span class="token opcode property">CMP</span> #Enemy_FlyingCarpet
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>F<span class="token decimalnumber string">0</span>

	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span><span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>F<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>FB

	<span class="token opcode property">JSR</span> ApplyObjectMovement

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">89</span>FB:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">04</span>

	<span class="token opcode property">DEC</span> ObjectAnimationTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">01</span>:
	<span class="token opcode property">JMP</span> CarryObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1982" href="#l1982" title="Link to line 1982">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">04</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>CC

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">07</span>:
	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1990" href="#l1990" title="Link to line 1990">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">15</span>

	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">13</span>

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">13</span>:
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">15</span>:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAttributeTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Palette<span class="token decimalnumber string">0</span> | ObjAttrib_BehindBackground
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">41</span>

	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_UpsideDown
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">41</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_BobOmb
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">36</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">3</span>B

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">36</span>:
	<span class="token opcode property">LDA</span> ObjectAttributeTable, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">41</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">3</span>B:
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">41</span>:
	<span class="token opcode property">JSR</span> RunEnemyBehavior

	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">50</span>

	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$E8</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">50</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2046" href="#l2046" title="Link to line 2046">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">50</span>:
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>CC

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2051" href="#l2051" title="Link to line 2051">#</a><code>RunEnemyBehavior:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> JumpToTableAfterJump


EnemyBehaviorPointerTable:
	<span class="token directive keyword">.dw</span> EnemyBehavior_<span class="token decimalnumber string">00</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_BasicWalker
	<span class="token directive keyword">.dw</span> EnemyBehavior_Ostro
	<span class="token directive keyword">.dw</span> EnemyBehavior_BobOmb
	<span class="token directive keyword">.dw</span> EnemyBehavior_Albatoss <span class="token comment">; 10</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_Albatoss
	<span class="token directive keyword">.dw</span> EnemyBehavior_Albatoss
	<span class="token directive keyword">.dw</span> EnemyBehavior_NinjiRunning
	<span class="token directive keyword">.dw</span> EnemyBehavior_NinjiJumping
	<span class="token directive keyword">.dw</span> EnemyBehavior_Beezo
	<span class="token directive keyword">.dw</span> EnemyBehavior_Beezo
	<span class="token directive keyword">.dw</span> EnemyBehavior_WartBubble
	<span class="token directive keyword">.dw</span> EnemyBehavior_Pidgit
	<span class="token directive keyword">.dw</span> EnemyBehavior_Trouter
	<span class="token directive keyword">.dw</span> EnemyBehavior_Hoopstar <span class="token comment">; 20</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_JarGenerators
	<span class="token directive keyword">.dw</span> EnemyBehavior_JarGenerators
	<span class="token directive keyword">.dw</span> EnemyBehavior_Phanto
	<span class="token directive keyword">.dw</span> EnemyBehavior_CobratJar
	<span class="token directive keyword">.dw</span> EnemyBehavior_CobratGround
	<span class="token directive keyword">.dw</span> EnemyBehavior_Pokey
	<span class="token directive keyword">.dw</span> EnemyBehavior_BulletAndEgg
	<span class="token directive keyword">.dw</span> EnemyBehavior_Birdo
	<span class="token directive keyword">.dw</span> EnemyBehavior_Mouser
	<span class="token directive keyword">.dw</span> EnemyBehavior_BulletAndEgg <span class="token comment">; 30</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_Tryclyde
	<span class="token directive keyword">.dw</span> EnemyBehavior_Fireball
	<span class="token directive keyword">.dw</span> EnemyBehavior_Clawgrip
	<span class="token directive keyword">.dw</span> EnemyBehavior_ClawgripRock
	<span class="token directive keyword">.dw</span> EnemyBehavior_PanserRedAndGray
	<span class="token directive keyword">.dw</span> EnemyBehavior_PanserPink
	<span class="token directive keyword">.dw</span> EnemyBehavior_PanserRedAndGray
	<span class="token directive keyword">.dw</span> EnemyBehavior_Autobomb
	<span class="token directive keyword">.dw</span> EnemyBehavior_AutobombFire
	<span class="token directive keyword">.dw</span> EnemyBehavior_WhaleSpout <span class="token comment">; 40</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_Flurry
	<span class="token directive keyword">.dw</span> EnemyBehavior_Fryguy
	<span class="token directive keyword">.dw</span> EnemyBehavior_FryguySplit
	<span class="token directive keyword">.dw</span> EnemyBehavior_Wart
	<span class="token directive keyword">.dw</span> EnemyBehavior_HawkmouthBoss
	<span class="token directive keyword">.dw</span> EnemyBehavior_Spark
	<span class="token directive keyword">.dw</span> EnemyBehavior_Spark
	<span class="token directive keyword">.dw</span> EnemyBehavior_Spark
	<span class="token directive keyword">.dw</span> EnemyBehavior_Spark
	<span class="token directive keyword">.dw</span> EnemyBehavior_Vegetable <span class="token comment">; 50</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_Vegetable
	<span class="token directive keyword">.dw</span> EnemyBehavior_Vegetable
	<span class="token directive keyword">.dw</span> EnemyBehavior_Shell
	<span class="token directive keyword">.dw</span> EnemyBehavior_Coin
	<span class="token directive keyword">.dw</span> EnemyBehavior_Bomb
	<span class="token directive keyword">.dw</span> EnemyBehavior_Rocket
	<span class="token directive keyword">.dw</span> EnemyBehavior_MushroomBlockAndPOW
	<span class="token directive keyword">.dw</span> EnemyBehavior_MushroomBlockAndPOW
	<span class="token directive keyword">.dw</span> EnemyBehavior_FallingLogs
	<span class="token directive keyword">.dw</span> EnemyBehavior_SubspaceDoor <span class="token comment">; 60</span>
	<span class="token directive keyword">.dw</span> EnemyBehavior_Key
	<span class="token directive keyword">.dw</span> EnemyBehavior_SubspacePotion
	<span class="token directive keyword">.dw</span> EnemyBehavior_Mushroom
	<span class="token directive keyword">.dw</span> EnemyBehavior_Mushroom<span class="token decimalnumber string">1</span>up
	<span class="token directive keyword">.dw</span> EnemyBehavior_FlyingCarpet
	<span class="token directive keyword">.dw</span> EnemyBehavior_Hawkmouth
	<span class="token directive keyword">.dw</span> EnemyBehavior_Hawkmouth
	<span class="token directive keyword">.dw</span> EnemyBehavior_CrystalBall
	<span class="token directive keyword">.dw</span> EnemyBehavior_Starman
	<span class="token directive keyword">.dw</span> EnemyBehavior_Mushroom <span class="token comment">; 70</span>
EnemyBehaviorPointerTable_End:


EnemyInit_JarGenerators:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$50</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


SparkAccelerationTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>


EnemyInit_Sparks:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> SparkAccelerationTable - Enemy_Spark<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> SparkAccelerationTable - Enemy_Spark<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


SparkCollision: <span class="token comment">; spark movement based on collision</span>
	<span class="token directive keyword">.db</span> CollisionFlags_Up | CollisionFlags_Down <span class="token comment">; horizontal</span>
	<span class="token directive keyword">.db</span> CollisionFlags_Left | CollisionFlags_Right <span class="token comment">; vertical</span>

SparkTurnOffset:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; clockwise</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span> <span class="token comment">; counter-clockwise</span>

&nbsp;</code></pre><aside><p>Spark movement works by traveling along one axis at a time and turning when
either colliding along the movement axis or running out of wall along the
axis perpendicular to movement.</p>
&nbsp;</aside><pre><a name="l2174" href="#l2174" title="Link to line 2174">#</a><code>EnemyBehavior_Spark:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Spark_Move

	<span class="token opcode property">JSR</span> ObjectTileCollision_SolidBackground

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> SparkCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Spark_Turn

	<span class="token opcode property">LDA</span> SparkCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">AND</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Spark_Move

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TAY</span>
&nbsp;</code></pre><aside><p>Reverses the direction of movement for the specified axis</p>
<p>Input
X = enemy slot
Y = movement axis</p>
&nbsp;</aside><pre><a name="l2210" href="#l2210" title="Link to line 2210">#</a><code>EnemyBehavior_Spark_FlipAxisVelocity:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> SparkTurnOffset, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>


EnemyBehavior_Spark_Turn:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_Spark_FlipAxisVelocity

EnemyBehavior_Spark_Move:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Spark_MoveVertical

EnemyBehavior_Spark_MoveHorizontal:
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsX

EnemyBehavior_Spark_MoveVertical:
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsY


IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


AlbatossSwarmStartXLo:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

AlbatossSwarmStartXHi:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>


Swarm_AlbatossCarryingBobOmb:
	<span class="token opcode property">JSR</span> Swarm_CreateEnemy

	<span class="token opcode property">ADC</span> AlbatossSwarmStartXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> AlbatossSwarmStartXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #Enemy_AlbatossCarryingBobOmb
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicMovement

	<span class="token opcode property">ASL</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


BeezoSwarmStartXLo:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>


Swarm_BeezoDiving:
	<span class="token opcode property">JSR</span> Swarm_CreateEnemy

	<span class="token opcode property">ADC</span> BeezoSwarmStartXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> Swarm_BeezoDiving_Vertical

Swarm_BeezoDiving_Horizontal:
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>

Swarm_BeezoDiving_Vertical:
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #Enemy_BeezoDiving
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicMovement

	<span class="token opcode property">JSR</span> EnemyBeezoDiveSetup

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Generates a swarm enemy</p>
<p>Output
A = ScreenBoundaryLeftLo
X = enemy slot (byte_RAM_0)
Y = enemy direction</p>
&nbsp;</aside><pre><a name="l2322" href="#l2322" title="Link to line 2322">#</a><code>Swarm_CreateEnemy:&nbsp;</code></pre><aside><p>Pause for the Stopwatch</p>
&nbsp;</aside><pre><a name="l2324" href="#l2324" title="Link to line 2324">#</a><code>	<span class="token opcode property">LDA</span> StopwatchTimer
	<span class="token opcode property">BNE</span> Swarm_CreateEnemy_Fail
&nbsp;</code></pre><aside><p>Generate an enemy when the counter overflows</p>
&nbsp;</aside><pre><a name="l2328" href="#l2328" title="Link to line 2328">#</a><code>	<span class="token opcode property">LDA</span> SwarmCounter
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> SwarmCounter
	<span class="token opcode property">BCC</span> Swarm_CreateEnemy_Fail
&nbsp;</code></pre><aside><p>Create the enemy, but bail if it's not possible</p>
&nbsp;</aside><pre><a name="l2335" href="#l2335" title="Link to line 2335">#</a><code>	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> Swarm_CreateEnemy_Fail
&nbsp;</code></pre><aside><p>Pick a direction</p>
&nbsp;</aside><pre><a name="l2340" href="#l2340" title="Link to line 2340">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BNE</span> Swarm_CreateEnemy_Exit

	<span class="token opcode property">INY</span>

Swarm_CreateEnemy_Exit:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">RTS</span>

Swarm_CreateEnemy_Fail:&nbsp;</code></pre><aside><p>Break out of the parent swarm subroutine</p>
&nbsp;</aside><pre><a name="l2354" href="#l2354" title="Link to line 2354">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">RTS</span>


EnemyBehavior_Fireball:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">927</span><span class="token register variable">A</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Fireball_CheckCollision

	<span class="token opcode property">JMP</span> ApplyObjectMovement


EnemyBehavior_Fireball_CheckCollision:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> EnemyBehavior_Fireball_Exit

	<span class="token opcode property">JSR</span> TurnIntoPuffOfSmoke

EnemyBehavior_Fireball_Exit:
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>


PanserFireXVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>


EnemyBehavior_PanserPink:
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_PanserRedAndGray

	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer

EnemyBehavior_PanserRedAndGray:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">1</span><span class="token register variable">A</span>

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">1</span><span class="token register variable">A</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">22</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">22</span>:
	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%10000011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$2F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">3</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">3</span>D:
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">8</span>E

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">7</span>C

	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">7</span>C

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$BC</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">CMP</span> #Enemy_PanserStationaryFiresUp
	<span class="token opcode property">LDA</span> PanserFireXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">65</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">65</span>:
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_Fireball
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">7</span>C:
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$AE</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$EF</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2485" href="#l2485" title="Link to line 2485">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">8</span>E:
	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2490" href="#l2490" title="Link to line 2490">#</a><code>EnemyInit_Key:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">93</span>:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CA<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">98</span>:
	<span class="token opcode property">CPY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CA<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Key
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAE

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CA<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">93</span>

	<span class="token opcode property">LDA</span> KeyUsed
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAE

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAB:
	<span class="token opcode property">JMP</span> EnemyInit_Stationary

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2517" href="#l2517" title="Link to line 2517">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAE:
	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2522" href="#l2522" title="Link to line 2522">#</a><code>EnemyInit_CrystalBallStarmanStopwatch:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CB<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CC<span class="token decimalnumber string">3</span>

	<span class="token opcode property">CPY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CC<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_CrystalBall
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAE

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CC<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CB<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAE

	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CAB

	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CF<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Starman
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>CF<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2573" href="#l2573" title="Link to line 2573">#</a><code>EnemyBehavior_Starman:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">07</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$08</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">07</span>:
	<span class="token opcode property">STY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> RenderSpriteAndApplyObjectMovement

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2589" href="#l2589" title="Link to line 2589">#</a><code>EnemyBehavior_JarGenerators:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_JarGenerators_Active

	<span class="token opcode property">JMP</span> EnemyDestroy

EnemyBehavior_JarGenerators_Active:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">5</span>E

	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">5</span>E

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">Y</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1A</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_JarGeneratorBobOmb
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">5</span>E

	<span class="token opcode property">LDA</span> #Enemy_BobOmb
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">Y</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">5</span>E:
	<span class="token opcode property">RTS</span>


EnemyInit_Hawkmouth:
	<span class="token opcode property">DEC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">711</span>F
	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">710</span>B


EnemyInit_Stationary:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


EnemyBehavior_Hawkmouth:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">7</span>B

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">78</span>:
	<span class="token opcode property">JMP</span> RenderSprite_HawkmouthLeft

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2664" href="#l2664" title="Link to line 2664">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">7</span>B:
	<span class="token opcode property">LDA</span> HawkmouthOpenTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">8</span><span class="token register variable">A</span>

	<span class="token opcode property">DEC</span> HawkmouthOpenTimer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">78</span>

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_HawkOpen_WartBarf
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">8</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> HawkmouthClosing
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DBA

	<span class="token opcode property">DEC</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">78</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> HawkmouthClosing
	<span class="token opcode property">LDA</span> #TransitionType_Door
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">LDY</span> CurrentLevelRelative
	<span class="token opcode property">LDA</span> CurrentWorldTileset
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DAC

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DAC:
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> SetGameModeBonusChance

	<span class="token opcode property">INC</span> DoAreaTransition
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2703" href="#l2703" title="Link to line 2703">#</a><code>SetGameModeBonusChance:
	<span class="token opcode property">LDA</span> #GameMode_BonusChance
	<span class="token opcode property">STA</span> GameMode
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2710" href="#l2710" title="Link to line 2710">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DBA:
	<span class="token opcode property">LDA</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">BEQ</span> RenderSprite_HawkmouthLeft

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DDB

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> RenderSprite_HawkmouthLeft

	<span class="token opcode property">INC</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DD<span class="token decimalnumber string">8</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">711</span>F
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">710</span>B

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DD<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">JMP</span> RenderSprite_HawkmouthLeft

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2734" href="#l2734" title="Link to line 2734">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>DDB:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_PlayerInsideMaybe
	<span class="token opcode property">BEQ</span> RenderSprite_HawkmouthLeft

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> PlayerYLo
	<span class="token opcode property">BCS</span> RenderSprite_HawkmouthLeft

	<span class="token opcode property">LDA</span> PlayerCollision
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> RenderSprite_HawkmouthLeft

	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BNE</span> RenderSprite_HawkmouthLeft

	<span class="token opcode property">LDA</span> #PlayerState_HawkmouthEating
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_HawkOpen_WartBarf
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">INC</span> HawkmouthClosing

RenderSprite_HawkmouthLeft:
	<span class="token opcode property">LDA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">60</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$41</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CrystalAndHawkmouthOpenSize

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2772" href="#l2772" title="Link to line 2772">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">13</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">ADC</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">LDY</span> DoorAnimationTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">27</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">27</span>:
	<span class="token opcode property">STY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$8E</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">31</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$92</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">31</span>:
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> SpriteTempScreenY
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">44</span>

	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$07</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">44</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$9A</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">58</span>

	<span class="token opcode property">LDA</span> HawkmouthClosing
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">56</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">56</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$96</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">58</span>:
	<span class="token opcode property">STY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">JSR</span> SetSpriteTiles

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">60</span>:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_8E13</p>
&nbsp;</aside><pre><a name="l2835" href="#l2835" title="Link to line 2835">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2837" href="#l2837" title="Link to line 2837">#</a><code>EnemyInit_Trouter:
	<span class="token opcode property">JSR</span> EnemyInit_Stationary

	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">78</span>:
	<span class="token opcode property">RTS</span>


byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">79</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D8</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">85</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EA</span>


EnemyBehavior_Trouter:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">LDY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">9</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$89</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">9</span><span class="token register variable">A</span>:
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">85</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EB<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">78</span>

	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">79</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EB<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>

	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> RenderSprite


Enemy_Hoopstar_YVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span> <span class="token comment">; up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; down</span>

Enemy_Hoopstar_Attributes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$91</span> <span class="token comment">; up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span> <span class="token comment">; down</span>


EnemyBehavior_Hoopstar:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">JSR</span> EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EEC

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> ScreenYLo
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> ScreenYHi
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EF<span class="token decimalnumber string">3</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EEF

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EEC:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EEF:
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TAY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>EF<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDA</span> Enemy_Hoopstar_YVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> Enemy_Hoopstar_Attributes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">0</span><span class="token register variable">A</span>

	<span class="token opcode property">ASL</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">0</span><span class="token register variable">A</span>:
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsY

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2977" href="#l2977" title="Link to line 2977">#</a><code>EnemyBehavior_<span class="token decimalnumber string">00</span>:
	<span class="token opcode property">LDA</span> byte_RAM_EF
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">14</span>

	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2985" href="#l2985" title="Link to line 2985">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">14</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">1</span>E

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">1</span>E:
	<span class="token opcode property">STY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>

RenderSprite_Heart:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">ORA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> RenderSprite_Heart_Exit
&nbsp;</code></pre><aside><p>This part of the code seems to only run
if the graph we're trying to draw is
a heart sprite ...</p>
&nbsp;</aside><pre><a name="l3009" href="#l3009" title="Link to line 3009">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
SetHeartSprite:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D8</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>

RenderSprite_Heart_Exit:
	<span class="token opcode property">RTS</span>


Enemy_Birdo_Attributes:
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">3</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token directive keyword">.db</span> ObjAttrib_Palette<span class="token decimalnumber string">2</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>

&nbsp;</code></pre><aside><p>Initializes a Birdo (and a few other boss enemies)</p>
&nbsp;</aside><pre><a name="l3037" href="#l3037" title="Link to line 3037">#</a><code>EnemyInit_Birdo:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Default to the Gray Birdo (fires only fireballs)</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span> <span class="token comment">; Check if this is a special Birdo.</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$A0</span> <span class="token comment">; means this is a Pink Birdo (fires only eggs, slowly)</span>
	<span class="token opcode property">BEQ</span> EnemyInit_Birdo_SetType

	<span class="token opcode property">INY</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$B0</span> <span class="token comment">; tile x-position on page = $B</span>
	<span class="token opcode property">BEQ</span> EnemyInit_Birdo_SetType <span class="token comment">; If yes, this is a Red Birdo (fires eggs and fireballs)</span>

	<span class="token opcode property">INY</span>

EnemyInit_Birdo_SetType:
	<span class="token opcode property">STY</span> EnemyVariable, <span class="token register variable">X</span> <span class="token comment">; Set the Birdo type</span>
	<span class="token opcode property">LDA</span> Enemy_Birdo_Attributes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>

EnemyInit_Birdo_Exit:
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">4</span>EF, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


ProjectileLaunchXOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>


EnemyBehavior_Birdo:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FD<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FA<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FD<span class="token decimalnumber string">2</span>


BirdoSpitDelay:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>

&nbsp;</code></pre><aside><p>Health-based Birdo egg/fire chances.
If PRNG &#x26; $1F >= this, shoot an egg
Otherwise, shoot a fireball</p>
&nbsp;</aside><pre><a name="l3105" href="#l3105" title="Link to line 3105">#</a><code>BirdoHealthEggProbabilities:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>


loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FA<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDY</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> BirdoSpitDelay, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FB<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FB<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1C</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FB<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> BirdoBehavior_SpitProjectile

	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">901</span>B

	<span class="token opcode property">JSR</span> IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">LDY</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FCD

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F6</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FCD:
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsX

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3146" href="#l3146" title="Link to line 3146">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>FD<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">JMP</span> ApplyObjectMovement_Vertical

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3151" href="#l3151" title="Link to line 3151">#</a><code>BirdoBehavior_SpitProjectile:
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">901</span>B

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_BirdoShot
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>E<span class="token decimalnumber string">5</span>

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">901</span>B

	<span class="token opcode property">LDY</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span> <span class="token comment">; If we're a Gray Birdo, always shoot fire</span>
	<span class="token opcode property">BEQ</span> _Birdo_SpitFire

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; If we're a Pink Birdo, always shoot eggs</span>
	<span class="token opcode property">BNE</span> _Birdo_SpitEgg

	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span> <span class="token comment">; Otherwise, randomly determine what to fire</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1F</span> <span class="token comment">; If PRNG &#x26; $1F >= our health-probability number,</span>
	<span class="token opcode property">CMP</span> BirdoHealthEggProbabilities, <span class="token register variable">Y</span> <span class="token comment">; fire an egg out</span>
	<span class="token opcode property">BCS</span> _Birdo_SpitEgg <span class="token comment">; Otherwise just fall through to barfing fire</span>

_Birdo_SpitFire:
	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span> <span class="token comment">; Shoot a fireball</span>
	<span class="token opcode property">LDA</span> #Enemy_Fireball
	<span class="token opcode property">BNE</span> EnemyBehavior_SpitProjectile

_Birdo_SpitEgg:
	<span class="token opcode property">LDA</span> #Enemy_Egg <span class="token comment">; Shoot an egg</span>

&nbsp;</code></pre><aside><p>Spits an object (used by Birdo and Autobomb)</p>
<p>Input
A = Object type
X = Enemy index</p>
&nbsp;</aside><pre><a name="l3192" href="#l3192" title="Link to line 3192">#</a><code>EnemyBehavior_SpitProjectile:
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> ProjectileLaunchXOffsets - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">901</span>B:
	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3211" href="#l3211" title="Link to line 3211">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9020</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3220" href="#l3220" title="Link to line 3220">#</a><code>EnemyBehavior_Coin:
	<span class="token opcode property">JSR</span> IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$EA</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mushroom<span class="token decimalnumber string">1</span>up

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">2</span>_CoinGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>

EnemyBehavior_Mushroom<span class="token decimalnumber string">1</span>up:
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BMI</span> EnemyBehavior_Mushroom

	<span class="token opcode property">JSR</span> TurnIntoPuffOfSmoke

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Mushroom<span class="token decimalnumber string">1</span>up
	<span class="token opcode property">BEQ</span> Award<span class="token decimalnumber string">1</span>upMushroom

	<span class="token opcode property">INC</span> SlotMachineCoins
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3246" href="#l3246" title="Link to line 3246">#</a><code>Award<span class="token decimalnumber string">1</span>upMushroom:
	<span class="token opcode property">INC</span> Mushroom<span class="token decimalnumber string">1</span>upPulled
	<span class="token opcode property">INC</span> ExtraLives
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9050</span> <span class="token comment">; Check if lives overflow. If so, reduce by one again</span>

	<span class="token opcode property">DEC</span> ExtraLives

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9050</span>:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_<span class="token decimalnumber string">1</span>UP
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3260" href="#l3260" title="Link to line 3260">#</a><code>EnemyBehavior_CrystalBall:
	<span class="token opcode property">INC</span> SpriteTempScreenY
	<span class="token opcode property">JSR</span> AttachObjectToBirdo
&nbsp;</code></pre><aside><p>Behavior for objects that turn into smoke after you pick them up
(eg. mushrooms, crystal ball, stopwatch)</p>
&nbsp;</aside><pre><a name="l3269" href="#l3269" title="Link to line 3269">#</a><code>EnemyBehavior_Mushroom:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mushroom_StayMaterial

	<span class="token opcode property">LDA</span> PlayerDucking
	<span class="token opcode property">BEQ</span> EnemyBehavior_Mushroom_PickUp

EnemyBehavior_Mushroom_StayMaterial:
	<span class="token opcode property">JMP</span> EnemyBehavior_Bomb

EnemyBehavior_Mushroom_PickUp:
	<span class="token opcode property">JSR</span> CarryObject

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> HoldingItem
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> TurnIntoPuffOfSmoke

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_CrystalBall
	<span class="token opcode property">BNE</span> EnemyBehavior_PickUpNotCrystalBall

	<span class="token opcode property">LDA</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">BNE</span> EnemyBehavior_CrystalBall_Exit

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_CrystalGetFanfare
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> HawkmouthOpenTimer
	<span class="token opcode property">INC</span> CrystalAndHawkmouthOpenSize

EnemyBehavior_CrystalBall_Exit:
	<span class="token opcode property">RTS</span>

EnemyBehavior_PickUpNotCrystalBall:
	<span class="token opcode property">CMP</span> #Enemy_Mushroom<span class="token decimalnumber string">1</span>up
	<span class="token opcode property">BEQ</span> EnemyBehavior_PickUpMushroom<span class="token decimalnumber string">1</span>up

	<span class="token opcode property">CMP</span> #Enemy_Stopwatch
	<span class="token opcode property">BEQ</span> EnemyBehavior_PickUpStopwatch

	<span class="token opcode property">CMP</span> #Enemy_Mushroom
	<span class="token opcode property">BNE</span> EnemyBehavior_PickUpNotMushroom

EnemyBehavior_PickUpMushroom:
	<span class="token opcode property">LDX</span> EnemyVariable
	<span class="token opcode property">INC</span> Mushroom<span class="token decimalnumber string">1</span>Pulled, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">INC</span> PlayerMaxHealth
	<span class="token opcode property">JSR</span> RestorePlayerToFullHealth

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_MushroomGetJingle
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>

EnemyBehavior_PickUpMushroom<span class="token decimalnumber string">1</span>up:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

EnemyBehavior_PickUpNotMushroom:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

EnemyBehavior_PickUpStopwatch:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> StopwatchTimer
	<span class="token opcode property">RTS</span>


EnemyBehavior_Key:
	<span class="token opcode property">JSR</span> AttachObjectToBirdo
&nbsp;</code></pre><aside><p>Behavior for objects that have background collision detection</p>
&nbsp;</aside><pre><a name="l3348" href="#l3348" title="Link to line 3348">#</a><code>EnemyBehavior_Bomb:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>D<span class="token decimalnumber string">9</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">JSR</span> HalfObjectVelocityX
	<span class="token opcode property">JSR</span> HalfObjectVelocityX
	<span class="token opcode property">JSR</span> HalfObjectVelocityX

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>D<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>FB

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>F<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9020</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>AA

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>FB

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3382" href="#l3382" title="Link to line 3382">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>F<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> byte_RAM_B
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>FB

	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">90</span>FB:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Bomb
	<span class="token opcode property">BNE</span> EnemyBehavior_Vegetable

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9122</span>

	<span class="token opcode property">LDY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Bomb_Explode

	<span class="token opcode property">STA</span> HoldingItem
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>

EnemyBehavior_Bomb_Explode:
	<span class="token opcode property">LDA</span> #EnemyState_BombExploding
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SkyFlashTimer
	<span class="token opcode property">LDA</span> #DPCM_DoorOpenBombBom
	<span class="token opcode property">STA</span> DPCMQueue
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>&nbsp;</code></pre><aside><p>A = $00</p>
&nbsp;</aside><pre><a name="l3415" href="#l3415" title="Link to line 3415">#</a><code>	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3419" href="#l3419" title="Link to line 3419">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9122</span>:
	<span class="token opcode property">CMP</span> #Enemy_Mushroom<span class="token decimalnumber string">1</span>up
	<span class="token opcode property">BCS</span> EnemyBehavior_Vegetable

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_Vegetable

	<span class="token opcode property">INC</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$FB</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

EnemyBehavior_Vegetable:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> ApplyObjectMovement

RenderSprite_VegetableLarge:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">913</span>E

	<span class="token opcode property">JMP</span> RenderSprite_NotAlbatoss

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3444" href="#l3444" title="Link to line 3444">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">913</span>E:
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3449" href="#l3449" title="Link to line 3449">#</a><code>EnemyBehavior_SubspacePotion:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> EnemyBehavior_SubspacePotion_CheckGroundCollision

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">JSR</span> HalfObjectVelocityX
	<span class="token opcode property">JSR</span> HalfObjectVelocityX

EnemyBehavior_SubspacePotion_CheckGroundCollision:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_Vegetable

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_PotionDoorBong
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_SubspaceDoor
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>BB
&nbsp;</code></pre><aside><p>No Subspace Doors allowed in vertical levels</p>
&nbsp;</aside><pre><a name="l3496" href="#l3496" title="Link to line 3496">#</a><code>	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9198</span>

	<span class="token opcode property">LDA</span> #DPCM_BossHurt
	<span class="token opcode property">STA</span> DPCMQueue
	<span class="token opcode property">JSR</span> EnemyDestroy

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9198</span>:
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> TurnIntoPuffOfSmoke_Exit

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$41</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">Y</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>

&nbsp;</code></pre><aside><p>Turns an object into a puff of smoke</p>
<p>Input
X = enemy index of object to poof</p>
&nbsp;</aside><pre><a name="l3525" href="#l3525" title="Link to line 3525">#</a><code>TurnIntoPuffOfSmoke:
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span> <span class="token comment">; Get current object sprite attributes...</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_UpsideDown
	<span class="token opcode property">ORA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #EnemyState_PuffOfSmoke
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span> <span class="token comment">; WINNERS DON'T SMOKE SHROOMS</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span> <span class="token comment">; No idea what this address is for</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span> <span class="token comment">; Puff-of-smoke animation timer?</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

TurnIntoPuffOfSmoke_Exit:
	<span class="token opcode property">RTS</span>


byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">91</span>C<span class="token decimalnumber string">5</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>

&nbsp;</code></pre><aside><p>Look for a Birdo to attach to</p>
&nbsp;</aside><pre><a name="l3549" href="#l3549" title="Link to line 3549">#</a><code>AttachObjectToBirdo:
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> AttachObjectToBirdo_Skip

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>
AttachObjectToBirdo_Loop:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #EnemyState_Alive
	<span class="token opcode property">BNE</span> AttachObjectToBirdo_NotLiveBirdo

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Birdo
	<span class="token opcode property">BEQ</span> AttachObjectToBirdo_DoAttach

AttachObjectToBirdo_NotLiveBirdo:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> AttachObjectToBirdo_Loop

AttachObjectToBirdo_Skip:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> SetEnemyAttributes

AttachObjectToBirdo_DoAttach:
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> AttachObjectToBirdo_Skip

	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">91</span>C<span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000111</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JMP</span> RenderSprite



byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9212</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>

byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9213</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3605" href="#l3605" title="Link to line 3605">#</a><code>EnemyInit_AlbatossStartLeft:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9221</span>

EnemyInit_AlbatossStartRight:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9221</span>:
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9228</span>:
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$0B</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9212</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9213</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3635" href="#l3635" title="Link to line 3635">#</a><code>EnemyBehavior_Albatoss:
	<span class="token opcode property">JSR</span> RenderSprite_Albatoss

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9271</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Damage
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9256</span>

	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">926</span>E

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9256</span>:
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">926</span>E

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_BobOmb
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_Bobomb

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">926</span>E:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9274</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3674" href="#l3674" title="Link to line 3674">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9271</span>:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9274</span>:
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsX

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3682" href="#l3682" title="Link to line 3682">#</a><code>EnemyBehavior_AutobombFire:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9289</span>

sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">927</span><span class="token register variable">A</span>:
	<span class="token opcode property">ASL</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Unused?</p>
&nbsp;</aside><pre><a name="l3697" href="#l3697" title="Link to line 3697">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>


EnemyBehavior_BulletAndEgg:
	<span class="token opcode property">JSR</span> ObjectTileCollision

sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9289</span>:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9299</span>

	<span class="token opcode property">JMP</span> RenderSpriteAndApplyObjectMovement

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3716" href="#l3716" title="Link to line 3716">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9299</span>:
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">929</span>F

	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">929</span>F:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">92</span>BE

	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Bullet
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">92</span>B<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> #EnemyState_Dead
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectYLo, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">92</span>B<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">92</span>BE:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><p>End of function sub_BANK2_9289</p>
&nbsp;</aside><pre><a name="l3751" href="#l3751" title="Link to line 3751">#</a><code>&nbsp;</code></pre><aside><p>Creates a generic red Shyguy enemy and
does some basic initialization for it.</p>
<p>CreateEnemy_TryAllSlots checks all 9 object slots
CreateEnemy only checks the first 6 object slots</p>
<p>Output
N = enabled if no empty slot was found
Y = $FF if there no empty slot was found
byte_RAM_0 = slot used</p>
&nbsp;</aside><pre><a name="l3765" href="#l3765" title="Link to line 3765">#</a><code>CreateEnemy_TryAllSlots:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> CreateEnemy_FindSlot

CreateEnemy:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>

CreateEnemy_FindSlot:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> CreateEnemy_FoundSlot

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> CreateEnemy_FindSlot

	<span class="token opcode property">RTS</span>

CreateEnemy_FoundSlot:
	<span class="token opcode property">LDA</span> #EnemyState_Alive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_SpawnsDoor, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> #Enemy_ShyguyRed
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>

	<span class="token opcode property">JSR</span> EnemyInit_Basic
	<span class="token opcode property">JSR</span> UnlinkEnemyFromRawData

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


Phanto_AccelX:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
Phanto_MaxVelX:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>
Phanto_AccelY:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; Exit up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; Exit down</span>
Phanto_MaxVelY:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>

EnemyBehavior_Phanto:
	<span class="token opcode property">LDA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> Phanto_AfterDecrementShakeTimer

	<span class="token opcode property">DEC</span> ObjectShakeTimer, <span class="token register variable">X</span>

Phanto_AfterDecrementShakeTimer:
	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; Move away from player</span>
	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> Phanto_Movement

	<span class="token opcode property">LDX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
&nbsp;</code></pre><aside><p>Strange code. Phanto only chases you if you have the key.
So you should just be able to use BEQ/BNE.
This way seems to imply that Phanto would
chase you if you were carrying a range of items,
but...  what could those items have been?
But instead we do it like this for... reasons.
Nintendo.</p>
&nbsp;</aside><pre><a name="l3848" href="#l3848" title="Link to line 3848">#</a><code>	<span class="token opcode property">CMP</span> #Enemy_Key
	<span class="token opcode property">BCC</span> Phanto_Movement
&nbsp;</code></pre><aside><p>Subspace Potion is >= Enemy_Key, so ignore it</p>
&nbsp;</aside><pre><a name="l3852" href="#l3852" title="Link to line 3852">#</a><code>	<span class="token opcode property">CMP</span> #Enemy_SubspacePotion
	<span class="token opcode property">BCS</span> Phanto_Movement

	<span class="token opcode property">LDA</span> PhantoActivateTimer
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">BNE</span> Phanto_AfterStartTimer
&nbsp;</code></pre><aside><p>Kick off Phanto activation timer</p>
&nbsp;</aside><pre><a name="l3860" href="#l3860" title="Link to line 3860">#</a><code>	<span class="token opcode property">DEC</span> PhantoActivateTimer

Phanto_AfterStartTimer:
	<span class="token opcode property">DEY</span> <span class="token comment">; Move toward player</span>

Phanto_Movement:
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CMP</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> PlayerYHi
	<span class="token opcode property">INX</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9351</span>

	<span class="token opcode property">INY</span> <span class="token comment">; Other side of player vertically</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9351</span>:
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> Phanto_MaxVelY, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">935</span>E

	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> Phanto_AccelY, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">935</span>E:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">937</span>F

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> Phanto_AccelX, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> Phanto_MaxVelX, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">937</span>F

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">937</span>F:
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9388</span>

	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">STA</span> ObjectXAcceleration, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9388</span>:
	<span class="token opcode property">LDY</span> PhantoActivateTimer
	<span class="token opcode property">BEQ</span> Phanto_Activated
&nbsp;</code></pre><aside><p>Hold the timer at $A0</p>
&nbsp;</aside><pre><a name="l3921" href="#l3921" title="Link to line 3921">#</a><code>	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">BEQ</span> Phanto_AfterDecrementActivateTimer

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BNE</span> Phanto_AfterFlashing
&nbsp;</code></pre><aside><p>Start flashing</p>
&nbsp;</aside><pre><a name="l3928" href="#l3928" title="Link to line 3928">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>

Phanto_AfterFlashing:
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BNE</span> Phanto_AfterSound
&nbsp;</code></pre><aside><p>Start vibrating</p>
&nbsp;</aside><pre><a name="l3936" href="#l3936" title="Link to line 3936">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Play Phanto activation sound effect</p>
&nbsp;</aside><pre><a name="l3940" href="#l3940" title="Link to line 3940">#</a><code>	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">3</span>_Rumble_B
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">3</span>

Phanto_AfterSound:
	<span class="token opcode property">DEC</span> PhantoActivateTimer

Phanto_AfterDecrementActivateTimer:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

Phanto_Activated:
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>


Enemy_Ninji_JumpVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>


EnemyBehavior_NinjiJumping:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_Ninji_MidAir

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_NinjiJumping_DetermineJump
&nbsp;</code></pre><aside><p>stop x-velocity</p>
&nbsp;</aside><pre><a name="l3972" href="#l3972" title="Link to line 3972">#</a><code>	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

EnemyBehavior_NinjiJumping_DetermineJump:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Ninji_MidAir

	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> Enemy_Ninji_JumpVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Ninji_Jump

EnemyBehavior_NinjiRunning:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_Ninji_MidAir

	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">CMP</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Ninji_MidAir

	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">CMP</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Ninji_MidAir

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$28</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$50</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_Ninji_MidAir

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D8</span>

EnemyBehavior_Ninji_Jump:
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

EnemyBehavior_Ninji_MidAir:
	<span class="token opcode property">JMP</span> EnemyBehavior_BasicWalker

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4028" href="#l4028" title="Link to line 4028">#</a><code>EnemyBehavior_Beezo:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt

	<span class="token opcode property">JSR</span> IncrementAnimationTimerBy<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">941</span>D:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9436</span>

	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9429</span>

	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9429</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>

	<span class="token opcode property">DEC</span> ObjectYVelocity, <span class="token register variable">X</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4057" href="#l4057" title="Link to line 4057">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JMP</span> ApplyObjectPhysicsY
&nbsp;</code></pre><aside><p>End of function sub_BANK2_9430</p>
&nbsp;</aside><pre><a name="l4064" href="#l4064" title="Link to line 4064">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4066" href="#l4066" title="Link to line 4066">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9436</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9439</span>:
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>


BulletProjectileXSpeeds:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>


EnemyBehavior_BobOmb:
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$3A</span> <span class="token comment">; When to stop walking</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_BasicWalker
&nbsp;</code></pre><aside><p>Stop walking if the BobOmb is touching the ground</p>
&nbsp;</aside><pre><a name="l4085" href="#l4085" title="Link to line 4085">#</a><code>	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_BobOmb_CheckFuse

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

EnemyBehavior_BobOmb_CheckFuse:
	<span class="token opcode property">DEC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_BobOmb_Flash
&nbsp;</code></pre><aside><p>Unset HoldingItem if this BobOmb is being carried</p>
&nbsp;</aside><pre><a name="l4098" href="#l4098" title="Link to line 4098">#</a><code>	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_BobOmb_Explode

	<span class="token opcode property">STY</span> HoldingItem
	<span class="token opcode property">STY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>

EnemyBehavior_BobOmb_Explode:
	<span class="token opcode property">JMP</span> EnemyBehavior_Bomb_Explode


EnemyBehavior_BobOmb_Flash:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span> <span class="token comment">; When to start flashing</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_BasicWalker
&nbsp;</code></pre><aside><p>Palette cycle every other frame</p>
&nbsp;</aside><pre><a name="l4113" href="#l4113" title="Link to line 4113">#</a><code>	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_BasicWalker

	<span class="token opcode property">INC</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%11111011</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>


EnemyBehavior_BasicWalker:
	<span class="token opcode property">JSR</span> ObjectTileCollision

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9470</span>:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9492</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Up
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9481</span>

	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4138" href="#l4138" title="Link to line 4138">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9481</span>:
	<span class="token opcode property">DEC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyTimer, <span class="token register variable">X</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4144" href="#l4144" title="Link to line 4144">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9486</span>:
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_BehindBackground
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">JMP</span> RenderSprite
&nbsp;</code></pre><aside><p>End of function sub_BANK2_9486</p>
&nbsp;</aside><pre><a name="l4154" href="#l4154" title="Link to line 4154">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4156" href="#l4156" title="Link to line 4156">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9492</span>:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>AB:
	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_SnifitGray
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>BB

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>BB

	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>BB:
	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9503</span>

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>CD

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4202" href="#l4202" title="Link to line 4202">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>CD:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Walk
&nbsp;</code></pre><aside><p>check if this enemy fires bullets when jumping</p>
&nbsp;</aside><pre><a name="l4208" href="#l4208" title="Link to line 4208">#</a><code>	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_SnifitGray
	<span class="token opcode property">BNE</span> EnemyBehavior_Walk
&nbsp;</code></pre><aside><p>bullet generator</p>
&nbsp;</aside><pre><a name="l4213" href="#l4213" title="Link to line 4213">#</a><code>	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span> <span class="token comment">; check if enemy is starting to fall</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$FE</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Walk

	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span> <span class="token comment">; check random number generator</span>
	<span class="token opcode property">BPL</span> EnemyBehavior_Walk
&nbsp;</code></pre><aside><p>jumper high bullet</p>
&nbsp;</aside><pre><a name="l4221" href="#l4221" title="Link to line 4221">#</a><code>	<span class="token opcode property">JSR</span> CreateBullet

EnemyBehavior_Walk:
	<span class="token opcode property">DEC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_SnifitPink
	<span class="token opcode property">BEQ</span> EnemyBehavior_TurnAtCliff

	<span class="token opcode property">CMP</span> #Enemy_ShyguyPink
	<span class="token opcode property">BNE</span> EnemyBehavior_BasicWalkerExit

EnemyBehavior_TurnAtCliff:&nbsp;</code></pre><aside><p>skip if being thrown</p>
&nbsp;</aside><pre><a name="l4234" href="#l4234" title="Link to line 4234">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_BasicWalkerExit
&nbsp;</code></pre><aside><p>skip if already turning around</p>
&nbsp;</aside><pre><a name="l4238" href="#l4238" title="Link to line 4238">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_BasicWalkerExit

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> EnemyBehavior_TurnAround

EnemyBehavior_BasicWalkerExit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4248" href="#l4248" title="Link to line 4248">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9503</span>:
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">94</span>CD

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span> <span class="token comment">; Get the current object ID</span>
	<span class="token opcode property">CPY</span> #Enemy_Tweeter <span class="token comment">; Check if this enemy is a Tweeter</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9528</span> <span class="token comment">; If not, go handle some other enemies</span>
&nbsp;</code></pre><aside><p>...but very, very, very rarely, only
when their timer (that increments once per bounce)
hits #$3F -- almost unnoticable</p>
&nbsp;</aside><pre><a name="l4262" href="#l4262" title="Link to line 4262">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9599</span>

	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span> <span class="token comment">; Make small jump 3 times, then make big jump</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span> <span class="token comment">; Check if the timer is a multiple of 4</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9523</span> <span class="token comment">; If not, skip over the next bit</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$E0</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9523</span>:
	<span class="token opcode property">STY</span> ObjectYVelocity, <span class="token register variable">X</span> <span class="token comment">; Set Y acceleration for bouncing</span>
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsY

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4278" href="#l4278" title="Link to line 4278">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9528</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">CPY</span> #Enemy_BobOmb
	<span class="token opcode property">BEQ</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9599</span>

	<span class="token opcode property">CPY</span> #Enemy_Flurry
	<span class="token opcode property">BEQ</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9599</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">CPY</span> #Enemy_NinjiRunning
	<span class="token opcode property">BEQ</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9599</span>
&nbsp;</code></pre><aside><p>this redundant red snifit check smells funny, almost like there was
some other follow-the-player enemy</p>
&nbsp;</aside><pre><a name="l4293" href="#l4293" title="Link to line 4293">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7F</span> <span class="token comment">; unused</span>
	<span class="token opcode property">CPY</span> #Enemy_SnifitRed
	<span class="token opcode property">BEQ</span> EnemyBehavior_Snifit

	<span class="token opcode property">CPY</span> #Enemy_SnifitRed
	<span class="token opcode property">BEQ</span> EnemyBehavior_Snifit

	<span class="token opcode property">CPY</span> #Enemy_SnifitPink
	<span class="token opcode property">BEQ</span> EnemyBehavior_Snifit

	<span class="token opcode property">CPY</span> #Enemy_SnifitGray
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">959</span>D

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">959</span>D

	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Snifit

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsY


EnemyBehavior_Snifit:
	<span class="token opcode property">LDA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Snifit_NoBullet

	<span class="token opcode property">DEC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Snifit_NoBullet
&nbsp;</code></pre><aside><p>telegraphed bullet (walking snifits)</p>
&nbsp;</aside><pre><a name="l4331" href="#l4331" title="Link to line 4331">#</a><code>	<span class="token opcode property">JSR</span> CreateBullet

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>BB

EnemyBehavior_Snifit_NoBullet:
loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9574</span>:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Snifit_AnimationTimer

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_SnifitGray
	<span class="token opcode property">BNE</span> EnemyBehavior_Snifit_CheckPlayerY
&nbsp;</code></pre><aside><p>jumper low bullet</p>
&nbsp;</aside><pre><a name="l4350" href="#l4350" title="Link to line 4350">#</a><code>	<span class="token opcode property">JSR</span> CreateBullet

	<span class="token opcode property">JMP</span> EnemyInit_DisableObjectAttributeBit<span class="token decimalnumber string">8</span>


EnemyBehavior_Snifit_CheckPlayerY:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">CMP</span> PlayerYLo
	<span class="token opcode property">BNE</span> EnemyBehavior_Snifit_AnimationTimer

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$30</span> <span class="token comment">; shake duration</span>
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>

EnemyBehavior_Snifit_AnimationTimer:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7F</span>
&nbsp;</code></pre><aside><p>Gives em the ol' razzle-dazzle</p>
<p>Input
A = timer mask</p>
&nbsp;</aside><pre><a name="l4374" href="#l4374" title="Link to line 4374">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9599</span>:
	<span class="token opcode property">AND</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>B<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">959</span>D:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>BB

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$1A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>B<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
&nbsp;</code></pre><aside><p>Sets the y-velocity, applies vertical physics, and cuts x-velocity in half</p>
<p>Input
A = y-velocity
X = enemy index</p>
&nbsp;</aside><pre><a name="l4395" href="#l4395" title="Link to line 4395">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>AA:
	<span class="token opcode property">JSR</span> SetObjectYVelocity
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY
&nbsp;</code></pre><aside><p>Cuts the x-velocity of the current object in half</p>
<p>Input
X = enemy index
Output
RAM_0 = previous x-velocity</p>
&nbsp;</aside><pre><a name="l4407" href="#l4407" title="Link to line 4407">#</a><code>HalfObjectVelocityX:&nbsp;</code></pre><aside><p>Store the current X-velocity in RAM_0</p>
&nbsp;</aside><pre><a name="l4409" href="#l4409" title="Link to line 4409">#</a><code>	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>&nbsp;</code></pre><aside><p>Shift left to save the sign in the carry bit</p>
&nbsp;</aside><pre><a name="l4412" href="#l4412" title="Link to line 4412">#</a><code>	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>&nbsp;</code></pre><aside><p>Cut in half and preserve the sign</p>
&nbsp;</aside><pre><a name="l4414" href="#l4414" title="Link to line 4414">#</a><code>	<span class="token opcode property">ROR</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4419" href="#l4419" title="Link to line 4419">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>B<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">JSR</span> EnemyInit_BasicWithoutTimer

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>BB:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_ShyguyRed
	<span class="token opcode property">BNE</span> EnemyInit_DisableObjectAttributeBit<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BCC</span> EnemyInit_DisableObjectAttributeBit<span class="token decimalnumber string">8</span>

	<span class="token opcode property">JSR</span> EnemyInit_BasicWithoutTimer
&nbsp;</code></pre><aside><p>Disables bit 8 on the object attribute, which causes the object to appear
behind the background while being pulled</p>
&nbsp;</aside><pre><a name="l4438" href="#l4438" title="Link to line 4438">#</a><code>EnemyInit_DisableObjectAttributeBit<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">ASL</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> ObjectAttributes, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Does SetObjectYVelocity with y-velocity of 0</p>
&nbsp;</aside><pre><a name="l4445" href="#l4445" title="Link to line 4445">#</a><code>ResetObjectYVelocity:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
&nbsp;</code></pre><aside><p>Sets the y-velocity of an object and shifts it half a tile down if it's not a
a vegetable</p>
<p>Input
A = y-velocity
X = enemy index</p>
&nbsp;</aside><pre><a name="l4456" href="#l4456" title="Link to line 4456">#</a><code>SetObjectYVelocity:
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">BCS</span> SetObjectYVelocity_Exit

	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCC</span> SetObjectYVelocity_Exit

	<span class="token opcode property">INC</span> ObjectYHi, <span class="token register variable">X</span>

SetObjectYVelocity_Exit:
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4475" href="#l4475" title="Link to line 4475">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>E<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">JSR</span> CreateEnemy_TryAllSlots

	<span class="token opcode property">JMP</span> CreateBullet_WithSlotInY
&nbsp;</code></pre><aside><p>End of function sub_BANK2_95E5</p>
&nbsp;</aside><pre><a name="l4482" href="#l4482" title="Link to line 4482">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4484" href="#l4484" title="Link to line 4484">#</a><code>CreateBullet:
	<span class="token opcode property">JSR</span> CreateEnemy

CreateBullet_WithSlotInY:
	<span class="token opcode property">BMI</span> CreateBullet_Exit

	<span class="token opcode property">LDY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> BulletProjectileXSpeeds - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_Bullet
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

CreateBullet_Exit:
	<span class="token opcode property">RTS</span>


CharacterYOffsetCrouch:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span> <span class="token comment">; Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span> <span class="token comment">; Luigi</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; Small Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span> <span class="token comment">; Small Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; Small Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span> <span class="token comment">; Small Luigi</span>

&nbsp;</code></pre><aside><p>This is run when the player is carrying
something, to update its position to
wherever the player is above their head</p>
&nbsp;</aside><pre><a name="l4521" href="#l4521" title="Link to line 4521">#</a><code>CarryObject:
	<span class="token opcode property">LDA</span> PlayerDirection
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9636</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9636</span>

	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9636</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">7</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9636</span>:
	<span class="token opcode property">LDY</span> PlayerAnimationFrame
	<span class="token opcode property">CPY</span> #SpriteAnimation_Ducking
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">964</span>D

	<span class="token opcode property">LDY</span> PlayerCurrentSize
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDY</span> CurrentCharacter
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">964</span><span class="token register variable">A</span>

	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">964</span><span class="token register variable">A</span>:
	<span class="token opcode property">ADC</span> CharacterYOffsetCrouch, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">964</span>D:
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LDY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">LDX</span> PlayerCurrentSize
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">965</span>D

	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">965</span>D:
	<span class="token opcode property">ADC</span> ItemCarryYOffsetsRAM - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">ADC</span> ItemCarryYOffsetsRAM + $D, <span class="token register variable">Y</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9686</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9686</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">967</span>D:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9681</span>

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9681</span>:
	<span class="token opcode property">ASL</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">ROR</span> ObjectAttributes, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9686</span>:
	<span class="token opcode property">JSR</span> PutCarriedObjectInHands

	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><p>Unused?</p>
&nbsp;</aside><pre><a name="l4617" href="#l4617" title="Link to line 4617">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>


EnemyBehavior_MushroomBlockAndPOW:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9692</span>

EnemyBehavior_MushroomBlockAndPOW_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4628" href="#l4628" title="Link to line 4628">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9692</span>:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">969</span>B

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">JMP</span> CarryObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4638" href="#l4638" title="Link to line 4638">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">969</span>B:
	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_POWBlock
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>AA

	<span class="token opcode property">JSR</span> ObjectTileCollision_SolidBackground

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>AD

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4651" href="#l4651" title="Link to line 4651">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>AA:
	<span class="token opcode property">JSR</span> ObjectTileCollision

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>AD:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_MushroomBlockAndPOW_Exit

	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>D<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>D<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>D<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9718</span>

	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9718</span>

	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$16</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>EC

	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>EC

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">JMP</span> SetObjectYVelocity

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4700" href="#l4700" title="Link to line 4700">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>EC:
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_POWBlock
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>FF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> POWQuakeTimer
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">3</span>_Rumble_B
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">3</span>
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>C<span class="token decimalnumber string">4</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4713" href="#l4713" title="Link to line 4713">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">96</span>FF:
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$16</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">970</span>D

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F5</span>
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">95</span>AA

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4725" href="#l4725" title="Link to line 4725">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">970</span>D:
	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ReplaceTile

	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4735" href="#l4735" title="Link to line 4735">#</a><code>locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9718</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK2_9692</p>
&nbsp;</aside><pre><a name="l4740" href="#l4740" title="Link to line 4740">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4742" href="#l4742" title="Link to line 4742">#</a><code>EnemyBehavior_SubspaceDoor:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> SubspaceTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9741</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9741</span>

	<span class="token opcode property">LDY</span> PlayerState
	<span class="token opcode property">CPY</span> #PlayerState_Dying
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9741</span>

	<span class="token opcode property">DEC</span> SubspaceTimer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9741</span>

	<span class="token opcode property">STA</span> InSubspaceOrJar
	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>FF

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4768" href="#l4768" title="Link to line 4768">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9741</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9718</span>

	<span class="token opcode property">LDA</span> SubspaceDoorTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9753</span>

	<span class="token opcode property">DEC</span> SubspaceDoorTimer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9753</span>

	<span class="token opcode property">JMP</span> TurnIntoPuffOfSmoke

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4782" href="#l4782" title="Link to line 4782">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9753</span>:
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> DoorAnimationTimer
	<span class="token opcode property">LDA</span> DoorSpriteAnimation, <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9767</span>

	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9767</span>:
	<span class="token opcode property">LDA</span> DoorAnimationTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">979</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">CPY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LDA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">977</span>F

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">PHA</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">977</span>F:
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9784</span>

	<span class="token opcode property">STY</span> byte_RAM_F<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9784</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7A</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $F, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">979</span><span class="token register variable">A</span>:
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">CPY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LDA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>AA

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">PHA</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>AA:
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>AF

	<span class="token opcode property">STY</span> byte_RAM_F<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>AF:
	<span class="token opcode property">LDA</span> DoorAnimationTimer
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$19</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>BA

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STY</span> byte_RAM_F<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>BA:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$76</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>C<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7E</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>C<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDX</span> DoorAnimationTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9805</span>

	<span class="token opcode property">INC</span> DoorAnimationTimer
	<span class="token opcode property">LDY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> DoorSpriteAnimation, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9805</span>

	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $B, <span class="token register variable">Y</span>
	<span class="token opcode property">CPX</span> #(DoorSpriteAnimationEnd-DoorSpriteAnimation)
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9805</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> DoorAnimationTimer
	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">LDA</span> TransitionType
	<span class="token opcode property">CMP</span> #TransitionType_Door
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>F<span class="token decimalnumber string">7</span>

	<span class="token opcode property">INC</span> DoAreaTransition
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>FF

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>F<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> InSubspaceOrJar

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">97</span>FF:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9805</span>:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


DoorSpriteAnimation:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
DoorSpriteAnimationEnd:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
&nbsp;</code></pre><aside><p>Unused?</p>
&nbsp;</aside><pre><a name="l4967" href="#l4967" title="Link to line 4967">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>

&nbsp;</code></pre><aside><p>Note: Door animation code copied from Bank 1</p>
<p>It's here, but seems to be unused?</p>
&nbsp;</aside><pre><a name="l4978" href="#l4978" title="Link to line 4978">#</a><code>DoorAnimation_Locked_Bank<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> DoorAnimation_Bank<span class="token decimalnumber string">2</span>

DoorAnimation_Unlocked_Bank<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

DoorAnimation_Bank<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$08</span>

DoorAnimation_Loop_Bank<span class="token decimalnumber string">2</span>:&nbsp;</code></pre><aside><p>skip if inactive</p>
&nbsp;</aside><pre><a name="l4991" href="#l4991" title="Link to line 4991">#</a><code>	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> DoorAnimation_LoopNext_Bank<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_SubspaceDoor
	<span class="token opcode property">BNE</span> DoorAnimation_LoopNext_Bank<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> #EnemyState_PuffOfSmoke
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">Y</span>

DoorAnimation_LoopNext_Bank<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> DoorAnimation_Loop_Bank<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> CreateEnemy_TryAllSlots

	<span class="token opcode property">BMI</span> DoorAnimation_Exit_Bank<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> DoorAnimationTimer
	<span class="token opcode property">STA</span> SubspaceDoorTimer
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_SubspaceDoor
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

DoorAnimation_Exit_Bank<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">RTS</span>


ShellSpeed:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>


EnemyBehavior_Shell:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> EnemyBehavior_Shell_Slide

EnemyBehavior_Shell_Destroy:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_EnemyHit
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JMP</span> TurnIntoPuffOfSmoke


EnemyBehavior_Shell_Slide:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_Shell_Render

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

EnemyBehavior_Shell_Render:
	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ShellSpeed - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> ApplyObjectMovement


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l5079" href="#l5079" title="Link to line 5079">#</a><code>sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>C<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDA</span> #EnemyState_BlockFizzle
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>CC:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANK2_98C4</p>
&nbsp;</aside><pre><a name="l5090" href="#l5090" title="Link to line 5090">#</a><code>&nbsp;</code></pre><aside><p>Intercepts the normal enemy behavior when the object is being carried</p>
&nbsp;</aside><pre><a name="l5095" href="#l5095" title="Link to line 5095">#</a><code>EnemyBehavior_CheckBeingCarriedTimerInterrupt:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>CC
&nbsp;</code></pre><aside><p>Cancel previous subroutine and go into carry mode</p>
&nbsp;</aside><pre><a name="l5100" href="#l5100" title="Link to line 5100">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">JMP</span> CarryObject

&nbsp;</code></pre><aside><p>If EnemyArray_42F is set, interrupt the EnemyBehavior subroutine and just
render the sprite and run physics</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l5112" href="#l5112" title="Link to line 5112">#</a><code>EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>EA

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">JMP</span> RenderSpriteAndApplyObjectMovement


EnemyInit_FallingLogs:
	<span class="token opcode property">JSR</span> EnemyInit_Stationary

	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">98</span>EA:
	<span class="token opcode property">RTS</span>



&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5134" href="#l5134" title="Link to line 5134">#</a><code>EnemyBehavior_FallingLogs:
	<span class="token opcode property">ASL</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9919</span>
&nbsp;</code></pre><aside><p>behind background</p>
&nbsp;</aside><pre><a name="l5147" href="#l5147" title="Link to line 5147">#</a><code>	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_BehindBackground
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">CMP</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FE</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9914</span>
&nbsp;</code></pre><aside><p>in front of background</p>
&nbsp;</aside><pre><a name="l5158" href="#l5158" title="Link to line 5158">#</a><code>	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$DF</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9914</span>:
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9921</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5169" href="#l5169" title="Link to line 5169">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9919</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9921</span>

	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9921</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9932</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9932</span>:
	<span class="token opcode property">JMP</span> RenderSprite
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5193" href="#l5193" title="Link to line 5193">#</a><code>&nbsp;</code></pre><aside><p>Kills all enemies on the screen (ie. POW block quake)</p>
&nbsp;</aside><pre><a name="l5197" href="#l5197" title="Link to line 5197">#</a><code>KillOnscreenEnemies:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
&nbsp;</code></pre><aside><p>Destroys all enemies on the screen</p>
<p>Input
A = 0 for POW</p>
&nbsp;</aside><pre><a name="l5206" href="#l5206" title="Link to line 5206">#</a><code>DestroyOnscreenEnemies:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>

DestroyOnscreenEnemies_Loop:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_Alive
	<span class="token opcode property">BNE</span> DestroyOnscreenEnemies_Next

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BEQ</span> KillOnscreenEnemies_CheckCollision

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Bomb
	<span class="token opcode property">BEQ</span> DestroyOnscreenEnemies_DestroyItem

	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> DestroyOnscreenEnemies_Next

DestroyOnscreenEnemies_DestroyItem:
	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> DestroyOnscreenEnemies_Poof

	<span class="token opcode property">CPX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">BNE</span> DestroyOnscreenEnemies_Poof

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> HoldingItem

DestroyOnscreenEnemies_Poof:
	<span class="token opcode property">STX</span> byte_RAM_E
	<span class="token opcode property">JSR</span> TurnIntoPuffOfSmoke

	<span class="token opcode property">LDX</span> byte_RAM_E
	<span class="token opcode property">JMP</span> DestroyOnscreenEnemies_Next

KillOnscreenEnemies_CheckCollision:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> DestroyOnscreenEnemies_Next

IFDEF FIX_POW_LOG_GLITCH
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> KillOnscreenEnemies_SetCollision
ENDIF
&nbsp;</code></pre><aside><p>BUG: For object that don't follow normal gravity rules, this will send
them flying into the air, ie. throwing a POW block from a falling log</p>
&nbsp;</aside><pre><a name="l5254" href="#l5254" title="Link to line 5254">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

KillOnscreenEnemies_SetCollision:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #CollisionFlags_Damage
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>

DestroyOnscreenEnemies_Next:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> DestroyOnscreenEnemies_Loop

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Checks whether the enemy is taking mortal damage</p>
<p>If so, play the sound effect, kill the enemy, and cancel the previous enemy
behavior subroutine.</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l5279" href="#l5279" title="Link to line 5279">#</a><code>EnemyBehavior_CheckDamagedInterrupt:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Damage
	<span class="token opcode property">BEQ</span> EnemyBehavior_CheckDamagedInterrupt_Exit

	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_CheckDamagedInterrupt_SoundEffect
&nbsp;</code></pre><aside><p>remove the item from the player's hands</p>
&nbsp;</aside><pre><a name="l5288" href="#l5288" title="Link to line 5288">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> HoldingItem

EnemyBehavior_CheckDamagedInterrupt_SoundEffect:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>&nbsp;</code></pre><aside><p>is this enemy a squawker?</p>
&nbsp;</aside><pre><a name="l5294" href="#l5294" title="Link to line 5294">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00001000</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span> <span class="token comment">; then A = DPCM_BossDeath</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CheckDamagedInterrupt_BossDeathSound
&nbsp;</code></pre><aside><p>normal enemy hit sound</p>
&nbsp;</aside><pre><a name="l5300" href="#l5300" title="Link to line 5300">#</a><code>	<span class="token opcode property">LDA</span> DPCMQueue
	<span class="token opcode property">BNE</span> EnemyBehavior_CheckDamagedInterrupt_CheckPidgit

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_EnemyHit
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CheckDamagedInterrupt_CheckPidgit

EnemyBehavior_CheckDamagedInterrupt_BossDeathSound:
IFDEF EXPAND_MUSIC
	<span class="token opcode property">LDA</span> #DPCM_BossDeath
ENDIF
	<span class="token opcode property">STA</span> DPCMQueue

EnemyBehavior_CheckDamagedInterrupt_CheckPidgit:&nbsp;</code></pre><aside><p>killing pidgit leaves a flying carpet behind</p>
&nbsp;</aside><pre><a name="l5315" href="#l5315" title="Link to line 5315">#</a><code>	<span class="token opcode property">CPY</span> #Enemy_Pidgit
	<span class="token opcode property">BNE</span> EnemyBehavior_CheckDamagedInterrupt_SetDead

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CheckDamagedInterrupt_SetDead

	<span class="token opcode property">JSR</span> CreateFlyingCarpet

EnemyBehavior_CheckDamagedInterrupt_SetDead:
	<span class="token opcode property">LDA</span> #EnemyState_Dead
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>&nbsp;</code></pre><aside><p>interrupt the previous subroutine</p>
&nbsp;</aside><pre><a name="l5327" href="#l5327" title="Link to line 5327">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>

EnemyBehavior_CheckDamagedInterrupt_Exit:
	<span class="token opcode property">RTS</span>


EnemyTilemap<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$D2</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D4</span>,<span class="token hexnumber string">$D6</span> <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$F8</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CC</span>,<span class="token hexnumber string">$CE</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CC</span>,<span class="token hexnumber string">$CE</span> <span class="token comment">; $0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>,<span class="token hexnumber string">$CA</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>,<span class="token hexnumber string">$CA</span> <span class="token comment">; $0E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>,<span class="token hexnumber string">$72</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$74</span>,<span class="token hexnumber string">$76</span> <span class="token comment">; $12</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>,<span class="token hexnumber string">$C2</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C4</span>,<span class="token hexnumber string">$C6</span> <span class="token comment">; $16</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E1</span>,<span class="token hexnumber string">$E3</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E5</span>,<span class="token hexnumber string">$E7</span> <span class="token comment">; $1A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E1</span>,<span class="token hexnumber string">$E3</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E5</span>,<span class="token hexnumber string">$E7</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$78</span>,<span class="token hexnumber string">$7A</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7C</span>,<span class="token hexnumber string">$7E</span> <span class="token comment">; $22</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>,<span class="token hexnumber string">$DA</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>,<span class="token hexnumber string">$DE</span> <span class="token comment">; $26</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>,<span class="token hexnumber string">$FE</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>,<span class="token hexnumber string">$FC</span> <span class="token comment">; $2A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$94</span>,<span class="token hexnumber string">$94</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$96</span>,<span class="token hexnumber string">$96</span> <span class="token comment">; $2E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$98</span>,<span class="token hexnumber string">$98</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9A</span>,<span class="token hexnumber string">$9A</span> <span class="token comment">; $32</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DB</span>,<span class="token hexnumber string">$DD</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DB</span>,<span class="token hexnumber string">$DD</span> <span class="token comment">; $36</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7D</span>,<span class="token hexnumber string">$7F</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C1</span>,<span class="token hexnumber string">$C3</span> <span class="token comment">; $3A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$8C</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span>,<span class="token hexnumber string">$8E</span> <span class="token comment">; $3E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>,<span class="token hexnumber string">$E2</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6B</span>,<span class="token hexnumber string">$6D</span> <span class="token comment">; $42</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6D</span>,<span class="token hexnumber string">$6F</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span>,<span class="token hexnumber string">$3A</span> <span class="token comment">; $46</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span>,<span class="token hexnumber string">$3A</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>,<span class="token hexnumber string">$38</span> <span class="token comment">; $4A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span>,<span class="token hexnumber string">$38</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$36</span> <span class="token comment">; $4E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$36</span>,<span class="token hexnumber string">$36</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$34</span> <span class="token comment">; $52</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$34</span>,<span class="token hexnumber string">$34</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $56</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AE</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$82</span> <span class="token comment">; $5A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$86</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>,<span class="token hexnumber string">$82</span> <span class="token comment">; $5E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AA</span>,<span class="token hexnumber string">$AC</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$8A</span> <span class="token comment">; $62</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$84</span>,<span class="token hexnumber string">$86</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span>,<span class="token hexnumber string">$8A</span> <span class="token comment">; $66</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AA</span>,<span class="token hexnumber string">$AC</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$BE</span> <span class="token comment">; $6A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AA</span>,<span class="token hexnumber string">$AC</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BC</span>,<span class="token hexnumber string">$BE</span> <span class="token comment">; $6E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AA</span>,<span class="token hexnumber string">$AC</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B5</span>,<span class="token hexnumber string">$B9</span> <span class="token comment">; $72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B5</span>,<span class="token hexnumber string">$B9</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>,<span class="token hexnumber string">$83</span> <span class="token comment">; $76</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$85</span>,<span class="token hexnumber string">$87</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span> <span class="token comment">; $7A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>,<span class="token hexnumber string">$FF</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>,<span class="token hexnumber string">$83</span> <span class="token comment">; $7E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F5</span>,<span class="token hexnumber string">$87</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C5</span>,<span class="token hexnumber string">$C7</span> <span class="token comment">; $82</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C9</span>,<span class="token hexnumber string">$CB</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span>,<span class="token hexnumber string">$94</span> <span class="token comment">; $86</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$29</span>,<span class="token hexnumber string">$29</span> <span class="token comment">; $88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2B</span>,<span class="token hexnumber string">$2B</span> <span class="token comment">; $8A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3D</span>,<span class="token hexnumber string">$3F</span> <span class="token comment">; $8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4C</span>,<span class="token hexnumber string">$4E</span> <span class="token comment">; $8E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span>,<span class="token hexnumber string">$52</span> <span class="token comment">; $90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4C</span>,<span class="token hexnumber string">$4E</span> <span class="token comment">; $92</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$56</span>,<span class="token hexnumber string">$58</span> <span class="token comment">; $94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$5C</span> <span class="token comment">; $96</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$5A</span> <span class="token comment">; $98</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $9A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$54</span> <span class="token comment">; $9C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CF</span>,<span class="token hexnumber string">$CF</span> <span class="token comment">; $9E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A5</span>,<span class="token hexnumber string">$A5</span> <span class="token comment">; $A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B0</span>,<span class="token hexnumber string">$B2</span> <span class="token comment">; $A2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$90</span>,<span class="token hexnumber string">$90</span> <span class="token comment">; $A4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$CD</span>,<span class="token hexnumber string">$CD</span> <span class="token comment">; $A6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A8</span>,<span class="token hexnumber string">$A8</span> <span class="token comment">; $A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A8</span>,<span class="token hexnumber string">$A8</span> <span class="token comment">; $AA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span>,<span class="token hexnumber string">$A2</span> <span class="token comment">; $AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A4</span>,<span class="token hexnumber string">$A4</span> <span class="token comment">; $AE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A4</span>,<span class="token hexnumber string">$A4</span> <span class="token comment">; $B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4D</span>,<span class="token hexnumber string">$4D</span> <span class="token comment">; $B2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8C</span>,<span class="token hexnumber string">$8C</span> <span class="token comment">; $B4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A6</span>,<span class="token hexnumber string">$A6</span> <span class="token comment">; $B6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AB</span>,<span class="token hexnumber string">$AB</span> <span class="token comment">; $B8</span>
IFDEF EXPAND_TABLES
	unusedSpace EnemyTilemap<span class="token decimalnumber string">1</span> + <span class="token hexnumber string">$100</span>, <span class="token hexnumber string">$FB</span>
ENDIF
&nbsp;</code></pre><aside><h1>Enemy Animation table</h1>
<p>These point to the tilemaps offset for an object's animation frames.</p>
<p>$FF is used to make an enemy invisible</p>
&nbsp;</aside><pre><a name="l5440" href="#l5440" title="Link to line 5440">#</a><code>EnemyAnimationTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $00 Enemy_Heart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $01 Enemy_ShyguyRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; $02 Enemy_Tweeter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $03 Enemy_ShyguyPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; $04 Enemy_Porcupo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $05 Enemy_SnifitRed</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $06 Enemy_SnifitGray</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; $07 Enemy_SnifitPink</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span> <span class="token comment">; $08 Enemy_Ostro</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span> <span class="token comment">; $09 Enemy_BobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; $0A Enemy_AlbatossCarryingBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; $0B Enemy_AlbatossStartRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; $0C Enemy_AlbatossStartLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span> <span class="token comment">; $0D Enemy_NinjiRunning</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span> <span class="token comment">; $0E Enemy_NinjiJumping</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span> <span class="token comment">; $0F Enemy_BeezoDiving</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span> <span class="token comment">; $10 Enemy_BeezoStraight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BE</span> <span class="token comment">; $11 Enemy_WartBubble</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $12 Enemy_Pidgit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$86</span> <span class="token comment">; $13 Enemy_Trouter</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$88</span> <span class="token comment">; $14 Enemy_Hoopstar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; $15 Enemy_JarGeneratorShyguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; $16 Enemy_JarGeneratorBobOmb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8C</span> <span class="token comment">; $17 Enemy_Phanto</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5C</span> <span class="token comment">; $18 Enemy_CobratJar</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5C</span> <span class="token comment">; $19 Enemy_CobratSand</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6C</span> <span class="token comment">; $1A Enemy_Pokey</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$56</span> <span class="token comment">; $1B Enemy_Bullet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5A</span> <span class="token comment">; $1C Enemy_Birdo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span> <span class="token comment">; $1D Enemy_Mouser</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span> <span class="token comment">; $1E Enemy_Egg</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $1F Enemy_Tryclyde</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A8</span> <span class="token comment">; $20 Enemy_Fireball</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $21 Enemy_Clawgrip</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D6</span> <span class="token comment">; $22 Enemy_ClawgripRock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AC</span> <span class="token comment">; $23 Enemy_PanserStationaryFiresAngled</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AC</span> <span class="token comment">; $24 Enemy_PanserWalking</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$AC</span> <span class="token comment">; $25 Enemy_PanserStationaryFiresUp</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$74</span> <span class="token comment">; $26 Enemy_Autobomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7A</span> <span class="token comment">; $27 Enemy_AutobombFire</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$92</span> <span class="token comment">; $28 Enemy_WhaleSpout</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9A</span> <span class="token comment">; $29 Enemy_Flurry</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; $2A Enemy_Fryguy</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$90</span> <span class="token comment">; $2B Enemy_FryguySplit</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2C Enemy_Wart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $2D Enemy_HawkmouthBoss</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B6</span> <span class="token comment">; $2E Enemy_Spark1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B6</span> <span class="token comment">; $2F Enemy_Spark2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B6</span> <span class="token comment">; $30 Enemy_Spark3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B6</span> <span class="token comment">; $31 Enemy_Spark4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span> <span class="token comment">; $32 Enemy_VegetableSmall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2A</span> <span class="token comment">; $33 Enemy_VegetableLarge</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2C</span> <span class="token comment">; $34 Enemy_VegetableWart</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2E</span> <span class="token comment">; $35 Enemy_Shell</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; $36 Enemy_Coin</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$34</span> <span class="token comment">; $37 Enemy_Bomb</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; $38 Enemy_Rocket</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span> <span class="token comment">; $39 Enemy_MushroomBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span> <span class="token comment">; $3A Enemy_POWBlock</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$42</span> <span class="token comment">; $3B Enemy_FallingLogs</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$82</span> <span class="token comment">; $3C Enemy_SubspaceDoor</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$82</span> <span class="token comment">; $3D Enemy_Key</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$84</span> <span class="token comment">; $3E Enemy_SubspacePotion</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; $3F Enemy_Mushroom</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A2</span> <span class="token comment">; $40 Enemy_Mushroom1up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; $41 Enemy_FlyingCarpet</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span> <span class="token comment">; $42 Enemy_HawkmouthRight</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8E</span> <span class="token comment">; $43 Enemy_HawkmouthLeft</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9E</span> <span class="token comment">; $44 Enemy_CrystalBall</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A6</span> <span class="token comment">; $45 Enemy_Starman</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A4</span> <span class="token comment">; $46 Enemy_Stopwatch</span>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l5514" href="#l5514" title="Link to line 5514">#</a><code>
&nbsp;</code></pre><aside><p>The first part of this routine determines if we are the Princess,
who does not bob her vegetables (or whatever other Subcon detritus
she happens to be holding)</p>
<p>After that it just moves the sprite into the player's hands.</p>
&nbsp;</aside><pre><a name="l5520" href="#l5520" title="Link to line 5520">#</a><code>PutCarriedObjectInHands:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">SBC</span> ScreenYLo
	<span class="token opcode property">LDY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>ACA

	<span class="token opcode property">LDY</span> PlayerAnimationFrame
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>ACA

	<span class="token opcode property">LDY</span> CurrentCharacter <span class="token comment">; Check if we are Princess</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>ACA <span class="token comment">; If so, skip making it bob sometimes.</span>

	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>ACA:
	<span class="token opcode property">STA</span> SpriteTempScreenY <span class="token comment">; Determine where it should show up on</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span> <span class="token comment">; the screen and put it in that place.</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftLo
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function PutCarriedObjectInHands</p>
&nbsp;</aside><pre><a name="l5547" href="#l5547" title="Link to line 5547">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5549" href="#l5549" title="Link to line 5549">#</a><code>RenderSprite_Birdo:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_Alive
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AE<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AE<span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AE<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$6A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AEC

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AE<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AEF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$62</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AEC:
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5572" href="#l5572" title="Link to line 5572">#</a><code>loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>AEF:
	<span class="token opcode property">JMP</span> RenderSprite_NotAlbatoss


RenderSprite_Albatoss:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_EE
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> RenderSprite_Invisible

	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">7</span><span class="token register variable">A</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l5604" href="#l5604" title="Link to line 5604">#</a><code>&nbsp;</code></pre><aside><p>Renders a sprite for an object based on the enemy animation table lookup</p>
<p>There are a lot of special cases basd on ObjectType</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l5613" href="#l5613" title="Link to line 5613">#</a><code>RenderSprite:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyAnimationTable, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Invisible

	<span class="token opcode property">CPY</span> #Enemy_Mouser
	<span class="token opcode property">BNE</span> RenderSprite_NotMouser

	<span class="token opcode property">JMP</span> RenderSprite_Mouser

RenderSprite_NotMouser:
	<span class="token opcode property">CPY</span> #Enemy_Clawgrip
	<span class="token opcode property">BNE</span> RenderSprite_NotClawgrip

	<span class="token opcode property">JMP</span> RenderSprite_Clawgrip

RenderSprite_NotClawgrip:
	<span class="token opcode property">CPY</span> #Enemy_ClawgripRock
	<span class="token opcode property">BNE</span> RenderSprite_NotClawgripRock

	<span class="token opcode property">JMP</span> RenderSprite_ClawgripRock

RenderSprite_NotClawgripRock:
	<span class="token opcode property">CPY</span> #Enemy_HawkmouthBoss
	<span class="token opcode property">BNE</span> RenderSprite_NotHawkmouthBoss

	<span class="token opcode property">JMP</span> RenderSprite_HawkmouthBoss

RenderSprite_Invisible:
	<span class="token opcode property">RTS</span>

RenderSprite_NotHawkmouthBoss:
	<span class="token opcode property">CPY</span> #Enemy_Pidgit
	<span class="token opcode property">BNE</span> RenderSprite_NotPidgit

	<span class="token opcode property">JMP</span> RenderSprite_Pidgit

RenderSprite_NotPidgit:
	<span class="token opcode property">CPY</span> #Enemy_Porcupo
	<span class="token opcode property">BNE</span> RenderSprite_NotPorcupo

	<span class="token opcode property">JMP</span> RenderSprite_Porcupo

RenderSprite_NotPorcupo:
	<span class="token opcode property">CPY</span> #Enemy_VegetableLarge
	<span class="token opcode property">BNE</span> RenderSprite_NotVegetableLarge

	<span class="token opcode property">JMP</span> RenderSprite_VegetableLarge

RenderSprite_NotVegetableLarge:
	<span class="token opcode property">CPY</span> #Enemy_Autobomb
	<span class="token opcode property">BNE</span> RenderSprite_NotAutobomb

	<span class="token opcode property">JMP</span> RenderSprite_Autobomb

RenderSprite_NotAutobomb:
	<span class="token opcode property">CPY</span> #Enemy_Fryguy
	<span class="token opcode property">BNE</span> RenderSprite_NotFryguy

	<span class="token opcode property">JMP</span> RenderSprite_Fryguy

RenderSprite_NotFryguy:
	<span class="token opcode property">CPY</span> #Enemy_HawkmouthLeft
	<span class="token opcode property">BNE</span> RenderSprite_NotHawkmouthLeft

	<span class="token opcode property">JMP</span> RenderSprite_HawkmouthLeft

RenderSprite_NotHawkmouthLeft:
	<span class="token opcode property">CPY</span> #Enemy_Wart
	<span class="token opcode property">BNE</span> RenderSprite_NotWart

	<span class="token opcode property">JMP</span> RenderSprite_Wart

RenderSprite_NotWart:
	<span class="token opcode property">CPY</span> #Enemy_WhaleSpout
	<span class="token opcode property">BNE</span> RenderSprite_NotWhaleSpout

	<span class="token opcode property">JMP</span> RenderSprite_WhaleSpout

RenderSprite_NotWhaleSpout:
	<span class="token opcode property">CPY</span> #Enemy_Pokey
	<span class="token opcode property">BNE</span> RenderSprite_NotPokey

	<span class="token opcode property">JMP</span> RenderSprite_Pokey

RenderSprite_NotPokey:
	<span class="token opcode property">CPY</span> #Enemy_Heart
	<span class="token opcode property">BNE</span> RenderSprite_NotHeart
&nbsp;</code></pre><aside><p>This jump appears to never be taken;
I don't think this code even runs with an enemy ID of 0 (heart)</p>
&nbsp;</aside><pre><a name="l5705" href="#l5705" title="Link to line 5705">#</a><code>	<span class="token opcode property">JMP</span> RenderSprite_Heart

RenderSprite_NotHeart:
	<span class="token opcode property">CPY</span> #Enemy_Ostro
	<span class="token opcode property">BNE</span> RenderSprite_NotOstro

	<span class="token opcode property">JMP</span> RenderSprite_Ostro

RenderSprite_NotOstro:
	<span class="token opcode property">CPY</span> #Enemy_Tryclyde
	<span class="token opcode property">BNE</span> RenderSprite_NotTryclyde

	<span class="token opcode property">JMP</span> RenderSprite_Tryclyde

RenderSprite_NotTryclyde:
	<span class="token opcode property">CPY</span> #Enemy_Birdo
	<span class="token opcode property">BNE</span> RenderSprite_NotBirdo

	<span class="token opcode property">JMP</span> RenderSprite_Birdo

RenderSprite_NotBirdo:
	<span class="token opcode property">CPY</span> #Enemy_AlbatossCarryingBobOmb
	<span class="token opcode property">BCC</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">CPY</span> #Enemy_NinjiRunning
	<span class="token opcode property">BCS</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">JMP</span> RenderSprite_Albatoss

RenderSprite_NotAlbatoss:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_Rocket
	<span class="token opcode property">BNE</span> RenderSprite_NotRocket

	<span class="token opcode property">JMP</span> RenderSprite_Rocket

RenderSprite_NotRocket:
	<span class="token opcode property">LDA</span> EnemyAnimationTable, <span class="token register variable">Y</span>

&nbsp;</code></pre><aside><p>Draws an object to the screen</p>
<p>Input
A = tile index
X = enemy index
byte_RAM_EE = sprite clipping
byte_RAM_EF = whether the enemy should be invisible
byte_RAM_F4 = sprite slot offset
SpriteTempScreenX = screen x-position
SpriteTempScreenY = screen y-position</p>
&nbsp;</aside><pre><a name="l5757" href="#l5757" title="Link to line 5757">#</a><code>RenderSprite_DrawObject:
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">LDA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> RenderSprite_Invisible
&nbsp;</code></pre><aside><p>tilemap switcher</p>
&nbsp;</aside><pre><a name="l5763" href="#l5763" title="Link to line 5763">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00010000</span>
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">LDY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #ObjAttrib_FrontFacing | ObjAttrib_Mirrored
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>BD<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>BD<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>BD<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_Horizontal
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_D
	<span class="token opcode property">LDA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDY</span> byte_RAM_EE
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>BEF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>BEF:
	<span class="token opcode property">ADC</span> SpriteTempScreenX
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground | ObjAttrib_Palette
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">07</span>

	<span class="token opcode property">AND</span> #ObjAttrib_UpsideDown | ObjAttrib_BehindBackground
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">07</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_F
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">31</span>

	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">1</span>F

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">31</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">1</span>F:
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">31</span>

	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">31</span>

	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">31</span>:
	<span class="token opcode property">LDY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">7</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">53</span>

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">53</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ASL</span> byte_RAM_EE
	<span class="token opcode property">ASL</span> byte_RAM_EE

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">53</span>:
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">7</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">STA</span> byte_RAM_EE
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">7</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ASL</span> byte_RAM_EE
	<span class="token opcode property">ASL</span> byte_RAM_EE

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">7</span><span class="token register variable">A</span>:
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">LDY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CD<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CD<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CBD

	<span class="token opcode property">LDX</span> byte_RAM_D
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$00</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$00</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$00</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">9</span>C:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$00</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CD<span class="token decimalnumber string">9</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CBD:
	<span class="token opcode property">LDA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$00</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$08</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$0C</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$04</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0C</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CD<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Mirrored
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CF<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$02</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$06</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$0E</span>, <span class="token register variable">Y</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>CF<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Sets tiles for an object</p>
<p>Input
X = tilemap offset
Y = sprite slot offset
byte_RAM_0 = screen y-offset
byte_RAM_1 = screen x-offset
byte_RAM_2 = sprite direction: $00 for left, $02 for right
byte_RAM_B = use EnemyTilemap2
byte_RAM_C = use 24x16 mode when set to $20
byte_RAM_EE = used for horizontal clipping/wrapping
Output
X = next tilemap offset
Y = next sprite slot offset</p>
&nbsp;</aside><pre><a name="l5972" href="#l5972" title="Link to line 5972">#</a><code>SetSpriteTiles:
	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> SetSpriteTiles_<span class="token decimalnumber string">24</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span>

	<span class="token opcode property">LDA</span> byte_RAM_B
	<span class="token opcode property">BNE</span> SetSpriteTiles_Tilemap<span class="token decimalnumber string">2</span>

SetSpriteTiles_Tilemap<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">1</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> SetSpriteTiles_CheckDirection

SetSpriteTiles_Tilemap<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">2</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>

SetSpriteTiles_CheckDirection:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BCC</span> SetSpriteTiles_Left

SetSpriteTiles_Right:
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>

SetSpriteTiles_Left:
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>D<span class="token decimalnumber string">48</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>D<span class="token decimalnumber string">48</span>:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>D<span class="token decimalnumber string">53</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>D<span class="token decimalnumber string">53</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">RTS</span>

SetSpriteTiles_<span class="token decimalnumber string">24</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span>:
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">2</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> EnemyTilemap<span class="token decimalnumber string">2</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BCC</span> SetSpriteTiles_<span class="token decimalnumber string">24</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span>_Left

SetSpriteTiles_<span class="token decimalnumber string">24</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span>_Right:
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>

SetSpriteTiles_<span class="token decimalnumber string">24</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span>_Left:
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $<span class="token register variable">A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">8</span>, <span class="token register variable">Y</span>

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DB<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DB<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DC<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DC<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DCD

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">8</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DCD:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $B, <span class="token register variable">Y</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> byte_RAM_D
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DF<span class="token decimalnumber string">0</span>

	<span class="token opcode property">STY</span> byte_RAM_D

loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>DF<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>

	<span class="token opcode property">RTS</span>


UNUSED_PorcupoOffset:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
PorcupoOffsetXRight:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
PorcupoOffsetXLeft:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
PorcupoOffsetYRight:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
PorcupoOffsetYLeft:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>


RenderSprite_Porcupo:
	<span class="token opcode property">JSR</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">3</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> PorcupoOffsetXRight - <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> PorcupoOffsetYRight - <span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> PorcupoOffsetXRight - <span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">3</span><span class="token register variable">A</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Compares our position to the player's and returns</p>
<p>Ouput
Y = 1 when player is to the left, 0 when player is to the right</p>
&nbsp;</aside><pre><a name="l6199" href="#l6199" title="Link to line 6199">#</a><code>EnemyFindWhichSidePlayerIsOn:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SBC</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">SBC</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">BCS</span> EnemyFindWhichSidePlayerIsOn_Exit

	<span class="token opcode property">INY</span>

EnemyFindWhichSidePlayerIsOn_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Applies object physics for the y-axis</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l6220" href="#l6220" title="Link to line 6220">#</a><code>ApplyObjectPhysicsY:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">TAX</span>
&nbsp;</code></pre><aside><p>Applies object physics for the x-axis</p>
<p>Input
X = enemy index, physics direction
($00-$09 for horizontal, $0A-$13 for vertical)</p>
<p>Output
X = RAM_12</p>
&nbsp;</aside><pre><a name="l6236" href="#l6236" title="Link to line 6236">#</a><code>ApplyObjectPhysicsX:&nbsp;</code></pre><aside><p>Add acceleration to velocity</p>
&nbsp;</aside><pre><a name="l6238" href="#l6238" title="Link to line 6238">#</a><code>	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXAcceleration, <span class="token register variable">X</span>

	<span class="token opcode property">PHA</span>&nbsp;</code></pre><aside><p>Lower nybble of velocity is for subpixel position</p>
&nbsp;</aside><pre><a name="l6244" href="#l6244" title="Link to line 6244">#</a><code>	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Upper nybble of velocity is for lo position</p>
&nbsp;</aside><pre><a name="l6251" href="#l6251" title="Link to line 6251">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCC</span> ApplyObjectPhysics_StoreVelocityLo
&nbsp;</code></pre><aside><p>Left/up: Carry negative bits through upper nybble</p>
&nbsp;</aside><pre><a name="l6261" href="#l6261" title="Link to line 6261">#</a><code>	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$F0</span>

ApplyObjectPhysics_StoreVelocityLo:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> ApplyObjectPhysics_StoreDirection
&nbsp;</code></pre><aside><p>Left/up</p>
&nbsp;</aside><pre><a name="l6271" href="#l6271" title="Link to line 6271">#</a><code>	<span class="token opcode property">DEY</span>

ApplyObjectPhysics_StoreDirection:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p>Add lower nybble of velocity for subpixel position</p>
&nbsp;</aside><pre><a name="l6277" href="#l6277" title="Link to line 6277">#</a><code>	<span class="token opcode property">LDA</span> ObjectXSubpixel, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectXSubpixel, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Add upper nybble of velocity for lo position</p>
&nbsp;</aside><pre><a name="l6283" href="#l6283" title="Link to line 6283">#</a><code>	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>

	<span class="token opcode property">ROL</span> byte_RAM_<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>X &#x3C; 10 is horizontal physics, X >= 10 is vertical physics</p>
&nbsp;</aside><pre><a name="l6290" href="#l6290" title="Link to line 6290">#</a><code>	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCS</span> ApplyObjectPhysics_PositionHi

ApplyObjectPhysics_HorizontalSpecialCases:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Bullet
	<span class="token opcode property">BEQ</span> ApplyObjectPhysics_PositionHi

	<span class="token opcode property">CMP</span> #Enemy_BeezoDiving
	<span class="token opcode property">BEQ</span> ApplyObjectPhysics_PositionHi

	<span class="token opcode property">CMP</span> #Enemy_BeezoStraight
	<span class="token opcode property">BEQ</span> ApplyObjectPhysics_PositionHi

	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> ApplyObjectPhysics_Exit

ApplyObjectPhysics_PositionHi:
	<span class="token opcode property">LSR</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

ApplyObjectPhysics_Exit:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


EnemyBehavior_TurnAround:&nbsp;</code></pre><aside><p>flip x-velocity</p>
&nbsp;</aside><pre><a name="l6322" href="#l6322" title="Link to line 6322">#</a><code>	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>&nbsp;</code></pre><aside><p>if the enemy is not moving, flip direction next</p>
&nbsp;</aside><pre><a name="l6328" href="#l6328" title="Link to line 6328">#</a><code>	<span class="token opcode property">BEQ</span> EnemyBehavior_TurnAroundExit
&nbsp;</code></pre><aside><p>flip enemy movement direction</p>
&nbsp;</aside><pre><a name="l6331" href="#l6331" title="Link to line 6331">#</a><code>	<span class="token opcode property">LDA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$03</span> <span class="token comment">; $01 XOR $03 = $02, $02 XOR $03 = $01</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>

EnemyBehavior_TurnAroundExit:
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsX

&nbsp;</code></pre><aside><p>Unused space in the original ($9EBD - $A02F)</p>
&nbsp;</aside><pre><a name="l6340" href="#l6340" title="Link to line 6340">#</a><code>unusedSpace <span class="token hexnumber string">$A030</span>, <span class="token hexnumber string">$FF</span>


EnemyTilemap<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2D</span>,<span class="token hexnumber string">$2F</span> <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2D</span>,<span class="token hexnumber string">$2F</span> <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>,<span class="token hexnumber string">$E2</span> <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>,<span class="token hexnumber string">$E6</span> <span class="token comment">; $06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>,<span class="token hexnumber string">$E2</span> <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>,<span class="token hexnumber string">$E6</span> <span class="token comment">; $0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$EA</span> <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$EE</span> <span class="token comment">; $0E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$EA</span> <span class="token comment">; $10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$EE</span> <span class="token comment">; $12</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$05</span> <span class="token comment">; $16</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span>,<span class="token hexnumber string">$0B</span> <span class="token comment">; $18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $1A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span>,<span class="token hexnumber string">$17</span> <span class="token comment">; $1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$05</span> <span class="token comment">; $22</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$1B</span> <span class="token comment">; $24</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $26</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$05</span> <span class="token comment">; $28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$1B</span> <span class="token comment">; $2A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1D</span>,<span class="token hexnumber string">$1F</span> <span class="token comment">; $2C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$21</span> <span class="token comment">; $2E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$27</span> <span class="token comment">; $30</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1D</span>,<span class="token hexnumber string">$1F</span> <span class="token comment">; $32</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$21</span> <span class="token comment">; $34</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$27</span> <span class="token comment">; $36</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9C</span>,<span class="token hexnumber string">$9E</span> <span class="token comment">; $38</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$9C</span>,<span class="token hexnumber string">$9E</span> <span class="token comment">; $3A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$D2</span> <span class="token comment">; $3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D4</span>,<span class="token hexnumber string">$D6</span> <span class="token comment">; $3E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$F2</span> <span class="token comment">; $40</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span>,<span class="token hexnumber string">$F6</span> <span class="token comment">; $42</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$F2</span> <span class="token comment">; $44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $46</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span>,<span class="token hexnumber string">$15</span> <span class="token comment">; $4A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1F</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $4C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span>,<span class="token hexnumber string">$15</span> <span class="token comment">; $4E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$17</span>,<span class="token hexnumber string">$19</span> <span class="token comment">; $50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1B</span>,<span class="token hexnumber string">$17</span> <span class="token comment">; $52</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$1D</span> <span class="token comment">; $54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$0B</span> <span class="token comment">; $56</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$07</span> <span class="token comment">; $5A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$55</span>,<span class="token hexnumber string">$59</span> <span class="token comment">; $5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5D</span> <span class="token comment">; $5E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$F2</span> <span class="token comment">; $60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span>,<span class="token hexnumber string">$F6</span> <span class="token comment">; $62</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$59</span> <span class="token comment">; $64</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5D</span> <span class="token comment">; $66</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$59</span> <span class="token comment">; $68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5D</span> <span class="token comment">; $6A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$EA</span> <span class="token comment">; $6C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$EE</span> <span class="token comment">; $6E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$EE</span> <span class="token comment">; $70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$EE</span> <span class="token comment">; $72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$F2</span> <span class="token comment">; $74</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>,<span class="token hexnumber string">$F2</span> <span class="token comment">; $76</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span>,<span class="token hexnumber string">$F6</span> <span class="token comment">; $78</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>,<span class="token hexnumber string">$FA</span> <span class="token comment">; $7A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>,<span class="token hexnumber string">$D2</span> <span class="token comment">; $7C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D4</span>,<span class="token hexnumber string">$D6</span> <span class="token comment">; $7E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$07</span> <span class="token comment">; $82</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$0B</span> <span class="token comment">; $84</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $86</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$15</span> <span class="token comment">; $8A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span>,<span class="token hexnumber string">$0B</span> <span class="token comment">; $8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$17</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $8E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$1B</span> <span class="token comment">; $90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2D</span>,<span class="token hexnumber string">$2F</span> <span class="token comment">; $92</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3A</span>,<span class="token hexnumber string">$3A</span> <span class="token comment">; $94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>,<span class="token hexnumber string">$E2</span> <span class="token comment">; $96</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>,<span class="token hexnumber string">$E6</span> <span class="token comment">; $98</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>,<span class="token hexnumber string">$EA</span> <span class="token comment">; $9A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>,<span class="token hexnumber string">$EE</span> <span class="token comment">; $9C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $9E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$07</span> <span class="token comment">; $A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$5D</span> <span class="token comment">; $A2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$07</span> <span class="token comment">; $A4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$0B</span> <span class="token comment">; $A6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>,<span class="token hexnumber string">$79</span> <span class="token comment">; $AA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7B</span>,<span class="token hexnumber string">$2D</span> <span class="token comment">; $AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>,<span class="token hexnumber string">$2F</span> <span class="token comment">; $AE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$45</span>,<span class="token hexnumber string">$55</span> <span class="token comment">; $B0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$13</span> <span class="token comment">; $B2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>,<span class="token hexnumber string">$17</span> <span class="token comment">; $B4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1F</span>,<span class="token hexnumber string">$21</span> <span class="token comment">; $B6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$25</span> <span class="token comment">; $B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span>,<span class="token hexnumber string">$13</span> <span class="token comment">; $BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>,<span class="token hexnumber string">$25</span> <span class="token comment">; $BC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$59</span>,<span class="token hexnumber string">$59</span> <span class="token comment">; $BE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5B</span>,<span class="token hexnumber string">$5B</span> <span class="token comment">; $C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>,<span class="token hexnumber string">$03</span> <span class="token comment">; $C2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>,<span class="token hexnumber string">$07</span> <span class="token comment">; $C4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>,<span class="token hexnumber string">$0B</span> <span class="token comment">; $C6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>,<span class="token hexnumber string">$0F</span> <span class="token comment">; $C8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>,<span class="token hexnumber string">$11</span> <span class="token comment">; $CA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>,<span class="token hexnumber string">$17</span> <span class="token comment">; $CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span>,<span class="token hexnumber string">$FB</span> <span class="token comment">; $CE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>,<span class="token hexnumber string">$1B</span> <span class="token comment">; $D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1D</span>,<span class="token hexnumber string">$1F</span> <span class="token comment">; $D2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>,<span class="token hexnumber string">$23</span> <span class="token comment">; $D4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$27</span> <span class="token comment">; $D6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>,<span class="token hexnumber string">$27</span> <span class="token comment">; $D8</span>
IFDEF EXPAND_TABLES
	unusedSpace EnemyTilemap<span class="token decimalnumber string">2</span> + <span class="token hexnumber string">$100</span>, <span class="token hexnumber string">$FB</span>
ENDIF


EnemyInit_Clawgrip:
	<span class="token opcode property">JSR</span> EnemyInit_Birdo

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">JSR</span> SetBossTileset
ENDIF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> SetEnemyAttributes
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6477" href="#l6477" title="Link to line 6477">#</a><code>unk_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">120</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>
unk_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">128</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6496" href="#l6496" title="Link to line 6496">#</a><code>EnemyBehavior_Clawgrip:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">13</span>B

	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6505" href="#l6505" title="Link to line 6505">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">13</span>B:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$70</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">147</span>

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">147</span>:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">179</span>

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">168</span>

	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">168</span>

	<span class="token opcode property">LDY</span> ScreenBoundaryLeftLo
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">168</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">174</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">168</span>:
	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">174</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">174</span>:
	<span class="token opcode property">STY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>CD

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6551" href="#l6551" title="Link to line 6551">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">179</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$50</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">17</span>D

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">17</span>D:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>CD

	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> unk_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">128</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>CD

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_ClawgripRock
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> unk_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">120</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>CD:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JSR</span> ApplyObjectMovement_Vertical

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>D<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JMP</span> RenderSprite


	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>

byte_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>D<span class="token decimalnumber string">8</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>

byte_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>DC:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>


RenderSprite_Clawgrip:
	LDA_abs byte_RAM_F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>FA

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$D2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">21</span>C

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>FA:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C2</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">204</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C6</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">204</span>:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">21</span>C

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$CA</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">21</span>C

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C2</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">21</span>C

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">21</span>C

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C2</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">21</span>C:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C6</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">22</span>E

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C2</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">22</span>E:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">246</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$CE</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">246</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C2</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">246</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">246</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$C2</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">246</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">24</span>D

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$D2</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">24</span>D:
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">ASL</span> byte_RAM_EE
	<span class="token opcode property">ASL</span> byte_RAM_EE
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">262</span>

	<span class="token opcode property">LSR</span> EnemyMovementDirection, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">262</span>:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">STY</span> byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>D<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>D<span class="token decimalnumber string">1</span>

	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>D<span class="token decimalnumber string">3</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftLo
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>D<span class="token decimalnumber string">8</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>AA

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>AA

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">1</span>DC, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>AA:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8894</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	STY_abs byte_RAM_F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00010000</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D6</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>D<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6794" href="#l6794" title="Link to line 6794">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>D<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>E<span class="token decimalnumber string">1</span>

	LDX_abs byte_RAM_F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">DEC</span> SpriteDMAArea + $C, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6807" href="#l6807" title="Link to line 6807">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">2</span>E<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">DEC</span> SpriteDMAArea + <span class="token decimalnumber string">8</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6816" href="#l6816" title="Link to line 6816">#</a><code>EnemyBehavior_ClawgripRock:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JSR</span> ApplyObjectMovement_Vertical

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">30</span><span class="token register variable">A</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">30</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">320</span>

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">320</span>:
	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6857" href="#l6857" title="Link to line 6857">#</a><code>RenderSprite_ClawgripRock:
	LDA_abs_X ObjectBeingCarriedTimer <span class="token comment">;, X</span>

	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">362</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">338</span>

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">338</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">344</span>

	<span class="token opcode property">LSR</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">344</span>

	<span class="token opcode property">LSR</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">344</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">354</span>

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">354</span>:
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">362</span>:
	<span class="token opcode property">JMP</span> RenderSprite_NotAlbatoss


FlyingCarpetSpeed:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>


EnemyBehavior_FlyingCarpet:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">37</span>C

	<span class="token opcode property">DEC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">37</span>C

	<span class="token opcode property">STA</span> PlayerRidingCarpet
	<span class="token opcode property">JMP</span> EnemyDestroy

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6932" href="#l6932" title="Link to line 6932">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">37</span>C:
	<span class="token opcode property">LDA</span> PlayerRidingCarpet
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">38</span>F

	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">38</span>F

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerRidingCarpet
	<span class="token opcode property">JMP</span> RenderSprite_FlyingCarpet

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6946" href="#l6946" title="Link to line 6946">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">38</span>F:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerRidingCarpet
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">39</span>B

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">42</span><span class="token register variable">A</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6956" href="#l6956" title="Link to line 6956">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">39</span>B:
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDirection

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$1A</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerYHi
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>C<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FF</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>C<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">71</span>CC
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_Right | ControllerInput_Left
	<span class="token opcode property">TAY</span>
	AND_abs PlayerCollision

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>E<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> FlyingCarpetSpeed, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>E<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">71</span>CC, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>E<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>EA

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7008" href="#l7008" title="Link to line 7008">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>E<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>EA:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>F<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FF</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">3</span>F<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">71</span>CC
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">CMP</span> SpriteTempScreenY
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">417</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">AND</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">41</span>B

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">417</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">428</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">41</span>B:
	<span class="token opcode property">LDA</span> FlyingCarpetSpeed, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">42</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">71</span>CC, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">428</span>:
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">42</span><span class="token register variable">A</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_FlyingCarpet_Render

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">43</span><span class="token register variable">A</span>:
	<span class="token opcode property">BNE</span> EnemyBehavior_FlyingCarpet_Render

	<span class="token opcode property">RTS</span>

EnemyBehavior_FlyingCarpet_Render:
	<span class="token opcode property">JMP</span> RenderSprite_FlyingCarpet


CreateFlyingCarpet:
	<span class="token opcode property">JSR</span> CreateEnemy_TryAllSlots

	<span class="token opcode property">BMI</span> CreateFlyingCarpet_Exit

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_FlyingCarpet
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes
&nbsp;</code></pre><aside><p>life of carpet</p>
&nbsp;</aside><pre><a name="l7111" href="#l7111" title="Link to line 7111">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

CreateFlyingCarpet_Exit:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


FlyingCarpetMirroring:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>

FlyingCarpetTilemapIndex:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>

PidgitYAcceleration:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

PidgitTurnYVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>

PidgitXAcceleration:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

PidgitTurnXVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>

PidgitDiveXVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>


EnemyBehavior_Pidgit:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Pidgit_Alive

	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_UpsideDown
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> RenderSprite_Pidgit

	<span class="token opcode property">JMP</span> ApplyObjectMovement

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7167" href="#l7167" title="Link to line 7167">#</a><code>EnemyBehavior_Pidgit_Alive:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">DEC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>BE

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>BE

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> EnemyTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>BE:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">502</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7191" href="#l7191" title="Link to line 7191">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>C<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> PidgitDiveXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> RenderSprite_Pidgit

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7206" href="#l7206" title="Link to line 7206">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>D<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PidgitYAcceleration, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> PidgitTurnYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>EC

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">4</span>EC:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PidgitXAcceleration, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> PidgitTurnXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">502</span>

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">502</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX


RenderSprite_Pidgit:
	<span class="token opcode property">JSR</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> RenderSprite_Pidgit_Exit
&nbsp;</code></pre><aside><p>Render Pidgit's carpet</p>
&nbsp;</aside><pre><a name="l7250" href="#l7250" title="Link to line 7250">#</a><code>	<span class="token opcode property">JSR</span> FindSpriteSlot

	STY_abs byte_RAM_F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8894</span>

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">JSR</span> RenderSprite_FlyingCarpet

	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_Horizontal | ObjAttrib_FrontFacing
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

RenderSprite_Pidgit_Exit:
	<span class="token opcode property">RTS</span>


RenderSprite_FlyingCarpet:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">LDY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">55</span>F

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$03</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">55</span>F:
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> FlyingCarpetMirroring, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> FlyingCarpetTilemapIndex, <span class="token register variable">Y</span>
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject


EnemyInit_Mouser:
	<span class="token opcode property">JSR</span> EnemyInit_Birdo

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> SetBossTileset
ENDIF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDY</span> CurrentWorldTileset
	<span class="token opcode property">BEQ</span> EnemyInit_Mouser_SetHP

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>

EnemyInit_Mouser_SetHP:
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><h1>Mouser</h1>
<p>Runs back and forth, throws bombs</p>
<p>byte_RAM_10 = timer used for jumping and throwing
EnemyArray_45C = pauses Mouser when not $00
EnemyTimer = counter used to time throwing (wind up and pitch)
EnemyArray_B1 = counter used for movement direction and non-throw pauses</p>
&nbsp;</aside><pre><a name="l7335" href="#l7335" title="Link to line 7335">#</a><code>EnemyBehavior_Mouser:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Mouser_Active

	<span class="token opcode property">JMP</span> RenderSprite

EnemyBehavior_Mouser_Active:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_Mouser_Falling

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mouser_Move

EnemyBehavior_Mouser_Jump:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mouser_Falling

EnemyBehavior_Mouser_Move:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">5</span>AF
&nbsp;</code></pre><aside><p>the wind-up</p>
&nbsp;</aside><pre><a name="l7371" href="#l7371" title="Link to line 7371">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">5</span>AF:
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mouser_MaybeThrow

	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Mouser_Exit

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$18</span> <span class="token comment">; right</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mouser_PhysicsX

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$E8</span> <span class="token comment">; left</span>

EnemyBehavior_Mouser_PhysicsX:
	<span class="token opcode property">STY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> ApplyObjectPhysicsX

EnemyBehavior_Mouser_MaybeThrow:&nbsp;</code></pre><aside><p>the pitch</p>
&nbsp;</aside><pre><a name="l7398" href="#l7398" title="Link to line 7398">#</a><code>	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Mouser_Exit

EnemyBehavior_Mouser_Throw:
	<span class="token opcode property">JSR</span> CreateEnemy_TryAllSlots

	<span class="token opcode property">BMI</span> EnemyBehavior_Mouser_Exit

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Bomb
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span> <span class="token comment">; throw y-velocity</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span> <span class="token comment">; bomb fuse</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span> <span class="token comment">; throw x-velocity</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

EnemyBehavior_Mouser_Exit:
	<span class="token opcode property">RTS</span>

EnemyBehavior_Mouser_Falling:
	<span class="token opcode property">JMP</span> ApplyObjectMovement_Vertical


RenderSprite_Mouser:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_Alive
	<span class="token opcode property">BNE</span> RenderSprite_Mouser_Hurt

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Mouser_Throw

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_FrontFacing | ObjAttrib_Palette<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

RenderSprite_Mouser_Hurt:
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%10110011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$2C</span> <span class="token comment">; hurt sprite</span>
	<span class="token opcode property">BNE</span> RenderSprite_Mouser_DrawObject

RenderSprite_Mouser_Throw:
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCS</span> RenderSprite_Mouser_Walk

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span> <span class="token comment">; throwing sprite</span>

RenderSprite_Mouser_DrawObject:
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">JMP</span> RenderSprite_Mouser_Exit

RenderSprite_Mouser_Walk:
	<span class="token opcode property">JSR</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCC</span> RenderSprite_Mouser_Exit

RenderSprite_Mouser_Bomb:
	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00010000</span> <span class="token comment">; use tilemap 2</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0B</span>
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">ASL</span> byte_RAM_EE
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	STY_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$38</span> <span class="token comment">; could have been $34 from tilemap 1 instead</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

RenderSprite_Mouser_Exit:&nbsp;</code></pre><aside><p>restore Mouser attributes after drawing the bomb</p>
&nbsp;</aside><pre><a name="l7484" href="#l7484" title="Link to line 7484">#</a><code>	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_Palette<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00110011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7493" href="#l7493" title="Link to line 7493">#</a><code>byte_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">652</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7497" href="#l7497" title="Link to line 7497">#</a><code>RenderSprite_Ostro:
	<span class="token opcode property">JSR</span> RenderSprite_NotRocket

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">ORA</span> byte_RAM_EF
	<span class="token opcode property">ORA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">67</span>C

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">652</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">67</span>C:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7527" href="#l7527" title="Link to line 7527">#</a><code>EnemyBehavior_Ostro:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>DB

	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>BD

	<span class="token opcode property">LDA</span> #Enemy_ShyguyRed
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>BC

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Ostro
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>BC:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7567" href="#l7567" title="Link to line 7567">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>BD:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>DB

	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>DB

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>E<span class="token decimalnumber string">1</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7587" href="#l7587" title="Link to line 7587">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>DB:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>E<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>ED

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">6</span>ED:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">70</span>D

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">700</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicAttributes

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">700</span>:
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">70</span>D:
	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">71</span>E

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">71</span>E

	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer

loc_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">71</span>E:
	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7640" href="#l7640" title="Link to line 7640">#</a><code>EnemyInit_Tryclyde:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> SetBossTileset
ENDIF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> EnemyInit_Birdo_Exit


TryclydeHeadPosition:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

TryclydeFireYVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$12</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$17</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>

TryclydeFireXVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$ED</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>


locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">75</span>C:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><h1>Tryclyde</h1>
<p>Drifts back and forth slightly, spits fire</p>
<p>EnemyArray_477 = counter used to determine movement direction and top head position
EnemyArray_B1 = counter used to determine whether or not the bottom head should move
EnemyArray_45C = used to determine whether Tryclyde is taking damage
EnemyArray_480 = counter used to determine bottom head position</p>
&nbsp;</aside><pre><a name="l7718" href="#l7718" title="Link to line 7718">#</a><code>EnemyBehavior_Tryclyde:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_Tryclyde_PhysicsX

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_Tryclyde_PhysicsX

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FE</span>

EnemyBehavior_Tryclyde_PhysicsX:
	<span class="token opcode property">STY</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BCC</span> RenderSprite_Tryclyde

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>

RenderSprite_Tryclyde:
	<span class="token opcode property">LDA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_A<span class="token decimalnumber string">75</span>C

	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_FrontFacing | ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$48</span> <span class="token comment">; static head regular</span>
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Tryclyde_DrawBody

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$4C</span> <span class="token comment">; static head hurt</span>

RenderSprite_Tryclyde_DrawBody:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$30</span>
	STY_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_FrontFacing
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00110011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8894</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$50</span> <span class="token comment">; tail up</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> RenderSprite_Tryclyde_DrawTail

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">AND</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Tryclyde_DrawTail

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$53</span> <span class="token comment">; tail down</span>

RenderSprite_Tryclyde_DrawTail:&nbsp;</code></pre><aside><p>tail</p>
&nbsp;</aside><pre><a name="l7791" href="#l7791" title="Link to line 7791">#</a><code>	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles
&nbsp;</code></pre><aside><p>top head</p>
&nbsp;</aside><pre><a name="l7801" href="#l7801" title="Link to line 7801">#</a><code>	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8894</span>

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00010011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> TryclydeHeadPosition, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> SpriteTempScreenX
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$56</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BNE</span> RenderSprite_Tryclyde_DrawTopHead

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$58</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BCS</span> RenderSprite_Tryclyde_DrawTopHead

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$5A</span>

RenderSprite_Tryclyde_DrawTopHead:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles
&nbsp;</code></pre><aside><p>bottom head</p>
&nbsp;</aside><pre><a name="l7843" href="#l7843" title="Link to line 7843">#</a><code>	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> TryclydeHeadPosition, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> SpriteTempScreenX
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$56</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BNE</span> RenderSprite_Tryclyde_DrawBottomHead

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$58</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BCS</span> RenderSprite_Tryclyde_DrawBottomHead

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$5A</span>

RenderSprite_Tryclyde_DrawBottomHead:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00010011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">BNE</span> EnemyBehavior_Tryclyde_SpitFireballs

RenderSprite_Tryclyde_DrawBottomNeck:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$58</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0D</span> <span class="token comment">; neck sprite</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$59</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$5D</span> <span class="token comment">; bottom neck</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token hexnumber string">$32</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$5A</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$5E</span> <span class="token comment">; bottom neck</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$5B</span>

RenderSprite_Tryclyde_DrawTopNeck:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$5C</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$5F</span>

EnemyBehavior_Tryclyde_SpitFireballs:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_Tryclyde_SpitFireball

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>

EnemyBehavior_Tryclyde_SpitFireball:
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$67</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BNE</span> RenderSprite_Tryclyde_Exit

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> RenderSprite_Tryclyde_Exit

	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> RenderSprite_Tryclyde_Exit

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_BirdoShot
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Fireball
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Tryclyde_GetFireAngle

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>

EnemyBehavior_Tryclyde_GetFireAngle:&nbsp;</code></pre><aside><p>angle the fireball based on the player's position</p>
&nbsp;</aside><pre><a name="l7949" href="#l7949" title="Link to line 7949">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0B</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_Tryclyde_SetFireVelocity

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0B</span>

EnemyBehavior_Tryclyde_SetFireVelocity:
	<span class="token opcode property">TAX</span> <span class="token comment">; These may be fireball speed pointers</span>
	<span class="token opcode property">LDA</span> TryclydeFireYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> TryclydeFireXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
&nbsp;</code></pre><aside><p>Sets enemy attributes to defaults, restores X, and exits</p>
<p>Input
Y = enemy index
Output
X = enemy index</p>
&nbsp;</aside><pre><a name="l7975" href="#l7975" title="Link to line 7975">#</a><code>RenderSprite_Tryclyde_ResetAttributes:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

RenderSprite_Tryclyde_Exit:
	<span class="token opcode property">RTS</span>


EnemyInit_Cobrats:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><h1>Cobrat (Ground)</h1>
<p>Bobs up and down until the player gets close, then jumps up, chases, and shoots bullets</p>
<p>EnemyVariable = target y-position
EnemyArray_480 = flag that gets enabled when the player gets close
EnemyArray_477 = counter used to determine bobbing direction
ObjectAnimationTimer = counter used to determine how quickly Cobrat turns
EnemyArray_453 = counter used to determine when to fire a bullet</p>
&nbsp;</aside><pre><a name="l8008" href="#l8008" title="Link to line 8008">#</a><code>EnemyBehavior_CobratGround:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratGround_Jump

	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_CobratGround_Bob

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratGround_Jump

EnemyBehavior_CobratGround_Bob:
	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_CobratGround_BobMovement

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span>

EnemyBehavior_CobratGround_BobMovement:
	<span class="token opcode property">STY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_BehindBackground | ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> RenderSprite

EnemyBehavior_CobratGround_Jump:
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> EnemyBehavior_CobratGround_Movement

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">CMP</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_CobratGround_Movement

	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

EnemyBehavior_CobratGround_Movement:
	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratGround_AfterBasicMovement

	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer

EnemyBehavior_CobratGround_AfterBasicMovement:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratGround_CheckCollision

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>

EnemyBehavior_CobratGround_CheckCollision:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_CobratGround_SetAttributes

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

EnemyBehavior_CobratGround_SetAttributes:
	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> EnemyBehavior_CobratGround_Shoot

	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_BehindBackground | ObjAttrib_Palette<span class="token decimalnumber string">1</span>

EnemyBehavior_CobratGround_Shoot:
	<span class="token opcode property">JMP</span> EnemyBehavior_CobratJar_Shoot

&nbsp;</code></pre><aside><h1>Cobrat (Jar)</h1>
<p>Bobs up and down, then occasionally jumps up to shoot a bullet at the player</p>
<p>EnemyVariable = target y-position
EnemyArray_B1 = flag that gets set when the Cobrat jumps
byte_RAM_10 = counter used to determine when to jump and fire
EnemyArray_453 = counter used to determine when to fire a bullet</p>
&nbsp;</aside><pre><a name="l8111" href="#l8111" title="Link to line 8111">#</a><code>EnemyBehavior_CobratJar:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Up
	<span class="token opcode property">BEQ</span> EnemyBehavior_CobratJar_Uncorked

EnemyBehavior_CobratJar_Corked:
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

EnemyBehavior_CobratJar_Uncorked:
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>

	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratJar_Jump

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratJar_Bob

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> EnemyBehavior_CobratJar_Movement

EnemyBehavior_CobratJar_Bob:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_CobratJar_BobMovement

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span>

EnemyBehavior_CobratJar_BobMovement:
	<span class="token opcode property">STY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">JMP</span> EnemyBehavior_CobratJar_SetAttributes

EnemyBehavior_CobratJar_Jump:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> EnemyBehavior_CobratJar_Movement

	<span class="token opcode property">BNE</span> EnemyBehavior_CobratJar_CheckLanding

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>

EnemyBehavior_CobratJar_CheckLanding:
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> EnemyBehavior_CobratJar_CheckReset

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyBehavior_CobratJar_CheckReset

	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$6F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_CobratJar_CheckReset

EnemyBehavior_CobratJar_Blocked:
	<span class="token opcode property">LDA</span> #EnemyState_Dead
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #DPCM_BossHurt
	<span class="token opcode property">STA</span> DPCMQueue

EnemyBehavior_CobratJar_CheckReset:
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_CobratJar_Movement

	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

EnemyBehavior_CobratJar_Movement:
	<span class="token opcode property">JSR</span> ApplyObjectMovement_Vertical

EnemyBehavior_CobratJar_SetAttributes:
	<span class="token opcode property">LDA</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_BehindBackground | ObjAttrib_Palette<span class="token decimalnumber string">1</span>

EnemyBehavior_CobratJar_Shoot:
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_CobratJar_Render

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_CobratJar_RenderShot

	<span class="token opcode property">JSR</span> CreateBullet

EnemyBehavior_CobratJar_RenderShot:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$64</span> <span class="token comment">; firing bullet</span>
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject

EnemyBehavior_CobratJar_Render:
	<span class="token opcode property">JMP</span> RenderSprite


EnemyInit_Pokey:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8235" href="#l8235" title="Link to line 8235">#</a><code>unk_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">1</span>C:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0E</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8241" href="#l8241" title="Link to line 8241">#</a><code>EnemyBehavior_Pokey:
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">2</span>D

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_Check<span class="token decimalnumber string">42</span>FPhysicsInterrupt

loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">2</span>D:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">3</span><span class="token register variable">A</span>

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">3</span>E

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8263" href="#l8263" title="Link to line 8263">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">3</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">99</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l8269" href="#l8269" title="Link to line 8269">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">3</span>E:
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">99</span>

	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">99</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Pokey
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> RenderSprite_Tryclyde_ResetAttributes

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>

loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">78</span>:
	<span class="token opcode property">LDA</span> unk_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">1</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_AA<span class="token decimalnumber string">99</span>:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AAA<span class="token decimalnumber string">4</span>

	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer

loc_BANK<span class="token decimalnumber string">3</span>_AAA<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JMP</span> RenderSprite


&nbsp;</code></pre><aside><p>End of function sub_BANK3_AA3E</p>
&nbsp;</aside><pre><a name="l8331" href="#l8331" title="Link to line 8331">#</a><code>PokeyWiggleOffset:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>


RenderSprite_Pokey:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">BNE</span> RenderSprite_Pokey_Segments

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>

RenderSprite_Pokey_Segments:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">STA</span> PokeyTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PokeyWiggleOffset, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">JSR</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Pokey_Exit

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> PokeyTempScreenX
	<span class="token opcode property">ADC</span> PokeyWiggleOffset + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$70</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Pokey_Exit

	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> PokeyTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PokeyWiggleOffset + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$70</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Pokey_Exit

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> PokeyTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PokeyWiggleOffset + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$70</span>
	<span class="token opcode property">JSR</span> SetSpriteTiles

RenderSprite_Pokey_Exit:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


EnemyBehavior_Rocket:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Rocket_Flying
	<span class="token opcode property">JMP</span> EnemyBehavior_Rocket_Launching

EnemyBehavior_Rocket_Flying:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Rocket_Slow

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$FD</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_Rocket_Fast

EnemyBehavior_Rocket_Slow:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">INC</span> SpriteTempScreenX
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Rocket_Fast

	<span class="token opcode property">DEC</span> SpriteTempScreenX
	<span class="token opcode property">DEC</span> SpriteTempScreenX

EnemyBehavior_Rocket_Fast:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Rocket_ApplyPhysics

	<span class="token opcode property">DEC</span> ObjectYVelocity, <span class="token register variable">X</span>

EnemyBehavior_Rocket_ApplyPhysics:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Rocket_DroppingOff

	<span class="token opcode property">LDY</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> EnemyBehavior_Rocket_Render

	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">LDA</span> #Enemy_Rocket
	<span class="token opcode property">STA</span> ObjectCarriedOver
	<span class="token opcode property">INC</span> DoAreaTransition
	<span class="token opcode property">LDA</span> #TransitionType_Rocket
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	STA_abs PlayerState

	<span class="token opcode property">RTS</span>

EnemyBehavior_Rocket_DroppingOff:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_Rocket_Render

	<span class="token opcode property">LDY</span> PlayerInRocket
	<span class="token opcode property">BNE</span> EnemyBehavior_Rocket_DropPlayer

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_Rocket_Render

	<span class="token opcode property">JMP</span> EnemyBehavior_Bomb_Explode

EnemyBehavior_Rocket_DropPlayer:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerInRocket
	<span class="token opcode property">STA</span> HoldingItem
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">STA</span> PlayerScreenYLo

EnemyBehavior_Rocket_Render:
	<span class="token opcode property">JSR</span> RenderSprite_Rocket

	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$93</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$97</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$9B</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span> <span class="token comment">; long trail</span>
	<span class="token opcode property">LDY</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$FD</span>
	<span class="token opcode property">BMI</span> EnemyBehavior_Rocket_RenderTrails

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$15</span> <span class="token comment">; short trail</span>

EnemyBehavior_Rocket_RenderTrails:
	<span class="token opcode property">ADC</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$90</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$94</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$98</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$8C</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$91</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$95</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$99</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$92</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$96</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$9A</span>
	<span class="token opcode property">RTS</span>

EnemyBehavior_Rocket_Launching:&nbsp;</code></pre><aside><p>Wait until ObjectBeingCarriedTimer reaches 1 to start the boosters</p>
&nbsp;</aside><pre><a name="l8526" href="#l8526" title="Link to line 8526">#</a><code>	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Rocket_Carry
&nbsp;</code></pre><aside><p>Setting EnemyArray_B1 puts the rocket in the area</p>
&nbsp;</aside><pre><a name="l8531" href="#l8531" title="Link to line 8531">#</a><code>	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerInRocket
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">3</span>_Rumble_A
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FE</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

EnemyBehavior_Rocket_Carry:
	<span class="token opcode property">JSR</span> CarryObject

RenderSprite_Rocket:
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$23</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$96</span>
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">53</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$96</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">53</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8572" href="#l8572" title="Link to line 8572">#</a><code>byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">25</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">26</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l8581" href="#l8581" title="Link to line 8581">#</a><code>RenderSprite_Fryguy:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_EE
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">25</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">4</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$88</span>

loc_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">4</span>B:
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">JSR</span> FindSpriteSlot

	STY_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">26</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$84</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">67</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$8C</span>

loc_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">67</span>:
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject


&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8625" href="#l8625" title="Link to line 8625">#</a><code>EnemyInit_Fryguy:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">JSR</span> SetBossTileset
ENDIF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8641" href="#l8641" title="Link to line 8641">#</a><code>byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">77</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">7</span>B:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">7</span>F:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">83</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">85</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D6</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">87</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">89</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8675" href="#l8675" title="Link to line 8675">#</a><code>EnemyBehavior_Fryguy:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_ACE<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">STA</span> FryguySplitFlames
	<span class="token opcode property">JSR</span> EnemyDestroy

loc_BANK<span class="token decimalnumber string">3</span>_ACA<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_ACE<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">4</span>EF, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> #Enemy_FryguySplit
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">77</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">7</span>B, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">7</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">3</span>_ACE<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_ACA<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">3</span>_ACE<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">07</span>

	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Fireball
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">07</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">37</span>

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">87</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">89</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">21</span>

	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">21</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">83</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_AC<span class="token decimalnumber string">85</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">37</span>

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">37</span>:
	<span class="token opcode property">JSR</span> RenderSprite_Fryguy

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">JMP</span> ApplyObjectPhysicsX
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8784" href="#l8784" title="Link to line 8784">#</a><code>unk_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">40</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$7F</span>
unk_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">44</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DE</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8795" href="#l8795" title="Link to line 8795">#</a><code>EnemyBehavior_FryguySplit:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">59</span>

	<span class="token opcode property">JSR</span> PlayBossHurtSound

	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000000</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> TurnIntoPuffOfSmoke

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8808" href="#l8808" title="Link to line 8808">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">59</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">JSR</span> RenderSprite

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">7</span><span class="token register variable">A</span>

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">7</span><span class="token register variable">A</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">85</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

loc_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">85</span>:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDY</span> FryguySplitFlames
	<span class="token opcode property">AND</span> unk_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">40</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_ADAB

	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">ORA</span> unk_BANK<span class="token decimalnumber string">3</span>_AD<span class="token decimalnumber string">44</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer

	<span class="token opcode property">LDA</span> FryguySplitFlames
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_ADAB

	<span class="token opcode property">ASL</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_ADAB:
IFDEF REV_A
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_ChangingSize
	<span class="token opcode property">BEQ</span> +
ENDIF

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JMP</span> ApplyObjectMovement_Vertical

IFDEF REV_A
	+ <span class="token opcode property">RTS</span>
ENDIF

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8878" href="#l8878" title="Link to line 8878">#</a><code>EnemyBehavior_Autobomb:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_ADF<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">ORA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_ADF<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> #Enemy_ShyguyRed
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_ADF<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Autobomb
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyInit_BasicAttributes

	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">3</span>_ADF<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">09</span>

	<span class="token opcode property">JSR</span> ResetObjectYVelocity

loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">09</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">14</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">14</span>:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">45</span>

	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">28</span>

	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer

loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">28</span>:
	<span class="token opcode property">LDA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%01111111</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">45</span>

	<span class="token opcode property">JSR</span> EnemyInit_BasicMovementTowardPlayer
&nbsp;</code></pre><aside><p>which bullet?</p>
&nbsp;</aside><pre><a name="l8964" href="#l8964" title="Link to line 8964">#</a><code>	<span class="token opcode property">JSR</span> CreateBullet

	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">45</span>

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span> <span class="token comment">; X has the new enemy index</span>
	<span class="token opcode property">LDA</span> #Enemy_AutobombFire&nbsp;</code></pre><aside><p>Set the enemy type and attributes
BUG: The subroutine overwrites RAM_0 (enemy index)
Should have pushed it to stack instead.</p>
&nbsp;</aside><pre><a name="l8973" href="#l8973" title="Link to line 8973">#</a><code>	<span class="token opcode property">JSR</span> EnemyBehavior_SpitProjectile

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">DEC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">45</span>:
	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8986" href="#l8986" title="Link to line 8986">#</a><code>RenderSprite_Autobomb:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_Alive
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">5</span>C

	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_UpsideDown
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$76</span>
	<span class="token opcode property">JMP</span> RenderSprite_DrawObject

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l8999" href="#l8999" title="Link to line 8999">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">5</span>C:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">7</span>C

	LDA_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenY
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F5</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">JSR</span> FindSpriteSlot

	STY_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7C</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">PLA</span>
	STA_abs byte_RAM_F<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">3</span>_AE<span class="token decimalnumber string">7</span>C:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">JSR</span> RenderSprite_NotAlbatoss

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	STA_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%11010000</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$50</span>
	<span class="token opcode property">LDY</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AEA<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%01010010</span>

loc_BANK<span class="token decimalnumber string">3</span>_AEA<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9048" href="#l9048" title="Link to line 9048">#</a><code>EnemyInit_WhaleSpout:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9057" href="#l9057" title="Link to line 9057">#</a><code>EnemyBehavior_WhaleSpout:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_AEC<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">3</span>_AEC<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9073" href="#l9073" title="Link to line 9073">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_AEC<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AECD

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_AECD:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">3</span>_ShortNoise
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_AEE<span class="token decimalnumber string">6</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$DC</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_AEE<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AEE<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$FB</span>

loc_BANK<span class="token decimalnumber string">3</span>_AEE<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">STY</span> ObjectYVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_AEE<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

RenderSprite_WhaleSpout:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> #$C
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_AEC<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$29</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$92</span>
	<span class="token opcode property">LDY</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$DC</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">03</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$94</span>

loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">03</span>:
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$55</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">13</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3A</span>

loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">13</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$55</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$E8</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">1</span>E

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3A</span>

loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">1</span>E:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$55</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">29</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3A</span>

loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">29</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$55</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">34</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3A</span>

loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">34</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + $D, <span class="token register variable">Y</span>
	LDX_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $<span class="token register variable">A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $E, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $B, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $F, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> #$F
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">8</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $C, <span class="token register variable">Y</span>

locret_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">74</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9188" href="#l9188" title="Link to line 9188">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span>
byte_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">76</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9195" href="#l9195" title="Link to line 9195">#</a><code>EnemyBehavior_Flurry:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_CheckDamagedInterrupt

	<span class="token opcode property">JSR</span> EnemyBehavior_CheckBeingCarriedTimerInterrupt

	<span class="token opcode property">JSR</span> ObjectTileCollision

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">8</span>D

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

loc_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">8</span>D:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AFB<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> ResetObjectYVelocity

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AFB<span class="token decimalnumber string">4</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_AFAC

	<span class="token opcode property">JSR</span> HalfObjectVelocityX

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AFDA

loc_BANK<span class="token decimalnumber string">3</span>_AFAC:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

loc_BANK<span class="token decimalnumber string">3</span>_AFB<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$16</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AFBF

	<span class="token opcode property">DEC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9470</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9246" href="#l9246" title="Link to line 9246">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_AFBF:
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">INY</span>
	<span class="token opcode property">STY</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_AFDA

	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> locret_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">74</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_AFDA

	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AF<span class="token decimalnumber string">76</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_AFDA:
	<span class="token opcode property">JSR</span> ApplyObjectMovement

	<span class="token opcode property">INC</span> unk_RAM_<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> RenderSprite

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9272" href="#l9272" title="Link to line 9272">#</a><code>EnemyInit_HawkmouthBoss:
	<span class="token opcode property">JSR</span> EnemyInit_Hawkmouth <span class="token comment">; Falls through to EnemyInit_Stationary</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9281" href="#l9281" title="Link to line 9281">#</a><code>byte_BANK<span class="token decimalnumber string">3</span>_AFEC:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
byte_BANK<span class="token decimalnumber string">3</span>_AFEE:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D8</span>
byte_BANK<span class="token decimalnumber string">3</span>_AFF<span class="token decimalnumber string">0</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
byte_BANK<span class="token decimalnumber string">3</span>_AFF<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9294" href="#l9294" title="Link to line 9294">#</a><code>EnemyBehavior_HawkmouthBoss:
	<span class="token opcode property">JSR</span> RenderSprite_HawkmouthBoss

	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000110</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">71</span>FE
	<span class="token opcode property">LDA</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">05</span>F

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">01</span>C

	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$90</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> CrystalAndHawkmouthOpenSize

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">01</span>C:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">09</span>B

	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">03</span>B

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$31</span>
	<span class="token opcode property">BNE</span> HawkmouthEat

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">03</span>B

	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">095</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">03</span>B:
	<span class="token opcode property">DEC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> HawkmouthEat

	<span class="token opcode property">DEC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_HawkmouthEating
	<span class="token opcode property">BNE</span> HawkmouthEat

	<span class="token opcode property">LDA</span> #TransitionType_Door
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">INC</span> DoAreaTransition
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">05</span>F:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9362" href="#l9362" title="Link to line 9362">#</a><code>HawkmouthEat:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span> <span class="token comment">; Hawkmouth code?</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">09</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span> <span class="token comment">; make sure the player is inside Hawkmouth</span>
	<span class="token opcode property">AND</span> #CollisionFlags_PlayerInsideMaybe
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">09</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> HoldingItem <span class="token comment">; make sure player is not holding something</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">09</span><span class="token register variable">A</span>

	<span class="token opcode property">STA</span> PlayerCollision <span class="token comment">; start eating player</span>
	<span class="token opcode property">INC</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> HawkmouthClosing
	<span class="token opcode property">DEC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">LDA</span> #PlayerState_HawkmouthEating
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FC</span>
	<span class="token opcode property">STA</span> PlayerYVelocity

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l9394" href="#l9394" title="Link to line 9394">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">095</span>:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_HawkOpen_WartBarf
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">09</span><span class="token register variable">A</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_B095</p>
&nbsp;</aside><pre><a name="l9403" href="#l9403" title="Link to line 9403">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9405" href="#l9405" title="Link to line 9405">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">09</span>B:
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000011</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">71</span>FE
	<span class="token opcode property">LDA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>BA

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span> <span class="token comment">; Hawkmouth Boss health?</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">095</span>

	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>BA:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>E<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AFF<span class="token decimalnumber string">0</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_AFF<span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>D<span class="token decimalnumber string">3</span>

	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>D<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_AFEE, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>E<span class="token decimalnumber string">3</span>

	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_AFEC, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>E<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">9430</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9454" href="#l9454" title="Link to line 9454">#</a><code>byte_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>E<span class="token decimalnumber string">6</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l9459" href="#l9459" title="Link to line 9459">#</a><code>RenderSprite_HawkmouthBoss:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">2</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">13</span>

	<span class="token opcode property">LDA</span> CrystalAndHawkmouthOpenSize
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">16</span>D

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">16</span>D
&nbsp;</code></pre><aside><p>draw the back of Hawkmouth</p>
&nbsp;</aside><pre><a name="l9472" href="#l9472" title="Link to line 9472">#</a><code>	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">0</span>E<span class="token decimalnumber string">6</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">112</span>

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">PHA</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">112</span>:
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">16</span>D

	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $B, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $F, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> DoorAnimationTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">129</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">129</span>:
	<span class="token opcode property">LDA</span> SpriteDMAArea, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">13</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">13</span>B:
	<span class="token opcode property">ORA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $<span class="token register variable">A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $E, <span class="token register variable">Y</span>
	LDX_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">8</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $C, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F2</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F4</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F6</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $D, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">16</span>D:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


VegetableThrowerOffsetX:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>

VegetableThrowerOffsetY:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$84</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$84</span>

VegetableThrowerVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span>


Generator_VegetableThrower:
	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">1</span>CC

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">1</span>CC

	<span class="token opcode property">INC</span> VegetableThrowerShotCounter
	<span class="token opcode property">JSR</span> CreateEnemy_TryAllSlots

	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">1</span>CC

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> VegetableThrowerShotCounter
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> VegetableThrowerVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> VegetableThrowerOffsetX, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> VegetableThrowerOffsetY, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PseudoRNGValues + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">1</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">1</span>C<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDY</span> #Enemy_VegetableLarge
	<span class="token opcode property">STY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">1</span>CC:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l9613" href="#l9613" title="Link to line 9613">#</a><code>EnemyInit_Wart:
	<span class="token opcode property">JSR</span> EnemyInit_Basic

IFDEF RESET_CHR_LATCH
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">JSR</span> SetBossTileset
ENDIF

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">4</span>EF, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>


WartBubbleYVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E4</span>

&nbsp;</code></pre><aside><h1>Wart</h1>
<p>Walks back and forth, spits bubbles</p>
<p>EnemyTimer = counter used to determing the bubble spit distance
EnemyVariable = counter used to pause while walking back and forth
EnemyArray_480 = counter used to determine the bubble spit height
EnemyArray_B1 = counter for death animation
EnemyArray_477 = counter used for alternating steps
EnemyArray_45C = counter for blinking while hurt</p>
&nbsp;</aside><pre><a name="l9649" href="#l9649" title="Link to line 9649">#</a><code>EnemyBehavior_Wart:
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Death

	<span class="token opcode property">LDA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Alive
&nbsp;</code></pre><aside><p>start the death sequence</p>
&nbsp;</aside><pre><a name="l9657" href="#l9657" title="Link to line 9657">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Exit

EnemyBehavior_Wart_Alive:
	<span class="token opcode property">INC</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%11111111</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Movement
&nbsp;</code></pre><aside><p>spit bubbles</p>
&nbsp;</aside><pre><a name="l9669" href="#l9669" title="Link to line 9669">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$5F</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>&nbsp;</code></pre><aside><p>counter that determines which index of WartBubbleYVelocity to use</p>
&nbsp;</aside><pre><a name="l9672" href="#l9672" title="Link to line 9672">#</a><code>	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>

EnemyBehavior_Wart_Movement:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>pause at the end of movement</p>
&nbsp;</aside><pre><a name="l9679" href="#l9679" title="Link to line 9679">#</a><code>	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%01000000</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Wart_PhysicsX
&nbsp;</code></pre><aside><p>increment animation timer</p>
&nbsp;</aside><pre><a name="l9684" href="#l9684" title="Link to line 9684">#</a><code>	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span> <span class="token comment">; left movement</span>
	<span class="token opcode property">LDY</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> EnemyBehavior_Wart_SetXVelocity

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span> <span class="token comment">; right movement</span>

EnemyBehavior_Wart_SetXVelocity:
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>

EnemyBehavior_Wart_PhysicsX:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Exit

	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Wart_Exit

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Exit
&nbsp;</code></pre><aside><p>try to create a new enemy for the bubble</p>
&nbsp;</aside><pre><a name="l9707" href="#l9707" title="Link to line 9707">#</a><code>	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> EnemyBehavior_Wart_Exit

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_HawkOpen_WartBarf
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>&nbsp;</code></pre><aside><p>determines how high to spit the bubble</p>
&nbsp;</aside><pre><a name="l9714" href="#l9714" title="Link to line 9714">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAY</span>&nbsp;</code></pre><aside><p>determines how far to spit the bubble</p>
&nbsp;</aside><pre><a name="l9718" href="#l9718" title="Link to line 9718">#</a><code>	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>set up the bubble</p>
&nbsp;</aside><pre><a name="l9721" href="#l9721" title="Link to line 9721">#</a><code>	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> WartBubbleYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_WartBubble
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetEnemyAttributes

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

EnemyBehavior_Wart_Exit:
	<span class="token opcode property">JMP</span> RenderSprite


EnemyBehavior_Wart_Death:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> EnemyBehavior_Wart_DeathFall
&nbsp;</code></pre><aside><p>going up</p>
&nbsp;</aside><pre><a name="l9745" href="#l9745" title="Link to line 9745">#</a><code>	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_Death_Exit

EnemyBehavior_Wart_DeathFall:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY
&nbsp;</code></pre><aside><p>every other frame</p>
&nbsp;</aside><pre><a name="l9760" href="#l9760" title="Link to line 9760">#</a><code>	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> EnemyBehavior_Wart_CheckDeathComplete

	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> EnemyBehavior_Wart_CheckDeathComplete

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">BNE</span> EnemyBehavior_Wart_CheckDeathComplete

	<span class="token opcode property">LDA</span> #DPCM_BossDeath
	<span class="token opcode property">STA</span> DPCMQueue
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> TurnIntoPuffOfSmoke

EnemyBehavior_Wart_CheckDeathComplete:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">BCC</span> EnemyBehavior_Wart_Death_Exit

	<span class="token opcode property">LDA</span> #EnemyState_Dead
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>

EnemyBehavior_Wart_Death_Exit:
	<span class="token opcode property">JMP</span> RenderSprite


EnemyBehavior_WartBubble:
	<span class="token opcode property">INC</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY

	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> RenderSprite

EnemyBehavior_WartBubble_Exit:
	<span class="token opcode property">RTS</span>


RenderSprite_Wart:
	LDA_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7267</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">726</span>B
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7265</span>, <span class="token register variable">Y</span>
	STA_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> byte_RAM_EF
	<span class="token opcode property">BNE</span> EnemyBehavior_WartBubble_Exit

	<span class="token opcode property">LDY</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> RenderSprite_Wart_AfterObjAttrib
&nbsp;</code></pre><aside><p>he dead</p>
&nbsp;</aside><pre><a name="l9823" href="#l9823" title="Link to line 9823">#</a><code>	<span class="token opcode property">LDA</span> #ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span> | ObjAttrib_Palette<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

RenderSprite_Wart_AfterObjAttrib:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$AE</span> <span class="token comment">; top row: shocked</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span> <span class="token comment">; death counter</span>
	<span class="token opcode property">BNE</span> RenderSprite_Wart_TopHurt

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span> <span class="token comment">; enemy timer</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Wart_TopRegular

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BCS</span> RenderSprite_Wart_TopHurt

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> RenderSprite_Wart_TopHurt

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$9E</span> <span class="token comment">; top row: blinking</span>

RenderSprite_Wart_TopHurt:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BNE</span> RenderSprite_Wart_DrawTop

RenderSprite_Wart_TopRegular:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$9E</span> <span class="token comment">; top row: regular</span>
	<span class="token opcode property">LDY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Wart_DrawTop

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A2</span> <span class="token comment">; top row: spitting</span>

RenderSprite_Wart_DrawTop:
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7266</span>, <span class="token register variable">Y</span>
	STA_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$A6</span> <span class="token comment">; middle row: regular</span>
	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> RenderSprite_Wart_MiddleHurt

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Wart_MiddleRegular

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">BCS</span> RenderSprite_Wart_MiddleHurt

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> RenderSprite_Wart_MiddleHurt

	<span class="token opcode property">BEQ</span> RenderSprite_Wart_DrawMiddle

RenderSprite_Wart_MiddleRegular:
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Wart_DrawMiddle

RenderSprite_Wart_MiddleHurt:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$AA</span> <span class="token comment">; middle row: spitting</span>

RenderSprite_Wart_DrawMiddle:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_EE
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteTempScreenY
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7267</span>, <span class="token register variable">Y</span>
	STA_abs byte_RAM_F<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$BA</span> <span class="token comment">; bottom row: standing</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Wart_DrawBottom

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$B2</span> <span class="token comment">; bottom row: left foot up</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> RenderSprite_Wart_DrawBottom

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$B6</span> <span class="token comment">; bottom row: right foot up</span>

RenderSprite_Wart_DrawBottom:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_EE
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> RenderSprite_DrawObject

	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">BNE</span> RenderSprite_Wart_Exit
&nbsp;</code></pre><aside><p>draw backside</p>
&nbsp;</aside><pre><a name="l9918" href="#l9918" title="Link to line 9918">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7267</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7268</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> SpriteTempScreenX
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCS</span> RenderSprite_Wart_Exit

	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $B, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$2F</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">8</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + $<span class="token register variable">A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$19</span> <span class="token comment">; top</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1B</span> <span class="token comment">; middle</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1D</span> <span class="token comment">; bottom</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>

RenderSprite_Wart_Exit:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Unused space in the original ($B39B - $B4DF)</p>
&nbsp;</aside><pre><a name="l9954" href="#l9954" title="Link to line 9954">#</a><code>unusedSpace <span class="token hexnumber string">$B4E0</span>, <span class="token hexnumber string">$FF</span>


byte_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">0</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l9962" href="#l9962" title="Link to line 9962">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">JSR</span> ClearDirectionalCollisionFlags

	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>EB

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>EB:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">5</span><span class="token register variable">A</span>

	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>F<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$82</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>F<span class="token decimalnumber string">7</span>

	<span class="token opcode property">CLC</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>F<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANK3_B4E2</p>
&nbsp;</aside><pre><a name="l9988" href="#l9988" title="Link to line 9988">#</a><code>&nbsp;</code></pre><aside><p>Object/background collision that treats non-sky background tiles as solid,
such as for Sparks and Mushroom Blocks</p>
&nbsp;</aside><pre><a name="l9994" href="#l9994" title="Link to line 9994">#</a><code>ObjectTileCollision_SolidBackground:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> ObjectTileCollision_Main
&nbsp;</code></pre><aside><p>Normal object/background collision</p>
&nbsp;</aside><pre><a name="l10001" href="#l10001" title="Link to line 10001">#</a><code>ObjectTileCollision:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
&nbsp;</code></pre><aside><h1>Object Tile Collision</h1>
<p>Handles object collision with background tiles</p>
<p>Input
A = whether or not to treat walk-through tiles as solid
X = enemy index
Output
EnemyCollision, X = collision flags</p>
&nbsp;</aside><pre><a name="l10016" href="#l10016" title="Link to line 10016">#</a><code>ObjectTileCollision_Main:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">STA</span> byte_RAM_E
	<span class="token opcode property">JSR</span> ClearDirectionalCollisionFlags

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BPL</span> ObjectTileCollision_Downward

ObjectTileCollision_Upward:
	<span class="token opcode property">JSR</span> CheckEnemyTileCollision

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

ObjectTileCollision_Downward:
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> CheckEnemyTileCollision

ObjectTileCollision_CheckQuicksand:
	<span class="token opcode property">LDA</span> ObjectType - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_CobratJar
	<span class="token opcode property">BEQ</span> ObjectTileCollision_CheckConveyor

	<span class="token opcode property">CMP</span> #Enemy_CobratSand
	<span class="token opcode property">BEQ</span> ObjectTileCollision_CheckConveyor

IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #BackgroundTile_QuicksandSlow
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> ObjectTileCollision_CheckConveyor
ELSE
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> TileInteractionAttributesTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00001100</span>
	<span class="token opcode property">CMP</span> <span class="token binarynumber string">#%00001000</span>
	<span class="token opcode property">BNE</span> ObjectTileCollision_CheckConveyor

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #BackgroundTile_QuicksandSlow
ENDIF

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #EnemyState_Sinking
	<span class="token opcode property">STA</span> EnemyState - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> EnemyTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

ObjectTileCollision_CheckConveyor:
IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_E

	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #BackgroundTile_ConveyorLeft
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

ELSE
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STY</span> byte_RAM_E

	<span class="token opcode property">LDA</span> TileInteractionAttributesTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00001100</span>
	<span class="token opcode property">CMP</span> <span class="token binarynumber string">#%00001100</span>

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00000001</span>
ENDIF

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">438</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

	<span class="token opcode property">LDY</span> ObjectType - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">56</span>C

	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

	<span class="token opcode property">LDA</span> byte_RAM_D
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">4</span>E<span class="token decimalnumber string">0</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">56</span>C:
	<span class="token opcode property">LDY</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">579</span>

	<span class="token opcode property">EOR</span> EnemyMovementDirection - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">579</span>

	<span class="token opcode property">DEC</span> ObjectAnimationTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> ObjectAnimationTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">579</span>:
	<span class="token opcode property">INC</span> ObjectAnimationTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">57</span>B:
	<span class="token opcode property">LDA</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXAcceleration - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">587</span>

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">587</span>:
	<span class="token opcode property">JSR</span> CheckEnemyTileCollision

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>Check collision attributes for the next two tiles</p>
&nbsp;</aside><pre><a name="l10152" href="#l10152" title="Link to line 10152">#</a><code>IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
CheckEnemyTileCollision:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">87</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> EnemyTileCollisionTable, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">JSR</span> CheckTileUsesCollisionType_Bank<span class="token decimalnumber string">3</span>

	<span class="token opcode property">BCC</span> CheckEnemyTileCollision_Exit

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> EnemyEnableCollisionFlagTable, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

ELSE
CheckEnemyTileCollision:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">87</span>
&nbsp;</code></pre><aside><p>check tile attributes</p>
&nbsp;</aside><pre><a name="l10176" href="#l10176" title="Link to line 10176">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> TileCollisionAttributesTable, <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">AND</span> CheckEnemyTileCollisionAttributesTable, <span class="token register variable">Y</span>

	<span class="token opcode property">BEQ</span> CheckEnemyTileCollision_Exit

	<span class="token opcode property">LDA</span> EnemyEnableCollisionFlagTable, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
ENDIF

CheckEnemyTileCollision_Exit:
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Resets directional collision flags and loads collision data pointer</p>
<p>Input
X = enemy index
Output
byte_RAM_D = previous collision flags
EnemyCollision = collision flags with up/down/left/right disabled
A = collision data pointer
X = X + 1</p>
&nbsp;</aside><pre><a name="l10205" href="#l10205" title="Link to line 10205">#</a><code>ClearDirectionalCollisionFlags:
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_D
	<span class="token opcode property">AND</span> #CollisionFlags_Damage | CollisionFlags_PlayerOnTop | CollisionFlags_PlayerInsideMaybe | CollisionFlags_<span class="token decimalnumber string">80</span>
	<span class="token opcode property">STA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">492</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_BANKF_F<span class="token decimalnumber string">000</span>, <span class="token register variable">Y</span>

ClearDirectionalCollisionFlags_Exit:
	<span class="token opcode property">RTS</span>


EnemyTileCollisionTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; jumpthrough bottom (y-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; jumpthrough top (y-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; jumpthrough right (x-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; jumpthrough left (x-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; treat background as solid</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; treat background as solid</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; treat background as solid</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; treat background as solid</span>


IFDEF ENABLE_TILE_ATTRIBUTES_TABLE
CheckEnemyTileCollisionAttributesTable:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001000</span> <span class="token comment">; bottom (y-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; top (y-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000010</span> <span class="token comment">; right (x-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000001</span> <span class="token comment">; left (x-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10001000</span> <span class="token comment">; background-interactive bottom (y-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000100</span> <span class="token comment">; background-interactive top (y-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00100010</span> <span class="token comment">; background-interactive right (x-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00010001</span> <span class="token comment">; background-interactive left (x-velocity > 0)</span>
ENDIF

EnemyEnableCollisionFlagTable:
	<span class="token directive keyword">.db</span> CollisionFlags_Up
	<span class="token directive keyword">.db</span> CollisionFlags_Down
	<span class="token directive keyword">.db</span> CollisionFlags_Left
	<span class="token directive keyword">.db</span> CollisionFlags_Right
	<span class="token directive keyword">.db</span> CollisionFlags_Up
	<span class="token directive keyword">.db</span> CollisionFlags_Down
	<span class="token directive keyword">.db</span> CollisionFlags_Left
	<span class="token directive keyword">.db</span> CollisionFlags_Right

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l10252" href="#l10252" title="Link to line 10252">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>CC:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left | CollisionFlags_Down | CollisionFlags_Up
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_BombExploding
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>E<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>FF

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>E<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>F<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_Egg
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$1A</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>F<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>F<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> ClearDirectionalCollisionFlags_Exit

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>F<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> ClearDirectionalCollisionFlags_Exit

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">5</span>FF:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7128</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7100</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">60</span>F

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">60</span>F:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">620</span>

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">620</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">713</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7114</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">630</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">630</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">63</span>B:
	<span class="token opcode property">STX</span> byte_RAM_ED
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">661</span>

	<span class="token opcode property">LDA</span> PlayerInRocket
	<span class="token opcode property">ORA</span> PlayerLock
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">64</span>E

	<span class="token opcode property">LDA</span> EnemyState - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">651</span> <span class="token comment">; branch if A &#x3C; $02</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">64</span>E:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10347" href="#l10347" title="Link to line 10347">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">651</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">65</span>C

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">64</span>E

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">65</span>C:
	<span class="token opcode property">LDY</span> PlayerDucking
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10361" href="#l10361" title="Link to line 10361">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">661</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">671</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00000100</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">690</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">671</span>:
	<span class="token opcode property">LDA</span> EnemyState - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_BombExploding <span class="token comment">; what does this mean for an enemy?</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">67</span>B

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">67</span>B:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">692</span>

	<span class="token opcode property">LDY</span> ObjectType - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_Egg
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">68</span>E

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$1A</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">68</span>E

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">42</span>F - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">692</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">68</span>E:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">690</span>:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">692</span>:
	<span class="token opcode property">LDA</span> ObjectBeingCarriedTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Damage
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDY</span> EnemyArray_<span class="token decimalnumber string">489</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7128</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_A
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7100</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>B<span class="token decimalnumber string">6</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>B<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> ObjectXHi - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>C<span class="token decimalnumber string">7</span>

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>C<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">713</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">7114</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>D<span class="token decimalnumber string">7</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>D<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectYLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> ObjectYHi - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BDC<span class="token decimalnumber string">5</span>

	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> byte_RAM_B
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> EnemyCollisionBehavior

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_B

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">6</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">63</span>B

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10471" href="#l10471" title="Link to line 10471">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_B5CC</p>
&nbsp;</aside><pre><a name="l10479" href="#l10479" title="Link to line 10479">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l10481" href="#l10481" title="Link to line 10481">#</a><code>EnemyCollisionBehavior:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">BNE</span> EnemyCollisionBehavior_ReadCollisionType

	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> EnemyCollisionBehavior_ReadCollisionType

	<span class="token opcode property">LDA</span> ObjectBeingCarriedIndex
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">6</span>F<span class="token decimalnumber string">8</span>

EnemyCollisionBehavior_ReadCollisionType:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">71</span>D<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> JumpToTableAfterJump

	<span class="token directive keyword">.dw</span> EnemyCollisionBehavior_Enemy
	<span class="token directive keyword">.dw</span> EnemyCollisionBehavior_ProjectileItem
	<span class="token directive keyword">.dw</span> EnemyCollisionBehavior_Object
	<span class="token directive keyword">.dw</span> EnemyCollisionBehavior_POW
	<span class="token directive keyword">.dw</span> EnemyCollisionBehavior_Door


EnemyCollisionBehavior_Door:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">BNE</span> EnemyCollisionBehavior_Exit

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Up
	<span class="token opcode property">BEQ</span> EnemyCollisionBehavior_Exit

	<span class="token opcode property">LDA</span> PlayerCollision
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BEQ</span> EnemyCollisionBehavior_Exit

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">426</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$FA</span>
	<span class="token opcode property">BCS</span> EnemyCollisionBehavior_Exit

	<span class="token opcode property">LDA</span> DoorAnimationTimer
	<span class="token opcode property">ORA</span> SubspaceDoorTimer
	<span class="token opcode property">BNE</span> EnemyCollisionBehavior_Exit

	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">749</span>

	<span class="token opcode property">LDY</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Key
	<span class="token opcode property">BNE</span> EnemyCollisionBehavior_Exit

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">749</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">JSR</span> StashPlayerPosition

	<span class="token opcode property">LDA</span> #TransitionType_SubSpace
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">JMP</span> DoorHandling_GoThroughDoor_Bank<span class="token decimalnumber string">3</span>

EnemyCollisionBehavior_Exit:
	<span class="token opcode property">RTS</span>


EnemyCollisionBehavior_Enemy:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">BEQ</span> CheckCollisionWithPlayer

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">45</span>C - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> EnemyCollisionBehavior_Exit

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">792</span>

	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #EnemyState_BombExploding
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">792</span>

	<span class="token opcode property">TXA</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #EnemyState_BombExploding
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">792</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>E<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Damage
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>E<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">792</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>D<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00001000</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>

	<span class="token opcode property">JSR</span> PlayBossHurtSound

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDA</span> EnemyHP, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">Y</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>BD

	<span class="token opcode property">JSR</span> PlayBossHurtSound

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">Y</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>D<span class="token decimalnumber string">7</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>BD:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> #CollisionFlags_Damage
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>D<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> ObjectType - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>E<span class="token decimalnumber string">0</span>

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">5</span>D

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">7</span>E<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDX</span> byte_RAM_ED
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10634" href="#l10634" title="Link to line 10634">#</a><code>InvincibilityKill_VelocityX:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span> <span class="token comment">; to the left</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; to the right</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10638" href="#l10638" title="Link to line 10638">#</a><code>CheckCollisionWithPlayer:
	<span class="token opcode property">LDA</span> byte_RAM_EE
	<span class="token opcode property">AND</span> #CollisionFlags_Up
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_Exit
&nbsp;</code></pre><aside><p>check if it's a heart</p>
&nbsp;</aside><pre><a name="l10645" href="#l10645" title="Link to line 10645">#</a><code>	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NotHeart
&nbsp;</code></pre><aside><p>accept the heart into your life</p>
&nbsp;</aside><pre><a name="l10649" href="#l10649" title="Link to line 10649">#</a><code>	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> PlayerMaxHealth
	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerHealth
	<span class="token opcode property">CMP</span> PlayerHealthValueByHeartCount, <span class="token register variable">Y</span>
	<span class="token opcode property">BCC</span> CheckCollisionWithPlayer_Exit

	<span class="token opcode property">JMP</span> RestorePlayerToFullHealth

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10663" href="#l10663" title="Link to line 10663">#</a><code>CheckCollisionWithPlayer_NotHeart:
	<span class="token opcode property">CMP</span> #Enemy_Phanto
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NotPhanto

	<span class="token opcode property">LDY</span> PhantoActivateTimer
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_Exit

CheckCollisionWithPlayer_NotPhanto:
	<span class="token opcode property">CMP</span> #Enemy_Starman
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NotStarman

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">STA</span> StarInvincibilityTimer
	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">1</span>_Invincible
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #EnemyState_Inactive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>

CheckCollisionWithPlayer_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10686" href="#l10686" title="Link to line 10686">#</a><code>CheckCollisionWithPlayer_NotStarman:
	<span class="token opcode property">CMP</span> #Enemy_WhaleSpout
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NotWhaleSpout

	<span class="token opcode property">LDA</span> EnemyVariable, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$DC</span>
	<span class="token opcode property">BCS</span> CheckCollisionWithPlayer_Exit<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> StarInvincibilityTimer
	<span class="token opcode property">BEQ</span> CheckCollisionWithPlayer_NotInvincible

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$DC</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>

CheckCollisionWithPlayer_Exit<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10707" href="#l10707" title="Link to line 10707">#</a><code>CheckCollisionWithPlayer_NotWhaleSpout:
	<span class="token opcode property">CMP</span> #Enemy_Wart
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NotWart

	<span class="token opcode property">LDA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_Exit<span class="token decimalnumber string">2</span>

CheckCollisionWithPlayer_NotWart:
	<span class="token opcode property">LDY</span> StarInvincibilityTimer
	<span class="token opcode property">BEQ</span> CheckCollisionWithPlayer_NotInvincible
&nbsp;</code></pre><aside><p>player is invincible</p>
&nbsp;</aside><pre><a name="l10720" href="#l10720" title="Link to line 10720">#</a><code>	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">CMP</span> #Enemy_AutobombFire
	<span class="token opcode property">BEQ</span> CheckCollisionWithPlayer_Poof

	<span class="token opcode property">CMP</span> #Enemy_Fireball
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_KillEnemy
&nbsp;</code></pre><aside><p>turn into a puff of smoke</p>
&nbsp;</aside><pre><a name="l10728" href="#l10728" title="Link to line 10728">#</a><code>CheckCollisionWithPlayer_Poof:
	<span class="token opcode property">LDA</span> <span class="token binarynumber string">#%00000000</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_Shell_Destroy

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">878</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10736" href="#l10736" title="Link to line 10736">#</a><code>&nbsp;</code></pre><aside><p>die and fall off</p>
&nbsp;</aside><pre><a name="l10738" href="#l10738" title="Link to line 10738">#</a><code>CheckCollisionWithPlayer_KillEnemy:
	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">LDA</span> InvincibilityKill_VelocityX, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #CollisionFlags_Damage
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">878</span>:
	<span class="token opcode property">LDX</span> byte_RAM_ED
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10755" href="#l10755" title="Link to line 10755">#</a><code>CheckCollisionWithPlayer_NotInvincible:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #EnemyState_BombExploding
	<span class="token opcode property">BEQ</span> CheckCollisionWithPlayer_HurtPlayer
&nbsp;</code></pre><aside><p>should we damage the player for jumping on top?</p>
&nbsp;</aside><pre><a name="l10763" href="#l10763" title="Link to line 10763">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00000001</span>
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_HurtPlayer
&nbsp;</code></pre><aside><p>let player land on top</p>
&nbsp;</aside><pre><a name="l10768" href="#l10768" title="Link to line 10768">#</a><code>	<span class="token opcode property">JSR</span> DetermineCollisionFlags

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0B</span>
	<span class="token opcode property">BEQ</span> CheckCollisionWithPlayer_StandingOnHead

CheckCollisionWithPlayer_HurtPlayer:
	<span class="token opcode property">JMP</span> DamagePlayer


CheckCollisionWithPlayer_StandingOnHead:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerInAir
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #CollisionFlags_PlayerOnTop
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>can you even lift</p>
&nbsp;</aside><pre><a name="l10787" href="#l10787" title="Link to line 10787">#</a><code>	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00000010</span>
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NoLift
&nbsp;</code></pre><aside><p>check B button</p>
&nbsp;</aside><pre><a name="l10792" href="#l10792" title="Link to line 10792">#</a><code>	<span class="token opcode property">BIT</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BVC</span> CheckCollisionWithPlayer_NoLift
&nbsp;</code></pre><aside><p>bail if we already have an item or are ducking</p>
&nbsp;</aside><pre><a name="l10796" href="#l10796" title="Link to line 10796">#</a><code>	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">ORA</span> PlayerDucking
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NoLift

	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">STX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> SetPlayerStateLifting
&nbsp;</code></pre><aside><p>leave a flying carpet behind if we're picking up pidgit</p>
&nbsp;</aside><pre><a name="l10808" href="#l10808" title="Link to line 10808">#</a><code>	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Pidgit
	<span class="token opcode property">BNE</span> CheckCollisionWithPlayer_NoLift

	<span class="token opcode property">JSR</span> CreateFlyingCarpet

CheckCollisionWithPlayer_NoLift:
	<span class="token opcode property">LDX</span> byte_RAM_ED
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function CheckCollisionWithPlayer_StandingOnHead</p>
&nbsp;</aside><pre><a name="l10819" href="#l10819" title="Link to line 10819">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10821" href="#l10821" title="Link to line 10821">#</a><code>EnemyCollisionBehavior_Object:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">905</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Key
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> #CollisionFlags_Down
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">902</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">8</span>FF

	<span class="token opcode property">JSR</span> DetermineCollisionFlags

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> EnemyMovementDirection - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">8</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

	<span class="token opcode property">LDX</span> byte_RAM_ED

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">8</span>F<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">31</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">902</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">8</span>FF:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>EA

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10860" href="#l10860" title="Link to line 10860">#</a><code>locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">902</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10865" href="#l10865" title="Link to line 10865">#</a><code>unk_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">903</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10869" href="#l10869" title="Link to line 10869">#</a><code>&nbsp;</code></pre><aside><p>collision with items that the player can stand on</p>
&nbsp;</aside><pre><a name="l10871" href="#l10871" title="Link to line 10871">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">905</span>:
	<span class="token opcode property">LDA</span> EnemyCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">ORA</span> #CollisionFlags_PlayerInsideMaybe
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> DetermineCollisionFlags

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> PlayerMovementDirection
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">919</span>

	<span class="token opcode property">JSR</span> PlayerHorizontalCollision

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">919</span>:
	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">922</span>

	<span class="token opcode property">JSR</span> CheckCollisionWithPlayer_StandingOnHead

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">922</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">31</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">955</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">955</span>

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> unk_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">903</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">955</span>

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDucking
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerStateTimer

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">955</span>:
	<span class="token opcode property">RTS</span>

EnemyCollisionBehavior_POW:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">955</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>EA

EnemyCollisionBehavior_ProjectileItem:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">TXA</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">95</span>F:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">993</span>

	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">964</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">96</span>E

	<span class="token opcode property">LDA</span> StarInvincibilityTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">990</span>

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">96</span>D:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10949" href="#l10949" title="Link to line 10949">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">96</span>E:
	<span class="token opcode property">JSR</span> DetermineCollisionFlags

	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">987</span>

	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">96</span>D

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">STY</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">Y</span>
	<span class="token opcode property">INC</span> HoldingItem

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">987</span>:
	<span class="token opcode property">LDA</span> byte_RAM_F
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">96</span>D

	<span class="token opcode property">JMP</span> CheckCollisionWithPlayer_StandingOnHead

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10974" href="#l10974" title="Link to line 10974">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">990</span>:
	<span class="token opcode property">JMP</span> DamagePlayer

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l10979" href="#l10979" title="Link to line 10979">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">993</span>:
	<span class="token opcode property">LDA</span> ObjectType - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_Wart
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> EnemyTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>F<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">5</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyHP - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">6</span>

	<span class="token opcode property">INC</span> ScrollXLock

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11005" href="#l11005" title="Link to line 11005">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$32</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">6</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$11</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>CA

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1E</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11020" href="#l11020" title="Link to line 11020">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>CA:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>EC

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Shell
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>EA

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E8</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDX</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$18</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>E<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>EA:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>

loc_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>EC:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">5</span>D

	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>F<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDA</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROR</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">3</span>_B<span class="token decimalnumber string">9</span>F<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11060" href="#l11060" title="Link to line 11060">#</a><code>DamagePlayer:
	<span class="token opcode property">LDA</span> DamageInvulnTime
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">31</span>

	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">32</span>

	<span class="token opcode property">STA</span> PlayerHealth
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STY</span> DamageInvulnTime
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STY</span> PlayerYVelocity
	<span class="token opcode property">STY</span> PlayerXVelocity
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">2</span>C

	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> SpriteTempScreenX
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">LDY</span> PlayerYVelocity
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">2</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">2</span><span class="token register variable">A</span>:
	<span class="token opcode property">STA</span> PlayerYVelocity

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">2</span>C:
	<span class="token opcode property">LDA</span> #DPCM_PlayerHurt
	<span class="token opcode property">STA</span> DPCMQueue

locret_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">31</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11102" href="#l11102" title="Link to line 11102">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">32</span>:
	<span class="token opcode property">TXA</span>

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">33</span>:
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_BeezoDiving
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">48</span>

	<span class="token opcode property">JSR</span> EnemyFindWhichSidePlayerIsOn

	<span class="token opcode property">INY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">CMP</span> EnemyMovementDirection, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">48</span>

	<span class="token opcode property">JSR</span> EnemyBehavior_TurnAround

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">48</span>:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> PlayerYVelocity

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">4</span>E:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">5</span><span class="token register variable">A</span>

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">5</span><span class="token register variable">A</span>:
	<span class="token opcode property">JMP</span> KillPlayer
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11141" href="#l11141" title="Link to line 11141">#</a><code>&nbsp;</code></pre><aside><p>Damage enemy</p>
&nbsp;</aside><pre><a name="l11143" href="#l11143" title="Link to line 11143">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">5</span>D:
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">453</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> EnemyArray_<span class="token decimalnumber string">45</span>C - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">94</span>

	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> #Enemy_Ostro
	<span class="token opcode property">BEQ</span> EnemyTakeDamage

	<span class="token opcode property">JSR</span> PlayBossHurtSound

EnemyTakeDamage:
	<span class="token opcode property">DEC</span> EnemyHP - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span> <span class="token comment">; Subtract hit point</span>
	<span class="token opcode property">BMI</span> EnemyKnockout

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span> <span class="token comment">; Flash</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">7</span><span class="token register variable">A</span>:
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

&nbsp;</code></pre><aside><p>End of function sub_BANK3_BA5D</p>
&nbsp;</aside><pre><a name="l11166" href="#l11166" title="Link to line 11166">#</a><code>PlayBossHurtSound:
	<span class="token opcode property">LDA</span> #DPCM_BossHurt
	<span class="token opcode property">STA</span> DPCMQueue
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11173" href="#l11173" title="Link to line 11173">#</a><code>EnemyKnockout:
	<span class="token opcode property">LDA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> #CollisionFlags_Damage
	<span class="token opcode property">STA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

locret_BANK<span class="token decimalnumber string">3</span>_BA<span class="token decimalnumber string">94</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>Determines the collision flags for two objects</p>
<p>Input:
RAM_12 = main object
X = collision object (usually player?)
Output:
byte_RAM_F = collision flags</p>
&nbsp;</aside><pre><a name="l11196" href="#l11196" title="Link to line 11196">#</a><code>DetermineCollisionFlags:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span> <span class="token comment">; stash Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">427</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F6</span>
	<span class="token opcode property">BCS</span> DetermineCollisionFlags_Y

	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> #CollisionFlags_Left
	<span class="token opcode property">CMP</span> ObjectXLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> DetermineCollisionFlags_SetFlagsX

	<span class="token opcode property">LDY</span> #CollisionFlags_Right

DetermineCollisionFlags_SetFlagsX:
	<span class="token opcode property">STY</span> byte_RAM_F
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> EnemyMovementDirection - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> DetermineCollisionFlags_ExitX

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span> <span class="token comment">; restore Y</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> DetermineCollisionFlags_ExitX
&nbsp;</code></pre><aside><p>@TODO: Looks like a way to make objects move together horizontally</p>
&nbsp;</aside><pre><a name="l11222" href="#l11222" title="Link to line 11222">#</a><code>	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXAcceleration - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

DetermineCollisionFlags_ExitX:
	<span class="token opcode property">RTS</span>


DetermineCollisionFlags_Y:
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_BAD<span class="token decimalnumber string">1</span>

	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDY</span> PlayerDucking
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">2</span>F, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_BAD<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">CMP</span> ObjectYLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">02</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> DetermineCollisionFlags_ExitY

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BAE<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXAcceleration - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_BAE<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">427</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">427</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BAF<span class="token decimalnumber string">1</span>

	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">3</span>_BAF<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">427</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectYLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ADC</span> ObjectYHi - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYHi - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> #CollisionFlags_Down
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">13</span>

loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">02</span>:
	<span class="token opcode property">LDA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">11</span>

	<span class="token opcode property">BPL</span> DetermineCollisionFlags_ExitY

	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Coin
	<span class="token opcode property">BEQ</span> DetermineCollisionFlags_ExitY

loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">11</span>:
	<span class="token opcode property">LDY</span> #CollisionFlags_Up

loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">13</span>:
	<span class="token opcode property">STY</span> byte_RAM_F
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> unk_RAM_<span class="token decimalnumber string">4</span><span class="token register variable">A</span><span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">22</span>
&nbsp;</code></pre><aside><p>@TODO: Looks like a way to make objects move together vertically</p>
&nbsp;</aside><pre><a name="l11294" href="#l11294" title="Link to line 11294">#</a><code>	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYAcceleration - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">22</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYSubpixel, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYSubpixel - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectAnimationTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

DetermineCollisionFlags_ExitY:
	<span class="token opcode property">RTS</span>


byte_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">2</span>F:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11313" href="#l11313" title="Link to line 11313">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">31</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> byte_RAM_F
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">48</span>

	<span class="token opcode property">LDA</span> EnemyCollision - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> byte_RAM_F
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">CMP</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">49</span>

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">48</span>:
	<span class="token opcode property">INY</span>

locret_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">49</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_BB31</p>
&nbsp;</aside><pre><a name="l11337" href="#l11337" title="Link to line 11337">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11339" href="#l11339" title="Link to line 11339">#</a><code>_unused_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">4</span><span class="token register variable">A</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span> <span class="token comment">; May not be used, but wasn't marked as data</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

byte_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">50</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$07</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$94</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$95</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$17</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11360" href="#l11360" title="Link to line 11360">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">5</span><span class="token register variable">A</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">87</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$09</span>
loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">61</span>:
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">50</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">6</span><span class="token register variable">A</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">61</span>

	<span class="token opcode property">CLC</span>

locret_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">6</span><span class="token register variable">A</span>:
	<span class="token opcode property">RTS</span>


ItemCarryYOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11411" href="#l11411" title="Link to line 11411">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">87</span>:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">PHA</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_BANKF_F<span class="token decimalnumber string">011</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">96</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">3</span>_BB<span class="token decimalnumber string">96</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">LDA</span> ObjectXHi - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BBB<span class="token decimalnumber string">5</span>

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">3</span>_BBB<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> byte_BANKF_F<span class="token decimalnumber string">055</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BBBC

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">3</span>_BBBC:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectYLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> ObjectYHi - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">2</span>E

	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">3</span>_BBD<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_BBDD

loc_BANK<span class="token decimalnumber string">3</span>_BBD<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr

	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">3</span>_BBDD:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Check whether a tile should use the given collision handler type</p>
<p>Input
A = tile ID
Y = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)
Output
C = whether or not collision type Y is relevant</p>
&nbsp;</aside><pre><a name="l11491" href="#l11491" title="Link to line 11491">#</a><code>CheckTileUsesCollisionType_Bank<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">PHA</span> <span class="token comment">; stash tile ID for later</span>
&nbsp;</code></pre><aside><p>determine which tile table to use (0-3)</p>
&nbsp;</aside><pre><a name="l11495" href="#l11495" title="Link to line 11495">#</a><code>	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
&nbsp;</code></pre><aside><p>add the offset for the type of collision we're checking</p>
&nbsp;</aside><pre><a name="l11501" href="#l11501" title="Link to line 11501">#</a><code>	<span class="token opcode property">ADC</span> TileGroupTable_Bank<span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
&nbsp;</code></pre><aside><p>check which side of the tile ID pivot we're on</p>
&nbsp;</aside><pre><a name="l11505" href="#l11505" title="Link to line 11505">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">CMP</span> TileSolidnessTable, <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>These map the two high bits of a tile to offets in TileSolidnessTable</p>
&nbsp;</aside><pre><a name="l11513" href="#l11513" title="Link to line 11513">#</a><code>TileGroupTable_Bank<span class="token decimalnumber string">3</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; solid to mushroom blocks</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; solid on top</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; solid on all sides</span>


DoorHandling_GoThroughDoor_Bank<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">INC</span> DoorAnimationTimer
	<span class="token opcode property">INC</span> PlayerLock
	<span class="token opcode property">JSR</span> SnapPlayerToTile_Bank<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> #DPCM_DoorOpenBombBom
	<span class="token opcode property">STA</span> DPCMQueue
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Checks horizontal collision with the player and stops them if necessary</p>
&nbsp;</aside><pre><a name="l11532" href="#l11532" title="Link to line 11532">#</a><code>PlayerHorizontalCollision:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> PlayerMovementDirection
	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">EOR</span> PlayerCollisionResultTable - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">10</span>

	<span class="token opcode property">STX</span> PlayerXVelocity

loc_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">10</span>:
	<span class="token opcode property">LDA</span> PlayerXAcceleration
	<span class="token opcode property">EOR</span> PlayerCollisionResultTable - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">1</span>B

	<span class="token opcode property">STX</span> PlayerXAcceleration

loc_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">1</span>B:
	<span class="token opcode property">STX</span> PlayerXSubpixel

locret_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">1</span>E:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Set the player state to lifting and Kick off the lifting animation</p>
&nbsp;</aside><pre><a name="l11558" href="#l11558" title="Link to line 11558">#</a><code>SetPlayerStateLifting:
	<span class="token opcode property">LDA</span> #PlayerState_Lifting
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">INC</span> HoldingItem
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>@TODO: Figure out what this does exactly</p>
&nbsp;</aside><pre><a name="l11572" href="#l11572" title="Link to line 11572">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">2</span>E:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">6</span>B

	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">4</span>D + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">4</span>C

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">4</span>D, <span class="token register variable">Y</span>

locret_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">4</span>C:
	<span class="token opcode property">RTS</span>


byte_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">4</span>D:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span>

&nbsp;</code></pre><aside><p>Replaces a tile when something is thrown</p>
<p>Input
A = target tile
X = enemy index of object being thrown</p>
&nbsp;</aside><pre><a name="l11606" href="#l11606" title="Link to line 11606">#</a><code>ReplaceTile:
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> ReplaceTile_StoreXHi

	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>

ReplaceTile_StoreXHi:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">2</span>E

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">3</span>_BC<span class="token decimalnumber string">1</span>E

	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>

	<span class="token opcode property">ADC</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">6</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BCBA

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">3</span>_BCBA:
	<span class="token opcode property">LDA</span> unk_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">0</span>B, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">5</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">7</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> TileQuadPointersLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> TileQuadPointersHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">8</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">10</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> #$<span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Another byte of PPU high addresses for horiz/vert levels</p>
&nbsp;</aside><pre><a name="l11721" href="#l11721" title="Link to line 11721">#</a><code>unk_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">0</span>B:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>


StashPlayerPosition:
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">BNE</span> StashPlayerPosition_Exit

	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">STA</span> PlayerXHi_Backup
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">STA</span> PlayerXLo_Backup
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">STA</span> PlayerYHi_Backup
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">STA</span> PlayerYLo_Backup

StashPlayerPosition_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Updates the area page and tile placement offset @TODO</p>
<p>Input
byte_RAM_E8 = area page
byte_RAM_E5 = tile placement offset shift
byte_RAM_E6 = previous tile placement offset
Output
RAM_1 = low byte of decoded level data RAM
RAM_2 = low byte of decoded level data RAM
byte_RAM_E7 = target tile placement offset</p>
&nbsp;</aside><pre><a name="l11757" href="#l11757" title="Link to line 11757">#</a><code>SetTileOffsetAndAreaPageAddr:
	<span class="token opcode property">LDX</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> SetAreaPageAddr

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">RTS</span>


DecodedLevelPageStartLo:
	<span class="token directive keyword">.db</span> &#x3C;DecodedLevelData
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$00F0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$01E0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$02D0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$03C0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$04B0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$05A0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$0690</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$0780</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$0870</span>)
	<span class="token directive keyword">.db</span> &#x3C;(SubAreaTileLayout)

DecodedLevelPageStartHi:
	<span class="token directive keyword">.db</span> >DecodedLevelData
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$00F0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$01E0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$02D0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$03C0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$04B0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$05A0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$0690</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$0780</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$0870</span>)
	<span class="token directive keyword">.db</span> >(SubAreaTileLayout)


&nbsp;</code></pre><aside><p>Updates the area page that we're reading tiles from</p>
<p>Input
X = area page
Output
byte_RAM_1 = low byte of decoded level data RAM
byte_RAM_2 = low byte of decoded level data RAM</p>
&nbsp;</aside><pre><a name="l11805" href="#l11805" title="Link to line 11805">#</a><code>SetAreaPageAddr:
	<span class="token opcode property">LDA</span> DecodedLevelPageStartLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> DecodedLevelPageStartHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>


PlayerCollisionResultTable:
	<span class="token directive keyword">.db</span> CollisionFlags_<span class="token decimalnumber string">80</span>
	<span class="token directive keyword">.db</span> CollisionFlags_<span class="token decimalnumber string">00</span>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11818" href="#l11818" title="Link to line 11818">#</a><code>&nbsp;</code></pre><aside><p>Note: Door animation code copied from Bank 0</p>
<p>Snaps the player to the closest tile (for entering doors and jars)</p>
&nbsp;</aside><pre><a name="l11824" href="#l11824" title="Link to line 11824">#</a><code>SnapPlayerToTile_Bank<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">BCC</span> SnapPlayerToTile_Exit_Bank<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> SnapPlayerToTile_Exit_Bank<span class="token decimalnumber string">3</span>

	<span class="token opcode property">INC</span> PlayerXHi

SnapPlayerToTile_Exit_Bank<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11842" href="#l11842" title="Link to line 11842">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">6</span>B:
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">81</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_F
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">7</span>D

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCC</span> locret_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">81</span>

loc_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">7</span>D:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">INY</span>

locret_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">81</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_BD6B</p>
&nbsp;</aside><pre><a name="l11868" href="#l11868" title="Link to line 11868">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11870" href="#l11870" title="Link to line 11870">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">82</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">91</span>

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">DEX</span>

loc_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">91</span>:
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_BD82</p>
&nbsp;</aside><pre><a name="l11888" href="#l11888" title="Link to line 11888">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11890" href="#l11890" title="Link to line 11890">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">95</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BDB<span class="token decimalnumber string">9</span>

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">DEX</span>

loc_BANK<span class="token decimalnumber string">3</span>_BDB<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">3</span>_BDBF

	<span class="token opcode property">SEC</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11919" href="#l11919" title="Link to line 11919">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_BDBF:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_BD95</p>
&nbsp;</aside><pre><a name="l11926" href="#l11926" title="Link to line 11926">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l11928" href="#l11928" title="Link to line 11928">#</a><code>sub_BANK<span class="token decimalnumber string">3</span>_BDC<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">3</span>_BDC<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BDDA

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">3</span>_BDDA

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">82</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">3</span>_BDDD

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11949" href="#l11949" title="Link to line 11949">#</a><code>loc_BANK<span class="token decimalnumber string">3</span>_BDDA:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">3</span>_BD<span class="token decimalnumber string">95</span>

loc_BANK<span class="token decimalnumber string">3</span>_BDDD:
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">3</span>_BDEC

	<span class="token opcode property">PHA</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">426</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">3</span>_BDC<span class="token decimalnumber string">9</span>

	<span class="token opcode property">CLC</span>

loc_BANK<span class="token decimalnumber string">3</span>_BDEC:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK3_BDC5</p>
&nbsp;</aside><pre><a name="l11974" href="#l11974" title="Link to line 11974">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l11976" href="#l11976" title="Link to line 11976">#</a><code>HealthBarTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span> <span class="token comment">; 0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span> <span class="token comment">; 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span> <span class="token comment">; 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span> <span class="token comment">; 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$BA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span> <span class="token comment">; 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>

POWQuakeOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>

SkyFlashColors:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$2A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$26</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l12011" href="#l12011" title="Link to line 12011">#</a><code>AreaSecondaryRoutine:
	<span class="token opcode property">LDA</span> SkyFlashTimer
	<span class="token opcode property">BEQ</span> AreaSecondaryRoutine_HealthBar
&nbsp;</code></pre><aside><p>sky flash timer (ie. explosions)</p>
&nbsp;</aside><pre><a name="l12017" href="#l12017" title="Link to line 12017">#</a><code>	<span class="token opcode property">DEC</span> SkyFlashTimer
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> SkyColor
	<span class="token opcode property">LDY</span> SkyFlashTimer
	<span class="token opcode property">BEQ</span> AreaSecondaryRoutine_PlayerPalette

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> SkyFlashColors, <span class="token register variable">Y</span>

AreaSecondaryRoutine_PlayerPalette:
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> RestorePlayerPalette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> RestorePlayerPalette<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">5</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> RestorePlayerPalette<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">6</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">7</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">300</span>

AreaSecondaryRoutine_HealthBar:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">JSR</span> FindSpriteSlot

	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">BEQ</span> AreaSecondaryRoutine_HealthBar_Draw

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span> <span class="token comment">; max health</span>

AreaSecondaryRoutine_HealthBar_Draw:
	<span class="token opcode property">TAX</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FE</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
AreaSecondaryRoutine_HealthBar_Loop:
	<span class="token opcode property">LDA</span> HealthBarTiles, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">CMP</span> PlayerMaxHealth
	<span class="token opcode property">BNE</span> AreaSecondaryRoutine_HealthBar_Loop

AreaSecondaryRoutine_POW:
	<span class="token opcode property">LDA</span> POWQuakeTimer
	<span class="token opcode property">BEQ</span> AreaSecondaryRoutine_Exit

	<span class="token opcode property">DEC</span> POWQuakeTimer
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">BPL</span> AreaSecondaryRoutine_POW_OffsetScreen

	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>

AreaSecondaryRoutine_POW_OffsetScreen:
	<span class="token opcode property">LDA</span> POWQuakeOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> BackgroundYOffset
	<span class="token opcode property">JMP</span> KillOnscreenEnemies

AreaSecondaryRoutine_Exit:
	<span class="token opcode property">RTS</span>


IFDEF RESET_CHR_LATCH
SetBossTileset:
	<span class="token opcode property">STA</span> BossTileset
	<span class="token opcode property">INC</span> ResetCHRLatch
	<span class="token opcode property">RTS</span>
ENDIF


IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG&nbsp;</code></pre><aside><p>Copies all character stats to RAM for hot-swapping the current character</p>
&nbsp;</aside><pre><a name="l12124" href="#l12124" title="Link to line 12124">#</a><code>CopyCarryYOffsets:
	<span class="token opcode property">LDX</span> #(AreaMainRoutine - CarryYOffsets - <span class="token decimalnumber string">1</span>)
CopyCarryYOffsets_Loop:
	<span class="token opcode property">LDA</span> CarryYOffsets, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> CarryYOffsetsRAM, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> CopyCarryYOffsets_Loop

	<span class="token opcode property">RTS</span>

AreaDebugRoutine:
	<span class="token opcode property">LDA</span> CreateObjectType
	<span class="token opcode property">BEQ</span> AreaDebugRoutine_Exit

	<span class="token opcode property">JSR</span> DebugCreateObject

AreaDebugRoutine_Exit:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>Input
CreateObjectType = object type</p>
&nbsp;</aside><pre><a name="l12147" href="#l12147" title="Link to line 12147">#</a><code>DebugCreateObject:
	<span class="token opcode property">JSR</span> CreateEnemy

	<span class="token opcode property">BMI</span> AreaDebugRoutine_Exit

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> CreateObjectType
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>

	<span class="token opcode property">JSR</span> InitializeEnemy

	<span class="token opcode property">LDA</span> CreateObjectAttributes
	<span class="token opcode property">BEQ</span> DebugCreateObject_ClearObjectType

DebugCreateObject_ObjectCarried:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_ObjectTimer

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> HoldingItem
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STX</span> ObjectBeingCarriedIndex

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

DebugCreateObject_ObjectTimer:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_ObjectBottomScreen

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>

DebugCreateObject_ObjectBottomScreen:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_Bit<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>

DebugCreateObject_Bit<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_Bit<span class="token decimalnumber string">3</span>

DebugCreateObject_Bit<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_Bit<span class="token decimalnumber string">2</span>

DebugCreateObject_Bit<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_ObjectThrown

DebugCreateObject_ObjectThrown:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCC</span> DebugCreateObject_ObjectNoVelocityReset

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>

DebugCreateObject_ObjectNoVelocityReset:
	<span class="token opcode property">ROL</span> CreateObjectAttributes
	<span class="token opcode property">BCS</span> DebugCreateObject_ClearObjectType

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>

DebugCreateObject_ClearObjectType:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> CreateObjectType

DebugCreateObject_Exit:
	<span class="token opcode property">RTS</span>

ENDIF
&nbsp;</code></pre></section></article></main><footer class="sc-htpNat iPvEnY"><p>All product names, logos, and brands are property of their respective owners.</p><p>Annotated disassembly site generator  <!-- -->2019<!-- --> <!-- -->Keith McKnight</p><ul><li><a href="https://github.com/XKeeper0/smb2">GitHub</a></li><li><a href="https://discord.gg/TsWMMeV">Discord</a></li></ul></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/src/prg-2-3.asm";window.webpackCompilationHash="2ea601db5f4c75781233";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e5123abf2b9d78ccb9b7.js"],"component---src-templates-asm-source-jsx":["/component---src-templates-asm-source-jsx-2a3033eb4063531183b6.js"],"component---src-templates-asm-directory-jsx":["/component---src-templates-asm-directory-jsx-de110ce639b73c006858.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-2d3be97110fe6b1cc813.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-90677ee39103ae00023b.js"]};/*]]>*/</script><script src="/component---src-templates-asm-source-jsx-2a3033eb4063531183b6.js" async=""></script><script src="/commons-96edcb9e9a406c302a22.js" async=""></script><script src="/app-e5123abf2b9d78ccb9b7.js" async=""></script><script src="/webpack-runtime-14b29e9f338a0ab3ef0b.js" async=""></script></body></html>