<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.15.20"/><title data-react-helmet="true">/src/prg-0-1.asm | Super Mario Bros 2. Discombobulated</title><meta data-react-helmet="true" name="description" content="The annotated disassembly of SMB2 (USA) for NES."/><meta data-react-helmet="true" property="og:title" content="/src/prg-0-1.asm"/><meta data-react-helmet="true" property="og:description" content="The annotated disassembly of SMB2 (USA) for NES."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Keith McKnight"/><meta data-react-helmet="true" name="twitter:title" content="/src/prg-0-1.asm"/><meta data-react-helmet="true" name="twitter:description" content="The annotated disassembly of SMB2 (USA) for NES."/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><link as="script" rel="preload" href="/webpack-runtime-14b29e9f338a0ab3ef0b.js"/><link as="script" rel="preload" href="/app-e5123abf2b9d78ccb9b7.js"/><link as="script" rel="preload" href="/commons-96edcb9e9a406c302a22.js"/><link as="script" rel="preload" href="/component---src-templates-asm-source-jsx-2a3033eb4063531183b6.js"/><link as="fetch" rel="preload" href="/page-data/src/prg-0-1.asm/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="sc-bxivhb itivNt"><header class="sc-bwzfXH kFCqhj"><a href="https://github.com/XKeeper0/smb2"><svg class="sc-bdVaJa eSEdyA" fill="#fcfcfc" height="80" viewBox="0 0 250 250" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M0 0l115 115h15l12 27 108 108V0z"></path><g class="octocat" fill="#f65b98"><path class="octocat-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="transform-origin:130px 106px"></path><path class="octocat-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></g></svg></a><h1><a href="/">Super Mario Bros 2. Discombobulated</a></h1><p>The annotated disassembly of SMB2 (USA) for NES.</p></header><main><article class="sc-ifAKCX fpwdji"><header><h3>/src/prg-0-1.asm</h3></header><section><aside><h1>Bank 0 &#x26; Bank 1</h1>
<p>What's inside:</p>
<ul>
<li>Title screen</li>
<li>Player controls</li>
<li>Player state handling</li>
<li>Enemy handling</li>
</ul>
&nbsp;</aside><pre><a name="l12" href="#l12" title="Link to line 12">#</a><code>&nbsp;</code></pre><aside><p>Initializes a vertical area</p>
&nbsp;</aside><pre><a name="l16" href="#l16" title="Link to line 16">#</a><code>InitializeAreaVertical:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">502</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">805</span>D

	<span class="token opcode property">LDA</span> #HMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8013</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">800</span>F:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8016</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8013</span>:
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8016</span>:
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> byte_RAM_CF
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8022</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">802</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">802</span>B:
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>EE

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">4</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">502</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span><span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDY</span> CurrentLevelEntryPage
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">95</span>AF

	<span class="token opcode property">STA</span> ScreenYLo
	<span class="token opcode property">STY</span> ScreenYHi
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">946</span>D

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">805</span>D:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">505</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8066</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">823</span>D

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">53</span><span class="token register variable">A</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8082</span>

	<span class="token opcode property">INC</span> BreakStartLevelLoop
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E8</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C8</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">502</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8082</span>:
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l103" href="#l103" title="Link to line 103">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8083</span>:
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">809</span>D

	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8092</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">819</span>C

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l116" href="#l116" title="Link to line 116">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8092</span>:
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$12</span>
	<span class="token opcode property">STA</span> CameraScrollTiles

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">809</span>D:
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8103</span>

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>B<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> byte_RAM_CF
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>B<span class="token decimalnumber string">1</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">819</span>C

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l140" href="#l140" title="Link to line 140">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>B<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> SetObjectLocks

	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> ScreenYLo
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>C<span class="token decimalnumber string">8</span>

	<span class="token opcode property">DEC</span> ScreenYHi

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>C<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0FC</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>DB

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0EC</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>DB:
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l178" href="#l178" title="Link to line 178">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>E<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8287</span>

	<span class="token opcode property">INX</span>
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8287</span>

	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>FB

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8297</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8297</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">80</span>FB:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8170</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l203" href="#l203" title="Link to line 203">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8103</span>:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8121</span>

	<span class="token opcode property">LDA</span> CurrentLevelPages
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8114</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8116</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8114</span>:
	<span class="token opcode property">INC</span> byte_RAM_F

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8116</span>:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> byte_RAM_F
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8121</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">819</span>C

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l228" href="#l228" title="Link to line 228">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8121</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> SetObjectLocks

	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> ScreenYLo
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8138</span>

	<span class="token opcode property">INC</span> ScreenYHi

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8138</span>:
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">813</span>F

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l253" href="#l253" title="Link to line 253">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">813</span>F:
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8152</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8152</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">828</span>F

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">828</span>F

	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">4</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">816</span>B

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>BE

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>BE

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">816</span>B:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8170</span>:
	<span class="token opcode property">LDA</span> CameraScrollTiles
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$12</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">818</span>F

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8186</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">818</span><span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8186</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">818</span><span class="token register variable">A</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8314</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">818</span>F:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">833</span>E

	<span class="token opcode property">DEC</span> CameraScrollTiles
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">81</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> SetObjectLocks

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">819</span>C:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">81</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8083</p>
&nbsp;</aside><pre><a name="l328" href="#l328" title="Link to line 328">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l330" href="#l330" title="Link to line 330">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>

&nbsp;</code></pre><aside><p>Stashes screen scrolling information so that it can be restored after leaving
the pause screen</p>
&nbsp;</aside><pre><a name="l337" href="#l337" title="Link to line 337">#</a><code>StashScreenScrollPosition:
	<span class="token opcode property">LDA</span> PPUScrollYMirror
	<span class="token opcode property">STA</span> PPUScrollYMirror_Backup
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> PPUScrollXMirror_Backup
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">50</span>B
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">50</span>C
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">STA</span> ScreenYHi_Backup
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">STA</span> ScreenYLo_Backup
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">STA</span> ScreenBoundaryLeftHi_Backup
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">517</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">RTS</span>


RestoreScreenScrollPosition:
	<span class="token opcode property">LDA</span> PPUScrollYMirror_Backup
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">LDA</span> PPUScrollXMirror_Backup
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">50</span>B
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">50</span>C
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi_Backup
	<span class="token opcode property">STA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">LDA</span> ScreenYHi_Backup
	<span class="token opcode property">STA</span> ScreenYHi
	<span class="token opcode property">LDA</span> ScreenYLo_Backup
	<span class="token opcode property">STA</span> ScreenYLo
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l382" href="#l382" title="Link to line 382">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">81</span>FE:
	<span class="token opcode property">LDA</span> byte_RAM_CF
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">820</span>B

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">1</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">820</span>B:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> byte_RAM_CF
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8314</span>

	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">846</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">505</span>
	<span class="token opcode property">INC</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_81FE</p>
&nbsp;</aside><pre><a name="l421" href="#l421" title="Link to line 421">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l423" href="#l423" title="Link to line 423">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">823</span>D:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">833</span>E

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">828</span>F

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">CMP</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8277</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">CMP</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8277</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">825</span>E:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8268</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">517</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8268</span>:
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span><span class="token register variable">A</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span>D
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span>E
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l461" href="#l461" title="Link to line 461">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8277</span>:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">828</span>E

	<span class="token opcode property">LDA</span> byte_RAM_CE
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">505</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">825</span>E

	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>BE

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l474" href="#l474" title="Link to line 474">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8287</span>:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">828</span>E:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_823D</p>
&nbsp;</aside><pre><a name="l485" href="#l485" title="Link to line 485">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l487" href="#l487" title="Link to line 487">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">828</span>F:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_828F</p>
&nbsp;</aside><pre><a name="l496" href="#l496" title="Link to line 496">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l498" href="#l498" title="Link to line 498">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8297</span>:
	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>BD

	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0DF</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>B<span class="token decimalnumber string">9</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>B<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E9</span>
	<span class="token opcode property">STA</span> byte_RAM_CF, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>B<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>BD:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8297</p>
&nbsp;</aside><pre><a name="l530" href="#l530" title="Link to line 530">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l532" href="#l532" title="Link to line 532">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>BE:
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>DD

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>DD:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_82BE</p>
&nbsp;</aside><pre><a name="l561" href="#l561" title="Link to line 561">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l563" href="#l563" title="Link to line 563">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> DecodedLevelPageStartLo_Bank<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> DecodedLevelPageStartHi_Bank<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_EA
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8300</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8302</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8300</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$28</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8302</span>:
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ADC</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">830</span>F:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">2</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8313</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_82E2</p>
&nbsp;</aside><pre><a name="l603" href="#l603" title="Link to line 603">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l605" href="#l605" title="Link to line 605">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8314</span>:
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8313</span>

	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8326</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">832</span>E:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">84</span>AC

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">832</span>E

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">82</span>E<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8314</p>
&nbsp;</aside><pre><a name="l636" href="#l636" title="Link to line 636">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l638" href="#l638" title="Link to line 638">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">833</span>E:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">836</span>C

	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">836</span>C

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">539</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">836</span>C:
	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>B
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> TileQuadPointersLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> TileQuadPointersHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8390</span>

	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8390</span>:
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8390</span>

	<span class="token opcode property">INC</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span><span class="token register variable">A</span><span class="token decimalnumber string">7</span>

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8488</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span><span class="token register variable">A</span><span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">836</span>C

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">840</span>B

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>DE

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l723" href="#l723" title="Link to line 723">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>C<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>D<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8412</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">846</span><span class="token register variable">A</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>DE

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l738" href="#l738" title="Link to line 738">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>D<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8412</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8478</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>DE:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>FA

	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>F<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">840</span>B

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>F<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8478</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">840</span>B

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l768" href="#l768" title="Link to line 768">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">83</span>FA:
	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8408</span>

	<span class="token opcode property">LDA</span> byte_RAM_CF, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">840</span>B

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8408</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">846</span><span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">840</span>B:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_833E</p>
&nbsp;</aside><pre><a name="l789" href="#l789" title="Link to line 789">#</a><code>&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l791" href="#l791" title="Link to line 791">#</a><code>&nbsp;</code></pre><aside><p>something to do with background tile palettes in vertical levels?</p>
&nbsp;</aside><pre><a name="l793" href="#l793" title="Link to line 793">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8412</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$07</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">842</span>B:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">539</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">843</span>B

	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8452</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l820" href="#l820" title="Link to line 820">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">843</span>B:
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8452</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8440</span>:
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8450</span>:
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8452</span>:
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">842</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">539</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8412</p>
&nbsp;</aside><pre><a name="l859" href="#l859" title="Link to line 859">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l861" href="#l861" title="Link to line 861">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">846</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BCC</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8477</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8477</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_846A</p>
&nbsp;</aside><pre><a name="l876" href="#l876" title="Link to line 876">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l878" href="#l878" title="Link to line 878">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8478</span>:
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8487</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F8</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8487</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8478</p>
&nbsp;</aside><pre><a name="l894" href="#l894" title="Link to line 894">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l896" href="#l896" title="Link to line 896">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8488</span>:
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">51</span>B
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ORA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8488</p>
&nbsp;</aside><pre><a name="l913" href="#l913" title="Link to line 913">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l915" href="#l915" title="Link to line 915">#</a><code>_code_<span class="token decimalnumber string">04</span><span class="token register variable">A</span><span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">84</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>:
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">84</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l928" href="#l928" title="Link to line 928">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">84</span>AC:
	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>B
	<span class="token opcode property">INC</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JMP</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8488</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_84AC</p>
&nbsp;</aside><pre><a name="l937" href="#l937" title="Link to line 937">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l939" href="#l939" title="Link to line 939">#</a><code>&nbsp;</code></pre><aside><p>Unused space in the original ($84B8 - $84FF)</p>
&nbsp;</aside><pre><a name="l941" href="#l941" title="Link to line 941">#</a><code>unusedSpace <span class="token hexnumber string">$8500</span>, <span class="token hexnumber string">$FF</span>

&nbsp;</code></pre><aside><p>Initializes a horizontal area</p>
&nbsp;</aside><pre><a name="l947" href="#l947" title="Link to line 947">#</a><code>InitializeAreaHorizontal:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">502</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">855</span>C

	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">946</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUScrollYMirror
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">851</span><span class="token register variable">A</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">851</span>D

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">851</span><span class="token register variable">A</span>:
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">851</span>D:
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> byte_RAM_CF
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8532</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8532</span>:
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>EE

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">502</span>
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">STA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span><span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">505</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">856</span><span class="token register variable">A</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">855</span>C:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>AA

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">53</span><span class="token register variable">A</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8569</span>

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">502</span>
	<span class="token opcode property">INC</span> BreakStartLevelLoop

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8569</span>:
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1016" href="#l1016" title="Link to line 1016">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">856</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8576</span>

	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>E<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> CurrentLevelEntryPage

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8576</span>:
	<span class="token opcode property">CMP</span> CurrentLevelPages
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">857</span>F

	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>E<span class="token decimalnumber string">7</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">857</span>F:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">858</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">STA</span> byte_RAM_B
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">858</span>F

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">858</span>B:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_B

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">858</span>F:
	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">ADC</span> byte_RAM_B
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">LDA</span> byte_RAM_B
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>B<span class="token decimalnumber string">1</span>

	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">4</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1070" href="#l1070" title="Link to line 1070">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>B<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_C
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">4</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1084" href="#l1084" title="Link to line 1084">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> byte_RAM_C

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>C<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">858</span>F

	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> CurrentLevelPageX
	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>E<span class="token decimalnumber string">7</span>

	<span class="token opcode property">DEC</span> ScreenBoundaryLeftHi
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">507</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>E<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_BA
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_856A</p>
&nbsp;</aside><pre><a name="l1114" href="#l1114" title="Link to line 1114">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1116" href="#l1116" title="Link to line 1116">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">85</span>EC:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">538</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">862</span>C

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">538</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8618</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">538</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8901</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">538</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">862</span>C

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8618</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">538</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8901</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">538</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">862</span>C:
	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8631</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1161" href="#l1161" title="Link to line 1161">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8631</span>:
	<span class="token opcode property">LDA</span> byte_RAM_BA
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">863</span>C

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">869</span><span class="token register variable">A</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1171" href="#l1171" title="Link to line 1171">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">863</span>C:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll
	<span class="token opcode property">LDX</span> byte_RAM_BA

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8642</span>:
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8651</span>

	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">CMP</span> CurrentLevelPages
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8651</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">9</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1188" href="#l1188" title="Link to line 1188">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8651</span>:
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8669</span>

	<span class="token opcode property">INC</span> ScreenBoundaryLeftHi
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8669</span>:
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">CMP</span> CurrentLevelPages
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8685</span>

	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> CurrentLevelPageX
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8682</span>

	<span class="token opcode property">STA</span> CurrentLevelPageX
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>C

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8682</span>:
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8642</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8685</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">868</span>C:
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>FC

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">868</span>C

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8812</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">6</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1240" href="#l1240" title="Link to line 1240">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">869</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDX</span> byte_RAM_BA

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">869</span>C:
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span><span class="token register variable">A</span><span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span><span class="token register variable">A</span><span class="token decimalnumber string">8</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">9</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1254" href="#l1254" title="Link to line 1254">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span><span class="token register variable">A</span><span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>C<span class="token decimalnumber string">0</span>

	<span class="token opcode property">DEC</span> ScreenBoundaryLeftHi
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>C<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">CMP</span> CurrentLevelPageX
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>D<span class="token decimalnumber string">1</span>

	<span class="token opcode property">STA</span> CurrentLevelPageX
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>C

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>D<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">INX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">869</span>C

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">9</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>DB:
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>E<span class="token decimalnumber string">6</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>DB

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8812</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8872</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>E<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> NeedVerticalScroll
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_85EC</p>
&nbsp;</aside><pre><a name="l1307" href="#l1307" title="Link to line 1307">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1309" href="#l1309" title="Link to line 1309">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>EE:
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>FC

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8705</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>FC:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8709</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8705</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_86EE</p>
&nbsp;</aside><pre><a name="l1332" href="#l1332" title="Link to line 1332">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1334" href="#l1334" title="Link to line 1334">#</a><code>byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8709</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>&nbsp;</code></pre><aside><p>The sub-area "page" is is the index in the DecodedLevelPageStart table.
This is why there are 10 blank pages in the jar enemy data.</p>
&nbsp;</aside><pre><a name="l1339" href="#l1339" title="Link to line 1339">#</a><code>SubAreaPage:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1343" href="#l1343" title="Link to line 1343">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">870</span>C:
	<span class="token opcode property">LDA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> PPUScrollXMirror_Backup
	<span class="token opcode property">LDA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">50</span>C
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">STA</span> ScreenBoundaryLeftHi_Backup
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">53</span>D
	<span class="token opcode property">LDA</span> SubAreaPage
	<span class="token opcode property">STA</span> CurrentLevelEntryPage
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">86</span>EE

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">LDA</span> SubAreaPage
	<span class="token opcode property">STA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">946</span>D

	<span class="token opcode property">LDA</span> SubAreaPage
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">LDA</span> SubAreaPage
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">505</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_870C</p>
&nbsp;</aside><pre><a name="l1374" href="#l1374" title="Link to line 1374">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1376" href="#l1376" title="Link to line 1376">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">874</span>C:
	<span class="token opcode property">LDA</span> PPUScrollXMirror_Backup
	<span class="token opcode property">STA</span> PPUScrollXMirror
	<span class="token opcode property">STA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">50</span>C
	<span class="token opcode property">STA</span> byte_RAM_C<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi_Backup
	<span class="token opcode property">STA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">53</span>D
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8784</span>

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">53</span>E
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">53</span>D
	<span class="token opcode property">INC</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9428</span>

	<span class="token opcode property">LDA</span> byte_RAM_CF
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">505</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8784</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_874C</p>
&nbsp;</aside><pre><a name="l1407" href="#l1407" title="Link to line 1407">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1409" href="#l1409" title="Link to line 1409">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8785</span>:
	<span class="token opcode property">LDA</span> byte_RAM_CF
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span><span class="token register variable">A</span><span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span><span class="token register variable">A</span><span class="token decimalnumber string">2</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">505</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8785</p>
&nbsp;</aside><pre><a name="l1434" href="#l1434" title="Link to line 1434">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1436" href="#l1436" title="Link to line 1436">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>AA:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">STX</span> NeedVerticalScroll
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8812</span>

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8872</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">506</span>
	<span class="token opcode property">CMP</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>DA

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">507</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">CMP</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>DA

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>CB:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span><span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span>D
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">53</span>E
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">537</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1465" href="#l1465" title="Link to line 1465">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>DA:
	<span class="token opcode property">LDA</span> byte_RAM_CE
	<span class="token opcode property">CMP</span> byte_RAM_<span class="token decimalnumber string">505</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>CB

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>FC

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1475" href="#l1475" title="Link to line 1475">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>E<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>FB

	<span class="token opcode property">DEC</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0EF</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>FB

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F9</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>FB:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1495" href="#l1495" title="Link to line 1495">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">87</span>FC:
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">BCC</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8811</span>

	<span class="token opcode property">INC</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8811</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8811</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_87AA</p>
&nbsp;</aside><pre><a name="l1515" href="#l1515" title="Link to line 1515">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1517" href="#l1517" title="Link to line 1517">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8812</span>:
	<span class="token opcode property">STY</span> byte_RAM_F
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> DecodedLevelPageStartLo_Bank<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDA</span> DecodedLevelPageStartHi_Bank<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_EA
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8837</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$24</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8837</span>:
	<span class="token opcode property">STY</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> byte_RAM_F
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8812</p>
&nbsp;</aside><pre><a name="l1548" href="#l1548" title="Link to line 1548">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1550" href="#l1550" title="Link to line 1550">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">883</span>C:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_CE, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8812</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8856</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8925</span>

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8856</span>

	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$1C</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>BD
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>BC
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_883C</p>
&nbsp;</aside><pre><a name="l1586" href="#l1586" title="Link to line 1586">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1588" href="#l1588" title="Link to line 1588">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8872</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">TAX</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">887</span>D:
	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">51</span>B
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> TileQuadPointersLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> TileQuadPointersHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8894</span>:
	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">5</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span><span class="token register variable">A</span><span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">380</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">39</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">381</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">39</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">887</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>BC
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">2</span>

	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>FD

	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">8</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8901</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_CE
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8812</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>FD

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1672" href="#l1672" title="Link to line 1672">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">2</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>FD

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>F<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">LDA</span> NeedVerticalScroll
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">538</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">88</span>FD:
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">51</span>C
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8872</p>
&nbsp;</aside><pre><a name="l1687" href="#l1687" title="Link to line 1687">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1689" href="#l1689" title="Link to line 1689">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8901</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">883</span>C

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STX</span> byte_RAM_E
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">890</span><span class="token register variable">A</span>:
	<span class="token opcode property">LDX</span> byte_RAM_E
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">3</span>BE, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">3</span>BE, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEC</span> byte_RAM_E
	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">CMP</span> <span class="token decimalnumber string">#03</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">890</span><span class="token register variable">A</span>

	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8901</p>
&nbsp;</aside><pre><a name="l1717" href="#l1717" title="Link to line 1717">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l1719" href="#l1719" title="Link to line 1719">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8925</span>:
	<span class="token opcode property">STY</span> byte_RAM_F
	<span class="token opcode property">LDA</span> <span class="token decimalnumber string">#01</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDY</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDX</span> byte_RAM_E<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">892</span>F:
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ORA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> (byte_RAM_E<span class="token decimalnumber string">9</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ORA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_D<span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">STA</span> byte_RAM_D<span class="token decimalnumber string">7</span>
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">892</span>F

	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> byte_RAM_F
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>End of function sub_BANK0_8925</p>
&nbsp;</aside><pre><a name="l1758" href="#l1758" title="Link to line 1758">#</a><code>SetObjectLocks:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$07</span>

SetObjectLocks_Loop:
	<span class="token opcode property">STA</span> ObjectLock - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> SetObjectLocks_Loop

	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>Unused space in the original ($8966 - $89FF)</p>
&nbsp;</aside><pre><a name="l1773" href="#l1773" title="Link to line 1773">#</a><code>unusedSpace <span class="token hexnumber string">$8A00</span>, <span class="token hexnumber string">$FF</span>


GrowShrinkSFXIndexes:
	<span class="token directive keyword">.db</span> SoundEffect<span class="token decimalnumber string">2</span>_Shrinking
	<span class="token directive keyword">.db</span> SoundEffect<span class="token decimalnumber string">2</span>_Growing


HandlePlayerState:
IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
	<span class="token opcode property">JSR</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad
ENDIF

	<span class="token opcode property">LDA</span> PlayerState <span class="token comment">; Handles player states?</span>
	<span class="token opcode property">CMP</span> #PlayerState_Lifting
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">26</span> <span class="token comment">; If the player is changing size, just handle that</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Check if the player needs to change size</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">CPY</span> PlayerHealth
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">EOR</span> PlayerCurrentSize
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">26</span>

	<span class="token opcode property">LDY</span> PlayerCurrentSize
	<span class="token opcode property">LDA</span> GrowShrinkSFXIndexes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1E</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDA</span> #PlayerState_ChangingSize
	<span class="token opcode property">STA</span> PlayerState

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">26</span>:
	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> PlayerAttributes
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">JSR</span> JumpToTableAfterJump <span class="token comment">; Player state handling?</span>

	<span class="token directive keyword">.dw</span> HandlePlayerState_Normal <span class="token comment">; Normal</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_Climbing <span class="token comment">; Climbing</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_Lifting <span class="token comment">; Lifting</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_ClimbingAreaTransition <span class="token comment">; Climbing area transition</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_GoingDownJar <span class="token comment">; Going down jar</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_ExitingJar <span class="token comment">; Exiting jar</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_HawkmouthEating <span class="token comment">; Hawkmouth eating</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_Dying <span class="token comment">; Dying</span>
	<span class="token directive keyword">.dw</span> HandlePlayerState_ChangingSize <span class="token comment">; Changing size</span>


HandlePlayerState_Normal:
	<span class="token opcode property">JSR</span> PlayerGravity
&nbsp;</code></pre><aside><p>player animation frame, crouch jump charging</p>
&nbsp;</aside><pre><a name="l1826" href="#l1826" title="Link to line 1826">#</a><code>	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">1</span><span class="token register variable">A</span>
&nbsp;</code></pre><aside><p>maybe only y-collision?</p>
&nbsp;</aside><pre><a name="l1829" href="#l1829" title="Link to line 1829">#</a><code>	<span class="token opcode property">JSR</span> PlayerTileCollision
&nbsp;</code></pre><aside><p>screen boundary x-collision</p>
&nbsp;</aside><pre><a name="l1832" href="#l1832" title="Link to line 1832">#</a><code>	<span class="token opcode property">JSR</span> PlayerAreaBoundaryCollision

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsY

&nbsp;</code></pre><aside><p>Applies player physics on the x-axis</p>
&nbsp;</aside><pre><a name="l1840" href="#l1840" title="Link to line 1840">#</a><code>ApplyPlayerPhysicsX:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> ApplyPlayerPhysics

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> ApplyPlayerPhysicsX_Exit

	<span class="token opcode property">STA</span> PlayerXHi

ApplyPlayerPhysicsX_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>What goes up must come down</p>
&nbsp;</aside><pre><a name="l1856" href="#l1856" title="Link to line 1856">#</a><code>HandlePlayerState_Dying:
	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">86</span>

	<span class="token opcode property">LDA</span> PlayerScreenYHi
	<span class="token opcode property">CMP</span> <span class="token decimalnumber string">#02</span>
	<span class="token opcode property">BEQ</span> LoseALife

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsY

	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">72</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$39</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">86</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">72</span>:
	<span class="token opcode property">INC</span> PlayerYVelocity
	<span class="token opcode property">INC</span> PlayerYVelocity
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1878" href="#l1878" title="Link to line 1878">#</a><code>LoseALife:
	<span class="token opcode property">LDA</span> <span class="token decimalnumber string">#02</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; Set game mode to title card</span>
	<span class="token opcode property">DEC</span> ExtraLives
	<span class="token opcode property">BNE</span> SetGameModeAfterDeath

	<span class="token opcode property">INY</span> <span class="token comment">; If no lives, increase game mode</span>
&nbsp;</code></pre><aside><p>from 1 (title card) to 2 (game over)</p>
&nbsp;</aside><pre><a name="l1888" href="#l1888" title="Link to line 1888">#</a><code>SetGameModeAfterDeath:
	<span class="token opcode property">STY</span> GameMode

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">86</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1896" href="#l1896" title="Link to line 1896">#</a><code>HandlePlayerState_Lifting:
	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AC<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDY</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ABB

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">9</span>D

	<span class="token opcode property">LDA</span> #DPCM_ItemPull
	<span class="token opcode property">STA</span> DPCMQueue

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span><span class="token register variable">A</span><span class="token decimalnumber string">9</span>D:
	<span class="token opcode property">DEC</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerLiftFrames, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AB<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AB<span class="token decimalnumber string">5</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AB<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> PlayerLiftTimer - <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AB<span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AB<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> PickupSpeedAnimation - <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AB<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1936" href="#l1936" title="Link to line 1936">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ABB:
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">INC</span> PlayerInAir

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ABF:
	<span class="token opcode property">INC</span> PlayerDucking

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>AC<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">RTS</span>


PlayerLiftTimer:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>

PlayerLiftFrames:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>

byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ACE:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l1969" href="#l1969" title="Link to line 1969">#</a><code>HandlePlayerState_Climbing:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_Down | ControllerInput_Up
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ADF

	<span class="token opcode property">JSR</span> PlayerClimbAnimation

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ADF:
	<span class="token opcode property">LDA</span> ClimbSpeed, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_Right | ControllerInput_Left
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ACE, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">14</span>

	<span class="token opcode property">LDY</span> byte_BANKF_F<span class="token decimalnumber string">00</span>B
	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">01</span>

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">01</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> PlayerTileCollision_CheckClimbable

	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">0</span>E

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">08</span>:
	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">14</span>

	<span class="token opcode property">STX</span> PlayerYVelocity

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">0</span>E:
	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsX

	<span class="token opcode property">JMP</span> ApplyPlayerPhysicsY

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2020" href="#l2020" title="Link to line 2020">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">14</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Does climbing animation and sound</p>
&nbsp;</aside><pre><a name="l2030" href="#l2030" title="Link to line 2030">#</a><code>PlayerClimbAnimation:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BNE</span> PlayerClimbAnimation_Exit

	<span class="token opcode property">LDA</span> PlayerDirection
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDirection
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">2</span>_Climbing
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>

PlayerClimbAnimation_Exit:
	<span class="token opcode property">RTS</span>


ClimbableTiles:
	<span class="token directive keyword">.db</span> BackgroundTile_Vine
	<span class="token directive keyword">.db</span> BackgroundTile_VineStandable
	<span class="token directive keyword">.db</span> BackgroundTile_VineBottom
	<span class="token directive keyword">.db</span> BackgroundTile_ClimbableSky
	<span class="token directive keyword">.db</span> BackgroundTile_Chain
	<span class="token directive keyword">.db</span> BackgroundTile_Ladder
	<span class="token directive keyword">.db</span> BackgroundTile_LadderShadow
	<span class="token directive keyword">.db</span> BackgroundTile_LadderStandable
	<span class="token directive keyword">.db</span> BackgroundTile_LadderStandableShadow
	<span class="token directive keyword">.db</span> BackgroundTile_ChainStandable

&nbsp;</code></pre><aside><p>Checks whether the player is on a climbable tile</p>
<p>Input
byte_RAM_0 = tile ID
Output
C = set if the player is on a climbable tile</p>
&nbsp;</aside><pre><a name="l2066" href="#l2066" title="Link to line 2066">#</a><code>PlayerTileCollision_CheckClimbable:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">924</span>F

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$09</span>

PlayerTileCollision_CheckClimbable_Loop:
	<span class="token opcode property">CMP</span> ClimbableTiles, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> PlayerTileCollision_CheckClimbable_Exit

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> PlayerTileCollision_CheckClimbable_Loop

	<span class="token opcode property">CLC</span>

PlayerTileCollision_CheckClimbable_Exit:
	<span class="token opcode property">RTS</span>


HandlePlayerState_GoingDownJar:
	<span class="token opcode property">LDA</span> #ObjAttrib_BehindBackground
	<span class="token opcode property">STA</span> PlayerAttributes
	<span class="token opcode property">INC</span> PlayerYLo
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> HandlePlayerState_GoingDownJar_Exit

	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">JSR</span> StashPlayerPosition_Bank<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> #TransitionType_Jar
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">LDA</span> InJarType
	<span class="token opcode property">BNE</span> HandlePlayerState_GoingDownJar_NonWarp

	<span class="token opcode property">LDA</span> #GameMode_Warp
	<span class="token opcode property">STA</span> GameMode
	<span class="token opcode property">RTS</span>

HandlePlayerState_GoingDownJar_NonWarp:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BEQ</span> HandlePlayerState_GoingDownJar_Regular

	<span class="token opcode property">STA</span> DoAreaTransition
	<span class="token opcode property">RTS</span>

HandlePlayerState_GoingDownJar_Regular:
	<span class="token opcode property">STA</span> InSubspaceOrJar

HandlePlayerState_GoingDownJar_Exit:
	<span class="token opcode property">RTS</span>


HandlePlayerState_ExitingJar:
	<span class="token opcode property">LDA</span> #ObjAttrib_BehindBackground
	<span class="token opcode property">STA</span> PlayerAttributes
	<span class="token opcode property">DEC</span> PlayerYLo
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">86</span>

	<span class="token opcode property">STA</span> PlayerState

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">86</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2137" href="#l2137" title="Link to line 2137">#</a><code>byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">87</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>

byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">89</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DE</span>

byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">8</span>B:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A1</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2149" href="#l2149" title="Link to line 2149">#</a><code>HandlePlayerState_ClimbingAreaTransition:
	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> PlayerScreenYHi
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">87</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BB<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">89</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BB<span class="token decimalnumber string">0</span>

	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">INC</span> DoAreaTransition
	<span class="token opcode property">LDA</span> #TransitionType_Vine
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2172" href="#l2172" title="Link to line 2172">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BB<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> PlayerScreenYHi
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BBD

	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>B<span class="token decimalnumber string">8</span>B, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BC<span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BBD:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BC<span class="token decimalnumber string">3</span>

	<span class="token opcode property">JSR</span> PlayerClimbAnimation

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BC<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JMP</span> ApplyPlayerPhysicsY

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2191" href="#l2191" title="Link to line 2191">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BC<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">LDA</span> #PlayerState_Climbing
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2198" href="#l2198" title="Link to line 2198">#</a><code>HandlePlayerState_HawkmouthEating:
	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BE<span class="token decimalnumber string">9</span>

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsY

	LDA_abs PlayerCollision

	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BEB

	<span class="token opcode property">LDA</span> #ObjAttrib_BehindBackground
	<span class="token opcode property">STA</span> PlayerAttributes
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDirection

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BE<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsX

	<span class="token opcode property">JMP</span> PlayerWalkJumpAnim

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2222" href="#l2222" title="Link to line 2222">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BE<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">STA</span> PlayerState

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>BEB:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Alternate between large and small graphics on these frames when changing size</p>
&nbsp;</aside><pre><a name="l2231" href="#l2231" title="Link to line 2231">#</a><code>ChangingSizeKeyframes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>


HandlePlayerState_ChangingSize:
	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">0</span>D

	<span class="token opcode property">INC</span> DamageInvulnTime

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span>
HandlePlayerState_ChangingSize_Loop:
	<span class="token opcode property">CMP</span> ChangingSizeKeyframes, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> HandlePlayerState_ChangingSize_Next

	<span class="token opcode property">LDA</span> PlayerCurrentSize
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerCurrentSize
	<span class="token opcode property">JMP</span> LoadCharacterCHRBanks

HandlePlayerState_ChangingSize_Next:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> HandlePlayerState_ChangingSize_Loop

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2262" href="#l2262" title="Link to line 2262">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">0</span>D:
	<span class="token opcode property">LDY</span> PlayerAnimationFrame
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">15</span>

	<span class="token opcode property">LDA</span> #PlayerState_Climbing

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">15</span>:
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2275" href="#l2275" title="Link to line 2275">#</a><code>PlayerControlAcceleration:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2281" href="#l2281" title="Link to line 2281">#</a><code>&nbsp;</code></pre><aside><p>player crouch subroutine</p>
&nbsp;</aside><pre><a name="l2283" href="#l2283" title="Link to line 2283">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">1</span><span class="token register variable">A</span>:
	<span class="token opcode property">JSR</span> PlayerWalkJumpAnim

	<span class="token opcode property">LDA</span> PlayerInAir
	<span class="token opcode property">BNE</span> ResetPartialCrouchJumpTimer

	<span class="token opcode property">LDA</span> PlayerDucking
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">2</span>B

	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">92</span>

	<span class="token opcode property">DEC</span> PlayerDucking

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">2</span>B:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">3</span>D <span class="token comment">; branch if not pressing A Button</span>

	<span class="token opcode property">INC</span> PlayerInAir
	<span class="token opcode property">LDA</span> #SpriteAnimation_Jumping
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">JSR</span> PlayerStartJump

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">2</span>_Jump
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">3</span>D:
	<span class="token opcode property">LDA</span> PlayerRidingCarpet
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">92</span>

	<span class="token opcode property">LDA</span> QuicksandDepth
	<span class="token opcode property">BNE</span> ResetPartialCrouchJumpTimer

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld <span class="token comment">; skip if down button is not pressed</span>
	<span class="token opcode property">AND</span> #ControllerInput_Down
	<span class="token opcode property">BEQ</span> ResetPartialCrouchJumpTimer

	<span class="token opcode property">INC</span> PlayerDucking <span class="token comment">; set ducking state?</span>
	<span class="token opcode property">LDA</span> #SpriteAnimation_Ducking <span class="token comment">; set ducking animation</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> PlayerInAir <span class="token comment">; skip ahead if player is in air</span>
	<span class="token opcode property">BNE</span> ResetPartialCrouchJumpTimer

	<span class="token opcode property">LDA</span> CrouchJumpTimer <span class="token comment">; check if crouch jump is charged</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">92</span>

	<span class="token opcode property">INC</span> CrouchJumpTimer <span class="token comment">; increment crouch jump charge</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">92</span>

ResetPartialCrouchJumpTimer: <span class="token comment">; reset crouch jump timer if it isn't full</span>
	<span class="token opcode property">LDA</span> CrouchJumpTimer
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$3C</span> <span class="token comment">; max crouch jump timer</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">6</span>F

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; reset crouch jump timer to zero</span>
	<span class="token opcode property">STA</span> CrouchJumpTimer

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">6</span>F:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_Right | ControllerInput_Left
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">92</span>

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDirection
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> GroundSlipperiness
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BNE</span> ResetCrouchJumpTimer

	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerControlAcceleration, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerXVelocity

ResetCrouchJumpTimer:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> CrouchJumpTimer
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">95</span> <span class="token comment">; unconditional branch?</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">92</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">2</span>C

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>C<span class="token decimalnumber string">95</span>:
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DC<span class="token decimalnumber string">0</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANK0_8C1A</p>
&nbsp;</aside><pre><a name="l2374" href="#l2374" title="Link to line 2374">#</a><code>&nbsp;</code></pre><aside><p>Starts a jump</p>
<p>The jump height is based on a lookup table using the following bitfield:</p>
<p>%xxxxxRCI
R = whether the player is running
C = whether the crouch timer is charged
I = whether the player is holding an item</p>
&nbsp;</aside><pre><a name="l2386" href="#l2386" title="Link to line 2386">#</a><code>PlayerStartJump:
	<span class="token opcode property">LDA</span> QuicksandDepth
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> PlayerStartJump_LoadXVelocity
&nbsp;</code></pre><aside><p>Quicksand</p>
&nbsp;</aside><pre><a name="l2392" href="#l2392" title="Link to line 2392">#</a><code>	<span class="token opcode property">LDA</span> JumpHeightQuicksand
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">BNE</span> PlayerStartJump_Exit

PlayerStartJump_LoadXVelocity:&nbsp;</code></pre><aside><p>The x-velocity may affect the jump</p>
&nbsp;</aside><pre><a name="l2398" href="#l2398" title="Link to line 2398">#</a><code>	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">BPL</span> PlayerStartJump_CheckXSpeed
&nbsp;</code></pre><aside><p>Absolute value of x-velocity</p>
&nbsp;</aside><pre><a name="l2402" href="#l2402" title="Link to line 2402">#</a><code>	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

PlayerStartJump_CheckXSpeed:&nbsp;</code></pre><aside><p>Set carry flag if the x-speed is fast enough</p>
&nbsp;</aside><pre><a name="l2408" href="#l2408" title="Link to line 2408">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>&nbsp;</code></pre><aside><p>Clear y subpixel</p>
&nbsp;</aside><pre><a name="l2410" href="#l2410" title="Link to line 2410">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerYSubpixel&nbsp;</code></pre><aside><p>Set bit for x-speed using carry flag</p>
&nbsp;</aside><pre><a name="l2413" href="#l2413" title="Link to line 2413">#</a><code>	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
&nbsp;</code></pre><aside><p>Check crouch jump timer</p>
&nbsp;</aside><pre><a name="l2416" href="#l2416" title="Link to line 2416">#</a><code>	<span class="token opcode property">LDY</span> CrouchJumpTimer
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">BCC</span> PlayerStartJump_SetYVelocity
&nbsp;</code></pre><aside><p>Clear Player1JoypadHeld for a crouch jump</p>
&nbsp;</aside><pre><a name="l2421" href="#l2421" title="Link to line 2421">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld

PlayerStartJump_SetYVelocity:&nbsp;</code></pre><aside><p>Set bit for charged jump using carry flag</p>
&nbsp;</aside><pre><a name="l2426" href="#l2426" title="Link to line 2426">#</a><code>	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>&nbsp;</code></pre><aside><p>Set bit for whether player is holding an item</p>
&nbsp;</aside><pre><a name="l2428" href="#l2428" title="Link to line 2428">#</a><code>	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> HoldingItem
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> JumpHeightStanding, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerYVelocity

	<span class="token opcode property">LDA</span> JumpFloatLength
	<span class="token opcode property">STA</span> JumpFloatTimer

PlayerStartJump_Exit:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> CrouchJumpTimer
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2444" href="#l2444" title="Link to line 2444">#</a><code>&nbsp;</code></pre><aside><p>Apply gravity to the player's y-velocity</p>
<p>This also handles floating</p>
&nbsp;</aside><pre><a name="l2450" href="#l2450" title="Link to line 2450">#</a><code>PlayerGravity:
	<span class="token opcode property">LDA</span> QuicksandDepth
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>CE<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> GravityQuicksand
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">13</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>CE<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> GravityWithoutJumpButton
	<span class="token opcode property">LDY</span> Player<span class="token decimalnumber string">1</span>JoypadHeld <span class="token comment">; holding jump button to fight physics</span>
	<span class="token opcode property">BPL</span> PlayerGravity_Falling

	<span class="token opcode property">LDA</span> GravityWithJumpButton
	<span class="token opcode property">LDY</span> PlayerYVelocity
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$0FC</span>
	<span class="token opcode property">BMI</span> PlayerGravity_Falling

	<span class="token opcode property">LDY</span> JumpFloatTimer
	<span class="token opcode property">BEQ</span> PlayerGravity_Falling

	<span class="token opcode property">DEC</span> JumpFloatTimer
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> FloatingYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">RTS</span>

PlayerGravity_Falling:
	<span class="token opcode property">LDY</span> PlayerYVelocity
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">13</span>

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$39</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">18</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">13</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerYVelocity
	<span class="token opcode property">STA</span> PlayerYVelocity

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">18</span>:
	<span class="token opcode property">LDA</span> JumpFloatTimer
	<span class="token opcode property">CMP</span> JumpFloatLength
	<span class="token opcode property">BEQ</span> PlayerGravity_Exit

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> JumpFloatTimer

PlayerGravity_Exit:
	<span class="token opcode property">RTS</span>


FloatingYVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

PlayerXDeceleration:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2518" href="#l2518" title="Link to line 2518">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">2</span>C:
	<span class="token opcode property">LDA</span> PlayerInAir
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">61</span>

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> GroundSlipperiness
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">4</span>D

	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">ADC</span> PlayerXDeceleration, <span class="token register variable">Y</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">EOR</span> PlayerControlAcceleration, <span class="token register variable">Y</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">4</span>B

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">4</span>B:
	<span class="token opcode property">STX</span> PlayerXVelocity

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">4</span>D:
	<span class="token opcode property">LDA</span> PlayerDucking
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">61</span>

	<span class="token opcode property">LDA</span> PlayerAnimationFrame
	<span class="token opcode property">CMP</span> #SpriteAnimation_Throwing
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">61</span>

	<span class="token opcode property">LDA</span> #SpriteAnimation_Standing
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerWalkFrameCounter

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">5</span>F:
	<span class="token opcode property">STA</span> PlayerWalkFrame

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>D<span class="token decimalnumber string">61</span>:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_8D2C</p>
&nbsp;</aside><pre><a name="l2563" href="#l2563" title="Link to line 2563">#</a><code>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2565" href="#l2565" title="Link to line 2565">#</a><code>PlayerWalkFrameDurations:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>

PlayerWalkFrames:
	<span class="token directive keyword">.db</span> SpriteAnimation_Standing <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> SpriteAnimation_Walking <span class="token comment">; $01</span>
	<span class="token directive keyword">.db</span> SpriteAnimation_Throwing <span class="token comment">; ; $02</span>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2584" href="#l2584" title="Link to line 2584">#</a><code>&nbsp;</code></pre><aside><p>jump animation subroutine</p>
&nbsp;</aside><pre><a name="l2586" href="#l2586" title="Link to line 2586">#</a><code>PlayerWalkJumpAnim:
	<span class="token opcode property">LDA</span> PlayerDucking <span class="token comment">; exit if we're ducking, since the player will be ducking</span>
	<span class="token opcode property">BNE</span> ExitPlayerWalkJumpAnim
&nbsp;</code></pre><aside><p>if we're not in the air, skip ahead</p>
&nbsp;</aside><pre><a name="l2591" href="#l2591" title="Link to line 2591">#</a><code>	<span class="token opcode property">LDA</span> PlayerInAir
	<span class="token opcode property">BEQ</span> PlayerWalkAnim

	<span class="token opcode property">LDA</span> CurrentCharacter <span class="token comment">; does this character get to flutter jump?</span>
	<span class="token opcode property">CMP</span> #Character_Luigi
	<span class="token opcode property">BNE</span> ExitPlayerWalkJumpAnim

	<span class="token opcode property">LDA</span> PlayerWalkFrameCounter
	<span class="token opcode property">BNE</span> UpdatePlayerAnimationFrame <span class="token comment">; maintain current frame</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span> <span class="token comment">; fast animation</span>
	<span class="token opcode property">BNE</span> NextPlayerWalkFrame

PlayerWalkAnim:
	<span class="token opcode property">LDA</span> PlayerWalkFrameCounter
	<span class="token opcode property">BNE</span> UpdatePlayerAnimationFrame <span class="token comment">; maintain current frame</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">LDY</span> GroundSlipperiness
	<span class="token opcode property">BNE</span> NextPlayerWalkFrame

	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">BPL</span> PlayerWalkFrameDuration
&nbsp;</code></pre><aside><p>use absolute value of PlayerXVelocity</p>
&nbsp;</aside><pre><a name="l2616" href="#l2616" title="Link to line 2616">#</a><code>	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

PlayerWalkFrameDuration:
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> PlayerWalkFrameDurations, <span class="token register variable">Y</span>

NextPlayerWalkFrame:
	<span class="token opcode property">STA</span> PlayerWalkFrameCounter <span class="token comment">; hold frame for duration specified in accumulator</span>
	<span class="token opcode property">DEC</span> PlayerWalkFrame
	<span class="token opcode property">BPL</span> UpdatePlayerAnimationFrame

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; next walk frame</span>
	<span class="token opcode property">STA</span> PlayerWalkFrame

UpdatePlayerAnimationFrame:
	<span class="token opcode property">LDY</span> PlayerWalkFrame
	<span class="token opcode property">LDA</span> PlayerWalkFrames, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerAnimationFrame

ExitPlayerWalkJumpAnim:
	<span class="token opcode property">RTS</span>


ThrowXVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; standing, left (blocks)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; standing, right (blocks)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span> <span class="token comment">; moving, left (blocks)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; moving, right (blocks)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span> <span class="token comment">; standing, left (projectiles)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; standing, right (projectiles)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span> <span class="token comment">; moving, left (projectiles)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; moving, right (projectiles)</span>

ThrowYVelocity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; standing (blocks)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; moving (blocks)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; standing (projectiles)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span> <span class="token comment">; moving (projectiles)</span>
&nbsp;</code></pre><aside><p>used for objects that can be thrown next to the player</p>
&nbsp;</aside><pre><a name="l2661" href="#l2661" title="Link to line 2661">#</a><code>SoftThrowOffset:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l2667" href="#l2667" title="Link to line 2667">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DC<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> QuicksandDepth
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DE<span class="token decimalnumber string">0</span>

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DDF

	<span class="token opcode property">LDX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_VegetableSmall
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DE<span class="token decimalnumber string">0</span>

	<span class="token opcode property">CMP</span> #Enemy_MushroomBlock
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DDF

	<span class="token opcode property">CMP</span> #Enemy_FallingLogs
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DE<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DDF:
	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DE<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> RunSpeedRight, <span class="token register variable">Y</span>
	<span class="token opcode property">BIT</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">BVC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DEC

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> RunSpeedRight, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DEC:
	<span class="token opcode property">CMP</span> PlayerXVelocity
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DF<span class="token decimalnumber string">2</span>

	<span class="token opcode property">STA</span> PlayerXVelocity

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DF<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> RunSpeedLeft, <span class="token register variable">Y</span>
	<span class="token opcode property">BIT</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">BVC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DFF

	<span class="token opcode property">SEC</span>
	<span class="token opcode property">ROR</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> RunSpeedLeft, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>DFF:
	<span class="token opcode property">CMP</span> PlayerXVelocity
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">05</span>

	<span class="token opcode property">STA</span> PlayerXVelocity

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">05</span>:
	<span class="token opcode property">BIT</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BVC</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">41</span>

	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">41</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #EnemyState_Sand
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">41</span>

	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> #Enemy_MushroomBlock
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">22</span>

	<span class="token opcode property">CMP</span> #Enemy_POWBlock
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">28</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">22</span>:
	<span class="token opcode property">CMP</span> #Enemy_Bomb
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">42</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">28</span>:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> PlayerDirection
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> PlayerDucking
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDY</span> byte_BANKF_F<span class="token decimalnumber string">006</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">924</span>F

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">JSR</span> CheckTileUsesCollisionType

	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">42</span>
&nbsp;</code></pre><aside><p>else carried item can't be thrown</p>
&nbsp;</aside><pre><a name="l2765" href="#l2765" title="Link to line 2765">#</a><code>locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">41</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l2770" href="#l2770" title="Link to line 2770">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">42</span>:
	<span class="token opcode property">LDA</span> #SpriteAnimation_Throwing
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> PlayerWalkFrame
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">STA</span> PlayerWalkFrameCounter
	<span class="token opcode property">DEC</span> HoldingItem
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_ThrowItem
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerDucking
	<span class="token opcode property">STA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> #Enemy_Coin
	<span class="token opcode property">CMP</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">ROL</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">6</span>F

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">6</span>F:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">ROL</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">89</span>

	<span class="token opcode property">LDY</span> PlayerDirection
	<span class="token opcode property">LDA</span> SoftThrowOffset, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">89</span>

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ADC</span> ObjectXHi, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">87</span>:
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>E<span class="token decimalnumber string">89</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ThrowYVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> PlayerDirection
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ThrowXVelocity, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Applies player physics on the y-axis</p>
&nbsp;</aside><pre><a name="l2836" href="#l2836" title="Link to line 2836">#</a><code>ApplyPlayerPhysicsY:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$0A</span>
&nbsp;</code></pre><aside><p>Applies player physics, although could theoretically be used for objects too</p>
<p>Input
X = direction ($00 for horizontal, $0A for vertical)</p>
&nbsp;</aside><pre><a name="l2845" href="#l2845" title="Link to line 2845">#</a><code>ApplyPlayerPhysics:&nbsp;</code></pre><aside><p>Add acceleration to velocity</p>
&nbsp;</aside><pre><a name="l2847" href="#l2847" title="Link to line 2847">#</a><code>	<span class="token opcode property">LDA</span> PlayerXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerXAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>EB<span class="token decimalnumber string">4</span>

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>EB<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">PHA</span>&nbsp;</code></pre><aside><p>Upper nybble of velocity is for lo position</p>
&nbsp;</aside><pre><a name="l2860" href="#l2860" title="Link to line 2860">#</a><code>	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
&nbsp;</code></pre><aside><p>Lower nybble of velocity is for subpixel position</p>
&nbsp;</aside><pre><a name="l2867" href="#l2867" title="Link to line 2867">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>

	<span class="token opcode property">ADC</span> PlayerXSubpixel, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerXSubpixel, <span class="token register variable">X</span>

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ED<span class="token decimalnumber string">1</span>

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ED<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ED<span class="token decimalnumber string">8</span>

	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>ED<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerXLo, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ADC</span> PlayerXHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerXAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Jumpthrough collision results</p>
<p>This table determines per direction whether a tile is solid (for jumpthrough
blocks) or interactive (for spikes/ice/conveyors)</p>
<p>$01 = true
$02 = false</p>
&nbsp;</aside><pre><a name="l2914" href="#l2914" title="Link to line 2914">#</a><code>JumpthroughTileCollisionTable:
InteractiveTileCollisionTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; jumpthrough bottom (y-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; jumpthrough top (y-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; jumpthrough right (x-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; jumpthrough left (x-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span>

IFDEF ENABLE_TILE_ATTRIBUTES_TABLE
CheckPlayerTileCollisionAttributesTable:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001000</span> <span class="token comment">; jumpthrough bottom (y-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00001000</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span> <span class="token comment">; jumpthrough top (y-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000100</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000010</span> <span class="token comment">; jumpthrough right (x-velocity &#x3C; 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000001</span> <span class="token comment">; jumpthrough left (x-velocity > 0)</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000001</span>
ENDIF
&nbsp;</code></pre><aside><p>Collision flags that should be set if a given collision check passes</p>
&nbsp;</aside><pre><a name="l2940" href="#l2940" title="Link to line 2940">#</a><code>EnableCollisionFlagTable:
	<span class="token directive keyword">.db</span> CollisionFlags_Up
	<span class="token directive keyword">.db</span> CollisionFlags_Up
	<span class="token directive keyword">.db</span> CollisionFlags_Down
	<span class="token directive keyword">.db</span> CollisionFlags_Down
	<span class="token directive keyword">.db</span> CollisionFlags_Left
	<span class="token directive keyword">.db</span> CollisionFlags_Left
	<span class="token directive keyword">.db</span> CollisionFlags_Right
	<span class="token directive keyword">.db</span> CollisionFlags_Right

ConveyorSpeedTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>

&nbsp;</code></pre><aside><h1>Player Tile Collision</h1>
<p>Handles player collision with background tiles</p>
&nbsp;</aside><pre><a name="l2961" href="#l2961" title="Link to line 2961">#</a><code>PlayerTileCollision:&nbsp;</code></pre><aside><p>Reset a bunch of collision flags</p>
&nbsp;</aside><pre><a name="l2963" href="#l2963" title="Link to line 2963">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerCollision
	<span class="token opcode property">STA</span> GroundSlipperiness
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">STA</span> byte_RAM_A <span class="token comment">; conveyor</span>
	<span class="token opcode property">STA</span> byte_RAM_E <span class="token comment">; spikes</span>
	<span class="token opcode property">STA</span> byte_RAM_C <span class="token comment">; ice</span>

	<span class="token opcode property">JSR</span> PlayerTileCollision_CheckCherryAndClimbable
&nbsp;</code></pre><aside><p>Determine bounding box lookup index</p>
&nbsp;</aside><pre><a name="l2974" href="#l2974" title="Link to line 2974">#</a><code>	<span class="token opcode property">LDA</span> PlayerDucking
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> HoldingItem
	<span class="token opcode property">TAX</span>
&nbsp;</code></pre><aside><p>Look up the bounding box for collision detection</p>
&nbsp;</aside><pre><a name="l2980" href="#l2980" title="Link to line 2980">#</a><code>	<span class="token opcode property">LDA</span> byte_BANKF_F<span class="token decimalnumber string">000</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">8</span>
&nbsp;</code></pre><aside><p>Determine whether the player is going up</p>
&nbsp;</aside><pre><a name="l2984" href="#l2984" title="Link to line 2984">#</a><code>	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerYAcceleration
	<span class="token opcode property">BPL</span> PlayerTileCollision_Downward

PlayerTileCollision_Upward:
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_Twice <span class="token comment">; use top two tiles</span>
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_IncrementTwice <span class="token comment">; skip bottom two tiles</span>

	<span class="token opcode property">LDA</span> PlayerCollision
	<span class="token opcode property">BNE</span> PlayerTileCollision_CheckDamageTile
	<span class="token opcode property">BEQ</span> PlayerTileCollision_Horizontal

PlayerTileCollision_Downward:
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_IncrementTwice <span class="token comment">; skip top two tiles</span>
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_Twice <span class="token comment">; use bottom two tiles</span>

	<span class="token opcode property">LDA</span> PlayerCollision
	<span class="token opcode property">BNE</span> PlayerTileCollision_CheckInteractiveTiles

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$01</span>
&nbsp;</code></pre><aside><p>Do the quicksand check in worlds 2 and 6</p>
&nbsp;</aside><pre><a name="l3008" href="#l3008" title="Link to line 3008">#</a><code>	<span class="token opcode property">LDY</span> CurrentWorldTileset
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BEQ</span> PlayerTileCollision_Downward_CheckQuicksand

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$05</span>
IFNDEF ALWAYS_ALLOW_QUICKSAND
	<span class="token opcode property">BNE</span> PlayerTileCollision_Downward_AfterCheckQuicksand
ELSE
	<span class="token opcode property">NOP</span>
	<span class="token opcode property">NOP</span>
ENDIF

PlayerTileCollision_Downward_CheckQuicksand:
	<span class="token opcode property">JSR</span> PlayerTileCollision_CheckQuicksand

PlayerTileCollision_Downward_AfterCheckQuicksand:
	<span class="token opcode property">STA</span> QuicksandDepth
	<span class="token opcode property">STX</span> PlayerInAir
	<span class="token opcode property">JMP</span> PlayerTileCollision_Horizontal

PlayerTileCollision_CheckInteractiveTiles:&nbsp;</code></pre><aside><p>Reset quicksand depth</p>
&nbsp;</aside><pre><a name="l3030" href="#l3030" title="Link to line 3030">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> QuicksandDepth

	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BNE</span> PlayerTileCollision_Horizontal

	<span class="token opcode property">STA</span> PlayerInAir
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> PlayerYLo

PlayerTileCollision_CheckConveyorTile:
	<span class="token opcode property">LSR</span> byte_RAM_A
	<span class="token opcode property">BCC</span> PlayerTileCollision_CheckSlipperyTile

	<span class="token opcode property">LDX</span> byte_RAM_A
	<span class="token opcode property">LDA</span> ConveyorSpeedTable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PlayerXAcceleration

PlayerTileCollision_CheckSlipperyTile:
	<span class="token opcode property">LSR</span> byte_RAM_C
	<span class="token opcode property">BCC</span> PlayerTileCollision_CheckJar

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> GroundSlipperiness

PlayerTileCollision_CheckJar:
	<span class="token opcode property">JSR</span> TileBehavior_CheckJar

PlayerTileCollision_CheckDamageTile:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">STA</span> PlayerYAcceleration
	<span class="token opcode property">LDA</span> StarInvincibilityTimer
	<span class="token opcode property">BNE</span> PlayerTileCollision_Horizontal

	<span class="token opcode property">LSR</span> byte_RAM_E
	<span class="token opcode property">BCC</span> PlayerTileCollision_Horizontal

	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">STA</span> SpriteTempScreenX
	<span class="token opcode property">ROR</span> byte_RAM_<span class="token decimalnumber string">12</span>

IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
	<span class="token opcode property">JSR</span> PlayerTileCollision_HurtPlayer
ELSE
	<span class="token opcode property">LDA</span> byte_RAM_E
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCC</span> PlayerTileCollision_DamageTile
	<span class="token opcode property">BNE</span> PlayerTileCollision_HealthTile
&nbsp;</code></pre><aside><p>instant kill</p>
&nbsp;</aside><pre><a name="l3083" href="#l3083" title="Link to line 3083">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STY</span> PlayerHealth

PlayerTileCollision_DamageTile:
	<span class="token opcode property">JSR</span> PlayerTileCollision_HurtPlayer
	<span class="token opcode property">JMP</span> PlayerTileCollision_Horizontal

PlayerTileCollision_HealthTile:
	<span class="token opcode property">JSR</span> RestorePlayerToFullHealth
ENDIF

PlayerTileCollision_Horizontal:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerXAcceleration
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>FA<span class="token decimalnumber string">3</span>

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_IncrementTwice

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">8</span>FA<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">STY</span> PlayerMovementDirection
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_Twice

	<span class="token opcode property">LDA</span> PlayerCollision
	<span class="token opcode property">AND</span> #CollisionFlags_Right | CollisionFlags_Left
	<span class="token opcode property">BEQ</span> PlayerTileCollision_Exit

	<span class="token opcode property">JMP</span> PlayerHorizontalCollision_Bank<span class="token decimalnumber string">0</span>

PlayerTileCollision_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Check collision attributes for the next two tiles</p>
<p>Input
byte_RAM_7: collision direction
byte_RAM_8: bounding box offset</p>
<p>Output
byte_RAM_7 += 2
byte_RAM_8 += 2</p>
&nbsp;</aside><pre><a name="l3129" href="#l3129" title="Link to line 3129">#</a><code>CheckPlayerTileCollision_Twice:
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision

IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
CheckPlayerTileCollision:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">924</span>F

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDY</span> JumpthroughTileCollisionTable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>

	<span class="token opcode property">JSR</span> CheckTileUsesCollisionType

	<span class="token opcode property">BCC</span> CheckPlayerTileCollision_Exit

CheckPlayerTileCollision_CheckSpikes:
	<span class="token opcode property">CMP</span> #BackgroundTile_Spikes
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_CheckIce

	<span class="token opcode property">LDA</span> InteractiveTileCollisionTable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_E
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_UpdatePlayerCollision

CheckPlayerTileCollision_CheckIce:
	<span class="token opcode property">CMP</span> #BackgroundTile_JumpThroughIce
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_CheckConveyor

	<span class="token opcode property">LDA</span> InteractiveTileCollisionTable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_UpdatePlayerCollision

CheckPlayerTileCollision_CheckConveyor:
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #BackgroundTile_ConveyorLeft
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> CheckPlayerTileCollision_UpdatePlayerCollision

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> InteractiveTileCollisionTable, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_A

CheckPlayerTileCollision_UpdatePlayerCollision:
	<span class="token opcode property">LDA</span> EnableCollisionFlagTable, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> PlayerCollision
	<span class="token opcode property">STA</span> PlayerCollision

CheckPlayerTileCollision_Exit:
	<span class="token opcode property">JMP</span> CheckPlayerTileCollision_Increment

ELSE&nbsp;</code></pre><aside><p>custom behavior using tile attribute table</p>
&nbsp;</aside><pre><a name="l3182" href="#l3182" title="Link to line 3182">#</a><code>CheckPlayerTileCollision:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">924</span>F

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
&nbsp;</code></pre><aside><p>check tile attributes</p>
&nbsp;</aside><pre><a name="l3191" href="#l3191" title="Link to line 3191">#</a><code>	<span class="token opcode property">LDA</span> TileCollisionAttributesTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> CheckPlayerTileCollisionAttributesTable, <span class="token register variable">X</span>

	<span class="token opcode property">BEQ</span> CheckPlayerTileCollision_CheckSpikes

	<span class="token opcode property">LDA</span> EnableCollisionFlagTable, <span class="token register variable">X</span>
	<span class="token opcode property">ORA</span> PlayerCollision
	<span class="token opcode property">STA</span> PlayerCollision

CheckPlayerTileCollision_CheckSpikes:
	<span class="token opcode property">LDA</span> TileInteractionAttributesTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00000011</span>
	<span class="token opcode property">BEQ</span> CheckPlayerTileCollision_CheckIce

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> <span class="token binarynumber string">#%00000001</span>
	<span class="token opcode property">STA</span> byte_RAM_E

CheckPlayerTileCollision_CheckIce:
	<span class="token opcode property">LDA</span> TileInteractionAttributesTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00001100</span>
	<span class="token opcode property">BEQ</span> CheckPlayerTileCollision_CheckConveyor
	<span class="token opcode property">CMP</span> <span class="token binarynumber string">#%00000100</span>
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_CheckConveyor

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_C
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_Exit

CheckPlayerTileCollision_CheckConveyor:
	<span class="token opcode property">CMP</span> <span class="token binarynumber string">#%00001100</span>
	<span class="token opcode property">BNE</span> CheckPlayerTileCollision_Exit

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00000001</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ORA</span> <span class="token binarynumber string">#%00000001</span>
	<span class="token opcode property">STA</span> byte_RAM_A

CheckPlayerTileCollision_Exit:
	<span class="token opcode property">JMP</span> CheckPlayerTileCollision_Increment
ENDIF

&nbsp;</code></pre><aside><p>Skip two tiles</p>
<p>Output
byte_RAM_7 += 2
byte_RAM_8 += 2</p>
&nbsp;</aside><pre><a name="l3242" href="#l3242" title="Link to line 3242">#</a><code>CheckPlayerTileCollision_IncrementTwice:
	<span class="token opcode property">JSR</span> CheckPlayerTileCollision_Increment

CheckPlayerTileCollision_Increment:
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">8</span>
	<span class="token opcode property">RTS</span>


PlayerTileCollision_CheckCherryAndClimbable:
	<span class="token opcode property">LDY</span> byte_BANKF_F<span class="token decimalnumber string">00</span><span class="token register variable">A</span>
&nbsp;</code></pre><aside><p>byte_RAM_10 seems to be a global counter
this code increments Y every other frame, but why?</p>
&nbsp;</aside><pre><a name="l3256" href="#l3256" title="Link to line 3256">#</a><code>	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCS</span> PlayerTileCollision_CheckCherryAndClimbable_AfterTick
	<span class="token opcode property">INY</span>

PlayerTileCollision_CheckCherryAndClimbable_AfterTick:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">JSR</span> PlayerTileCollision_CheckClimbable

	<span class="token opcode property">BCS</span> PlayerTileCollision_Climbable

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> #BackgroundTile_Cherry
	<span class="token opcode property">BNE</span> PlayerTileCollision_Climbable_Exit

	<span class="token opcode property">INC</span> CherryCount
	<span class="token opcode property">LDA</span> CherryCount
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">BNE</span> PlayerTileCollision_Cherry

	<span class="token opcode property">STA</span> CherryCount
	<span class="token opcode property">JSR</span> CreateStarman

PlayerTileCollision_Cherry:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #BackgroundTile_Sky
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">937</span>C

PlayerTileCollision_Climbable:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_Down | ControllerInput_Up
	<span class="token opcode property">BEQ</span> PlayerTileCollision_Climbable_Exit

	<span class="token opcode property">LDY</span> HoldingItem
	<span class="token opcode property">BNE</span> PlayerTileCollision_Climbable_Exit

	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCS</span> PlayerTileCollision_Climbable_Exit

	<span class="token opcode property">LDA</span> #PlayerState_Climbing
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">STY</span> PlayerInAir
	<span class="token opcode property">STY</span> PlayerDucking
	<span class="token opcode property">LDA</span> #SpriteAnimation_Climbing
	<span class="token opcode property">STA</span> PlayerAnimationFrame
&nbsp;</code></pre><aside><p>Break JSR PlayerTileCollision_CheckCherryAndClimbable</p>
&nbsp;</aside><pre><a name="l3308" href="#l3308" title="Link to line 3308">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>&nbsp;</code></pre><aside><p>Break JSR PlayerTileCollision</p>
&nbsp;</aside><pre><a name="l3311" href="#l3311" title="Link to line 3311">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PLA</span>

PlayerTileCollision_Climbable_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Check whether a tile should use the given collision handler type</p>
<p>Input
A = tile ID
Y = collision handler type (0 = solid for mushroom blocks, 1 = jumpthrough, 2 = solid)
Output
C = whether or not collision type Y is relevant</p>
&nbsp;</aside><pre><a name="l3327" href="#l3327" title="Link to line 3327">#</a><code>CheckTileUsesCollisionType:
	<span class="token opcode property">PHA</span> <span class="token comment">; stash tile ID for later</span>
&nbsp;</code></pre><aside><p>determine which tile table to use (0-3)</p>
&nbsp;</aside><pre><a name="l3331" href="#l3331" title="Link to line 3331">#</a><code>	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
&nbsp;</code></pre><aside><p>add the offset for the type of collision we're checking</p>
&nbsp;</aside><pre><a name="l3337" href="#l3337" title="Link to line 3337">#</a><code>	<span class="token opcode property">ADC</span> TileGroupTable, <span class="token register variable">Y</span>
	<span class="token opcode property">TAY</span>
&nbsp;</code></pre><aside><p>check which side of the tile ID pivot we're on</p>
&nbsp;</aside><pre><a name="l3341" href="#l3341" title="Link to line 3341">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">CMP</span> TileSolidnessTable, <span class="token register variable">Y</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>These map the two high bits of a tile to offets in TileSolidnessTable</p>
&nbsp;</aside><pre><a name="l3349" href="#l3349" title="Link to line 3349">#</a><code>TileGroupTable:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; solid to mushroom blocks</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; solid on top</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; solid on all sides</span>


PickUpToEnemyTypeTable:
	<span class="token directive keyword">.db</span> Enemy_MushroomBlock <span class="token comment">; $00</span>
	<span class="token directive keyword">.db</span> Enemy_MushroomBlock <span class="token comment">; $01</span>
	<span class="token directive keyword">.db</span> Enemy_MushroomBlock <span class="token comment">; $02</span>
	<span class="token directive keyword">.db</span> Enemy_POWBlock <span class="token comment">; $03</span>
	<span class="token directive keyword">.db</span> Enemy_Coin <span class="token comment">; $04</span>
	<span class="token directive keyword">.db</span> Enemy_VegetableLarge <span class="token comment">; $05</span>
	<span class="token directive keyword">.db</span> Enemy_VegetableSmall <span class="token comment">; $06</span>
	<span class="token directive keyword">.db</span> Enemy_Rocket <span class="token comment">; $07</span>
	<span class="token directive keyword">.db</span> Enemy_Shell <span class="token comment">; $08</span>
	<span class="token directive keyword">.db</span> Enemy_Bomb <span class="token comment">; $09</span>
	<span class="token directive keyword">.db</span> Enemy_SubspacePotion <span class="token comment">; $0A</span>
	<span class="token directive keyword">.db</span> Enemy_Mushroom<span class="token decimalnumber string">1</span>up <span class="token comment">; $0B</span>
	<span class="token directive keyword">.db</span> Enemy_POWBlock <span class="token comment">; $0C</span>
	<span class="token directive keyword">.db</span> Enemy_BobOmb <span class="token comment">; $0D</span>
	<span class="token directive keyword">.db</span> Enemy_MushroomBlock <span class="token comment">; $0E ; this one seems to be overridden for digging in sand</span>

&nbsp;</code></pre><aside><p>find a slot for the item being lifted</p>
&nbsp;</aside><pre><a name="l3374" href="#l3374" title="Link to line 3374">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9074</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$06</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9076</span>:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9080</span>

	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9076</span>

	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>create the sprite for the item being picked up</p>
&nbsp;</aside><pre><a name="l3388" href="#l3388" title="Link to line 3388">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9080</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> UnlinkEnemyFromRawData_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> #EnemyState_Alive
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>AE

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #EnemyState_Sand

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>AE:
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PickUpToEnemyTypeTable, <span class="token register variable">Y</span> <span class="token comment">; What sprite is spawned for you when lifting a bg object</span>
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$0FF</span> <span class="token comment">; regular bomb fuse</span>
	<span class="token opcode property">CMP</span> #Enemy_Bomb
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">CMP</span> #Enemy_BobOmb
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>C<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$50</span> <span class="token comment">; BobOmb fuse</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>C<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">STY</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>EA

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>C<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">CMP</span> #Enemy_Mushroom<span class="token decimalnumber string">1</span>up
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>D<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> Mushroom<span class="token decimalnumber string">1</span>upPulled
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>EA

	<span class="token opcode property">LDA</span> #Enemy_VegetableSmall
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>EA

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>D<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">CMP</span> #Enemy_VegetableLarge
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>EA

	<span class="token opcode property">LDY</span> BigVeggiesPulled
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>E<span class="token decimalnumber string">7</span>

	<span class="token opcode property">LDA</span> #Enemy_Stopwatch
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>E<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">STY</span> BigVeggiesPulled

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">90</span>EA:
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">1</span>_B<span class="token decimalnumber string">9</span>EB

	<span class="token opcode property">LDA</span> #CollisionFlags_Down
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #BackgroundTile_Sky
	<span class="token opcode property">JSR</span> ReplaceTile_Bank<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> #PlayerState_Lifting
	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDA</span> #SpriteAnimation_Pulling
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">INC</span> HoldingItem
	<span class="token opcode property">RTS</span>


TileBehavior_CheckJar:
	<span class="token opcode property">LDY</span> HoldingItem
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C

	<span class="token opcode property">LDA</span> PlayerDucking
	<span class="token opcode property">BEQ</span> TileBehavior_CheckPickUp

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDX</span> InSubspaceOrJar
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> TileBehavior_CheckJar_NotSubspace
&nbsp;</code></pre><aside><p>In SubSpace, a non-enterable jar can be entered
Now Y = $00</p>
&nbsp;</aside><pre><a name="l3495" href="#l3495" title="Link to line 3495">#</a><code>	<span class="token opcode property">CMP</span> #BackgroundTile_JarTopNonEnterable
	<span class="token opcode property">BEQ</span> TileBehavior_GoDownJar

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C

TileBehavior_CheckJar_NotSubspace:
	<span class="token opcode property">INY</span>&nbsp;</code></pre><aside><p>Now Y = $01</p>
&nbsp;</aside><pre><a name="l3503" href="#l3503" title="Link to line 3503">#</a><code>	<span class="token opcode property">CMP</span> #BackgroundTile_JarTopGeneric
	<span class="token opcode property">BEQ</span> TileBehavior_GoDownJar

	<span class="token opcode property">CMP</span> #BackgroundTile_JarTopPointer
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C

	<span class="token opcode property">INY</span>
&nbsp;</code></pre><aside><p>Now Y = $02</p>
&nbsp;</aside><pre><a name="l3511" href="#l3511" title="Link to line 3511">#</a><code>TileBehavior_GoDownJar:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C
&nbsp;</code></pre><aside><p>Stop horiziontal movement</p>
&nbsp;</aside><pre><a name="l3521" href="#l3521" title="Link to line 3521">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
&nbsp;</code></pre><aside><p>We're going down the jar!</p>
&nbsp;</aside><pre><a name="l3525" href="#l3525" title="Link to line 3525">#</a><code>	<span class="token opcode property">LDA</span> #PlayerState_GoingDownJar
	<span class="token opcode property">STA</span> PlayerState
&nbsp;</code></pre><aside><p>What kind of jar are we going down?
$00 = warp, $01 = regular, $02 = pointer</p>
&nbsp;</aside><pre><a name="l3530" href="#l3530" title="Link to line 3530">#</a><code>	<span class="token opcode property">STY</span> InJarType
&nbsp;</code></pre><aside><p>Snaps the player to the closest tile (for entering doors and jars)</p>
&nbsp;</aside><pre><a name="l3535" href="#l3535" title="Link to line 3535">#</a><code>SnapPlayerToTile:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">BCC</span> SnapPlayerToTile_Exit

	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> SnapPlayerToTile_Exit

	<span class="token opcode property">INC</span> PlayerXHi

SnapPlayerToTile_Exit:
	<span class="token opcode property">RTS</span>


TileBehavior_CheckPickUp:
	<span class="token opcode property">BIT</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BVC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C

&nbsp;</code></pre><aside><p>B button pressed</p>
&nbsp;</aside><pre><a name="l3557" href="#l3557" title="Link to line 3557">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> #BackgroundTile_DiggableSand
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">916</span>E

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0E</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9177</span>
&nbsp;</code></pre><aside><p>blocks that can be picked up</p>
&nbsp;</aside><pre><a name="l3573" href="#l3573" title="Link to line 3573">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">916</span>E:
	<span class="token opcode property">CMP</span> #BackgroundTile_Unused<span class="token decimalnumber string">6</span>D
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C
&nbsp;</code></pre><aside><p>convert to an index in PickUpToEnemyTypeTable</p>
&nbsp;</aside><pre><a name="l3578" href="#l3578" title="Link to line 3578">#</a><code>	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #BackgroundTile_MushroomBlock
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9177</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9074</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3587" href="#l3587" title="Link to line 3587">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">917</span>C:
	<span class="token opcode property">LDA</span> PlayerDucking
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE

	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> HoldingItem
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>AE

	<span class="token opcode property">LDX</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">CPY</span> #Enemy_Key
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>AE:
	<span class="token opcode property">LDX</span> InSubspaceOrJar
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>BF

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span>
&nbsp;</code></pre><aside><p>check to see if the tile matches one of the door tiles</p>
&nbsp;</aside><pre><a name="l3627" href="#l3627" title="Link to line 3627">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>B<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">CMP</span> DoorTiles, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>EB

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>B<span class="token decimalnumber string">7</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>BF:
	<span class="token opcode property">BIT</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">BVC</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CMP</span> #BackgroundTile_GrassInactive
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE

	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #BackgroundTile_GrassCoin
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CF

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3650" href="#l3650" title="Link to line 3650">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CF:
	<span class="token opcode property">LDX</span> InSubspaceOrJar
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>E<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> SubspaceVisits
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>E<span class="token decimalnumber string">2</span> <span class="token comment">; skip if we've already visited Subspace twice</span>

	<span class="token opcode property">INC</span> SubspaceCoins
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>E<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">TXA</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>E<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">9</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9074</span>
&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3673" href="#l3673" title="Link to line 3673">#</a><code>&nbsp;</code></pre><aside><p>Checks to see if we're trying to go through the door</p>
<p>Input
Y = tile index in DoorTiles</p>
&nbsp;</aside><pre><a name="l3679" href="#l3679" title="Link to line 3679">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>EB:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Up
	<span class="token opcode property">BEQ</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE
&nbsp;</code></pre><aside><p>player is holding up and is trying to go through this door</p>
&nbsp;</aside><pre><a name="l3685" href="#l3685" title="Link to line 3685">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">91</span>CE

	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$04</span> <span class="token comment">; index of BackgroundTile_LightDoorEndLevel</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9205</span>
&nbsp;</code></pre><aside><p>setting GameMode to $03 to go to Bonus Chance</p>
&nbsp;</aside><pre><a name="l3696" href="#l3696" title="Link to line 3696">#</a><code>	<span class="token opcode property">DEY</span>
	<span class="token opcode property">STY</span> GameMode
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l3701" href="#l3701" title="Link to line 3701">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9205</span>:
	<span class="token opcode property">LDA</span> #TransitionType_Door
	<span class="token opcode property">STA</span> TransitionType
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">JSR</span> JumpToTableAfterJump

DoorHandlingPointers:
	<span class="token directive keyword">.dw</span> DoorHandling_UnlockedDoor <span class="token comment">; unlocked door</span>
	<span class="token directive keyword">.dw</span> DoorHandling_LockedDoor <span class="token comment">; locked door</span>
	<span class="token directive keyword">.dw</span> DoorHandling_Entrance <span class="token comment">; dark door</span>
	<span class="token directive keyword">.dw</span> DoorHandling_Entrance <span class="token comment">; light door</span>


DoorHandling_UnlockedDoor:
	<span class="token opcode property">JSR</span> DoorAnimation_Unlocked

DoorHandling_GoThroughDoor:
	<span class="token opcode property">INC</span> DoorAnimationTimer
	<span class="token opcode property">INC</span> PlayerLock
	<span class="token opcode property">JSR</span> SnapPlayerToTile

	<span class="token opcode property">LDA</span> #DPCM_DoorOpenBombBom
	<span class="token opcode property">STA</span> DPCMQueue

DoorHandling_Exit:
	<span class="token opcode property">RTS</span>


DoorHandling_LockedDoor:
	<span class="token opcode property">LDA</span> HoldingItem&nbsp;</code></pre><aside><p>don't come to a locked door empty-handed</p>
&nbsp;</aside><pre><a name="l3733" href="#l3733" title="Link to line 3733">#</a><code>	<span class="token opcode property">BEQ</span> DoorHandling_Exit
&nbsp;</code></pre><aside><p>and make sure you have a key</p>
&nbsp;</aside><pre><a name="l3736" href="#l3736" title="Link to line 3736">#</a><code>	<span class="token opcode property">LDY</span> ObjectBeingCarriedIndex
	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_Key
	<span class="token opcode property">BNE</span> DoorHandling_Exit
&nbsp;</code></pre><aside><p>the key has been used</p>
&nbsp;</aside><pre><a name="l3742" href="#l3742" title="Link to line 3742">#</a><code>	<span class="token opcode property">INC</span> KeyUsed
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>

	<span class="token opcode property">JSR</span> TurnKeyIntoPuffOfSmoke
	<span class="token opcode property">JSR</span> DoorAnimation_Locked
	<span class="token opcode property">JMP</span> DoorHandling_GoThroughDoor


DoorHandling_Entrance:
	<span class="token opcode property">INC</span> DoAreaTransition
	<span class="token opcode property">JMP</span> DoAreaReset


DoorTiles:
	<span class="token directive keyword">.db</span> BackgroundTile_DoorBottom
	<span class="token directive keyword">.db</span> BackgroundTile_DoorBottomLock
	<span class="token directive keyword">.db</span> BackgroundTile_DarkDoor
	<span class="token directive keyword">.db</span> BackgroundTile_LightDoor
	<span class="token directive keyword">.db</span> BackgroundTile_LightDoorEndLevel

&nbsp;</code></pre><aside><p>Seems to determine what kind of tile the player has collided with?</p>
<p>Input
X = object index (0 = player)
Y = bounding box offset?
Output
byte_RAM_0 = tile ID</p>
&nbsp;</aside><pre><a name="l3773" href="#l3773" title="Link to line 3773">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">924</span>F:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_BANKF_F<span class="token decimalnumber string">011</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">925</span>E

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">925</span>E:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerXLo, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">5</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">LDA</span> PlayerXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9277</span>:
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">927</span>D

	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">927</span>D:
	<span class="token opcode property">LDA</span> byte_BANKF_F<span class="token decimalnumber string">055</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9284</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9284</span>:
	<span class="token opcode property">CLC</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9285</span>:
	<span class="token opcode property">ADC</span> PlayerYLo, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> PlayerYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">929</span>E

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">929</span>E:
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span><span class="token register variable">A</span><span class="token decimalnumber string">5</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l3847" href="#l3847" title="Link to line 3847">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>AA:
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">0</span>

	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_F
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>BC

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCC</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">0</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>BC:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">INY</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANK0_92AA</p>
&nbsp;</aside><pre><a name="l3873" href="#l3873" title="Link to line 3873">#</a><code>&nbsp;</code></pre><aside><p>NOTE: This is a copy of the "sub_BANK3_BC2E" routine in Bank 3</p>
&nbsp;</aside><pre><a name="l3879" href="#l3879" title="Link to line 3879">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>AA

	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>E<span class="token decimalnumber string">0</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>DF

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>E<span class="token decimalnumber string">0</span>, <span class="token register variable">Y</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>DF:
	<span class="token opcode property">RTS</span>


byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>E<span class="token decimalnumber string">0</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0B</span>

&nbsp;</code></pre><aside><p>Unused?
Copy of sub_BANKF_F494</p>
&nbsp;</aside><pre><a name="l3908" href="#l3908" title="Link to line 3908">#</a><code>_code_<span class="token decimalnumber string">12</span>E<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDX</span> NeedVerticalScroll
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9311</span>

	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_Lifting
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9311</span>

	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">LDY</span> PlayerScreenYHi
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>FF

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9305</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$B4</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9305</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9307</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>FF:
	<span class="token opcode property">LDY</span> PlayerInAir
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9307</span>

	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9306</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9305</span>:
	<span class="token opcode property">INX</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9306</span>:
	<span class="token opcode property">INX</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9307</span>:
	<span class="token opcode property">LDA</span> VerticalScrollDirection
	<span class="token opcode property">STX</span> VerticalScrollDirection
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9311</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">930</span>F:
	<span class="token opcode property">STX</span> NeedVerticalScroll

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9311</span>:
	<span class="token opcode property">RTS</span>


PlayerCollisionDirectionTable:
	<span class="token directive keyword">.db</span> CollisionFlags_Right
	<span class="token directive keyword">.db</span> CollisionFlags_Left

PlayerCollisionResultTable_Bank<span class="token decimalnumber string">0</span>:
	<span class="token directive keyword">.db</span> CollisionFlags_<span class="token decimalnumber string">80</span>
	<span class="token directive keyword">.db</span> CollisionFlags_<span class="token decimalnumber string">00</span>

&nbsp;</code></pre><aside><p>Enforces the left/right boundaries of horizontal areas</p>
&nbsp;</aside><pre><a name="l3964" href="#l3964" title="Link to line 3964">#</a><code>PlayerAreaBoundaryCollision:
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> PlayerAreaBoundaryCollision_Exit

	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">LDY</span> PlayerMovementDirection
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BEQ</span> PlayerAreaBoundaryCollision_CheckRight

PlayerAreaBoundaryCollision_CheckLeft:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCC</span> PlayerAreaBoundaryCollision_BoundaryHit

PlayerAreaBoundaryCollision_Exit:
	<span class="token opcode property">RTS</span>

PlayerAreaBoundaryCollision_CheckRight:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$E8</span>
	<span class="token opcode property">BCC</span> PlayerAreaBoundaryCollision_Exit

PlayerAreaBoundaryCollision_BoundaryHit:
	<span class="token opcode property">LDA</span> PlayerCollision
	<span class="token opcode property">ORA</span> PlayerCollisionDirectionTable - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerCollision
&nbsp;</code></pre><aside><p>NOTE: This is a copy of the "PlayerHorizontalCollision" routine in Bank 3</p>
&nbsp;</aside><pre><a name="l3992" href="#l3992" title="Link to line 3992">#</a><code>PlayerHorizontalCollision_Bank<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> PlayerMovementDirection
	<span class="token opcode property">LDA</span> PlayerXVelocity
	<span class="token opcode property">EOR</span> PlayerCollisionResultTable_Bank<span class="token decimalnumber string">0</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9340</span>

	<span class="token opcode property">STX</span> PlayerXVelocity

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9340</span>:
	<span class="token opcode property">LDA</span> PlayerXAcceleration
	<span class="token opcode property">EOR</span> PlayerCollisionResultTable_Bank<span class="token decimalnumber string">0</span> - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">934</span>B

	<span class="token opcode property">STX</span> PlayerXAcceleration

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">934</span>B:
	<span class="token opcode property">STX</span> PlayerXSubpixel

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">934</span>E:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4016" href="#l4016" title="Link to line 4016">#</a><code>&nbsp;</code></pre><aside><p>NOTE: This is a copy of the "sub_BANK3_BC50" routine in Bank 3</p>
<p>Replaces tile when something is picked up</p>
<p>Input
A = Target tile
X = Enemy index of object being picked up</p>
&nbsp;</aside><pre><a name="l4026" href="#l4026" title="Link to line 4026">#</a><code>ReplaceTile_Bank<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">PHA</span> <span class="token comment">; Something to update the PPU for some tile change</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">PHP</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">PLP</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> IsHorizontalLevel
	<span class="token opcode property">BEQ</span> ReplaceTile_StoreXHi_Bank<span class="token decimalnumber string">0</span>

	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>

ReplaceTile_StoreXHi_Bank<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">92</span>C<span class="token decimalnumber string">1</span>

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">934</span>E
&nbsp;</code></pre><aside><p>Input
A = Target tile</p>
&nbsp;</aside><pre><a name="l4063" href="#l4063" title="Link to line 4063">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">937</span>C:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>

	<span class="token opcode property">ADC</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">6</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> IsHorizontalLevel
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">93</span>B<span class="token decimalnumber string">9</span>

	<span class="token opcode property">INY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">93</span>B<span class="token decimalnumber string">9</span>:
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">940</span><span class="token register variable">A</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">5</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">7</span>, <span class="token register variable">X</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ROL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> TileQuadPointersLo, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> TileQuadPointersHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">8</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">9</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">10</span>, <span class="token register variable">X</span>
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">300</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Another byte of PPU high addresses for horiz/vert levels</p>
&nbsp;</aside><pre><a name="l4146" href="#l4146" title="Link to line 4146">#</a><code>byte_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">940</span><span class="token register variable">A</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$24</span>

&nbsp;</code></pre><aside><p>NOTE: This is a copy of the "StashPlayerPosition" routine in Bank 3</p>
&nbsp;</aside><pre><a name="l4156" href="#l4156" title="Link to line 4156">#</a><code>StashPlayerPosition_Bank<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> InSubspaceOrJar
	<span class="token opcode property">BNE</span> StashPlayerPosition_Exit_Bank<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">STA</span> PlayerXHi_Backup
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">STA</span> PlayerXLo_Backup
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">STA</span> PlayerYHi_Backup
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">STA</span> PlayerYLo_Backup

StashPlayerPosition_Exit_Bank<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>player placement after exiting subspace (maybe other times?)</p>
&nbsp;</aside><pre><a name="l4174" href="#l4174" title="Link to line 4174">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9428</span>:
	<span class="token opcode property">LDA</span> PlayerXHi_Backup
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> PlayerXLo_Backup
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> PlayerYHi_Backup
	<span class="token opcode property">STA</span> PlayerYHi
	<span class="token opcode property">LDA</span> PlayerYLo_Backup
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftLo
	<span class="token opcode property">STA</span> PlayerScreenX
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenYLo
	<span class="token opcode property">STA</span> PlayerScreenYLo
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">SBC</span> ScreenYHi
	<span class="token opcode property">STA</span> PlayerScreenYHi
	<span class="token opcode property">LDA</span> TransitionType
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> #TransitionType_SubSpace
	<span class="token opcode property">BNE</span> StashPlayerPosition_Exit_Bank<span class="token decimalnumber string">0</span>
&nbsp;</code></pre><aside><p>resetting these to zero (A=$00, otherwise we would have branched)</p>
&nbsp;</aside><pre><a name="l4200" href="#l4200" title="Link to line 4200">#</a><code>	<span class="token opcode property">STA</span> PlayerState
	<span class="token opcode property">STA</span> PlayerLock
	<span class="token opcode property">STA</span> SubspaceTimer
	<span class="token opcode property">JSR</span> DoorAnimation_Unlocked

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">STA</span> SubspaceDoorTimer
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK0_9428</p>
&nbsp;</aside><pre><a name="l4210" href="#l4210" title="Link to line 4210">#</a><code>&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4212" href="#l4212" title="Link to line 4212">#</a><code>&nbsp;</code></pre><aside><p>area transition</p>
&nbsp;</aside><pre><a name="l4214" href="#l4214" title="Link to line 4214">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">946</span>D:
	<span class="token opcode property">LDA</span> TransitionType
	<span class="token opcode property">CMP</span> #TransitionType_Jar
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">947</span>F

	<span class="token opcode property">LDA</span> InJarType
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">947</span>F

	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9428</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">94</span>C<span class="token decimalnumber string">2</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l4227" href="#l4227" title="Link to line 4227">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">947</span>F:
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> IsHorizontalLevel
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">948</span>E

	<span class="token opcode property">STY</span> PlayerXHi
	<span class="token opcode property">STA</span> PlayerYHi
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9492</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">948</span>E:
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">STY</span> PlayerYHi

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9492</span>:
	<span class="token opcode property">JSR</span> AreaTransitionPlacement

	<span class="token opcode property">LDY</span> PlayerYHi
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">95</span>AF

	<span class="token opcode property">STY</span> PlayerYHi
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> ScreenBoundaryLeftLo
	<span class="token opcode property">STA</span> PlayerScreenX
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">SEC</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">94</span>AC:
	<span class="token opcode property">SBC</span> ScreenYLo
	<span class="token opcode property">STA</span> PlayerScreenYLo
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">SBC</span> ScreenYHi
	<span class="token opcode property">STA</span> PlayerScreenYHi
	<span class="token opcode property">LDA</span> TransitionType
	<span class="token opcode property">CMP</span> #TransitionType_SubSpace
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">94</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> DoorAnimation_Unlocked

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">94</span>C<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">STA</span> byte_RAM_BA
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function sub_BANK0_946D</p>
&nbsp;</aside><pre><a name="l4278" href="#l4278" title="Link to line 4278">#</a><code>&nbsp;</code></pre><aside><p>Do the player placement after an area transition</p>
&nbsp;</aside><pre><a name="l4283" href="#l4283" title="Link to line 4283">#</a><code>AreaTransitionPlacement:
	<span class="token opcode property">LDA</span> TransitionType
	<span class="token opcode property">JSR</span> JumpToTableAfterJump

	<span class="token directive keyword">.dw</span> AreaTransitionPlacement_Reset
	<span class="token directive keyword">.dw</span> AreaTransitionPlacement_Door
	<span class="token directive keyword">.dw</span> AreaTransitionPlacement_Jar
	<span class="token directive keyword">.dw</span> AreaTransitionPlacement_Climbing
	<span class="token directive keyword">.dw</span> AreaTransitionPlacement_Subspace
	<span class="token directive keyword">.dw</span> AreaTransitionPlacement_Rocket


AreaTransitionPlacement_Reset:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDirection
	<span class="token opcode property">JSR</span> AreaTransitionPlacement_Middle

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">94</span>F<span class="token decimalnumber string">8</span>:
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_MovePlayerUp<span class="token decimalnumber string">1</span>Tile

	<span class="token opcode property">JSR</span> AreaTransitionPlacement_MovePlayerUp<span class="token decimalnumber string">1</span>Tile

	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">94</span>F<span class="token decimalnumber string">8</span>

&nbsp;</code></pre><aside><p>Moves the player up by one tile</p>
&nbsp;</aside><pre><a name="l4331" href="#l4331" title="Link to line 4331">#</a><code>AreaTransitionPlacement_MovePlayerUp<span class="token decimalnumber string">1</span>Tile:
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Looks for a door and positions the player at it</p>
<p>The implementation of this requires the destination door to be at the
OPPOSITE side of the screen from the origin door horizontally, but it can be
at any position vertically.</p>
<p>If no suitable door is found, the player is positioned to fall from the
top-middle of the screen instead</p>
&nbsp;</aside><pre><a name="l4349" href="#l4349" title="Link to line 4349">#</a><code>AreaTransitionPlacement_Door:
	<span class="token opcode property">LDA</span> PlayerXLo&nbsp;</code></pre><aside><p>Switch the x-position to the opposite side of the screen</p>
&nbsp;</aside><pre><a name="l4352" href="#l4352" title="Link to line 4352">#</a><code>	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> PlayerXLo
&nbsp;</code></pre><aside><p>Convert to a tile offset</p>
&nbsp;</aside><pre><a name="l4359" href="#l4359" title="Link to line 4359">#</a><code>	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
&nbsp;</code></pre><aside><p>Start at the bottom of the page</p>
&nbsp;</aside><pre><a name="l4366" href="#l4366" title="Link to line 4366">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0D</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>

AreaTransitionPlacement_Door_Loop:
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Read the target tile</p>
&nbsp;</aside><pre><a name="l4378" href="#l4378" title="Link to line 4378">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>

AreaTransitionPlacement_Door_InnerLoop:&nbsp;</code></pre><aside><p>See if it matches any door tile</p>
&nbsp;</aside><pre><a name="l4384" href="#l4384" title="Link to line 4384">#</a><code>	<span class="token opcode property">CMP</span> DoorTiles - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_Door_Exit
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> AreaTransitionPlacement_Door_InnerLoop
&nbsp;</code></pre><aside><p>Nothing matched on this row, so check the next row or give up</p>
&nbsp;</aside><pre><a name="l4390" href="#l4390" title="Link to line 4390">#</a><code>	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">3</span>
IFNDEF ROBUST_TRANSITION_SEARCH
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_Door_Fallback
ENDIF
IFDEF ROBUST_TRANSITION_SEARCH
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_DoorCustom
ENDIF

	<span class="token opcode property">JSR</span> AreaTransitionPlacement_MovePlayerUp<span class="token decimalnumber string">1</span>Tile

	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">JMP</span> AreaTransitionPlacement_Door_Loop

AreaTransitionPlacement_Door_Fallback:&nbsp;</code></pre><aside><p>Place in the middle of the screen if no door is found</p>
&nbsp;</aside><pre><a name="l4405" href="#l4405" title="Link to line 4405">#</a><code>	<span class="token opcode property">JSR</span> AreaTransitionPlacement_Middle

AreaTransitionPlacement_Door_Exit:
	<span class="token opcode property">JSR</span> AreaTransitionPlacement_MovePlayerUp<span class="token decimalnumber string">1</span>Tile

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerLock
	<span class="token opcode property">RTS</span>


IFDEF ROBUST_TRANSITION_SEARCH&nbsp;</code></pre><aside><p>Looks for a door and positions the player at it</p>
<p>In contrast to the normal door placement routine, this will search all
x-positions rather than just one opposite the door</p>
&nbsp;</aside><pre><a name="l4422" href="#l4422" title="Link to line 4422">#</a><code>AreaTransitionPlacement_DoorCustom:&nbsp;</code></pre><aside><p>Start on the correct page</p>
&nbsp;</aside><pre><a name="l4424" href="#l4424" title="Link to line 4424">#</a><code>	<span class="token opcode property">LDX</span> CurrentLevelEntryPage
	<span class="token opcode property">JSR</span> SetAreaPageAddr_Bank<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Start at the bottom right and work backwards</p>
&nbsp;</aside><pre><a name="l4428" href="#l4428" title="Link to line 4428">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0EF</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">7</span>

AreaTransitionPlacement_DoorCustom_Loop:&nbsp;</code></pre><aside><p>Read the target tile</p>
&nbsp;</aside><pre><a name="l4433" href="#l4433" title="Link to line 4433">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>

AreaTransitionPlacement_DoorCustom_InnerLoop:&nbsp;</code></pre><aside><p>See if it matches any door tile</p>
&nbsp;</aside><pre><a name="l4439" href="#l4439" title="Link to line 4439">#</a><code>	<span class="token opcode property">CMP</span> DoorTiles - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_DoorCustom_Exit
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> AreaTransitionPlacement_DoorCustom_InnerLoop
&nbsp;</code></pre><aside><p>No matches on this tile, check the next one or give up</p>
&nbsp;</aside><pre><a name="l4445" href="#l4445" title="Link to line 4445">#</a><code>	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_DoorCustom_Fallback

	<span class="token opcode property">JMP</span> AreaTransitionPlacement_DoorCustom_Loop

AreaTransitionPlacement_DoorCustom_Fallback:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">JSR</span> AreaTransitionPlacement_Middle
	<span class="token opcode property">JMP</span> AreaTransitionPlacement_Door_Exit

AreaTransitionPlacement_DoorCustom_Exit:
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">JMP</span> AreaTransitionPlacement_Door_Exit
ENDIF

&nbsp;</code></pre><aside><p>Place the player at the top of the screen in the middle horizontally</p>
&nbsp;</aside><pre><a name="l4473" href="#l4473" title="Link to line 4473">#</a><code>AreaTransitionPlacement_Jar:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerYLo
&nbsp;</code></pre><aside><p>Place the player in the air in the middle of the screen horizontally</p>
&nbsp;</aside><pre><a name="l4480" href="#l4480" title="Link to line 4480">#</a><code>AreaTransitionPlacement_Middle:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerInAir
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$78</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>Looks for a climbable tile (vine/chain/ladder) and positions the player at it</p>
<p>The implementation of this requires the destination to be at the OPPOSITE
side of the screen from the origin horizontally, otherwise the player will
be climbing on nothing.</p>
&nbsp;</aside><pre><a name="l4494" href="#l4494" title="Link to line 4494">#</a><code>AreaTransitionPlacement_Climbing:
	<span class="token opcode property">LDA</span> PlayerXLo&nbsp;</code></pre><aside><p>Switch the x-position to the opposite side of the screen</p>
&nbsp;</aside><pre><a name="l4497" href="#l4497" title="Link to line 4497">#</a><code>	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> PlayerXLo
&nbsp;</code></pre><aside><p>Switch the y-position to the opposite side of the screen</p>
&nbsp;</aside><pre><a name="l4504" href="#l4504" title="Link to line 4504">#</a><code>	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_Climbing_Exit

	<span class="token opcode property">DEC</span> PlayerYHi

AreaTransitionPlacement_Climbing_Exit:
IFDEF ROBUST_TRANSITION_SEARCH
	<span class="token opcode property">JSR</span> AreaTransitionPlacement_ClimbingCustom

	<span class="token opcode property">BCS</span> AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame
&nbsp;</code></pre><aside><p>Try the opposite side of the screen</p>
&nbsp;</aside><pre><a name="l4522" href="#l4522" title="Link to line 4522">#</a><code>	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerYLo

	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> PlayerYHi

	<span class="token opcode property">JSR</span> AreaTransitionPlacement_ClimbingCustom
	<span class="token opcode property">BCC</span> AreaTransitionPlacement_Climbing_UnreversePositionY
&nbsp;</code></pre><aside><p>Found something on the opposite side, so flip Y velocity</p>
&nbsp;</aside><pre><a name="l4534" href="#l4534" title="Link to line 4534">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BMI</span> AreaTransitionPlacement_Climbing_SetYVelocity

	<span class="token opcode property">INY</span>
AreaTransitionPlacement_Climbing_SetYVelocity:
	<span class="token opcode property">LDA</span> ClimbSpeed, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerYVelocity

	<span class="token opcode property">BNE</span> AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame

AreaTransitionPlacement_Climbing_UnreversePositionY:&nbsp;</code></pre><aside><p>Unflip Y position</p>
&nbsp;</aside><pre><a name="l4547" href="#l4547" title="Link to line 4547">#</a><code>	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerYLo

	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> PlayerYHi

AreaTransitionPlacement_Climbing_SetPlayerAnimationFrame:
ENDIF

	<span class="token opcode property">LDA</span> #SpriteAnimation_Climbing
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">RTS</span>


IFDEF ROBUST_TRANSITION_SEARCH&nbsp;</code></pre><aside><p>Ouput
C = set if a climbable tile was found</p>
&nbsp;</aside><pre><a name="l4568" href="#l4568" title="Link to line 4568">#</a><code>AreaTransitionPlacement_ClimbingCustom:&nbsp;</code></pre><aside><p>Target x-position</p>
&nbsp;</aside><pre><a name="l4570" href="#l4570" title="Link to line 4570">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
&nbsp;</code></pre><aside><p>Target y-position</p>
&nbsp;</aside><pre><a name="l4578" href="#l4578" title="Link to line 4578">#</a><code>	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BNE</span> AreaTransitionPlacement_ClimbingCustom_AfterNudge
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
AreaTransitionPlacement_ClimbingCustom_AfterNudge:
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
&nbsp;</code></pre><aside><p>Read the target tile</p>
&nbsp;</aside><pre><a name="l4590" href="#l4590" title="Link to line 4590">#</a><code>	<span class="token opcode property">LDA</span> CurrentLevelEntryPage
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
&nbsp;</code></pre><aside><p>Check if the target tile is climbable</p>
&nbsp;</aside><pre><a name="l4597" href="#l4597" title="Link to line 4597">#</a><code>	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$09</span>
AreaTransitionPlacement_ClimbingCustom_CheckLoop:
	<span class="token opcode property">CMP</span> ClimbableTiles, <span class="token register variable">Y</span>
	<span class="token opcode property">BNE</span> AreaTransitionPlacement_ClimbingCustom_LoopNext

	<span class="token opcode property">RTS</span>

AreaTransitionPlacement_ClimbingCustom_LoopNext:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> AreaTransitionPlacement_ClimbingCustom_CheckLoop
&nbsp;</code></pre><aside><p>Target tile is not climbable; start at the right and work backwards</p>
&nbsp;</aside><pre><a name="l4609" href="#l4609" title="Link to line 4609">#</a><code>	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">7</span>

AreaTransitionPlacement_ClimbingCustom_Loop:&nbsp;</code></pre><aside><p>Read the target tile</p>
&nbsp;</aside><pre><a name="l4621" href="#l4621" title="Link to line 4621">#</a><code>	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">1</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$09</span>

AreaTransitionPlacement_ClimbingCustom_InnerLoop:
	<span class="token opcode property">CMP</span> ClimbableTiles, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> AreaTransitionPlacement_ClimbingCustom_SetXPosition
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> AreaTransitionPlacement_ClimbingCustom_InnerLoop
&nbsp;</code></pre><aside><p>No matches on this tile, check the next one or give up</p>
&nbsp;</aside><pre><a name="l4632" href="#l4632" title="Link to line 4632">#</a><code>	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">BMI</span> AreaTransitionPlacement_ClimbingCustom_NotFound

	<span class="token opcode property">JMP</span> AreaTransitionPlacement_ClimbingCustom_Loop

AreaTransitionPlacement_ClimbingCustom_SetXPosition:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> PlayerXLo

	<span class="token opcode property">SEC</span>
	<span class="token opcode property">RTS</span>

AreaTransitionPlacement_ClimbingCustom_NotFound:
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">RTS</span>
ENDIF


AreaTransitionPlacement_Subspace:
	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_BA
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$F1</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> PlayerScreenYLo
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">DEC</span> PlayerLock
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> SubspaceTimer
	<span class="token opcode property">RTS</span>


AreaTransitionPlacement_Rocket:
	<span class="token opcode property">JSR</span> AreaTransitionPlacement_Middle
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>@TODO</p>
<p>Input
Y = PlayerYHi
A = PlayerYLo
Output
Y = PlayerYHi
A = PlayerYLo</p>
&nbsp;</aside><pre><a name="l4688" href="#l4688" title="Link to line 4688">#</a><code>sub_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">95</span>AF:
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BMI</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">95</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">PHA</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> byte_RAM_F
	<span class="token opcode property">BCS</span> locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">95</span>C<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEY</span>

locret_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">95</span>C<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">RTS</span>


IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
IFNDEF ROBUST_TRANSITION_SEARCH
&nbsp;</code></pre><aside><p>Unused space in the original ($95C3 - $95FF)</p>
&nbsp;</aside><pre><a name="l4714" href="#l4714" title="Link to line 4714">#</a><code>unusedSpace <span class="token hexnumber string">$9600</span>, <span class="token hexnumber string">$FF</span>
ENDIF
ENDIF


TitleScreenPPUDataPointers:
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token directive keyword">.dw</span> TitleLayout


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4725" href="#l4725" title="Link to line 4725">#</a><code>WaitForNMI_TitleScreen_TurnOnPPU:
	<span class="token opcode property">LDA</span> #PPUMask_ShowLeft<span class="token decimalnumber string">8</span>Pixels_BG | PPUMask_ShowLeft<span class="token decimalnumber string">8</span>Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites
	<span class="token opcode property">STA</span> PPUMaskMirror
&nbsp;</code></pre><aside><p>End of function WaitForNMI_TitleScreen_TurnOnPPU</p>
&nbsp;</aside><pre><a name="l4731" href="#l4731" title="Link to line 4731">#</a><code>
&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l4733" href="#l4733" title="Link to line 4733">#</a><code>WaitForNMI_TitleScreen:
	<span class="token opcode property">LDA</span> ScreenUpdateIndex
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> TitleScreenPPUDataPointers, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer
	<span class="token opcode property">LDA</span> TitleScreenPPUDataPointers + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> NMIWaitFlag

WaitForNMI_TitleScreenLoop:
	<span class="token opcode property">LDA</span> NMIWaitFlag
	<span class="token opcode property">BPL</span> WaitForNMI_TitleScreenLoop

	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>End of function WaitForNMI_TitleScreen</p>
&nbsp;</aside><pre><a name="l4752" href="#l4752" title="Link to line 4752">#</a><code>TitleLayout:&nbsp;</code></pre><aside><p>red lines, vertical, left</p>
&nbsp;</aside><pre><a name="l4756" href="#l4756" title="Link to line 4756">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>&nbsp;</code></pre><aside><p>red lines, vertical, right</p>
&nbsp;</aside><pre><a name="l4761" href="#l4761" title="Link to line 4761">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1C</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1D</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1E</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1F</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FD</span>&nbsp;</code></pre><aside><p>red lines, horizontal, top</p>
&nbsp;</aside><pre><a name="l4766" href="#l4766" title="Link to line 4766">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$63</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>&nbsp;</code></pre><aside><p>red lines, vertical, bottom</p>
&nbsp;</aside><pre><a name="l4771" href="#l4771" title="Link to line 4771">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$63</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$83</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A3</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$FD</span>
&nbsp;</code></pre><aside><p>ornate frame, top</p>
&nbsp;</aside><pre><a name="l4776" href="#l4776" title="Link to line 4776">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$68</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$48</span>, <span class="token hexnumber string">$4A</span>, <span class="token hexnumber string">$4C</span>, <span class="token hexnumber string">$4E</span>, <span class="token hexnumber string">$50</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$52</span>, <span class="token hexnumber string">$53</span>, <span class="token hexnumber string">$54</span>, <span class="token hexnumber string">$55</span>, <span class="token hexnumber string">$56</span>, <span class="token hexnumber string">$57</span>, <span class="token hexnumber string">$58</span>, <span class="token hexnumber string">$5A</span>, <span class="token hexnumber string">$5C</span>, <span class="token hexnumber string">$5E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$84</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$FD</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$24</span>, <span class="token hexnumber string">$49</span>, <span class="token hexnumber string">$4B</span>, <span class="token hexnumber string">$4D</span>, <span class="token hexnumber string">$4F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$94</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$59</span>, <span class="token hexnumber string">$5B</span>, <span class="token hexnumber string">$5D</span>, <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$2E</span>, <span class="token hexnumber string">$2F</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$FD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$A4</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$25</span>, <span class="token hexnumber string">$26</span>, <span class="token hexnumber string">$27</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$B9</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$31</span>, <span class="token hexnumber string">$32</span>, <span class="token hexnumber string">$33</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$C4</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$28</span>, <span class="token hexnumber string">$29</span>, <span class="token hexnumber string">$2A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$D9</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$34</span>, <span class="token hexnumber string">$35</span>, <span class="token hexnumber string">$36</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$E3</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$2B</span>, <span class="token hexnumber string">$2C</span>, <span class="token hexnumber string">$2D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$FA</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$37</span>, <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$39</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$3A</span>, <span class="token hexnumber string">$3B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$1B</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$41</span>&nbsp;</code></pre><aside><p>ornate frame, lines down, top</p>
&nbsp;</aside><pre><a name="l4788" href="#l4788" title="Link to line 4788">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$C6</span>, <span class="token hexnumber string">$3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$3C</span>, <span class="token hexnumber string">$C6</span>, <span class="token hexnumber string">$42</span>&nbsp;</code></pre><aside><p>ornate frame, middle</p>
&nbsp;</aside><pre><a name="l4791" href="#l4791" title="Link to line 4791">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$E3</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$3D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$60</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$3E</span>, <span class="token hexnumber string">$3F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$1C</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$61</span>, <span class="token hexnumber string">$62</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$3C</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$63</span>, <span class="token hexnumber string">$64</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$45</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$5C</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$65</span>&nbsp;</code></pre><aside><p>ornate frame, lines down, bottom</p>
&nbsp;</aside><pre><a name="l4800" href="#l4800" title="Link to line 4800">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$63</span>, <span class="token hexnumber string">$C6</span>, <span class="token hexnumber string">$3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$7C</span>, <span class="token hexnumber string">$C4</span>, <span class="token hexnumber string">$42</span>&nbsp;</code></pre><aside><p>ornate frame, bottom, characters</p>
&nbsp;</aside><pre><a name="l4803" href="#l4803" title="Link to line 4803">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$C4</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$A6</span>, <span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$E4</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$A7</span>, <span class="token hexnumber string">$A9</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$FA</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$82</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$8A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$90</span>, <span class="token hexnumber string">$92</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$14</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$9E</span>, <span class="token hexnumber string">$A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$1A</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$83</span>, <span class="token hexnumber string">$89</span>, <span class="token hexnumber string">$8B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$46</span>, <span class="token hexnumber string">$91</span>, <span class="token hexnumber string">$93</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$2A</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$A2</span>, <span class="token hexnumber string">$A4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$2E</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$67</span>, <span class="token hexnumber string">$6C</span>, <span class="token hexnumber string">$6E</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$69</span>, <span class="token hexnumber string">$9F</span>, <span class="token hexnumber string">$A1</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$98</span>, <span class="token hexnumber string">$9A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$3A</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$84</span>, <span class="token hexnumber string">$86</span>, <span class="token hexnumber string">$8C</span>, <span class="token hexnumber string">$8E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$1B</span>, <span class="token hexnumber string">$47</span>, <span class="token hexnumber string">$94</span>, <span class="token hexnumber string">$96</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$A3</span>, <span class="token hexnumber string">$A5</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$66</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6D</span>, <span class="token hexnumber string">$6F</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$6A</span>, <span class="token hexnumber string">$6B</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$99</span>, <span class="token hexnumber string">$9B</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$85</span>, <span class="token hexnumber string">$87</span>, <span class="token hexnumber string">$8D</span>, <span class="token hexnumber string">$8F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$64</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$95</span>, <span class="token hexnumber string">$97</span>, <span class="token hexnumber string">$FD</span>, <span class="token hexnumber string">$AA</span> ,<span class="token hexnumber string">$AB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$9C</span>, <span class="token hexnumber string">$9D</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$89</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AB</span>
&nbsp;</code></pre><aside><p>SUPER
SSSSSSSS  UUUUUUUU  PPPPPPPP  EEEEEEEE  RRRRRRRR</p>
&nbsp;</aside><pre><a name="l4821" href="#l4821" title="Link to line 4821">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$CB</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$2B</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$09</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$31</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>
&nbsp;</code></pre><aside><p>TM
TTT  MMM</p>
&nbsp;</aside><pre><a name="l4829" href="#l4829" title="Link to line 4829">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$38</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$F9</span>, <span class="token hexnumber string">$FA</span>
&nbsp;</code></pre><aside><p>MARIO
MMMMMMMMMMMMM  AAAAAAAA  RRRRRRRR  III  OOOOOOOO</p>
&nbsp;</aside><pre><a name="l4833" href="#l4833" title="Link to line 4833">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$46</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$66</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$86</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$13</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$A6</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$C6</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$05</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$07</span>
&nbsp;</code></pre><aside><p>BROS
BBBBBBBB  RRRRRRRR  OOOOOOOO  SSSSSSSS</p>
&nbsp;</aside><pre><a name="l4842" href="#l4842" title="Link to line 4842">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$01</span> <span class="token comment">; BROS</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$91</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$13</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$13</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$B1</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$D1</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$13</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$F1</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$11</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$09</span>
&nbsp;</code></pre><aside><p>2
22222222222222222222222</p>
&nbsp;</aside><pre><a name="l4851" href="#l4851" title="Link to line 4851">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$14</span>, <span class="token hexnumber string">$15</span>, <span class="token hexnumber string">$16</span>, <span class="token hexnumber string">$17</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$2E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$19</span>, <span class="token hexnumber string">$1A</span>, <span class="token hexnumber string">$1B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$4E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$1C</span>, <span class="token hexnumber string">$1D</span>, <span class="token hexnumber string">$1E</span>, <span class="token hexnumber string">$1F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$6E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$8E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$21</span>
&nbsp;</code></pre><aside><p>(C) 1988
(C)  111  999  888  888</p>
&nbsp;</aside><pre><a name="l4859" href="#l4859" title="Link to line 4859">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$F8</span>, <span class="token hexnumber string">$D1</span>, <span class="token hexnumber string">$D9</span>, <span class="token hexnumber string">$D8</span>, <span class="token hexnumber string">$D8</span>  <span class="token comment">; (C) 1988</span>
&nbsp;</code></pre><aside><p>NINTENDO
NNN  III  NNN  TTT  EEE  NNN  DDD  OOO</p>
&nbsp;</aside><pre><a name="l4863" href="#l4863" title="Link to line 4863">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$EF</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$E8</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$CA</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D1</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$A8</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$A2</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$22</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E3</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$22</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$EA</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$F8</span>, <span class="token hexnumber string">$F2</span>, <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

IFDEF PAD_TITLE_SCREEN_PPU_DATA
	<span class="token directive keyword">.pad</span> TitleLayout + <span class="token hexnumber string">$300</span>, <span class="token hexnumber string">$00</span>
ENDIF

TitleBackgroundPalettes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$37</span>, <span class="token hexnumber string">$16</span>, <span class="token hexnumber string">$07</span> <span class="token comment">; Most of screen, outline, etc.</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$31</span>, <span class="token hexnumber string">$0F</span> <span class="token comment">; Unused</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span> <span class="token comment">; Logo</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span> <span class="token comment">; Copyright, Story</span>

TitleSpritePalettes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$28</span>, <span class="token hexnumber string">$0F</span> <span class="token comment">; Unused DDP character palettes</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$25</span>, <span class="token hexnumber string">$0F</span> <span class="token comment">; There are no sprites on the title screen,</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$12</span>, <span class="token hexnumber string">$0F</span> <span class="token comment">; so these are totally unused</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$0F</span>

TitleStoryText_STORY:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$F2</span> <span class="token comment">; STORY</span>

TitleStoryTextPointersHi:
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">01</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">02</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">03</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">04</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">05</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">06</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">07</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">08</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">08</span> <span class="token comment">; For some reason line 8 is referenced twice here, but not used</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">09</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">10</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">11</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">12</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">13</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">14</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">15</span>
	<span class="token directive keyword">.db</span> >TitleStoryText_Line<span class="token decimalnumber string">16</span>

TitleStoryTextPointersLo:
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">01</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">02</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">03</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">04</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">05</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">06</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">07</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">08</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">08</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">09</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">10</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">11</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">12</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">13</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">14</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">15</span>
	<span class="token directive keyword">.db</span> &#x3C;TitleStoryText_Line<span class="token decimalnumber string">16</span>

TitleStoryText_Line<span class="token decimalnumber string">01</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span> <span class="token comment">; WHEN MARIO OPENED A</span>

TitleStoryText_Line<span class="token decimalnumber string">02</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E0</span> <span class="token comment">; DOOR AFTER CLIMBING</span>

TitleStoryText_Line<span class="token decimalnumber string">03</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E0</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$EC</span> <span class="token comment">; A LONG STAIR IN HIS</span>

TitleStoryText_Line<span class="token decimalnumber string">04</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$F7</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$DD</span> <span class="token comment">; DREAM, ANOTHER WORLD</span>

TitleStoryText_Line<span class="token decimalnumber string">05</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E6</span> <span class="token comment">; SPREAD BEFORE HIM</span>

TitleStoryText_Line<span class="token decimalnumber string">06</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$DE</span> <span class="token comment">; AND HE HEARD A VOICE</span>

TitleStoryText_Line<span class="token decimalnumber string">07</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DB</span>, <span class="token hexnumber string">$DE</span> <span class="token comment">; CALL FOR HELP TO BE</span>

TitleStoryText_Line<span class="token decimalnumber string">08</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$E5</span> <span class="token comment">; FREED FROM A SPELL</span>

TitleStoryText_Line<span class="token decimalnumber string">09</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$DF</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E4</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F7</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span> <span class="token comment">; AFTER AWAKENING,</span>

TitleStoryText_Line<span class="token decimalnumber string">10</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span> <span class="token comment">; MARIO WENT TO A</span>

TitleStoryText_Line<span class="token decimalnumber string">11</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EF</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DB</span>, <span class="token hexnumber string">$F2</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$DD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span> <span class="token comment">; CAVE NEARBY AND TO</span>

TitleStoryText_Line<span class="token decimalnumber string">12</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$EE</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$F0</span> <span class="token comment">; HIS SURPRISE HE SAW</span>

TitleStoryText_Line<span class="token decimalnumber string">13</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$F1</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$F2</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$F0</span> <span class="token comment">; EXACTLY WHAT HE SAW</span>

TitleStoryText_Line<span class="token decimalnumber string">14</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$CF</span>, <span class="token hexnumber string">$CF</span>, <span class="token hexnumber string">$CF</span>, <span class="token hexnumber string">$CF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span> <span class="token comment">; IN HIS DREAM....</span>

TitleStoryText_Line<span class="token decimalnumber string">15</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span> <span class="token comment">; (blank)</span>

TitleStoryText_Line<span class="token decimalnumber string">16</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$EE</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DB</span>, <span class="token hexnumber string">$EE</span>, <span class="token hexnumber string">$ED</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$FB</span> <span class="token comment">; PUSH START BUTTON</span>

TitleAttributeData<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$CB</span>, <span class="token hexnumber string">$42</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D1</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D2</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D6</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$33</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D9</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$FF</span>

TitleAttributeData<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$33</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$33</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$EA</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$CC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$EE</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$33</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l5011" href="#l5011" title="Link to line 5011">#</a><code>TitleScreen:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$07</span> <span class="token comment">; Does initialization of RAM.</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">1</span> <span class="token comment">; This clears $200 to $7FF.</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TYA</span>

InitMemoryLoop:
	<span class="token opcode property">STA</span> (byte_RAM_<span class="token decimalnumber string">0</span>), <span class="token register variable">Y</span> <span class="token comment">; I'm not sure if a different method of initializing memory</span>&nbsp;</code></pre><aside><p>would work better in this case.</p>
&nbsp;</aside><pre><a name="l5022" href="#l5022" title="Link to line 5022">#</a><code>	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> InitMemoryLoop

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">BCS</span> InitMemoryLoop <span class="token comment">; Stop initialization after we hit $200.</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span><span class="token register variable">A</span><span class="token decimalnumber string">53</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">TAY</span>

InitMemoryLoop<span class="token decimalnumber string">2</span>:&nbsp;</code></pre><aside><p>Clear $0000-$00FF.
Notably, this leaves the stack area $0100-$01FF uninitialized.
This is not super important, but you might want to do it yourself to
track stack corruption or whatever.</p>
&nbsp;</aside><pre><a name="l5039" href="#l5039" title="Link to line 5039">#</a><code>	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">BNE</span> InitMemoryLoop<span class="token decimalnumber string">2</span>

	<span class="token opcode property">JSR</span> LoadTitleScreenCHRBanks

	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3F</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUADDR
	<span class="token opcode property">STY</span> PPUADDR

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>F:
	<span class="token opcode property">LDA</span> TitleBackgroundPalettes, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUDATA
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span><span class="token register variable">A</span><span class="token decimalnumber string">6</span>F

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Menu
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">8</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span> <span class="token comment">; @TODO</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen

	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">1</span>_Title
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen_TurnOnPPU

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$25</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C7</span>
	<span class="token opcode property">STA</span> ObjectXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$52</span>
	<span class="token opcode property">STA</span> ObjectXHi + <span class="token decimalnumber string">1</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>AB<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen

	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>AF<span class="token decimalnumber string">3</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>ABB:
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>AC<span class="token decimalnumber string">6</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">4</span>D

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5105" href="#l5105" title="Link to line 5105">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>AC<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">4</span>D

	<span class="token opcode property">INC</span> ObjectXHi + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token opcode property">LDA</span> ObjectXHi
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E6</span>
	<span class="token opcode property">STA</span> ObjectXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$54</span>
	<span class="token opcode property">STA</span> ObjectXHi + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">4</span>D

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>AF<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token opcode property">LDA</span> ObjectXHi
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> ObjectXHi
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> ObjectXHi
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$23</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">1</span>B:
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">4</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$17</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">25</span>:
	<span class="token opcode property">LDA</span> TitleAttributeData<span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">25</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$1B</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">3</span>B:
	<span class="token opcode property">LDA</span> TitleAttributeData<span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">3</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">59</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5183" href="#l5183" title="Link to line 5183">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">4</span>D:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">56</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">1</span>F

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5192" href="#l5192" title="Link to line 5192">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">56</span>:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>AB<span class="token decimalnumber string">4</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5197" href="#l5197" title="Link to line 5197">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">59</span>:
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen

	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">63</span>

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5207" href="#l5207" title="Link to line 5207">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">63</span>:
	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">93</span>

	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BA<span class="token decimalnumber string">3</span>

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BMI</span> TitleScreen_WriteSTORYText

	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5222" href="#l5222" title="Link to line 5222">#</a><code>TitleScreen_WriteSTORYText:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0AE</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$05</span> <span class="token comment">; Length of STORY text (5 bytes)</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span> <span class="token comment">; Bytes to copy minus one (5-1=4)</span>

TitleScreen_WriteSTORYTextLoop:
	<span class="token opcode property">LDA</span> TitleStoryText_STORY, <span class="token register variable">Y</span> <span class="token comment">; Copy STORY text to PPU write buffer</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> TitleScreen_WriteSTORYTextLoop

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span> <span class="token comment">; Terminate STORY text in buffer</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">8</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">93</span>:
	<span class="token opcode property">INC</span> ObjectXHi + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">STA</span> ObjectXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> ObjectXHi + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BA<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">DEC</span> ObjectXHi + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BA<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> ObjectXHi + <span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BB<span class="token decimalnumber string">0</span>:
	<span class="token opcode property">LDA</span> ObjectXHi

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BB<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDX</span> ObjectXHi + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">LDA</span> TitleStoryTextPointersHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> TitleStoryTextPointersLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$13</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BCB:
	<span class="token opcode property">LDA</span> (byte_RAM_<span class="token decimalnumber string">3</span>), <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>BCB

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span> + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INC</span> ObjectXHi + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> ObjectXHi
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$40</span>
	<span class="token opcode property">STA</span> ObjectXHi
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">3</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>

	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">0</span>B

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$09</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C7</span>
	<span class="token opcode property">STA</span> ObjectXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$52</span>
	<span class="token opcode property">STA</span> ObjectXHi + <span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi + <span class="token decimalnumber string">2</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>ABB

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5315" href="#l5315" title="Link to line 5315">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">0</span>B:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$12</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>

	<span class="token opcode property">INC</span> ObjectXHi + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$25</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">19</span>:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">1</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">35</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">1</span>F:
	<span class="token opcode property">LDA</span> #Music<span class="token decimalnumber string">2</span>_StopMusic
	<span class="token opcode property">STA</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JSR</span> WaitForNMI_TitleScreen

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">TAY</span>

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">2</span><span class="token register variable">A</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">2</span><span class="token register variable">A</span>

	<span class="token opcode property">JMP</span> HideAllSprites

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5348" href="#l5348" title="Link to line 5348">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">35</span>:
	<span class="token opcode property">LDA</span> ObjectXHi + <span class="token decimalnumber string">4</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">4</span>B

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">4</span>B

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$06</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">4</span>B

	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">4</span>E

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">4</span>B:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>B<span class="token decimalnumber string">59</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l5369" href="#l5369" title="Link to line 5369">#</a><code>loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">4</span>E:
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">8</span> | PPUCtrl_NMIDisabled
	<span class="token opcode property">STA</span> PPUCtrlMirror

loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span>C<span class="token decimalnumber string">52</span>:
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">0</span>_<span class="token decimalnumber string">9</span><span class="token register variable">A</span><span class="token decimalnumber string">53</span>


&nbsp;</code></pre><aside><p>End of function TitleScreen</p>
&nbsp;</aside><pre><a name="l5379" href="#l5379" title="Link to line 5379">#</a><code>&nbsp;</code></pre><aside><p>Unused space in the original ($9C58 - $A1FF)</p>
&nbsp;</aside><pre><a name="l5383" href="#l5383" title="Link to line 5383">#</a><code>unusedSpace <span class="token hexnumber string">$A200</span>, <span class="token hexnumber string">$FF</span>


EndingPPUDataPointers:
	<span class="token directive keyword">.dw</span> PPUBuffer_<span class="token decimalnumber string">301</span>
	<span class="token directive keyword">.dw</span> EndingCorkJarRoom
	<span class="token directive keyword">.dw</span> EndingCelebrationCeilingTextAndPodium
	<span class="token directive keyword">.dw</span> EndingCelebrationFloorAndSubconParade
	<span class="token directive keyword">.dw</span> EndingCelebrationPaletteFade<span class="token decimalnumber string">1</span>
	<span class="token directive keyword">.dw</span> EndingCelebrationPaletteFade<span class="token decimalnumber string">2</span>
	<span class="token directive keyword">.dw</span> EndingCelebrationPaletteFade<span class="token decimalnumber string">3</span>
	<span class="token directive keyword">.dw</span> EndingCelebrationSubconStandStill
	<span class="token directive keyword">.dw</span> EndingCelebrationUnusedText_THE_END
	<span class="token directive keyword">.dw</span> EndingCelebrationText_MARIO
	<span class="token directive keyword">.dw</span> EndingCelebrationText_PRINCESS
	<span class="token directive keyword">.dw</span> EndingCelebrationText_TOAD
	<span class="token directive keyword">.dw</span> EndingCelebrationText_LUIGI


WaitForNMI_Ending_TurnOffPPU:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> WaitForNMI_Ending_SetPPUMaskMirror

WaitForNMI_Ending_TurnOnPPU:
	<span class="token opcode property">LDA</span> #PPUMask_ShowLeft<span class="token decimalnumber string">8</span>Pixels_BG | PPUMask_ShowLeft<span class="token decimalnumber string">8</span>Pixels_SPR | PPUMask_ShowBackground | PPUMask_ShowSprites

WaitForNMI_Ending_SetPPUMaskMirror:
	<span class="token opcode property">STA</span> PPUMaskMirror

WaitForNMI_Ending:
	<span class="token opcode property">LDA</span> ScreenUpdateIndex
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> EndingPPUDataPointers, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer
	<span class="token opcode property">LDA</span> EndingPPUDataPointers + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> RAM_PPUDataBufferPointer + <span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> NMIWaitFlag
WaitForNMI_EndingLoop:
	<span class="token opcode property">LDA</span> NMIWaitFlag
	<span class="token opcode property">BPL</span> WaitForNMI_EndingLoop

	<span class="token opcode property">RTS</span>


EndingCorkJarRoom:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$9E</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$9E</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$8E</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$8E</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$64</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$84</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A4</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$1C</span>, <span class="token hexnumber string">$8E</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$1D</span>, <span class="token hexnumber string">$8E</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1E</span>, <span class="token hexnumber string">$9E</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$1F</span>, <span class="token hexnumber string">$9E</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$C6</span>, <span class="token hexnumber string">$C4</span>, <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$C7</span>, <span class="token hexnumber string">$C4</span>, <span class="token hexnumber string">$FC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$C8</span>, <span class="token hexnumber string">$84</span>, <span class="token hexnumber string">$AD</span>, <span class="token hexnumber string">$AC</span>, <span class="token hexnumber string">$AC</span>, <span class="token hexnumber string">$AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$83</span>, <span class="token hexnumber string">$AD</span>, <span class="token hexnumber string">$AC</span>, <span class="token hexnumber string">$AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$82</span>, <span class="token hexnumber string">$AD</span>, <span class="token hexnumber string">$AC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$2B</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$AD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$90</span>, <span class="token hexnumber string">$84</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$89</span>, <span class="token hexnumber string">$89</span>, <span class="token hexnumber string">$8C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$91</span>, <span class="token hexnumber string">$84</span>, <span class="token hexnumber string">$8A</span>, <span class="token hexnumber string">$8B</span>, <span class="token hexnumber string">$8B</span>, <span class="token hexnumber string">$8D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$2E</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$C0</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$E0</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$11</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$A4</span>, <span class="token hexnumber string">$A5</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationUnusedText_THANK_YOU:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$E4</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$F2</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EE</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

CorkRoomSpriteStartX:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; player</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; cork</span>

CorkRoomSpriteStartY:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B0</span> <span class="token comment">; player</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$95</span> <span class="token comment">; cork</span>

CorkRoomSpriteTargetX:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span> <span class="token comment">; player</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F4</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F8</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; cork</span>

CorkRoomSpriteTargetY:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; player</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C4</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C4</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A8</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A8</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; cork</span>

CorkRoomSpriteDelay:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; player</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$A0</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$60</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; cork</span>

CorkRoomSpriteAttributes:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; player</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span> <span class="token comment">; cork</span>


FreeSubconsScene:
	<span class="token opcode property">JSR</span> WaitForNMI_Ending_TurnOffPPU
	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Menu
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">LDA</span> #EndingUpdateBuffer_JarRoom
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$60</span>
	<span class="token opcode property">STA</span> FreeSubconsTimer
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> PlayerDirection
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> PlayerState <span class="token comment">; A=$00</span>
	<span class="token opcode property">STA</span> FreeSubconsCorkCounter
	<span class="token opcode property">STA</span> CrouchJumpTimer
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> SpriteFlickerSlot

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$09</span>
FreeSubconsScene_SpriteLoop:
	<span class="token opcode property">LDA</span> CorkRoomSpriteStartX, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteStartY, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteTargetX, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteTargetY, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteDelay, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyTimer - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAttributes - <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> FreeSubconsScene_SpriteLoop

FreeSubconsScene_JumpingLoop:
	<span class="token opcode property">JSR</span> WaitForNMI_Ending_TurnOnPPU

	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">JSR</span> HideAllSprites

	<span class="token opcode property">JSR</span> FreeSubconsScene_Player

	<span class="token opcode property">JSR</span> FreeSubconsScene_Cork

	<span class="token opcode property">LDA</span> FreeSubconsTimer
	<span class="token opcode property">BEQ</span> FreeSubconsScene_Exit

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_JumpingLoop

	<span class="token opcode property">DEC</span> FreeSubconsTimer
	<span class="token opcode property">LDA</span> FreeSubconsTimer
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$25</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_JumpingLoop

	<span class="token opcode property">LDY</span> #Music<span class="token decimalnumber string">2</span>_EndingAndCast
	<span class="token opcode property">STY</span> MusicQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_JumpingLoop

FreeSubconsScene_Exit:
	<span class="token opcode property">JSR</span> EndingSceneTransition

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">BEQ</span> FreeSubconsScene_JumpingLoop

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Moves the player, driving the main action in the scene</p>
&nbsp;</aside><pre><a name="l5634" href="#l5634" title="Link to line 5634">#</a><code>FreeSubconsScene_Player:
	<span class="token opcode property">LDA</span> PlayerWalkFrameCounter
	<span class="token opcode property">BEQ</span> FreeSubconsScene_Player_AfterWalkFrameCounter

	<span class="token opcode property">DEC</span> PlayerWalkFrameCounter

FreeSubconsScene_Player_AfterWalkFrameCounter:
	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BEQ</span> FreeSubconsScene_Player_AfterStateTimer

	<span class="token opcode property">DEC</span> PlayerStateTimer

FreeSubconsScene_Player_AfterStateTimer:
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">STA</span> PlayerScreenX
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">STA</span> PlayerScreenYLo
	<span class="token opcode property">JSR</span> RenderPlayer

	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">JSR</span> JumpToTableAfterJump


	<span class="token directive keyword">.dw</span> FreeSubconsScene_Phase<span class="token decimalnumber string">1</span>
	<span class="token directive keyword">.dw</span> FreeSubconsScene_Phase<span class="token decimalnumber string">2</span>
	<span class="token directive keyword">.dw</span> FreeSubconsScene_Phase<span class="token decimalnumber string">3</span>
	<span class="token directive keyword">.dw</span> FreeSubconsScene_Phase<span class="token decimalnumber string">4</span>
	<span class="token directive keyword">.dw</span> FreeSubconsScene_Phase<span class="token decimalnumber string">5</span>

&nbsp;</code></pre><aside><p>Walking in and first jump</p>
&nbsp;</aside><pre><a name="l5665" href="#l5665" title="Link to line 5665">#</a><code>FreeSubconsScene_Phase<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">JSR</span> PlayerWalkJumpAnim

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsX
&nbsp;</code></pre><aside><p>check x-position to trigger first jump</p>
&nbsp;</aside><pre><a name="l5671" href="#l5671" title="Link to line 5671">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$3E</span>
	<span class="token opcode property">BCC</span> FreeSubconsScene_PhaseExit

	<span class="token opcode property">INC</span> PlayerState
	<span class="token opcode property">INC</span> PlayerInAir
	<span class="token opcode property">LDA</span> #SpriteAnimation_Jumping
	<span class="token opcode property">STA</span> PlayerAnimationFrame

FreeSubconsScene_Jump:
	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">2</span>_Jump
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">2</span>
	<span class="token opcode property">JMP</span> PlayerStartJump

&nbsp;</code></pre><aside><p>Physics and second jump</p>
&nbsp;</aside><pre><a name="l5687" href="#l5687" title="Link to line 5687">#</a><code>FreeSubconsScene_Phase<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">JSR</span> PlayerWalkJumpAnim

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsX

	<span class="token opcode property">JSR</span> ApplyCorkRoomGravity

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsY

	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BMI</span> FreeSubconsScene_PhaseExit
&nbsp;</code></pre><aside><p>check y-position to trigger second jump</p>
&nbsp;</aside><pre><a name="l5700" href="#l5700" title="Link to line 5700">#</a><code>	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">BCC</span> FreeSubconsScene_Phase<span class="token decimalnumber string">2</span>_NoJump
&nbsp;</code></pre><aside><p>set x-velocity to land second jump on the jar</p>
&nbsp;</aside><pre><a name="l5705" href="#l5705" title="Link to line 5705">#</a><code>	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">JMP</span> FreeSubconsScene_Jump

FreeSubconsScene_Phase<span class="token decimalnumber string">2</span>_NoJump:&nbsp;</code></pre><aside><p>check the top of the jar</p>
&nbsp;</aside><pre><a name="l5711" href="#l5711" title="Link to line 5711">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$75</span>
	<span class="token opcode property">BCC</span> FreeSubconsScene_PhaseExit
&nbsp;</code></pre><aside><p>check x-position for jar</p>
&nbsp;</aside><pre><a name="l5715" href="#l5715" title="Link to line 5715">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$70</span>
	<span class="token opcode property">BCC</span> FreeSubconsScene_PhaseExit

	<span class="token opcode property">INC</span> PlayerState
	<span class="token opcode property">DEC</span> PlayerInAir

FreeSubconsScene_PhaseExit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Start pulling the cork</p>
&nbsp;</aside><pre><a name="l5727" href="#l5727" title="Link to line 5727">#</a><code>FreeSubconsScene_Phase<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">JSR</span> PlayerWalkJumpAnim

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsX
&nbsp;</code></pre><aside><p>check x-position for jar</p>
&nbsp;</aside><pre><a name="l5733" href="#l5733" title="Link to line 5733">#</a><code>	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BCC</span> FreeSubconsScene_PhaseExit
&nbsp;</code></pre><aside><p>pull the cork</p>
&nbsp;</aside><pre><a name="l5738" href="#l5738" title="Link to line 5738">#</a><code>	<span class="token opcode property">INC</span> PlayerState
	<span class="token opcode property">INC</span> HoldingItem
	<span class="token opcode property">LDA</span> #SpriteAnimation_Pulling
	<span class="token opcode property">STA</span> PlayerAnimationFrame
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STA</span> FreeSubconsCorkCounter
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$28</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">RTS</span>


PullCorkFrameDurations:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$14</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0A</span>

PullCorkOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1E</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1F</span>

&nbsp;</code></pre><aside><p>Pull the cork out</p>
&nbsp;</aside><pre><a name="l5764" href="#l5764" title="Link to line 5764">#</a><code>FreeSubconsScene_Phase<span class="token decimalnumber string">4</span>:&nbsp;</code></pre><aside><p>use PlayerStateTimer to hold this frame</p>
&nbsp;</aside><pre><a name="l5766" href="#l5766" title="Link to line 5766">#</a><code>	<span class="token opcode property">LDA</span> PlayerStateTimer
	<span class="token opcode property">BNE</span> FreeSubconsScene_Phase<span class="token decimalnumber string">4</span>_Exit
&nbsp;</code></pre><aside><p>next FreeSubconsCorkCounter to move cork</p>
&nbsp;</aside><pre><a name="l5770" href="#l5770" title="Link to line 5770">#</a><code>	<span class="token opcode property">DEC</span> FreeSubconsCorkCounter
	<span class="token opcode property">BNE</span> FreeSubconsScene_Phase<span class="token decimalnumber string">4</span>_NextCorkFrame
&nbsp;</code></pre><aside><p>uncorked! start jumping</p>
&nbsp;</aside><pre><a name="l5774" href="#l5774" title="Link to line 5774">#</a><code>	<span class="token opcode property">INC</span> PlayerState
	<span class="token opcode property">INC</span> PlayerInAir

	<span class="token opcode property">LDA</span> #SpriteAnimation_Jumping
	<span class="token opcode property">STA</span> PlayerAnimationFrame

	<span class="token opcode property">LDA</span> #DPCM_ItemPull
	<span class="token opcode property">STA</span> DPCMQueue

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> ObjectYVelocity + <span class="token decimalnumber string">8</span>
	<span class="token opcode property">RTS</span>

FreeSubconsScene_Phase<span class="token decimalnumber string">4</span>_NextCorkFrame:
	<span class="token opcode property">LDY</span> FreeSubconsCorkCounter
	<span class="token opcode property">LDA</span> PullCorkFrameDurations - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> PlayerStateTimer

FreeSubconsScene_Phase<span class="token decimalnumber string">4</span>_Exit:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Free Subcons and jump repeatedly</p>
&nbsp;</aside><pre><a name="l5797" href="#l5797" title="Link to line 5797">#</a><code>FreeSubconsScene_Phase<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">JSR</span> FreeSubconsScene_Subcons

	<span class="token opcode property">JSR</span> ApplyCorkRoomGravity

	<span class="token opcode property">JSR</span> PlayerWalkJumpAnim

	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsY

	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BMI</span> FreeSubconsScene_Phase<span class="token decimalnumber string">5</span>_Exit
&nbsp;</code></pre><aside><p>jump when we're on the jar</p>
&nbsp;</aside><pre><a name="l5810" href="#l5810" title="Link to line 5810">#</a><code>	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BCC</span> FreeSubconsScene_Phase<span class="token decimalnumber string">5</span>_Exit

	<span class="token opcode property">JMP</span> PlayerStartJump

FreeSubconsScene_Phase<span class="token decimalnumber string">5</span>_Exit:
	<span class="token opcode property">RTS</span>


CorkRoomCharacterGravity:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; Mario</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; Princess</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$04</span> <span class="token comment">; Toad</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; Luigi</span>


ApplyCorkRoomGravity:
	<span class="token opcode property">LDY</span> CurrentCharacter
	<span class="token opcode property">LDA</span> CorkRoomCharacterGravity, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerYVelocity
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Spits out Subcons and makes them flap their little wings</p>
&nbsp;</aside><pre><a name="l5839" href="#l5839" title="Link to line 5839">#</a><code>FreeSubconsScene_Subcons:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$07</span>

FreeSubconsScene_Subcons_Loop:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">LDA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BEQ</span> FreeSubconsScene_Subcons_Movement

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_Subcons_Next

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_ThrowItem
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_Subcons_Next

FreeSubconsScene_Subcons_Movement:
	<span class="token opcode property">JSR</span> ApplyObjectMovement_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BMI</span> FreeSubconsScene_Subcons_Render

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F9</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteAttributes + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">EOR</span> #ObjAttrib_Palette<span class="token decimalnumber string">0</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>

FreeSubconsScene_Subcons_Render:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">JSR</span> FreeSubconsScene_Render

	<span class="token opcode property">INC</span> EnemyTimer, <span class="token register variable">X</span>

FreeSubconsScene_Subcons_Next:
	<span class="token opcode property">DEC</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> FreeSubconsScene_Subcons_Loop

	<span class="token opcode property">RTS</span>



FreeSubconsScene_Cork:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">STA</span> byte_RAM_F
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">JSR</span> FreeSubconsScene_Render

	<span class="token opcode property">LDY</span> FreeSubconsCorkCounter
	<span class="token opcode property">BNE</span> FreeSubconsScene_Cork_Pull

	<span class="token opcode property">LDA</span> ObjectYLo + <span class="token decimalnumber string">8</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BCS</span> FreeSubconsScene_Cork_Exit

	<span class="token opcode property">JMP</span> ApplyObjectPhysicsY_Bank<span class="token decimalnumber string">1</span>

FreeSubconsScene_Cork_Pull:
	<span class="token opcode property">LDA</span> PullCorkOffsets - <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> PlayerYLo
	<span class="token opcode property">STA</span> ObjectYLo + <span class="token decimalnumber string">8</span>

FreeSubconsScene_Cork_Exit:
	<span class="token opcode property">RTS</span>


CorkRoomSpriteTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span> <span class="token comment">; subcon left, wings up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EA</span> <span class="token comment">; subcon right, wings up</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EC</span> <span class="token comment">; subcon left, wings down</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$EE</span> <span class="token comment">; subcon right, wings down</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span> <span class="token comment">; cork left</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$63</span> <span class="token comment">; cork right</span>

CorkRoomSpriteOAMAddress:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$30</span> <span class="token comment">; subcon 8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$38</span> <span class="token comment">; subcon 7</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$40</span> <span class="token comment">; subcon 6</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$48</span> <span class="token comment">; subcon 5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$50</span> <span class="token comment">; subcon 4</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$58</span> <span class="token comment">; subcon 3</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$60</span> <span class="token comment">; subcon 2</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$68</span> <span class="token comment">; subcon 1</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; cork</span>


FreeSubconsScene_Render:
	<span class="token opcode property">LDY</span> CorkRoomSpriteOAMAddress, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">4</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">7</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">6</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_F
	<span class="token opcode property">AND</span> #ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_Render_Flipped

	<span class="token opcode property">LDA</span> CorkRoomSpriteTiles, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteTiles + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> FreeSubconsScene_Render_Exit

FreeSubconsScene_Render_Flipped:
	<span class="token opcode property">LDA</span> CorkRoomSpriteTiles + <span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> CorkRoomSpriteTiles, <span class="token register variable">X</span>

FreeSubconsScene_Render_Exit:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">5</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


EndingCelebrationCeilingTextAndPodium:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$60</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$88</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$5A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$89</span>, <span class="token hexnumber string">$4E</span>, <span class="token hexnumber string">$9A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$97</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$5C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$A8</span>, <span class="token hexnumber string">$C3</span>, <span class="token hexnumber string">$9B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$B7</span>, <span class="token hexnumber string">$C3</span>, <span class="token hexnumber string">$9B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$5B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$4E</span>, <span class="token hexnumber string">$9A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$17</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$5D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$AB</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$DB</span>, <span class="token hexnumber string">$EE</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$EB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$E3</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$42</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$46</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$F9</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$42</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$46</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$24</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$49</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$25</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$4A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$26</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$4B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$4C</span>, <span class="token hexnumber string">$4D</span>, <span class="token hexnumber string">$4E</span>, <span class="token hexnumber string">$4F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$41</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$45</span>, <span class="token hexnumber string">$47</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$19</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$41</span>, <span class="token hexnumber string">$43</span>, <span class="token hexnumber string">$45</span>, <span class="token hexnumber string">$47</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$39</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$48</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$3A</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$49</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$3B</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$4A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$3C</span>, <span class="token hexnumber string">$C9</span>, <span class="token hexnumber string">$4B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$59</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$4C</span>, <span class="token hexnumber string">$4D</span>, <span class="token hexnumber string">$4E</span>, <span class="token hexnumber string">$4F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$CA</span>, <span class="token hexnumber string">$4C</span>, <span class="token hexnumber string">$54</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$EA</span>, <span class="token hexnumber string">$4C</span>, <span class="token hexnumber string">$55</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$50</span>, <span class="token hexnumber string">$52</span>, <span class="token hexnumber string">$50</span>, <span class="token hexnumber string">$52</span>, <span class="token hexnumber string">$50</span>, <span class="token hexnumber string">$52</span>, <span class="token hexnumber string">$50</span>, <span class="token hexnumber string">$52</span>, <span class="token hexnumber string">$50</span>, <span class="token hexnumber string">$52</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$2B</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$53</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$53</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$53</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$53</span>, <span class="token hexnumber string">$51</span>, <span class="token hexnumber string">$53</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$4C</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$3A</span>, <span class="token hexnumber string">$3B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$6C</span>, <span class="token hexnumber string">$C5</span>, <span class="token hexnumber string">$3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$6D</span>, <span class="token hexnumber string">$C5</span>, <span class="token hexnumber string">$3D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$52</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$3A</span>, <span class="token hexnumber string">$3B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$C5</span>, <span class="token hexnumber string">$3C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$C5</span>, <span class="token hexnumber string">$3D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationFloorAndSubconParade:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0A</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$0C</span>, <span class="token hexnumber string">$0E</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$02</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$04</span>, <span class="token hexnumber string">$06</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$0A</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$07</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$0B</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0D</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$03</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$07</span>, <span class="token hexnumber string">$09</span>, <span class="token hexnumber string">$0B</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$76</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>, <span class="token hexnumber string">$75</span>, <span class="token hexnumber string">$77</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$60</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$40</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$60</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$A0</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>, <span class="token hexnumber string">$81</span>, <span class="token hexnumber string">$80</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$C0</span>, <span class="token hexnumber string">$48</span>, <span class="token hexnumber string">$AA</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$C8</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$15</span>, <span class="token hexnumber string">$05</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$15</span>, <span class="token hexnumber string">$45</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$D0</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$31</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$44</span>, <span class="token hexnumber string">$33</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$A6</span>, <span class="token hexnumber string">$A5</span>, <span class="token hexnumber string">$A5</span>, <span class="token hexnumber string">$A6</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$44</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F3</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$59</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$96</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$74</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FF</span>, <span class="token hexnumber string">$55</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$AA</span>, <span class="token hexnumber string">$95</span>, <span class="token hexnumber string">$55</span>, <span class="token hexnumber string">$55</span>

	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$48</span>, <span class="token hexnumber string">$A5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$F8</span>, <span class="token hexnumber string">$48</span>, <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$F0</span>, <span class="token hexnumber string">$48</span>, <span class="token hexnumber string">$A5</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$F8</span>, <span class="token hexnumber string">$48</span>, <span class="token hexnumber string">$0A</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationSubconStandStill:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>, <span class="token hexnumber string">$70</span>, <span class="token hexnumber string">$72</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>, <span class="token hexnumber string">$71</span>, <span class="token hexnumber string">$73</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationUnusedText_THE_END:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$AC</span>, <span class="token hexnumber string">$07</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E1</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$DD</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationPaletteFade<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$16</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$28</span>, <span class="token hexnumber string">$18</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$01</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$16</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$37</span>, <span class="token hexnumber string">$2A</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$27</span>, <span class="token hexnumber string">$30</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span>, <span class="token hexnumber string">$36</span>, <span class="token hexnumber string">$25</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationPaletteFade<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$10</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationPaletteFade<span class="token decimalnumber string">3</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$3F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$00</span>, <span class="token hexnumber string">$0F</span>, <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingScreenUpdateIndex:
	<span class="token directive keyword">.db</span> EndingUpdateBuffer_PaletteFade<span class="token decimalnumber string">1</span>
	<span class="token directive keyword">.db</span> EndingUpdateBuffer_PaletteFade<span class="token decimalnumber string">2</span> <span class="token comment">; 1 ; @TODO This seems wrong, somehow</span>
	<span class="token directive keyword">.db</span> EndingUpdateBuffer_PaletteFade<span class="token decimalnumber string">3</span> <span class="token comment">; 2</span>

ContributorSpriteZeroOAMData:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8C</span>, <span class="token hexnumber string">$FC</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$94</span>

ContributorCharacterOAMData:&nbsp;</code></pre><aside><p>Mario</p>
&nbsp;</aside><pre><a name="l6140" href="#l6140" title="Link to line 6140">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$61</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$63</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$58</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$65</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$50</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$67</span>, <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$58</span>&nbsp;</code></pre><aside><p>Luigi</p>
&nbsp;</aside><pre><a name="l6145" href="#l6145" title="Link to line 6145">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$69</span>, <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$6B</span>, <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$70</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$6D</span>, <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$68</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$6F</span>, <span class="token hexnumber string">$21</span>, <span class="token hexnumber string">$70</span>&nbsp;</code></pre><aside><p>Toad</p>
&nbsp;</aside><pre><a name="l6150" href="#l6150" title="Link to line 6150">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$83</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$83</span>, <span class="token hexnumber string">$62</span>, <span class="token hexnumber string">$90</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$87</span>, <span class="token hexnumber string">$22</span>, <span class="token hexnumber string">$88</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$87</span>, <span class="token hexnumber string">$62</span>, <span class="token hexnumber string">$90</span>&nbsp;</code></pre><aside><p>Princess</p>
&nbsp;</aside><pre><a name="l6155" href="#l6155" title="Link to line 6155">#</a><code>	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$8B</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$4F</span>, <span class="token hexnumber string">$8D</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$8F</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$5F</span>, <span class="token hexnumber string">$91</span>, <span class="token hexnumber string">$23</span>, <span class="token hexnumber string">$A8</span>

&nbsp;</code></pre><aside><p>Shows the part of the ending where the Subcons carry Wart to an uncertain
fate while the characters stand and wave</p>
&nbsp;</aside><pre><a name="l6165" href="#l6165" title="Link to line 6165">#</a><code>ContributorScene:
	<span class="token opcode property">JSR</span> WaitForNMI_Ending_TurnOffPPU

	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">JSR</span> ClearNametablesAndSprites

	<span class="token opcode property">LDA</span> #Stack<span class="token decimalnumber string">100</span>_Menu
	<span class="token opcode property">STA</span> StackArea
	<span class="token opcode property">JSR</span> EnableNMI_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">LDA</span> #EndingUpdateBuffer_CeilingTextAndPodium
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">LDA</span> #EndingUpdateBuffer_FloorAndSubconParade
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">JSR</span> Ending_GetContributor

	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">LDA</span> #HMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
ContributorScene_SpriteZeroLoop:
	<span class="token opcode property">LDA</span> ContributorSpriteZeroOAMData, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> ContributorScene_SpriteZeroLoop

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$3F</span>
ContributorScene_CharacterLoop:
	<span class="token opcode property">LDA</span> ContributorCharacterOAMData, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$10</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> ContributorScene_CharacterLoop

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">STA</span> PlayerXHi
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> IsHorizontalLevel

loc_BANK<span class="token decimalnumber string">1</span>_AAD<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">JSR</span> WaitForNMI_Ending_TurnOnPPU

	<span class="token opcode property">INC</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">JSR</span> ContributorTicker

	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">1</span>_ABCC

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">20</span>

loc_BANK<span class="token decimalnumber string">1</span>_AAE<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">BIT</span> PPUSTATUS
	<span class="token opcode property">BVS</span> loc_BANK<span class="token decimalnumber string">1</span>_AAE<span class="token decimalnumber string">7</span>

loc_BANK<span class="token decimalnumber string">1</span>_AAEC:
	<span class="token opcode property">BIT</span> PPUSTATUS
	<span class="token opcode property">BVC</span> loc_BANK<span class="token decimalnumber string">1</span>_AAEC

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">1</span>_AAF<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">1</span>_AAF<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AAF<span class="token decimalnumber string">5</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AAF<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> byte_RAM_F<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">1</span>D

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> byte_RAM_F<span class="token decimalnumber string">2</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$30</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">2</span>

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">1</span>D:
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">1</span>_AAD<span class="token decimalnumber string">4</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6276" href="#l6276" title="Link to line 6276">#</a><code>loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">20</span>:
	<span class="token opcode property">LDA</span> #VMirror
	<span class="token opcode property">JSR</span> ChangeNametableMirroring

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">2</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">LDA</span> #EndingUpdateBuffer_SubconStandStill
	<span class="token opcode property">STA</span> ScreenUpdateIndex

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">32</span>:
	<span class="token opcode property">JSR</span> WaitForNMI_Ending

	<span class="token opcode property">JSR</span> EnableNMI_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">INC</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">JSR</span> ContributorTicker

	<span class="token opcode property">JSR</span> ContributorCharacterAnimation

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">40</span>:
	<span class="token opcode property">BIT</span> PPUSTATUS
	<span class="token opcode property">BVS</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">40</span>

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">45</span>:
	<span class="token opcode property">BIT</span> PPUSTATUS
	<span class="token opcode property">BVC</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">45</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$02</span>

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">4</span>C:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">4</span>E:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">4</span>E

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">4</span>C

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$B0</span>
	<span class="token opcode property">ORA</span> byte_RAM_F<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">LDA</span> PPUSTATUS
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUSCROLL
	<span class="token opcode property">LDA</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$14</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">80</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">3</span>
	<span class="token opcode property">LDA</span> byte_RAM_F<span class="token decimalnumber string">2</span>
	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> byte_RAM_F<span class="token decimalnumber string">2</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">7</span>

loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">80</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">7</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$29</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">32</span>

	<span class="token opcode property">JSR</span> EndingSceneTransition

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_AB<span class="token decimalnumber string">32</span>

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Advances to the next scene and does the palette transition</p>
&nbsp;</aside><pre><a name="l6358" href="#l6358" title="Link to line 6358">#</a><code>EndingSceneTransition:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> EndingSceneTransition_Exit

	<span class="token opcode property">INC</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BCS</span> EndingSceneTransition_Next

	<span class="token opcode property">LDA</span> EndingScreenUpdateIndex, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">RTS</span>

EndingSceneTransition_Next:
	<span class="token opcode property">INC</span> byte_RAM_E<span class="token decimalnumber string">6</span>

EndingSceneTransition_Exit:
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6380" href="#l6380" title="Link to line 6380">#</a><code>loc_BANK<span class="token decimalnumber string">1</span>_ABA<span class="token decimalnumber string">7</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">BNE</span> EndingSceneTransition_Exit

	<span class="token opcode property">DEC</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDY</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">LDA</span> EndingScreenUpdateIndex, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ScreenUpdateIndex
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">BNE</span> EndingSceneTransition_Exit

	<span class="token opcode property">INC</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">RTS</span>


EnableNMI_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIEnabled
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">RTS</span>


DisableNMI_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> #PPUCtrl_Base<span class="token decimalnumber string">2000</span> | PPUCtrl_WriteHorizontal | PPUCtrl_Sprite<span class="token decimalnumber string">0000</span> | PPUCtrl_Background<span class="token decimalnumber string">1000</span> | PPUCtrl_SpriteSize<span class="token decimalnumber string">8</span><span class="token register variable">x</span><span class="token decimalnumber string">16</span> | PPUCtrl_NMIDisabled
	<span class="token opcode property">STA</span> PPUCTRL
	<span class="token opcode property">STA</span> PPUCtrlMirror
	<span class="token opcode property">RTS</span>



loc_BANK<span class="token decimalnumber string">1</span>_ABCC:
	<span class="token opcode property">JSR</span> ContributorCharacterAnimation

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">JSR</span> JumpToTableAfterJump

	<span class="token directive keyword">.dw</span> loc_BANK<span class="token decimalnumber string">1</span>_ABA<span class="token decimalnumber string">7</span>
	<span class="token directive keyword">.dw</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">0</span><span class="token register variable">A</span>
	<span class="token directive keyword">.dw</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">87</span>


byte_BANK<span class="token decimalnumber string">1</span>_ABDA:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$B8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C8</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>

byte_BANK<span class="token decimalnumber string">1</span>_ABE<span class="token decimalnumber string">0</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$C0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$F0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$D0</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$E8</span>

EndingWartTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$11</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$13</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$19</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$21</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$23</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$15</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$17</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$25</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$27</span>

byte_BANK<span class="token decimalnumber string">1</span>_ABF<span class="token decimalnumber string">2</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$28</span>

byte_BANK<span class="token decimalnumber string">1</span>_ABFE:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$10</span>


&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6483" href="#l6483" title="Link to line 6483">#</a><code>loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">0</span><span class="token register variable">A</span>:
	<span class="token opcode property">JSR</span> ApplyPlayerPhysicsX

	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">37</span>

	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">37</span>

	INC_abs byte_RAM_E<span class="token decimalnumber string">6</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$05</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">22</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$A8</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">28</span>:
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">1</span>_ABDA, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> byte_BANK<span class="token decimalnumber string">1</span>_ABE<span class="token decimalnumber string">0</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">22</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">37</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$A0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$38</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">40</span>

	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">40</span>:
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">45</span>

	<span class="token opcode property">DEY</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">45</span>:
	<span class="token opcode property">STY</span> PlayerYLo
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$0B</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$70</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">4</span>B:
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">1</span>_ABFE, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> EndingWartTiles, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">1</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">2</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_BANK<span class="token decimalnumber string">1</span>_ABF<span class="token decimalnumber string">2</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token decimalnumber string">3</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> PlayerXHi

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">6</span><span class="token register variable">A</span>:
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">73</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> SpriteDMAArea, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">73</span>:
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">4</span>B

	<span class="token opcode property">RTS</span>


ZonkTiles:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$39</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$35</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$37</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$35</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$37</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$39</span>

byte_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">81</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$06</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$09</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>


loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">87</span>:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_ACA<span class="token decimalnumber string">4</span>

loc_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">8</span>B:
	<span class="token opcode property">STA</span> ObjectXSubpixel + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> ObjectYSubpixel + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> ObjectXLo + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$6F</span>
	<span class="token opcode property">STA</span> ObjectYLo + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$E6</span>
	<span class="token opcode property">STA</span> ObjectXVelocity + <span class="token decimalnumber string">6</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0DA</span>
	<span class="token opcode property">STA</span> ObjectYVelocity + <span class="token decimalnumber string">6</span>

	INC_abs byte_RAM_E<span class="token decimalnumber string">6</span>


loc_BANK<span class="token decimalnumber string">1</span>_ACA<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$05</span>

loc_BANK<span class="token decimalnumber string">1</span>_ACA<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">STX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">1</span>_ACC<span class="token decimalnumber string">1</span>

	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">CMP</span> byte_BANK<span class="token decimalnumber string">1</span>_AC<span class="token decimalnumber string">81</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_ACC<span class="token decimalnumber string">3</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$A8</span>

loc_BANK<span class="token decimalnumber string">1</span>_ACC<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">STY</span> ObjectYLo, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">1</span>_ACC<span class="token decimalnumber string">3</span>:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$80</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">1</span>_ACD<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_ACD<span class="token decimalnumber string">6</span>

loc_BANK<span class="token decimalnumber string">1</span>_ACD<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$73</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">1</span>_ACD<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$70</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ZonkTiles, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$71</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$72</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">1</span>_ACA<span class="token decimalnumber string">6</span>

	<span class="token opcode property">RTS</span>


ContributorAnimationTiles:
ContributorAnimationTiles_Mario:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$61</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$63</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$93</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$65</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$65</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$67</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$67</span>
ContributorAnimationTiles_Luigi:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$69</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$69</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$95</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$97</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$6F</span>
ContributorAnimationTiles_Toad:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$83</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$85</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$83</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$85</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$87</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$89</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$87</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$89</span>
ContributorAnimationTiles_Princess:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8B</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$99</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8D</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$8F</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$91</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$91</span>

ContributorAnimationTilesOffset:
	<span class="token directive keyword">.db</span> (ContributorAnimationTiles_Mario - ContributorAnimationTiles + <span class="token decimalnumber string">6</span>)
	<span class="token directive keyword">.db</span> (ContributorAnimationTiles_Luigi - ContributorAnimationTiles + <span class="token decimalnumber string">6</span>)
	<span class="token directive keyword">.db</span> (ContributorAnimationTiles_Toad - ContributorAnimationTiles + <span class="token decimalnumber string">6</span>)
	<span class="token directive keyword">.db</span> (ContributorAnimationTiles_Princess - ContributorAnimationTiles + <span class="token decimalnumber string">6</span>)


ContributorCharacterAnimation:
	<span class="token opcode property">INC</span> PlayerWalkFrame
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> PlayerWalkFrame
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$3C</span>

ContributorCharacterAnimation_OuterLoop:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> ContributorAnimationTilesOffset, <span class="token register variable">X</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">INC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> ContributorCharacterAnimation_Render

	<span class="token opcode property">INX</span>

ContributorCharacterAnimation_Render:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
ContributorCharacterAnimation_InnerLoop:
	<span class="token opcode property">LDA</span> ContributorAnimationTiles, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> SpriteDMAArea + <span class="token hexnumber string">$11</span>, <span class="token register variable">Y</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">BPL</span> ContributorCharacterAnimation_InnerLoop

	<span class="token opcode property">DEC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">BPL</span> ContributorCharacterAnimation_OuterLoop

	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Calculates the list of top contributors</p>
&nbsp;</aside><pre><a name="l6743" href="#l6743" title="Link to line 6743">#</a><code>Ending_GetContributor:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> MaxLevelsCompleted

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
Ending_GetContributor_Loop:
	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> MaxLevelsCompleted
	<span class="token opcode property">BCC</span> Ending_GetContributor_Next

	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> MaxLevelsCompleted

Ending_GetContributor_Next:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> Ending_GetContributor_Loop

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
Ending_GetContributor_Loop<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> MaxLevelsCompleted
	<span class="token opcode property">BNE</span> Ending_GetContributor_Next<span class="token decimalnumber string">2</span>

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">STA</span> Contributors, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>

Ending_GetContributor_Next<span class="token decimalnumber string">2</span>:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> Ending_GetContributor_Loop<span class="token decimalnumber string">2</span>

	<span class="token opcode property">DEX</span>
	<span class="token opcode property">STX</span> NumContributors
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$21</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$2A</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">43</span>

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$03</span>
	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">43</span>

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$02</span>
	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">43</span>

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FB</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDA</span> CharacterLevelsCompleted, <span class="token register variable">Y</span>
	<span class="token opcode property">JSR</span> sub_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">43</span>

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PPUBuffer_<span class="token decimalnumber string">301</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">STA</span> ContributorTimer
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l6847" href="#l6847" title="Link to line 6847">#</a><code>ContributorTicker:
	<span class="token opcode property">DEC</span> ContributorTimer
	<span class="token opcode property">BPL</span> ContributorTicker_Exit

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$3C</span>
	<span class="token opcode property">STA</span> ContributorTimer
	<span class="token opcode property">LDY</span> ContributorIndex
	<span class="token opcode property">LDA</span> Contributors, <span class="token register variable">Y</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$09</span>

	STA_abs ScreenUpdateIndex

	<span class="token opcode property">DEC</span> ContributorIndex
	<span class="token opcode property">BPL</span> ContributorTicker_Exit

	<span class="token opcode property">LDA</span> NumContributors
	<span class="token opcode property">STA</span> ContributorIndex

ContributorTicker_Exit:
	<span class="token opcode property">RTS</span>


EndingCelebrationText_MARIO:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$E6</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationText_PRINCESS:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$E9</span>, <span class="token hexnumber string">$EB</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E7</span>, <span class="token hexnumber string">$DC</span>, <span class="token hexnumber string">$DE</span>, <span class="token hexnumber string">$EC</span>, <span class="token hexnumber string">$EC</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationText_TOAD:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$E8</span>, <span class="token hexnumber string">$DA</span>, <span class="token hexnumber string">$DD</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>

EndingCelebrationText_LUIGI:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$20</span>, <span class="token hexnumber string">$ED</span>, <span class="token hexnumber string">$08</span>, <span class="token hexnumber string">$E5</span>, <span class="token hexnumber string">$EE</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$E0</span>, <span class="token hexnumber string">$E2</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>, <span class="token hexnumber string">$FB</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l6889" href="#l6889" title="Link to line 6889">#</a><code>sub_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">43</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$D0</span>

loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">45</span>:
	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">4</span>F

	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$0A</span>

loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">4</span>B:
	<span class="token opcode property">INY</span>
	<span class="token opcode property">JMP</span> loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">45</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6904" href="#l6904" title="Link to line 6904">#</a><code>loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">4</span>F:
	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">57</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$0FB</span>

loc_BANK<span class="token decimalnumber string">1</span>_AE<span class="token decimalnumber string">57</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>End of function sub_BANK1_AE43</p>
&nbsp;</aside><pre><a name="l6917" href="#l6917" title="Link to line 6917">#</a><code>&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l6919" href="#l6919" title="Link to line 6919">#</a><code>&nbsp;</code></pre><aside><p>Unused space in the original ($AE5A - $B8FF)</p>
&nbsp;</aside><pre><a name="l6921" href="#l6921" title="Link to line 6921">#</a><code>unusedSpace <span class="token hexnumber string">$B900</span>, <span class="token hexnumber string">$FF</span>

MysteryCharacterData<span class="token decimalnumber string">3900</span>:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FB</span> <span class="token comment">; @TODO ??? Not sure what this is</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$FF</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$08</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$0C</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$18</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$1A</span>

&nbsp;</code></pre><aside><p>NOTE: A copy of this subroutine also exists in Bank 2</p>
<p>Applies object physics for the y-axis</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l6941" href="#l6941" title="Link to line 6941">#</a><code>ApplyObjectPhysicsY_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">TXA</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$0A</span>
	<span class="token opcode property">TAX</span>
&nbsp;</code></pre><aside><p>NOTE: A copy of this subroutine also exists in Bank 2</p>
<p>Applies object physics for the x-axis</p>
<p>Input
X = enemy index, physics direction
($00-$09 for horizontal, $0A-$13 for vertical)</p>
<p>Output
X = RAM_12</p>
&nbsp;</aside><pre><a name="l6959" href="#l6959" title="Link to line 6959">#</a><code>ApplyObjectPhysicsX_Bank<span class="token decimalnumber string">1</span>:&nbsp;</code></pre><aside><p>Add acceleration to velocity</p>
&nbsp;</aside><pre><a name="l6961" href="#l6961" title="Link to line 6961">#</a><code>	<span class="token opcode property">LDA</span> ObjectXVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> ObjectXAcceleration, <span class="token register variable">X</span>

	<span class="token opcode property">PHA</span>&nbsp;</code></pre><aside><p>Lower nybble of velocity is for subpixel position</p>
&nbsp;</aside><pre><a name="l6967" href="#l6967" title="Link to line 6967">#</a><code>	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Upper nybble of velocity is for lo position</p>
&nbsp;</aside><pre><a name="l6974" href="#l6974" title="Link to line 6974">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>

	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BCC</span> ApplyObjectPhysics_StoreVelocityLo_Bank<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Left/up: Carry negative bits through upper nybble</p>
&nbsp;</aside><pre><a name="l6984" href="#l6984" title="Link to line 6984">#</a><code>	<span class="token opcode property">ORA</span> <span class="token hexnumber string">#$F0</span>

ApplyObjectPhysics_StoreVelocityLo_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">0</span>

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">BCC</span> ApplyObjectPhysics_StoreDirection_Bank<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Left/up</p>
&nbsp;</aside><pre><a name="l6994" href="#l6994" title="Link to line 6994">#</a><code>	<span class="token opcode property">DEY</span>

ApplyObjectPhysics_StoreDirection_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">2</span>
&nbsp;</code></pre><aside><p>Add lower nybble of velocity for subpixel position</p>
&nbsp;</aside><pre><a name="l7000" href="#l7000" title="Link to line 7000">#</a><code>	<span class="token opcode property">LDA</span> ObjectXSubpixel, <span class="token register variable">X</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectXSubpixel, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>Add upper nybble of velocity for lo position</p>
&nbsp;</aside><pre><a name="l7006" href="#l7006" title="Link to line 7006">#</a><code>	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>

ApplyObjectPhysics_PositionHi_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LSR</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>

ApplyObjectPhysics_Exit_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>Applies object physics</p>
<p>Input
X = enemy index</p>
&nbsp;</aside><pre><a name="l7028" href="#l7028" title="Link to line 7028">#</a><code>ApplyObjectMovement_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">BNE</span> ApplyObjectMovement_Vertical_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">JSR</span> ApplyObjectPhysicsX_Bank<span class="token decimalnumber string">1</span>

ApplyObjectMovement_Vertical_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">JSR</span> ApplyObjectPhysicsY_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> ApplyObjectMovement_Gravity_Bank<span class="token decimalnumber string">1</span>
&nbsp;</code></pre><aside><p>Check terminal velocity</p>
&nbsp;</aside><pre><a name="l7041" href="#l7041" title="Link to line 7041">#</a><code>	<span class="token opcode property">CMP</span> <span class="token hexnumber string">#$3E</span>
	<span class="token opcode property">BCS</span> ApplyObjectMovement_Exit_Bank<span class="token decimalnumber string">1</span>

ApplyObjectMovement_Gravity_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">INC</span> ObjectYVelocity, <span class="token register variable">X</span>

ApplyObjectMovement_Exit_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">RTS</span>


DoorAnimation_Locked:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> DoorAnimation

DoorAnimation_Unlocked:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

DoorAnimation:
	<span class="token opcode property">PHA</span>
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$08</span>

DoorAnimation_Loop:&nbsp;</code></pre><aside><p>skip if inactive</p>
&nbsp;</aside><pre><a name="l7065" href="#l7065" title="Link to line 7065">#</a><code>	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> DoorAnimation_LoopNext
&nbsp;</code></pre><aside><p>skip enemies that aren't the door</p>
&nbsp;</aside><pre><a name="l7069" href="#l7069" title="Link to line 7069">#</a><code>	<span class="token opcode property">LDA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">CMP</span> #Enemy_SubspaceDoor
	<span class="token opcode property">BNE</span> DoorAnimation_LoopNext

	<span class="token opcode property">LDA</span> #EnemyState_PuffOfSmoke
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">Y</span>

DoorAnimation_LoopNext:
	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> DoorAnimation_Loop

	<span class="token opcode property">JSR</span> CreateEnemy_TryAllSlots_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">BMI</span> DoorAnimation_Exit

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> DoorAnimationTimer
	<span class="token opcode property">STA</span> SubspaceDoorTimer
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #Enemy_SubspaceDoor
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerXLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerXHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> PlayerYHi
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span> | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

DoorAnimation_Exit:
	<span class="token opcode property">PLA</span>
	<span class="token opcode property">RTS</span>


CreateStarman:
	<span class="token opcode property">JSR</span> CreateEnemy_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">BMI</span> CreateStarman_Exit

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> #Enemy_Starman
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$D0</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenBoundaryLeftHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYLo
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$E0</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ScreenYHi
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">JSR</span> loc_BANK<span class="token decimalnumber string">1</span>_BA<span class="token decimalnumber string">17</span>

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>

CreateStarman_Exit:
	<span class="token opcode property">RTS</span>


&nbsp;</code></pre><aside><p>=============== S U B R O U T I N E =======================================</p>
&nbsp;</aside><pre><a name="l7144" href="#l7144" title="Link to line 7144">#</a><code>EnemyInit_Basic_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyVariable, <span class="token register variable">X</span>

loc_BANK<span class="token decimalnumber string">1</span>_B<span class="token decimalnumber string">9</span>EB:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyArray_B<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">42</span>F, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectBeingCarriedTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectShakeTimer, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyCollision, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">453</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYAcceleration, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">45</span>C, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">477</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">480</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> EnemyHP, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYVelocity, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectXVelocity, <span class="token register variable">X</span>
&nbsp;</code></pre><aside><p>look up object attributes</p>
&nbsp;</aside><pre><a name="l7171" href="#l7171" title="Link to line 7171">#</a><code>loc_BANK<span class="token decimalnumber string">1</span>_BA<span class="token decimalnumber string">17</span>:
	<span class="token opcode property">LDY</span> ObjectType, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> ObjectAttributeTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> #ObjAttrib_Palette | ObjAttrib_Horizontal | ObjAttrib_FrontFacing | ObjAttrib_Mirrored | ObjAttrib_BehindBackground | ObjAttrib_<span class="token decimalnumber string">16</span><span class="token register variable">x</span><span class="token decimalnumber string">32</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">46</span>E_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">46</span>E, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">489</span>_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">489</span>, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> EnemyArray_<span class="token decimalnumber string">492</span>_Data, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">492</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>End of function EnemyInit_Basic_Bank1</p>
&nbsp;</aside><pre><a name="l7185" href="#l7185" title="Link to line 7185">#</a><code>&nbsp;</code></pre><aside><p>Turns the key into a puff of smoke</p>
<p>Input
X = enemy slot
Output
X = value of byte_RAM_12</p>
&nbsp;</aside><pre><a name="l7195" href="#l7195" title="Link to line 7195">#</a><code>TurnKeyIntoPuffOfSmoke:
	<span class="token opcode property">LDA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%11111100</span>
	<span class="token opcode property">ORA</span> #ObjAttrib_Palette<span class="token decimalnumber string">1</span>
	<span class="token opcode property">STA</span> ObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> #EnemyState_PuffOfSmoke
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectAnimationTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$1F</span>
	<span class="token opcode property">STA</span> EnemyTimer, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>NOTE: This is a copy of the "UnlinkEnemyFromRawData" routine in Bank 2, but
it is used here for spawning the door animation and Starman objects.</p>
<p>Spawned enemies are linked to an offset in the raw enemy data, which prevents
from being respawned until they are killed or moved offscreen.</p>
<p>This subroutine ensures that the enemy in a particular slot is not linked to
the raw enemy data</p>
<p>Input
X = enemy slot</p>
&nbsp;</aside><pre><a name="l7222" href="#l7222" title="Link to line 7222">#</a><code>UnlinkEnemyFromRawData_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$0FF</span>
	<span class="token opcode property">STA</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Updates the area page and tile placement offset</p>
<p>Input
byte_RAM_E8 = area page
byte_RAM_E5 = tile placement offset shift
byte_RAM_E6 = previous tile placement offset
Output
RAM_1 = low byte of decoded level data RAM
RAM_2 = low byte of decoded level data RAM
byte_RAM_E7 = target tile placement offset</p>
&nbsp;</aside><pre><a name="l7240" href="#l7240" title="Link to line 7240">#</a><code>SetTileOffsetAndAreaPageAddr_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDX</span> byte_RAM_E<span class="token decimalnumber string">8</span>
	<span class="token opcode property">JSR</span> SetAreaPageAddr_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDA</span> byte_RAM_E<span class="token decimalnumber string">6</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> byte_RAM_E<span class="token decimalnumber string">5</span>
	<span class="token opcode property">STA</span> byte_RAM_E<span class="token decimalnumber string">7</span>
	<span class="token opcode property">RTS</span>


DecodedLevelPageStartLo_Bank<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> &#x3C;DecodedLevelData
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$00F0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$01E0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$02D0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$03C0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$04B0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$05A0</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$0690</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$0780</span>)
	<span class="token directive keyword">.db</span> &#x3C;(DecodedLevelData+<span class="token hexnumber string">$0870</span>)
	<span class="token directive keyword">.db</span> &#x3C;(SubAreaTileLayout)

DecodedLevelPageStartHi_Bank<span class="token decimalnumber string">1</span>:
	<span class="token directive keyword">.db</span> >DecodedLevelData
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$00F0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$01E0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$02D0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$03C0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$04B0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$05A0</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$0690</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$0780</span>)
	<span class="token directive keyword">.db</span> >(DecodedLevelData+<span class="token hexnumber string">$0870</span>)
	<span class="token directive keyword">.db</span> >(SubAreaTileLayout)

&nbsp;</code></pre><aside><p>Updates the area page that we're reading tiles from</p>
<p>Input
X = area page
Output
byte_RAM_1 = low byte of decoded level data RAM
byte_RAM_2 = low byte of decoded level data RAM</p>
&nbsp;</aside><pre><a name="l7287" href="#l7287" title="Link to line 7287">#</a><code>SetAreaPageAddr_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDA</span> DecodedLevelPageStartLo_Bank<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">1</span>
	<span class="token opcode property">LDA</span> DecodedLevelPageStartHi_Bank<span class="token decimalnumber string">1</span>, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">2</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>Checks whether the player is on a quicksand tile</p>
<p>Input
byte_RAM_0 = tile ID
Output
A = Whether the player is sinking in quicksand
X = PlayerInAir flag</p>
&nbsp;</aside><pre><a name="l7304" href="#l7304" title="Link to line 7304">#</a><code>IFNDEF ENABLE_TILE_ATTRIBUTES_TABLE
PlayerTileCollision_CheckQuicksand:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">CPY</span> #BackgroundTile_QuicksandSlow
	<span class="token opcode property">BEQ</span> PlayerTileCollision_QuicksandSlow

	<span class="token opcode property">CPY</span> #BackgroundTile_QuicksandFast
	<span class="token opcode property">BEQ</span> PlayerTileCollision_QuicksandFast

ELSE
PlayerTileCollision_CheckQuicksand:
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">LDA</span> InteractiveTileCollisionTable, <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">#%00001100</span>
	<span class="token opcode property">CMP</span> <span class="token binarynumber string">#%00001000</span>

	<span class="token opcode property">BNE</span> PlayerTileCollision_NotQuicksand

	<span class="token opcode property">TYA</span>
	<span class="token opcode property">AND</span> <span class="token binarynumber string">%00000001</span>
	<span class="token opcode property">BNE</span> PlayerTileCollision_QuicksandFast

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$01</span>
	<span class="token opcode property">BNE</span> PlayerTileCollision_QuicksandSlow
ENDIF

PlayerTileCollision_NotQuicksand:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">RTS</span>

PlayerTileCollision_QuicksandFast:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$08</span>

PlayerTileCollision_QuicksandSlow:
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> QuicksandDepth
	<span class="token opcode property">BNE</span> loc_BANK<span class="token decimalnumber string">1</span>_BA<span class="token decimalnumber string">9</span>B

	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> byte_RAM_<span class="token decimalnumber string">4</span>EB

loc_BANK<span class="token decimalnumber string">1</span>_BA<span class="token decimalnumber string">9</span>B:&nbsp;</code></pre><aside><p>check if player is too far under</p>
&nbsp;</aside><pre><a name="l7349" href="#l7349" title="Link to line 7349">#</a><code>	<span class="token opcode property">LDA</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$0F</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">4</span>EB
	<span class="token opcode property">EOR</span> PlayerYLo
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BEQ</span> loc_BANK<span class="token decimalnumber string">1</span>_BAB<span class="token decimalnumber string">6</span>
&nbsp;</code></pre><aside><p>kill if >= this check</p>
&nbsp;</aside><pre><a name="l7358" href="#l7358" title="Link to line 7358">#</a><code>	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$0C</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_BAB<span class="token decimalnumber string">4</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">JSR</span> KillPlayer

loc_BANK<span class="token decimalnumber string">1</span>_BAB<span class="token decimalnumber string">4</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$04</span>

loc_BANK<span class="token decimalnumber string">1</span>_BAB<span class="token decimalnumber string">6</span>:
	<span class="token opcode property">CPY</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BCS</span> loc_BANK<span class="token decimalnumber string">1</span>_BABC

	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$01</span>

loc_BANK<span class="token decimalnumber string">1</span>_BABC:
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">DEX</span>
	<span class="token opcode property">RTS</span>


PlayerTileCollision_HurtPlayer:
	<span class="token opcode property">LDA</span> DamageInvulnTime
	<span class="token opcode property">BNE</span> locret_BANK<span class="token decimalnumber string">1</span>_BAEC

	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">BCC</span> loc_BANK<span class="token decimalnumber string">1</span>_BAED

	<span class="token opcode property">STA</span> PlayerHealth
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STA</span> DamageInvulnTime
	<span class="token opcode property">LDA</span> PlayerScreenX
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> SpriteTempScreenX
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> PlayerXVelocity
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">LDY</span> PlayerYVelocity
	<span class="token opcode property">BPL</span> loc_BANK<span class="token decimalnumber string">1</span>_BAE<span class="token decimalnumber string">5</span>

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>

loc_BANK<span class="token decimalnumber string">1</span>_BAE<span class="token decimalnumber string">5</span>:
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> #DPCM_PlayerHurt
	<span class="token opcode property">STA</span> DPCMQueue

locret_BANK<span class="token decimalnumber string">1</span>_BAEC:
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7413" href="#l7413" title="Link to line 7413">#</a><code>loc_BANK<span class="token decimalnumber string">1</span>_BAED:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$C0</span>
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$20</span>
	<span class="token opcode property">STA</span> PlayerStateTimer
	<span class="token opcode property">LDY</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">1</span>_BAFD

	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_<span class="token decimalnumber string">438</span>, <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">1</span>_BAFD:
	<span class="token opcode property">JMP</span> KillPlayer


&nbsp;</code></pre><aside><hr>
&nbsp;</aside><pre><a name="l7430" href="#l7430" title="Link to line 7430">#</a><code>_code_<span class="token decimalnumber string">3</span>B<span class="token decimalnumber string">00</span>:
	<span class="token opcode property">LDY</span> unk_RAM_<span class="token decimalnumber string">441</span>, <span class="token register variable">X</span>
	<span class="token opcode property">BMI</span> loc_BANK<span class="token decimalnumber string">1</span>_BB<span class="token decimalnumber string">0</span>B

	<span class="token opcode property">LDA</span> (RawEnemyData), <span class="token register variable">Y</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$7F</span>
	<span class="token opcode property">STA</span> (RawEnemyData), <span class="token register variable">Y</span>

loc_BANK<span class="token decimalnumber string">1</span>_BB<span class="token decimalnumber string">0</span>B:
	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">X</span>
	<span class="token opcode property">RTS</span>

&nbsp;</code></pre><aside><p>NOTE: This is a copy of the "CreateEnemy" routine in Bank 2, but it is used
here for spawning the door animation and Starman objects.</p>
<p>Creates a generic red Shyguy enemy and
does some basic initialization for it.</p>
<p>CreateEnemy_TryAllSlots checks all 9 object slots
CreateEnemy only checks the first 6 object slots</p>
<p>Output
N = enabled if no empty slot was found
Y = $FF if there no empty slot was found
byte_RAM_0 = slot used</p>
&nbsp;</aside><pre><a name="l7460" href="#l7460" title="Link to line 7460">#</a><code>CreateEnemy_TryAllSlots_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">BNE</span> CreateEnemy_Bank<span class="token decimalnumber string">1</span>_FindSlot

CreateEnemy_Bank<span class="token decimalnumber string">1</span>:
	<span class="token opcode property">LDY</span> <span class="token hexnumber string">#$05</span>

CreateEnemy_Bank<span class="token decimalnumber string">1</span>_FindSlot:
	<span class="token opcode property">LDA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">BEQ</span> CreateEnemy_Bank<span class="token decimalnumber string">1</span>_FoundSlot

	<span class="token opcode property">DEY</span>
	<span class="token opcode property">BPL</span> CreateEnemy_Bank<span class="token decimalnumber string">1</span>_FindSlot

	<span class="token opcode property">RTS</span>

CreateEnemy_Bank<span class="token decimalnumber string">1</span>_FoundSlot:
	<span class="token opcode property">LDA</span> #EnemyState_Alive
	<span class="token opcode property">STA</span> EnemyState, <span class="token register variable">Y</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">STA</span> EnemyArray_SpawnsDoor, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> #Enemy_ShyguyRed
	<span class="token opcode property">STA</span> ObjectType, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXLo, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$05</span>
	<span class="token opcode property">STA</span> ObjectXLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectXHi, <span class="token register variable">X</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> ObjectXHi, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYLo, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYLo, <span class="token register variable">Y</span>
	<span class="token opcode property">LDA</span> ObjectYHi, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> ObjectYHi, <span class="token register variable">Y</span>
	<span class="token opcode property">STY</span> byte_RAM_<span class="token decimalnumber string">0</span>
	<span class="token opcode property">TYA</span>
	<span class="token opcode property">TAX</span>

	<span class="token opcode property">JSR</span> EnemyInit_Basic_Bank<span class="token decimalnumber string">1</span>
	<span class="token opcode property">JSR</span> UnlinkEnemyFromRawData_Bank<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDX</span> byte_RAM_<span class="token decimalnumber string">12</span>
	<span class="token opcode property">RTS</span>


IFDEF CONTROLLER_<span class="token decimalnumber string">2</span>_DEBUG
ChangeCharacterOffsets:
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; unused</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; Mario to right</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; Mario to left</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Princess to right</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; Princess to left</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$01</span> <span class="token comment">; Toad to right</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$03</span> <span class="token comment">; Toad to left</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$02</span> <span class="token comment">; Luigi to right</span>
	<span class="token directive keyword">.db</span> <span class="token hexnumber string">$00</span> <span class="token comment">; Luigi to left</span>

CheckPlayer<span class="token decimalnumber string">2</span>Joypad:
	<span class="token opcode property">LDA</span> ChangeCharacterTimer
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_Go

	<span class="token opcode property">DEC</span> ChangeCharacterTimer

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_No:
	<span class="token opcode property">RTS</span>

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_Go:
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">CMP</span> #PlayerState_Dying
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_No

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckSelect:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Select
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckUp

	<span class="token opcode property">LDA</span> CurrentLevel_Init
	<span class="token opcode property">STA</span> CurrentLevel
	<span class="token opcode property">LDA</span> CurrentLevelArea_Init
	<span class="token opcode property">STA</span> CurrentLevelArea
	<span class="token opcode property">LDA</span> CurrentLevelEntryPage_Init
	<span class="token opcode property">STA</span> CurrentLevelEntryPage
	<span class="token opcode property">LDA</span> TransitionType_Init
	<span class="token opcode property">STA</span> TransitionType

	<span class="token opcode property">LDA</span> PlayerXLo_Init
	<span class="token opcode property">STA</span> PlayerXLo
	<span class="token opcode property">LDA</span> PlayerYLo_Init
	<span class="token opcode property">STA</span> PlayerYLo
	<span class="token opcode property">LDA</span> PlayerScreenX_Init
	<span class="token opcode property">STA</span> PlayerScreenX
	<span class="token opcode property">LDA</span> PlayerScreenYLo_Init
	<span class="token opcode property">STA</span> PlayerScreenYLo
	<span class="token opcode property">LDA</span> PlayerYVelocity_Init
	<span class="token opcode property">STA</span> PlayerYVelocity
	<span class="token opcode property">LDA</span> PlayerState_Init
	<span class="token opcode property">STA</span> PlayerState

	<span class="token opcode property">LDA</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">STA</span> PlayerXVelocity

	<span class="token opcode property">JSR</span> DoAreaReset

	<span class="token opcode property">JMP</span> StartLevel

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckUp:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Up
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckDown

	<span class="token opcode property">LDY</span> PlayerMaxHealth
	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">CMP</span> PlayerHealthValueByHeartCount, <span class="token register variable">Y</span>
	<span class="token opcode property">BPL</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckDown

	<span class="token opcode property">LDA</span> #SoundEffect<span class="token decimalnumber string">1</span>_CherryGet
	<span class="token opcode property">STA</span> SoundEffectQueue<span class="token decimalnumber string">1</span>

	<span class="token opcode property">LDY</span> PlayerMaxHealth
	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerHealth

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckDown:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Down
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckStart

	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$F0</span>
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckStart

	<span class="token opcode property">LDA</span> #DPCM_PlayerHurt
	<span class="token opcode property">STA</span> DPCMQueue

	<span class="token opcode property">LDA</span> PlayerHealth
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> <span class="token hexnumber string">#$10</span>
	<span class="token opcode property">STA</span> PlayerHealth

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckStart:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Start
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckButtonA

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">LDA</span> StopwatchTimer
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_SetStopwatchTimer

	<span class="token opcode property">INX</span>

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_SetStopwatchTimer:
	<span class="token opcode property">STX</span> StopwatchTimer

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckButtonA:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_A
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckLeftRight

	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadHeld
	<span class="token opcode property">AND</span> #ControllerInput_B
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_NoButtonB

	<span class="token opcode property">JSR</span> DebugRandomObject
	<span class="token opcode property">BNE</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckLeftRight

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_NoButtonB:
	<span class="token opcode property">JSR</span> RandomCarryObject

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_CheckLeftRight:
	<span class="token opcode property">LDA</span> Player<span class="token decimalnumber string">2</span>JoypadPress
	<span class="token opcode property">AND</span> #ControllerInput_Right | ControllerInput_Left
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_Exit
	<span class="token opcode property">CMP</span> #ControllerInput_Right | ControllerInput_Left
	<span class="token opcode property">BEQ</span> CheckPlayer<span class="token decimalnumber string">2</span>Joypad_Exit

	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> CurrentCharacter
	<span class="token opcode property">ADC</span> CurrentCharacter

	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDA</span> ChangeCharacterOffsets, <span class="token register variable">Y</span>

	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$18</span>
	<span class="token opcode property">STX</span> ChangeCharacterTimer
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$08</span>
	<span class="token opcode property">STX</span> ChangeCharacterPoofTimer

	<span class="token opcode property">BNE</span> CheckSetCurrentCharacter

CheckPlayer<span class="token decimalnumber string">2</span>Joypad_Exit:
	<span class="token opcode property">RTS</span>
&nbsp;</code></pre><aside><p>Changes the current character</p>
<p>Input
A = target character</p>
&nbsp;</aside><pre><a name="l7659" href="#l7659" title="Link to line 7659">#</a><code>CheckSetCurrentCharacter:
	<span class="token opcode property">CMP</span> CurrentCharacter
	<span class="token opcode property">BNE</span> SetCurrentCharacter

	<span class="token opcode property">RTS</span>

SetCurrentCharacter:
	<span class="token opcode property">STA</span> CurrentCharacter

	<span class="token opcode property">LDA</span> GravityWithJumpButton
	<span class="token opcode property">PHA</span>

	<span class="token opcode property">LDX</span> CurrentCharacter
	<span class="token opcode property">LDY</span> StatOffsetsRAM, <span class="token register variable">X</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
SetCurrentCharacter_StatsLoop:
	<span class="token opcode property">LDA</span> StatOffsetsRAM + CharacterStats-StatOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> CharacterStatsRAM, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$17</span>
	<span class="token opcode property">BCC</span> SetCurrentCharacter_StatsLoop

	<span class="token opcode property">LDA</span> CurrentCharacter
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">ASL</span> <span class="token register variable">A</span>
	<span class="token opcode property">TAY</span>
	<span class="token opcode property">LDX</span> <span class="token hexnumber string">#$00</span>
SetCurrentCharacter_PaletteLoop:
	<span class="token opcode property">LDA</span> StatOffsetsRAM + CharacterPalette-StatOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> RestorePlayerPalette<span class="token decimalnumber string">0</span>, <span class="token register variable">X</span>
	<span class="token opcode property">INY</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$04</span>
	<span class="token opcode property">BCC</span> SetCurrentCharacter_PaletteLoop
&nbsp;</code></pre><aside><p>load carry offsets</p>
&nbsp;</aside><pre><a name="l7696" href="#l7696" title="Link to line 7696">#</a><code>	<span class="token opcode property">LDY</span> CurrentCharacter
	<span class="token opcode property">LDA</span> CarryYOffsetsRAM + CarryYOffsetBigLo-CarryYOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM
	<span class="token opcode property">LDA</span> CarryYOffsetsRAM + CarryYOffsetSmallLo-CarryYOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM + <span class="token hexnumber string">$07</span>
	<span class="token opcode property">LDA</span> CarryYOffsetsRAM + CarryYOffsetBigHi-CarryYOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM + <span class="token hexnumber string">$0E</span>
	<span class="token opcode property">LDA</span> CarryYOffsetsRAM + CarryYOffsetSmallHi-CarryYOffsets, <span class="token register variable">Y</span>
	<span class="token opcode property">STA</span> ItemCarryYOffsetsRAM + <span class="token hexnumber string">$15</span>
&nbsp;</code></pre><aside><p>interrupt floating if this character can't do it</p>
&nbsp;</aside><pre><a name="l7707" href="#l7707" title="Link to line 7707">#</a><code>	<span class="token opcode property">LDA</span> JumpFloatLength
	<span class="token opcode property">BEQ</span> SetCurrentCharacter_SetJumpFloatTimer
&nbsp;</code></pre><aside><p>if already floating, keep going</p>
&nbsp;</aside><pre><a name="l7711" href="#l7711" title="Link to line 7711">#</a><code>	<span class="token opcode property">CMP</span> JumpFloatTimer
	<span class="token opcode property">BCC</span> SetCurrentCharacter_CheckGravityChange

SetCurrentCharacter_SetJumpFloatTimer:
	<span class="token opcode property">STA</span> JumpFloatTimer

SetCurrentCharacter_CheckGravityChange:&nbsp;</code></pre><aside><p>check whether gravity is increasing</p>
&nbsp;</aside><pre><a name="l7719" href="#l7719" title="Link to line 7719">#</a><code>	<span class="token opcode property">PLA</span>
	<span class="token opcode property">SEC</span>
	<span class="token opcode property">SBC</span> GravityWithJumpButton
	<span class="token opcode property">BEQ</span> SetCurrentCharacter_Update
&nbsp;</code></pre><aside><p>stash velocity delta in X</p>
&nbsp;</aside><pre><a name="l7725" href="#l7725" title="Link to line 7725">#</a><code>	<span class="token opcode property">TAX</span>
&nbsp;</code></pre><aside><p>check whether y-velocity is negative</p>
&nbsp;</aside><pre><a name="l7728" href="#l7728" title="Link to line 7728">#</a><code>	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">BPL</span> SetCurrentCharacter_Update

	<span class="token opcode property">CPX</span> <span class="token hexnumber string">#$00</span>
	<span class="token opcode property">BPL</span> SetCurrentCharacter_ClampYVelocity
&nbsp;</code></pre><aside><p>scale y-velocity based on difference in gravity</p>
&nbsp;</aside><pre><a name="l7735" href="#l7735" title="Link to line 7735">#</a><code>	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">CLC</span>
	<span class="token opcode property">ADC</span> <span class="token hexnumber string">#$01</span>

	<span class="token opcode property">DEX</span>
SetCurrentCharacter_ScaleVelocityYUp_Loop:
	<span class="token opcode property">ASL</span>
	<span class="token opcode property">INX</span>
	<span class="token opcode property">BEQ</span> SetCurrentCharacter_ScaleVelocityYUp_Loop

	<span class="token opcode property">EOR</span> <span class="token hexnumber string">#$FF</span>
	<span class="token opcode property">STA</span> PlayerYVelocity

	<span class="token opcode property">JMP</span> SetCurrentCharacter_Update

SetCurrentCharacter_ClampYVelocity:
	<span class="token opcode property">LDA</span> PlayerYVelocity
	<span class="token opcode property">CMP</span> JumpHeightRunning

	<span class="token opcode property">BPL</span> SetCurrentCharacter_Update

	<span class="token opcode property">LDA</span> JumpHeightStandingCarrying
	<span class="token opcode property">STA</span> PlayerYVelocity

SetCurrentCharacter_Update:
	<span class="token opcode property">INC</span> SkyFlashTimer
&nbsp;</code></pre><aside><p>update chr for character</p>
&nbsp;</aside><pre><a name="l7763" href="#l7763" title="Link to line 7763">#</a><code>	<span class="token opcode property">JSR</span> LoadCharacterCHRBanks

	<span class="token opcode property">LDA</span> #DPCM_PlayerDeath
	<span class="token opcode property">STA</span> DPCMQueue

SetCurrentCharacter_Exit:
	<span class="token opcode property">RTS</span>


RandomCarryObjectTypes:
	<span class="token directive keyword">.db</span> #Enemy_VegetableSmall
	<span class="token directive keyword">.db</span> #Enemy_VegetableLarge
	<span class="token directive keyword">.db</span> #Enemy_Shell
	<span class="token directive keyword">.db</span> #Enemy_Bomb
	<span class="token directive keyword">.db</span> #Enemy_ShyguyRed
	<span class="token directive keyword">.db</span> #Enemy_Tweeter
	<span class="token directive keyword">.db</span> #Enemy_SnifitRed
	<span class="token directive keyword">.db</span> #Enemy_Egg
&nbsp;</code></pre><aside><p>bit 7: put in player's hands
bit 6: set enemy timer
bit 5: start at bottom of screen
bit 4:
bit 3:
bit 2:
bit 1: set thrown flag
bit 0: disable velocity reset</p>
&nbsp;</aside><pre><a name="l7790" href="#l7790" title="Link to line 7790">#</a><code>RandomCarryObjectAttributes:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000000</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000000</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000000</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%11000000</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000001</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000001</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000001</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%10000001</span>


RandomCarryObject:
	<span class="token opcode property">LDA</span> PlayerState
	<span class="token opcode property">BNE</span> RandomCarryObject_Exit
	<span class="token opcode property">LDA</span> HoldingItem
	<span class="token opcode property">BNE</span> RandomCarryObject_Exit

	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> RandomCarryObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> CreateObjectAttributes
	<span class="token opcode property">LDA</span> RandomCarryObjectTypes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> CreateObjectType

RandomCarryObject_Exit:
	<span class="token opcode property">RTS</span>


DebugRandomObjectTypes:
	<span class="token directive keyword">.db</span> #Enemy_Bomb
	<span class="token directive keyword">.db</span> #Enemy_Bomb
	<span class="token directive keyword">.db</span> #Enemy_POWBlock
	<span class="token directive keyword">.db</span> #Enemy_POWBlock
	<span class="token directive keyword">.db</span> #Enemy_POWBlock
	<span class="token directive keyword">.db</span> #Enemy_Starman
	<span class="token directive keyword">.db</span> #Enemy_Starman
	<span class="token directive keyword">.db</span> #Enemy_Starman

DebugRandomObjectAttributes:
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%01000010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00000010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00100010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00100010</span>
	<span class="token directive keyword">.db</span> <span class="token binarynumber string">%00100010</span>


DebugRandomObject:
	<span class="token opcode property">LDA</span> byte_RAM_<span class="token decimalnumber string">10</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">LSR</span> <span class="token register variable">A</span>
	<span class="token opcode property">AND</span> <span class="token hexnumber string">#$07</span>
	<span class="token opcode property">TAX</span>
	<span class="token opcode property">LDA</span> DebugRandomObjectAttributes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> CreateObjectAttributes
	<span class="token opcode property">LDA</span> DebugRandomObjectTypes, <span class="token register variable">X</span>
	<span class="token opcode property">STA</span> CreateObjectType
	<span class="token opcode property">RTS</span>
ENDIF
&nbsp;</code></pre></section></article></main><footer class="sc-htpNat iPvEnY"><p>All product names, logos, and brands are property of their respective owners.</p><p>Annotated disassembly site generator © <!-- -->2019<!-- --> <!-- -->Keith McKnight</p><ul><li><a href="https://github.com/XKeeper0/smb2">GitHub</a></li><li><a href="https://discord.gg/TsWMMeV">Discord</a></li></ul></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/src/prg-0-1.asm";window.webpackCompilationHash="2ea601db5f4c75781233";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e5123abf2b9d78ccb9b7.js"],"component---src-templates-asm-source-jsx":["/component---src-templates-asm-source-jsx-2a3033eb4063531183b6.js"],"component---src-templates-asm-directory-jsx":["/component---src-templates-asm-directory-jsx-de110ce639b73c006858.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-2d3be97110fe6b1cc813.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-90677ee39103ae00023b.js"]};/*]]>*/</script><script src="/component---src-templates-asm-source-jsx-2a3033eb4063531183b6.js" async=""></script><script src="/commons-96edcb9e9a406c302a22.js" async=""></script><script src="/app-e5123abf2b9d78ccb9b7.js" async=""></script><script src="/webpack-runtime-14b29e9f338a0ab3ef0b.js" async=""></script></body></html>